namespace ns3
{
      using LuaInterface;
      using ns0;
      using ns1;
      using ns10;
      using ns11;
      using ns12;
      using ns13;
      using ns2;
      using ns4;
      using ns5;
      using ns6;
      using ns7;
      using ns8;
      using ns9;
      using RxjhServer;
      using System;
      using System.Collections;
      using System.Collections.Generic;
      using System.Data;
      using System.Data.SqlClient;
      using System.IO;
      using System.Reflection;
      using System.Text;
      using System.Text.RegularExpressions;
      using System.Timers;

      public class Players: PlayersBes, IDisposable
      {
            private bool bool_13;
            private bool bool_14;
            private bool bool_15;
            public DateTime dateTime_10;
            public DateTime dateTime_11;
            public DateTime dateTime_12;
            public DateTime dateTime_13;
            public DateTime dateTime_14;
            public DateTime dateTime_15;
            public DateTime dateTime_9;
            private Dictionary<int, HcItimesClass> HOP_THANH_VAT_PHAM_BIEU_MAU;
            public int int_116;
            private int int_117;
            private int int_118;
            public int int_119;
            private int int_120;
            public int int_122;
            public int int_123;
            public int int_124;
            public int int_125;
            public int int_126;
            public int int_127;
            private long long_16;
            public int NGUYEN_BAO_HOP_THANH_MO_RA;
            private object object_3;
            private object object_4;
            private object object_5;
            private object object_6;
            private object object_7;
            private object object_8;
            private object object_9;
            public DateTime thoigian;
            private ThreadSafeDictionary<int, Players> threadSafeDictionary_5;
            public Timer timer_1;
            public Timer timer_2;
            public Timer timer_3;

            public Players(NetState client) : base(client)
            {
                  this.object_3 = new object();
                  this.object_4 = new object();
                  this.object_5 = new object();
                  this.object_6 = new object();
                  this.object_7 = new object();
                  this.object_8 = new object();
                  this.dateTime_9 = DateTime.Now;
                  this.int_117 = 0x28e0;
                  this.int_118 = 1;
                  this.HOP_THANH_VAT_PHAM_BIEU_MAU = new Dictionary<int, HcItimesClass>();
                  this.dateTime_10 = DateTime.Now;
                  this.dateTime_11 = DateTime.Now;
                  this.dateTime_12 = DateTime.Now;
                  this.dateTime_13 = DateTime.Now;
                  this.dateTime_14 = DateTime.Now;
                  this.dateTime_15 = DateTime.Now;
                  this.int_122 = -1;
                  this.object_9 = new object();
                  this.threadSafeDictionary_5 = new ThreadSafeDictionary<int, Players>();
            }

            public void AccessBBG(byte[] byte_5, int int_128)
            {
                  if (this.NGUYEN_BAO_HOP_THANH_MO_RA != 1)
                  {
                        byte[] dst = new byte[4];
                        Buffer.BlockCopy(byte_5, 11, dst, 0, 1);
                        switch (BitConverter.ToInt32(dst, 0))
                        {
                              case 1:
                                    {
                                          PacketData data = new PacketData();
                                          data.method_2(1);
                                          data.method_2(1);
                                          data.Write2(World.Server_ID);
                                          data.Write2(World.Server_Group_ID);
                                          data.method_11(World.Bach_bao_cac_dia_chi);
                                          data.Write2(0);
                                          if (base.Client != null)
                                          {
                                                base.Client.method_5(data, 0xd500, 0, 1);
                                          }
                                          break;
                                    }
                              case 2:
                                    {
                                          byte[] buffer2 = Converter.hexStringToByte("AA551000000000D500010002000000000000000055AA");
                                          if (base.Client != null)
                                          {
                                                base.Client.Send(buffer2, buffer2.Length);
                                          }
                                          break;
                                    }
                        }
                  }
            }

            public void ActionExpress(byte[] byte_5, int int_128)
            {
                  this.Emotion2(byte_5[11]);
            }

            private void AddAcensionQigongPoint(byte[] byte_5, int int_128)
            {
                  TBL_XWWL_KONGFU tbl_xwwl_kongfu;
                  int key = BitConverter.ToInt32(byte_5, 11);
                  if (World.TBL_KONGFU.TryGetValue(key, out tbl_xwwl_kongfu) && (tbl_xwwl_kongfu.FLD_VO_CONG_LOAI_HINH == 3))
                  {
                        if (((key == 0x1efadd) && (base.Player_Job == 9)) && (base.class79_0[3, tbl_xwwl_kongfu.FLD_INDEX] == null))
                        {
                              TBL_XWWL_KONGFU.Learn_Martial_Book(this, 3, 13);
                              base.Player_ExpErience -= 0x4c4b40;
                              base.Player_Money -= 0x1dcd6500L;
                              base.UpdatePowersAndStatus();
                              base.UpdateExperience();
                        }
                        else if (((key == 0x1efade) && (base.Player_Job == 9)) && (base.class79_0[3, tbl_xwwl_kongfu.FLD_INDEX] == null))
                        {
                              TBL_XWWL_KONGFU.Learn_Martial_Book(this, 3, 14);
                              base.Player_ExpErience -= 0x4c4b40;
                              base.Player_Money -= 0x1dcd6500L;
                              base.UpdatePowersAndStatus();
                              base.UpdateExperience();
                        }
                        else if (((key == 0x1efadf) && (base.Player_Job == 9)) && (base.class79_0[3, tbl_xwwl_kongfu.FLD_INDEX] == null))
                        {
                              TBL_XWWL_KONGFU.Learn_Martial_Book(this, 3, 15);
                              base.Player_ExpErience -= 0x4c4b40;
                              base.Player_Money -= 0x1dcd6500L;
                              this.Learn_Skill_Tip(1);
                              base.UpdatePowersAndStatus();
                              base.UpdateExperience();
                              base.UpdateMoneyAndWeight();
                        }
                        else if (((base.Player_ExpErience >= (tbl_xwwl_kongfu.FLD_NEEDEXP + ((base.class79_0[3, tbl_xwwl_kongfu.FLD_INDEX].VO_CONG_THU_BAC - 1) * base.class79_0[3, tbl_xwwl_kongfu.FLD_INDEX].FLD_MOI_CAP_THEM_KINH_NGHIEM))) && (base.int_15 >= (base.class79_0[3, tbl_xwwl_kongfu.FLD_INDEX].VO_CONG_THU_BAC * base.class79_0[3, tbl_xwwl_kongfu.FLD_INDEX].FLD_MOI_CAP_VO_CONG_DIEM_SO))) && (base.class79_0[3, tbl_xwwl_kongfu.FLD_INDEX].VO_CONG_THU_BAC < 10))
                        {
                              base.Player_ExpErience -= tbl_xwwl_kongfu.FLD_NEEDEXP + ((base.class79_0[3, tbl_xwwl_kongfu.FLD_INDEX].VO_CONG_THU_BAC - 1) * base.class79_0[3, tbl_xwwl_kongfu.FLD_INDEX].FLD_MOI_CAP_THEM_KINH_NGHIEM);
                              base.int_15 -= base.class79_0[3, tbl_xwwl_kongfu.FLD_INDEX].VO_CONG_THU_BAC * base.class79_0[3, tbl_xwwl_kongfu.FLD_INDEX].FLD_MOI_CAP_VO_CONG_DIEM_SO;
                              TBL_XWWL_KONGFU tbl_xwwl_kongfu1 = base.class79_0[3, tbl_xwwl_kongfu.FLD_INDEX];
                              tbl_xwwl_kongfu1.VO_CONG_THU_BAC++;
                              base.UpdateExperience();
                              base.UpdatePowersAndStatus();
                        }
                  }
            }

            public void AddQigongPoint(byte[] byte_5, int int_128)
            {
                  this.Packet_Modify(byte_5, int_128);
                  if (base.Player_Qigong_point >= 1)
                  {
                        try
                        {
                              int num4;
                              byte[] dst = new byte[2];
                              Buffer.BlockCopy(byte_5, 0x47, dst, 0, 2);
                              int key = BitConverter.ToUInt16(dst, 0);
                              if (key < 300)
                              {
                                    for (int i = 0; i < 12; i++)
                                    {
                                          byte[] buffer2 = new byte[2];
                                          Buffer.BlockCopy(byte_5, 11 + (i * 4), buffer2, 0, 2);
                                          if ((byte_5[11 + (i * 4)] != 0) && (BitConverter.ToInt16(buffer2, 0) == key))
                                          {
                                                int num3 = BitConverter.ToInt16(base.Qigong[i].气功_byte, 0) + 1;
                                                num4 = base.Player_Qigong_point;
                                                base.Player_Qigong_point = num4 - 1;
                                                if (num3 > 20)
                                                {
                                                      num3 = 20;
                                                }
                                                BitConverter.GetBytes(num3);
                                                base.Qigong[i].气功量 = num3;
                                          }
                                    }
                              }
                              else if (key == 550)
                              {
                                    for (int j = 0; j < 12; j++)
                                    {
                                          byte[] buffer3 = new byte[2];
                                          Buffer.BlockCopy(byte_5, 11 + (j * 4), buffer3, 0, 2);
                                          if ((byte_5[11 + (j * 4)] != 0) && (BitConverter.ToInt16(buffer3, 0) == key))
                                          {
                                                int num6 = BitConverter.ToInt16(base.Qigong[j].气功_byte, 0) + 1;
                                                num4 = base.Player_Qigong_point;
                                                base.Player_Qigong_point = num4 - 1;
                                                if (num6 > 20)
                                                {
                                                      num6 = 20;
                                                }
                                                BitConverter.GetBytes(num6);
                                                base.Qigong[j].气功量 = num6;
                                          }
                                    }
                              }
                              else if (key == 0x227)
                              {
                                    for (int k = 0; k < 12; k++)
                                    {
                                          byte[] buffer4 = new byte[2];
                                          Buffer.BlockCopy(byte_5, 11 + (k * 4), buffer4, 0, 2);
                                          if ((byte_5[11 + (k * 4)] != 0) && (BitConverter.ToInt16(buffer4, 0) == key))
                                          {
                                                int num8 = BitConverter.ToInt16(base.Qigong[k].气功_byte, 0) + 1;
                                                num4 = base.Player_Qigong_point;
                                                base.Player_Qigong_point = num4 - 1;
                                                if (num8 > 20)
                                                {
                                                      num8 = 20;
                                                }
                                                BitConverter.GetBytes(num8);
                                                base.Qigong[k].气功量 = num8;
                                          }
                                    }
                              }
                              else if (key == 0x228)
                              {
                                    for (int m = 0; m < 12; m++)
                                    {
                                          byte[] buffer5 = new byte[2];
                                          Buffer.BlockCopy(byte_5, 11 + (m * 4), buffer5, 0, 2);
                                          if ((byte_5[11 + (m * 4)] != 0) && (BitConverter.ToInt16(buffer5, 0) == key))
                                          {
                                                int num10 = BitConverter.ToInt16(base.Qigong[m].气功_byte, 0) + 1;
                                                num4 = base.Player_Qigong_point;
                                                base.Player_Qigong_point = num4 - 1;
                                                if (num10 > 20)
                                                {
                                                      num10 = 20;
                                                }
                                                BitConverter.GetBytes(num10);
                                                base.Qigong[m].气功量 = num10;
                                          }
                                    }
                              }
                              else if (key == 0x229)
                              {
                                    for (int n = 0; n < 12; n++)
                                    {
                                          byte[] buffer6 = new byte[2];
                                          Buffer.BlockCopy(byte_5, 11 + (n * 4), buffer6, 0, 2);
                                          if ((byte_5[11 + (n * 4)] != 0) && (BitConverter.ToInt16(buffer6, 0) == key))
                                          {
                                                int num12 = BitConverter.ToInt16(base.Qigong[n].气功_byte, 0) + 1;
                                                num4 = base.Player_Qigong_point;
                                                base.Player_Qigong_point = num4 - 1;
                                                if (num12 > 20)
                                                {
                                                      num12 = 20;
                                                }
                                                BitConverter.GetBytes(num12);
                                                base.Qigong[n].气功量 = num12;
                                          }
                                    }
                              }
                              else if (key == 0x22a)
                              {
                                    for (int num13 = 0; num13 < 12; num13++)
                                    {
                                          byte[] buffer7 = new byte[2];
                                          Buffer.BlockCopy(byte_5, 11 + (num13 * 4), buffer7, 0, 2);
                                          if ((byte_5[11 + (num13 * 4)] != 0) && (BitConverter.ToInt16(buffer7, 0) == key))
                                          {
                                                int num14 = BitConverter.ToInt16(base.Qigong[num13].气功_byte, 0) + 1;
                                                num4 = base.Player_Qigong_point;
                                                base.Player_Qigong_point = num4 - 1;
                                                if (num14 > 20)
                                                {
                                                      num14 = 20;
                                                }
                                                BitConverter.GetBytes(num14);
                                                base.Qigong[num13].气功量 = num14;
                                          }
                                    }
                              }
                              else if (key == 0x22b)
                              {
                                    for (int num15 = 0; num15 < 12; num15++)
                                    {
                                          byte[] buffer8 = new byte[2];
                                          Buffer.BlockCopy(byte_5, 11 + (num15 * 4), buffer8, 0, 2);
                                          if ((byte_5[11 + (num15 * 4)] != 0) && (BitConverter.ToInt16(buffer8, 0) == key))
                                          {
                                                int num16 = BitConverter.ToInt16(base.Qigong[num15].气功_byte, 0) + 1;
                                                num4 = base.Player_Qigong_point;
                                                base.Player_Qigong_point = num4 - 1;
                                                if (num16 > 20)
                                                {
                                                      num16 = 20;
                                                }
                                                BitConverter.GetBytes(num16);
                                                base.Qigong[num15].气功量 = num16;
                                          }
                                    }
                              }
                              else if (key == 0x22c)
                              {
                                    for (int num17 = 0; num17 < 12; num17++)
                                    {
                                          byte[] buffer9 = new byte[2];
                                          Buffer.BlockCopy(byte_5, 11 + (num17 * 4), buffer9, 0, 2);
                                          if ((byte_5[11 + (num17 * 4)] != 0) && (BitConverter.ToInt16(buffer9, 0) == key))
                                          {
                                                int num18 = BitConverter.ToInt16(base.Qigong[num17].气功_byte, 0) + 1;
                                                num4 = base.Player_Qigong_point;
                                                base.Player_Qigong_point = num4 - 1;
                                                if (num18 > 20)
                                                {
                                                      num18 = 20;
                                                }
                                                BitConverter.GetBytes(num18);
                                                base.Qigong[num17].气功量 = num18;
                                          }
                                    }
                              }
                              else if (key == 0x22d)
                              {
                                    for (int num19 = 0; num19 < 12; num19++)
                                    {
                                          byte[] buffer10 = new byte[2];
                                          Buffer.BlockCopy(byte_5, 11 + (num19 * 4), buffer10, 0, 2);
                                          if ((byte_5[11 + (num19 * 4)] != 0) && (BitConverter.ToInt16(buffer10, 0) == key))
                                          {
                                                int num20 = BitConverter.ToInt16(base.Qigong[num19].气功_byte, 0) + 1;
                                                num4 = base.Player_Qigong_point;
                                                base.Player_Qigong_point = num4 - 1;
                                                if (num20 > 20)
                                                {
                                                      num20 = 20;
                                                }
                                                BitConverter.GetBytes(num20);
                                                base.Qigong[num19].气功量 = num20;
                                          }
                                    }
                              }
                              else if (key == 0x22e)
                              {
                                    for (int num21 = 0; num21 < 12; num21++)
                                    {
                                          byte[] buffer11 = new byte[2];
                                          Buffer.BlockCopy(byte_5, 11 + (num21 * 4), buffer11, 0, 2);
                                          if ((byte_5[11 + (num21 * 4)] != 0) && (BitConverter.ToInt16(buffer11, 0) == key))
                                          {
                                                int num22 = BitConverter.ToInt16(base.Qigong[num21].气功_byte, 0) + 1;
                                                num4 = base.Player_Qigong_point;
                                                base.Player_Qigong_point = num4 - 1;
                                                if (num22 > 20)
                                                {
                                                      num22 = 20;
                                                }
                                                BitConverter.GetBytes(num22);
                                                base.Qigong[num21].气功量 = num22;
                                          }
                                    }
                              }
                              else if (key == 0x22f)
                              {
                                    for (int num23 = 0; num23 < 12; num23++)
                                    {
                                          byte[] buffer12 = new byte[2];
                                          Buffer.BlockCopy(byte_5, 11 + (num23 * 4), buffer12, 0, 2);
                                          if ((byte_5[11 + (num23 * 4)] != 0) && (BitConverter.ToInt16(buffer12, 0) == key))
                                          {
                                                int num24 = BitConverter.ToInt16(base.Qigong[num23].气功_byte, 0) + 1;
                                                num4 = base.Player_Qigong_point;
                                                base.Player_Qigong_point = num4 - 1;
                                                if (num24 > 20)
                                                {
                                                      num24 = 20;
                                                }
                                                BitConverter.GetBytes(num24);
                                                base.Qigong[num23].气功量 = num24;
                                          }
                                    }
                              }
                              else if (key == 560)
                              {
                                    for (int num25 = 0; num25 < 12; num25++)
                                    {
                                          byte[] buffer13 = new byte[2];
                                          Buffer.BlockCopy(byte_5, 11 + (num25 * 4), buffer13, 0, 2);
                                          if ((byte_5[11 + (num25 * 4)] != 0) && (BitConverter.ToInt16(buffer13, 0) == key))
                                          {
                                                int num26 = BitConverter.ToInt16(base.Qigong[num25].气功_byte, 0) + 1;
                                                num4 = base.Player_Qigong_point;
                                                base.Player_Qigong_point = num4 - 1;
                                                if (num26 > 20)
                                                {
                                                      num26 = 20;
                                                }
                                                BitConverter.GetBytes(num26);
                                                base.Qigong[num25].气功量 = num26;
                                          }
                                    }
                              }
                              else
                              {
                                    THANG_THIEN_KHI_CONG_LOAI thang_thien_khi_cong_loai;
                                    if (base.THANG_THIEN_KHI_CONG.TryGetValue(key, out thang_thien_khi_cong_loai) && (thang_thien_khi_cong_loai.KHI_CONG_SO_LUONG < 20))
                                    {
                                          int num27 = thang_thien_khi_cong_loai.KHI_CONG_SO_LUONG + 1;
                                          num4 = base.Player_Qigong_point;
                                          base.Player_Qigong_point = num4 - 1;
                                          if (num27 > 20)
                                          {
                                                num27 = 20;
                                          }
                                          thang_thien_khi_cong_loai.KHI_CONG_SO_LUONG = num27;
                                    }
                              }
                              base.Update_Qigong();
                              base.UpdatePowersAndStatus();
                              this.UpdateHP_MP_SP();
                        }
                        catch (Exception)
                        {
                              base.GameMessage("Please robes latest 9.0 client enters, be careful not to install patch 9.0 PW! !", 9, "Plus point error");
                        }
                  }
            }

            public void AddSkillBook6(int int_128)
            {
                  byte[] bytes = BitConverter.GetBytes(RxjhClass.GetDBItmeId());
                  int num = 0;
                  switch (base.Player_Job)
                  {
                        case 1:
                              if (base.Player_Zx == 1)
                              {
                                    num = 0x3b9acb50;
                                    break;
                              }
                              num = 0x3b9acb56;
                              break;

                        case 2:
                              if (base.Player_Zx == 1)
                              {
                                    num = 0x3b9acb51;
                                    break;
                              }
                              num = 0x3b9acb57;
                              break;

                        case 3:
                              if (base.Player_Zx == 1)
                              {
                                    num = 0x3b9acb52;
                                    break;
                              }
                              num = 0x3b9acb58;
                              break;

                        case 4:
                              if (base.Player_Zx == 1)
                              {
                                    num = 0x3b9acb53;
                                    break;
                              }
                              num = 0x3b9acb59;
                              break;

                        case 5:
                              if (base.Player_Zx == 1)
                              {
                                    num = 0x3b9acb54;
                                    break;
                              }
                              num = 0x3b9acb5a;
                              break;

                        case 6:
                              if (base.Player_Zx == 1)
                              {
                                    num = 0x3b9acb55;
                                    break;
                              }
                              num = 0x3b9acb5b;
                              break;

                        case 7:
                              if (base.Player_Zx == 1)
                              {
                                    num = 0x3b9acbee;
                                    break;
                              }
                              num = 0x3b9acbf1;
                              break;

                        case 8:
                              num = 0x3b9acc37;
                              break;

                        case 10:
                              if (base.Player_Zx == 1)
                              {
                                    num = 0x3b9ace52;
                                    break;
                              }
                              num = 0x3b9ace53;
                              break;
                  }
                  this.TANG_CUONG_VAT_PHAM_2(bytes, BitConverter.GetBytes(num), int_128, BitConverter.GetBytes(1), new byte[0x38]);
            }

            public void AddSkillBook7(int int_128)
            {
                  byte[] bytes = BitConverter.GetBytes(RxjhClass.GetDBItmeId());
                  int num = 0;
                  switch (base.Player_Job)
                  {
                        case 1:
                              if (base.Player_Zx == 1)
                              {
                                    num = 0x3b9acb84;
                                    break;
                              }
                              num = 0x3b9acb8a;
                              break;

                        case 2:
                              if (base.Player_Zx == 1)
                              {
                                    num = 0x3b9acb85;
                                    break;
                              }
                              num = 0x3b9acb8b;
                              break;

                        case 3:
                              if (base.Player_Zx == 1)
                              {
                                    num = 0x3b9acb86;
                                    break;
                              }
                              num = 0x3b9acb8c;
                              break;

                        case 4:
                              if (base.Player_Zx == 1)
                              {
                                    num = 0x3b9acb87;
                                    break;
                              }
                              num = 0x3b9acb8d;
                              break;

                        case 5:
                              if (base.Player_Zx == 1)
                              {
                                    num = 0x3b9acb88;
                                    break;
                              }
                              num = 0x3b9acb8e;
                              break;

                        case 6:
                              if (base.Player_Zx == 1)
                              {
                                    num = 0x3b9acb89;
                                    break;
                              }
                              num = 0x3b9acb8f;
                              break;

                        case 7:
                              if (base.Player_Zx == 1)
                              {
                                    num = 0x3b9acbef;
                                    break;
                              }
                              num = 0x3b9acbf2;
                              break;

                        case 8:
                              num = 0x3b9acc38;
                              break;

                        case 10:
                              if (base.Player_Zx == 1)
                              {
                                    num = 0x3b9ace54;
                                    break;
                              }
                              num = 0x3b9ace55;
                              break;
                  }
                  this.TANG_CUONG_VAT_PHAM_2(bytes, BitConverter.GetBytes(num), int_128, BitConverter.GetBytes(1), new byte[0x38]);
            }

            public void AddSkillBook8(int int_128)
            {
                  byte[] bytes = BitConverter.GetBytes(RxjhClass.GetDBItmeId());
                  int num = 0;
                  switch (base.Player_Job)
                  {
                        case 1:
                              if (base.Player_Zx == 1)
                              {
                                    num = 0x3b9acbd0;
                                    break;
                              }
                              num = 0x3b9acbd6;
                              break;

                        case 2:
                              if (base.Player_Zx == 1)
                              {
                                    num = 0x3b9acbd1;
                                    break;
                              }
                              num = 0x3b9acbd7;
                              break;

                        case 3:
                              if (base.Player_Zx == 1)
                              {
                                    num = 0x3b9acbd2;
                                    break;
                              }
                              num = 0x3b9acbd8;
                              break;

                        case 4:
                              if (base.Player_Zx == 1)
                              {
                                    num = 0x3b9acbd3;
                                    break;
                              }
                              num = 0x3b9acbd9;
                              break;

                        case 5:
                              if (base.Player_Zx == 1)
                              {
                                    num = 0x3b9acbd4;
                                    break;
                              }
                              num = 0x3b9acbda;
                              break;

                        case 6:
                              if (base.Player_Zx == 1)
                              {
                                    num = 0x3b9acbd5;
                                    break;
                              }
                              num = 0x3b9acbdb;
                              break;

                        case 7:
                              if (base.Player_Zx == 1)
                              {
                                    num = 0x3b9acbf0;
                                    break;
                              }
                              num = 0x3b9acbf3;
                              break;

                        case 8:
                              num = 0x3b9acc39;
                              break;

                        case 9:
                              num = 0x3b9acdf5;
                              break;

                        case 10:
                              if (base.Player_Zx == 1)
                              {
                                    num = 0x3b9ace56;
                                    break;
                              }
                              num = 0x3b9ace57;
                              break;
                  }
                  this.TANG_CUONG_VAT_PHAM_2(bytes, BitConverter.GetBytes(num), int_128, BitConverter.GetBytes(1), new byte[0x38]);
            }

            public void AddSkillBook9(int int_128)
            {
                  byte[] bytes = BitConverter.GetBytes(RxjhClass.GetDBItmeId());
                  int num = 0;
                  switch (base.Player_Job)
                  {
                        case 1:
                              if (base.Player_Zx == 1)
                              {
                                    num = 0x3b9ace08;
                                    break;
                              }
                              num = 0x3b9ace0f;
                              break;

                        case 2:
                              if (base.Player_Zx == 1)
                              {
                                    num = 0x3b9ace09;
                                    break;
                              }
                              num = 0x3b9ace10;
                              break;

                        case 3:
                              if (base.Player_Zx == 1)
                              {
                                    num = 0x3b9ace0a;
                                    break;
                              }
                              num = 0x3b9ace11;
                              break;

                        case 4:
                              if (base.Player_Zx == 1)
                              {
                                    num = 0x3b9ace0b;
                                    break;
                              }
                              num = 0x3b9ace12;
                              break;

                        case 5:
                              if (base.Player_Zx == 1)
                              {
                                    num = 0x3b9ace0c;
                                    break;
                              }
                              num = 0x3b9ace13;
                              break;

                        case 6:
                              if (base.Player_Zx == 1)
                              {
                                    num = 0x3b9ace0d;
                                    break;
                              }
                              num = 0x3b9ace14;
                              break;

                        case 7:
                              if (base.Player_Zx == 1)
                              {
                                    num = 0x3b9ace0e;
                                    break;
                              }
                              num = 0x3b9ace15;
                              break;

                        case 8:
                              num = 0x3b9ace16;
                              break;

                        case 9:
                              num = 0x3b9ace17;
                              break;

                        case 10:
                              if (base.Player_Zx == 1)
                              {
                                    num = 0x3b9ace58;
                                    break;
                              }
                              num = 0x3b9ace59;
                              break;
                  }
                  this.TANG_CUONG_VAT_PHAM_2(bytes, BitConverter.GetBytes(num), int_128, BitConverter.GetBytes(1), new byte[0x38]);
            }

            public void AddtoShortcutBar(byte[] byte_5, int int_128)
            {
                  byte[] dst = Converter.hexStringToByte("AA552000002C01181010002CDC143C00000000030002000300000000000000000000000055AA");
                  byte[] buffer2 = new byte[4];
                  byte[] buffer3 = new byte[4];
                  byte[] buffer4 = new byte[4];
                  byte[] buffer5 = new byte[4];
                  Buffer.BlockCopy(byte_5, 11, buffer2, 0, 4);
                  Buffer.BlockCopy(byte_5, 0x13, buffer3, 0, 2);
                  Buffer.BlockCopy(byte_5, 0x15, buffer4, 0, 2);
                  Buffer.BlockCopy(byte_5, 0x17, buffer5, 0, 2);
                  Buffer.BlockCopy(buffer2, 0, dst, 11, 4);
                  int num = Converter.smethod_31(Converter.smethod_24(buffer2));
                  Buffer.BlockCopy(BitConverter.GetBytes(num), 0, dst, 11, 4);
                  if (BitConverter.ToInt32(buffer4, 0) == 2)
                  {
                        if ((num == 0x3c14dc2c) && base.list_1.Contains(0x3c14dc2c))
                        {
                              base.Nhan_vat_them_vao_lon_nhat_HP -= 200;
                              if (base.NHAN_VAT_HP > base.NHAN_VAT_LON_NHAT_HP)
                              {
                                    base.NHAN_VAT_HP = base.NHAN_VAT_LON_NHAT_HP;
                              }
                              base.list_1.Remove(num);
                        }
                        if ((num == 0x3c14dc2d) && base.list_1.Contains(0x3c14dc2d))
                        {
                              base.Nhan_vat_them_vao_lon_nhat_MP -= 200;
                              if (base.NHAN_VAT_MP > base.NHAN_VAT_LON_NHAT_MP)
                              {
                                    base.NHAN_VAT_MP = base.NHAN_VAT_LON_NHAT_MP;
                              }
                              base.list_1.Remove(num);
                        }
                        if ((num == 0x3c14dc44) && base.list_1.Contains(0x3c14dc44))
                        {
                              base.Nhan_vat_them_vao_lon_nhat_MP -= 200;
                              if (base.NHAN_VAT_MP > base.NHAN_VAT_LON_NHAT_MP)
                              {
                                    base.NHAN_VAT_MP = base.NHAN_VAT_LON_NHAT_MP;
                              }
                              base.list_1.Remove(0x3c14dc44);
                        }
                        if ((num == 0x3c14dc45) && base.list_1.Contains(0x3c14dc45))
                        {
                              base.Nhan_vat_them_vao_lon_nhat_MP -= 200;
                              if (base.NHAN_VAT_MP > base.NHAN_VAT_LON_NHAT_MP)
                              {
                                    base.NHAN_VAT_MP = base.NHAN_VAT_LON_NHAT_MP;
                              }
                              base.list_1.Remove(0x3c14dc45);
                        }
                        Buffer.BlockCopy(BitConverter.GetBytes(0), 0, dst, 0x13, 2);
                        Buffer.BlockCopy(BitConverter.GetBytes(4), 0, dst, 0x15, 2);
                  }
                  else
                  {
                        if ((num == 0x3c14dc2c) && !base.list_1.Contains(0x3c14dc2c))
                        {
                              base.Nhan_vat_them_vao_lon_nhat_HP += 200;
                              base.list_1.Add(0x3c14dc2c);
                        }
                        if ((num == 0x3c14dc2d) && !base.list_1.Contains(0x3c14dc2d))
                        {
                              base.Nhan_vat_them_vao_lon_nhat_MP += 200;
                              base.list_1.Add(0x3c14dc2d);
                        }
                        if ((num == 0x3c14dc44) && !base.list_1.Contains(0x3c14dc44))
                        {
                              base.Nhan_vat_them_vao_lon_nhat_MP += 200;
                              base.list_1.Add(0x3c14dc44);
                        }
                        if ((num == 0x3c14dc45) && !base.list_1.Contains(0x3c14dc45))
                        {
                              base.Nhan_vat_them_vao_lon_nhat_MP += 200;
                              base.list_1.Add(0x3c14dc45);
                        }
                        Buffer.BlockCopy(buffer3, 0, dst, 0x13, 2);
                        Buffer.BlockCopy(buffer4, 0, dst, 0x15, 2);
                  }
                  Buffer.BlockCopy(buffer5, 0, dst, 0x17, 2);
                  Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, dst, 5, 2);
                  if (base.Client != null)
                  {
                        base.Client.Send(dst, dst.Length);
                  }
                  this.UpdateHP_MP_SP();
            }

            public void AN_THAN(byte[] byte_5, int int_128)
            {
                  byte[] dst = new byte[4];
                  Buffer.BlockCopy(byte_5, 15, dst, 0, 4);
                  byte[] buffer2 = Converter.hexStringToByte("AA55270000E2015117180001000000B2390C002C01000001000000000000009F000000000000000000000055AA");
                  Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, buffer2, 5, 2);
                  Buffer.BlockCopy(BitConverter.GetBytes(BitConverter.ToInt32(dst, 0)), 0, buffer2, 15, 2);
                  Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, buffer2, 0x13, 2);
                  if (base.Client != null)
                  {
                        base.Client.Send(buffer2, buffer2.Length);
                  }
                  this.vmethod_0(buffer2, buffer2.Length);
            }

            //웹아이템 구매
            public string WebItemsell(int int_128, int int_129, long long_17, int int_130, int int_131, int int_132, int int_133, int int_134, int int_135, int int_136, int int_137, int int_138, int int_139, int int_140)
            {
                  try
                  {
                        //Form1.WriteLine(1, string.Format("WEB ITEMSELL int_128{0} int_129{1} long_17{2} int_130{3} int_131{4} int_132{5} int_133{6} int_134{7} int_135{8} int_136{9} int_137{10} int_138{11} int_139{12} int_140{13}", int_128, int_129, long_17, int_130, int_131, int_132, int_133, int_134, int_135, int_136, int_137, int_138, int_139, int_140));
                        ITEMSELL itemsell;
                        Random random = new Random(World.smethod_15());
                        if (World.dictionary_0.TryGetValue(int_128, out itemsell))
                        {
                              if (itemsell.FLD_PID != int_128)
                              {
                                    DBA.smethod_7($"UPDATE TBL_ACCOUNT SET FLD_ZT=1 WHERE FLD_ID='{base.Userid}'", "rxjhaccount");
                                    Form1.WriteLine(1, string.Concat(new object[] { "非法修改封包封号5_百宝阁买卖东西[", base.Userid, "][", base.UserName, "] 人物全服ID=[", base.UserSessionID, "] [", base.Client.ToString(), "]" }));
                                    if (base.Client != null)
                                    {
                                          base.Client.Dispose();
                                    }
                                    return "你已经被封号请联系管理";
                              }
                              if (itemsell.FLD_TYPE != int_130)
                              {
                                    DBA.smethod_7($"UPDATE TBL_ACCOUNT SET FLD_ZT=1 WHERE FLD_ID='{base.Userid}'", "rxjhaccount");
                                    Form1.WriteLine(1, string.Concat(new object[] { "非法修改封包封号5_百宝阁买卖东西[", base.Userid, "][", base.UserName, "] 人物全服ID=[", base.UserSessionID, "] [", base.Client.ToString(), "]" }));
                                    if (base.Client != null)
                                    {
                                          base.Client.Dispose();
                                    }
                                    return "你已经被封号请联系管理";
                              }
                              if (((long_17 < 0L) || (int_129 > 10)) || ((int_129 < 0) || (int_128 == 0)))
                              {
                                    DBA.smethod_7($"UPDATE TBL_ACCOUNT SET FLD_ZT=1 WHERE FLD_ID='{base.Userid}'", "rxjhaccount");
                                    Form1.WriteLine(1, string.Concat(new object[] { "非法修改封包封号1_百宝阁买卖东西[", base.Userid, "][", base.UserName, "] 人物全服ID=[", base.UserSessionID, "] [", base.Client.ToString(), "]" }));
                                    if (base.Client != null)
                                    {
                                          base.Client.Dispose();
                                    }
                                    return "购买错误";
                              }
                              if (int_129 != 1)
                              {
                                    if (long_17 != (itemsell.FLD_PRICE * int_129))
                                    {
                                          DBA.smethod_7($"UPDATE TBL_ACCOUNT SET FLD_ZT=1 WHERE FLD_ID='{base.Userid}'", "rxjhaccount");
                                          Form1.WriteLine(1, string.Concat(new object[] { "非法修改封包封号3_百宝阁买卖东西[", base.Userid, "][", base.UserName, "] 人物全服ID=[", base.UserSessionID, "] [", base.Client.ToString(), "]" }));
                                          if (base.Client != null)
                                          {
                                                base.Client.Dispose();
                                          }
                                          return "购买错误";
                                    }
                              }
                              else if (long_17 != itemsell.FLD_PRICE)
                              {
                                    DBA.smethod_7($"UPDATE TBL_ACCOUNT SET FLD_ZT=1 WHERE FLD_ID='{base.Userid}'", "rxjhaccount");
                                    Form1.WriteLine(1, string.Concat(new object[] { "非法修改封包封号2_百宝阁买卖东西[", base.Userid, "][", base.UserName, "] 人物全服ID=[", base.UserSessionID, "] [", base.Client.ToString(), "]" }));
                                    if (base.Client != null)
                                    {
                                          base.Client.Dispose();
                                    }
                                    return "购买错误";
                              }
                        }
                        int num = base.DUOC_KIEN_HANG_RONG(this);
                        int num2 = int_128;
                        if (num == -1)
                        {
                              return "没有空位了";
                        }
                        this.KIEM_TRA_BACH_BAO_CAC_NGUYEN_BAO_SO_LUONG();
                        if (long_17 >= 0L)
                        {
                              if (int_130 != 4)
                              {
                                    if (base.FLD_RXPIONT < long_17)
                                    {
                                          return "元宝不够了";
                                    }
                                    base.method_47(long_17, 0);
                                    base.method_48(long_17, 1);
                              }
                              else
                              {
                                    if (base.FLD_RXPIONTX < long_17)
                                    {
                                          return "积分不够了";
                                    }
                                    base.method_48(long_17, 0);
                              }
                              switch (num2)
                              {
                                    case 0x2faf080b:
                                    case 0x2faf080c:
                                    case 0x2faf080d:
                                    case 0x2faf0817:
                                    case 0x2faf0818:
                                    case 0x2faf0819:
                                    case 0x2faf081a:
                                    case 0x2faf081b:
                                    case 0x2faf083d:
                                    case 0x2faf083e:
                                          int_131 = World.smethod_16(num2, 2);
                                          int_128 = World.smethod_14(num2);
                                          break;

                                    case 0x2faf082e:
                                          {
                                                char[] separator = new char[] { ';' };
                                                string[] strArray = World.BACH_BAO_CAC_SO_CAP_KY_NGOC_THACH.Split(separator);
                                                int_131 = random.Next(int.Parse(strArray[0]), int.Parse(strArray[1]));
                                                break;
                                          }
                                    case 0x2faf082f:
                                          {
                                                char[] chArray2 = new char[] { ';' };
                                                string[] strArray2 = World.BACH_BAO_CAC_TRUNG_CAP_KY_NGOC_THACH.Split(chArray2);
                                                int_131 = random.Next(int.Parse(strArray2[0]), int.Parse(strArray2[1]));
                                                break;
                                          }
                                    case 0x2faf0830:
                                          {
                                                char[] chArray3 = new char[] { ';' };
                                                string[] strArray3 = World.BACH_BAO_CAC_CAO_CAP_KY_NGOC_THACH.Split(chArray3);
                                                int_131 = random.Next(int.Parse(strArray3[0]), int.Parse(strArray3[1]));
                                                break;
                                          }
                              }
                              if (int_129 > 1)
                              {
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(int_128, num, 1, int_131, int_132, int_133, int_134, int_135, int_137, int_136, int_138, int_139, int_140);
                                    if ((World.BackPack_Switch == 1) && (int_128 == 0x186a01))
                                    {
                                          base.Equipmen_bags_whether_to_open = 1;
                                          base.EquipmentBasket_Wrapped();
                                    }
                                    for (int i = 1; i < int_129; i++)
                                    {
                                          num = base.DUOC_KIEN_HANG_RONG(this);
                                          switch (num2)
                                          {
                                                case 0x2faf082e:
                                                      {
                                                            char[] chArray4 = new char[] { ';' };
                                                            string[] strArray4 = World.BACH_BAO_CAC_SO_CAP_KY_NGOC_THACH.Split(chArray4);
                                                            int_131 = random.Next(int.Parse(strArray4[0]), int.Parse(strArray4[1]));
                                                            break;
                                                      }
                                                case 0x2faf082f:
                                                      {
                                                            char[] chArray5 = new char[] { ';' };
                                                            string[] strArray5 = World.BACH_BAO_CAC_TRUNG_CAP_KY_NGOC_THACH.Split(chArray5);
                                                            int_131 = random.Next(int.Parse(strArray5[0]), int.Parse(strArray5[1]));
                                                            break;
                                                      }
                                                case 0x2faf0830:
                                                      {
                                                            char[] chArray6 = new char[] { ';' };
                                                            string[] strArray6 = World.BACH_BAO_CAC_CAO_CAP_KY_NGOC_THACH.Split(chArray6);
                                                            int_131 = random.Next(int.Parse(strArray6[0]), int.Parse(strArray6[1]));
                                                            break;
                                                      }
                                                case 0x2faf083d:
                                                case 0x2faf083e:
                                                case 0x2faf080b:
                                                case 0x2faf080c:
                                                case 0x2faf080d:
                                                case 0x2faf0817:
                                                case 0x2faf0818:
                                                case 0x2faf0819:
                                                case 0x2faf081a:
                                                case 0x2faf081b:
                                                      int_131 = World.smethod_16(num2, 2);
                                                      int_128 = World.smethod_14(num2);
                                                      break;
                                          }
                                          this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(int_128, num, 1, int_131, int_132, int_133, int_134, int_135, int_137, int_136, int_138, int_139, int_140);
                                    }
                              }
                              else
                              {
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(int_128, num, 1, int_131, int_132, int_133, int_134, int_135, int_137, int_136, int_138, int_139, int_140);
                                    if ((World.BackPack_Switch == 1) && (int_128 == 0x186a01))
                                    {
                                          base.Equipmen_bags_whether_to_open = 1;
                                          base.EquipmentBasket_Wrapped();
                                    }
                              }
                              RxjhClass.INSERT_BACH_BAO_GHI_CHEP_2(base.Userid, base.UserName, (double)int_128, int_128.ToString(), int_129, long_17);
                              base.UPDATE_RXPIONT();
                              return "购买成功";
                        }
                        return "元宝或者积分不足";
                  }
                  catch (Exception exception)
                  {
                        Form1.WriteLine(1, "百宝阁买卖东西 出错 [" + base.Userid + "][" + base.UserName + "] " + exception.Message);
                        return "购买错误";
                  }
            }

            public void BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(int int_128, int int_129, int int_130, int Item_thuoc_tinh0, int Item_thuoc_tinh1, int Item_thuoc_tinh2, int Item_thuoc_tinh3, int Item_thuoc_tinh4, int 初级附魂, int 中级附魂, int int_138, int int_139, int int_140)
            {
                  try
                  {
                        TBL_XWWL_ITEM tbl_xwwl_item;
                        if (!World.Itme.TryGetValue(int_128, out tbl_xwwl_item))
                        {
                              return;
                        }
                        byte[] dst = new byte[0x38];
                        Buffer.BlockCopy(BitConverter.GetBytes(Item_thuoc_tinh0), 0, dst, 0, 4);
                        Buffer.BlockCopy(BitConverter.GetBytes(Item_thuoc_tinh1), 0, dst, 4, 4);
                        Buffer.BlockCopy(BitConverter.GetBytes(Item_thuoc_tinh2), 0, dst, 8, 4);
                        Buffer.BlockCopy(BitConverter.GetBytes(Item_thuoc_tinh3), 0, dst, 12, 4);
                        Buffer.BlockCopy(BitConverter.GetBytes(Item_thuoc_tinh4), 0, dst, 0x10, 4);
                        Buffer.BlockCopy(BitConverter.GetBytes(初级附魂), 0, dst, 0x2e, 4);
                        if (中级附魂 > 0)
                        {
                              Buffer.BlockCopy(BitConverter.GetBytes(1), 0, dst, 0x16, 2);
                        }
                        Buffer.BlockCopy(BitConverter.GetBytes(中级附魂), 0, dst, 0x18, 4);
                        Buffer.BlockCopy(BitConverter.GetBytes(int_138), 0, dst, 0x34, 4);
                        long dBItmeId = RxjhClass.GetDBItmeId();
                        byte[] buffer2 = Converter.hexStringToByte("AA5573000100000D00640001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000055AA");
                        byte[] buffer3 = new byte[0x49];
                        if (tbl_xwwl_item.FLD_SIDE == 0)
                        {
                              goto Label_0180;
                        }
                        if (int_128 <= 0x2faf080d)
                        {
                              switch (int_128)
                              {
                                    case 0x2faf080b:
                                    case 0x2faf080c:
                                    case 0x2faf080d:
                                    case 0x2faf0802:
                                    case 0x2faf0801:
                                          goto Label_014C;
                              }
                        }
                        else
                        {
                              switch (int_128)
                              {
                                    case 0x2faf0817:
                                    case 0x2faf0818:
                                    case 0x2faf0819:
                                    case 0x2faf081a:
                                    case 0x2faf081b:
                                    case 0x2faf081c:
                                    case 0x2faf083d:
                                    case 0x2faf083e:
                                          goto Label_014C;
                              }
                        }
                        VAT_PHAM_LOAI vat_pham_loai = base.NHAN_NHAN_VAT_ITEM_LOAI_HINH(int_128);
                        goto Label_0156;
                        Label_014C:
                        vat_pham_loai = base.method_108(int_128, Item_thuoc_tinh0);
                        Label_0156:
                        if (vat_pham_loai != null)
                        {
                              int_129 = vat_pham_loai.VAT_PHAM_VI_TRI;
                              dBItmeId = BitConverter.ToInt64(vat_pham_loai.Item_toan_bo_ID, 0);
                              int_130 = BitConverter.ToInt32(vat_pham_loai.VAT_PHAM_SO_LUONG, 0) + int_130;
                        }
                        goto Label_0183;
                        Label_0180:
                        int_130 = 1;
                        Label_0183:
                        Buffer.BlockCopy(BitConverter.GetBytes(dBItmeId), 0, buffer3, 0, 8);
                        Buffer.BlockCopy(BitConverter.GetBytes(int_128), 0, buffer3, 8, 4);
                        Buffer.BlockCopy(BitConverter.GetBytes(int_130), 0, buffer3, 12, 4);
                        Buffer.BlockCopy(dst, 0, buffer3, 0x10, dst.Length);
                        if (int_140 > 0)
                        {
                              DateTime time = new DateTime(0x7b2, 1, 1, 8, 0, 0);
                              Buffer.BlockCopy(BitConverter.GetBytes((int)DateTime.Now.Subtract(time).TotalSeconds), 0, buffer3, 0x34, 4);
                              Buffer.BlockCopy(BitConverter.GetBytes((int)DateTime.Now.AddDays((double)int_140).Subtract(time).TotalSeconds), 0, buffer3, 0x38, 4);
                        }
                        Buffer.BlockCopy(BitConverter.GetBytes(int_129), 0, buffer2, 40, 2);
                        Buffer.BlockCopy(buffer3, 0, buffer2, 15, 12);
                        Buffer.BlockCopy(buffer3, 12, buffer2, 0x1f, 4);
                        Buffer.BlockCopy(buffer3, 0x10, buffer2, 0x2f, dst.Length);
                        if (int_139 == 1)
                        {
                              Buffer.BlockCopy(BitConverter.GetBytes(1), 0, buffer3, 0x48, 1);
                              Buffer.BlockCopy(BitConverter.GetBytes((int)(int_128 + 0x4e20)), 0, buffer2, 0x17, 4);
                        }
                        if (tbl_xwwl_item.FLD_CJL != 0)
                        {
                              if (tbl_xwwl_item.FLD_CJL > 0x3e8)
                              {
                                    tbl_xwwl_item.FLD_CJL = 0x3e8;
                              }
                              Buffer.BlockCopy(BitConverter.GetBytes(tbl_xwwl_item.FLD_CJL), 0, buffer3, 60, 2);
                              Buffer.BlockCopy(BitConverter.GetBytes(tbl_xwwl_item.FLD_CJL), 0, buffer2, 0x5b, 2);
                        }
                        base.TRANG_BI_LAN_BAO_VAY[int_129].Item_byte = buffer3;
                        Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, buffer2, 5, 2);
                        if (base.Client != null)
                        {
                              base.Client.Send(buffer2, buffer2.Length);
                        }
                  }
                  catch (Exception exception)
                  {
                        Form1.WriteLine(1, string.Concat(new object[] { "TANG_CUONG_VAT_PHAM出错1 [", base.Userid, "][", base.UserName, "] VI_TRI[", int_129, "] 数量[", int_130, "]", exception.Message }));
                  }
            }

            public void BANG_CHIEN_CAP_NHAT_DIEM_SO(int int_128, int int_129)
            {
                  byte[] dst = Converter.hexStringToByte("AA551700010F2739100800FFFFFFFF000000000000000000003C5B55AA");
                  Buffer.BlockCopy(BitConverter.GetBytes(int_128), 0, dst, 11, 4);
                  Buffer.BlockCopy(BitConverter.GetBytes(int_129), 0, dst, 15, 4);
                  Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, dst, 5, 2);
                  if (base.Client != null)
                  {
                        base.Client.Send(dst, dst.Length);
                  }
            }

            public void BANG_CHIEN_GHEP_DOI_THANH_CONG_THONG_BAO(int int_128)
            {
                  byte[] dst = Converter.hexStringToByte("AA55AB00000F2766009C000830000000000000000000000000000000000000000002307C000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000690000640A000000000000000055AA");
                  Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, dst, 5, 2);
                  if (base.Client != null)
                  {
                        base.Client.Send(dst, dst.Length);
                  }
            }

            public void BANG_CHIEN_THONG_BAO_SAN_SANG(string string_10)
            {
                  byte[] dst = Converter.hexStringToByte("AA55AB00000F3766009C000830000000000000000000000000000000000000000003317C330000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000690000650A000000000000000055AA");
                  Buffer.BlockCopy(Encoding.Default.GetBytes(string_10), 0, dst, 0x24, 1);
                  Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, dst, 5, 2);
                  if (base.Client != null)
                  {
                        base.Client.Send(dst, dst.Length);
                  }
            }

            public void BANG_PHAI_TRUYEN_TONG(byte[] byte_5, int int_128)
            {
                  try
                  {
                        byte[] dst = new byte[2];
                        Buffer.BlockCopy(byte_5, 15, dst, 0, 2);
                        int index = BitConverter.ToInt16(dst, 0);
                        if (BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_ID, 0) == 0x3c14dc7a)
                        {
                              byte[] bytes = new byte[20];
                              for (int i = 0; i < 20; i++)
                              {
                                    if (byte_5[0x1b + i] == 0)
                                    {
                                          break;
                                    }
                                    bytes[i] = byte_5[0x1b + i];
                              }
                              string str = Encoding.Default.GetString(bytes).Replace("\0", "");
                              if (BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_ID, 0) != 0)
                              {
                                    Players players = World.smethod_2(str);
                                    if (players != null)
                                    {
                                          if (players.UserName == base.UserName)
                                          {
                                                base.BANG_PHAI_TRUYEN_TONG_PHU_NHAC_NHO(3);
                                          }
                                          else if (players.Bang_phai_Id != base.Bang_phai_Id)
                                          {
                                                base.BANG_PHAI_TRUYEN_TONG_PHU_NHAC_NHO(6);
                                          }
                                          else
                                          {
                                                base.BANG_PHAI_TRUYEN_TONG_PHU_NHAC_NHO(1);
                                                this.VAT_PHAM_GIAM_DI_THUOC_TINH_SO_LUONG(index, 1);
                                                this.Move(players.CharacterCoords_X, players.CharacterCoords_Y, players.CharacterCoords_Z, players.CharacterCoords_Map);
                                          }
                                    }
                                    else
                                    {
                                          base.BANG_PHAI_TRUYEN_TONG_PHU_NHAC_NHO(2);
                                    }
                              }
                        }
                  }
                  catch (Exception exception)
                  {
                        base.BANG_PHAI_TRUYEN_TONG_PHU_NHAC_NHO(7);
                        Form1.WriteLine(1, "帮派传送出错![" + base.Userid + "]-[" + base.UserName + "]" + exception.Message);
                  }
            }

            public void BAT_GIU_KIEM_TRA_LAI_NPC()
            {
                  if (World.jlMsg == 1)
                  {
                        Form1.WriteLine(0, "Players_BAT_GIU_KIEM_TRA_LAI_NPC");
                  }
                  try
                  {
                        if (base.threadSafeDictionary_0 != null)
                        {
                              Dictionary<int, TBL_XWWL_NPC> dictionary = new Dictionary<int, TBL_XWWL_NPC>();
                              Dictionary<int, TBL_XWWL_NPC> dictionary2 = new Dictionary<int, TBL_XWWL_NPC>();
                              foreach (TBL_XWWL_NPC tbl_xwwl_npc in base.threadSafeDictionary_0.Values)
                              {
                                    if (!this.TRA_TIM_PHAM_VI_NPC(400, tbl_xwwl_npc))
                                    {
                                          base.threadSafeDictionary_0.Remove(tbl_xwwl_npc.FLD_INDEX);
                                          if (!dictionary2.ContainsKey(tbl_xwwl_npc.FLD_INDEX))
                                          {
                                                dictionary2.Add(tbl_xwwl_npc.FLD_INDEX, tbl_xwwl_npc);
                                          }
                                          if (tbl_xwwl_npc.method_2(this))
                                          {
                                                tbl_xwwl_npc.method_1(this);
                                          }
                                    }
                              }
                              Queue queue = Queue.Synchronized(new Queue());
                              foreach (TBL_XWWL_NPC tbl_xwwl_npc2 in MapClass.GetnpcTemplate(base.CharacterCoords_Map).Values)
                              {
                                    queue.Enqueue(tbl_xwwl_npc2);
                              }
                              while (queue.Count > 0)
                              {
                                    if (World.jlMsg == 1)
                                    {
                                          Form1.WriteLine(0, "获取复查范围Npc2");
                                    }
                                    TBL_XWWL_NPC tbl_xwwl_npc3 = (TBL_XWWL_NPC)queue.Dequeue();
                                    if (this.TRA_TIM_PHAM_VI_NPC(400, tbl_xwwl_npc3))
                                    {
                                          if (!base.threadSafeDictionary_0.ContainsKey(tbl_xwwl_npc3.FLD_INDEX))
                                          {
                                                base.threadSafeDictionary_0.Add(tbl_xwwl_npc3.FLD_INDEX, tbl_xwwl_npc3);
                                                tbl_xwwl_npc3.method_0(this);
                                                if (!dictionary.ContainsKey(tbl_xwwl_npc3.FLD_INDEX))
                                                {
                                                      dictionary.Add(tbl_xwwl_npc3.FLD_INDEX, tbl_xwwl_npc3);
                                                }
                                          }
                                    }
                                    else if (base.threadSafeDictionary_0.ContainsKey(tbl_xwwl_npc3.FLD_INDEX))
                                    {
                                          base.threadSafeDictionary_0.Remove(tbl_xwwl_npc3.FLD_INDEX);
                                          tbl_xwwl_npc3.method_1(this);
                                          if (!dictionary2.ContainsKey(tbl_xwwl_npc3.FLD_INDEX))
                                          {
                                                dictionary2.Add(tbl_xwwl_npc3.FLD_INDEX, tbl_xwwl_npc3);
                                          }
                                    }
                              }
                              TBL_XWWL_NPC.smethod_1(dictionary2, this);
                              TBL_XWWL_NPC.smethod_0(dictionary, this);
                        }
                  }
                  catch (Exception)
                  {
                  }
            }

            public void BAT_GIU_KIEM_TRA_LAI_PHAM_VI_MAT_DAT_VAT_PHAM()
            {
                  if (base.threadSafeDictionary_1 != null)
                  {
                        try
                        {
                              Queue queue = Queue.Synchronized(new Queue());
                              Dictionary<long, MAT_DAT_ITEM_LOAI> dictionary = new Dictionary<long, MAT_DAT_ITEM_LOAI>();
                              foreach (MAT_DAT_ITEM_LOAI mat_dat_item_loai in base.threadSafeDictionary_1.Values)
                              {
                                    if (!World.threadSafeDictionary_3.ContainsKey(mat_dat_item_loai.long_0))
                                    {
                                          queue.Enqueue(mat_dat_item_loai.long_0);
                                          base.threadSafeDictionary_1.Remove((double)mat_dat_item_loai.long_0);
                                    }
                              }
                              foreach (MAT_DAT_ITEM_LOAI mat_dat_item_loai2 in World.threadSafeDictionary_3.Values)
                              {
                                    if (this.TRA_TIM_PHAM_VI_MAT_DAT_ITEM(400, mat_dat_item_loai2))
                                    {
                                          if (!base.threadSafeDictionary_1.ContainsKey((double)mat_dat_item_loai2.long_0))
                                          {
                                                base.threadSafeDictionary_1.Add((double)mat_dat_item_loai2.long_0, mat_dat_item_loai2);
                                                if (mat_dat_item_loai2.threadSafeDictionary_0 != null)
                                                {
                                                      if (!mat_dat_item_loai2.threadSafeDictionary_0.ContainsKey(base.UserSessionID))
                                                      {
                                                            mat_dat_item_loai2.threadSafeDictionary_0.Add(base.UserSessionID, this);
                                                      }
                                                      if (!dictionary.ContainsKey(mat_dat_item_loai2.long_0))
                                                      {
                                                            dictionary.Add(mat_dat_item_loai2.long_0, mat_dat_item_loai2);
                                                      }
                                                }
                                          }
                                    }
                                    else if (base.threadSafeDictionary_1.ContainsKey((double)mat_dat_item_loai2.long_0))
                                    {
                                          queue.Enqueue(mat_dat_item_loai2.long_0);
                                          base.threadSafeDictionary_1.Remove((double)mat_dat_item_loai2.long_0);
                                    }
                              }
                              while (queue.Count > 0)
                              {
                                    long num = (long)queue.Dequeue();
                                    base.MAT_DAT_ITEM_BIEN_MAT(num);
                              }
                              base.MAT_DAT_ITEM_TANG_CUONG(dictionary);
                        }
                        catch (Exception)
                        {
                        }
                  }
            }

            public void BAT_GIU_KIEM_TRA_LAI_PHAM_VI_NGUOI_CHOI()
            {
                  if (World.jlMsg == 1)
                  {
                        Form1.WriteLine(0, "Players_BAT_GIU_KIEM_TRA_LAI_PHAM_VI_NGUOI_CHOI");
                  }
                  try
                  {
                        if (this.threadSafeDictionary_5 != null)
                        {
                              Queue queue = Queue.Synchronized(new Queue());
                              Queue queue2 = Queue.Synchronized(new Queue());
                              Queue queue3 = Queue.Synchronized(new Queue());
                              foreach (Players players in World.allConnectedChars.Values)
                              {
                                    queue.Enqueue(players);
                              }
                              while (queue.Count > 0)
                              {
                                    if (World.jlMsg == 1)
                                    {
                                          Form1.WriteLine(0, "BAT_GIU_KIEM_TRA_LAI_PHAM_VI_NGUOI_CHOI");
                                    }
                                    Players players2 = (Players)queue.Dequeue();
                                    if (((players2.Client != null) && players2.Client.Running) && (players2.UserName != base.UserName))
                                    {
                                          if (this.TRA_TIM_PHAM_VI_NGUOI_CHOI(300, players2))
                                          {
                                                if (!this.threadSafeDictionary_5.ContainsKey(players2.UserSessionID))
                                                {
                                                      this.threadSafeDictionary_5.Add(players2.UserSessionID, players2);
                                                      queue2.Enqueue(players2);
                                                      base.Update_Figure_Data(players2);
                                                }
                                          }
                                          else if (this.threadSafeDictionary_5.ContainsKey(players2.UserSessionID))
                                          {
                                                this.threadSafeDictionary_5.Remove(players2.UserSessionID);
                                                queue3.Enqueue(players2);
                                                base.method_93(this, players2);
                                          }
                                    }
                              }
                              while (queue2.Count > 0)
                              {
                                    Players players3 = (Players)queue2.Dequeue();
                                    if ((players3.Client != null) && players3.Client.Running)
                                    {
                                          if (!players3.threadSafeDictionary_5.ContainsKey(base.UserSessionID))
                                          {
                                                players3.threadSafeDictionary_5.Add(base.UserSessionID, this);
                                          }
                                          players3.Update_Figure_Data(this);
                                    }
                              }
                              while (queue3.Count > 0)
                              {
                                    Players players4 = (Players)queue3.Dequeue();
                                    players4.threadSafeDictionary_5.Remove(base.UserSessionID);
                                    base.method_93(players4, this);
                              }
                        }
                  }
                  catch (Exception exception)
                  {
                        Form1.WriteLine(1, string.Concat(new object[] { "BAT_GIU_KIEM_TRA_LAI_PHAM_VI_NGUOI_CHOI()出错!用户[", base.Userid, "]-[", base.UserName, "]", exception }));
                  }
            }

            public void BO_NHIEM_DOI_TRUONG_NHAC_NHO(Players class15_0, Players class15_1)
            {
                  try
                  {
                        byte[] dst = Converter.hexStringToByte("AA55330000000029002400010001000000C8CE0000000000000000000000000100D1E0D00000000000000000000000000000000000000055AA");
                        Buffer.BlockCopy(BitConverter.GetBytes(class15_0.UserSessionID), 0, dst, 15, 2);
                        byte[] bytes = Encoding.Default.GetBytes(class15_0.UserName);
                        Buffer.BlockCopy(bytes, 0, dst, 0x11, bytes.Length);
                        Buffer.BlockCopy(BitConverter.GetBytes(class15_1.UserSessionID), 0, dst, 0x1f, 2);
                        byte[] src = Encoding.Default.GetBytes(class15_1.UserName);
                        Buffer.BlockCopy(src, 0, dst, 0x21, src.Length);
                        Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, dst, 5, 2);
                        base.Client.Send(dst, dst.Length);
                  }
                  catch (Exception exception)
                  {
                        Form1.WriteLine(1, "委任队长提示出错![" + base.Userid + "]-[" + base.UserName + "]" + exception.Message);
                  }
            }

            #region 버프 스킬
            public void Buff(byte[] byte_5, int int_128)
            {
                  try
                  {
                        this.Packet_Modify(byte_5, int_128);
                        byte[] dst = new byte[4];
                        byte[] buffer2 = new byte[2];
                        Buffer.BlockCopy(byte_5, 11, dst, 0, 4);
                        Buffer.BlockCopy(byte_5, 5, buffer2, 0, 2);
                        //Form1.WriteLine(1, string.Format("버프스킬 사용: 0x{0}, 0x{1}", BitConverter.ToString(dst).Replace("-", ""), BitConverter.ToString(buffer2).Replace("-","")));
                        if (BitConverter.ToInt16(buffer2, 0) == base.UserSessionID)
                        {
                              TBL_XWWL_KONGFU tbl_xwwl_kongfu;
                              if (World.TBL_KONGFU.TryGetValue(BitConverter.ToInt32(dst, 0), out tbl_xwwl_kongfu))
                              {
                                    Form1.WriteLine(1, string.Format("버프스킬 사용: 0x{0}, 0x{1}, 0x{2:X}({3})", BitConverter.ToString(dst).Replace("-", ""), BitConverter.ToString(buffer2).Replace("-", ""), tbl_xwwl_kongfu.FLD_PID, tbl_xwwl_kongfu.FLD_PID));
                                    //Form1.WriteLine(1, string.Format("버프스킬 사용 [1] : 0x{0:X}, 0x{1}", BitConverter.ToInt32(dst, 0), BitConverter.ToString(buffer2).Replace("-", "")));
                                    if (base.NHAN_VAT_MP < tbl_xwwl_kongfu.FLD_MP)
                                    {
                                          base.NOI_CONG_KHONG_DU_NHAC_NHO();
                                    }
                                    else if ((((tbl_xwwl_kongfu.FLD_JOB == 0) || (base.Player_Job == tbl_xwwl_kongfu.FLD_JOB)) && ((tbl_xwwl_kongfu.FLD_ZX == 0) || (base.Player_Zx == tbl_xwwl_kongfu.FLD_ZX))) && (((base.Player_FLD_JOB_LEVEL >= tbl_xwwl_kongfu.FLD_JOBLEVEL) && (base.Player_FLD_LEVEL >= tbl_xwwl_kongfu.FLD_LEVEL)) && TBL_XWWL_KONGFU.smethod_1(this, tbl_xwwl_kongfu.FLD_PID)))
                                    {
                                          //this.Move(base.CharacterCoords_X, base.CharacterCoords_Y, base.CharacterCoords_Z, base.CharacterCoords_Map);
                                          //Form1.WriteLine(1, string.Format("버프스킬 사용 [2] : 0x{0:X}, 0x{1}", BitConverter.ToInt32(dst, 0), BitConverter.ToString(buffer2).Replace("-", "")));
                                          if ((((tbl_xwwl_kongfu.FLD_PID != 0x69016) && (tbl_xwwl_kongfu.FLD_PID != 0x6b726)) && ((tbl_xwwl_kongfu.FLD_PID != 0x6907a) && (tbl_xwwl_kongfu.FLD_PID != 0x6b78a))) && (((tbl_xwwl_kongfu.FLD_PID != 0x690de) && (tbl_xwwl_kongfu.FLD_PID != 0x6b7ee)) && ((tbl_xwwl_kongfu.FLD_PID != 0x69142) && (tbl_xwwl_kongfu.FLD_PID != 0x6b852))))
                                          {
                                                // Form1.WriteLine(1, string.Format("버프스킬 사용 [3] : 0x{0:X}, 0x{1}", BitConverter.ToInt32(dst, 0), BitConverter.ToString(buffer2).Replace("-", "")));
                                                if(tbl_xwwl_kongfu.FLD_PID == 0xF47B9)
                                                {
                                                      //화룡지의 스킬사용
                                                     if(base.CharacterCoords_Map == 101)
                                                      {
                                                            //화룡지의 맵이 아니면 화룡지의맵으로 이동
                                                            this.Move(5, 5, 15, 28401);
                                                            
                                                      }
                                                     else
                                                      {
                                                            //화룡지의 맵이면 현파발로 이동
                                                            this.Move(495, 1570, 0, 101);
                                                      }
                                                }
                                                else if (tbl_xwwl_kongfu.FLD_PID == 0x92c0d)
                                                {                                                      
                                                      //base.CharacterCoords_Map
                                                      if (base.Add_Status_List.ContainsKey(0x92c0e))
                                                      {
                                                            base.Add_Status_List[0x92c0e].THOI_GIAN_KET_THUC_SU_KIEN();
                                                      }
                                                      if (base.Add_Status_List.ContainsKey(0x92c0d))
                                                      {
                                                            base.Add_Status_List[0x92c0d].THOI_GIAN_KET_THUC_SU_KIEN();
                                                      }
                                                      if (base.Add_Status_List.ContainsKey(0x92c0f))
                                                      {
                                                            base.Add_Status_List[0x92c0f].THOI_GIAN_KET_THUC_SU_KIEN();
                                                      }
                                                      if (base.int_9 == 1)
                                                      {
                                                            this.TRANG_THAI_TANG_HINH(0);
                                                      }
                                                      Additional_Sate_Class class2 = new Additional_Sate_Class(this, 0x493e0, tbl_xwwl_kongfu.FLD_PID, 0);
                                                      base.Add_Status_List.Add(tbl_xwwl_kongfu.FLD_PID, class2);
                                                      this.Status_Effect(BitConverter.GetBytes(tbl_xwwl_kongfu.FLD_PID), 1, 0x493e0);
                                                      base.int_10 = 2;
                                                      this.method_438(dst, 2);
                                                }
                                                else if (tbl_xwwl_kongfu.FLD_PID == 0x92c0e)
                                                {
                                                      //Form1.WriteLine(1, string.Format("버프스킬 사용 [5] : 0x{0:X}, 0x{1}", BitConverter.ToInt32(dst, 0), BitConverter.ToString(buffer2).Replace("-", "")));
                                                      if (base.int_9 == 1)
                                                      {
                                                            this.TRANG_THAI_TANG_HINH(0);
                                                      }
                                                      if (base.Add_Status_List.ContainsKey(0x92c0d))
                                                      {
                                                            base.Add_Status_List[0x92c0d].THOI_GIAN_KET_THUC_SU_KIEN();
                                                      }
                                                      if (base.Add_Status_List.ContainsKey(0x92c0f))
                                                      {
                                                            base.Add_Status_List[0x92c0f].THOI_GIAN_KET_THUC_SU_KIEN();
                                                      }
                                                      if (!base.Add_Status_List.ContainsKey(0x92c0e))
                                                      {
                                                            Additional_Sate_Class class3 = new Additional_Sate_Class(this, 0x493e0, tbl_xwwl_kongfu.FLD_PID, 0);
                                                            base.Add_Status_List.Add(tbl_xwwl_kongfu.FLD_PID, class3);
                                                            this.Status_Effect(BitConverter.GetBytes(tbl_xwwl_kongfu.FLD_PID), 1, 0x493e0);
                                                      }
                                                      base.int_10 = 3;
                                                      this.method_438(dst, 3);
                                                }
                                                else if (tbl_xwwl_kongfu.FLD_PID == 0x92c0f)
                                                {
                                                      //Form1.WriteLine(1, string.Format("버프스킬 사용 [6] : 0x{0:X}, 0x{1}", BitConverter.ToInt32(dst, 0), BitConverter.ToString(buffer2).Replace("-", "")));
                                                      if (base.int_9 == 1)
                                                      {
                                                            this.TRANG_THAI_TANG_HINH(0);
                                                      }
                                                      if (base.Add_Status_List.ContainsKey(0x92c0d))
                                                      {
                                                            base.Add_Status_List[0x92c0d].THOI_GIAN_KET_THUC_SU_KIEN();
                                                      }
                                                      if (base.Add_Status_List.ContainsKey(0x92c0e))
                                                      {
                                                            base.Add_Status_List[0x92c0e].THOI_GIAN_KET_THUC_SU_KIEN();
                                                      }
                                                      if (!base.Add_Status_List.ContainsKey(0x92c0f))
                                                      {
                                                            Additional_Sate_Class class4 = new Additional_Sate_Class(this, 0x493e0, tbl_xwwl_kongfu.FLD_PID, 0);
                                                            base.Add_Status_List.Add(tbl_xwwl_kongfu.FLD_PID, class4);
                                                            this.Status_Effect(BitConverter.GetBytes(tbl_xwwl_kongfu.FLD_PID), 1, 0x493e0);
                                                      }
                                                      base.int_10 = 5;
                                                      this.method_438(dst, 5);
                                                }
                                                else if (tbl_xwwl_kongfu.FLD_PID == 0xf4755)
                                                {
                                                      //Form1.WriteLine(1, string.Format("버프스킬 사용 [7] : 0x{0:X}, 0x{1}", BitConverter.ToInt32(dst, 0), BitConverter.ToString(buffer2).Replace("-", "")));
                                                      if (base.Add_Status_List.ContainsKey(0xf4756))
                                                      {
                                                            base.Add_Status_List[0xf4756].THOI_GIAN_KET_THUC_SU_KIEN();
                                                            return;
                                                      }
                                                      if (base.Add_Status_List.ContainsKey(0xf4757))
                                                      {
                                                            base.Add_Status_List[0xf4757].THOI_GIAN_KET_THUC_SU_KIEN();
                                                            return;
                                                      }
                                                      if (base.Add_Status_List.ContainsKey(0xf4755))
                                                      {
                                                            base.Add_Status_List[0xf4755].THOI_GIAN_KET_THUC_SU_KIEN();
                                                            return;
                                                      }
                                                      if (!base.Add_Status_List.ContainsKey(0xf4755))
                                                      {
                                                            Additional_Sate_Class class5 = new Additional_Sate_Class(this, 0x1b7740, tbl_xwwl_kongfu.FLD_PID, 0);
                                                            base.Add_Status_List.Add(tbl_xwwl_kongfu.FLD_PID, class5);
                                                            this.Status_Effect(BitConverter.GetBytes(tbl_xwwl_kongfu.FLD_PID), 1, 0x1b7740);
                                                            base.FLD_nhan_vat_vo_cong_luc_cong_kich_tang_cuong_ti_le_phan_tram += 0.05;
                                                            base.UpdatePowersAndStatus();
                                                            this.method_438(BitConverter.GetBytes(tbl_xwwl_kongfu.FLD_PID), 1);
                                                      }
                                                }
                                                else if (tbl_xwwl_kongfu.FLD_PID == 0xf4756)
                                                {
                                                      //Form1.WriteLine(1, string.Format("버프스킬 사용 [8] : 0x{0:X}, 0x{1}", BitConverter.ToInt32(dst, 0), BitConverter.ToString(buffer2).Replace("-", "")));
                                                      if (base.Add_Status_List.ContainsKey(0xf4757))
                                                      {
                                                            base.Add_Status_List[0xf4757].THOI_GIAN_KET_THUC_SU_KIEN();
                                                            return;
                                                      }
                                                      if (base.Add_Status_List.ContainsKey(0xf4755))
                                                      {
                                                            base.Add_Status_List[0xf4755].THOI_GIAN_KET_THUC_SU_KIEN();
                                                            return;
                                                      }
                                                      if (base.Add_Status_List.ContainsKey(0xf4756))
                                                      {
                                                            base.Add_Status_List[0xf4756].THOI_GIAN_KET_THUC_SU_KIEN();
                                                            return;
                                                      }
                                                      if (!base.Add_Status_List.ContainsKey(0xf4756))
                                                      {
                                                            Additional_Sate_Class class6 = new Additional_Sate_Class(this, 0x36ee80, tbl_xwwl_kongfu.FLD_PID, 0);
                                                            base.Add_Status_List.Add(tbl_xwwl_kongfu.FLD_PID, class6);
                                                            this.Status_Effect(BitConverter.GetBytes(tbl_xwwl_kongfu.FLD_PID), 1, 0x36ee80);
                                                            base.FLD_nhan_vat_vo_cong_luc_cong_kich_tang_cuong_ti_le_phan_tram += 0.1;
                                                            base.UpdatePowersAndStatus();
                                                            this.method_438(BitConverter.GetBytes(tbl_xwwl_kongfu.FLD_PID), 1);
                                                      }
                                                }
                                                else if (tbl_xwwl_kongfu.FLD_PID == 0xf4757)
                                                {
                                                      //Form1.WriteLine(1, string.Format("버프스킬 사용 [9] : 0x{0:X}, 0x{1}", BitConverter.ToInt32(dst, 0), BitConverter.ToString(buffer2).Replace("-", "")));
                                                      if (base.Add_Status_List.ContainsKey(0xf4757))
                                                      {
                                                            base.Add_Status_List[0xf4757].THOI_GIAN_KET_THUC_SU_KIEN();
                                                            return;
                                                      }
                                                      if (base.Add_Status_List.ContainsKey(0xf4755))
                                                      {
                                                            base.Add_Status_List[0xf4755].THOI_GIAN_KET_THUC_SU_KIEN();
                                                            return;
                                                      }
                                                      if (base.Add_Status_List.ContainsKey(0xf4756))
                                                      {
                                                            base.Add_Status_List[0xf4756].THOI_GIAN_KET_THUC_SU_KIEN();
                                                            return;
                                                      }
                                                      if (!base.Add_Status_List.ContainsKey(0xf4757))
                                                      {
                                                            Additional_Sate_Class class7 = new Additional_Sate_Class(this, 0x36ee80, tbl_xwwl_kongfu.FLD_PID, 0);
                                                            base.Add_Status_List.Add(tbl_xwwl_kongfu.FLD_PID, class7);
                                                            this.Status_Effect(BitConverter.GetBytes(tbl_xwwl_kongfu.FLD_PID), 1, 0x36ee80);
                                                            base.FLD_nhan_vat_vo_cong_luc_cong_kich_tang_cuong_ti_le_phan_tram += 0.15;
                                                            base.UpdatePowersAndStatus();
                                                            this.method_438(BitConverter.GetBytes(tbl_xwwl_kongfu.FLD_PID), 1);
                                                      }
                                                }
                                                else if (tbl_xwwl_kongfu.FLD_PID == 0xf468d)
                                                {
                                                      //Form1.WriteLine(1, string.Format("버프스킬 사용 [10] : 0x{0:X}, 0x{1}", BitConverter.ToInt32(dst, 0), BitConverter.ToString(buffer2).Replace("-", "")));
                                                      if (base.Add_Status_List.ContainsKey(0xf468d))
                                                      {
                                                            base.Add_Status_List[0xf468d].THOI_GIAN_KET_THUC_SU_KIEN();
                                                      }
                                                      if (base.Add_Status_List.ContainsKey(0xf468e))
                                                      {
                                                            base.Add_Status_List[0xf468e].THOI_GIAN_KET_THUC_SU_KIEN();
                                                      }
                                                      if (!base.Add_Status_List.ContainsKey(0xf468d))
                                                      {
                                                            Additional_Sate_Class class8 = new Additional_Sate_Class(this, 0x493e0, tbl_xwwl_kongfu.FLD_PID, 0);
                                                            base.Add_Status_List.Add(tbl_xwwl_kongfu.FLD_PID, class8);
                                                            this.Status_Effect(BitConverter.GetBytes(tbl_xwwl_kongfu.FLD_PID), 1, 0x493e0);
                                                      }
                                                      base.int_10 = 6;
                                                      this.method_438(BitConverter.GetBytes(tbl_xwwl_kongfu.FLD_PID), 6);
                                                }
                                                else if (tbl_xwwl_kongfu.FLD_PID == 0x1e8995)
                                                {
                                                      //Form1.WriteLine(1, string.Format("버프스킬 사용 [11] : 0x{0:X}, 0x{1}", BitConverter.ToInt32(dst, 0), BitConverter.ToString(buffer2).Replace("-", "")));
                                                      if (base.Add_Status_List.ContainsKey(0x1e8995))
                                                      {
                                                            base.Add_Status_List[0x1e8995].THOI_GIAN_KET_THUC_SU_KIEN();
                                                      }
                                                      double num = 1800000.0;
                                                      Additional_Sate_Class class9 = new Additional_Sate_Class(this, (int)num, tbl_xwwl_kongfu.FLD_PID, 0);
                                                      base.Add_Status_List.Add(tbl_xwwl_kongfu.FLD_PID, class9);
                                                      this.Status_Effect(BitConverter.GetBytes(tbl_xwwl_kongfu.FLD_PID), 1, (int)num);
                                                      base.addFLD_ATT_Percentage(0.03M);
                                                      base.FLD_them_vao_ti_le_phan_tram_HP_han_muc_toi_da += 0.05;
                                                      base.UpdatePowersAndStatus();
                                                      this.CHAR_SENT_DATA_ATTACK(this, base.UserSessionID, tbl_xwwl_kongfu.FLD_PID, 0, 0, 0, -1);
                                                }
                                                else if (tbl_xwwl_kongfu.FLD_PID == 0xf468e)
                                                {
                                                      //Form1.WriteLine(1, string.Format("버프스킬 사용 [12] : 0x{0:X}, 0x{1}", BitConverter.ToInt32(dst, 0), BitConverter.ToString(buffer2).Replace("-", "")));
                                                      if (base.Add_Status_List.ContainsKey(0xf468d))
                                                      {
                                                            base.Add_Status_List[0xf468d].THOI_GIAN_KET_THUC_SU_KIEN();
                                                      }
                                                      if (base.Add_Status_List.ContainsKey(0xf468e))
                                                      {
                                                            base.Add_Status_List[0xf468e].THOI_GIAN_KET_THUC_SU_KIEN();
                                                      }
                                                      if (!base.Add_Status_List.ContainsKey(0xf468e))
                                                      {
                                                            Additional_Sate_Class class10 = new Additional_Sate_Class(this, 0x493e0, tbl_xwwl_kongfu.FLD_PID, 0);
                                                            base.Add_Status_List.Add(tbl_xwwl_kongfu.FLD_PID, class10);
                                                            this.Status_Effect(BitConverter.GetBytes(tbl_xwwl_kongfu.FLD_PID), 1, 0x493e0);
                                                      }
                                                      base.int_10 = 7;
                                                      this.method_438(BitConverter.GetBytes(tbl_xwwl_kongfu.FLD_PID), 7);
                                                }
                                                else if (tbl_xwwl_kongfu.FLD_PID == 0xf46f1)
                                                {
                                                      this.method_438(BitConverter.GetBytes(tbl_xwwl_kongfu.FLD_PID), 8);
                                                }
                                                else if (tbl_xwwl_kongfu.FLD_PID == 0xf46f2)
                                                {
                                                      this.method_438(BitConverter.GetBytes(tbl_xwwl_kongfu.FLD_PID), 9);
                                                }
                                                else if (tbl_xwwl_kongfu.FLD_PID == 0x311f1)
                                                {
                                                      //Form1.WriteLine(1, string.Format("버프스킬 사용 [13] : 0x{0:X}, 0x{1}", BitConverter.ToInt32(dst, 0), BitConverter.ToString(buffer2).Replace("-", "")));
                                                      if (base.Add_Status_List.ContainsKey(0x311f1))
                                                      {
                                                            base.Add_Status_List[0x311f1].THOI_GIAN_KET_THUC_SU_KIEN();
                                                      }
                                                      Additional_Sate_Class class11 = new Additional_Sate_Class(this, 0x493e0, tbl_xwwl_kongfu.FLD_PID, 0);
                                                      base.Add_Status_List.Add(tbl_xwwl_kongfu.FLD_PID, class11);
                                                      base.addFLD_ATT_Percentage(0.2M);
                                                      base.FLD_them_vao_ti_le_phan_tram_HP_han_muc_toi_da += 0.05;
                                                      base.UpdatePowersAndStatus();
                                                      this.Status_Effect(BitConverter.GetBytes(tbl_xwwl_kongfu.FLD_PID), 1, 0x493e0);
                                                      this.CHAR_SENT_DATA_ATTACK(this, base.UserSessionID, tbl_xwwl_kongfu.FLD_PID, 0, 0, 0, -1);
                                                }
                                                else if (tbl_xwwl_kongfu.FLD_PID == 0x49891)
                                                {
                                                      if (base.Add_Status_List.ContainsKey(0x49891))
                                                      {
                                                            base.Add_Status_List[0x49891].THOI_GIAN_KET_THUC_SU_KIEN();
                                                      }
                                                      Additional_Sate_Class class12 = new Additional_Sate_Class(this, 0x493e0, tbl_xwwl_kongfu.FLD_PID, 0);
                                                      base.Add_Status_List.Add(tbl_xwwl_kongfu.FLD_PID, class12);
                                                      base.addFLD_ATT_Percentage(0.1M);
                                                      base.FLD_them_vao_ti_le_phan_tram_HP_han_muc_toi_da += 0.05;
                                                      base.UpdatePowersAndStatus();
                                                      this.Status_Effect(BitConverter.GetBytes(tbl_xwwl_kongfu.FLD_PID), 1, 0x493e0);
                                                      this.CHAR_SENT_DATA_ATTACK(this, base.UserSessionID, tbl_xwwl_kongfu.FLD_PID, 0, 0, 0, -1);
                                                }
                                                else if (tbl_xwwl_kongfu.FLD_PID == 0x61ff9)
                                                {
                                                      if (base.Add_Status_List.ContainsKey(0x61ff9))
                                                      {
                                                            base.Add_Status_List[0x61ff9].THOI_GIAN_KET_THUC_SU_KIEN();
                                                      }
                                                      Additional_Sate_Class class13 = new Additional_Sate_Class(this, 0x493e0, tbl_xwwl_kongfu.FLD_PID, 0);
                                                      base.Add_Status_List.Add(tbl_xwwl_kongfu.FLD_PID, class13);
                                                      base.FLD_them_vao_ti_le_phan_tram_sinh_menh += 0.4;
                                                      base.FLD_them_vao_ti_le_phan_tram_HP_han_muc_toi_da += 0.1;
                                                      base.UpdatePowersAndStatus();
                                                      this.Status_Effect(BitConverter.GetBytes(tbl_xwwl_kongfu.FLD_PID), 1, 0x493e0);
                                                      this.CHAR_SENT_DATA_ATTACK(this, base.UserSessionID, tbl_xwwl_kongfu.FLD_PID, 0, 0, 0, -1);
                                                }
                                                else if (tbl_xwwl_kongfu.FLD_PID == 0x61f31)
                                                {
                                                      this.method_438(dst, 1);
                                                }
                                                else if (tbl_xwwl_kongfu.FLD_PID == 0xc39b1)
                                                {
                                                      if (base.Add_Status_List.ContainsKey(tbl_xwwl_kongfu.FLD_PID))
                                                      {
                                                            base.Add_Status_List[tbl_xwwl_kongfu.FLD_PID].THOI_GIAN_KET_THUC_SU_KIEN();
                                                      }
                                                      Additional_Sate_Class class14 = new Additional_Sate_Class(this, (int)(300000.0 + (base.Thich_khach_Kiem_nhan_loan_vu * 10000.0)), tbl_xwwl_kongfu.FLD_PID, 0);
                                                      base.Add_Status_List.Add(tbl_xwwl_kongfu.FLD_PID, class14);
                                                      base.FLD_cong_kich_toc_do = 200;
                                                      base.UpdatePowersAndStatus();
                                                      this.Status_Effect(BitConverter.GetBytes(tbl_xwwl_kongfu.FLD_PID), 1, (int)(300000.0 + (base.Thich_khach_Kiem_nhan_loan_vu * 10000.0)));
                                                      this.method_438(BitConverter.GetBytes(tbl_xwwl_kongfu.FLD_PID), 1);
                                                      base.Update_Attack_Speed();
                                                }
                                                else if (tbl_xwwl_kongfu.FLD_PID == 0xc39b2)
                                                {
                                                      if (base.Add_Status_List.ContainsKey(0x92c0f))
                                                      {
                                                            base.Add_Status_List[0x92c0f].THOI_GIAN_KET_THUC_SU_KIEN();
                                                      }
                                                      if (base.Add_Status_List.ContainsKey(0x92c0e))
                                                      {
                                                            base.Add_Status_List[0x92c0e].THOI_GIAN_KET_THUC_SU_KIEN();
                                                      }
                                                      if (base.Add_Status_List.ContainsKey(0x92c0d))
                                                      {
                                                            base.Add_Status_List[0x92c0d].THOI_GIAN_KET_THUC_SU_KIEN();
                                                      }
                                                      base.int_10 = 1;
                                                      if (base.int_9 == 0)
                                                      {
                                                            this.TRANG_THAI_TANG_HINH(1);
                                                      }
                                                      else
                                                      {
                                                            this.TRANG_THAI_TANG_HINH(0);
                                                      }
                                                      this.Status_Effect(BitConverter.GetBytes(tbl_xwwl_kongfu.FLD_PID), 0, 0);
                                                      this.method_438(BitConverter.GetBytes(tbl_xwwl_kongfu.FLD_PID), 0);
                                                }
                                                else if (tbl_xwwl_kongfu.FLD_PID == 0xc3a15)
                                                {
                                                      this.method_438(BitConverter.GetBytes(tbl_xwwl_kongfu.FLD_PID), 1);
                                                      this.method_438(BitConverter.GetBytes(tbl_xwwl_kongfu.FLD_PID), 1);
                                                }
                                                else if (tbl_xwwl_kongfu.FLD_PID == 0xc3a16)
                                                {
                                                      if (base.Add_Status_List.ContainsKey(tbl_xwwl_kongfu.FLD_PID))
                                                      {
                                                            base.Add_Status_List[tbl_xwwl_kongfu.FLD_PID].THOI_GIAN_KET_THUC_SU_KIEN();
                                                      }
                                                      Additional_Sate_Class class15 = new Additional_Sate_Class(this, 0x7530, tbl_xwwl_kongfu.FLD_PID, 0);
                                                      base.Add_Status_List.Add(tbl_xwwl_kongfu.FLD_PID, class15);
                                                      this.Status_Effect(BitConverter.GetBytes(tbl_xwwl_kongfu.FLD_PID), 1, 0x7530);
                                                      this.method_438(BitConverter.GetBytes(tbl_xwwl_kongfu.FLD_PID), 1);
                                                      base.DLL_FLD_THEM_VAO_TI_LE_PHAN_TRAM_PHONG_NGU(0.2M);
                                                      double num2 = base.FLD_them_vao_ti_le_phan_tram_ne_tranh;
                                                      base.FLD_them_vao_ti_le_phan_tram_ne_tranh = num2 + 1.0;
                                                      base.UpdatePowersAndStatus();
                                                }
                                                else if (tbl_xwwl_kongfu.FLD_PID == 0xdc0b5)
                                                {
                                                      if ((base.Add_Status_List.ContainsKey(0xdc0b5) || base.Add_Status_List.ContainsKey(0xdc0b6)) || base.Add_Status_List.ContainsKey(0xdc0b7))
                                                      {
                                                            return;
                                                      }
                                                      if (base.Add_Status_List.ContainsKey(tbl_xwwl_kongfu.FLD_PID))
                                                      {
                                                            base.Add_Status_List[tbl_xwwl_kongfu.FLD_PID].THOI_GIAN_KET_THUC_SU_KIEN();
                                                      }
                                                      int num3 = ((int)base.Cam_su_Tam_khuc_hoa_minh) * 0xea60;
                                                      Additional_Sate_Class class16 = new Additional_Sate_Class(this, num3, tbl_xwwl_kongfu.FLD_PID, 0);
                                                      base.Add_Status_List.Add(tbl_xwwl_kongfu.FLD_PID, class16);
                                                      this.Status_Effect(BitConverter.GetBytes(tbl_xwwl_kongfu.FLD_PID), 1, num3);
                                                      this.CHAR_SENT_DATA_ATTACK(this, base.UserSessionID, tbl_xwwl_kongfu.FLD_PID, 0, 0, 0, -1);
                                                      base.UpdatePowersAndStatus();
                                                      base.Thuong_ha_dieu_tinh_toan = 0;
                                                }
                                                else if (tbl_xwwl_kongfu.FLD_PID == 0xdc0b6)
                                                {
                                                      if ((base.Add_Status_List.ContainsKey(0xdc0b5) || base.Add_Status_List.ContainsKey(0xdc0b6)) || base.Add_Status_List.ContainsKey(0xdc0b7))
                                                      {
                                                            return;
                                                      }
                                                      if (base.Add_Status_List.ContainsKey(tbl_xwwl_kongfu.FLD_PID))
                                                      {
                                                            base.Add_Status_List[tbl_xwwl_kongfu.FLD_PID].THOI_GIAN_KET_THUC_SU_KIEN();
                                                      }
                                                      int num4 = ((int)base.Cam_su_Tam_khuc_hoa_minh) * 0xea60;
                                                      Additional_Sate_Class class17 = new Additional_Sate_Class(this, num4, tbl_xwwl_kongfu.FLD_PID, 0);
                                                      base.Add_Status_List.Add(tbl_xwwl_kongfu.FLD_PID, class17);
                                                      this.Status_Effect(BitConverter.GetBytes(tbl_xwwl_kongfu.FLD_PID), 1, num4);
                                                      this.CHAR_SENT_DATA_ATTACK(this, base.UserSessionID, tbl_xwwl_kongfu.FLD_PID, 0, 0, 0, -1);
                                                      base.UpdatePowersAndStatus();
                                                      base.Duoi_ha_dieu_tinh_toan = 0;
                                                }
                                                else if (tbl_xwwl_kongfu.FLD_PID == 0xdc0b7)
                                                {
                                                      if ((base.Add_Status_List.ContainsKey(0xdc0b5) || base.Add_Status_List.ContainsKey(0xdc0b6)) || base.Add_Status_List.ContainsKey(0xdc0b7))
                                                      {
                                                            return;
                                                      }
                                                      if (base.Add_Status_List.ContainsKey(tbl_xwwl_kongfu.FLD_PID))
                                                      {
                                                            base.Add_Status_List[tbl_xwwl_kongfu.FLD_PID].THOI_GIAN_KET_THUC_SU_KIEN();
                                                      }
                                                      int num5 = ((int)base.Cam_su_Tam_khuc_hoa_minh) * 0xea60;
                                                      Additional_Sate_Class class18 = new Additional_Sate_Class(this, num5, tbl_xwwl_kongfu.FLD_PID, 0);
                                                      base.Add_Status_List.Add(tbl_xwwl_kongfu.FLD_PID, class18);
                                                      this.Status_Effect(BitConverter.GetBytes(tbl_xwwl_kongfu.FLD_PID), 1, num5);
                                                      this.CHAR_SENT_DATA_ATTACK(this, base.UserSessionID, tbl_xwwl_kongfu.FLD_PID, 0, 0, 0, -1);
                                                      base.UpdatePowersAndStatus();
                                                      base.Ngoc_lien_hoan_ke_so = 0;
                                                }
                                                base.NHAN_VAT_MP -= tbl_xwwl_kongfu.FLD_MP;
                                                this.UpdateHP_MP_SP();
                                          }
                                          else
                                          {
                                                int num6 = 0;
                                                long num7 = base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[12].GetItem_ID;
                                                if ((base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].GetItem_ID != 0) && (num7 != 0))
                                                {
                                                      num6 = 1;
                                                }
                                                else
                                                {
                                                      num6 = 6;
                                                }
                                                if (base.Bow_quan_cong_skill_ID == tbl_xwwl_kongfu.FLD_PID)
                                                {
                                                      base.Bow_quan_cong_skill_ID = 0;
                                                }
                                                else
                                                {
                                                      base.Bow_quan_cong_skill_ID = tbl_xwwl_kongfu.FLD_PID;
                                                }
                                                base.method_134(tbl_xwwl_kongfu.FLD_PID, num6);
                                          }
                                    }
                              }
                              else
                              {
                                    
                                    //Form1.WriteLine(1, string.Format("버프스킬 사용 [14] : 0x{0:X}, 0x{1}", BitConverter.ToInt32(dst, 0), BitConverter.ToString(buffer2).Replace("-", "")));
                                    if (base.int_10 == 1)
                                    {
                                          base.int_10 = 1;
                                          this.method_438(dst, 1);
                                    }
                                    if (BitConverter.ToInt32(dst, 0) == 1)
                                    {
                                          //캐릭터 행동 스킬
                                          //Form1.WriteLine(1, string.Format("운기조식 사용 [15] : 0x{0:X}, 0x{1}", BitConverter.ToInt32(dst, 0), BitConverter.ToString(buffer2).Replace("-", "")));
                                          Players _pl = this;
                                          if (_pl.NHAN_VAT_HP < _pl.NHAN_VAT_LON_NHAT_HP)
                                          {
                                                _pl.NHAN_VAT_HP = _pl.NHAN_VAT_LON_NHAT_HP;
                                          }
                                          if (_pl.NHAN_VAT_MP < _pl.NHAN_VAT_LON_NHAT_MP)
                                          {
                                                _pl.NHAN_VAT_MP = _pl.NHAN_VAT_LON_NHAT_MP;
                                          }
                                          _pl.UpdateHP_MP_SP();

                                          this.method_438(dst, 1);
                                          if (this.timer_2 != null)
                                          {
                                                this.timer_2.Enabled = false;
                                                this.timer_2.Close();
                                                this.timer_2.Dispose();
                                                this.timer_2 = null;
                                          }
                                    }
                              }
                        }
                        else
                        {
                              TBL_XWWL_KONGFU tbl_xwwl_kongfu2;
                              World.TBL_KONGFU.TryGetValue(BitConverter.ToInt32(dst, 0), out tbl_xwwl_kongfu2);
                        }
                  }
                  catch
                  {
                  }
            }
            #endregion
            public void BUON_BAN_ITEM(int int_128, int int_129, byte[] byte_5, byte[] byte_6, byte[] byte_7, byte[] byte_8, byte[] byte_9, byte[] byte_10, int int_130)
            {
                  try
                  {
                        TBL_XWWL_ITEM tbl_xwwl_item;
                        VAT_PHAM_LOAI vat_pham_loai;
                        VAT_PHAM_LOAI vat_pham_loai2;
                        byte[] dst = Converter.hexStringToByte("AA55870001470393007800020000000200000065CA9A3B0000000001000000000000000000000000000000000000000000000000000000000000000000000000000000010E020F00020000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000094B555AA");
                        Buffer.BlockCopy(BitConverter.GetBytes(int_129), 0, dst, 11, 1);
                        Buffer.BlockCopy(BitConverter.GetBytes(int_129), 0, dst, 15, 1);
                        Buffer.BlockCopy(byte_8, 0, dst, 0x13, 4);
                        Buffer.BlockCopy(byte_6, 0, dst, 0x1b, 4);
                        Buffer.BlockCopy(byte_5, 0, dst, 0x23, 4);
                        Buffer.BlockCopy(byte_8, 0, dst, 0x33, 4);
                        Buffer.BlockCopy(byte_6, 0, dst, 0x3b, 4);
                        Buffer.BlockCopy(byte_9, 0, dst, 0x4b, 0x38);
                        if (BitConverter.ToInt32(byte_10, 0) != 0)
                        {
                              Buffer.BlockCopy(byte_10, 0, dst, 0x77, 4);
                        }
                        byte[] buffer2 = new byte[0x49];
                        uint num = (uint)BitConverter.ToInt32(byte_6, 0);
                        if (!World.Itme.TryGetValue(BitConverter.ToInt32(byte_8, 0), out tbl_xwwl_item) || (num < 1))
                        {
                              return;
                        }
                        int num2 = tbl_xwwl_item.FLD_SIDE;
                        if (int_129 != 1)
                        {
                              goto Label_024C;
                        }
                        if (num2 == 0)
                        {
                              goto Label_0190;
                        }
                        switch (BitConverter.ToInt32(byte_8, 0))
                        {
                              case 0x2faf080b:
                              case 0x2faf080c:
                              case 0x2faf080d:
                              case 0x2faf0802:
                              case 0x2faf0801:
                              case 0x2faf0817:
                              case 0x2faf0818:
                              case 0x2faf0819:
                              case 0x2faf081a:
                              case 0x2faf081b:
                              case 0x2faf081c:
                              case 0x2faf083d:
                              case 0x2faf083e:
                                    break;

                              default:
                                    vat_pham_loai = base.NHAN_NHAN_VAT_ITEM_LOAI_HINH(BitConverter.ToInt32(byte_8, 0));
                                    goto Label_016B;
                        }
                        vat_pham_loai = base.method_108(BitConverter.ToInt32(byte_8, 0), int_130);
                        Label_016B:
                        if (vat_pham_loai != null)
                        {
                              int_128 = vat_pham_loai.VAT_PHAM_VI_TRI;
                              byte_6 = BitConverter.GetBytes((long)(num + BitConverter.ToInt32(vat_pham_loai.VAT_PHAM_SO_LUONG, 0)));
                        }
                        goto Label_019B;
                        Label_0190:
                        num = 1;
                        byte_6 = BitConverter.GetBytes(1);
                        Label_019B:
                        Buffer.BlockCopy(byte_7, 0, dst, 0x2b, 8);
                        Buffer.BlockCopy(byte_7, 0, buffer2, 0, 8);
                        Buffer.BlockCopy(byte_8, 0, buffer2, 8, 4);
                        Buffer.BlockCopy(byte_9, 0, buffer2, 0x10, 20);
                        Buffer.BlockCopy(byte_6, 0, buffer2, 12, 4);
                        if (BitConverter.ToInt32(byte_10, 0) != 0)
                        {
                              Buffer.BlockCopy(byte_10, 0, buffer2, 60, 2);
                        }
                        Buffer.BlockCopy(BitConverter.GetBytes((int)num), 0, dst, 0x1b, 4);
                        Buffer.BlockCopy(byte_6, 0, dst, 0x3a, 4);
                        base.TRANG_BI_LAN_BAO_VAY[int_128].Item_byte = buffer2;
                        if ((World.BackPack_Switch == 1) && (BitConverter.ToInt32(byte_8, 0) == 0x186a01))
                        {
                              base.Equipmen_bags_whether_to_open = 1;
                              base.EquipmentBasket_Wrapped();
                        }
                        goto Label_0380;
                        Label_024C:
                        vat_pham_loai2 = base.TRANG_BI_LAN_BAO_VAY[int_128];
                        if (((BitConverter.ToInt32(vat_pham_loai2.VAT_PHAM_ID, 0) == 0) || (BitConverter.ToInt32(vat_pham_loai2.VAT_PHAM_SO_LUONG, 0) == 0)) || ((BitConverter.ToInt32(vat_pham_loai2.VAT_PHAM_SO_LUONG, 0) < num) || (num < 1)))
                        {
                              return;
                        }
                        if (num2 != 0)
                        {
                              int num4 = BitConverter.ToInt32(vat_pham_loai2.VAT_PHAM_SO_LUONG, 0) - ((int)num);
                              if (num4 <= 0)
                              {
                                    base.TRANG_BI_LAN_BAO_VAY[int_128].Item_byte = new byte[0x49];
                                    Buffer.BlockCopy(BitConverter.GetBytes((int)num), 0, dst, 0x1b, 4);
                                    Buffer.BlockCopy(BitConverter.GetBytes(num4), 0, dst, 0x3b, 4);
                              }
                              else
                              {
                                    Buffer.BlockCopy(vat_pham_loai2.Item_toan_bo_ID, 0, buffer2, 0, 8);
                                    Buffer.BlockCopy(vat_pham_loai2.VAT_PHAM_ID, 0, buffer2, 8, 4);
                                    Buffer.BlockCopy(vat_pham_loai2.Item_thuoc_tinh, 0, buffer2, 0x10, 0x38);
                                    Buffer.BlockCopy(BitConverter.GetBytes(num4), 0, buffer2, 12, 4);
                                    Buffer.BlockCopy(vat_pham_loai2.Item_toan_bo_ID, 0, dst, 0x2b, 8);
                                    Buffer.BlockCopy(BitConverter.GetBytes((int)num), 0, dst, 0x1b, 4);
                                    Buffer.BlockCopy(BitConverter.GetBytes(num4), 0, dst, 0x3b, 4);
                                    base.TRANG_BI_LAN_BAO_VAY[int_128].Item_byte = buffer2;
                              }
                        }
                        else
                        {
                              base.TRANG_BI_LAN_BAO_VAY[int_128].Item_byte = new byte[0x49];
                        }
                        Label_0380:
                        Buffer.BlockCopy(BitConverter.GetBytes(int_128), 0, dst, 0x44, 1);
                        Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, dst, 5, 2);
                        if (base.Client != null)
                        {
                              base.Client.Send(dst, dst.Length);
                        }
                  }
                  catch (Exception exception)
                  {
                        Form1.WriteLine(1, "买卖VAT_PHAM 出错 [" + base.Userid + "][" + base.UserName + "] " + exception.Message);
                  }
            }

            private void CA_NHAN_CUA_HANG_HIEN_THI_GOI(int int_128, int int_129, byte[] byte_5)
            {
                  PacketData data = new PacketData();
                  data.Write4(1);
                  data.Write4(int_129);
                  if (int_128 == 3)
                  {
                        data.Write4(int_129);
                  }
                  else
                  {
                        data.method_7(uint.MaxValue);
                  }
                  if (byte_5 != null)
                  {
                        data.Write2((byte)byte_5.Length);
                        data.method_10(byte_5, 0, byte_5.Length);
                  }
                  if (base.Client != null)
                  {
                        base.Client.method_5(data, 0xa1c, base.UserSessionID, 0);
                  }
                  this.vmethod_2(data, 0xa1c, base.UserSessionID, 0);
            }

            public void CAC_LOAI_THAO_MOC(byte[] byte_5, int int_128)
            {
                  TBL_XWWL_NPC tbl_xwwl_npc;
                  byte[] dst = new byte[4];
                  Buffer.BlockCopy(byte_5, 15, dst, 0, 4);
                  int key = BitConverter.ToInt32(dst, 0);
                  if (MapClass.GetnpcTemplate(base.CharacterCoords_Map).TryGetValue(key, out tbl_xwwl_npc))
                  {
                        tbl_xwwl_npc.NPC_TU_VONG = true;
                        tbl_xwwl_npc.method_22();
                  }
            }

            public void CancelGuildWarRequest(byte[] byte_5, int int_128)
            {
                  BANG_CHIEN_STRING bang_chien_string;
                  char[] separator = new char[] { ';' };
                  string[] strArray = World.Cancel_help_combat_several_gold_bullions.Split(separator);
                  int key = BitConverter.ToInt32(byte_5, 11);
                  if (World.dictionary_25.TryGetValue(key, out bang_chien_string))
                  {
                        bang_chien_string.dictionary_0.Clear();
                        World.dictionary_25.Remove(key);
                        this.KIEM_TRA_BACH_BAO_CAC_NGUYEN_BAO_SO_LUONG();
                        base.KIEM_SOAT_CASH_SO_LIEU(int.Parse(strArray[0]), 1);
                        base.Player_Money += int.Parse(strArray[1]);
                        RxjhClass.DELETE_BANG_CHIEN_DAT_CUOC_DATA(base.Userid, base.UserName, key, 0);
                        base.UPDATE_RXPIONT();
                        base.UpdateMoneyAndWeight();
                        Form1.WriteLine(0x58, string.Concat(new object[] { "Cancel gang war success Application gangID:", key, " Gang name:", base.GuildName, " Main fact:", base.UserName }));
                        this.YEU_CAU_HUY_BO_BANG_CHIEN_NHAC_NHO(1);
                  }
                  else
                  {
                        this.YEU_CAU_HUY_BO_BANG_CHIEN_NHAC_NHO(0);
                  }
            }

            public void CAP_NHAT_KY_NANG_MOI_LAM_DONG_BANG(int int_128)
            {
                  try
                  {
                        TBL_XWWL_KONGFU tbl_xwwl_kongfu;
                        if (World.TBL_KONGFU.TryGetValue(int_128, out tbl_xwwl_kongfu))
                        {
                              if (tbl_xwwl_kongfu.FLD_VO_CONG_LOAI_HINH < 3)
                              {
                                    using (PacketData data = new PacketData())
                                    {
                                          data.Write4(1);
                                          data.Write2(1);
                                          data.method_8((long)int_128);
                                          data.method_8(0L);
                                          data.method_8(0L);
                                          data.method_8(0L);
                                          data.method_8((long)tbl_xwwl_kongfu.FLD_TIME);
                                          data.method_8(0L);
                                          if (base.Client != null)
                                          {
                                                base.Client.method_5(data, 0x1202, base.UserSessionID, 0);
                                          }
                                          return;
                                    }
                              }
                              if (tbl_xwwl_kongfu.FLD_VO_CONG_LOAI_HINH == 3)
                              {
                                    using (PacketData data2 = new PacketData())
                                    {
                                          data2.Write4(1);
                                          data2.Write2(1);
                                          data2.method_8((long)int_128);
                                          data2.method_8(0L);
                                          data2.method_8(0L);
                                          data2.method_8(0L);
                                          data2.method_8((long)tbl_xwwl_kongfu.FLD_TIME);
                                          data2.method_8(0L);
                                          if (base.Client != null)
                                          {
                                                base.Client.method_5(data2, 0x1202, base.UserSessionID, 0);
                                          }
                                    }
                              }
                        }
                  }
                  catch (Exception exception)
                  {
                        Form1.WriteLine(1, string.Concat(new object[] { "更新技能冷却出错", base.UserSessionID, "|", this.ToString(), " ", exception.Message }));
                  }
            }

            public void CAP_NHAT_KY_NANG_MOI_LAM_DONG_BANG_SO_LIEU()
            {
                  try
                  {
                        int num = 0;
                        for (int i = 0; i < 3; i++)
                        {
                              for (int j = 0; j < 0x26; j++)
                              {
                                    if (base.class79_0[i, j] != null)
                                    {
                                          num++;
                                    }
                              }
                        }
                        if (num != 0)
                        {
                              using (PacketData data = new PacketData())
                              {
                                    data.Write4(1);
                                    data.Write2(num);
                                    for (int k = 0; k < 3; k++)
                                    {
                                          for (int m = 0; m < 0x26; m++)
                                          {
                                                if (base.class79_0[k, m] != null)
                                                {
                                                      data.method_8((long)base.class79_0[k, m].FLD_PID);
                                                      data.method_8(0L);
                                                      data.method_8(0L);
                                                      data.method_8(0L);
                                                      data.method_8((long)base.class79_0[k, m].FLD_TIME);
                                                      data.method_8(0L);
                                                }
                                          }
                                    }
                                    if (base.Client != null)
                                    {
                                          base.Client.method_5(data, 0x1202, base.UserSessionID, 0);
                                    }
                              }
                        }
                  }
                  catch (Exception exception)
                  {
                        Form1.WriteLine(1, string.Concat(new object[] { "更新技能冷却出错", base.UserSessionID, "|", this.ToString(), " ", exception.Message }));
                  }
            }

            public void CAP_NHAT_KY_NANG_MOI_THANG_THIEN_LAM_DONG_BANG()
            {
                  try
                  {
                        int num = 0;
                        for (int i = 0; i < 0x15; i++)
                        {
                              if (base.class79_0[3, i] != null)
                              {
                                    num++;
                              }
                        }
                        if (num != 0)
                        {
                              using (PacketData data = new PacketData())
                              {
                                    data.Write4(1);
                                    data.Write2(num);
                                    for (int j = 0; j < 0x15; j++)
                                    {
                                          if (base.class79_0[3, j] != null)
                                          {
                                                data.method_8((long)base.class79_0[3, j].FLD_PID);
                                                data.method_8(0L);
                                                data.method_8(0L);
                                                data.method_8(0L);
                                                data.method_8((long)base.class79_0[3, j].FLD_TIME);
                                                data.method_8(0L);
                                          }
                                    }
                                    if (base.Client != null)
                                    {
                                          base.Client.method_5(data, 0x1202, base.UserSessionID, 0);
                                    }
                              }
                        }
                  }
                  catch (Exception exception)
                  {
                        Form1.WriteLine(1, string.Concat(new object[] { "更新升天技能冷却出错", base.UserSessionID, "|", this.ToString(), " ", exception.Message }));
                  }
            }

            //퀘스트 내용 전송
            public void SendQuestList()
            {
                  //AA 55 2A 00 00 01 00 C0 00 1B 00 17 00 16 00 10 2C 01 85 00 10 00 02 00 00 00 C6 00 01 00 F5 01 01 20 09 01 00 00 00 00 00 00 00 00 00 00 55 AA
                  //DBA.smethod_7(string.Format("UPDATE TBL_XWWL_CHAR SET FLD_GETWX = 0 WHERE FLD_GETWX >= 0", players2.Player_MaxWx), "rxjhgame");
                  byte[] dst = Converter.hexStringToByte("AA552B00000100C0001C0018001A00122C018500140003000000C6000100F50102011220074000000000000000000055AA");  
                  //Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, dst, 16, 2);
                  //Buffer.BlockCopy(BitConverter.GetBytes(0x8500), 0, dst, 18, 2);
                  //Buffer.BlockCopy(BitConverter.GetBytes(base.dictionary_2.Count), 0, dst, 22, 2);
                  //Form1.WriteLine(1, "Create Send Quest Data2: (" + BitConverter.ToString(dst).Replace("-", "") + ")");
                  //base.Client.Send(dst, dst.Length);
                  
                              
                  using (PacketData data = new PacketData())
                  {
                        data.Write4(base.dictionary_2.Count);
                        
                        foreach (NHIEM_VU_CLASS nhiem_vu_class in base.dictionary_2.Values)
                        {
                              data.Write2(nhiem_vu_class.NHIEM_VU_ID);
                              data.Write2(nhiem_vu_class.NHIEM_VU_GIAI_DOAN_ID);
                              Form1.WriteLine(1, string.Concat(new object[] { "Send Quest Data: ", nhiem_vu_class.NHIEM_VU_ID.ToString(), "|", nhiem_vu_class.NHIEM_VU_GIAI_DOAN_ID.ToString()}));
                        }
                        data.Write4(0x00);
                        if (base.Client != null)
                        {
                              base.Client.method_4(data, 0x8500, base.UserSessionID);                              
                        }
                  }
                  
                  
                  
                  
                  
                  

            }

            public void CAP_NHAT_NPC_SO_LIEU_CC(int int_128, int int_129, Players class15_0)
            {
                  byte[] dst = Converter.hexStringToByte("AA554D0000000067003E00010000007D297D2911270100000032000000320000000080A24300007041004088440000804000000000000000000080A243000070410040884400000000000000000000000055AA");
                  Buffer.BlockCopy(BitConverter.GetBytes(class15_0.UserSessionID), 0, dst, 5, 2);
                  Buffer.BlockCopy(BitConverter.GetBytes(int_128), 0, dst, 15, 2);
                  Buffer.BlockCopy(BitConverter.GetBytes(int_128), 0, dst, 0x11, 2);
                  Buffer.BlockCopy(BitConverter.GetBytes(int_129), 0, dst, 0x13, 2);
                  Buffer.BlockCopy(BitConverter.GetBytes(200), 0, dst, 0x19, 4);
                  Buffer.BlockCopy(BitConverter.GetBytes(200), 0, dst, 0x1d, 4);
                  Buffer.BlockCopy(BitConverter.GetBytes(class15_0.CharacterCoords_X), 0, dst, 0x21, 4);
                  Buffer.BlockCopy(BitConverter.GetBytes(class15_0.CharacterCoords_Y), 0, dst, 0x29, 4);
                  Buffer.BlockCopy(BitConverter.GetBytes(class15_0.CharacterCoords_Z), 0, dst, 0x25, 4);
                  Buffer.BlockCopy(BitConverter.GetBytes(0), 0, dst, 0x31, 4);
                  Buffer.BlockCopy(BitConverter.GetBytes(0), 0, dst, 0x35, 4);
                  Buffer.BlockCopy(BitConverter.GetBytes(class15_0.CharacterCoords_X), 0, dst, 0x39, 4);
                  Buffer.BlockCopy(BitConverter.GetBytes(class15_0.CharacterCoords_Y), 0, dst, 0x41, 4);
                  Buffer.BlockCopy(BitConverter.GetBytes(class15_0.CharacterCoords_Z), 0, dst, 0x3d, 4);
                  if (class15_0.Client != null)
                  {
                        class15_0.Client.Send(dst, dst.Length);
                  }
                  this.vmethod_0(dst, dst.Length);
            }

            public void CAP_NHAT_TRANG_BI_HIEU_QUA_DEN(Players class15_0, Players class15_1)
            {
                  PacketData data = new PacketData();
                  for (int i = 0; i < 30; i++)
                  {
                        if (i >= 15)
                        {
                              data.method_10(new byte[0x48], 0, 0x48);
                        }
                        else
                        {
                              data.method_10(base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[i].method_0(), 0, World.int_5);
                        }
                  }
                  if (base.Client != null)
                  {
                        base.Client.method_5(data, 0x7600, class15_1.UserSessionID, 0);
                  }
            }

            public void CAP_NHAT_TRANG_BI_HIEU_QUA_NEW()
            {
                  PacketData data = new PacketData();
                  for (int i = 0; i < 6; i++)
                  {
                        if (i >= 5)
                        {
                              data.method_10(new byte[4], 0, 4);
                        }
                        else
                        {
                              data.method_10(base.NHAN_VAT_LINH_THU.class23_1[i].VAT_PHAM_ID, 0, 4);
                        }
                  }
                  if (base.Client != null)
                  {
                        base.Client.method_5(data, 0x7600, base.NHAN_VAT_LINH_THU_TOAN_BO_TRANG_PHUC_ID, 0);
                  }
                  this.vmethod_2(data, 0x7600, base.NHAN_VAT_LINH_THU_TOAN_BO_TRANG_PHUC_ID, 0);
            }

            public void cdtimeskill()
            {
                  List<TBL_XWWL_KONGFU> list = new List<TBL_XWWL_KONGFU>();
                  foreach (TBL_XWWL_KONGFU tbl_xwwl_kongfu in World.TBL_KONGFU.Values)
                  {
                        if ((tbl_xwwl_kongfu.FLD_JOB == 0) || (tbl_xwwl_kongfu.FLD_JOB == base.Player_Job))
                        {
                              list.Add(tbl_xwwl_kongfu);
                        }
                  }
                  StringBuilder builder1 = new StringBuilder();
                  builder1.Append("AA5595250138051202862501000100C8000587010000000000000000000000000000000000000000000000000000000000E80300000000000000000000000000000687010000000000000000000000000000000000000000000000000000000000E80300000000000000000000000000000787010000000000000000000000000000000000000000000000000000000000E8030000000000000000000000000000CD87010000000000000000000000000000000000000000000000000000000000E80300000000000000000000000000002DAA010000000000000000000000000000000000000000000000000000000000102700000000000000000000000000002EAA010000000000000000000000000000000000000000000000000000000000102700000000000000000000000000002FAA0100000000000000000000000000000000000000000000000000000000001027000000000000000000000000000030AA0100000000000000000000000000000000000000000000000000000000001027000000000000000000000000000079AE010000000000000000000000000000000000000000000000000000000000E80300000000000000000000000000007AAE010000000000000000000000000000000000000000000000000000000000E80300000000000000000000000000007BAE010000000000000000000000000000000000000000000000000000000000E8030000000000000000000000000000DDAE010000000000000000000000000000000000000000000000000000000000E8030000000000000000000000000000DEAE010000000000000000000000000000000000000000000000000000000000E8030000000000000000000000000000DFAE010000000000000000000000000000000000000000000000000000000000E803000000000000000000000000000041AF010000000000000000000000000000000000000000000000000000000000E803000000000000000000000000000042AF010000000000000000000000000000000000000000000000000000000000E803000000000000000000000000000043AF010000000000000000000000000000000000000000000000000000000000E8030000000000000000000000000000A5AF010000000000000000000000000000000000000000000000000000000000E8030000000000000000000000000000A6AF010000000000000000000000000000000000000000000000000000000000E8030000000000000000000000000000A7AF010000000000000000000000000000000000000000000000000000000000E803000000000000000000000000000009B0010000000000000000000000000000000000000000000000000000000000E80300000000000000000000000000000AB0010000000000000000000000000000000000000000000000000000000000E80300000000000000000000000000000BB0010000000000000000000000000000000000000000000000000000000000E80300000000000000000000000000006DB0010000000000000000000000000000000000000000000000000000000000E80300000000000000000000000000006EB0010000000000000000000000000000000000000000000000000000000000E80300000000000000000000000000006FB0010000000000000000000000000000000000000000000000000000000000E8030000000000000000000000000000E5B501000000000000000000000000000000000000000000000000000000000010270000000000000000000000000000E6B501000000000000000000000000000000000000000000000000000000000010270000000000000000000000000000E7B501000000000000000000000000000000000000000000000000000000000010270000000000000000000000000000E8B50100000000000000000000000000000000000000000000000000000000001027000000000000000000000000000089D5010000000000000000000000000000000000000000000000000000000000E80300000000000000000000000000008AD5010000000000000000000000000000000000000000000000000000000000E80300000000000000000000000000008BD5010000000000000000000000000000000000000000000000000000000000E8030000000000000000000000000000EDD5010000000000000000000000000000000000000000000000000000000000E8030000000000000000000000000000EED5010000000000000000000000000000000000000000000000000000000000E8030000000000000000000000000000EFD5010000000000000000000000000000000000000000000000000000000000E803000000000000000000000000000051D6010000000000000000000000000000000000000000000000000000000000E803000000000000000000000000000052D6010000000000000000000000000000000000000000000000000000000000E803000000000000000000000000000053D6010000000000000000000000000000000000000000000000000000000000E8030000000000000000000000000000B5D6010000000000000000000000000000000000000000000000000000000000E8030000000000000000000000000000B6D6010000000000000000000000000000000000000000000000000000000000E8030000000000000000000000000000B7D6010000000000000000000000000000000000000000000000000000000000E803000000000000000000000000000019D7010000000000000000000000000000000000000000000000000000000000E80300000000000000000000000000001AD7010000000000000000000000000000000000000000000000000000000000E80300000000000000000000000000001BD7010000000000000000000000000000000000000000000000000000000000E80300000000000000000000000000007DD7010000000000000000000000000000000000000000000000000000000000E80300000000000000000000000000007ED7010000000000000000000000000000000000000000000000000000000000E80300000000000000000000000000007FD7010000000000000000000000000000000000000000000000000000000000E8030000000000000000000000000000F5DC01000000000000000000000000000000000000000000000000000000000010270000000000000000000000000000F6DC01000000000000000000000000000000000000000000000000000000000010270000000000000000000000000000F7DC01000000000000000000000000000000000000000000000000000000000010270000000000000000000000000000F8DC0100000000000000000000000000000000000000000000000000000000001027000000000000000000000000000035FC010000000000000000000000000000000000000000000000000000000000E803000000000000000000000000000036FC010000000000000000000000000000000000000000000000000000000000E803000000000000000000000000000099FC010000000000000000000000000000000000000000000000000000000000E80300000000000000000000000000009AFC010000000000000000000000000000000000000000000000000000000000E8030000000000000000000000000000FDFC010000000000000000000000000000000000000000000000000000000000E8030000000000000000000000000000FEFC010000000000000000000000000000000000000000000000000000000000E80300000000000000000000000000004523020000000000000000000000000000000000000000000000000000000000E80300000000000000000000000000004623020000000000000000000000000000000000000000000000000000000000E8030000000000000000000000000000A923020000000000000000000000000000000000000000000000000000000000E8030000000000000000000000000000AA23020000000000000000000000000000000000000000000000000000000000E80300000000000000000000000000000D24020000000000000000000000000000000000000000000000000000000000E80300000000000000000000000000000E24020000000000000000000000000000000000000000000000000000000000E8030000000000000000000000000000A50D030000000000000000000000000000000000000000000000000000000000E8030000000000000000000000000000A60D030000000000000000000000000000000000000000000000000000000000E8030000000000000000000000000000A70D030000000000000000000000000000000000000000000000000000000000E80300000000000000000000000000006D0E030000000000000000000000000000000000000000000000000000000000E8030000000000000000000000000000F111030000000000000000000000000000000000000000000000000000000000E8030000000000000000000000000000CD3003000000000000000000000000000000000000000000000000000000000010270000000000000000000000000000CE3003000000000000000000000000000000000000000000000000000000000010270000000000000000000000000000CF3003000000000000000000000000000000000000000000000000000000000010270000000000000000000000000000D030030000000000000000000000000000000000000000000000000000000000102700000000000000000000000000001935030000000000000000000000000000000000000000000000000000000000E80300000000000000000000000000001A35030000000000000000000000000000000000000000000000000000000000E80300000000000000000000000000001B35030000000000000000000000000000000000000000000000000000000000E80300000000000000000000000000007D35030000000000000000000000000000000000000000000000000000000000E80300000000000000000000000000007E35030000000000000000000000000000000000000000000000000000000000E80300000000000000000000000000007F35030000000000000000000000000000000000000000000000000000000000E8030000000000000000000000000000E135030000000000000000000000000000000000000000000000000000000000E8030000000000000000000000000000E235030000000000000000000000000000000000000000000000000000000000E8030000000000000000000000000000E335030000000000000000000000000000000000000000000000000000000000E80300000000000000000000000000004536030000000000000000000000000000000000000000000000000000000000E80300000000000000000000000000004636030000000000000000000000000000000000000000000000000000000000E80300000000000000000000000000004736030000000000000000000000000000000000000000000000000000000000E8030000000000000000000000000000A936030000000000000000000000000000000000000000000000000000000000E8030000000000000000000000000000AA36030000000000000000000000000000000000000000000000000000000000E8030000000000000000000000000000AB36030000000000000000000000000000000000000000000000000000000000E80300000000000000000000000000000D37030000000000000000000000000000000000000000000000000000000000E80300000000000000000000000000000E37030000000000000000000000000000000000000000000000000000000000E80300000000000000000000000000000F37030000000000000000000000000000000000000000000000000000000000E8030000000000000000000000000000853C03000000000000000000000000000000000000000000000000000000000010270000000000000000000000000000863C03000000000000000000000000000000000000000000000000000000000010270000000000000000000000000000873C03000000000000000000000000000000000000000000000000000000000010270000000000000000000000000000883C03000000000000000000000000000000000000000000000000000000000010270000000000000000000000000000295C030000000000000000000000000000000000000000000000000000000000E80300000000000000000000000000002A5C030000000000000000000000000000000000000000000000000000000000E80300000000000000000000000000002B5C030000000000000000000000000000000000000000000000000000000000E80300000000000000000000000000008D5C030000000000000000000000000000000000000000000000000000000000E80300000000000000000000000000008E5C030000000000000000000000000000000000000000000000000000000000E80300000000000000000000000000008F5C030000000000000000000000000000000000000000000000000000000000E8030000000000000000000000000000F15C030000000000000000000000000000000000000000000000000000000000E8030000000000000000000000000000F25C030000000000000000000000000000000000000000000000000000000000E8030000000000000000000000000000F35C030000000000000000000000000000000000000000000000000000000000E8030000000000000000000000000000555D030000000000000000000000000000000000000000000000000000000000E8030000000000000000000000000000565D030000000000000000000000000000000000000000000000000000000000E8030000000000000000000000000000575D030000000000000000000000000000000000000000000000000000000000E8030000000000000000000000000000B95D030000000000000000000000000000000000000000000000000000000000E8030000000000000000000000000000BA5D030000000000000000000000000000000000000000000000000000000000E8030000000000000000000000000000BB5D030000000000000000000000000000000000000000000000000000000000E80300000000000000000000000000001D5E030000000000000000000000000000000000000000000000000000000000E80300000000000000000000000000001E5E030000000000000000000000000000000000000000000000000000000000E80300000000000000000000000000001F5E030000000000000000000000000000000000000000000000000000000000E8030000000000000000000000000000956303000000000000000000000000000000000000000000000000000000000010270000000000000000000000000000966303000000000000000000000000000000000000000000000000000000000010270000000000000000000000000000976303000000000000000000000000000000000000000000000000000000000010270000000000000000000000000000986303000000000000000000000000000000000000000000000000000000000010270000000000000000000000000000D582030000000000000000000000000000000000000000000000000000000000E8030000000000000000000000000000D682030000000000000000000000000000000000000000000000000000000000E80300000000000000000000000000003983030000000000000000000000000000000000000000000000000000000000E80300000000000000000000000000003A83030000000000000000000000000000000000000000000000000000000000E80300000000000000000000000000009D83030000000000000000000000000000000000000000000000000000000000E80300000000000000000000000000009E83030000000000000000000000000000000000000000000000000000000000E8030000000000000000000000000000E5A9030000000000000000000000000000000000000000000000000000000000E8030000000000000000000000000000E6A9030000000000000000000000000000000000000000000000000000000000E803000000000000000000000000000049AA030000000000000000000000000000000000000000000000000000000000E80300000000000000000000000000004AAA030000000000000000000000000000000000000000000000000000000000E8030000000000000000000000000000ADAA030000000000000000000000000000000000000000000000000000000000E8030000000000000000000000000000AEAA030000000000000000000000000000000000000000000000000000000000E80300000000000000000000000000004594040000000000000000000000000000000000000000000000000000000000E80300000000000000000000000000004694040000000000000000000000000000000000000000000000000000000000E80300000000000000000000000000004794040000000000000000000000000000000000000000000000000000000000E80300000000000000000000000000000D95040000000000000000000000000000000000000000000000000000000000E80300000000000000000000000000009198040000000000000000000000000000000000000000000000000000000000E80300000000000000000000000000006DB7040000000000000000000000000000000000000000000000000000000000102700000000000000000000000000006EB7040000000000000000000000000000000000000000000000000000000000102700000000000000000000000000006FB70400000000000000000000000000000000000000000000000000000000001027000000000000000000000000000070B704000000000000000000000000000000000000000000000000000000000010270000000000000000000000000000B9BB040000000000000000000000000000000000000000000000000000000000E8030000000000000000000000000000BABB040000000000000000000000000000000000000000000000000000000000E8030000000000000000000000000000BBBB040000000000000000000000000000000000000000000000000000000000E80300000000000000000000000000001DBC040000000000000000000000000000000000000000000000000000000000E80300000000000000000000000000001EBC040000000000000000000000000000000000000000000000000000000000E80300000000000000000000000000001FBC040000000000000000000000000000000000000000000000000000000000E803000000000000000000000000000081BC040000000000000000000000000000000000000000000000000000000000E803000000000000000000000000000082BC040000000000000000000000000000000000000000000000000000000000E803000000000000000000000000000083BC040000000000000000000000000000000000000000000000000000000000E8030000000000000000000000000000E5BC040000000000000000000000000000000000000000000000000000000000E8030000000000000000000000000000E6BC040000000000000000000000000000000000000000000000000000000000E8030000000000000000000000000000E7BC040000000000000000000000000000000000000000000000000000000000E803000000000000000000000000000049BD040000000000000000000000000000000000000000000000000000000000E80300000000000000000000000000004ABD040000000000000000000000000000000000000000000000000000000000E80300000000000000000000000000004BBD040000000000000000000000000000000000000000000000000000000000E8030000000000000000000000000000ADBD040000000000000000000000000000000000000000000000000000000000E8030000000000000000000000000000AEBD040000000000000000000000000000000000000000000000000000000000E8030000000000000000000000000000AFBD040000000000000000000000000000000000000000000000000000000000E803000000000000000000000000000025C30400000000000000000000000000000000000000000000000000000000001027000000000000000000000000000026C30400000000000000000000000000000000000000000000000000000000001027000000000000000000000000000027C30400000000000000000000000000000000000000000000000000000000001027000000000000000000000000000028C304000000000000000000000000000000000000000000000000000000000010270000000000000000000000000000C9E2040000000000000000000000000000000000000000000000000000000000E8030000000000000000000000000000CAE2040000000000000000000000000000000000000000000000000000000000E8030000000000000000000000000000CBE2040000000000000000000000000000000000000000000000000000000000E80300000000000000000000000000002DE3040000000000000000000000000000000000000000000000000000000000E80300000000000000000000000000002EE3040000000000000000000000000000000000000000000000000000000000E80300000000000000000000000000002FE3040000000000000000000000000000000000000000000000000000000000E803000000000000000000000000000091E3040000000000000000000000000000000000000000000000000000000000E803000000000000000000000000000092E3040000000000000000000000000000000000000000000000000000000000E803000000000000000000000000000093E3040000000000000000000000000000000000000000000000000000000000E8030000000000000000000000000000F5E3040000000000000000000000000000000000000000000000000000000000E8030000000000000000000000000000F6E3040000000000000000000000000000000000000000000000000000000000E8030000000000000000000000000000F7E3040000000000000000000000000000000000000000000000000000000000E803000000000000000000000000000059E4040000000000000000000000000000000000000000000000000000000000E80300000000000000000000000000005AE4040000000000000000000000000000000000000000000000000000000000E80300000000000000000000000000005BE4040000000000000000000000000000000000000000000000000000000000E8030000000000000000000000000000BDE4040000000000000000000000000000000000000000000000000000000000E8030000000000000000000000000000BEE4040000000000000000000000000000000000000000000000000000000000E8030000000000000000000000000000BFE4040000000000000000000000000000000000000000000000000000000000E803000000000000000000000000000035EA0400000000000000000000000000000000000000000000000000000000001027000000000000000000000000000036EA0400000000000000000000000000000000000000000000000000000000001027000000000000000000000000000037EA0400000000000000000000000000000000000000000000000000000000001027000000000000000000000000000038EA040000000000000000000000000000000000000000000000000000000000102700000000000000000000000000007509050000000000000000000000000000000000000000000000000000000000E80300000000000000000000000000007609050000000000000000000000000000000000000000000000000000000000E8030000000000000000000000000000D909050000000000000000000000000000000000000000000000000000000000E8030000000000000000000000000000DA09050000000000000000000000000000000000000000000000000000000000E80300000000000000000000000000003D0A050000000000000000000000000000000000000000000000000000000000E80300000000000000000000000000003E0A050000000000000000000000000000000000000000000000000000000000E80300000000000000000000000000008530050000000000000000000000000000000000000000000000000000000000E80300000000000000000000000000008630050000000000000000000000000000000000000000000000000000000000E8030000000000000000000000000000E930050000000000000000000000000000000000000000000000000000000000E8030000000000000000000000000000EA30050000000000000000000000000000000000000000000000000000000000E80300000000000000000000000000004D31050000000000000000000000000000000000000000000000000000000000E80300000000000000000000000000004E31050000000000000000000000000000000000000000000000000000000000E8030000000000000000000000000000811A06000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000E51A060000000000000000000000000000000000000000000000000000000000E8030000000000000000000000000000E61A060000000000000000000000000000000000000000000000000000000000E8030000000000000000000000000000E71A060000000000000000000000000000000000000000000000000000000000E8030000000000000000000000000000AD1B060000000000000000000000000000000000000000000000000000000000E8030000000000000000000000000000311F060000000000000000000000000000000000000000000000000000000000204E0000000000000000000000000000000000000000595355AA");
                  byte[] dst = Converter.hexStringToByte(builder1.ToString());
                  Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, dst, 5, 2);
                  for (int i = 0; i < list.Count; i++)
                  {
                        int num2 = i % 200;
                        Buffer.BlockCopy(BitConverter.GetBytes(list[i].FLD_PID), 0, dst, 0x11 + (num2 * 0x30), 4);
                        Buffer.BlockCopy(BitConverter.GetBytes(list[i].FLD_CDTIME), 0, dst, (0x11 + (num2 * 0x30)) + 0x20, 4);
                        if (((num2 == 0xc7) || (i == (list.Count - 1))) && (base.Client != null))
                        {
                              base.Client.Send(dst, dst.Length);
                        }
                  }
                  byte[] buffer2 = Converter.hexStringToByte("AA55ED000170041202DE0002000100120001000000B80B00000000000002000000D0070000000000000300000020BF02000000000004000000E80300000100000005000000E80300000100000006000000E80300000100000007000000E80300000100000008000000E80300000100000009000000E8030000010000000A000000E8030000010000000B000000E8030000010000000C000000E8030000010000000D000000E8030000010000000E000000E8030000010000000F000000E80300000100000010000000E80300000100000011000000E80300000100000012000000E803000001000000000000000000708555AA");
                  Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, buffer2, 5, 2);
                  if (base.Client != null)
                  {
                        base.Client.Send(buffer2, buffer2.Length);
                  }
            }

            public void ChangeGuildUniform(byte[] byte_5, int int_128)
            {
                  PacketReader reader = new PacketReader(byte_5, int_128, false);
                  reader.method_1(11, SeekOrigin.Begin);
                  reader.method_3();
                  base.BANG_PHAI_TRANG_PHUC_KI_TU = reader.method_3();
                  base.BANG_PHAI_MON_PHUC_MAU_SAC = reader.method_3();
                  byte[] dst = Converter.hexStringToByte("AA551F000145049100100002000000020000003D000000000000000000000000003C9455AA");
                  Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, dst, 5, 2);
                  byte[] buffer2 = Converter.hexStringToByte("AA551F0000450442151000B8530000010001001C800000002D3101000000000000000055AA");
                  Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, buffer2, 5, 2);
                  Buffer.BlockCopy(BitConverter.GetBytes(base.Bang_phai_Id), 0, buffer2, 11, 2);
                  Buffer.BlockCopy(BitConverter.GetBytes(base.BANG_PHAI_TRANG_PHUC_KI_TU), 0, buffer2, 0x11, 2);
                  Buffer.BlockCopy(BitConverter.GetBytes(base.BANG_PHAI_MON_PHUC_MAU_SAC), 0, buffer2, 0x13, 2);
                  if (base.Client != null)
                  {
                        base.Client.Send(dst, dst.Length);
                  }
                  if (base.Client != null)
                  {
                        base.Client.Send(buffer2, buffer2.Length);
                  }
                  this.vmethod_0(buffer2, buffer2.Length);
                  base.OpenWarehouse = false;
                  RxjhClass.UPDATE_GUILD_TRANG_PHUC(reader.method_2(), base.BANG_PHAI_TRANG_PHUC_KI_TU, base.BANG_PHAI_MON_PHUC_MAU_SAC);
            }

            public void CHAP_NHAN_MON_HUY(byte[] byte_5, int int_128)
            {
                  byte[] dst = new byte[770];
                  Buffer.BlockCopy(byte_5, 0x13, dst, 0, 770);
                  RxjhClass.Update_Mon_Huy(base.Bang_phai_Id, dst);
                  base.GUI_DI_MON_HUY_2(dst, base.Bang_phai_Id);
            }

            public void CHAR_SENT_DATA_ATTACK(Players class15_0, int int_128, int int_129, int int_130, int int_131, int int_132, int int_133)
            {
                  try
                  {
                        TBL_XWWL_KONGFU tbl_xwwl_kongfu;
                        Random random = new Random(World.smethod_15());
                        if (World.TBL_KONGFU.TryGetValue(int_129, out tbl_xwwl_kongfu))
                        {
                              if ((class15_0.Player_Job == 4) && (BitConverter.ToInt32(class15_0.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[12].VAT_PHAM_ID, 0) != 0))
                              {
                                    int num7 = BitConverter.ToInt32(class15_0.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[12].VAT_PHAM_SO_LUONG, 0);
                                    class15_0.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[12].VAT_PHAM_SO_LUONG = BitConverter.GetBytes(num7);
                              }
                              if (int_130 < 0)
                              {
                                    int_130 = 0;
                              }
                              using (PacketData data = new PacketData())
                              {
                                    data.Write2(int_128);
                                    data.Write2(1);
                                    if (class15_0.Player_Job == 4)
                                    {
                                          data.Write2(100);
                                          data.Write2(0);
                                    }
                                    else
                                    {
                                          data.Write2(int_129);
                                          data.Write2(1);
                                    }
                                    data.Write4(int_130);
                                    data.Write4(0);
                                    data.Write4(0);
                                    data.Write4(0);
                                    data.Write4(0);
                                    data.Write4(int_129);
                                    data.Write4(tbl_xwwl_kongfu.FLD_EFFERT);
                                    data.method_1(class15_0.CharacterCoords_X);
                                    data.method_1(15f);
                                    data.method_1(class15_0.CharacterCoords_Y);
                                    data.method_3(0);
                                    data.method_3(1);
                                    if (base.Player_Job == 4)
                                    {
                                          if (base.bool_8)
                                          {
                                                data.Write2(100);
                                                base.bool_8 = false;
                                          }
                                          else
                                          {
                                                data.Write2(0);
                                          }
                                    }
                                    else
                                    {
                                          data.Write2(0);
                                    }
                                    data.Write4(int_132);
                                    data.Write4(0);
                                    data.Write4(0);
                                    data.Write4(0);
                                    data.Write4(0);
                                    data.Write4(0);
                                    if (int_133 != -1)
                                    {
                                          if (random.Next(0, 100) < 80)
                                          {
                                                data.Write4(int_133);
                                          }
                                          else
                                          {
                                                data.Write4(0);
                                          }
                                    }
                                    else
                                    {
                                          data.Write4(int_133);
                                    }
                                    data.Write4(0);
                                    data.Write4(0);
                                    data.Write4(0);
                                    data.Write4(0);
                                    data.Write4(0);
                                    data.Write4(0);
                                    data.Write4(0);
                                    data.Write4(0);
                                    data.Write4(0);
                                    if (class15_0.Client != null)
                                    {
                                          class15_0.Client.method_5(data, 0xa00, class15_0.UserSessionID, 0);
                                    }
                                    this.vmethod_2(data, 0xa00, class15_0.UserSessionID, 0);
                                    return;
                              }
                        }
                        int num = 1;
                        int num2 = int_130;
                        int num3 = 0;
                        int num4 = 0;
                        int num5 = 0;
                        int num6 = 0;
                        if ((int_131 != 0x81) && (int_131 != 0x80))
                        {
                              if (((int_131 != 130) && (int_131 != 0x83)) && ((int_131 != 0x84) && (int_131 != 0x85)))
                              {
                                    if (class15_0.Player_Job == 6)
                                    {
                                          num2 = 0;
                                          num3 = 0;
                                          if (int_130 != 0)
                                          {
                                                num2 = new Random().Next((int_130 / 2) - 10, (int_130 / 2) + 10);
                                                num3 = int_130 - num2;
                                          }
                                          num = 2;
                                    }
                              }
                              else if (int_130 != 0)
                              {
                                    Random random1 = new Random();
                                    num2 = random1.Next((int_130 / 5) - 10, (int_130 / 5) + 10);
                                    num3 = random1.Next(((int_130 - num2) / 4) - 10, ((int_130 - num2) / 4) + 10);
                                    num4 = random1.Next((((int_130 - num2) - num3) / 3) - 10, (((int_130 - num2) - num3) / 3) + 10);
                                    num5 = random1.Next(((((int_130 - num2) - num3) - num4) / 2) - 10, ((((int_130 - num2) - num3) - num4) / 2) + 10);
                                    num6 = (((int_130 - num2) - num3) - num4) - num5;
                                    num = 5;
                              }
                        }
                        else if (class15_0.Player_Job == 6)
                        {
                              if (int_130 != 0)
                              {
                                    Random random2 = new Random();
                                    num2 = random2.Next((int_130 / 5) - 10, (int_130 / 5) + 10);
                                    num3 = random2.Next(((int_130 - num2) / 4) - 10, ((int_130 - num2) / 4) + 10);
                                    num4 = random2.Next((((int_130 - num2) - num3) / 3) - 10, (((int_130 - num2) - num3) / 3) + 10);
                                    num5 = random2.Next(((((int_130 - num2) - num3) - num4) / 2) - 10, ((((int_130 - num2) - num3) - num4) / 2) + 10);
                                    num6 = (((int_130 - num2) - num3) - num4) - num5;
                                    num = 5;
                              }
                        }
                        else
                        {
                              Random random3 = new Random();
                              num2 = random3.Next((int_130 / 3) - 10, (int_130 / 3) + 10);
                              num3 = random3.Next(((int_130 - num2) / 2) - 10, ((int_130 - num2) / 2) + 10);
                              num4 = (int_130 - num2) - num3;
                              num = 3;
                        }
                        if ((class15_0.Player_Job == 4) && (BitConverter.ToInt32(class15_0.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[12].VAT_PHAM_ID, 0) != 0))
                        {
                              int num8 = BitConverter.ToInt32(class15_0.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[12].VAT_PHAM_SO_LUONG, 0);
                              class15_0.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[12].VAT_PHAM_SO_LUONG = BitConverter.GetBytes(num8);
                        }
                        using (PacketData data2 = new PacketData())
                        {
                              data2.Write2(int_128);
                              data2.Write2(1);
                              if (class15_0.Player_Job == 4)
                              {
                                    data2.Write2(100);
                              }
                              else
                              {
                                    data2.Write2(int_129);
                              }
                              data2.Write2(0);
                              data2.Write4(num2);
                              data2.Write4(num3);
                              data2.Write4(num4);
                              data2.Write4(num5);
                              data2.Write4(num6);
                              data2.Write4(int_129);
                              data2.Write4(int_131);
                              data2.method_1(class15_0.CharacterCoords_X);
                              data2.method_1(15f);
                              data2.method_1(class15_0.CharacterCoords_Y);
                              data2.method_2(0);
                              data2.method_2(num);
                              if (base.Player_Job == 4)
                              {
                                    if (base.bool_7)
                                    {
                                          data2.Write2(100);
                                          base.bool_7 = false;
                                    }
                                    else if (base.bool_9)
                                    {
                                          data2.Write2(120);
                                          base.bool_9 = false;
                                    }
                                    else
                                    {
                                          data2.Write2(0);
                                    }
                              }
                              else
                              {
                                    data2.Write2(0);
                              }
                              data2.Write4(int_132);
                              data2.Write4(0);
                              data2.Write4(0);
                              data2.Write4(0);
                              data2.Write4(0);
                              data2.Write4(0);
                              if (int_133 != -1)
                              {
                                    if (random.Next(0, 100) < 80)
                                    {
                                          data2.Write4(int_133);
                                    }
                                    else
                                    {
                                          data2.Write4(0);
                                    }
                              }
                              else
                              {
                                    data2.Write4(int_133);
                              }
                              data2.Write4(0);
                              data2.Write4(0);
                              data2.Write4(0);
                              data2.Write4(0);
                              data2.Write4(0);
                              data2.Write4(0);
                              data2.Write4(0);
                              data2.Write4(0);
                              data2.Write4(0);
                              if (class15_0.Client != null)
                              {
                                    class15_0.Client.method_5(data2, 0xa00, class15_0.UserSessionID, 0);
                              }
                              this.vmethod_2(data2, 0xa00, class15_0.UserSessionID, 0);
                        }
                  }
                  catch (Exception exception)
                  {
                        Form1.WriteLine(1, "发送攻击人物数据 出错 [" + base.Userid + "][" + base.UserName + "] " + exception.Message);
                  }
            }

            public void CharLogin(byte[] byte_5, int int_128)
            {
                  this.Packet_Modify(byte_5, int_128);
                  int num = 0;
                  if ((base.Client != null) && !base.Client.bool_1)
                  {
                        if (base.Client != null)
                        {
                              base.Client.Dispose();
                        }
                  }
                  else
                  {
                        try
                        {
                              if (World.allConnectedChars.ContainsKey(base.UserSessionID))
                              {
                                    DBA.smethod_7($"UPDATE TBL_ACCOUNT SET FLD_ZT=1 WHERE FLD_ID='{base.Userid}'", "rxjhaccount");
                                    Form1.WriteLine(0x4d, string.Concat(new object[] { "非法修改封包封号_人物登陆[", base.Userid, "][", base.UserName, "] 人物全服ID=[", base.UserSessionID, "] [", base.Client.ToString(), "]" }));
                                    if (base.Client != null)
                                    {
                                          base.Client.Dispose();
                                    }
                              }
                              else if (this.bool_14)
                              {
                                    DBA.smethod_7($"UPDATE TBL_ACCOUNT SET FLD_ZT=1 WHERE FLD_ID='{base.Userid}'", "rxjhaccount");
                                    Form1.WriteLine(0x4d, string.Concat(new object[] { "非法修改封包封号_人物登陆[", base.Userid, "][", base.UserName, "] 人物全服ID=[", base.UserSessionID, "] [", base.Client.ToString(), "]" }));
                                    if (base.Client != null)
                                    {
                                          base.Client.Dispose();
                                    }
                              }
                              else
                              {
                                    string str;
                                    this.bool_14 = true;
                                    num = 1;
                                    if (!base.allChars.TryGetValue(byte_5[11], out str))
                                    {
                                          if (base.Client != null)
                                          {
                                                base.Client.Dispose();
                                          }
                                    }
                                    else
                                    {
                                          base.UserName = str;
                                          if (base.UserName == "")
                                          {
                                                base.Client.Dispose();
                                          }
                                          if (base.UserName.Length > 14)
                                          {
                                                Form1.WriteLine(0x4d, "非法人物名[" + base.Userid + "][" + base.UserName + "] [" + base.Client.ToString() + "]");
                                                base.Client.Dispose();
                                          }
                                          //캐릭터 정보 로드
                                          base.READ_CHAR_DATA();
                                          num = 2;
                                          this.ServerTime();
                                          num = 3;
                                          this.UNKNOWN_327();
                                          this.SET_PUBLIC_DANH_SACH_ITEM();
                                          num = 4;
                                          base.InitialQigqong();
                                          num = 5;
                                          if (World.BackPack_Switch == 1)
                                          {
                                                for (int i = 0; i < 0x24; i++)
                                                {
                                                      if (BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[i].VAT_PHAM_ID, 0) == 0x186a01)
                                                      {
                                                            base.Equipmen_bags_whether_to_open = 1;
                                                      }
                                                }
                                          }
                                          base.EquipmentBasket_Wrapped();
                                          base.GUI_DI_NHIEM_VU_ITEM_DANH_SACH();
                                          num = 6;
                                          base.LAN_DAU_DOI_THOAI_DA_TRANG_BI_VAT_PHAM();
                                          num = 7;
                                          this.UpdateHP_MP_SP();
                                          base.UpdateExperience();
                                          base.UpdateMoneyAndWeight();
                                          num = 0x11;
                                          //퀘스트 데이터 패킷
                                          this.SendQuestList();
                                          num = 13;
                                          this.SET_THEM_VAO_TRANG_THAI_ITEM();
                                          num = 14;
                                          base.TINH_TOAN_NHAN_VAT_TRANG_BI_SO_LIEU();
                                          num = 15;
                                          base.UpdatePowersAndStatus();
                                          this.CAP_NHAT_KY_NANG_MOI_LAM_DONG_BANG_SO_LIEU();
                                          this.CAP_NHAT_KY_NANG_MOI_THANG_THIEN_LAM_DONG_BANG();
                                          num = 8;
                                          this.SET_CA_NHAN_DUOC_PHAM();
                                          num = 9;
                                          this.unknown_328();
                                          num = 11;
                                          base.Update_Figure_Data(this);
                                          if (base.VO_HUAN_CAP_8_DOAN_THOI_GIAN > DateTime.Now)
                                          {
                                                this.TINH_TOAN_VO_HUAN_CAP_8(1);
                                          }
                                          if (base.Player_Job == 7)
                                          {
                                                this.DANG_KY_CHIEU_LIEN_HOAN();
                                          }
                                          else
                                          {
                                                this.KY_NANG_COMBO();
                                          }
                                          num = 0x12;
                                          this.GUI_DI_THO_LINH_PHU_SO_LIEU();
                                          num = 0x13;
                                          this.Players_Login();
                                          num = 20;
                                          base.Update_Production_System();
                                          num = 0x15;
                                          if (base.int_11 == 1)
                                          {
                                                base.GameMessage("Dear GM you're invisible, you can use the command" + World.Stealth + "Exit stealth mode", 9, "system hint");
                                          }
                                          num = 0xd3;
                                          try
                                          {
                                                foreach (GIET_NGUOI_NHAC_NHO giet_nguoi_nhac_nho in World.dictionary_21.Values)
                                                {
                                                      if ((base.GIET_NGUOI_SO_LAN >= giet_nguoi_nhac_nho.GIET_NGUOI_SO_LAN_NHO_NHAT) && (base.GIET_NGUOI_SO_LAN <= giet_nguoi_nhac_nho.GIET_NGUOI_SO_LAN_LON_NHAT))
                                                      {
                                                            World.SendMsg(string.Format(giet_nguoi_nhac_nho.DANG_NHAP_NHAC_NHO, base.UserName));
                                                      }
                                                }
                                          }
                                          catch (Exception exception)
                                          {
                                                Form1.WriteLine(2, "杀人提示数据出错--" + exception.Message);
                                          }
                                          num = 0xd4;
                                          if (base.DANH_DAU_SO_LAN == 0)
                                          {
                                                int num3 = base.DANH_DAU_SO_LAN;
                                                base.DANH_DAU_SO_LAN = num3 + 1;
                                                base.GameMessage("Registration success! Current number sign[" + base.DANH_DAU_SO_LAN + "],There will be a mysterious reward after reaching a certain number of times", 20, "Registration System");
                                          }
                                          num = 0xd5;
                                          if (World.Login_thuoc_tinh_nhac_nho_mo_ra != 0)
                                          {
                                                base.GameMessage(string.Concat(new object[] { "<-Attack->", base.FLD_BasicCharAttack, "<-Defense->", base.FLD_BasicCharDefense, "<-" }), 10, "Own state");
                                                base.GameMessage(string.Concat(new object[] { "Life=", base.NHAN_VAT_LON_NHAT_HP, "=Neigong=", base.NHAN_VAT_LON_NHAT_MP, "=Avoid=", base.FLD_NHAN_VAT_CO_BAN_NE_TRANH, "=Hit=", base.FLD_NHAN_VAT_CO_BAN_TRUNG_MUC_TIEU, "=Evil=", base.NHAN_VAT_THIEN_AC }), 10, "Own state");
                                                if (World.Chuyen_sinh_khen_thuong_loai_hinh != 7)
                                                {
                                                      base.GameMessage(string.Concat(new object[] { "[Reincarnation times]=", base.Chuyen_sinh_so_lan, "=[Wu Xun stage]=", base.NHAN_VAT_VO_HUAN_GIAI_DOAN, "=" }), 10, "Own state");
                                                }
                                                if (World.Co_hay_khong_bat_dau_dung_thanh_vien_thang_cap != 0)
                                                {
                                                      base.GameMessage("[VIP grade]=" + base.Thanh_vien_thu_bac + "=", 10, "Own state");
                                                }
                                                base.GameMessage("[Number ingot]=" + base.FLD_RXPIONT + "Ingots=", 10, "Own state");
                                                if (World.Co_hay_khong_mo_ra_o_tuyen_thoi_gian_khen_thuong != 0)
                                                {
                                                      base.GameMessage("[Online]=" + base.TONG_QUAT_TUYEN_THOI_GIAN + "Minute=", 10, "Own state");
                                                }
                                                base.GameMessage("[Registration number]=" + base.DANH_DAU_SO_LAN + "Times=", 10, "Own state");
                                                base.GameMessage("Martial record: homicide=" + base.GIET_NGUOI_SO_LAN.ToString() + "=Times, killed=" + base.BI_GIET_SO_LAN.ToString() + "=Times", 10, "Own state");
                                          }
                                          num = 0x16;
                                          this.BAT_GIU_KIEM_TRA_LAI_NPC();
                                          num = 0x17;
                                          this.BAT_GIU_KIEM_TRA_LAI_PHAM_VI_NGUOI_CHOI();
                                          num = 0x18;
                                          this.BAT_GIU_KIEM_TRA_LAI_PHAM_VI_MAT_DAT_VAT_PHAM();
                                          num = 0x19;
                                          if (base.Bang_phai_Id != 0)
                                          {
                                                this.KIEM_TRA_BANG_PHAI();
                                          }
                                          num = 0x1a;
                                          base.System_Announcement(World.Enter_Bulletin);
                                          if (base.FLD_VIP == 1)
                                          {
                                                if (DateTime.Now > base.FLD_VIPTIM)
                                                {
                                                      base.GameMessage("Distinguished VIP users Hello, Welcome to the rivers and lakes", 9, "system hint");
                                                      base.GameMessage("VIP your time has expired, please contact customer service recharge", 9, "system hint");
                                                      base.FLD_VIP = 0;
                                                }
                                                else
                                                {
                                                      if (World.Vip_Login_thong_cao == 1)
                                                      {
                                                            World.SendMsg(string.Format(World.Vip_Login_thong_cao_noi_dung, base.UserName));
                                                      }
                                                      base.GameMessage("Distinguished VIP users Hello, Welcome to the rivers and lakes", 9, "system hint");
                                                      base.GameMessage("Your VIP expiration time:" + base.FLD_VIPTIM.ToString("yyyy年MM月dd日 hh时mm分"), 9, "system hint");
                                                }
                                          }
                                          if (base.FLD_QCVIP == 1)
                                          {
                                                if (DateTime.Now > base.FLD_QCVIPTIM)
                                                {
                                                      base.GameMessage("Distinguished VIP users Hello, Welcome to the rivers and lakes", 9, "system hint");
                                                      base.GameMessage("Your eight-color VIP time has expired, please contact customer service recharge", 9, "system hint");
                                                }
                                                else
                                                {
                                                      char[] separator = new char[] { ';' };
                                                      string[] strArray = World.Tam_the_mau_do_nhac_nho_noi_dung.Split(separator);
                                                      char[] chArray2 = new char[] { ';' };
                                                      string[] strArray2 = World.Tam_the_mau_do_tham_Nhac_nho_noi_dung.Split(chArray2);
                                                      char[] chArray3 = new char[] { ';' };
                                                      string[] strArray3 = World.Tam_the_mau_cam_Nhac_nho_noi_dung.Split(chArray3);
                                                      char[] chArray4 = new char[] { ';' };
                                                      string[] strArray4 = World.Tam_the_mau_xanh_luc_Nhac_nho_noi_dung.Split(chArray4);
                                                      char[] chArray5 = new char[] { ';' };
                                                      string[] strArray5 = World.Tam_the_mau_xanh_lam_Nhac_nho_noi_dung.Split(chArray5);
                                                      char[] chArray6 = new char[] { ';' };
                                                      string[] strArray6 = World.Tam_the_lam_dam_Nhac_nho_noi_dung.Split(chArray6);
                                                      char[] chArray7 = new char[] { ';' };
                                                      string[] strArray7 = World.Tam_the_mau_tim_Nhac_nho_noi_dung.Split(chArray7);
                                                      char[] chArray8 = new char[] { ';' };
                                                      string[] strArray8 = World.Tam_the_mau_tim_nhat_Nhac_nho_noi_dung.Split(chArray8);
                                                      using (IEnumerator<Players> enumerator2 = World.allConnectedChars.Values.GetEnumerator())
                                                      {
                                                            while (enumerator2.MoveNext())
                                                            {
                                                                  string str2 = string.Format(strArray[0], base.UserName);
                                                                  string str3 = string.Format(strArray2[0], base.UserName);
                                                                  string str4 = string.Format(strArray3[0], base.UserName);
                                                                  string str5 = string.Format(strArray4[0], base.UserName);
                                                                  string str6 = string.Format(strArray5[0], base.UserName);
                                                                  string str7 = string.Format(strArray6[0], base.UserName);
                                                                  string str8 = string.Format(strArray7[0], base.UserName);
                                                                  string str9 = string.Format(strArray7[0], base.UserName);
                                                                  Players current = enumerator2.Current;
                                                                  current.GameMessage(str2 ?? "", 20, strArray[1] ?? "");
                                                                  current.GameMessage(str3 ?? "", 0x15, strArray2[1] ?? "");
                                                                  current.GameMessage(str4 ?? "", 0x16, strArray3[1] ?? "");
                                                                  current.GameMessage(str5 ?? "", 0x17, strArray4[1] ?? "");
                                                                  current.GameMessage(str6 ?? "", 0x18, strArray5[1] ?? "");
                                                                  current.GameMessage(str7 ?? "", 0x19, strArray6[1] ?? "");
                                                                  current.GameMessage(str8 ?? "", 0x1a, strArray7[1] ?? "");
                                                                  current.GameMessage(str9 ?? "", 3, strArray8[1] ?? "");
                                                            }
                                                      }
                                                      base.GameMessage("Your eight-color VIP expiration time is:" + base.FLD_QCVIPTIM.ToString("yyyy年MM月dd日 hh时mm分"), 9, "system hint");
                                                }
                                          }
                                          if (base.FLD_WCVIP == 1)
                                          {
                                                if (DateTime.Now > base.FLD_WCVIPTIM)
                                                {
                                                      base.GameMessage("Distinguished multicolored speak VIP users Hello, Welcome to the rivers and lakes", 9, "system hint");
                                                      base.GameMessage("Your VIP multicolored talk time has expired, please contact customer service recharge", 9, "system hint");
                                                      base.FLD_WCVIP = 0;
                                                }
                                                else
                                                {
                                                      base.GameMessage("Multicolored speak your VIP expiration time is:" + base.FLD_WCVIPTIM.ToString("yyyy年MM月dd日 hh时mm分"), 9, "system hint");
                                                }
                                          }
                                          num = 0x1b;
                                          if (base.CharacterCoords_Map == 0x321)
                                          {
                                                this.Move(529f, 1528f, 15f, 0x65);
                                          }
                                          else if (base.CharacterCoords_Map == 0x1b59)
                                          {
                                                this.Move(0f, 0f, 15f, 0x4b1);
                                          }
                                          else if (base.CharacterCoords_Map == 0x1bbd)
                                          {
                                                this.Move(0f, 0f, 15f, 0x4b1);
                                          }
                                          else if (base.CharacterCoords_Map == World.Khieu_chien_ban_do_so_hieu)
                                          {
                                                this.MOVE_NEW(529f, 1528f, 15f, 0x65);
                                          }
                                          num = 0x1c;
                                          if (World.SMS_payments_whether_to_open == "1")
                                          {
                                                base.GameMessage("The service opens the SMS recharge system members, currently only supports mobile users (except in Beijing)", 9, "Prompted");
                                                base.GameMessage("SMS charges 1.5 yuan each, charging member 36 hours, multiple multi-charge", 9, "Prompted");
                                                base.GameMessage("When sending text messages after the account offline and then sent, no reply or error message does not charge reply,", 9, "Prompted");
                                                base.GameMessage("Mobile users edit text messages" + World.SMS_channel_number + World.SMS_server_WEBID + base.Userid + "send to" + World.SMS_service_number, 9, "Prompted");
                                          }
                                          num = 0x1d;
                                          if (((base.Player_Job < 1) || (base.Player_Job > 10)) && (base.Client != null))
                                          {
                                                base.Client.Dispose();
                                          }
                                          if (base.NHAN_VAT_HP <= 0L)
                                          {
                                                this.Move(base.CharacterCoords_X, base.CharacterCoords_Y, base.CharacterCoords_Z, base.CharacterCoords_Map);
                                                base.NHAN_VAT_HP = base.NHAN_VAT_LON_NHAT_HP;
                                                this.UpdateHP_MP_SP();
                                                base.PlayerIsDead = false;
                                          }
                                          num = 30;
                                          if (base.FLD_TINH_NHAN != "")
                                          {
                                                Players players = World.smethod_2(base.FLD_TINH_NHAN);
                                                if (players != null)
                                                {
                                                      players.UPDATE_TINH_NHAN_HE_THONG(2, base.UserName, base.FLD_TINH_NHAN_NHAN_CUOI);
                                                      players.TINH_NHAN_NHAC_NHO(1, players.UserName, base.UserName);
                                                      base.UPDATE_TINH_NHAN_HE_THONG(2, players.UserName, base.FLD_TINH_NHAN_NHAN_CUOI);
                                                      this.TINH_NHAN_NHAC_NHO(1, base.UserName, players.UserName);
                                                }
                                                else
                                                {
                                                      base.UPDATE_TINH_NHAN_HE_THONG(1, base.FLD_TINH_NHAN, base.FLD_TINH_NHAN_NHAN_CUOI);
                                                }
                                                base.TINH_TOAN_VO_CHONG_LUC_CONG_KICH_SO_LIEU();
                                          }
                                          num = 0x1f;
                                          if (World.Nguoi_moi_login_khen_thuong_co_hay_khong_mo_ra == 1)
                                          {
                                                char[] chArray9 = new char[] { ',' };
                                                string[] strArray9 = World.Nguoi_moi_login_khen_thuong.Split(chArray9);
                                                int lEVEL = int.Parse(strArray9[0]);
                                                if (((base.Player_Job != 7) && (lEVEL != 0)) && (base.Player_FLD_LEVEL < lEVEL))
                                                {
                                                      World.scriptClass_0.THIET_LAP_NGUOI_CHOI_LEVEL(base.UserSessionID, lEVEL);
                                                      base.GameMessage("Newcomer award" + strArray9[0] + "grade", 10, "system hint");
                                                }
                                                int num6 = int.Parse(strArray9[1]);
                                                if ((num6 != 0) && (base.Player_WuXun == 0))
                                                {
                                                      base.Player_WuXun += num6;
                                                      base.UpdatePowersAndStatus();
                                                      base.GameMessage("Newcomer award" + strArray9[2] + "Wu Xun", 10, "system hint");
                                                }
                                                long num7 = long.Parse(strArray9[2]);
                                                long num8 = long.Parse(strArray9[3]);
                                                long num9 = long.Parse(strArray9[4]);
                                                int num10 = int.Parse(strArray9[5]);
                                                int num11 = int.Parse(strArray9[6]);
                                                if ((((base.Khen_thuong_them_vao_cong_kich == 0) && (base.Khen_thuong_them_vao_phong_ngu == 0)) && ((base.Khen_thuong_them_vao_sinh_menh == 0) && (base.Khen_thuong_them_vao_noi_cong == 0))) && (base.Thanh_vien_thu_bac == 0))
                                                {
                                                      if (num7 != 0)
                                                      {
                                                            base.Khen_thuong_them_vao_cong_kich += num7;
                                                            base.GameMessage("Novice award" + strArray9[2] + "attack", 10, "system hint");
                                                      }
                                                      if (num8 != 0)
                                                      {
                                                            base.Khen_thuong_them_vao_phong_ngu += num8;
                                                            base.GameMessage("Novice award" + strArray9[3] + "defense", 10, "system hint");
                                                      }
                                                      if (num9 != 0)
                                                      {
                                                            base.Khen_thuong_them_vao_sinh_menh += num9;
                                                            base.GameMessage("Novice award" + strArray9[4] + "life", 10, "system hint");
                                                      }
                                                      if (num10 != 0)
                                                      {
                                                            base.Khen_thuong_them_vao_noi_cong += num10;
                                                            base.GameMessage("Novice award" + strArray9[5] + "magic", 10, "system hint");
                                                      }
                                                      if (num11 != 0)
                                                      {
                                                            base.Thanh_vien_thu_bac += num11;
                                                            base.GameMessage("VIP Rewards Novice Level" + strArray9[6] + "level", 10, "system hint");
                                                      }
                                                      base.LUU_NHAN_VAT_SO_LIEU();
                                                      base.UpdatePowersAndStatus();
                                                }
                                          }
                                          if ((base.Player_Job == 7) && (base.Player_FLD_LEVEL < World.Nhac_si_login_Dang_cap))
                                          {
                                                base.Player_ExpErience += 0x513ce;
                                                base.Player_Qigong_point = 0x7c;
                                                World.scriptClass_0.THIET_LAP_NGUOI_CHOI_LEVEL(base.UserSessionID, World.Nhac_si_login_Dang_cap);
                                          }
                                          num = 0x20;
                                    }
                              }
                        }
                        catch (Exception exception2)
                        {
                              Form1.WriteLine(100, string.Concat(new object[] { "人物登陆出错[", base.Userid, "]-[", base.UserName, "] ", num, " ", exception2.Message }));
                              if (base.Client != null)
                              {
                                    base.Client.Dispose();
                              }
                        }
                  }
            }

            public void CHE_TAC_HE_THONG_SAN_XUAT(byte[] byte_5, int int_128)
            {
                  byte[] dst = new byte[4];
                  Buffer.BlockCopy(byte_5, 11, dst, 0, 2);
                  BitConverter.ToInt32(dst, 0);
                  byte[] buffer2 = Converter.hexStringToByte("AA55130000FA0341170400FA030200000000000000000055AA");
                  Buffer.BlockCopy(dst, 0, buffer2, 13, 2);
                  Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, buffer2, 11, 2);
                  Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, buffer2, 5, 2);
                  if (base.Client != null)
                  {
                        base.Client.method_8(buffer2, buffer2.Length);
                  }
                  this.SendRangeOfPackets(buffer2, buffer2.Length);
            }

            public void CHE_TAC_PHAN_GIAI_HE_THONG(byte[] byte_5, int int_128)
            {
                  byte[] buffer3;
                  this.Packet_Modify(byte_5, int_128);
                  byte[] dst = new byte[4];
                  byte[] buffer2 = new byte[4];
                  Buffer.BlockCopy(byte_5, 0x13, dst, 0, 4);
                  Buffer.BlockCopy(byte_5, 0x1b, buffer2, 0, 4);
                  if (base.TRANG_BI_LAN_BAO_VAY[BitConverter.ToInt32(buffer2, 0)].Item_troi_chat)
                  {
                        base.Decomposite_Tip(-1);
                        return;
                  }
                  if (BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[BitConverter.ToInt32(buffer2, 0)].VAT_PHAM_ID, 0) != BitConverter.ToInt32(dst, 0))
                  {
                        base.Decomposite_Tip(-1);
                        return;
                  }
                  int num = base.DUOC_KIEN_HANG_RONG(this);
                  if (num == -1)
                  {
                        base.Decomposite_Tip(-1);
                        return;
                  }
                  switch (base.FLD_CHE_TAO_LOAI_HINH)
                  {
                        case 1:
                              {
                                    TBL_XWWL_ITEM tbl_xwwl_item;
                                    Random random = new Random();
                                    if (World.Itme.TryGetValue(BitConverter.ToInt32(dst, 0), out tbl_xwwl_item) && (tbl_xwwl_item.FLD_RESIDE2 == 4))
                                    {
                                          switch (tbl_xwwl_item.FLD_JOB_LEVEL)
                                          {
                                                case 2:
                                                      {
                                                            int num3 = random.Next(7, 10);
                                                            this.LAM_GIAM_DI_VAT_PHAM(BitConverter.ToInt32(buffer2, 0), 1);
                                                            byte[] bytes = BitConverter.GetBytes(RxjhClass.GetDBItmeId());
                                                            this.TANG_CUONG_VAT_PHAM_2(bytes, BitConverter.GetBytes(0x3b9accd1), num, BitConverter.GetBytes(num3), new byte[0x38]);
                                                            goto Label_052C;
                                                      }
                                                case 3:
                                                      {
                                                            int num4 = random.Next(0x13, 0x16);
                                                            this.LAM_GIAM_DI_VAT_PHAM(BitConverter.ToInt32(buffer2, 0), 1);
                                                            byte[] buffer5 = BitConverter.GetBytes(RxjhClass.GetDBItmeId());
                                                            this.TANG_CUONG_VAT_PHAM_2(buffer5, BitConverter.GetBytes(0x3b9accd2), num, BitConverter.GetBytes(num4), new byte[0x38]);
                                                            goto Label_052C;
                                                      }
                                                case 4:
                                                      {
                                                            int num5 = random.Next(7, 12);
                                                            this.LAM_GIAM_DI_VAT_PHAM(BitConverter.ToInt32(buffer2, 0), 1);
                                                            byte[] buffer6 = BitConverter.GetBytes(RxjhClass.GetDBItmeId());
                                                            this.TANG_CUONG_VAT_PHAM_2(buffer6, BitConverter.GetBytes(0x3b9accd3), num, BitConverter.GetBytes(num5), new byte[0x38]);
                                                            goto Label_052C;
                                                      }
                                                case 5:
                                                      {
                                                            int num6 = random.Next(7, 12);
                                                            this.LAM_GIAM_DI_VAT_PHAM(BitConverter.ToInt32(buffer2, 0), 1);
                                                            byte[] buffer7 = BitConverter.GetBytes(RxjhClass.GetDBItmeId());
                                                            this.TANG_CUONG_VAT_PHAM_2(buffer7, BitConverter.GetBytes(0x3b9accd4), num, BitConverter.GetBytes(num6), new byte[0x38]);
                                                            goto Label_052C;
                                                      }
                                          }
                                    }
                                    break;
                              }
                        case 2:
                              {
                                    TBL_XWWL_ITEM tbl_xwwl_item2;
                                    int num7 = new Random().Next(7, 10);
                                    if (World.Itme.TryGetValue(BitConverter.ToInt32(dst, 0), out tbl_xwwl_item2))
                                    {
                                          if (tbl_xwwl_item2.FLD_LEVEL >= 100)
                                          {
                                                this.LAM_GIAM_DI_VAT_PHAM(BitConverter.ToInt32(buffer2, 0), 1);
                                                byte[] buffer8 = BitConverter.GetBytes(RxjhClass.GetDBItmeId());
                                                this.TANG_CUONG_VAT_PHAM_2(buffer8, BitConverter.GetBytes(0x3b9acce0), num, BitConverter.GetBytes(num7), new byte[0x38]);
                                                break;
                                          }
                                          if ((tbl_xwwl_item2.FLD_LEVEL < 80) || (tbl_xwwl_item2.FLD_LEVEL >= 0x63))
                                          {
                                                if ((tbl_xwwl_item2.FLD_LEVEL >= 60) && (tbl_xwwl_item2.FLD_LEVEL < 0x4f))
                                                {
                                                      this.LAM_GIAM_DI_VAT_PHAM(BitConverter.ToInt32(buffer2, 0), 1);
                                                      byte[] buffer10 = BitConverter.GetBytes(RxjhClass.GetDBItmeId());
                                                      this.TANG_CUONG_VAT_PHAM_2(buffer10, BitConverter.GetBytes(0x3b9accde), num, BitConverter.GetBytes(num7), new byte[0x38]);
                                                }
                                                else if ((tbl_xwwl_item2.FLD_LEVEL >= 40) && (tbl_xwwl_item2.FLD_LEVEL < 0x3b))
                                                {
                                                      this.LAM_GIAM_DI_VAT_PHAM(BitConverter.ToInt32(buffer2, 0), 1);
                                                      byte[] buffer11 = BitConverter.GetBytes(RxjhClass.GetDBItmeId());
                                                      this.TANG_CUONG_VAT_PHAM_2(buffer11, BitConverter.GetBytes(0x3b9accdd), num, BitConverter.GetBytes(num7), new byte[0x38]);
                                                }
                                                break;
                                          }
                                          this.LAM_GIAM_DI_VAT_PHAM(BitConverter.ToInt32(buffer2, 0), 1);
                                          byte[] buffer9 = BitConverter.GetBytes(RxjhClass.GetDBItmeId());
                                          this.TANG_CUONG_VAT_PHAM_2(buffer9, BitConverter.GetBytes(0x3b9accdf), num, BitConverter.GetBytes(num7), new byte[0x38]);
                                    }
                                    break;
                              }
                        case 3:
                              {
                                    int num2 = BitConverter.ToInt32(dst, 0);
                                    if (num2 > 0x2faf0802)
                                    {
                                          switch (num2)
                                          {
                                                case 0x2faf0817:
                                                      {
                                                            this.LAM_GIAM_DI_VAT_PHAM(BitConverter.ToInt32(buffer2, 0), 1);
                                                            byte[] buffer14 = BitConverter.GetBytes(RxjhClass.GetDBItmeId());
                                                            this.TANG_CUONG_VAT_PHAM_2(buffer14, BitConverter.GetBytes(0x3b9acceb), num, BitConverter.GetBytes(1), new byte[0x38]);
                                                            goto Label_052C;
                                                      }
                                                case 0x2faf0818:
                                                      {
                                                            this.LAM_GIAM_DI_VAT_PHAM(BitConverter.ToInt32(buffer2, 0), 1);
                                                            byte[] buffer15 = BitConverter.GetBytes(RxjhClass.GetDBItmeId());
                                                            this.TANG_CUONG_VAT_PHAM_2(buffer15, BitConverter.GetBytes(0x3b9accec), num, BitConverter.GetBytes(1), new byte[0x38]);
                                                            goto Label_052C;
                                                      }
                                                case 0x2faf081c:
                                                      {
                                                            this.LAM_GIAM_DI_VAT_PHAM(BitConverter.ToInt32(buffer2, 0), 1);
                                                            byte[] buffer16 = BitConverter.GetBytes(RxjhClass.GetDBItmeId());
                                                            this.TANG_CUONG_VAT_PHAM_2(buffer16, BitConverter.GetBytes(0x3b9acced), num, BitConverter.GetBytes(1), new byte[0x38]);
                                                            goto Label_052C;
                                                      }
                                          }
                                          break;
                                    }
                                    switch (num2)
                                    {
                                          case 0x2faf0801:
                                                {
                                                      this.LAM_GIAM_DI_VAT_PHAM(BitConverter.ToInt32(buffer2, 0), 1);
                                                      byte[] buffer12 = BitConverter.GetBytes(RxjhClass.GetDBItmeId());
                                                      this.TANG_CUONG_VAT_PHAM_2(buffer12, BitConverter.GetBytes(0x3b9acce9), num, BitConverter.GetBytes(1), new byte[0x38]);
                                                      goto Label_052C;
                                                }
                                          case 0x2faf0802:
                                                {
                                                      this.LAM_GIAM_DI_VAT_PHAM(BitConverter.ToInt32(buffer2, 0), 1);
                                                      byte[] buffer13 = BitConverter.GetBytes(RxjhClass.GetDBItmeId());
                                                      this.TANG_CUONG_VAT_PHAM_2(buffer13, BitConverter.GetBytes(0x3b9accea), num, BitConverter.GetBytes(1), new byte[0x38]);
                                                      goto Label_052C;
                                                }
                                    }
                                    break;
                              }
                  }
                  Label_052C:
                  buffer3 = Converter.hexStringToByte("AA5513000154003117040001000000000000000000477B55AA");
                  Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, buffer3, 5, 2);
                  if (base.Client != null)
                  {
                        base.Client.method_8(buffer3, buffer3.Length);
                  }
            }

            public void CHE_TAC_PHAN_GIAI_KIEM_TRA(byte[] byte_5, int int_128)
            {
            }

            public void CHE_TAC_VAT_PHAM(TBL_XWWL_ITEM class7_0, int int_128)
            {
                  if (World.jlMsg == 1)
                  {
                        Form1.WriteLine(0, "Players_CHE_TAO_VAT_PHAM");
                  }
                  byte[] bytes = BitConverter.GetBytes(RxjhClass.GetDBItmeId());
                  byte[] dst = new byte[0x38];
                  int num = new Random(DateTime.Now.Millisecond).Next(0, 700 - base.FLD_CHE_TAO_DO_THUAN_THUC);
                  int num2 = 0;
                  if (num < 10)
                  {
                        num2 = 2;
                  }
                  else if (num < 0x2d)
                  {
                        num2 = 1;
                  }
                  Buffer.BlockCopy(BitConverter.GetBytes(num2), 0, dst, 0x34, 2);
                  this.TANG_CUONG_VAT_PHAM_2(bytes, BitConverter.GetBytes(class7_0.FLD_PID), int_128, BitConverter.GetBytes(1), dst);
                  Form1.WriteLine(5, string.Concat(new object[] { "CHE_TAO_VAT_PHAM [", base.Userid, "] [", base.UserName, "] VAT_PHAM_TEN[", class7_0.ItmeNAME, "] TOAN_BO_ID=[", BitConverter.ToInt32(bytes, 0), "]  LV[", num2, "]" }));
            }

            public void CHE_TAC_VAT_PHAM_MOI(CHE_TAO_ITEM_DANH_SACH CHE_TAO_ITEM_LOAI_0, int int_128)
            {
                  if (World.jlMsg == 1)
                  {
                        Form1.WriteLine(0, "Players_TAO_RA_VAT_PHAM");
                  }
                  byte[] bytes = BitConverter.GetBytes(RxjhClass.GetDBItmeId());
                  byte[] dst = new byte[0x38];
                  int num = new Random(DateTime.Now.Millisecond).Next(0, 700 - base.FLD_CHE_TAO_DO_THUAN_THUC);
                  int num2 = 0;
                  if (num < 10)
                  {
                        num2 = 2;
                  }
                  else if (num < 0x2d)
                  {
                        num2 = 1;
                  }
                  Buffer.BlockCopy(BitConverter.GetBytes(num2), 0, dst, 0x34, 2);
                  this.TANG_CUONG_VAT_PHAM_2(bytes, BitConverter.GetBytes(CHE_TAO_ITEM_LOAI_0.ITEM_ID), int_128, BitConverter.GetBytes(1), dst);
                  Form1.WriteLine(5, string.Concat(new object[] { "TAO_RA_VAT_PHAM [", base.Userid, "] [", base.UserName, "] VAT_PHAM_TEN[", CHE_TAO_ITEM_LOAI_0.ITEM_TEN, "] TOAN_BO_ID=[", BitConverter.ToInt32(bytes, 0), "]  LV[", num2, "]" }));
            }

            public void CHE_TAO_GIAM_DI_ITEM(int int_128, int int_129)
            {
                  byte[] dst = Converter.hexStringToByte("AA552300000000220014000111000041EEF805010000000000000000000000000000000000000055AA");
                  Buffer.BlockCopy(BitConverter.GetBytes(int_128), 0, dst, 12, 4);
                  Buffer.BlockCopy(BitConverter.GetBytes(int_129), 0, dst, 0x13, 4);
                  Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, dst, 5, 2);
                  if (base.Client != null)
                  {
                        base.Client.Send(dst, dst.Length);
                  }
                  base.TRANG_BI_LAN_BAO_VAY[int_128].Item_byte = new byte[0x49];
            }

            public void CHE_TAO_HE_THONG_KIEM_TRA(byte[] byte_5, int int_128)
            {
                  this.Packet_Modify(byte_5, int_128);
                  int key = BitConverter.ToInt32(byte_5, 11);
                  if (base.DUOC_KIEN_HANG_RONG(this) == -1)
                  {
                        base.Decomposite_Tip(-1);
                  }
                  else
                  {
                        CHE_TAO_ITEM_DANH_SACH che_tao_item_danh_sach;
                        if (World.dictionary_29.TryGetValue(key, out che_tao_item_danh_sach))
                        {
                              if ((base.FLD_CHE_TAO_LOAI_HINH == che_tao_item_danh_sach.CHE_TAO_LOAI_HINH) && (base.FLD_CHE_TAO_THU_BAC >= che_tao_item_danh_sach.CHE_TAO_DANG_CAP))
                              {
                                    if (che_tao_item_danh_sach.CAN_ITEM.Count <= 0)
                                    {
                                          base.Decomposite_Tip(-3);
                                          Form1.WriteLine(1, "制作VAT_PHAM列表    错误" + che_tao_item_danh_sach.ITEM_TEN);
                                          return;
                                    }
                                    using (List<CHE_TAC_CAN_ITEM_LOAI>.Enumerator enumerator = che_tao_item_danh_sach.CAN_ITEM.GetEnumerator())
                                    {
                                          while (enumerator.MoveNext())
                                          {
                                                CHE_TAC_CAN_ITEM_LOAI current = enumerator.Current;
                                                bool flag = false;
                                                for (int i = 0; i < 0x24; i++)
                                                {
                                                      if ((BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[i].VAT_PHAM_ID, 0) == current.Id) && (BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[i].VAT_PHAM_SO_LUONG, 0) >= current.number))
                                                      {
                                                            goto Label_00E8;
                                                      }
                                                }
                                                goto Label_00EB;
                                                Label_00E8:
                                                flag = true;
                                                Label_00EB:
                                                if (!flag)
                                                {
                                                      goto Label_00FA;
                                                }
                                          }
                                          return;
                                          Label_00FA:
                                          base.Decomposite_Tip(-3);
                                          return;
                                    }
                              }
                              base.Decomposite_Tip(-1);
                        }
                        else
                        {
                              base.Decomposite_Tip(-1);
                        }
                  }
            }

            public void CHE_TAO_HE_THONG_SAN_XUAT(byte[] byte_5, int int_128)
            {
                  CHE_TAO_ITEM_DANH_SACH che_tao_item_danh_sach;
                  byte[] buffer;
                  int num5;
                  this.Packet_Modify(byte_5, int_128);
                  int key = BitConverter.ToInt32(byte_5, 11);
                  int num2 = base.DUOC_KIEN_HANG_RONG(this);
                  if (num2 == -1)
                  {
                        base.Decomposite_Tip(-1);
                        return;
                  }
                  if (!World.dictionary_29.TryGetValue(key, out che_tao_item_danh_sach))
                  {
                        base.Decomposite_Tip(-2);
                        goto Label_0339;
                  }
                  if ((base.FLD_CHE_TAO_LOAI_HINH != che_tao_item_danh_sach.CHE_TAO_LOAI_HINH) || (base.FLD_CHE_TAO_THU_BAC < che_tao_item_danh_sach.CHE_TAO_DANG_CAP))
                  {
                        base.Decomposite_Tip(-2);
                        goto Label_0339;
                  }
                  if (che_tao_item_danh_sach.CAN_ITEM.Count <= 0)
                  {
                        base.Decomposite_Tip(-3);
                        Form1.WriteLine(1, "CHE_TAO_VAT_PHAM_DANH_SACH_LOI" + che_tao_item_danh_sach.ITEM_TEN);
                        return;
                  }
                  using (List<CHE_TAC_CAN_ITEM_LOAI>.Enumerator enumerator = che_tao_item_danh_sach.CAN_ITEM.GetEnumerator())
                  {
                        while (enumerator.MoveNext())
                        {
                              CHE_TAC_CAN_ITEM_LOAI current = enumerator.Current;
                              bool flag = false;
                              for (int i = 0; i < 0x24; i++)
                              {
                                    if ((BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[i].VAT_PHAM_ID, 0) == current.Id) && (BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[i].VAT_PHAM_SO_LUONG, 0) >= current.number))
                                    {
                                          goto Label_00FF;
                                    }
                              }
                              goto Label_0102;
                              Label_00FF:
                              flag = true;
                              Label_0102:
                              if (!flag)
                              {
                                    goto Label_0111;
                              }
                        }
                        goto Label_012C;
                        Label_0111:
                        base.Decomposite_Tip(-3);
                        return;
                  }
                  Label_012C:
                  foreach (CHE_TAC_CAN_ITEM_LOAI che_tac_can_item_loai2 in che_tao_item_danh_sach.CAN_ITEM)
                  {
                        int index = 0;
                        while (index < 0x24)
                        {
                              if (BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_ID, 0) == che_tac_can_item_loai2.Id)
                              {
                                    goto Label_0174;
                              }
                              index++;
                        }
                        goto Label_0183;
                        Label_0174:
                        this.LAM_GIAM_DI_VAT_PHAM(index, che_tac_can_item_loai2.number);
                        Label_0183:;
                  }
                  switch (base.FLD_CHE_TAO_LOAI_HINH)
                  {
                        case 1:
                              TBL_XWWL_ITEM tbl_xwwl_item;
                              if (World.Itme.TryGetValue(che_tao_item_danh_sach.ITEM_ID, out tbl_xwwl_item))
                              {
                                    if (tbl_xwwl_item.FLD_RESIDE2 != 0)
                                    {
                                          this.CHE_TAC_VAT_PHAM_MOI(che_tao_item_danh_sach, num2);
                                          if (base.FLD_CHE_TAO_DO_THUAN_THUC < 600)
                                          {
                                                num5 = base.FLD_CHE_TAO_DO_THUAN_THUC;
                                                base.FLD_CHE_TAO_DO_THUAN_THUC = num5 + 1;
                                                base.UpdateExperience();
                                                base.Production_Level();
                                          }
                                          break;
                                    }
                                    byte[] bytes = BitConverter.GetBytes(RxjhClass.GetDBItmeId());
                                    this.TANG_CUONG_VAT_PHAM_2(bytes, BitConverter.GetBytes(che_tao_item_danh_sach.ITEM_ID), num2, BitConverter.GetBytes(che_tao_item_danh_sach.ITEM_SO_LUONG), new byte[0x38]);
                              }
                              break;

                        case 2:
                              TBL_XWWL_ITEM tbl_xwwl_item2;
                              if (World.Itme.TryGetValue(che_tao_item_danh_sach.ITEM_ID, out tbl_xwwl_item2))
                              {
                                    if (tbl_xwwl_item2.FLD_RESIDE2 != 0)
                                    {
                                          this.CHE_TAC_VAT_PHAM_MOI(che_tao_item_danh_sach, num2);
                                          if (base.FLD_CHE_TAO_DO_THUAN_THUC < 600)
                                          {
                                                num5 = base.FLD_CHE_TAO_DO_THUAN_THUC;
                                                base.FLD_CHE_TAO_DO_THUAN_THUC = num5 + 1;
                                                base.UpdateExperience();
                                                base.Production_Level();
                                          }
                                          break;
                                    }
                                    byte[] buffer3 = BitConverter.GetBytes(RxjhClass.GetDBItmeId());
                                    this.TANG_CUONG_VAT_PHAM_2(buffer3, BitConverter.GetBytes(che_tao_item_danh_sach.ITEM_ID), num2, BitConverter.GetBytes(che_tao_item_danh_sach.ITEM_SO_LUONG), new byte[0x38]);
                              }
                              break;

                        case 3:
                              {
                                    byte[] buffer4 = BitConverter.GetBytes(RxjhClass.GetDBItmeId());
                                    this.TANG_CUONG_VAT_PHAM_2(buffer4, BitConverter.GetBytes(che_tao_item_danh_sach.ITEM_ID), num2, BitConverter.GetBytes(che_tao_item_danh_sach.ITEM_SO_LUONG), new byte[0x38]);
                                    if (base.FLD_CHE_TAO_DO_THUAN_THUC < 600)
                                    {
                                          num5 = base.FLD_CHE_TAO_DO_THUAN_THUC;
                                          base.FLD_CHE_TAO_DO_THUAN_THUC = num5 + 1;
                                          base.UpdateExperience();
                                          base.Production_Level();
                                    }
                                    break;
                              }
                  }
                  Label_0339:
                  buffer = Converter.hexStringToByte("AA5513000184023617040001000000000000000000D80855AA");
                  Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, buffer, 5, 2);
                  if (base.Client != null)
                  {
                        base.Client.method_8(buffer, buffer.Length);
                  }
            }

            public void CHE_TAO_ITEM_2(int int_128, byte[] byte_5)
            {
                  byte[] dst = Converter.hexStringToByte("AA5543000000002300340001000000CE4303000000000043EEF8050100000000000000010A0003010000014F68333CE3969800E3969800E3969800E3969800000000000000000055AA");
                  byte[] buffer2 = new byte[0x49];
                  Buffer.BlockCopy(BitConverter.GetBytes(RxjhClass.GetDBItmeId()), 0, buffer2, 0, 4);
                  Buffer.BlockCopy(byte_5, 0, buffer2, 8, 4);
                  Buffer.BlockCopy(BitConverter.GetBytes(1), 0, buffer2, 12, 4);
                  Buffer.BlockCopy(BitConverter.GetBytes(int_128), 0, dst, 0x24, 2);
                  Buffer.BlockCopy(buffer2, 0, dst, 15, 0x10);
                  Buffer.BlockCopy(buffer2, 0x10, dst, 0x2b, 20);
                  Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, dst, 5, 2);
                  if (base.Client != null)
                  {
                        base.Client.Send(dst, dst.Length);
                  }
            }

            public void CHE_TAO_VAT_PHAM(int int_128, byte[] byte_5)
            {
                  byte[] bytes = BitConverter.GetBytes(RxjhClass.GetDBItmeId());
                  byte[] dst = new byte[0x38];
                  TBL_XWWL_ITEM tbl_xwwl_item = new TBL_XWWL_ITEM();
                  tbl_xwwl_item = TBL_XWWL_ITEM.smethod_3(BitConverter.ToInt32(byte_5, 0));
                  int num = BitConverter.ToInt32(byte_5, 0);
                  if (num != 0x2faf080b)
                  {
                        switch (num)
                        {
                              case 0x2faf0819:
                                    {
                                          int num4 = new Random().Next(0xf4242, 0xf424a);
                                          byte_5 = BitConverter.GetBytes(0x2faf0801);
                                          tbl_xwwl_item.FLD_MAGIC0 = num4;
                                          break;
                                    }
                              case 0x2faf081a:
                                    {
                                          int num5 = new Random().Next(0xaae62, 0xaae6a);
                                          byte_5 = BitConverter.GetBytes(0x2faf0801);
                                          tbl_xwwl_item.FLD_MAGIC0 = num5;
                                          break;
                                    }
                              case 0x2faf081b:
                                    {
                                          int num6 = new Random().Next(0, 7);
                                          string str = "000";
                                          string s = "200" + num6.ToString() + str;
                                          byte_5 = BitConverter.GetBytes(0x2faf081c);
                                          tbl_xwwl_item.FLD_MAGIC0 = int.Parse(s);
                                          break;
                                    }
                              case 0x2faf080c:
                                    {
                                          int num3 = new Random().Next(0x30d42, 0x30d4a);
                                          byte_5 = BitConverter.GetBytes(0x2faf0802);
                                          tbl_xwwl_item.FLD_MAGIC0 = num3;
                                          break;
                                    }
                        }
                  }
                  else
                  {
                        int num2 = new Random().Next(0x186a2, 0x186aa);
                        byte_5 = BitConverter.GetBytes(0x2faf0801);
                        tbl_xwwl_item.FLD_MAGIC0 = num2;
                  }
                  Buffer.BlockCopy(BitConverter.GetBytes(tbl_xwwl_item.FLD_MAGIC0), 0, dst, 0, 4);
                  Buffer.BlockCopy(BitConverter.GetBytes(tbl_xwwl_item.FLD_MAGIC1), 0, dst, 4, 4);
                  Buffer.BlockCopy(BitConverter.GetBytes(tbl_xwwl_item.FLD_MAGIC2), 0, dst, 8, 4);
                  Buffer.BlockCopy(BitConverter.GetBytes(tbl_xwwl_item.FLD_MAGIC3), 0, dst, 12, 4);
                  Buffer.BlockCopy(BitConverter.GetBytes(tbl_xwwl_item.FLD_MAGIC4), 0, dst, 0x10, 4);
                  this.TANG_CUONG_VAT_PHAM(bytes, byte_5, int_128, BitConverter.GetBytes(1), dst);
            }

            public int CHUYEN_DEN_BAN_DO_NHA_TU(int int_128)
            {
                  char[] separator = new char[] { ',' };
                  string[] strArray = World.Nguc_giam_ban_do.Trim().Split(separator);
                  if ((int_128 == int.Parse(strArray[0])) && (base.NHAN_VAT_THIEN_AC > World.Ngoi_tu_thien_ac))
                  {
                        base.GameMessage("Pictured local map can not be transferred into the prison", 9, "system hint");
                        return 0;
                  }
                  return 1;
            }

            public void CHUYEN_SINH_SO_LAN_KHEN_THUONG()
            {
                  try
                  {
                        using (Dictionary<int, ns1.CHUYEN_SINH_SO_LAN_KHEN_THUONG>.ValueCollection.Enumerator enumerator = World.dictionary_19.Values.GetEnumerator())
                        {
                              while (enumerator.MoveNext())
                              {
                                    ns1.CHUYEN_SINH_SO_LAN_KHEN_THUONG current = enumerator.Current;
                                    if (base.Chuyen_sinh_so_lan == current.CHUYEN_SINH_SO_LAN)
                                    {
                                          char[] separator = new char[] { ',' };
                                          string[] strArray = World.Thang_cap_thanh_vien_can_Thuoc_tinh.Split(separator);
                                          if (current.VO_HUAN != 0)
                                          {
                                                base.Player_WuXun += current.VO_HUAN;
                                                base.GameMessage("Obtain Wu Xun" + current.VO_HUAN.ToString() + "point!", 20, "Reincarnation number of reward");
                                                base.UpdatePowersAndStatus();
                                          }
                                          if (current.TRANG_PHUC_ID != 0)
                                          {
                                                int num2 = base.DUOC_KIEN_HANG_RONG_VI_TRI();
                                                if (num2 == -1)
                                                {
                                                      goto Label_0543;
                                                }
                                                byte[] bytes = BitConverter.GetBytes(RxjhClass.GetDBItmeId());
                                                byte[] buffer2 = new byte[0x38];
                                                this.TANG_CUONG_VAT_PHAM_1(bytes, BitConverter.GetBytes(current.TRANG_PHUC_ID), num2, BitConverter.GetBytes(1), buffer2, false);
                                                base.GameMessage("Congratulations, you get a set of equipment. Quickly open and see", 20, "Reincarnation number of reward");
                                          }
                                          if ((current.CASH != 0) && (base.FLD_RXPIONT != World.Nhan_vat_lon_nhat_CASH_so_luong))
                                          {
                                                this.KIEM_TRA_BACH_BAO_CAC_NGUYEN_BAO_SO_LUONG();
                                                base.KIEM_SOAT_CASH_SO_LIEU(current.CASH, 1);
                                                base.GameMessage("get" + current.CASH.ToString() + "Ingot!", 20, "Reincarnation number of reward");
                                                base.UPDATE_RXPIONT();
                                          }
                                          if (current.SINH_MENH != 0)
                                          {
                                                base.Khen_thuong_them_vao_sinh_menh += current.SINH_MENH;
                                                base.UpdatePowersAndStatus();
                                                base.GameMessage("get" + current.SINH_MENH.ToString() + "life value!", 20, "Reincarnation number of reward");
                                          }
                                          if ((current.CONG_KICH != 0) && (base.Khen_thuong_them_vao_cong_kich < long.Parse(strArray[0])))
                                          {
                                                base.Khen_thuong_them_vao_cong_kich += current.CONG_KICH;
                                                base.UpdatePowersAndStatus();
                                                base.GameMessage("get" + current.CONG_KICH.ToString() + "Attack!", 20, "Reincarnation number of reward");
                                          }
                                          if ((current.PHONG_NGU != 0) && (base.Khen_thuong_them_vao_phong_ngu < long.Parse(strArray[1])))
                                          {
                                                base.Khen_thuong_them_vao_phong_ngu += current.PHONG_NGU;
                                                base.UpdatePowersAndStatus();
                                                base.GameMessage("get" + current.PHONG_NGU.ToString() + "Defense!", 20, "Reincarnation number of reward");
                                          }
                                          if (current.NE_TRANH != 0)
                                          {
                                                base.Khen_thuong_them_vao_ne_tranh += current.NE_TRANH;
                                                base.UpdatePowersAndStatus();
                                                base.GameMessage("get" + current.NE_TRANH.ToString() + "Avoid value!", 20, "Reincarnation number of reward");
                                          }
                                          if (current.TRUNG_MUC_TIEU != 0)
                                          {
                                                base.Khen_thuong_them_vao_trung_muc_tieu += current.TRUNG_MUC_TIEU;
                                                base.UpdatePowersAndStatus();
                                                base.GameMessage("get" + current.TRUNG_MUC_TIEU.ToString() + "Hits value!", 20, "Reincarnation number of reward");
                                          }
                                          if (current.NOI_CONG != 0)
                                          {
                                                base.Khen_thuong_them_vao_noi_cong += current.NOI_CONG;
                                                base.UpdatePowersAndStatus();
                                                base.GameMessage("get" + current.NOI_CONG.ToString() + "Internal strength value!", 20, "Reincarnation number of reward");
                                          }
                                          if (current.TIEN_BAC != "")
                                          {
                                                base.Player_Money += long.Parse(current.TIEN_BAC);
                                                base.GameMessage("Get medal" + current.TIEN_BAC + "Two!", 20, "Reincarnation number of reward");
                                                base.Get_Money_Tip(uint.Parse(current.TIEN_BAC));
                                                base.UpdateMoneyAndWeight();
                                          }
                                          if (current.GOI_VIP_ITEM != "")
                                          {
                                                int num3 = base.DUOC_KIEN_HANG_RONG_VI_TRI();
                                                if (num3 == -1)
                                                {
                                                      goto Label_0557;
                                                }
                                                char[] chArray2 = new char[] { ';' };
                                                string[] strArray2 = current.GOI_VIP_ITEM.Split(chArray2);
                                                this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(int.Parse(strArray2[0]), num3, int.Parse(strArray2[1]), int.Parse(strArray2[2]), int.Parse(strArray2[3]), int.Parse(strArray2[4]), int.Parse(strArray2[5]), int.Parse(strArray2[6]), int.Parse(strArray2[7]), int.Parse(strArray2[8]), int.Parse(strArray2[9]), int.Parse(strArray2[10]), int.Parse(strArray2[11]));
                                                base.GameMessage("Congratulations, you get a piece of equipment. Quickly open and see", 20, "Reincarnation number of reward");
                                          }
                                          if (current.HOI_VIEN_THANG_THIEN != 0)
                                          {
                                                DateTime now = DateTime.Now;
                                                now = DateTime.Now.AddDays((double)current.HOI_VIEN_THANG_THIEN);
                                                base.FLD_VIP = 1;
                                                base.FLD_VIPTIM = now;
                                                base.LUU_THANH_VIEN_SO_LIEU();
                                                base.GameMessage("Congratulations, you get" + current.HOI_VIEN_THANG_THIEN.ToString() + "Day membership, please check the small back!", 10, "Reincarnation number of reward");
                                          }
                                          if ((current.THANH_VIEN_THANG_THIEN != 0) && (base.Thanh_vien_thu_bac < World.Nhan_vat_level_cao_nhat))
                                          {
                                                if ((base.Thanh_vien_thu_bac + current.THANH_VIEN_THANG_THIEN) > World.Nhan_vat_level_cao_nhat)
                                                {
                                                      base.Thanh_vien_thu_bac = World.Nhan_vat_level_cao_nhat;
                                                }
                                                else
                                                {
                                                      base.Thanh_vien_thu_bac += current.THANH_VIEN_THANG_THIEN;
                                                }
                                                base.LUU_NHAN_VAT_SO_LIEU();
                                                base.GameMessage("Congratulations, you get" + current.THANH_VIEN_THANG_THIEN.ToString() + "Day membership, please check the small back!", 10, "Reincarnation number of reward");
                                          }
                                    }
                              }
                              return;
                              Label_0543:
                              base.GameMessage("Backpack no vacancy, and quickly clean up under the bar.", 20, "Reincarnation number of reward");
                              return;
                              Label_0557:
                              base.GameMessage("Backpack no vacancy, and quickly clean up under the bar.", 20, "Reincarnation number of reward");
                        }
                  }
                  catch (Exception exception)
                  {
                        Form1.WriteLine(1, "Chuyen_sinh_so_lan奖励系统出错! [" + base.Userid + "]-[" + base.UserName + "]" + exception.Message);
                  }
            }

            public void CONG_KICH(byte[] byte_5, int int_128)
            {
                  try
                  {
                        if (base.NHAN_VAT_HP > 0L)
                        {
                              if (base.int_9 == 1)
                              {
                                    this.TRANG_THAI_TANG_HINH(0);
                              }
                              if (!base.PlayerIsDead)
                              {
                                    if (World.PKSwitch != 0)
                                    {
                                          base.GameMessage("The line inhibit PK", 9, "system hint");
                                    }
                                    else
                                    {
                                          this.Packet_Modify(byte_5, int_128);
                                          byte[] dst = new byte[4];
                                          Buffer.BlockCopy(byte_5, 5, dst, 0, 2);
                                          int num = BitConverter.ToInt32(dst, 0);
                                          byte[] buffer2 = new byte[4];
                                          byte[] buffer3 = new byte[4];
                                          Buffer.BlockCopy(byte_5, 15, buffer2, 0, 4);
                                          Buffer.BlockCopy(byte_5, 11, buffer3, 0, 2);
                                          int key = BitConverter.ToInt32(buffer2, 0);
                                          int peopleID = BitConverter.ToInt32(buffer3, 0);
                                          if ((((base.NHAN_VAT_LINH_THU == null) || (base.NHAN_VAT_LINH_THU.CUOI_THU != 1)) || ((base.NHAN_VAT_LINH_THU.class23_1[4].GetItem_ID == 0x23d40ee1L) || (base.NHAN_VAT_LINH_THU.class23_1[4].GetItem_ID == 0x23d40ee2L))) || ((((base.NHAN_VAT_LINH_THU.class23_1[4].GetItem_ID == 0x23d40ee3L) || (base.NHAN_VAT_LINH_THU.class23_1[4].GetItem_ID == 0x23d40ee4L)) || ((base.NHAN_VAT_LINH_THU.class23_1[4].GetItem_ID == 0x23d40ee5L) || (base.NHAN_VAT_LINH_THU.class23_1[4].GetItem_ID == 0x23d40ee6L))) || ((base.NHAN_VAT_LINH_THU.class23_1[4].GetItem_ID == 0x23d40ee7L) || (base.NHAN_VAT_LINH_THU.class23_1[4].GetItem_ID == 0x23d40ee8L))))
                                          {
                                                int totalMilliseconds = (int)DateTime.Now.Subtract(this.dateTime_14).TotalMilliseconds;
                                                if (((World.Phan_mem_hack_PK_switch > 0) && (peopleID < 0x2710)) && (peopleID != base.UserSessionID))
                                                {
                                                      TBL_XWWL_KONGFU tbl_xwwl_kongfu;
                                                      if (!World.TBL_KONGFU.TryGetValue(key, out tbl_xwwl_kongfu))
                                                      {
                                                            return;
                                                      }
                                                      if (((tbl_xwwl_kongfu.FLD_VO_CONG_LOAI_HINH != 1) && (key == this.int_122)) && (totalMilliseconds < World.Phan_mem_hack_PK_switch))
                                                      {
                                                            base.GameMessage("Prohibit the use of automatic external hanging PK function. Title after treatment found that repeated use", 9, "system hint");
                                                            if (base.Client != null)
                                                            {
                                                                  base.Client.Dispose();
                                                            }
                                                            return;
                                                      }
                                                }
                                                if (totalMilliseconds >= 0x3e8)
                                                {
                                                      this.dateTime_14 = DateTime.Now;
                                                      this.int_122 = key;
                                                      if (num == base.UserSessionID)
                                                      {
                                                            if (key != 0)
                                                            {
                                                                  if ((base.PlayerPKMode != 0) || (key != 0xc3a79))
                                                                  {
                                                                        this.MagicAttack(key, peopleID);
                                                                  }
                                                            }
                                                            else
                                                            {
                                                                  if (this.timer_1 != null)
                                                                  {
                                                                        this.timer_1.Enabled = false;
                                                                        this.timer_1.Close();
                                                                        this.timer_1.Dispose();
                                                                        this.timer_1 = null;
                                                                  }
                                                                  this.PhysicalAttack2(key, peopleID);
                                                            }
                                                      }
                                                }
                                          }
                                    }
                              }
                        }
                  }
                  catch (Exception exception)
                  {
                        Form1.WriteLine(1, string.Concat(new object[] { "攻击物理攻击", base.UserSessionID, "|", this.ToString(), " ", exception.Message }));
                  }
            }

            public void CONG_KICH_TINH_TOAN_HOAN_THANH(Players Playe, int Target_ID, int Skill_ID, long Power_Attack, int Attack_Type, long Target_HP)
            {
                  if (World.jlMsg == 1)
                  {
                        Form1.WriteLine(0, "Players_攻击计算完成");
                  }
                  try
                  {
                        TBL_XWWL_KONGFU tbl_xwwl_kongfu;
                        int num;
                        Lock @lock;
                        int num2 = -1;
                        if (World.TBL_KONGFU.TryGetValue(Skill_ID, out tbl_xwwl_kongfu))
                        {
                              if (Target_ID >= 0x2710)
                              {
                                    AttackClass class2;
                                    if (tbl_xwwl_kongfu.FLD_TYPE == 4)
                                    {
                                          double num3;
                                          int num4 = 0;
                                          num4 = tbl_xwwl_kongfu.FLD_CONG_KICH_SO_LUONG;
                                          class2 = new AttackClass(Target_ID, Skill_ID, Power_Attack, Attack_Type, tbl_xwwl_kongfu.FLD_TYPE);
                                          if ((base.Player_Job == 1) && (base.Player_Job == 8))
                                          {
                                                num3 = Power_Attack * (1.0 + base.Dao_khach_Quan_cong_uy_luc);
                                          }
                                          else
                                          {
                                                num3 = Power_Attack;
                                          }
                                          if ((Playe.Player_Job == 7) && Playe.Add_Status_List.ContainsKey(0xdbd33))
                                          {
                                                num4 = tbl_xwwl_kongfu.FLD_CONG_KICH_SO_LUONG + ((int)(Playe.Cam_su_Cam_thanh_qua_nguyet * (0.12 * (1.0 + (Playe.Cam_su_thang_thien_3_khi_cong_Tu_da_thu_ca * 0.02)))));
                                                num3 *= 1.0 + (Playe.Cam_su_Cam_thanh_qua_nguyet * (0.005 * (1.0 + (Playe.Cam_su_thang_thien_3_khi_cong_Tu_da_thu_ca * 0.02))));
                                                if (new Random().Next(0, 0x8d) <= (((int)(Playe.Cam_su_Loan_phuong_hoa_minh * 100.0)) + ((int)(Playe.Cam_su_thang_thien_1_khi_cong_Phi_hoa_diem_thuy * 0.2))))
                                                {
                                                      num3 *= 1.5 + (Playe.Cam_su_thang_thien_1_khi_cong_Phi_hoa_diem_thuy * 0.02);
                                                      num4 *= (int)(1.5 + (Playe.Cam_su_thang_thien_1_khi_cong_Phi_hoa_diem_thuy * 0.02));
                                                      base.Show_Char(Target_ID, 0x188);
                                                }
                                          }
                                          Power_Attack = (long)num3;
                                          TBL_XWWL_NPC tbl_xwwl_npc = MapClass.smethod_2(base.CharacterCoords_Map, Target_ID);
                                          if (tbl_xwwl_npc == null)
                                          {
                                                return;
                                          }
                                          NHAN_VAT_CONG_KICH item = new NHAN_VAT_CONG_KICH(Target_ID, Skill_ID, Power_Attack, Attack_Type)
                                          {
                                                long_0 = tbl_xwwl_npc.Max_Rxjh_HP
                                          };
                                          class2.list_0.Add(item);
                                          long num5 = Power_Attack - (Power_Attack / 3L);
                                          if (num5 <= 0L)
                                          {
                                                num5 = 1L;
                                          }
                                          Random random = new Random();
                                          foreach (TBL_XWWL_NPC tbl_xwwl_npc2 in tbl_xwwl_npc.method_12(num4))
                                          {
                                                if (World.Version_switch != 0)
                                                {
                                                      num5 = random.Next(((int)num5) - 15, ((int)num5) + 15);
                                                }
                                                if (num5 < 0L)
                                                {
                                                      num5 = 1L;
                                                }
                                                NHAN_VAT_CONG_KICH nhan_vat_cong_kich2 = new NHAN_VAT_CONG_KICH(tbl_xwwl_npc2.FLD_INDEX, Skill_ID, num5, Attack_Type)
                                                {
                                                      long_0 = tbl_xwwl_npc2.Max_Rxjh_HP
                                                };
                                                class2.list_0.Add(nhan_vat_cong_kich2);
                                          }
                                          if (base.NHAN_VAT_LINH_THU != null)
                                          {
                                                if (base.NHAN_VAT_LINH_THU.FLD_JOB_LEVEL == 1)
                                                {
                                                      num2 = (base.NHAN_VAT_LINH_THU.FLD_CONG_KICH + base.NHAN_VAT_LINH_THU.FLD_TRUNG_MUC_TIEU) + base.NHAN_VAT_LINH_THU.class79_0[1].FLD_AT;
                                                }
                                                else if (base.NHAN_VAT_LINH_THU.FLD_JOB_LEVEL == 2)
                                                {
                                                      num2 = (base.NHAN_VAT_LINH_THU.FLD_CONG_KICH + base.NHAN_VAT_LINH_THU.FLD_TRUNG_MUC_TIEU) + base.NHAN_VAT_LINH_THU.class79_0[2].FLD_AT;
                                                }
                                                else if (base.NHAN_VAT_LINH_THU.FLD_JOB_LEVEL == 3)
                                                {
                                                      num2 = (base.NHAN_VAT_LINH_THU.FLD_CONG_KICH + base.NHAN_VAT_LINH_THU.FLD_TRUNG_MUC_TIEU) + base.NHAN_VAT_LINH_THU.class79_0[2].FLD_AT;
                                                }
                                                else
                                                {
                                                      num2 = base.NHAN_VAT_LINH_THU.FLD_CONG_KICH + base.NHAN_VAT_LINH_THU.FLD_TRUNG_MUC_TIEU;
                                                }
                                          }
                                          this.GUI_DI_QUAN_CONG_CONG_KICH_SO_LIEU_2(Playe, class2.list_0, Target_ID, Skill_ID, (int)Power_Attack, Attack_Type, num2);
                                    }
                                    else
                                    {
                                          if (base.NHAN_VAT_LINH_THU != null)
                                          {
                                                if (base.NHAN_VAT_LINH_THU.FLD_JOB_LEVEL == 1)
                                                {
                                                      num2 = (base.NHAN_VAT_LINH_THU.FLD_CONG_KICH + base.NHAN_VAT_LINH_THU.FLD_TRUNG_MUC_TIEU) + base.NHAN_VAT_LINH_THU.class79_0[1].FLD_AT;
                                                }
                                                else if (base.NHAN_VAT_LINH_THU.FLD_JOB_LEVEL == 2)
                                                {
                                                      num2 = (base.NHAN_VAT_LINH_THU.FLD_CONG_KICH + base.NHAN_VAT_LINH_THU.FLD_TRUNG_MUC_TIEU) + base.NHAN_VAT_LINH_THU.class79_0[2].FLD_AT;
                                                }
                                                else if (base.NHAN_VAT_LINH_THU.FLD_JOB_LEVEL == 3)
                                                {
                                                      num2 = (base.NHAN_VAT_LINH_THU.FLD_CONG_KICH + base.NHAN_VAT_LINH_THU.FLD_TRUNG_MUC_TIEU) + base.NHAN_VAT_LINH_THU.class79_0[2].FLD_AT;
                                                }
                                                else
                                                {
                                                      num2 = base.NHAN_VAT_LINH_THU.FLD_CONG_KICH + base.NHAN_VAT_LINH_THU.FLD_TRUNG_MUC_TIEU;
                                                }
                                          }
                                          class2 = new AttackClass(Target_ID, Skill_ID, Power_Attack, Attack_Type);
                                          this.CHAR_SENT_DATA_ATTACK(Playe, Target_ID, Skill_ID, (int)Power_Attack, Attack_Type, (int)Target_HP, num2);
                                    }
                                    base.CONG_KICH_DANH_SACH.Clear();
                                    using (@lock = new Lock(base.CONG_KICH_DANH_SACH, "CONG_KICH_DANH_SACH"))
                                    {
                                          base.CONG_KICH_DANH_SACH.Add(class2);
                                    }
                                    if (World.Cong_kich_Xac_nhan_hinh_thuc != 2)
                                    {
                                          try
                                          {
                                                this.int_124 = Target_ID;
                                                this.int_125 = Playe.UserSessionID;
                                                this.int_126 = Attack_Type;
                                                if (this.timer_2 != null)
                                                {
                                                      this.timer_2.Enabled = false;
                                                      this.timer_2.Close();
                                                      this.timer_2.Dispose();
                                                      this.timer_2 = null;
                                                }
                                                this.timer_2 = new Timer((double)tbl_xwwl_kongfu.FLD_TIME);
                                                this.timer_2.Elapsed += new ElapsedEventHandler(this.e5);
                                                this.timer_2.Enabled = true;
                                                this.timer_2.AutoReset = false;
                                          }
                                          catch
                                          {
                                                if (this.timer_2 != null)
                                                {
                                                      this.timer_2.Enabled = false;
                                                      this.timer_2.Close();
                                                      this.timer_2.Dispose();
                                                      this.timer_2 = null;
                                                }
                                                base.CONG_KICH_DANH_SACH.Clear();
                                          }
                                    }
                              }
                              else
                              {
                                    if (base.NHAN_VAT_LINH_THU != null)
                                    {
                                          if (base.NHAN_VAT_LINH_THU.FLD_JOB_LEVEL == 1)
                                          {
                                                num2 = (base.NHAN_VAT_LINH_THU.FLD_CONG_KICH + base.NHAN_VAT_LINH_THU.FLD_TRUNG_MUC_TIEU) + base.NHAN_VAT_LINH_THU.class79_0[1].FLD_AT;
                                          }
                                          else if (base.NHAN_VAT_LINH_THU.FLD_JOB_LEVEL == 2)
                                          {
                                                num2 = (base.NHAN_VAT_LINH_THU.FLD_CONG_KICH + base.NHAN_VAT_LINH_THU.FLD_TRUNG_MUC_TIEU) + base.NHAN_VAT_LINH_THU.class79_0[2].FLD_AT;
                                          }
                                          else if (base.NHAN_VAT_LINH_THU.FLD_JOB_LEVEL == 3)
                                          {
                                                num2 = (base.NHAN_VAT_LINH_THU.FLD_CONG_KICH + base.NHAN_VAT_LINH_THU.FLD_TRUNG_MUC_TIEU) + base.NHAN_VAT_LINH_THU.class79_0[2].FLD_AT;
                                          }
                                          else
                                          {
                                                num2 = base.NHAN_VAT_LINH_THU.FLD_CONG_KICH + base.NHAN_VAT_LINH_THU.FLD_TRUNG_MUC_TIEU;
                                          }
                                    }
                                    this.CHAR_SENT_DATA_ATTACK(Playe, Target_ID, Skill_ID, (int)Power_Attack, Attack_Type, (int)Target_HP, num2);
                                    using (@lock = new Lock(base.CONG_KICH_DANH_SACH, "CONG_KICH_DANH_SACH"))
                                    {
                                          base.CONG_KICH_DANH_SACH.Add(new AttackClass(Target_ID, Skill_ID, Power_Attack, Attack_Type));
                                    }
                                    if (World.Cong_kich_Xac_nhan_hinh_thuc != 2)
                                    {
                                          try
                                          {
                                                this.int_124 = Target_ID;
                                                this.int_125 = Playe.UserSessionID;
                                                this.int_126 = Attack_Type;
                                                if (this.timer_2 != null)
                                                {
                                                      this.timer_2.Enabled = false;
                                                      this.timer_2.Close();
                                                      this.timer_2.Dispose();
                                                      this.timer_2 = null;
                                                }
                                                this.timer_2 = new Timer((double)tbl_xwwl_kongfu.FLD_TIME);
                                                this.timer_2.Elapsed += new ElapsedEventHandler(this.e5);
                                                this.timer_2.Enabled = true;
                                                this.timer_2.AutoReset = false;
                                          }
                                          catch
                                          {
                                                if (this.timer_2 != null)
                                                {
                                                      this.timer_2.Enabled = false;
                                                      this.timer_2.Close();
                                                      this.timer_2.Dispose();
                                                      this.timer_2 = null;
                                                }
                                                base.CONG_KICH_DANH_SACH.Clear();
                                          }
                                    }
                              }
                              return;
                        }
                        if (base.NHAN_VAT_LINH_THU != null)
                        {
                              num2 = base.NHAN_VAT_LINH_THU.FLD_CONG_KICH + base.NHAN_VAT_LINH_THU.FLD_TRUNG_MUC_TIEU;
                        }
                        this.CHAR_SENT_DATA_ATTACK(Playe, Target_ID, Skill_ID, (int)Power_Attack, Attack_Type, (int)Target_HP, num2);
                        base.CONG_KICH_DANH_SACH.Clear();
                        using (@lock = new Lock(base.CONG_KICH_DANH_SACH, "CONG_KICH_DANH_SACH"))
                        {
                              base.CONG_KICH_DANH_SACH.Add(new AttackClass(Target_ID, Skill_ID, Power_Attack, Attack_Type));
                        }
                        if (Playe.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].GetItem_ID != 0)
                        {
                              switch (Playe.Player_Job)
                              {
                                    case 3:
                                          num = 800;
                                          goto Label_0851;

                                    case 4:
                                          num = 900;
                                          goto Label_0851;

                                    case 5:
                                          num = 800;
                                          goto Label_0851;

                                    case 7:
                                          num = 800;
                                          goto Label_0851;
                              }
                              num = 800;
                        }
                        else
                        {
                              num = 800;
                        }
                        Label_0851:
                        if (World.Cong_kich_Xac_nhan_hinh_thuc != 2)
                        {
                              try
                              {
                                    this.int_124 = Target_ID;
                                    this.int_125 = Playe.UserSessionID;
                                    this.int_126 = Attack_Type;
                                    if (this.timer_2 != null)
                                    {
                                          this.timer_2.Enabled = false;
                                          this.timer_2.Close();
                                          this.timer_2.Dispose();
                                          this.timer_2 = null;
                                    }
                                    this.timer_2 = new Timer((double)num);
                                    this.timer_2.Elapsed += new ElapsedEventHandler(this.e5);
                                    this.timer_2.Enabled = true;
                                    this.timer_2.AutoReset = false;
                              }
                              catch
                              {
                                    if (this.timer_2 != null)
                                    {
                                          this.timer_2.Enabled = false;
                                          this.timer_2.Close();
                                          this.timer_2.Dispose();
                                          this.timer_2 = null;
                                    }
                                    base.CONG_KICH_DANH_SACH.Clear();
                              }
                        }
                  }
                  catch (Exception exception)
                  {
                        base.CONG_KICH_DANH_SACH.Clear();
                        if (this.timer_2 != null)
                        {
                              this.timer_2.Enabled = false;
                              this.timer_2.Close();
                              this.timer_2.Dispose();
                              this.timer_2 = null;
                        }
                        Form1.WriteLine(1, string.Concat(new object[] { "攻击计算完成", base.UserSessionID, "|", this.ToString(), " ", exception.Message }));
                  }
            }

            public void CONG_KICH_TINH_TOAN_HOAN_THANH2(Players class15_0, int int_128, int int_129, long long_17, int int_130, long long_18)
            {
                  if (World.jlMsg == 1)
                  {
                        Form1.WriteLine(0, "Players_攻击计算完成");
                  }
                  try
                  {
                        TBL_XWWL_KONGFU tbl_xwwl_kongfu;
                        int num;
                        Lock @lock;
                        int num2 = -1;
                        if (World.TBL_KONGFU.TryGetValue(int_129, out tbl_xwwl_kongfu))
                        {
                              if (int_128 >= 0x2710)
                              {
                                    AttackClass class2;
                                    if (tbl_xwwl_kongfu.FLD_TYPE == 4)
                                    {
                                          double num3;
                                          int num4 = 0;
                                          num4 = tbl_xwwl_kongfu.FLD_CONG_KICH_SO_LUONG;
                                          class2 = new AttackClass(int_128, int_129, long_17, int_130, tbl_xwwl_kongfu.FLD_TYPE);
                                          if ((base.Player_Job != 1) && (base.Player_Job != 8))
                                          {
                                                num3 = long_17;
                                          }
                                          else
                                          {
                                                num3 = long_17 * (1.0 + base.Dao_khach_Quan_cong_uy_luc);
                                          }
                                          if ((class15_0.Player_Job == 7) && class15_0.Add_Status_List.ContainsKey(0xdbd33))
                                          {
                                                num4 = tbl_xwwl_kongfu.FLD_CONG_KICH_SO_LUONG + ((int)(class15_0.Cam_su_Cam_thanh_qua_nguyet * (0.12 * (1.0 + (class15_0.Cam_su_thang_thien_3_khi_cong_Tu_da_thu_ca * 0.02)))));
                                                num3 *= 1.0 + (class15_0.Cam_su_Cam_thanh_qua_nguyet * (0.005 * (1.0 + (class15_0.Cam_su_thang_thien_3_khi_cong_Tu_da_thu_ca * 0.02))));
                                                if (new Random().Next(0, 0x8d) <= (((int)(class15_0.Cam_su_Loan_phuong_hoa_minh * 100.0)) + ((int)(class15_0.Cam_su_thang_thien_1_khi_cong_Phi_hoa_diem_thuy * 0.2))))
                                                {
                                                      num3 *= 1.5 + (class15_0.Cam_su_thang_thien_1_khi_cong_Phi_hoa_diem_thuy * 0.02);
                                                      num4 *= (int)(1.5 + (class15_0.Cam_su_thang_thien_1_khi_cong_Phi_hoa_diem_thuy * 0.02));
                                                      base.Show_Char(int_128, 0x188);
                                                }
                                          }
                                          long_17 = (long)num3;
                                          TBL_XWWL_NPC tbl_xwwl_npc = MapClass.smethod_2(base.CharacterCoords_Map, int_128);
                                          if (tbl_xwwl_npc == null)
                                          {
                                                return;
                                          }
                                          NHAN_VAT_CONG_KICH item = new NHAN_VAT_CONG_KICH(int_128, int_129, long_17, int_130)
                                          {
                                                long_0 = tbl_xwwl_npc.Max_Rxjh_HP
                                          };
                                          class2.list_0.Add(item);
                                          long num5 = long_17 - (long_17 / 3L);
                                          if (num5 <= 0L)
                                          {
                                                num5 = 1L;
                                          }
                                          Random random = new Random();
                                          foreach (TBL_XWWL_NPC tbl_xwwl_npc2 in tbl_xwwl_npc.method_12(num4))
                                          {
                                                if (World.Version_switch != 0)
                                                {
                                                      num5 = random.Next(((int)num5) - 15, ((int)num5) + 15);
                                                }
                                                if (num5 < 0L)
                                                {
                                                      num5 = 1L;
                                                }
                                                NHAN_VAT_CONG_KICH nhan_vat_cong_kich2 = new NHAN_VAT_CONG_KICH(tbl_xwwl_npc2.FLD_INDEX, int_129, num5, int_130)
                                                {
                                                      long_0 = tbl_xwwl_npc2.Max_Rxjh_HP
                                                };
                                                class2.list_0.Add(nhan_vat_cong_kich2);
                                          }
                                          if (base.NHAN_VAT_LINH_THU != null)
                                          {
                                                if (base.NHAN_VAT_LINH_THU.FLD_JOB_LEVEL == 1)
                                                {
                                                      num2 = (base.NHAN_VAT_LINH_THU.FLD_CONG_KICH + base.NHAN_VAT_LINH_THU.FLD_TRUNG_MUC_TIEU) + base.NHAN_VAT_LINH_THU.class79_0[1].FLD_AT;
                                                }
                                                else if (base.NHAN_VAT_LINH_THU.FLD_JOB_LEVEL == 2)
                                                {
                                                      num2 = (base.NHAN_VAT_LINH_THU.FLD_CONG_KICH + base.NHAN_VAT_LINH_THU.FLD_TRUNG_MUC_TIEU) + base.NHAN_VAT_LINH_THU.class79_0[2].FLD_AT;
                                                }
                                                else if (base.NHAN_VAT_LINH_THU.FLD_JOB_LEVEL == 3)
                                                {
                                                      num2 = (base.NHAN_VAT_LINH_THU.FLD_CONG_KICH + base.NHAN_VAT_LINH_THU.FLD_TRUNG_MUC_TIEU) + base.NHAN_VAT_LINH_THU.class79_0[2].FLD_AT;
                                                }
                                                else
                                                {
                                                      num2 = base.NHAN_VAT_LINH_THU.FLD_CONG_KICH + base.NHAN_VAT_LINH_THU.FLD_TRUNG_MUC_TIEU;
                                                }
                                          }
                                          this.GUI_DI_QUAN_CONG_CONG_KICH_SO_LIEU_2(class15_0, class2.list_0, int_128, int_129, (int)long_17, int_130, num2);
                                    }
                                    else
                                    {
                                          if (base.NHAN_VAT_LINH_THU != null)
                                          {
                                                if (base.NHAN_VAT_LINH_THU.FLD_JOB_LEVEL == 1)
                                                {
                                                      num2 = (base.NHAN_VAT_LINH_THU.FLD_CONG_KICH + base.NHAN_VAT_LINH_THU.FLD_TRUNG_MUC_TIEU) + base.NHAN_VAT_LINH_THU.class79_0[1].FLD_AT;
                                                }
                                                else if (base.NHAN_VAT_LINH_THU.FLD_JOB_LEVEL == 2)
                                                {
                                                      num2 = (base.NHAN_VAT_LINH_THU.FLD_CONG_KICH + base.NHAN_VAT_LINH_THU.FLD_TRUNG_MUC_TIEU) + base.NHAN_VAT_LINH_THU.class79_0[2].FLD_AT;
                                                }
                                                else if (base.NHAN_VAT_LINH_THU.FLD_JOB_LEVEL == 3)
                                                {
                                                      num2 = (base.NHAN_VAT_LINH_THU.FLD_CONG_KICH + base.NHAN_VAT_LINH_THU.FLD_TRUNG_MUC_TIEU) + base.NHAN_VAT_LINH_THU.class79_0[2].FLD_AT;
                                                }
                                                else
                                                {
                                                      num2 = base.NHAN_VAT_LINH_THU.FLD_CONG_KICH + base.NHAN_VAT_LINH_THU.FLD_TRUNG_MUC_TIEU;
                                                }
                                          }
                                          class2 = new AttackClass(int_128, int_129, long_17, int_130);
                                          this.CHAR_SENT_DATA_ATTACK(class15_0, int_128, int_129, (int)long_17, int_130, (int)long_18, num2);
                                    }
                                    base.CONG_KICH_DANH_SACH.Clear();
                                    using (@lock = new Lock(base.CONG_KICH_DANH_SACH, "CONG_KICH_DANH_SACH"))
                                    {
                                          base.CONG_KICH_DANH_SACH.Add(class2);
                                    }
                                    if (World.Cong_kich_Xac_nhan_hinh_thuc != 2)
                                    {
                                          try
                                          {
                                                this.int_124 = int_128;
                                                this.int_125 = class15_0.UserSessionID;
                                                this.int_126 = int_130;
                                                if (this.timer_2 != null)
                                                {
                                                      this.timer_2.Enabled = false;
                                                      this.timer_2.Close();
                                                      this.timer_2.Dispose();
                                                      this.timer_2 = null;
                                                }
                                                this.timer_2 = new Timer((double)tbl_xwwl_kongfu.FLD_TIME);
                                                this.timer_2.Elapsed += new ElapsedEventHandler(this.e5);
                                                this.timer_2.Enabled = true;
                                                this.timer_2.AutoReset = false;
                                          }
                                          catch
                                          {
                                                if (this.timer_2 != null)
                                                {
                                                      this.timer_2.Enabled = false;
                                                      this.timer_2.Close();
                                                      this.timer_2.Dispose();
                                                      this.timer_2 = null;
                                                }
                                                base.CONG_KICH_DANH_SACH.Clear();
                                          }
                                    }
                              }
                              else
                              {
                                    if (base.NHAN_VAT_LINH_THU != null)
                                    {
                                          if (base.NHAN_VAT_LINH_THU.FLD_JOB_LEVEL == 1)
                                          {
                                                num2 = (base.NHAN_VAT_LINH_THU.FLD_CONG_KICH + base.NHAN_VAT_LINH_THU.FLD_TRUNG_MUC_TIEU) + base.NHAN_VAT_LINH_THU.class79_0[1].FLD_AT;
                                          }
                                          else if (base.NHAN_VAT_LINH_THU.FLD_JOB_LEVEL == 2)
                                          {
                                                num2 = (base.NHAN_VAT_LINH_THU.FLD_CONG_KICH + base.NHAN_VAT_LINH_THU.FLD_TRUNG_MUC_TIEU) + base.NHAN_VAT_LINH_THU.class79_0[2].FLD_AT;
                                          }
                                          else if (base.NHAN_VAT_LINH_THU.FLD_JOB_LEVEL == 3)
                                          {
                                                num2 = (base.NHAN_VAT_LINH_THU.FLD_CONG_KICH + base.NHAN_VAT_LINH_THU.FLD_TRUNG_MUC_TIEU) + base.NHAN_VAT_LINH_THU.class79_0[2].FLD_AT;
                                          }
                                          else
                                          {
                                                num2 = base.NHAN_VAT_LINH_THU.FLD_CONG_KICH + base.NHAN_VAT_LINH_THU.FLD_TRUNG_MUC_TIEU;
                                          }
                                    }
                                    this.CHAR_SENT_DATA_ATTACK(class15_0, int_128, int_129, (int)long_17, int_130, (int)long_18, num2);
                                    using (@lock = new Lock(base.CONG_KICH_DANH_SACH, "CONG_KICH_DANH_SACH"))
                                    {
                                          base.CONG_KICH_DANH_SACH.Add(new AttackClass(int_128, int_129, long_17, int_130));
                                    }
                                    if (World.Cong_kich_Xac_nhan_hinh_thuc != 2)
                                    {
                                          try
                                          {
                                                this.int_124 = int_128;
                                                this.int_125 = class15_0.UserSessionID;
                                                this.int_126 = int_130;
                                                if (this.timer_2 != null)
                                                {
                                                      this.timer_2.Enabled = false;
                                                      this.timer_2.Close();
                                                      this.timer_2.Dispose();
                                                      this.timer_2 = null;
                                                }
                                                this.timer_2 = new Timer((double)tbl_xwwl_kongfu.FLD_TIME);
                                                this.timer_2.Elapsed += new ElapsedEventHandler(this.e5);
                                                this.timer_2.Enabled = true;
                                                this.timer_2.AutoReset = false;
                                          }
                                          catch
                                          {
                                                if (this.timer_2 != null)
                                                {
                                                      this.timer_2.Enabled = false;
                                                      this.timer_2.Close();
                                                      this.timer_2.Dispose();
                                                      this.timer_2 = null;
                                                }
                                                base.CONG_KICH_DANH_SACH.Clear();
                                          }
                                    }
                              }
                              return;
                        }
                        if (base.NHAN_VAT_LINH_THU != null)
                        {
                              num2 = base.NHAN_VAT_LINH_THU.FLD_CONG_KICH + base.NHAN_VAT_LINH_THU.FLD_TRUNG_MUC_TIEU;
                        }
                        this.CHAR_SENT_DATA_ATTACK(class15_0, int_128, int_129, (int)long_17, int_130, (int)long_18, num2);
                        base.CONG_KICH_DANH_SACH.Clear();
                        using (@lock = new Lock(base.CONG_KICH_DANH_SACH, "CONG_KICH_DANH_SACH"))
                        {
                              base.CONG_KICH_DANH_SACH.Add(new AttackClass(int_128, int_129, long_17, int_130));
                        }
                        if (class15_0.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].GetItem_ID != 0)
                        {
                              switch (class15_0.Player_Job)
                              {
                                    case 3:
                                          num = 800;
                                          goto Label_0851;

                                    case 4:
                                          num = 900;
                                          goto Label_0851;

                                    case 5:
                                          num = 800;
                                          goto Label_0851;

                                    case 7:
                                          num = 800;
                                          goto Label_0851;
                              }
                              num = 800;
                        }
                        else
                        {
                              num = 800;
                        }
                        Label_0851:
                        if (World.Version_switch != 2)
                        {
                              try
                              {
                                    this.int_124 = int_128;
                                    this.int_125 = class15_0.UserSessionID;
                                    this.int_126 = int_130;
                                    if (this.timer_2 != null)
                                    {
                                          this.timer_2.Enabled = false;
                                          this.timer_2.Close();
                                          this.timer_2.Dispose();
                                          this.timer_2 = null;
                                    }
                                    this.timer_2 = new Timer((double)num);
                                    this.timer_2.Elapsed += new ElapsedEventHandler(this.e5);
                                    this.timer_2.Enabled = true;
                                    this.timer_2.AutoReset = false;
                              }
                              catch
                              {
                                    if (this.timer_2 != null)
                                    {
                                          this.timer_2.Enabled = false;
                                          this.timer_2.Close();
                                          this.timer_2.Dispose();
                                          this.timer_2 = null;
                                    }
                                    base.CONG_KICH_DANH_SACH.Clear();
                              }
                        }
                  }
                  catch (Exception exception)
                  {
                        base.CONG_KICH_DANH_SACH.Clear();
                        if (this.timer_2 != null)
                        {
                              this.timer_2.Enabled = false;
                              this.timer_2.Close();
                              this.timer_2.Dispose();
                              this.timer_2 = null;
                        }
                        Form1.WriteLine(1, string.Concat(new object[] { "攻击计算完成", base.UserSessionID, "|", this.ToString(), " ", exception.Message }));
                  }
            }

            public void CreateCharacter(byte[] byte_5, int int_128)
            {
                  try
                  {
                        this.Packet_Modify(byte_5, int_128);
                        string str = "AA5513000000001500040001000000000000000000000055AA";
                        string str2 = "AA551300014F011500040004000000000000000000E06955AA";
                        byte[] dst = Converter.hexStringToByte("AA5513000000001500040000000000000000000000000055AA");
                        byte[] buffer2 = Converter.hexStringToByte(str);
                        byte[] buffer3 = Converter.hexStringToByte(str2);
                        byte[] bytes = new byte[20];
                        for (int i = 0; i < 20; i++)
                        {
                              if (byte_5[11 + i] == 0)
                              {
                                    break;
                              }
                              bytes[i] = byte_5[11 + i];
                        }
                        byte[] buffer5 = new byte[10];
                        for (int j = 0; j < 10; j++)
                        {
                              buffer5[j] = byte_5[0x1c + j];
                        }
                        string text1 = "0x" + Converter.smethod_24(buffer5);
                        string str3 = Encoding.Default.GetString(bytes).Trim();
                        int num = byte_5[0x1b];
                        if (World.Retro_mode_is_enabled != 0)
                        {
                              switch (num)
                              {
                                    case 4:
                                    case 6:
                                    case 7:
                                    case 8:
                                          Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, buffer3, 5, 2);
                                          if (base.Client != null)
                                          {
                                                base.Client.Send(buffer3, buffer3.Length);
                                          }
                                          return;
                              }
                        }
                        else if ((World.Long_line_mode_is_turned_on == 0) && (World.Poets_mode_is_turned_on != 0))
                        {
                              if (((num < 1) || (num > 10)) && (base.Client != null))
                              {
                                    base.Client.Dispose();
                              }
                        }
                        else if (((World.Long_line_mode_is_turned_on != 0) && (World.Poets_mode_is_turned_on == 0)) && ((num < 1) || (num > 6)))
                        {
                              Form1.WriteLine(100, "无法创建乐师[" + base.Userid + "]-[" + base.Client.ToString() + "]");
                              if (base.Client != null)
                              {
                                    base.Client.Dispose();
                              }
                        }
                        str3 = str3.Replace("\0", "").Trim();
                        if (str3 == "")
                        {
                              Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, dst, 5, 2);
                              if (base.Client != null)
                              {
                                    base.Client.Send(dst, dst.Length);
                              }
                        }
                        if (RxjhClass.SetUserName(base.Userid, str3, num, buffer5, base.PHAN_KHU_ID) != 1)
                        {
                              Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, dst, 5, 2);
                              if (base.Client != null)
                              {
                                    base.Client.Send(dst, dst.Length);
                              }
                        }
                        else
                        {
                              Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, buffer2, 5, 2);
                              if (base.Client != null)
                              {
                                    base.Client.Send(buffer2, buffer2.Length);
                              }
                        }
                  }
                  catch (Exception exception)
                  {
                        Form1.WriteLine(1, "连创建人物出错[" + base.Userid + "]-[" + base.Client.ToString() + "]" + exception.Message);
                  }
            }

            public void CreateGuildConfirm(byte[] byte_5, int int_128)
            {
                  try
                  {
                        this.Packet_Modify(byte_5, int_128);
                        byte[] dst = Converter.hexStringToByte("AA552100010000E4001200310000000000000000000000000000000300000000000000000055AA");
                        byte[] bytes = new byte[15];
                        for (int i = 0; i < 15; i++)
                        {
                              if (byte_5[11 + i] == 0)
                              {
                                    break;
                              }
                              bytes[i] = byte_5[11 + i];
                        }
                        string s = Encoding.Default.GetString(bytes).Replace("\0", "");
                        byte[] src = Encoding.Default.GetBytes(s);
                        Buffer.BlockCopy(src, 0, dst, 11, src.Length);
                        if (base.Player_FLD_LEVEL < 60)
                        {
                              base.GameMessage("60 your level is not enough, you can not create sects", 9, "system hint");
                        }
                        else if (base.Player_Money < 0xf4240L)
                        {
                              base.GameMessage("Your medal is not enough one million, you can not create sects", 9, "system hint");
                        }
                        else
                        {
                              if (RxjhClass.EXE_XWWL_SELECT_Guild_DATA(s) == 1)
                              {
                                    Buffer.BlockCopy(BitConverter.GetBytes(1), 0, dst, 0x1b, 1);
                              }
                              else
                              {
                                    Buffer.BlockCopy(BitConverter.GetBytes(0x63), 0, dst, 0x1b, 1);
                              }
                              Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, dst, 5, 2);
                              base.Client.Send(dst, dst.Length);
                        }
                  }
                  catch (Exception exception)
                  {
                        Form1.WriteLine(1, "Create martial Confirm the error![" + base.Userid + "]-[" + base.UserName + "]" + exception.Message);
                  }
            }

            public void DANG_KY_CHIEU_LIEN_HOAN()
            {
                  byte[] dst = Converter.hexStringToByte("AA553300002C01C600240002000000E5EA0D0031BD0D0031BD0D0031BD0D00E6EA0D0031BD0D0031BD0D0031BD0D0000000000000055AA");
                  Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, dst, 5, 2);
                  base.list_3.Clear();
                  for (int i = 0; i < 6; i++)
                  {
                        base.list_3.Add(0xdbd31);
                  }
                  if (base.Client != null)
                  {
                        base.Client.method_11(dst, dst.Length);
                  }
            }

            public void DANG_KY_CHIEU_LIEN_HOAN_2(byte[] byte_5, int int_128)
            {
                  byte[] dst = Converter.hexStringToByte("AA553300002C01C600240002000000E5EA0D00000000000000000000000000E6EA0D0000000000000000000000000000000000000055AA");
                  Buffer.BlockCopy(byte_5, 11, dst, 0x13, 12);
                  Buffer.BlockCopy(byte_5, 0x17, dst, 0x23, 12);
                  base.list_3.Clear();
                  int num = 0;
                  while (true)
                  {
                        if (num >= 6)
                        {
                              break;
                        }
                        byte[] buffer2 = new byte[4];
                        try
                        {
                              Buffer.BlockCopy(byte_5, (num * 4) + 11, buffer2, 0, 4);
                              if (BitConverter.ToInt32(buffer2, 0) != 0)
                              {
                                    base.list_3.Add(BitConverter.ToInt32(buffer2, 0));
                              }
                        }
                        catch
                        {
                        }
                        num++;
                  }
                  Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, dst, 5, 2);
                  if (base.Client != null)
                  {
                        base.Client.method_11(dst, dst.Length);
                  }
            }

            public void DANH_SACH_TRANH_THAI_TRONG()
            {
                  if (World.jlMsg == 1)
                  {
                        Form1.WriteLine(0, "Players_Clear additional status list");
                  }
                  if (base.Add_Status_List != null)
                  {
                        Queue queue = Queue.Synchronized(new Queue());
                        try
                        {
                              foreach (Additional_Sate_Class class2 in base.Add_Status_List.Values)
                              {
                                    queue.Enqueue(class2);
                              }
                              while (queue.Count > 0)
                              {
                                    if (World.jlMsg == 1)
                                    {
                                          Form1.WriteLine(0, "Clear additional status list");
                                    }
                                    Additional_Sate_Class class3 = (Additional_Sate_Class)queue.Dequeue();
                                    if (base.Add_Status_List != null)
                                    {
                                          base.Add_Status_List.Remove(class3.FLD_PID);
                                    }
                                    class3.THOI_GIAN_KET_THUC_SU_KIEN();
                                    class3.Dispose();
                              }
                        }
                        catch (Exception exception)
                        {
                              Form1.WriteLine(1, "Empty the list of additional state error![" + base.Userid + "]-[" + base.UserName + "]" + exception.Message);
                        }
                        finally
                        {
                              queue = null;
                        }
                  }
            }

            public void DANH_SACH_TRANH_THAI_TRONG_NEW()
            {
                  if (World.jlMsg == 1)
                  {
                        Form1.WriteLine(0, "Players_Clear additional state New listing");
                  }
                  if (base.threadSafeDictionary_3 != null)
                  {
                        Queue queue = Queue.Synchronized(new Queue());
                        try
                        {
                              foreach (THEM_VAO_TRANG_THAI_NEW them_vao_trang_thai_new in base.threadSafeDictionary_3.Values)
                              {
                                    queue.Enqueue(them_vao_trang_thai_new);
                              }
                              while (queue.Count > 0)
                              {
                                    if (World.jlMsg == 1)
                                    {
                                          Form1.WriteLine(0, "Clear additional state New listing");
                                    }
                                    THEM_VAO_TRANG_THAI_NEW them_vao_trang_thai_new2 = (THEM_VAO_TRANG_THAI_NEW)queue.Dequeue();
                                    if (base.threadSafeDictionary_3 != null)
                                    {
                                          base.threadSafeDictionary_3.Remove(them_vao_trang_thai_new2.FLD_PID);
                                    }
                                    them_vao_trang_thai_new2.Dispose();
                              }
                        }
                        catch (Exception exception)
                        {
                              Form1.WriteLine(1, "New list of additional state error![" + base.Userid + "]-[" + base.UserName + "]" + exception.Message);
                        }
                        finally
                        {
                              queue = null;
                        }
                  }
            }

            public void DANH_SACH_TRONG()
            {
                  if (World.jlMsg == 1)
                  {
                        Form1.WriteLine(0, "Players_Clear List");
                  }
                  try
                  {
                        if (this.threadSafeDictionary_5 != null)
                        {
                              using (IEnumerator<Players> enumerator = this.threadSafeDictionary_5.Values.GetEnumerator())
                              {
                                    while (enumerator.MoveNext())
                                    {
                                          enumerator.Current.threadSafeDictionary_5.Remove(base.UserSessionID);
                                    }
                              }
                              this.threadSafeDictionary_5.Clear();
                        }
                        if (base.threadSafeDictionary_0 != null)
                        {
                              using (IEnumerator<TBL_XWWL_NPC> enumerator2 = base.threadSafeDictionary_0.Values.GetEnumerator())
                              {
                                    while (enumerator2.MoveNext())
                                    {
                                          enumerator2.Current.method_1(this);
                                    }
                              }
                              base.threadSafeDictionary_0.Clear();
                        }
                        if (base.threadSafeDictionary_1 != null)
                        {
                              using (IEnumerator<MAT_DAT_ITEM_LOAI> enumerator3 = base.threadSafeDictionary_1.Values.GetEnumerator())
                              {
                                    while (enumerator3.MoveNext())
                                    {
                                          enumerator3.Current.threadSafeDictionary_0.Remove(base.UserSessionID);
                                    }
                              }
                              base.threadSafeDictionary_1.Clear();
                        }
                  }
                  catch (Exception exception)
                  {
                        Form1.WriteLine(1, "Empty list error![" + base.Userid + "]-[" + base.UserName + "]" + exception.Message);
                  }
            }

            private void DAO_CU_TO_HOP(byte[] byte_5, int int_128)
            {
                  int num5;
                  int num2 = BitConverter.ToInt32(byte_5, 15);
                  int num3 = BitConverter.ToInt32(byte_5, 0x17);
                  switch (num2)
                  {
                        case 0x2faf082f:
                              {
                                    int num9 = 0;
                                    int num10 = 0;
                                    for (int i = 0; i < 0x24; i++)
                                    {
                                          if (BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[i].VAT_PHAM_ID, 0) == 0x2faf082e)
                                          {
                                                num9 += BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[i].VAT_PHAM_SO_LUONG, 0);
                                          }
                                          else if ((BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[i].VAT_PHAM_ID, 0) == 0x3b9acd03) && (BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[i].VAT_PHAM_SO_LUONG, 0) >= (10 * num3)))
                                          {
                                                num10 = 1;
                                          }
                                    }
                                    if ((num9 >= (5 * num3)) && (num10 != 0))
                                    {
                                          if (base.NHAN_TUI_TRONG_SO_LUONG() < num3)
                                          {
                                                this.DAO_CU_TO_HOP_NHAC_NHO(4, num2, num3);
                                                return;
                                          }
                                          num9 = 5 * num3;
                                          for (int j = 0; j < 0x24; j++)
                                          {
                                                if (BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[j].VAT_PHAM_ID, 0) == 0x2faf082e)
                                                {
                                                      if (num9 > 0)
                                                      {
                                                            this.LAM_GIAM_DI_VAT_PHAM(j, 1);
                                                            num9--;
                                                      }
                                                }
                                                else if (BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[j].VAT_PHAM_ID, 0) == 0x3b9acd03)
                                                {
                                                      this.LAM_GIAM_DI_VAT_PHAM(j, 10 * num3);
                                                }
                                          }
                                          Random random = new Random(DateTime.Now.Millisecond);
                                          for (int k = 0; k < 100; k++)
                                          {
                                                Console.WriteLine(random.Next(0x17, 0x34));
                                          }
                                          for (int m = 0; m < num3; m++)
                                          {
                                                int num15 = base.DUOC_KIEN_HANG_RONG(this);
                                                byte[] bytes = BitConverter.GetBytes(RxjhClass.GetDBItmeId());
                                                byte[] dst = new byte[0x38];
                                                Buffer.BlockCopy(BitConverter.GetBytes(random.Next(0x17, 0x34)), 0, dst, 0, 4);
                                                this.TANG_CUONG_VAT_PHAM_2(bytes, BitConverter.GetBytes(num2), num15, BitConverter.GetBytes(1), dst);
                                          }
                                          this.DAO_CU_TO_HOP_NHAC_NHO(1, num2, num3);
                                          return;
                                    }
                                    this.DAO_CU_TO_HOP_NHAC_NHO(3, num2, num3);
                                    return;
                              }
                        case 0x3b9acd04:
                              {
                                    int num = 0;
                                    for (int n = 0; n < 0x24; n++)
                                    {
                                          if ((BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[n].VAT_PHAM_ID, 0) == 0x3b9acd03) && (BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[n].VAT_PHAM_SO_LUONG, 0) >= (3 * num3)))
                                          {
                                                num = 1;
                                                break;
                                          }
                                    }
                                    if (num == 0)
                                    {
                                          this.DAO_CU_TO_HOP_NHAC_NHO(3, num2, num3);
                                    }
                                    else
                                    {
                                          int num16 = base.DUOC_KIEN_HANG_RONG(this);
                                          if (num16 == -1)
                                          {
                                                this.DAO_CU_TO_HOP_NHAC_NHO(4, num2, num3);
                                          }
                                          else
                                          {
                                                for (int num17 = 0; num17 < 0x24; num17++)
                                                {
                                                      if (BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[num17].VAT_PHAM_ID, 0) == 0x3b9acd03)
                                                      {
                                                            this.LAM_GIAM_DI_VAT_PHAM(num17, 3 * num3);
                                                      }
                                                }
                                                byte[] buffer4 = BitConverter.GetBytes(RxjhClass.GetDBItmeId());
                                                this.TANG_CUONG_VAT_PHAM_2(buffer4, BitConverter.GetBytes(num2), num16, BitConverter.GetBytes(num3), new byte[0x38]);
                                                this.DAO_CU_TO_HOP_NHAC_NHO(1, num2, num3);
                                          }
                                    }
                                    return;
                              }
                        default:
                              if (num2 != 0x3b9acd05)
                              {
                                    return;
                              }
                              num5 = 0;
                              for (int num6 = 0; num6 < 0x24; num6++)
                              {
                                    if ((BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[num6].VAT_PHAM_ID, 0) == 0x3b9acd04) && (BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[num6].VAT_PHAM_SO_LUONG, 0) >= (2 * num3)))
                                    {
                                          num5 = 1;
                                          break;
                                    }
                              }
                              break;
                  }
                  if (num5 == 0)
                  {
                        this.DAO_CU_TO_HOP_NHAC_NHO(3, num2, num3);
                  }
                  else
                  {
                        int num7 = base.DUOC_KIEN_HANG_RONG(this);
                        if (num7 == -1)
                        {
                              this.DAO_CU_TO_HOP_NHAC_NHO(4, num2, num3);
                        }
                        else
                        {
                              for (int num8 = 0; num8 < 0x24; num8++)
                              {
                                    if (BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[num8].VAT_PHAM_ID, 0) == 0x3b9acd04)
                                    {
                                          this.LAM_GIAM_DI_VAT_PHAM(num8, 2 * num3);
                                    }
                              }
                              byte[] buffer = BitConverter.GetBytes(RxjhClass.GetDBItmeId());
                              this.TANG_CUONG_VAT_PHAM_2(buffer, BitConverter.GetBytes(num2), num7, BitConverter.GetBytes(num3), new byte[0x38]);
                              this.DAO_CU_TO_HOP_NHAC_NHO(1, num2, num3);
                        }
                  }
            }

            private void DAO_CU_TO_HOP_NHAC_NHO(int int_128, int int_129, int int_130)
            {
                  PacketData data = new PacketData();
                  data.Write2(11);
                  data.Write2(int_128);
                  data.method_8((long)int_129);
                  data.Write4(int_130);
                  if (base.Client != null)
                  {
                        base.Client.method_4(data, 0x319, base.UserSessionID);
                  }
            }

            public void Dead()
            {
                  try
                  {
                        if (World.jlMsg == 1)
                        {
                              Form1.WriteLine(0, "Players_死亡");
                        }
                        if (base.NHAN_VAT_LINH_THU != null)
                        {
                              base.NHAN_VAT_LINH_THU.method_1();
                              this.Method_SpPetMsgOpen(1, 1);
                              base.method_91(this, this);
                              base.NHAN_VAT_LINH_THU.Dispose();
                              base.NHAN_VAT_LINH_THU = null;
                              base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[14].bool_0 = false;
                        }
                        this.TU_VONG_CAM_TAN_CONG_NGUOI_CHOI();
                        base.CONG_KICH_DANH_SACH.Clear();
                        base.PlayerIsDead = true;
                        this.DI_THUONG_TRANG_THAI_DANH_SACH();
                        if ((base.CharacterCoords_Map != 0x1b59) && (base.CharacterCoords_Map == 0x1bbd))
                        {
                              if (World.class11_0 != null)
                              {
                                    if (World.class11_0.class47_0.int_0 == base.Bang_phai_Id)
                                    {
                                          if (World.class11_0.class47_0.dictionary_0.ContainsKey(base.UserSessionID))
                                          {
                                                World.class11_0.int_0--;
                                                this.Move(-105f, -105f, 15f, 0x1bbd);
                                          }
                                    }
                                    else if ((World.class11_0.class47_1.int_0 == base.Bang_phai_Id) && World.class11_0.class47_1.dictionary_0.ContainsKey(base.UserSessionID))
                                    {
                                          World.class11_0.int_1--;
                                          this.Move(107f, 107f, 15f, 0x1bbd);
                                    }
                              }
                              base.int_12 = 1;
                              base.NHAN_VAT_HP = base.NHAN_VAT_LON_NHAT_HP;
                              this.UpdateHP_MP_SP();
                              base.PlayerIsDead = false;
                        }
                        else if (base.CharacterCoords_Map == 0x321)
                        {
                              if (base.Evil_mode == 1)
                              {
                                    this.Move(0f, -232f, 15f, 0x321);
                                    base.SendCountdown(4, 1, 0);
                              }
                              else
                              {
                                    this.Move(0f, 228f, 15f, 0x321);
                                    base.SendCountdown(4, 1, 0);
                              }
                        }
                        else
                        {
                              base.PlayerIsDead = true;
                              TBL_XWWL_MAP tbl_xwwl_map = new TBL_XWWL_MAP(base.CharacterCoords_X, base.CharacterCoords_Y, base.CharacterCoords_Z, base.CharacterCoords_Map);
                              using (new Lock(base.hashtable_0, "土灵符坐标"))
                              {
                                    if (base.hashtable_0.ContainsKey(2))
                                    {
                                          base.hashtable_0.Remove(2);
                                    }
                                    if (!base.hashtable_0.ContainsKey(2))
                                    {
                                          base.hashtable_0.Add(2, tbl_xwwl_map);
                                    }
                              }
                              using (PacketData data = new PacketData())
                              {
                                    if (((!base.dictionary_3.ContainsKey(0x3c14dc1b) && !base.dictionary_3.ContainsKey(0x3c14dc1c)) && (!base.dictionary_3.ContainsKey(0x3c14dc1d) && !base.dictionary_3.ContainsKey(0x3c14dc3f))) && (!base.dictionary_3.ContainsKey(0x3c14dd38) && !base.dictionary_3.ContainsKey(0x3c14dc8d)))
                                    {
                                          data.method_8(0L);
                                    }
                                    else
                                    {
                                          data.method_8(10L);
                                    }
                                    base.Client.method_5(data, 0x8800, base.UserSessionID, 0);
                                    this.vmethod_2(data, 0x8800, base.UserSessionID, 0);
                              }
                        }
                  }
                  catch (Exception exception)
                  {
                        Form1.WriteLine(1, "人物死亡 出错：" + exception);
                  }
            }


            //캐릭터 삭제
            public void DelCharacter(byte[] data, int length)
            {
                  //AA554300012C011E003400000000002C0100000100000063346361343233386130623932333832306463633530396136663735383439620000000000000000000000000000000055AA
                  string str;
                  this.Packet_Modify(data, length);
                  string str2 = "AA551700010F001F0008000100000000000000000000000000B11855AA";
                  //string str2 = "AA551700000000000000000000000000000000000000000000B11855AA";
                  byte[] dst = Converter.hexStringToByte("AA5517000136001F0008006300000009000000000000000000811855AA");
                  byte[] buffer2 = Converter.hexStringToByte(str2);
                  int key = data[0x13];
                  if (!base.allChars.TryGetValue(key, out str))
                  {                       

                        if (base.Client != null)
                        {
                              base.Client.Dispose();
                        }
                  }
                  else
                  {
                        Form1.WriteLine(1, "DelCharacter：" + str);
                        byte[] buffer3 = new byte[0x20];
                        Buffer.BlockCopy(data, 0x17, buffer3, 0, buffer3.Length);
                        string str3 = Encoding.Default.GetString(buffer3).Trim();
                        string str4 = string.Format("select FLD_ANSWER from [TBL_ACCOUNT] where FLD_ID=@Userid", new object[0]);
                        SqlParameter[] parameterArray = new SqlParameter[] { SqlDBA.MakeInParam("@Userid", SqlDbType.VarChar, 30, base.Userid) };
                        string str5 = RxjhClass.md5(DBA.GetDBToDataTable(str4, parameterArray, "rxjhaccount").Rows[0]["FLD_ANSWER"].ToString());
                        if (str3 == str5)
                        {
                              string str6 = DBA.GetDBToDataTable($"select FLD_NAME FROM TBL_XWWL_Char WHERE FLD_ID = '{base.Userid}' and FLD_INDEX='{key}'").Rows[0]["FLD_NAME"].ToString();
                              string str7 = $"delete FROM TBL_XWWL_Char WHERE FLD_NAME = '{str6}'";
                              string str8 = $"delete FROM TBL_XWWL_Cw WHERE ZrName = '{str6}'";
                              string str9 = $"delete FROM TBL_XWWL_Guild WHERE G_Master = '{str6}'";
                              string str10 = $"delete FROM TBL_XWWL_GuildMember WHERE Name = '{str6}'";
                              DBA.ExeSqlCommand(str7);
                              DBA.ExeSqlCommand(str8);
                              DBA.ExeSqlCommand(str9);
                              DBA.ExeSqlCommand(str10);
                              DBA.ExeSqlCommand($"delete FROM TBL_XWWL_Warehouse WHERE FLD_NAME = '{str6}'");
                              Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, buffer2, 5, 2);
                              //Buffer.BlockCopy(BitConverter.GetBytes(key), 0, buffer2, 5, 2);
                              if (base.Client != null)
                              {
                                    base.Client.Send(buffer2, buffer2.Length);
                              }
                              //ReLoadCharacters();
                        }
                        else
                        {
                              Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, dst, 5, 2);
                              if (base.Client != null)
                              {
                                    base.Client.Send(dst, dst.Length);
                              }
                        }
                  }
            }

            public void ReLoadCharacters()
            {
                  try
                  {                        
                        base.allChars = new Dictionary<int, string>();
                        byte[] src = new byte[0x49];
                        byte[] buffer2 = new byte[] {
                    170, 0x55, 20, 0, 0, 0, 0, 0x11, 0, 5, 0, 0xff, 0x2e, 0x18, 0x89, 2,
                    0, 0, 0, 0, 0, 0, 0, 0, 0x55, 170
                };
                        string str = "AA552C0B012C0111001D0B000000000000000000000000000000000000000000000000000000000000000000000000000000000001000000080100000100010200004843000000000080CA44650000000000000000000000000000000000000000000000FFFFFFFFFFFFFFFF0100000000000000FFFFFFFFFFFFFFFF0200000000000000FFFFFFFFFFFFFFFF08080F09910074000000000064000000000000009100740000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000069498804052A4400E80393D255AA";
                        string str2 = string.Format("select * from [TBL_XWWL_Char] where FLD_ID=@Userid", new object[0]);
                        SqlParameter[] parameterArray = new SqlParameter[] { SqlDBA.MakeInParam("@Userid", SqlDbType.VarChar, 30, base.Userid) };
                        DataTable table = DBA.smethod_9(str2, parameterArray);
                        if (table == null)
                        {
                              goto Label_065B;
                        }
                        if (table.Rows.Count == 0)
                        {
                              if (base.Client != null)
                              {
                                    base.Client.Send(buffer2, buffer2.Length);
                              }
                              goto Label_0652;
                        }
                        if (table.Rows.Count > 4)
                        {
                              Form1.WriteLine(1, string.Concat(new object[] { "人物列表出错，人物数量太多[", base.Userid, "][", base.UserName, "] 人物全服ID=[", base.UserSessionID, "] [", base.Client.ToString(), "] 数[", table.Rows.Count, "]" }));
                              table.Dispose();
                              base.Client.Dispose();
                              return;
                        }
                        int num = 0;
                        Label_0154:
                        if (num < table.Rows.Count)
                        {
                              base.allChars.Add((int)table.Rows[num]["FLD_INDEX"], table.Rows[num]["FLD_NAME"].ToString());
                              byte[] dst = Converter.hexStringToByte(str);
                              Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, dst, 5, 2);
                              byte[] bytes = Encoding.Default.GetBytes(table.Rows[num]["FLD_NAME"].ToString());
                              byte[] buffer5 = BitConverter.GetBytes((int)table.Rows[num]["FLD_ZX"]);
                              byte[] buffer6 = BitConverter.GetBytes((int)table.Rows[num]["FLD_LEVEL"]);
                              byte[] buffer7 = BitConverter.GetBytes((int)table.Rows[num]["FLD_JOB_LEVEL"]);
                              byte[] buffer8 = BitConverter.GetBytes((int)table.Rows[num]["FLD_JOB"]);
                              byte[] buffer9 = BitConverter.GetBytes((int)table.Rows[num]["FLD_HP"]);
                              BitConverter.GetBytes((int)table.Rows[num]["FLD_SP"]);
                              byte[] buffer10 = (byte[])table.Rows[num]["FLD_WEARITEM"];
                              byte[] buffer11 = BitConverter.GetBytes(float.Parse(table.Rows[num]["FLD_X"].ToString()));
                              byte[] buffer12 = BitConverter.GetBytes((int)table.Rows[num]["FLD_MENOW"]);
                              Buffer.BlockCopy(buffer11, 0, dst, 0x44, 4);
                              Buffer.BlockCopy(BitConverter.GetBytes(float.Parse(table.Rows[num]["FLD_Z"].ToString())), 0, dst, 0x48, 4);
                              Buffer.BlockCopy(BitConverter.GetBytes(float.Parse(table.Rows[num]["FLD_Y"].ToString())), 0, dst, 0x4c, 4);
                              Buffer.BlockCopy(buffer12, 0, dst, 80, 2);
                              DataTable table2 = RxjhClass.EXE_LOAD_GUILD(table.Rows[num]["FLD_NAME"].ToString());
                              //퀘스트 정보 로드
                              byte[] buffer4 = (byte[])table.Rows[num]["FLD_QUEST"];
                              Form1.WriteLine(1, "Players LoadCharacters FLD_QUEST Data: [" + BitConverter.ToString(buffer4).Replace("-", "") + "]");
                              int num16 = 0;
                              while (true)
                              {
                                    if (num16 >= 100)
                                    {
                                          break;
                                    }
                                    byte[] buffer31 = new byte[4];
                                    try
                                    {
                                          if (buffer4.Length < ((num16 * 4) + 4))
                                          {
                                                break;
                                          }
                                          Buffer.BlockCopy(buffer4, num16 * 4, buffer31, 0, 4);
                                          NHIEM_VU_CLASS nhiem_vu_class = new NHIEM_VU_CLASS(buffer31);
                                          if ((nhiem_vu_class.NHIEM_VU_ID != 0) && !this.dictionary_2.ContainsKey(nhiem_vu_class.NHIEM_VU_ID))
                                          {
                                                this.dictionary_2.Add(nhiem_vu_class.NHIEM_VU_ID, nhiem_vu_class);
                                          }
                                    }
                                    catch (Exception exception21)
                                    {
                                          Console.WriteLine(exception21);
                                    }
                                    num16++;
                              }
                              if (table2 != null)
                              {
                                    Buffer.BlockCopy(BitConverter.GetBytes((int)table2.Rows[0]["Mon_trang_phuc_tu"]), 0, dst, 0x54, 1);
                                    Buffer.BlockCopy(BitConverter.GetBytes((int)table2.Rows[0]["Mon_trang_phuc_mau_sac"]), 0, dst, 0x56, 2);
                                    table2.Dispose();
                              }
                              byte[] buffer13 = BitConverter.GetBytes((int)table.Rows[num]["FLD_JQ"]);
                              Buffer.BlockCopy(buffer13, 0, dst, 0xb14, buffer13.Length);
                              dst[11] = byte.Parse(table.Rows[num]["FLD_INDEX"].ToString());
                              Buffer.BlockCopy(bytes, 0, dst, 12, bytes.Length);
                              Buffer.BlockCopy(buffer5, 0, dst, 50, 2);
                              Buffer.BlockCopy(buffer6, 0, dst, 0x34, 2);
                              Buffer.BlockCopy(buffer7, 0, dst, 0x36, 2);
                              Buffer.BlockCopy(buffer8, 0, dst, 0x38, 2);
                              NHAN_VAT_CLASS nhan_vat_class1 = new NHAN_VAT_CLASS((byte[])table.Rows[num]["FLD_FACE"]);
                              Buffer.BlockCopy(BitConverter.GetBytes(nhan_vat_class1.MAU_TOC), 0, dst, 0x3a, 2);
                              Buffer.BlockCopy(BitConverter.GetBytes((short)nhan_vat_class1.KIEU_TOC), 0, dst, 60, 2);
                              Buffer.BlockCopy(BitConverter.GetBytes((short)nhan_vat_class1.GIOI_TINH), 0, dst, 0x41, 1);
                              Buffer.BlockCopy(buffer9, 0, dst, 0xa4, 2);
                              Buffer.BlockCopy(BitConverter.GetBytes((int)table.Rows[num]["FLD_MP"]), 0, dst, 0xa6, 2);
                              int num1 = (int)table.Rows[num]["FLD_ZBVER"];
                              int num2 = 200;
                              int num3 = 0;
                              while (true)
                              {
                                    if (num3 < 15)
                                    {
                                          if (num3 >= 15)
                                          {
                                                Buffer.BlockCopy(src, 0, dst, num2 + (num3 * World.int_5), 0x48);
                                          }
                                          else
                                          {
                                                try
                                                {
                                                      Buffer.BlockCopy(buffer10, num3 * 0x49, dst, num2 + (num3 * World.int_5), 12);
                                                      Buffer.BlockCopy(buffer10, (num3 * 0x49) + 12, dst, (num2 + (num3 * World.int_5)) + 0x10, 60);
                                                }
                                                catch
                                                {
                                                      Buffer.BlockCopy(src, 0, dst, num2 + (num3 * World.int_5), 0x48);
                                                }
                                          }
                                    }
                                    else
                                    {
                                          if (base.Client != null)
                                          {
                                                base.Client.method_8(dst, dst.Length);
                                          }
                                          num++;
                                          goto Label_0154;
                                    }
                                    num3++;
                              }
                        }
                        Label_0652:
                        table.Dispose();
                        return;
                        Label_065B:
                        base.Client.Send(buffer2, buffer2.Length);
                  }
                  catch (Exception exception)
                  {
                        Form1.WriteLine(1, "获取人物列表出错[" + base.Userid + "]-[" + base.Client.ToString() + "]" + exception.Message);
                  }
            }

            public void DI_CHUYEN_KHOANG_CACH_TRUOC_BAN_DO(int int_128)
            {
                  if (World.jlMsg == 1)
                  {
                        Form1.WriteLine(0, "Players_DI_CHUYEN_KHOANG_CACH_TRUOC_BAN_DO");
                  }
                  int num = 0;
                  try
                  {
                        num = 5;
                        char[] separator = new char[] { ';' };
                        string[] strArray = World.Cancel_help_combat_several_gold_bullions.Split(separator);
                        if ((((int_128 != 0x1b59) && (int_128 != 0x1bbd)) && ((base.CharacterCoords_Map != 0x1b59) && (base.CharacterCoords_Map == 0x1bbd))) && ((World.class11_0 != null) && (World.class11_0.int_2 == 0)))
                        {
                              if (World.class11_0.class47_0.int_0 == base.Bang_phai_Id)
                              {
                                    if (World.class11_0.class47_0.dictionary_0.ContainsKey(base.UserSessionID))
                                    {
                                          if (base.Bang_phai_nhan_vat_thu_bac == 6)
                                          {
                                                World.class11_0.int_0 = 0;
                                                World.class11_0.int_1 = 0;
                                                World.class11_0.int_2 = 2;
                                                World.class11_0.class47_0.dictionary_0.Remove(base.UserSessionID);
                                                this.KIEM_TRA_BACH_BAO_CAC_NGUYEN_BAO_SO_LUONG();
                                                base.KIEM_SOAT_CASH_SO_LIEU(int.Parse(strArray[0]), 1);
                                                base.Player_Money += int.Parse(strArray[1]);
                                                base.UPDATE_RXPIONT();
                                                base.UpdateMoneyAndWeight();
                                                World.class11_0.method_0();
                                          }
                                          else
                                          {
                                                World.class11_0.int_0--;
                                                World.class11_0.class47_0.dictionary_0.Remove(base.UserSessionID);
                                          }
                                          base.int_12 = 0;
                                          this.LOI_KHUYEN_CHIEN_TRANH_BAT_DAU(12, 3);
                                    }
                              }
                              else if ((World.class11_0.class47_1.int_0 == base.Bang_phai_Id) && World.class11_0.class47_1.dictionary_0.ContainsKey(base.UserSessionID))
                              {
                                    if (base.Bang_phai_nhan_vat_thu_bac == 6)
                                    {
                                          World.class11_0.int_0 = 0;
                                          World.class11_0.int_1 = 0;
                                          World.class11_0.int_2 = 2;
                                          World.class11_0.class47_1.dictionary_0.Remove(base.UserSessionID);
                                          this.KIEM_TRA_BACH_BAO_CAC_NGUYEN_BAO_SO_LUONG();
                                          base.KIEM_SOAT_CASH_SO_LIEU(int.Parse(strArray[0]), 1);
                                          base.Player_Money += int.Parse(strArray[0]);
                                          base.UPDATE_RXPIONT();
                                          base.UpdateMoneyAndWeight();
                                          World.class11_0.method_0();
                                    }
                                    else
                                    {
                                          World.class11_0.int_1--;
                                          World.class11_0.class47_1.dictionary_0.Remove(base.UserSessionID);
                                    }
                                    base.int_12 = 0;
                                    this.LOI_KHUYEN_CHIEN_TRANH_BAT_DAU(12, 3);
                              }
                        }
                        num = 1;
                        if (this.threadSafeDictionary_5 != null)
                        {
                              Queue queue = Queue.Synchronized(new Queue());
                              foreach (Players players in this.threadSafeDictionary_5.Values)
                              {
                                    if ((players.Client != null) && players.Client.Running)
                                    {
                                          queue.Enqueue(players);
                                    }
                              }
                              while (queue.Count > 0)
                              {
                                    if (World.jlMsg == 1)
                                    {
                                          Form1.WriteLine(2, "DI_CHUYEN_KHOANG_CACH_TRUOC_BAN_DO");
                                    }
                                    num = 2;
                                    Players players2 = (Players)queue.Dequeue();
                                    num = 4;
                                    base.method_93(this, players2);
                                    base.method_93(players2, this);
                                    if (players2.threadSafeDictionary_5 != null)
                                    {
                                          num = 5;
                                          if (players2.threadSafeDictionary_5.ContainsKey(base.UserSessionID))
                                          {
                                                players2.threadSafeDictionary_5.Remove(base.UserSessionID);
                                          }
                                    }
                              }
                        }
                  }
                  catch (Exception exception)
                  {
                        Form1.WriteLine(1, string.Concat(new object[] { "DI_CHUYEN_KHOANG_CACH_TRUOC_BAN_DO()出错!用户[", base.Userid, "]-[", base.UserName, "][", num, "]", exception.Message }));
                  }
                  finally
                  {
                        if (this.threadSafeDictionary_5 != null)
                        {
                              this.threadSafeDictionary_5.Clear();
                        }
                  }
            }

            public void DI_CHUYEN_TRANG_THAI_DEN(Players class15_0, Players class15_1)
            {
                  if (class15_1.int_10 != 0)
                  {
                        byte[] dst = Converter.hexStringToByte("AA55270000A1003D001800020000000101000000000000000000000000000000000000000000000000000055AA");
                        Buffer.BlockCopy(BitConverter.GetBytes(class15_1.int_10), 0, dst, 0x10, 4);
                        Buffer.BlockCopy(BitConverter.GetBytes(class15_1.UserSessionID), 0, dst, 5, 2);
                        if (class15_0.Client != null)
                        {
                              class15_0.Client.method_8(dst, dst.Length);
                        }
                  }
            }

            public void DI_CHUYEN_TRANG_THAI_NHAN_VAT_LINH_THU(byte[] byte_5, int int_128)
            {
                  byte[] dst = Converter.hexStringToByte("AA5527000000003D0018000E2C09000101000000000000000000000000000000000000000000000000000055AA");
                  Buffer.BlockCopy(byte_5, 0, dst, 11, 4);
                  Buffer.BlockCopy(BitConverter.GetBytes(int_128), 0, dst, 0x10, 4);
                  Buffer.BlockCopy(BitConverter.GetBytes(base.NHAN_VAT_LINH_THU_TOAN_BO_TRANG_PHUC_ID), 0, dst, 5, 2);
                  if (base.Client != null)
                  {
                        base.Client.Send(dst, dst.Length);
                  }
                  this.vmethod_0(dst, dst.Length);
            }

            public void DI_THUONG_TRANG_THAI_DANH_SACH()
            {
                  if (World.jlMsg == 1)
                  {
                        Form1.WriteLine(0, "Players_Abnormal status list");
                  }
                  if (base.threadSafeDictionary_4 != null)
                  {
                        Queue queue = Queue.Synchronized(new Queue());
                        try
                        {
                              foreach (DI_THUONG_TRANG_THAI_NEW di_thuong_trang_thai_new in base.threadSafeDictionary_4.Values)
                              {
                                    queue.Enqueue(di_thuong_trang_thai_new);
                              }
                              while (queue.Count > 0)
                              {
                                    if (World.jlMsg == 1)
                                    {
                                          Form1.WriteLine(0, "Abnormal status list");
                                    }
                                    DI_THUONG_TRANG_THAI_NEW di_thuong_trang_thai_new2 = (DI_THUONG_TRANG_THAI_NEW)queue.Dequeue();
                                    di_thuong_trang_thai_new2.method_1();
                                    if (base.threadSafeDictionary_4 != null)
                                    {
                                          base.threadSafeDictionary_4.Remove(di_thuong_trang_thai_new2.FLD_PID);
                                    }
                              }
                        }
                        catch (Exception exception)
                        {
                              Form1.WriteLine(1, "Abnormal state list Error list![" + base.Userid + "]-[" + base.UserName + "]" + exception.Message);
                        }
                        finally
                        {
                              queue = null;
                        }
                  }
            }

            public int Discover_has_landed_the_account_number(string string_10, string string_11, string string_12)
            {
                  try
                  {
                        int num = 0;
                        if (World.Trusted_Connection_IP != "")
                        {
                              char[] separator = new char[] { ';' };
                              string[] strArray = World.Trusted_Connection_IP.Split(separator);
                              for (int i = 0; i < strArray.Length; i++)
                              {
                                    if (strArray[i] == base.Client.ToString())
                                    {
                                          return 0;
                                    }
                              }
                        }
                        foreach (ClientIpAddress address in World.threadSafeDictionary_2.Values)
                        {
                              if (((address.MAC地址 == string_12) && (address.外网IP地址 == string_11)) && (address.内网IP地址 == string_10))
                              {
                                    num++;
                              }
                        }
                        return num;
                  }
                  catch
                  {
                        return 0;
                  }
            }

            public void Display()
            {
                  using (PacketData data = new PacketData())
                  {
                        if (base.Client != null)
                        {
                              base.Client.method_5(data, 0x2000, base.UserSessionID, 0);
                        }
                  }
            }

            public void Dispose()
            {
                  if (World.jlMsg == 1)
                  {
                        Form1.WriteLine(0, "Players_Dispose()");
                  }
                  try
                  {
                        if (base.timer_0 != null)
                        {
                              base.timer_0.Close();
                              base.timer_0.Dispose();
                              base.timer_0 = null;
                        }
                        if (this.timer_2 != null)
                        {
                              this.timer_2.Enabled = false;
                              this.timer_2.Close();
                              this.timer_2.Dispose();
                              this.timer_2 = null;
                        }
                        if (base.allChars != null)
                        {
                              base.allChars.Clear();
                        }
                        if (base.CONG_KICH_DANH_SACH != null)
                        {
                              base.CONG_KICH_DANH_SACH.Clear();
                        }
                        if (base.list_5 != null)
                        {
                              base.list_5.Clear();
                        }
                        if (base.list_3 != null)
                        {
                              base.list_3.Clear();
                        }
                        if (base.PlayerShop != null)
                        {
                              base.PlayerShop = null;
                        }
                        if (base.class66_0 != null)
                        {
                              base.class66_0 = null;
                        }
                        if (base.list_2 != null)
                        {
                              base.list_2.Clear();
                              base.list_2 = null;
                        }
                        if (this.threadSafeDictionary_5 != null)
                        {
                              this.threadSafeDictionary_5.Clear();
                              this.threadSafeDictionary_5.Dispose();
                              this.threadSafeDictionary_5 = null;
                        }
                        if (base.threadSafeDictionary_0 != null)
                        {
                              base.threadSafeDictionary_0.Clear();
                              base.threadSafeDictionary_0.Dispose();
                              base.threadSafeDictionary_0 = null;
                        }
                        if (base.threadSafeDictionary_1 != null)
                        {
                              base.threadSafeDictionary_1.Clear();
                              base.threadSafeDictionary_1.Dispose();
                              base.threadSafeDictionary_1 = null;
                        }
                        if (this.timer_1 != null)
                        {
                              this.timer_1.Enabled = false;
                              this.timer_1.Close();
                              this.timer_1.Dispose();
                              this.timer_1 = null;
                        }
                        if (base.Add_Status_List != null)
                        {
                              base.Add_Status_List.Clear();
                              base.Add_Status_List.Dispose();
                              base.Add_Status_List = null;
                        }
                        if (base.threadSafeDictionary_3 != null)
                        {
                              base.threadSafeDictionary_3.Clear();
                              base.threadSafeDictionary_3.Dispose();
                              base.threadSafeDictionary_3 = null;
                        }
                        if (base.threadSafeDictionary_4 != null)
                        {
                              base.threadSafeDictionary_4.Clear();
                              base.threadSafeDictionary_4.Dispose();
                              base.threadSafeDictionary_4 = null;
                        }
                        if (base.list_0 != null)
                        {
                              base.list_0.Clear();
                              base.list_0 = null;
                        }
                        if (this.timer_3 != null)
                        {
                              this.timer_3.Enabled = false;
                              this.timer_3.Close();
                              this.timer_3.Dispose();
                              this.timer_3 = null;
                        }
                        if (World.list_3.Contains(this))
                        {
                              World.class61_0.Dispose();
                        }
                        if (World.list_2.Contains(this))
                        {
                              World.list_2.Remove(this);
                              foreach (Players players in World.list_2)
                              {
                                    if (players.CharacterCoords_Map == World.Khieu_chien_ban_do_so_hieu)
                                    {
                                          players.SendCountdown(12, 9, 0);
                                          players.GameMessage("The other exit or get dropped you have to win the award", 10, "End Challenge");
                                          long num = (World.Khieu_chien_xin_can_thiet_CASH_So_luong * 2) - World.Khieu_chien_he_thong_thu_ve_CASH_So_luong;
                                          players.method_47(num, 1);
                                          players.UPDATE_RXPIONT();
                                          char[] separator = new char[] { ',' };
                                          string[] strArray = World.Tu_vong_tro_ve_thanh_Ban_do_Toa_do.Trim().Split(separator);
                                          players.MOVE_NEW((float)int.Parse(strArray[1]), (float)int.Parse(strArray[2]), 15f, int.Parse(strArray[0]));
                                    }
                              }
                              if (World.class12_0 != null)
                              {
                                    World.class12_0.Dispose();
                              }
                        }
                        this.bool_13 = true;
                  }
                  catch (Exception exception)
                  {
                        Form1.WriteLine(1, "用户数据释放_Dispose()出错[" + exception.Message + "]");
                  }
            }

            private void Dispose(bool bool_16)
            {
                  if (World.jlMsg == 1)
                  {
                        Form1.WriteLine(0, "Players_Dispose(bool disposing)");
                  }
                  bool flag1 = this.bool_13;
                  this.bool_13 = true;
            }

            public void DOI_PHUONG_HUY_BO_YEU_CAU_GIA_NHAP(int int_128, int int_129)
            {
                  int num = 0;
                  try
                  {
                        num = 1;
                        byte[] dst = Converter.hexStringToByte("AA5543000000009800340001000000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010000000000000000000055AA");
                        num = 2;
                        Buffer.BlockCopy(BitConverter.GetBytes(int_129), 0, dst, 11, 4);
                        num = 3;
                        Buffer.BlockCopy(BitConverter.GetBytes(int_129), 0, dst, 15, 4);
                        num = 4;
                        byte[] bytes = Encoding.Default.GetBytes(base.UserName);
                        num = 5;
                        Buffer.BlockCopy(bytes, 0, dst, 0x17, bytes.Length);
                        num = 6;
                        Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, dst, 0x13, 2);
                        num = 7;
                        Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, dst, 5, 2);
                        num = 8;
                        if (base.Client != null)
                        {
                              base.Client.Send(dst, dst.Length);
                        }
                        num = 9;
                        if (base.class66_0.GIAO_DICH_CON_NGUOI.Client != null)
                        {
                              base.class66_0.GIAO_DICH_CON_NGUOI.Client.Send(dst, dst.Length);
                        }
                        num = 10;
                        if (base.class66_0 != null)
                        {
                              base.class66_0.method_0();
                        }
                  }
                  catch (Exception exception)
                  {
                        Form1.WriteLine(1, string.Concat(new object[] { "对方取消交易请求出错 [", base.Userid, "][", base.UserName, "][", base.Client.ToString(), "] ", exception.Message, "] ", num }));
                  }
            }

            public void DOI_PHUONG_TU_ROI_NHOM(byte[] byte_5, int int_128)
            {
                  try
                  {
                        Players players;
                        TO_DOI_CLASS to_doi_class;
                        TO_DOI_CLASS to_doi_class2;
                        byte[] buffer3;
                        byte[] dst = new byte[4];
                        Buffer.BlockCopy(byte_5, 15, dst, 0, 2);
                        int num = BitConverter.ToInt32(dst, 0);
                        byte[] buffer2 = new byte[4];
                        Buffer.BlockCopy(byte_5, 13, buffer2, 0, 1);
                        switch (BitConverter.ToInt32(buffer2, 0))
                        {
                              case 1:
                                    players = base.Get_char_data(num);
                                    if (World.W_TO_DOI.TryGetValue(base.TO_DOI_ID, out to_doi_class))
                                    {
                                          to_doi_class.class15_0 = null;
                                          if (to_doi_class.dictionary_0.Count < 8)
                                          {
                                                goto Label_0091;
                                          }
                                          base.GameMessage("The team is full, a team can accommodate up to 8 people.", 9, "system hint");
                                    }
                                    break;

                              case 2:
                                    goto Label_00DC;
                        }
                        return;
                        Label_0091:
                        if (!to_doi_class.dictionary_0.ContainsKey(base.UserSessionID))
                        {
                              to_doi_class.dictionary_0.Add(base.UserSessionID, this);
                              to_doi_class.list_1.Add(this);
                              to_doi_class.method_2(this);
                              base.int_7 = 1;
                              players.int_7 = 1;
                        }
                        return;
                        Label_00DC:
                        buffer3 = Converter.hexStringToByte("AA55130001F5013500040001000200000000000000FF3055AA");
                        Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, buffer3, 5, 2);
                        if (base.Client != null)
                        {
                              base.Client.Send(buffer3, buffer3.Length);
                        }
                        if (World.W_TO_DOI.TryGetValue(base.TO_DOI_ID, out to_doi_class2))
                        {
                              Players players2 = base.Get_char_data(num);
                              if (players2 != null)
                              {
                                    if (players2.Client != null)
                                    {
                                          players2.Client.Send(buffer3, buffer3.Length);
                                    }
                                    to_doi_class2.class15_0 = null;
                                    if (to_doi_class2.dictionary_0.Count <= 1)
                                    {
                                          to_doi_class2.Dispose();
                                          World.W_TO_DOI.Remove(base.TO_DOI_ID);
                                          players2.TO_DOI_ID = 0;
                                          base.TO_DOI_ID = 0;
                                    }
                                    else
                                    {
                                          base.TO_DOI_ID = 0;
                                    }
                              }
                        }
                  }
                  catch (Exception exception)
                  {
                        Form1.WriteLine(1, "对方取消组队出错![" + base.Userid + "]-[" + base.UserName + "]" + exception.Message);
                  }
            }

            public void DOI_TEN_NHAN_VAT(byte[] byte_5, int int_128)
            {
                  this.Packet_Modify(byte_5, int_128);
                  byte[] dst = Converter.hexStringToByte("AA551F00012C01910010002F000000000000000000000000000000000000000000000055AA");
                  try
                  {
                        byte[] buffer2 = new byte[4];
                        Buffer.BlockCopy(byte_5, 0x1b, buffer2, 0, 1);
                        if (BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[BitConverter.ToInt32(buffer2, 0)].VAT_PHAM_ID, 0) == 0x3c14dc7e)
                        {
                              byte[] bytes = new byte[0x10];
                              for (int i = 0; i < 0x10; i++)
                              {
                                    if (byte_5[11 + i] == 0)
                                    {
                                          break;
                                    }
                                    bytes[i] = byte_5[11 + i];
                              }
                              string str = Encoding.Default.GetString(bytes).Trim().Replace("\0", "").Trim();
                              if (base.Bang_phai_Id != 0)
                              {
                                    base.GameMessage("Please quit martial back name", 9, "system message");
                              }
                              else if (base.TO_DOI_ID != 0)
                              {
                                    base.GameMessage("Please quit the team back name", 9, "system message");
                              }
                              else if (base.FLD_TINH_NHAN != "")
                              {
                                    base.GameMessage("Couple back to first remove its name", 9, "system message");
                              }
                              else
                              {
                                    string str2 = string.Format("UPDATE TBL_XWWL_Char SET FLD_NAME = @sTemp WHERE FLD_ID = @Userid AND FLD_NAME = @Username", new object[0]);
                                    SqlParameter[] parameterArray = new SqlParameter[] { SqlDBA.MakeInParam("@Userid", SqlDbType.VarChar, 30, base.Userid), SqlDBA.MakeInParam("@Username", SqlDbType.VarChar, 30, base.UserName), SqlDBA.MakeInParam("@sTemp", SqlDbType.VarChar, 30, str) };
                                    DBA.smethod_4(str2, parameterArray);
                                    str2 = string.Format("UPDATE TBL_XWWL_Warehouse SET FLD_NAME = @sTemp WHERE FLD_ID = @Userid AND FLD_NAME = @Username", new object[0]);
                                    SqlParameter[] parameterArray2 = new SqlParameter[] { SqlDBA.MakeInParam("@Userid", SqlDbType.VarChar, 30, base.Userid), SqlDBA.MakeInParam("@Username", SqlDbType.VarChar, 30, base.UserName), SqlDBA.MakeInParam("@sTemp", SqlDbType.VarChar, 30, str) };
                                    DBA.smethod_4(str2, parameterArray2);
                                    base.UserName = str;
                                    this.LAM_GIAM_DI_VAT_PHAM(BitConverter.ToInt32(buffer2, 0), 1);
                                    base.LAN_DAU_DOI_THOAI_DA_TRANG_BI_VAT_PHAM();
                                    this.DI_CHUYEN_KHOANG_CACH_TRUOC_BAN_DO(base.CharacterCoords_Map);
                                    this.BAT_GIU_KIEM_TRA_LAI_PHAM_VI_NGUOI_CHOI();
                                    Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, dst, 5, 2);
                                    if (base.Client != null)
                                    {
                                          base.Client.Send(dst, dst.Length);
                                    }
                                    try
                                    {
                                          this.bool_14 = false;
                                          base.Exiting = true;
                                          this.Players_Logout();
                                          string str3 = "AA551700000000630008000100000000000001000000000000000055AA";
                                          byte[] buffer4 = Converter.hexStringToByte("AA5513000000005700040004000000000000000000000055AA");
                                          byte[] buffer5 = Converter.hexStringToByte(str3);
                                          Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, buffer4, 5, 2);
                                          Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, buffer5, 5, 2);
                                          if (base.Client != null)
                                          {
                                                base.Client.Send(buffer4, buffer4.Length);
                                          }
                                          if (base.Client != null)
                                          {
                                                base.Client.Send(buffer5, buffer5.Length);
                                          }
                                    }
                                    catch
                                    {
                                    }
                              }
                        }
                  }
                  catch (Exception)
                  {
                        base.GameMessage("System error, please contact customer service", 9, "system message");
                        Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, dst, 5, 2);
                        if (base.Client != null)
                        {
                              base.Client.Send(dst, dst.Length);
                        }
                  }
            }

            public void DOI_TRUONG_QUAN_LY(byte[] byte_5, int int_128)
            {
                  try
                  {
                        TO_DOI_CLASS to_doi_class2;
                        byte[] dst = new byte[4];
                        Buffer.BlockCopy(byte_5, 13, dst, 0, 2);
                        int num = BitConverter.ToInt32(dst, 0);
                        byte[] buffer2 = new byte[4];
                        Buffer.BlockCopy(byte_5, 11, buffer2, 0, 1);
                        switch (BitConverter.ToInt32(buffer2, 0))
                        {
                              case 1:
                                    TO_DOI_CLASS to_doi_class;
                                    if (World.W_TO_DOI.TryGetValue(base.TO_DOI_ID, out to_doi_class))
                                    {
                                          Players players = base.Get_char_data(num);
                                          if (players != null)
                                          {
                                                to_doi_class.method_1(this, players);
                                          }
                                    }
                                    return;

                              case 2:
                                    break;

                              default:
                                    return;
                        }
                        if (World.W_TO_DOI.TryGetValue(base.TO_DOI_ID, out to_doi_class2))
                        {
                              Players players2 = base.Get_char_data(num);
                              if (players2 != null)
                              {
                                    to_doi_class2.method_3(players2);
                              }
                        }
                  }
                  catch (Exception exception)
                  {
                        Form1.WriteLine(1, "队长管理出错![" + base.Userid + "]-[" + base.UserName + "]" + exception.Message);
                  }
            }

            public void DONG_CUA_HANG()
            {
                  if (World.jlMsg == 1)
                  {
                        Form1.WriteLine(0, "Players_关店");
                  }
                  byte[] dst = Converter.hexStringToByte("AA551100000000CD0002000404000000000000000055AA");
                  Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, dst, 5, 2);
                  if (base.Client != null)
                  {
                        base.Client.Send(dst, dst.Length);
                  }
                  if (base.PlayerShop.class15_0 != null)
                  {
                        byte[] buffer3 = Converter.hexStringToByte("AA551500000000CF000600030319000000000000000000000055AA");
                        Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, buffer3, 13, 2);
                        Buffer.BlockCopy(BitConverter.GetBytes(base.PlayerShop.class15_0.UserSessionID), 0, buffer3, 5, 2);
                        base.PlayerShop.class15_0.bool_5 = false;
                        base.PlayerShop.class15_0.OpenWarehouse = false;
                        base.PlayerShop.class15_0.int_0 = 0;
                        if (base.PlayerShop.class15_0.Client != null)
                        {
                              base.PlayerShop.class15_0.Client.Send(buffer3, buffer3.Length);
                        }
                  }
                  base.OpenWarehouse = false;
                  base.PlayerShop.PersonStore_Open = false;
                  base.PlayerShop.CUA_HANG_ITEM_DANH_SACH.Clear();
                  base.PlayerShop.Dispose();
                  base.PlayerShop.class15_0 = null;
                  base.PlayerShop = null;
                  byte[] buffer2 = Converter.hexStringToByte("AA551B00000000CA000C000100000000000000FFFFFFFF000000000000000055AA");
                  Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, buffer2, 15, 2);
                  Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, buffer2, 5, 2);
                  if (base.Client != null)
                  {
                        base.Client.Send(buffer2, buffer2.Length);
                  }
                  this.vmethod_0(buffer2, buffer2.Length);
                  this.HOP_THANH_HE_THONG_TACH_RA_SAI();
            }

            public void DONG_GIAO_DICH(int int_128, int int_129)
            {
                  try
                  {
                        byte[] dst = Converter.hexStringToByte("AA5543000000009800340001000000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010000000000000000000055AA");
                        Buffer.BlockCopy(BitConverter.GetBytes(int_129), 0, dst, 11, 4);
                        Buffer.BlockCopy(BitConverter.GetBytes(int_129), 0, dst, 15, 4);
                        byte[] bytes = Encoding.Default.GetBytes(base.UserName);
                        Buffer.BlockCopy(bytes, 0, dst, 0x17, bytes.Length);
                        Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, dst, 0x13, 2);
                        Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, dst, 5, 2);
                        if (base.Client != null)
                        {
                              base.Client.Send(dst, dst.Length);
                        }
                        if (base.class66_0.GIAO_DICH_CON_NGUOI.Client != null)
                        {
                              base.class66_0.GIAO_DICH_CON_NGUOI.Client.Send(dst, dst.Length);
                        }
                        base.class66_0.method_0();
                  }
                  catch (Exception exception)
                  {
                        Form1.WriteLine(1, string.Concat(new object[] { "关闭交易出错 [", base.Userid, "][", base.UserName, "][", base.Client.ToString(), "] ", exception }));
                  }
            }

            public void DONG_Y_CHAP_NHAN(int int_128, int int_129)
            {
                  try
                  {
                        if (base.Exiting)
                        {
                              Form1.WriteLine(6, "退出复制BUG [" + base.Userid + "][" + base.UserName + "][" + base.Client.ToString() + "] ");
                        }
                        else
                        {
                              byte[] dst = Converter.hexStringToByte("AA5543000000009800340001000000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010000000000000000000055AA");
                              Buffer.BlockCopy(BitConverter.GetBytes(int_129), 0, dst, 11, 4);
                              Buffer.BlockCopy(BitConverter.GetBytes(int_129), 0, dst, 15, 4);
                              byte[] bytes = Encoding.Default.GetBytes(base.UserName);
                              Buffer.BlockCopy(bytes, 0, dst, 0x17, bytes.Length);
                              Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, dst, 0x13, 2);
                              Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, dst, 5, 2);
                              if (base.Client != null)
                              {
                                    base.Client.Send(dst, dst.Length);
                              }
                              if (base.class66_0.GIAO_DICH_CON_NGUOI.Client != null)
                              {
                                    base.class66_0.GIAO_DICH_CON_NGUOI.Client.Send(dst, dst.Length);
                              }
                              base.class66_0.GIAO_DICH_TIEP_THU = true;
                              if (base.class66_0.GIAO_DICH_CON_NGUOI.class66_0.GIAO_DICH_TIEP_THU)
                              {
                                    if (base.class66_0.GIAO_DICH_CON_NGUOI.Client.Running)
                                    {
                                          this.GIAO_DICH_THANH_CONG(this);
                                          base.class66_0.dictionary_0.Clear();
                                          base.UpdateMoneyAndWeight();
                                          this.GIAO_DICH_THANH_CONG(base.class66_0.GIAO_DICH_CON_NGUOI);
                                          base.class66_0.GIAO_DICH_CON_NGUOI.class66_0.dictionary_0.Clear();
                                          base.class66_0.GIAO_DICH_CON_NGUOI.UpdateMoneyAndWeight();
                                          base.OpenWarehouse = false;
                                          base.class66_0.GIAO_DICH_CON_NGUOI.OpenWarehouse = false;
                                          base.class66_0.method_0();
                                    }
                              }
                              else
                              {
                                    Form1.WriteLine(5, "[" + base.Userid + "][" + base.UserName + "] 交易就绪 [" + base.class66_0.GIAO_DICH_CON_NGUOI.Userid + "][" + base.class66_0.GIAO_DICH_CON_NGUOI.UserName + "]");
                              }
                        }
                  }
                  catch (Exception exception)
                  {
                        Form1.WriteLine(1, string.Concat(new object[] { "同意接受出错 [", base.Userid, "][", base.UserName, "][", base.Client.ToString(), "] ", exception }));
                  }
            }

            public void DropItem(byte[] byte_5, int int_128)
            {
                  try
                  {
                        this.Packet_Modify(byte_5, int_128);
                        if (base.Exiting)
                        {
                              Form1.WriteLine(6, "退出复制BUG [" + base.Userid + "][" + base.UserName + "][" + base.Client.ToString() + "] ");
                              return;
                        }
                        if (base.bool_5 || base.OpenWarehouse)
                        {
                              return;
                        }
                        int index = byte_5[0x24];
                        int num2 = BitConverter.ToInt32(byte_5, 0x13);
                        int num3 = BitConverter.ToInt32(byte_5, 0x1b);
                        if (((BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_ID, 0) == 0) || (BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_SO_LUONG, 0) == 0)) || (((num2 == 0x77359400) || World.smethod_18(num2)) || base.TRANG_BI_LAN_BAO_VAY[index].Item_troi_chat))
                        {
                              return;
                        }
                        byte[] dst = new byte[0x49];
                        byte[] bytes = new byte[8];
                        Buffer.BlockCopy(base.TRANG_BI_LAN_BAO_VAY[index].Item_byte, 0, dst, 0, 0x49);
                        Buffer.BlockCopy(dst, 0, bytes, 0, 8);
                        if (base.TRANG_BI_LAN_BAO_VAY[index].Item_loai_hinh == 0)
                        {
                              this.UNKNOWN_385_VAT_PHAM(index, BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_SO_LUONG, 0));
                              this.LAM_GIAM_DI_VAT_PHAM(index, BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_SO_LUONG, 0));
                              Buffer.BlockCopy(BitConverter.GetBytes(1), 0, dst, 12, 4);
                              MAT_DAT_ITEM_LOAI mat_dat_item_loai = new MAT_DAT_ITEM_LOAI(dst, base.CharacterCoords_X, base.CharacterCoords_Y, base.CharacterCoords_Z, base.CharacterCoords_Map, this, 1);
                              if (!World.threadSafeDictionary_3.ContainsKey(BitConverter.ToInt64(bytes, 0)))
                              {
                                    World.threadSafeDictionary_3.Add(BitConverter.ToInt64(bytes, 0), mat_dat_item_loai);
                              }
                              if (World.threadSafeDictionary_3.ContainsKey(BitConverter.ToInt64(bytes, 0)))
                              {
                                    mat_dat_item_loai.method_1();
                              }
                        }
                        else
                        {
                              if (BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_SO_LUONG, 0) <= num3)
                              {
                                    num3 = BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_SO_LUONG, 0);
                              }
                              else
                              {
                                    bytes = BitConverter.GetBytes(RxjhClass.GetDBItmeId());
                                    Buffer.BlockCopy(bytes, 0, dst, 0, 8);
                              }
                              try
                              {
                                    this.UNKNOWN_385_VAT_PHAM(index, num3);
                                    this.LAM_GIAM_DI_VAT_PHAM(index, num3);
                                    Buffer.BlockCopy(BitConverter.GetBytes(num3), 0, dst, 12, 4);
                                    MAT_DAT_ITEM_LOAI mat_dat_item_loai2 = new MAT_DAT_ITEM_LOAI(dst, base.CharacterCoords_X, base.CharacterCoords_Y, base.CharacterCoords_Z, base.CharacterCoords_Map, this, 1);
                                    if (!World.threadSafeDictionary_3.ContainsKey(BitConverter.ToInt64(bytes, 0)))
                                    {
                                          World.threadSafeDictionary_3.Add(BitConverter.ToInt64(bytes, 0), mat_dat_item_loai2);
                                    }
                                    if (World.threadSafeDictionary_3.ContainsKey(BitConverter.ToInt64(bytes, 0)))
                                    {
                                          mat_dat_item_loai2.method_1();
                                    }
                              }
                              catch (Exception exception)
                              {
                                    Form1.WriteLine(1, "扔VAT_PHAM出错2 [" + base.Userid + "][" + base.UserName + "] " + exception.Message);
                              }
                        }
                  }
                  catch (Exception exception2)
                  {
                        Form1.WriteLine(1, "扔VAT_PHAM出错3 [" + base.Userid + "][" + base.UserName + "] " + exception2.Message);
                  }
                  base.UpdateMoneyAndWeight();
            }

            public void DUNG_BO_CAU_DUA_TIN_NOI_DUNG()
            {
                  byte[] dst = Converter.hexStringToByte("AA55AC00002D01B6009C000029867D0195003131313131312CC4E3BAC3A3ACBBB6D3ADB9E2C1D9C6DFCFA6BDADBAFEC8CECEF1B4ABCAE9B7C2B9D9C7F8A3ACC8E7B9FBCFB2BBB6CED2C3C7B5C4D3CECFB7C7EBBDE9C9DCB8F8C4FAB5C4C5F3D3D1A3A1CED2C3C7D3C0BEC3D3F2C3FBCEAA5777772E37786A682E636F4D2CCCD8B1F0CCE1D0D13AB1BEB7FECBF9D3D0C8CECEF1BEF9BFC9D7F6A3ACB2BBD2AACDFCBCC7C5B6A3A100000000000000000055AA");
                  Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, dst, 5, 2);
                  if (base.Client != null)
                  {
                        base.Client.Send(dst, dst.Length);
                  }
            }

            private void e1(Players class15_0, double double_206)
            {
                  try
                  {
                        class15_0.NHAN_VAT_LINH_THU.FLD_EXP += (long)((double_206 * class15_0.Config.Pet_Exp) * 0.01);
                        if (class15_0.NHAN_VAT_LINH_THU.FLD_LEVEL >= 15)
                        {
                              class15_0.NHAN_VAT_LINH_THU.FLD_JOB_LEVEL = 1;
                        }
                        if (class15_0.NHAN_VAT_LINH_THU.FLD_LEVEL >= 50)
                        {
                              class15_0.NHAN_VAT_LINH_THU.FLD_JOB_LEVEL = 2;
                        }
                        if (class15_0.NHAN_VAT_LINH_THU.FLD_LEVEL >= 0x4b)
                        {
                              class15_0.NHAN_VAT_LINH_THU.FLD_JOB_LEVEL = 3;
                        }
                        class15_0.Method_SpPetExp();
                        class15_0.NHAN_VAT_LINH_THU.method_0();
                        class15_0.Method_SpPetHungry();
                        class15_0.Method_Cap_Nhat_Linh_Thu_Vo_Cong_Trang_Thai();
                  }
                  catch (Exception exception)
                  {
                        Form1.WriteLine(1, string.Concat(new object[] { "Pet Upgrade Error", base.UserSessionID, "|", this.ToString(), " ", exception.Message }));
                  }
            }

            private void e5(object sender, ElapsedEventArgs e)
            {
                  if (World.jlMsg == 1)
                  {
                        Form1.WriteLine(0, "Players_ automated attacks confirm events");
                  }
                  if (this.int_124 <= 0)
                  {
                        if (this.timer_2 != null)
                        {
                              this.timer_2.Enabled = false;
                              this.timer_2.Close();
                              this.timer_2.Dispose();
                              this.timer_2 = null;
                        }
                  }
                  else
                  {
                        this.RONG13_CONG_KICH_XAC_NHAN(this.int_124, this.int_125, this.int_126);
                        if (this.timer_2 != null)
                        {
                              this.timer_2.Enabled = false;
                              this.timer_2.Close();
                              this.timer_2.Dispose();
                              this.timer_2 = null;
                        }
                  }
            }

            private void e6(object sender, ElapsedEventArgs e)
            {
                  if (World.jlMsg == 1)
                  {
                        Form1.WriteLine(0, "Players_Auto attacks");
                  }
                  if (this.int_123 <= 0)
                  {
                        if (this.timer_1 != null)
                        {
                              this.timer_1.Enabled = false;
                              this.timer_1.Close();
                              this.timer_1.Dispose();
                              this.timer_1 = null;
                        }
                  }
                  else
                  {
                        this.PhysicalAttack2(0, this.int_123);
                        if (this.timer_1 != null)
                        {
                              this.timer_1.Enabled = false;
                              this.timer_1.Close();
                              this.timer_1.Dispose();
                              this.timer_1 = null;
                        }
                  }
            }

            public void EditGuildNoticeMessage(byte[] byte_5, int int_128)
            {
                  this.Packet_Modify(byte_5, int_128);
                  byte[] bytes = new byte[50];
                  for (int i = 0; i < 50; i++)
                  {
                        if (byte_5[15 + i] == 0)
                        {
                              break;
                        }
                        bytes[i] = byte_5[15 + i];
                  }
                  string str = Encoding.Default.GetString(bytes).Replace("\0", "");
                  if (str.IndexOf("测试", 0) != -1)
                  {
                        str = str.Remove(0, 2);
                  }
                  else if (((str.IndexOf("'") != -1) || (str.IndexOf(";") != -1)) || (str.IndexOf("--") != -1))
                  {
                        return;
                  }
                  if (base.Bang_phai_nhan_vat_thu_bac == 6)
                  {
                        string str2 = string.Format("UPDATE TBL_XWWL_Guild SET G_Notice =@sTemp WHERE G_Name =@Userid", base.GuildName, str);
                        SqlParameter[] parameterArray = new SqlParameter[] { SqlDBA.MakeInParam("@Userid", SqlDbType.VarChar, 30, base.GuildName), SqlDBA.MakeInParam("@sTemp", SqlDbType.VarChar, 30, str) };
                        DBA.smethod_4(str2, parameterArray);
                        this.KIEM_TRA_BANG_PHAI();
                  }
                  else
                  {
                        base.GameMessage("I'm sorry you're not the main fact, can not be modified gang announcement! !", 9, "system hint");
                  }
            }

            public void Emotion(int int_128)
            {
                  using (PacketData data = new PacketData())
                  {
                        data.Write2(int_128);
                        if (base.Client != null)
                        {
                              base.Client.method_5(data, 0x2400, base.UserSessionID, 0);
                        }
                        this.vmethod_2(data, 0x2400, base.UserSessionID, 0);
                  }
            }

            public void Emotion2(int ExpressionID)
            {
                  byte[] dst = Converter.hexStringToByte("AA5510000000002400010064000000000000000055AA");
                  Buffer.BlockCopy(BitConverter.GetBytes(ExpressionID), 0, dst, 11, 4);
                  Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, dst, 5, 2);
                  if (base.Client != null)
                  {
                        base.Client.method_11(dst, dst.Length);
                  }
                  this.vmethod_0(dst, dst.Length);
            }

            public void EnchantItem(byte[] byte_5, int int_128)
            {
                  if (World.jlMsg == 1)
                  {
                        Form1.WriteLine(0, "Players_合成系统");
                  }
                  if (!base.OpenWarehouse)
                  {
                        Form1.WriteLine(6, "合成系统 BUG![" + base.Userid + "]-[" + base.UserName + "]");
                  }
                  else
                  {
                        int num = BitConverter.ToUInt16(byte_5, 11);
                        int index = byte_5[0x1b];
                        try
                        {
                              byte[] buffer;
                              byte[] buffer2;
                              HcItimesClass class2;
                              HcItimesClass class3;
                              TBL_XWWL_ITEM tbl_xwwl_item;
                              HcItimesClass class4;
                              int num4;
                              TBL_XWWL_ITEM tbl_xwwl_item25;
                              this.Packet_Modify(byte_5, int_128);
                              base.OpenWarehouse = true;
                              byte[] dst = Converter.hexStringToByte("AA557700013302510068001500010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008813000000000000000000000000000000000000000000000000625855AA");
                              Buffer.BlockCopy(BitConverter.GetBytes((long)0L), 0, dst, 0x5f, 8);
                              if (int_128 > 30)
                              {
                                    buffer = new byte[4];
                                    Buffer.BlockCopy(byte_5, 11, buffer, 0, 4);
                                    num4 = num;
                                    if (num4 > 0x55)
                                    {
                                          goto Label_6C4E;
                                    }
                                    switch (num4)
                                    {
                                          case 10:
                                                goto Label_41AD;

                                          case 11:
                                                goto Label_4D7F;

                                          case 12:
                                                goto Label_4EA8;

                                          case 13:
                                                goto Label_5105;

                                          case 0x13:
                                                goto Label_5224;

                                          case 20:
                                                goto Label_5313;

                                          case 0x15:
                                                goto Label_5DFA;

                                          case 0x16:
                                                goto Label_600E;

                                          case 0x17:
                                                goto Label_612D;

                                          case 0x1d:
                                                goto Label_624C;

                                          case 30:
                                                goto Label_62ED;

                                          case 0x27:
                                                goto Label_1BC2;

                                          case 40:
                                                goto Label_1CCF;

                                          case 0x29:
                                                goto Label_3031;

                                          case 0x2a:
                                                goto Label_3152;

                                          case 0x2b:
                                                goto Label_3413;

                                          case 0x31:
                                                goto Label_3532;

                                          case 50:
                                                goto Label_35DA;

                                          case 0x33:
                                                goto Label_01D7;

                                          case 0x3b:
                                                goto Label_384D;

                                          case 60:
                                                goto Label_38D1;

                                          case 0x3d:
                                                goto Label_3DE7;

                                          case 0x3e:
                                                goto Label_3F6F;

                                          case 0x3f:
                                                goto Label_408E;

                                          case 0x45:
                                                goto Label_0308;

                                          case 70:
                                                goto Label_03AB;

                                          case 0x47:
                                                goto Label_0641;

                                          case 0x4f:
                                                goto Label_0762;

                                          case 80:
                                                goto Label_080A;

                                          case 0x51:
                                                goto Label_0E01;

                                          case 0x52:
                                                goto Label_1001;

                                          case 0x53:
                                                goto Label_11E3;

                                          case 0x55:
                                                goto Label_1A3A;
                                    }
                              }
                              return;
                              Label_01D7:;
                              try
                              {
                                    if ((this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(1) || base.TRANG_BI_LAN_BAO_VAY[index].Item_troi_chat) || (base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_THUOC_TINH_TANG_CUONG > 0))
                                    {
                                          return;
                                    }
                                    Buffer.BlockCopy(buffer, 0, dst, 11, 2);
                                    Buffer.BlockCopy(BitConverter.GetBytes(index), 0, dst, 0x1b, 4);
                                    Buffer.BlockCopy(base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_ID, 0, dst, 0x1f, 4);
                                    Buffer.BlockCopy(base.TRANG_BI_LAN_BAO_VAY[index].Item_thuoc_tinh, 0, dst, 0x27, 0x38);
                                    Buffer.BlockCopy(BitConverter.GetBytes(0), 0, dst, 0x5f, 4);
                                    Buffer.BlockCopy(BitConverter.GetBytes(0), 0, dst, 0x67, 4);
                                    HcItimesClass class9 = new HcItimesClass
                                    {
                                          VI_TRI = index,
                                          VAT_PHAM = base.TRANG_BI_LAN_BAO_VAY[index].Item_byte
                                    };
                                    base.TRANG_BI_LAN_BAO_VAY[index].bool_0 = true;
                                    this.HOP_THANH_VAT_PHAM_BIEU_MAU.Add(1, class9);
                                    goto Label_EE18;
                              }
                              catch (Exception exception)
                              {
                                    Form1.WriteLine(1, "合成系统 合成属性阶段 合成1 出错![" + base.Userid + "]-[" + base.UserName + "]" + exception.Message);
                                    return;
                              }
                              Label_0308:;
                              try
                              {
                                    HcItimesClass class10;
                                    if (this.HOP_THANH_VAT_PHAM_BIEU_MAU.TryGetValue(1, out class10))
                                    {
                                          base.TRANG_BI_LAN_BAO_VAY[class10.VI_TRI].bool_0 = false;
                                          this.HOP_THANH_VAT_PHAM_BIEU_MAU.Clear();
                                          this.HOP_THANH_HE_THONG_TACH_RA_SAI();
                                          this.NGUYEN_BAO_HOP_THANH_MO_RA = 0;
                                    }
                                    Buffer.BlockCopy(buffer, 0, dst, 11, 2);
                                    goto Label_EE18;
                              }
                              catch (Exception exception2)
                              {
                                    this.NGUYEN_BAO_HOP_THANH_MO_RA = 0;
                                    Form1.WriteLine(1, "合成系统 合成属性阶段 合成4 出错![" + base.Userid + "]-[" + base.UserName + "]" + exception2.Message);
                              }
                              return;
                              Label_03AB:;
                              try
                              {
                                    TBL_XWWL_ITEM tbl_xwwl_item2;
                                    byte[] buffer5 = new byte[4];
                                    byte[] buffer6 = new byte[4];
                                    Buffer.BlockCopy(byte_5, 15, buffer5, 0, 4);
                                    Buffer.BlockCopy(byte_5, 0x13, buffer6, 0, 4);
                                    if ((BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[BitConverter.ToInt32(buffer5, 0)].VAT_PHAM_ID, 0) == 0) || (this.HOP_THANH_VAT_PHAM_BIEU_MAU.Count <= 0))
                                    {
                                          return;
                                    }
                                    HcItimesClass class11 = null;
                                    if (this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(1))
                                    {
                                          class11 = this.HOP_THANH_VAT_PHAM_BIEU_MAU[1];
                                    }
                                    if ((BitConverter.ToInt64(base.TRANG_BI_LAN_BAO_VAY[class11.VI_TRI].Item_toan_bo_ID, 0) != BitConverter.ToInt64(class11.Item_toan_bo_ID, 0)) || !World.Itme.TryGetValue(BitConverter.ToInt32(class11.VAT_PHAMid, 0), out tbl_xwwl_item2))
                                    {
                                          return;
                                    }
                                    if ((((tbl_xwwl_item2.FLD_RESIDE2 != 1) && (tbl_xwwl_item2.FLD_RESIDE2 != 2)) && ((tbl_xwwl_item2.FLD_RESIDE2 != 4) && (tbl_xwwl_item2.FLD_RESIDE2 != 5))) && (tbl_xwwl_item2.FLD_RESIDE2 != 6))
                                    {
                                          Form1.WriteLine(6, "合成系统 强化 BUG1[" + BitConverter.ToInt32(class11.VAT_PHAMid, 0) + "]");
                                          return;
                                    }
                                    if (base.TRANG_BI_LAN_BAO_VAY[class11.VI_TRI].Item_troi_chat)
                                    {
                                          this.HOP_THANH_NHAC_NHO(num, 2, 0, base.TRANG_BI_LAN_BAO_VAY[class11.VI_TRI]);
                                          return;
                                    }
                                    class11.method_8();
                                    class11.PhaseType = 0;
                                    class11.NumberOfPhase = 0;
                                    class11.method_6();
                                    Buffer.BlockCopy(buffer, 0, dst, 11, 2);
                                    Buffer.BlockCopy(BitConverter.GetBytes(index), 0, dst, 0x1b, 4);
                                    this.LAM_GIAM_DI_VAT_PHAM(BitConverter.ToInt32(buffer5, 0), 1);
                                    if ((BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[class11.VI_TRI].VAT_PHAM_ID, 0) != 0) && (BitConverter.ToInt64(base.TRANG_BI_LAN_BAO_VAY[class11.VI_TRI].Item_toan_bo_ID, 0) == BitConverter.ToInt64(class11.Item_toan_bo_ID, 0)))
                                    {
                                          this.LAM_GIAM_DI_VAT_PHAM(class11.VI_TRI, 1);
                                          this.TANG_CUONG_VAT_PHAM(class11.Item_toan_bo_ID, class11.VAT_PHAMid, class11.VI_TRI, class11.VAT_PHAM_SO_LUONG, class11.Item_thuoc_tinh);
                                    }
                                    base.TRANG_BI_LAN_BAO_VAY[class11.VI_TRI].bool_0 = false;
                                    this.HOP_THANH_VAT_PHAM_BIEU_MAU.Clear();
                                    this.HOP_THANH_HE_THONG_TACH_RA_SAI();
                                    this.NGUYEN_BAO_HOP_THANH_MO_RA = 0;
                                    goto Label_EE18;
                              }
                              catch (Exception exception3)
                              {
                                    this.NGUYEN_BAO_HOP_THANH_MO_RA = 0;
                                    Form1.WriteLine(1, "合成系统 合成属性阶段 合成 出错![" + base.Userid + "]-[" + base.UserName + "]" + exception3.Message);
                                    return;
                              }
                              Label_0641:;
                              try
                              {
                                    if (this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(1) || base.TRANG_BI_LAN_BAO_VAY[index].Item_troi_chat)
                                    {
                                          return;
                                    }
                                    Buffer.BlockCopy(buffer, 0, dst, 11, 2);
                                    Buffer.BlockCopy(BitConverter.GetBytes(index), 0, dst, 0x1b, 4);
                                    Buffer.BlockCopy(base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_ID, 0, dst, 0x1f, 4);
                                    Buffer.BlockCopy(base.TRANG_BI_LAN_BAO_VAY[index].Item_thuoc_tinh, 0, dst, 0x27, 0x38);
                                    Buffer.BlockCopy(BitConverter.GetBytes(0), 0, dst, 0x5f, 4);
                                    Buffer.BlockCopy(BitConverter.GetBytes(0), 0, dst, 0x67, 4);
                                    HcItimesClass class12 = new HcItimesClass
                                    {
                                          VI_TRI = index,
                                          VAT_PHAM = base.TRANG_BI_LAN_BAO_VAY[index].Item_byte
                                    };
                                    base.TRANG_BI_LAN_BAO_VAY[index].bool_0 = true;
                                    this.HOP_THANH_VAT_PHAM_BIEU_MAU.Add(1, class12);
                                    goto Label_EE18;
                              }
                              catch (Exception exception4)
                              {
                                    Form1.WriteLine(1, "合成系统 合成属性阶段 合成1 出错![" + base.Userid + "]-[" + base.UserName + "]" + exception4.Message);
                                    return;
                              }
                              Label_0762:;
                              try
                              {
                                    HcItimesClass class13;
                                    if (this.HOP_THANH_VAT_PHAM_BIEU_MAU.TryGetValue(1, out class13))
                                    {
                                          base.TRANG_BI_LAN_BAO_VAY[class13.VI_TRI].bool_0 = false;
                                          this.HOP_THANH_VAT_PHAM_BIEU_MAU.Clear();
                                          this.HOP_THANH_HE_THONG_TACH_RA_SAI();
                                    }
                                    base.OpenWarehouse = false;
                                    this.NGUYEN_BAO_HOP_THANH_MO_RA = 0;
                                    Buffer.BlockCopy(buffer, 0, dst, 11, 2);
                                    goto Label_EE18;
                              }
                              catch (Exception exception5)
                              {
                                    this.NGUYEN_BAO_HOP_THANH_MO_RA = 0;
                                    Form1.WriteLine(1, "合成系统 合成属性阶段 合成4 出错![" + base.Userid + "]-[" + base.UserName + "]" + exception5.Message);
                                    return;
                              }
                              Label_080A:;
                              try
                              {
                                    TBL_XWWL_ITEM tbl_xwwl_item3;
                                    if (this.HOP_THANH_VAT_PHAM_BIEU_MAU.Count <= 0)
                                    {
                                          return;
                                    }
                                    HcItimesClass class14 = null;
                                    HcItimesClass class15 = null;
                                    HcItimesClass class16 = null;
                                    HcItimesClass class17 = null;
                                    if (this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(1))
                                    {
                                          class14 = this.HOP_THANH_VAT_PHAM_BIEU_MAU[1];
                                    }
                                    if (this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(2))
                                    {
                                          class15 = this.HOP_THANH_VAT_PHAM_BIEU_MAU[2];
                                    }
                                    if (this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(3))
                                    {
                                          class16 = this.HOP_THANH_VAT_PHAM_BIEU_MAU[3];
                                    }
                                    if (this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(4))
                                    {
                                          class17 = this.HOP_THANH_VAT_PHAM_BIEU_MAU[4];
                                    }
                                    if ((BitConverter.ToInt64(base.TRANG_BI_LAN_BAO_VAY[class14.VI_TRI].Item_toan_bo_ID, 0) != BitConverter.ToInt64(class14.Item_toan_bo_ID, 0)) || (BitConverter.ToInt64(base.TRANG_BI_LAN_BAO_VAY[class15.VI_TRI].Item_toan_bo_ID, 0) != BitConverter.ToInt64(class15.Item_toan_bo_ID, 0)))
                                    {
                                          return;
                                    }
                                    if (class16 == null)
                                    {
                                          this.HOP_THANH_NHAC_NHO(num, 7, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                          return;
                                    }
                                    if ((class17 != null) && (BitConverter.ToInt64(base.TRANG_BI_LAN_BAO_VAY[class17.VI_TRI].Item_toan_bo_ID, 0) != BitConverter.ToInt64(class17.Item_toan_bo_ID, 0)))
                                    {
                                          return;
                                    }
                                    if (base.TRANG_BI_LAN_BAO_VAY[class14.VI_TRI].Item_troi_chat)
                                    {
                                          this.HOP_THANH_NHAC_NHO(num, 2, 0, base.TRANG_BI_LAN_BAO_VAY[class14.VI_TRI]);
                                          return;
                                    }
                                    if (!World.Itme.TryGetValue(BitConverter.ToInt32(class14.VAT_PHAMid, 0), out tbl_xwwl_item3))
                                    {
                                          return;
                                    }
                                    if ((((tbl_xwwl_item3.FLD_RESIDE2 != 1) && (tbl_xwwl_item3.FLD_RESIDE2 != 2)) && ((tbl_xwwl_item3.FLD_RESIDE2 != 4) && (tbl_xwwl_item3.FLD_RESIDE2 != 5))) && (tbl_xwwl_item3.FLD_RESIDE2 != 6))
                                    {
                                          Form1.WriteLine(6, string.Concat(new object[] { "合成系统 WGF BUG11[", BitConverter.ToInt32(class14.VAT_PHAMid, 0), "]-[", BitConverter.ToInt32(class15.VAT_PHAMid, 0), "]" }));
                                          return;
                                    }
                                    Random random = new Random();
                                    char[] separator = new char[] { ';' };
                                    string[] strArray = World.Hop_thanh_xac_xuat_khong_che.Split(separator);
                                    double num7 = random.Next(int.Parse(strArray[0]), int.Parse(strArray[1]));
                                    double num8 = 0.0;
                                    if (class17 != null)
                                    {
                                          num4 = BitConverter.ToInt32(class17.VAT_PHAMid, 0);
                                          switch (num4)
                                          {
                                                case 0x2faf0803:
                                                      num7 += 5.0;
                                                      goto Label_0AEE;

                                                case 0x2faf0804:
                                                      num7 += 10.0;
                                                      goto Label_0AEE;

                                                case 0x2faf0805:
                                                      num7 += 15.0;
                                                      goto Label_0AEE;

                                                case 0x2faf081d:
                                                      num7 += 20.0;
                                                      goto Label_0AEE;
                                          }
                                          if (num4 == 0x3c14dc88)
                                          {
                                                num7 += 25.0;
                                          }
                                    }
                                    Label_0AEE:
                                    if (base.FLD_trang_bi_them_vao_hop_thanh_ty_le_thanh_cong_ti_le_phan_tram != 0.0)
                                    {
                                          num7 += 100.0 * base.FLD_trang_bi_them_vao_hop_thanh_ty_le_thanh_cong_ti_le_phan_tram;
                                    }
                                    if (base.dictionary_3.ContainsKey(0x3c14dd38))
                                    {
                                          num7 += 10.0;
                                    }
                                    if (this.NGUYEN_BAO_HOP_THANH_MO_RA == 1)
                                    {
                                          num7 += 5.0;
                                    }
                                    if (base.FLD_VIP == 1)
                                    {
                                          num7 += 100.0 * World.VIP_Hop_thanh_xac_xuat;
                                    }
                                    if (World.Hop_thanh_xac_xuat != 0.0)
                                    {
                                          num7 += 100.0 * World.Hop_thanh_xac_xuat;
                                    }
                                    if (num7 >= num8)
                                    {
                                          class14.FLD_FJ_tien_hoa = class15.FLD_FJ_tien_hoa;
                                          if (base.FLD_VIP == 1)
                                          {
                                                base.GameMessage("Congratulations, VIP customers improve synthesis rate" + (World.VIP_Hop_thanh_xac_xuat * 100.0) + "%", 9, "system hint");
                                          }
                                    }
                                    else
                                    {
                                          base.GameMessage("VIP customers to improve synthesis rate" + (World.VIP_Hop_thanh_xac_xuat * 100.0) + "%", 9, "system hint");
                                          Buffer.BlockCopy(BitConverter.GetBytes(0), 0, dst, 13, 4);
                                    }
                                    Buffer.BlockCopy(buffer, 0, dst, 11, 2);
                                    Buffer.BlockCopy(class14.VAT_PHAM, 0, dst, 0x1f, 4);
                                    Buffer.BlockCopy(class14.VAT_PHAM, 0, dst, 0x27, 20);
                                    Buffer.BlockCopy(BitConverter.GetBytes(index), 0, dst, 0x1b, 4);
                                    Buffer.BlockCopy(base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_ID, 0, dst, 0x1f, 4);
                                    Buffer.BlockCopy(base.TRANG_BI_LAN_BAO_VAY[index].Item_thuoc_tinh, 0, dst, 0x27, 0x38);
                                    Buffer.BlockCopy(BitConverter.GetBytes(0), 0, dst, 0x5f, 4);
                                    Buffer.BlockCopy(BitConverter.GetBytes(0), 0, dst, 0x67, 4);
                                    this.LAM_GIAM_DI_VAT_PHAM(class15.VI_TRI, 1);
                                    if (class15.FLD_FJ_tien_hoa == 1)
                                    {
                                          this.LAM_GIAM_DI_VAT_PHAM(class16.VI_TRI, 1);
                                    }
                                    else if (class15.FLD_FJ_tien_hoa == 2)
                                    {
                                          this.LAM_GIAM_DI_VAT_PHAM(class16.VI_TRI, 1);
                                    }
                                    if (class17 != null)
                                    {
                                          this.LAM_GIAM_DI_VAT_PHAM(class17.VI_TRI, 1);
                                    }
                                    if ((BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[class14.VI_TRI].VAT_PHAM_ID, 0) != 0) && (BitConverter.ToInt64(base.TRANG_BI_LAN_BAO_VAY[class14.VI_TRI].Item_toan_bo_ID, 0) == BitConverter.ToInt64(class14.Item_toan_bo_ID, 0)))
                                    {
                                          this.LAM_GIAM_DI_VAT_PHAM(class14.VI_TRI, 1);
                                          this.TANG_CUONG_VAT_PHAM(class14.Item_toan_bo_ID, class14.VAT_PHAMid, class14.VI_TRI, class14.VAT_PHAM_SO_LUONG, class14.Item_thuoc_tinh);
                                    }
                                    base.TRANG_BI_LAN_BAO_VAY[class14.VI_TRI].bool_0 = false;
                                    this.HOP_THANH_VAT_PHAM_BIEU_MAU.Clear();
                                    this.HOP_THANH_HE_THONG_TACH_RA_SAI();
                                    this.NGUYEN_BAO_HOP_THANH_MO_RA = 0;
                                    goto Label_EE18;
                              }
                              catch (Exception exception6)
                              {
                                    this.NGUYEN_BAO_HOP_THANH_MO_RA = 0;
                                    Form1.WriteLine(1, "合成系统 合成属性 合成 出错![" + base.Userid + "]-[" + base.UserName + "]" + exception6.Message);
                                    return;
                              }
                              Label_0E01:;
                              try
                              {
                                    TBL_XWWL_ITEM tbl_xwwl_item4;
                                    if (!World.Itme.TryGetValue(BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_ID, 0), out tbl_xwwl_item4))
                                    {
                                          return;
                                    }
                                    if ((((tbl_xwwl_item4.FLD_RESIDE2 != 1) && (tbl_xwwl_item4.FLD_RESIDE2 != 2)) && ((tbl_xwwl_item4.FLD_RESIDE2 != 5) && (tbl_xwwl_item4.FLD_RESIDE2 != 6))) && (tbl_xwwl_item4.FLD_RESIDE2 != 4))
                                    {
                                          this.HOP_THANH_NHAC_NHO(num, 12, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                          return;
                                    }
                                    if (base.TRANG_BI_LAN_BAO_VAY[index].bool_0)
                                    {
                                          return;
                                    }
                                    if (base.TRANG_BI_LAN_BAO_VAY[index].FLD_FJ_tien_hoa == 2)
                                    {
                                          this.HOP_THANH_NHAC_NHO(num, 12, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                          return;
                                    }
                                    if (((base.TRANG_BI_LAN_BAO_VAY[index].FLD_MAGIC0 == 0) && (base.TRANG_BI_LAN_BAO_VAY[index].FLD_MAGIC1 == 0)) && (base.TRANG_BI_LAN_BAO_VAY[index].FLD_FJ_thuc_tinh == 0))
                                    {
                                          this.HOP_THANH_NHAC_NHO(num, 12, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                          return;
                                    }
                                    if (this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(1))
                                    {
                                          return;
                                    }
                                    Buffer.BlockCopy(buffer, 0, dst, 11, 2);
                                    Buffer.BlockCopy(BitConverter.GetBytes(index), 0, dst, 0x1b, 4);
                                    Buffer.BlockCopy(base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_ID, 0, dst, 0x1f, 4);
                                    Buffer.BlockCopy(base.TRANG_BI_LAN_BAO_VAY[index].Item_thuoc_tinh, 0, dst, 0x27, 0x38);
                                    Buffer.BlockCopy(BitConverter.GetBytes(0), 0, dst, 0x5f, 4);
                                    Buffer.BlockCopy(BitConverter.GetBytes(0), 0, dst, 0x67, 4);
                                    HcItimesClass class18 = new HcItimesClass
                                    {
                                          VI_TRI = index,
                                          VAT_PHAM = base.TRANG_BI_LAN_BAO_VAY[index].Item_byte
                                    };
                                    base.TRANG_BI_LAN_BAO_VAY[index].bool_0 = true;
                                    this.HOP_THANH_VAT_PHAM_BIEU_MAU.Add(1, class18);
                                    goto Label_EE18;
                              }
                              catch (Exception exception7)
                              {
                                    Form1.WriteLine(1, "合成系统 合成属性 合成1 出错![" + base.Userid + "]-[" + base.UserName + "]" + exception7.Message);
                                    return;
                              }
                              Label_1001:;
                              try
                              {
                                    if (this.HOP_THANH_VAT_PHAM_BIEU_MAU.Count == 0)
                                    {
                                          this.HOP_THANH_NHAC_NHO(num, 5, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                          return;
                                    }
                                    if ((this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(2) || base.TRANG_BI_LAN_BAO_VAY[index].bool_0) || ((base.TRANG_BI_LAN_BAO_VAY[index].FLD_FJ_tien_hoa <= 0) || base.TRANG_BI_LAN_BAO_VAY[index].Item_troi_chat))
                                    {
                                          return;
                                    }
                                    HcItimesClass class19 = null;
                                    if (this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(1))
                                    {
                                          class19 = this.HOP_THANH_VAT_PHAM_BIEU_MAU[1];
                                    }
                                    if (base.TRANG_BI_LAN_BAO_VAY[index].GetItem_ID != BitConverter.ToInt32(class19.VAT_PHAMid, 0))
                                    {
                                          this.HOP_THANH_NHAC_NHO(num, 10, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                          return;
                                    }
                                    if (base.TRANG_BI_LAN_BAO_VAY[index].FLD_FJ_tien_hoa <= class19.FLD_FJ_tien_hoa)
                                    {
                                          this.HOP_THANH_NHAC_NHO(num, 6, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                          return;
                                    }
                                    Buffer.BlockCopy(buffer, 0, dst, 11, 2);
                                    Buffer.BlockCopy(BitConverter.GetBytes(index), 0, dst, 0x1b, 4);
                                    Buffer.BlockCopy(base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_ID, 0, dst, 0x1f, 4);
                                    Buffer.BlockCopy(base.TRANG_BI_LAN_BAO_VAY[index].Item_thuoc_tinh, 0, dst, 0x27, 0x38);
                                    Buffer.BlockCopy(BitConverter.GetBytes(0), 0, dst, 0x5f, 4);
                                    Buffer.BlockCopy(BitConverter.GetBytes(0), 0, dst, 0x67, 4);
                                    HcItimesClass class20 = new HcItimesClass
                                    {
                                          VI_TRI = index,
                                          VAT_PHAM = base.TRANG_BI_LAN_BAO_VAY[index].Item_byte
                                    };
                                    base.TRANG_BI_LAN_BAO_VAY[index].bool_0 = true;
                                    this.HOP_THANH_VAT_PHAM_BIEU_MAU.Add(2, class20);
                                    goto Label_EE18;
                              }
                              catch (Exception exception8)
                              {
                                    Form1.WriteLine(1, "合成系统 合成属性 合成1 出错![" + base.Userid + "]-[" + base.UserName + "]" + exception8.Message);
                                    return;
                              }
                              Label_11E3:;
                              try
                              {
                                    TBL_XWWL_ITEM tbl_xwwl_item5;
                                    if ((this.HOP_THANH_VAT_PHAM_BIEU_MAU.Count == 0) || this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(3))
                                    {
                                          return;
                                    }
                                    HcItimesClass class21 = null;
                                    HcItimesClass class22 = null;
                                    if (this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(1))
                                    {
                                          class21 = this.HOP_THANH_VAT_PHAM_BIEU_MAU[1];
                                    }
                                    if (this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(2))
                                    {
                                          class22 = this.HOP_THANH_VAT_PHAM_BIEU_MAU[2];
                                    }
                                    if (!World.Itme.TryGetValue(BitConverter.ToInt32(class21.VAT_PHAMid, 0), out tbl_xwwl_item5))
                                    {
                                          return;
                                    }
                                    if (tbl_xwwl_item5.FLD_RESIDE2 == 4)
                                    {
                                          if (base.TRANG_BI_LAN_BAO_VAY[index].GetItem_ID != 0x35a4ea91L)
                                          {
                                                this.HOP_THANH_NHAC_NHO(num, 8, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                          }
                                          else if (tbl_xwwl_item5.FLD_JOB_LEVEL == 2)
                                          {
                                                if (base.TRANG_BI_LAN_BAO_VAY[index].GetItem_ID != 0x35a4ea91L)
                                                {
                                                      this.HOP_THANH_NHAC_NHO(num, 8, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                                }
                                                else if (class22.FLD_FJ_tien_hoa == 1)
                                                {
                                                      if (base.TRANG_BI_LAN_BAO_VAY[index].Get_VAT_PHAM_SO_LUONG >= 1)
                                                      {
                                                            goto Label_1927;
                                                      }
                                                      this.HOP_THANH_NHAC_NHO(num, 9, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                                }
                                                else
                                                {
                                                      if ((class22.FLD_FJ_tien_hoa != 2) || (base.TRANG_BI_LAN_BAO_VAY[index].Get_VAT_PHAM_SO_LUONG >= 1))
                                                      {
                                                            goto Label_1927;
                                                      }
                                                      this.HOP_THANH_NHAC_NHO(num, 9, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                                }
                                          }
                                          else if (tbl_xwwl_item5.FLD_JOB_LEVEL == 3)
                                          {
                                                if (base.TRANG_BI_LAN_BAO_VAY[index].GetItem_ID != 0x35a4ea91L)
                                                {
                                                      this.HOP_THANH_NHAC_NHO(num, 8, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                                }
                                                else if (class22.FLD_FJ_tien_hoa == 1)
                                                {
                                                      if (base.TRANG_BI_LAN_BAO_VAY[index].Get_VAT_PHAM_SO_LUONG >= 1)
                                                      {
                                                            goto Label_1927;
                                                      }
                                                      this.HOP_THANH_NHAC_NHO(num, 9, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                                }
                                                else
                                                {
                                                      if ((class22.FLD_FJ_tien_hoa != 2) || (base.TRANG_BI_LAN_BAO_VAY[index].Get_VAT_PHAM_SO_LUONG >= 1))
                                                      {
                                                            goto Label_1927;
                                                      }
                                                      this.HOP_THANH_NHAC_NHO(num, 9, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                                }
                                          }
                                          else if (tbl_xwwl_item5.FLD_JOB_LEVEL == 4)
                                          {
                                                if (base.TRANG_BI_LAN_BAO_VAY[index].GetItem_ID != 0x35a4ea91L)
                                                {
                                                      this.HOP_THANH_NHAC_NHO(num, 8, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                                }
                                                else if (class22.FLD_FJ_tien_hoa == 1)
                                                {
                                                      if (base.TRANG_BI_LAN_BAO_VAY[index].Get_VAT_PHAM_SO_LUONG >= 1)
                                                      {
                                                            goto Label_1927;
                                                      }
                                                      this.HOP_THANH_NHAC_NHO(num, 9, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                                }
                                                else
                                                {
                                                      if ((class22.FLD_FJ_tien_hoa != 2) || (base.TRANG_BI_LAN_BAO_VAY[index].Get_VAT_PHAM_SO_LUONG >= 1))
                                                      {
                                                            goto Label_1927;
                                                      }
                                                      this.HOP_THANH_NHAC_NHO(num, 9, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                                }
                                          }
                                          else if (tbl_xwwl_item5.FLD_JOB_LEVEL == 5)
                                          {
                                                if (base.TRANG_BI_LAN_BAO_VAY[index].GetItem_ID != 0x35a4ea91L)
                                                {
                                                      this.HOP_THANH_NHAC_NHO(num, 8, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                                }
                                                else if (class22.FLD_FJ_tien_hoa == 1)
                                                {
                                                      if (base.TRANG_BI_LAN_BAO_VAY[index].Get_VAT_PHAM_SO_LUONG >= 1)
                                                      {
                                                            goto Label_1927;
                                                      }
                                                      this.HOP_THANH_NHAC_NHO(num, 9, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                                }
                                                else
                                                {
                                                      if ((class22.FLD_FJ_tien_hoa != 2) || (base.TRANG_BI_LAN_BAO_VAY[index].Get_VAT_PHAM_SO_LUONG >= 1))
                                                      {
                                                            goto Label_1927;
                                                      }
                                                      this.HOP_THANH_NHAC_NHO(num, 9, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                                }
                                          }
                                          else
                                          {
                                                if (tbl_xwwl_item5.FLD_JOB_LEVEL <= 5)
                                                {
                                                      goto Label_1927;
                                                }
                                                if (base.TRANG_BI_LAN_BAO_VAY[index].GetItem_ID != 0x35a4ea91L)
                                                {
                                                      this.HOP_THANH_NHAC_NHO(num, 8, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                                }
                                                else if (class22.FLD_FJ_tien_hoa == 1)
                                                {
                                                      if (base.TRANG_BI_LAN_BAO_VAY[index].Get_VAT_PHAM_SO_LUONG >= 1)
                                                      {
                                                            goto Label_1927;
                                                      }
                                                      this.HOP_THANH_NHAC_NHO(num, 9, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                                }
                                                else
                                                {
                                                      if ((class22.FLD_FJ_tien_hoa != 2) || (base.TRANG_BI_LAN_BAO_VAY[index].Get_VAT_PHAM_SO_LUONG >= 1))
                                                      {
                                                            goto Label_1927;
                                                      }
                                                      this.HOP_THANH_NHAC_NHO(num, 9, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                                }
                                          }
                                          return;
                                    }
                                    if (((tbl_xwwl_item5.FLD_RESIDE2 == 1) || (tbl_xwwl_item5.FLD_RESIDE2 == 2)) || ((tbl_xwwl_item5.FLD_RESIDE2 == 5) || (tbl_xwwl_item5.FLD_RESIDE2 == 6)))
                                    {
                                          if (base.TRANG_BI_LAN_BAO_VAY[index].GetItem_ID != 0x35a4ea91L)
                                          {
                                                this.HOP_THANH_NHAC_NHO(num, 8, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                                return;
                                          }
                                          if (tbl_xwwl_item5.FLD_JOB_LEVEL == 2)
                                          {
                                                if (base.TRANG_BI_LAN_BAO_VAY[index].GetItem_ID != 0x35a4ea91L)
                                                {
                                                      this.HOP_THANH_NHAC_NHO(num, 8, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                                }
                                                else if (class22.FLD_FJ_tien_hoa == 1)
                                                {
                                                      if (base.TRANG_BI_LAN_BAO_VAY[index].Get_VAT_PHAM_SO_LUONG >= 1)
                                                      {
                                                            goto Label_1927;
                                                      }
                                                      this.HOP_THANH_NHAC_NHO(num, 9, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                                }
                                                else
                                                {
                                                      if ((class22.FLD_FJ_tien_hoa != 2) || (base.TRANG_BI_LAN_BAO_VAY[index].Get_VAT_PHAM_SO_LUONG >= 1))
                                                      {
                                                            goto Label_1927;
                                                      }
                                                      this.HOP_THANH_NHAC_NHO(num, 9, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                                }
                                                return;
                                          }
                                          if (tbl_xwwl_item5.FLD_JOB_LEVEL == 3)
                                          {
                                                if (base.TRANG_BI_LAN_BAO_VAY[index].GetItem_ID != 0x35a4ea91L)
                                                {
                                                      this.HOP_THANH_NHAC_NHO(num, 8, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                                }
                                                else if (class22.FLD_FJ_tien_hoa == 1)
                                                {
                                                      if (base.TRANG_BI_LAN_BAO_VAY[index].Get_VAT_PHAM_SO_LUONG >= 1)
                                                      {
                                                            goto Label_1927;
                                                      }
                                                      this.HOP_THANH_NHAC_NHO(num, 9, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                                }
                                                else
                                                {
                                                      if ((class22.FLD_FJ_tien_hoa != 2) || (base.TRANG_BI_LAN_BAO_VAY[index].Get_VAT_PHAM_SO_LUONG >= 1))
                                                      {
                                                            goto Label_1927;
                                                      }
                                                      this.HOP_THANH_NHAC_NHO(num, 9, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                                }
                                                return;
                                          }
                                          if (tbl_xwwl_item5.FLD_JOB_LEVEL == 4)
                                          {
                                                if (base.TRANG_BI_LAN_BAO_VAY[index].GetItem_ID != 0x35a4ea91L)
                                                {
                                                      this.HOP_THANH_NHAC_NHO(num, 8, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                                }
                                                else if (class22.FLD_FJ_tien_hoa == 1)
                                                {
                                                      if (base.TRANG_BI_LAN_BAO_VAY[index].Get_VAT_PHAM_SO_LUONG >= 1)
                                                      {
                                                            goto Label_1927;
                                                      }
                                                      this.HOP_THANH_NHAC_NHO(num, 9, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                                }
                                                else
                                                {
                                                      if ((class22.FLD_FJ_tien_hoa != 2) || (base.TRANG_BI_LAN_BAO_VAY[index].Get_VAT_PHAM_SO_LUONG >= 1))
                                                      {
                                                            goto Label_1927;
                                                      }
                                                      this.HOP_THANH_NHAC_NHO(num, 9, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                                }
                                                return;
                                          }
                                          if (tbl_xwwl_item5.FLD_JOB_LEVEL == 5)
                                          {
                                                if (base.TRANG_BI_LAN_BAO_VAY[index].GetItem_ID != 0x35a4ea91L)
                                                {
                                                      this.HOP_THANH_NHAC_NHO(num, 8, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                                }
                                                else if (class22.FLD_FJ_tien_hoa == 1)
                                                {
                                                      if (base.TRANG_BI_LAN_BAO_VAY[index].Get_VAT_PHAM_SO_LUONG >= 1)
                                                      {
                                                            goto Label_1927;
                                                      }
                                                      this.HOP_THANH_NHAC_NHO(num, 9, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                                }
                                                else
                                                {
                                                      if ((class22.FLD_FJ_tien_hoa != 2) || (base.TRANG_BI_LAN_BAO_VAY[index].Get_VAT_PHAM_SO_LUONG >= 1))
                                                      {
                                                            goto Label_1927;
                                                      }
                                                      this.HOP_THANH_NHAC_NHO(num, 9, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                                }
                                                return;
                                          }
                                          if (tbl_xwwl_item5.FLD_JOB_LEVEL > 5)
                                          {
                                                if (base.TRANG_BI_LAN_BAO_VAY[index].GetItem_ID != 0x35a4ea91L)
                                                {
                                                      this.HOP_THANH_NHAC_NHO(num, 8, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                                      return;
                                                }
                                                if (class22.FLD_FJ_tien_hoa == 1)
                                                {
                                                      if (base.TRANG_BI_LAN_BAO_VAY[index].Get_VAT_PHAM_SO_LUONG < 1)
                                                      {
                                                            this.HOP_THANH_NHAC_NHO(num, 9, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                                            return;
                                                      }
                                                }
                                                else if ((class22.FLD_FJ_tien_hoa == 2) && (base.TRANG_BI_LAN_BAO_VAY[index].Get_VAT_PHAM_SO_LUONG < 1))
                                                {
                                                      this.HOP_THANH_NHAC_NHO(num, 9, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                                      return;
                                                }
                                          }
                                    }
                                    Label_1927:
                                    Buffer.BlockCopy(buffer, 0, dst, 11, 2);
                                    Buffer.BlockCopy(BitConverter.GetBytes(index), 0, dst, 0x1b, 4);
                                    Buffer.BlockCopy(base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_ID, 0, dst, 0x1f, 4);
                                    if (class22.FLD_FJ_tien_hoa == 1)
                                    {
                                          Buffer.BlockCopy(BitConverter.GetBytes(1), 0, dst, 0x27, 2);
                                    }
                                    else
                                    {
                                          Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 0x27, 2);
                                    }
                                    Buffer.BlockCopy(BitConverter.GetBytes(0), 0, dst, 0x5f, 4);
                                    Buffer.BlockCopy(BitConverter.GetBytes(0), 0, dst, 0x67, 4);
                                    HcItimesClass class23 = new HcItimesClass
                                    {
                                          VI_TRI = index,
                                          VAT_PHAM = base.TRANG_BI_LAN_BAO_VAY[index].Item_byte
                                    };
                                    this.HOP_THANH_VAT_PHAM_BIEU_MAU.Add(3, class23);
                                    base.TRANG_BI_LAN_BAO_VAY[index].bool_0 = true;
                                    goto Label_EE18;
                              }
                              catch (Exception exception9)
                              {
                                    Form1.WriteLine(1, "合成系统 合成属性 合成3 出错![" + base.Userid + "]-[" + base.UserName + "]" + exception9.Message);
                                    return;
                              }
                              Label_1A3A:;
                              try
                              {
                                    if (((this.HOP_THANH_VAT_PHAM_BIEU_MAU.Count == 0) || this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(4)) || ((((base.TRANG_BI_LAN_BAO_VAY[index].GetItem_ID != 0x2faf0803L) && (base.TRANG_BI_LAN_BAO_VAY[index].GetItem_ID != 0x2faf0804L)) && ((base.TRANG_BI_LAN_BAO_VAY[index].GetItem_ID != 0x2faf0805L) && (base.TRANG_BI_LAN_BAO_VAY[index].GetItem_ID != 0x2faf081dL))) && (base.TRANG_BI_LAN_BAO_VAY[index].GetItem_ID != 0x3c14dc88L)))
                                    {
                                          return;
                                    }
                                    Buffer.BlockCopy(buffer, 0, dst, 11, 2);
                                    Buffer.BlockCopy(BitConverter.GetBytes(index), 0, dst, 0x1b, 4);
                                    Buffer.BlockCopy(base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_ID, 0, dst, 0x1f, 4);
                                    Buffer.BlockCopy(base.TRANG_BI_LAN_BAO_VAY[index].Item_thuoc_tinh, 0, dst, 0x27, 0x38);
                                    Buffer.BlockCopy(BitConverter.GetBytes(0), 0, dst, 0x5f, 4);
                                    Buffer.BlockCopy(BitConverter.GetBytes(0), 0, dst, 0x67, 4);
                                    HcItimesClass class24 = new HcItimesClass
                                    {
                                          VI_TRI = index,
                                          VAT_PHAM = base.TRANG_BI_LAN_BAO_VAY[index].Item_byte
                                    };
                                    base.TRANG_BI_LAN_BAO_VAY[index].bool_0 = true;
                                    this.HOP_THANH_VAT_PHAM_BIEU_MAU.Add(4, class24);
                                    goto Label_EE18;
                              }
                              catch (Exception exception10)
                              {
                                    Form1.WriteLine(1, "合成系统 合成属性阶段 合成3 出错![" + base.Userid + "]-[" + base.UserName + "]" + exception10.Message);
                                    return;
                              }
                              Label_1BC2:;
                              try
                              {
                                    HcItimesClass class25;
                                    if (this.HOP_THANH_VAT_PHAM_BIEU_MAU.TryGetValue(1, out class25))
                                    {
                                          base.TRANG_BI_LAN_BAO_VAY[class25.VI_TRI].bool_0 = false;
                                    }
                                    if (this.HOP_THANH_VAT_PHAM_BIEU_MAU.TryGetValue(2, out class25))
                                    {
                                          base.TRANG_BI_LAN_BAO_VAY[class25.VI_TRI].bool_0 = false;
                                    }
                                    if (this.HOP_THANH_VAT_PHAM_BIEU_MAU.TryGetValue(3, out class25))
                                    {
                                          base.TRANG_BI_LAN_BAO_VAY[class25.VI_TRI].bool_0 = false;
                                    }
                                    if (this.HOP_THANH_VAT_PHAM_BIEU_MAU.TryGetValue(4, out class25))
                                    {
                                          base.TRANG_BI_LAN_BAO_VAY[class25.VI_TRI].bool_0 = false;
                                    }
                                    this.NGUYEN_BAO_HOP_THANH_MO_RA = 0;
                                    this.HOP_THANH_VAT_PHAM_BIEU_MAU.Clear();
                                    Buffer.BlockCopy(buffer, 0, dst, 11, 2);
                                    this.HOP_THANH_HE_THONG_TACH_RA_SAI();
                                    goto Label_EE18;
                              }
                              catch (Exception exception11)
                              {
                                    this.NGUYEN_BAO_HOP_THANH_MO_RA = 0;
                                    Form1.WriteLine(1, "合成系统 再造合成石-取消 出错![" + base.Userid + "]-[" + base.UserName + "]" + exception11.Message);
                                    return;
                              }
                              Label_1CCF:;
                              try
                              {
                                    TBL_XWWL_ITEM tbl_xwwl_item6;
                                    byte[] buffer7 = new byte[4];
                                    byte[] buffer8 = new byte[4];
                                    Buffer.BlockCopy(byte_5, 15, buffer7, 0, 4);
                                    Buffer.BlockCopy(byte_5, 0x13, buffer8, 0, 4);
                                    if ((BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[BitConverter.ToInt32(buffer7, 0)].VAT_PHAM_ID, 0) == 0) || (this.HOP_THANH_VAT_PHAM_BIEU_MAU.Count <= 0))
                                    {
                                          return;
                                    }
                                    HcItimesClass class26 = null;
                                    HcItimesClass class27 = null;
                                    HcItimesClass class28 = null;
                                    HcItimesClass class29 = null;
                                    HcItimesClass class30 = null;
                                    if (this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(1))
                                    {
                                          class26 = this.HOP_THANH_VAT_PHAM_BIEU_MAU[1];
                                    }
                                    if (this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(2))
                                    {
                                          class27 = this.HOP_THANH_VAT_PHAM_BIEU_MAU[2];
                                    }
                                    if (this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(3))
                                    {
                                          class28 = this.HOP_THANH_VAT_PHAM_BIEU_MAU[3];
                                    }
                                    if (this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(4))
                                    {
                                          class29 = this.HOP_THANH_VAT_PHAM_BIEU_MAU[4];
                                    }
                                    if (this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(5))
                                    {
                                          class30 = this.HOP_THANH_VAT_PHAM_BIEU_MAU[5];
                                    }
                                    if ((((((BitConverter.ToInt64(base.TRANG_BI_LAN_BAO_VAY[class26.VI_TRI].Item_toan_bo_ID, 0) != BitConverter.ToInt64(class26.Item_toan_bo_ID, 0)) || (class27 == null)) || ((class27 != null) && (BitConverter.ToInt64(base.TRANG_BI_LAN_BAO_VAY[class27.VI_TRI].Item_toan_bo_ID, 0) != BitConverter.ToInt64(class27.Item_toan_bo_ID, 0)))) || ((class28 != null) && (BitConverter.ToInt64(base.TRANG_BI_LAN_BAO_VAY[class28.VI_TRI].Item_toan_bo_ID, 0) != BitConverter.ToInt64(class28.Item_toan_bo_ID, 0)))) || ((class29 != null) && (BitConverter.ToInt64(base.TRANG_BI_LAN_BAO_VAY[class29.VI_TRI].Item_toan_bo_ID, 0) != BitConverter.ToInt64(class29.Item_toan_bo_ID, 0)))) || ((class30 != null) && (BitConverter.ToInt64(base.TRANG_BI_LAN_BAO_VAY[class30.VI_TRI].Item_toan_bo_ID, 0) != BitConverter.ToInt64(class30.Item_toan_bo_ID, 0))))
                                    {
                                          return;
                                    }
                                    if (base.TRANG_BI_LAN_BAO_VAY[class26.VI_TRI].Item_troi_chat)
                                    {
                                          this.HOP_THANH_NHAC_NHO(num, 2, 0, base.TRANG_BI_LAN_BAO_VAY[class26.VI_TRI]);
                                          return;
                                    }
                                    class26.method_5();
                                    class26.method_8();
                                    if (!World.Itme.TryGetValue(BitConverter.ToInt32(class26.VAT_PHAMid, 0), out tbl_xwwl_item6))
                                    {
                                          return;
                                    }
                                    if ((((tbl_xwwl_item6.FLD_RESIDE2 != 1) && (tbl_xwwl_item6.FLD_RESIDE2 != 2)) && ((tbl_xwwl_item6.FLD_RESIDE2 != 4) && (tbl_xwwl_item6.FLD_RESIDE2 != 5))) && ((tbl_xwwl_item6.FLD_RESIDE2 != 6) && (tbl_xwwl_item6.FLD_RESIDE2 != 14)))
                                    {
                                          Form1.WriteLine(6, string.Concat(new object[] { "合成系统 强化 BUG1[", BitConverter.ToInt32(class26.VAT_PHAMid, 0), "]-[", BitConverter.ToInt32(class27.VAT_PHAMid, 0), "]" }));
                                          return;
                                    }
                                    double num9 = new Random().Next(1, 160);
                                    double num10 = class26.StrengthNumber * 10;
                                    if (class26.StrengthNumber >= 15)
                                    {
                                          this.HOP_THANH_VAT_PHAM_BIEU_MAU.Clear();
                                          goto Label_EE18;
                                    }
                                    if (class30 != null)
                                    {
                                          num4 = BitConverter.ToInt32(class30.VAT_PHAMid, 0);
                                          switch (num4)
                                          {
                                                case 0x2faf0803:
                                                      num9 += 3.0;
                                                      goto Label_2072;

                                                case 0x2faf0804:
                                                      num9 += 5.0;
                                                      goto Label_2072;

                                                case 0x2faf0805:
                                                      num9 += 10.0;
                                                      goto Label_2072;

                                                case 0x2faf081d:
                                                      num9 += 10.0;
                                                      goto Label_2072;
                                          }
                                          if (num4 == 0x3c14dc88)
                                          {
                                                num9 += 25.0;
                                          }
                                    }
                                    Label_2072:
                                    if (base.FLD_trang_bi_them_vao_hop_thanh_ty_le_thanh_cong_ti_le_phan_tram != 0.0)
                                    {
                                          num9 += 100.0 * base.FLD_trang_bi_them_vao_hop_thanh_ty_le_thanh_cong_ti_le_phan_tram;
                                    }
                                    if (base.dictionary_3.ContainsKey(0x3c14dd38))
                                    {
                                          num9 += 10.0;
                                    }
                                    if (this.NGUYEN_BAO_HOP_THANH_MO_RA == 1)
                                    {
                                          num9 += 5.0;
                                    }
                                    if (base.FLD_VIP == 1)
                                    {
                                          num9 += 100.0 * World.VIP_Hop_thanh_xac_xuat;
                                    }
                                    if (World.Hop_thanh_xac_xuat != 0.0)
                                    {
                                          num9 += 100.0 * World.Hop_thanh_xac_xuat;
                                    }
                                    if (((class26.Thuoc_tinh_1.Number_Prop + class26.Thuoc_tinh_2.Number_Prop) != 0) && (class28 == null))
                                    {
                                          base.GameMessage("Stone put less at least have put 2", 9, "system hint");
                                          return;
                                    }
                                    if ((((class26.Thuoc_tinh_1.Number_Prop + class26.Thuoc_tinh_2.Number_Prop) != 0) && ((class26.Thuoc_tinh_3.Number_Prop + class26.Thuoc_tinh_4.Number_Prop) != 0)) && (class29 == null))
                                    {
                                          base.GameMessage("Stone put less at least have to put 3", 9, "system hint");
                                          return;
                                    }
                                    if (BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[BitConverter.ToInt32(buffer7, 0)].VAT_PHAM_ID, 0) == 0x3c14dc6f)
                                    {
                                          class26.StrengthNumber = 7;
                                    }
                                    if (BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[BitConverter.ToInt32(buffer7, 0)].VAT_PHAM_ID, 0) == 0x3c14dc72)
                                    {
                                          class26.StrengthNumber = 7;
                                    }
                                    if (num9 >= num10)
                                    {
                                          if (tbl_xwwl_item6.FLD_RESIDE2 == 4)
                                          {
                                                class26.StrengthType = 1;
                                          }
                                          else
                                          {
                                                class26.StrengthType = 2;
                                          }
                                          switch (BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[BitConverter.ToInt32(buffer7, 0)].VAT_PHAM_ID, 0))
                                          {
                                                case 0x3c14dc70:
                                                      class26.StrengthNumber++;
                                                      break;

                                                case 0x3c14dc71:
                                                      {
                                                            Random random2 = new Random(DateTime.Now.Millisecond);
                                                            class26.StrengthNumber += random2.Next(1, 4);
                                                            break;
                                                      }
                                                case 0x3c14dc73:
                                                      class26.StrengthNumber++;
                                                      break;

                                                case 0x3c14dc74:
                                                      {
                                                            Random random3 = new Random(DateTime.Now.Millisecond);
                                                            class26.StrengthNumber += random3.Next(1, 4);
                                                            break;
                                                      }
                                                case 0x3c14dc18:
                                                      class26.StrengthNumber++;
                                                      break;

                                                case 0x3c14dc17:
                                                      class26.StrengthNumber++;
                                                      break;

                                                case 0x3c14e1c3:
                                                      {
                                                            Random random6 = new Random(DateTime.Now.Millisecond);
                                                            class26.StrengthNumber += random6.Next(1, 4);
                                                            break;
                                                      }
                                                case 0x3c14e1c4:
                                                      {
                                                            Random random7 = new Random(DateTime.Now.Millisecond);
                                                            class26.StrengthNumber += random7.Next(1, 4);
                                                            break;
                                                      }
                                                case 0x3c14e148:
                                                      {
                                                            Random random4 = new Random(DateTime.Now.Millisecond);
                                                            class26.StrengthNumber += random4.Next(1, 4);
                                                            break;
                                                      }
                                                case 0x3c14e149:
                                                      {
                                                            Random random5 = new Random(DateTime.Now.Millisecond);
                                                            class26.StrengthNumber += random5.Next(1, 4);
                                                            break;
                                                      }
                                          }
                                          if (World.Itme.TryGetValue(BitConverter.ToInt32(class26.VAT_PHAMid, 0), out tbl_xwwl_item6))
                                          {
                                                if (tbl_xwwl_item6.FLD_LEVEL < 130)
                                                {
                                                      if (class26.StrengthNumber > 15)
                                                      {
                                                            class26.StrengthNumber = 15;
                                                      }
                                                }
                                                else if (class26.StrengthNumber > 15)
                                                {
                                                      class26.StrengthNumber = 15;
                                                }
                                          }
                                          if (class26.StrengthNumber == World.Giang_ho_bao_tuong_cuong_hoa_giai_doan)
                                          {
                                                World.smethod_5(BitConverter.ToInt32(class26.VAT_PHAMid, 0), base.UserName, class26.StrengthNumber, base.Player_Zx);
                                          }
                                          class26.method_6();
                                          this.LAM_GIAM_DI_VAT_PHAM(BitConverter.ToInt32(buffer7, 0), 1);
                                          if ((BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[class26.VI_TRI].VAT_PHAM_ID, 0) != 0) && (BitConverter.ToInt64(base.TRANG_BI_LAN_BAO_VAY[class26.VI_TRI].Item_toan_bo_ID, 0) == BitConverter.ToInt64(class26.Item_toan_bo_ID, 0)))
                                          {
                                                this.LAM_GIAM_DI_VAT_PHAM(class26.VI_TRI, 1);
                                                this.TANG_CUONG_VAT_PHAM(class26.Item_toan_bo_ID, class26.VAT_PHAMid, class26.VI_TRI, class26.VAT_PHAM_SO_LUONG, class26.Item_thuoc_tinh);
                                          }
                                          base.TRANG_BI_LAN_BAO_VAY[class26.VI_TRI].bool_0 = false;
                                          if (base.FLD_VIP == 1)
                                          {
                                                base.GameMessage("Congratulations, VIP customers improve synthesis rate" + (World.VIP_Hop_thanh_xac_xuat * 100.0) + "%", 9, "system hint");
                                          }
                                    }
                                    else
                                    {
                                          num4 = BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[BitConverter.ToInt32(buffer7, 0)].VAT_PHAM_ID, 0);
                                          switch (num4)
                                          {
                                                case 0x3c14dc70:
                                                      class26.StrengthNumber -= 2;
                                                      if (class26.StrengthNumber <= 0)
                                                      {
                                                            class26.StrengthNumber = 0;
                                                            class26.StrengthType = 0;
                                                      }
                                                      class26.method_6();
                                                      if ((BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[class26.VI_TRI].VAT_PHAM_ID, 0) != 0) && (BitConverter.ToInt64(base.TRANG_BI_LAN_BAO_VAY[class26.VI_TRI].Item_toan_bo_ID, 0) == BitConverter.ToInt64(class26.Item_toan_bo_ID, 0)))
                                                      {
                                                            this.LAM_GIAM_DI_VAT_PHAM(class26.VI_TRI, 1);
                                                            this.TANG_CUONG_VAT_PHAM(class26.Item_toan_bo_ID, class26.VAT_PHAMid, class26.VI_TRI, class26.VAT_PHAM_SO_LUONG, class26.Item_thuoc_tinh);
                                                      }
                                                      break;

                                                case 0x3c14dc71:
                                                      if (class26.StrengthNumber != 0)
                                                      {
                                                            class26.StrengthNumber = 0;
                                                            class26.StrengthType = 0;
                                                      }
                                                      class26.method_6();
                                                      if ((BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[class26.VI_TRI].VAT_PHAM_ID, 0) != 0) && (BitConverter.ToInt64(base.TRANG_BI_LAN_BAO_VAY[class26.VI_TRI].Item_toan_bo_ID, 0) == BitConverter.ToInt64(class26.Item_toan_bo_ID, 0)))
                                                      {
                                                            this.LAM_GIAM_DI_VAT_PHAM(class26.VI_TRI, 1);
                                                            this.TANG_CUONG_VAT_PHAM(class26.Item_toan_bo_ID, class26.VAT_PHAMid, class26.VI_TRI, class26.VAT_PHAM_SO_LUONG, class26.Item_thuoc_tinh);
                                                      }
                                                      break;

                                                case 0x3c14dc73:
                                                      class26.StrengthNumber -= 2;
                                                      if (class26.StrengthNumber <= 0)
                                                      {
                                                            class26.StrengthNumber = 0;
                                                            class26.StrengthType = 0;
                                                      }
                                                      class26.method_6();
                                                      if ((BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[class26.VI_TRI].VAT_PHAM_ID, 0) != 0) && (BitConverter.ToInt64(base.TRANG_BI_LAN_BAO_VAY[class26.VI_TRI].Item_toan_bo_ID, 0) == BitConverter.ToInt64(class26.Item_toan_bo_ID, 0)))
                                                      {
                                                            this.LAM_GIAM_DI_VAT_PHAM(class26.VI_TRI, 1);
                                                            this.TANG_CUONG_VAT_PHAM(class26.Item_toan_bo_ID, class26.VAT_PHAMid, class26.VI_TRI, class26.VAT_PHAM_SO_LUONG, class26.Item_thuoc_tinh);
                                                      }
                                                      break;

                                                case 0x3c14dc74:
                                                      if (class26.StrengthNumber != 0)
                                                      {
                                                            class26.StrengthNumber = 0;
                                                            class26.StrengthType = 0;
                                                      }
                                                      class26.method_6();
                                                      if ((BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[class26.VI_TRI].VAT_PHAM_ID, 0) != 0) && (BitConverter.ToInt64(base.TRANG_BI_LAN_BAO_VAY[class26.VI_TRI].Item_toan_bo_ID, 0) == BitConverter.ToInt64(class26.Item_toan_bo_ID, 0)))
                                                      {
                                                            this.LAM_GIAM_DI_VAT_PHAM(class26.VI_TRI, 1);
                                                            this.TANG_CUONG_VAT_PHAM(class26.Item_toan_bo_ID, class26.VAT_PHAMid, class26.VI_TRI, class26.VAT_PHAM_SO_LUONG, class26.Item_thuoc_tinh);
                                                      }
                                                      break;

                                                case 0x3c14dc18:
                                                      class26.StrengthType = 0;
                                                      class26.StrengthNumber = 0;
                                                      class26.method_6();
                                                      if ((BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[class26.VI_TRI].VAT_PHAM_ID, 0) != 0) && (BitConverter.ToInt64(base.TRANG_BI_LAN_BAO_VAY[class26.VI_TRI].Item_toan_bo_ID, 0) == BitConverter.ToInt64(class26.Item_toan_bo_ID, 0)))
                                                      {
                                                            this.LAM_GIAM_DI_VAT_PHAM(class26.VI_TRI, 1);
                                                            this.TANG_CUONG_VAT_PHAM(class26.Item_toan_bo_ID, class26.VAT_PHAMid, class26.VI_TRI, class26.VAT_PHAM_SO_LUONG, class26.Item_thuoc_tinh);
                                                      }
                                                      break;

                                                case 0x3c14dc17:
                                                      class26.StrengthType = 0;
                                                      class26.StrengthNumber = 0;
                                                      class26.method_6();
                                                      if ((BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[class26.VI_TRI].VAT_PHAM_ID, 0) != 0) && (BitConverter.ToInt64(base.TRANG_BI_LAN_BAO_VAY[class26.VI_TRI].Item_toan_bo_ID, 0) == BitConverter.ToInt64(class26.Item_toan_bo_ID, 0)))
                                                      {
                                                            this.LAM_GIAM_DI_VAT_PHAM(class26.VI_TRI, 1);
                                                            this.TANG_CUONG_VAT_PHAM(class26.Item_toan_bo_ID, class26.VAT_PHAMid, class26.VI_TRI, class26.VAT_PHAM_SO_LUONG, class26.Item_thuoc_tinh);
                                                      }
                                                      break;

                                                case 0x3c14e1c3:
                                                      if (tbl_xwwl_item6.FLD_RESIDE2 == 4)
                                                      {
                                                            class26.StrengthType = 1;
                                                      }
                                                      else
                                                      {
                                                            class26.StrengthType = 2;
                                                      }
                                                      class26.StrengthNumber++;
                                                      class26.method_6();
                                                      if ((BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[class26.VI_TRI].VAT_PHAM_ID, 0) != 0) && (BitConverter.ToInt64(base.TRANG_BI_LAN_BAO_VAY[class26.VI_TRI].Item_toan_bo_ID, 0) == BitConverter.ToInt64(class26.Item_toan_bo_ID, 0)))
                                                      {
                                                            this.LAM_GIAM_DI_VAT_PHAM(class26.VI_TRI, 1);
                                                            this.TANG_CUONG_VAT_PHAM(class26.Item_toan_bo_ID, class26.VAT_PHAMid, class26.VI_TRI, class26.VAT_PHAM_SO_LUONG, class26.Item_thuoc_tinh);
                                                      }
                                                      break;

                                                case 0x3c14e1c4:
                                                      if (tbl_xwwl_item6.FLD_RESIDE2 == 4)
                                                      {
                                                            class26.StrengthType = 1;
                                                      }
                                                      else
                                                      {
                                                            class26.StrengthType = 2;
                                                      }
                                                      class26.StrengthNumber++;
                                                      class26.method_6();
                                                      if ((BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[class26.VI_TRI].VAT_PHAM_ID, 0) != 0) && (BitConverter.ToInt64(base.TRANG_BI_LAN_BAO_VAY[class26.VI_TRI].Item_toan_bo_ID, 0) == BitConverter.ToInt64(class26.Item_toan_bo_ID, 0)))
                                                      {
                                                            this.LAM_GIAM_DI_VAT_PHAM(class26.VI_TRI, 1);
                                                            this.TANG_CUONG_VAT_PHAM(class26.Item_toan_bo_ID, class26.VAT_PHAMid, class26.VI_TRI, class26.VAT_PHAM_SO_LUONG, class26.Item_thuoc_tinh);
                                                      }
                                                      break;

                                                case 0x3c14e148:
                                                      if (tbl_xwwl_item6.FLD_RESIDE2 == 4)
                                                      {
                                                            class26.StrengthType = 1;
                                                      }
                                                      else
                                                      {
                                                            class26.StrengthType = 2;
                                                      }
                                                      class26.StrengthNumber++;
                                                      class26.method_6();
                                                      if ((BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[class26.VI_TRI].VAT_PHAM_ID, 0) != 0) && (BitConverter.ToInt64(base.TRANG_BI_LAN_BAO_VAY[class26.VI_TRI].Item_toan_bo_ID, 0) == BitConverter.ToInt64(class26.Item_toan_bo_ID, 0)))
                                                      {
                                                            this.LAM_GIAM_DI_VAT_PHAM(class26.VI_TRI, 1);
                                                            this.TANG_CUONG_VAT_PHAM(class26.Item_toan_bo_ID, class26.VAT_PHAMid, class26.VI_TRI, class26.VAT_PHAM_SO_LUONG, class26.Item_thuoc_tinh);
                                                      }
                                                      break;

                                                case 0x3c14e149:
                                                      if (tbl_xwwl_item6.FLD_RESIDE2 == 4)
                                                      {
                                                            class26.StrengthType = 1;
                                                      }
                                                      else
                                                      {
                                                            class26.StrengthType = 2;
                                                      }
                                                      class26.StrengthNumber++;
                                                      class26.method_6();
                                                      if ((BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[class26.VI_TRI].VAT_PHAM_ID, 0) != 0) && (BitConverter.ToInt64(base.TRANG_BI_LAN_BAO_VAY[class26.VI_TRI].Item_toan_bo_ID, 0) == BitConverter.ToInt64(class26.Item_toan_bo_ID, 0)))
                                                      {
                                                            this.LAM_GIAM_DI_VAT_PHAM(class26.VI_TRI, 1);
                                                            this.TANG_CUONG_VAT_PHAM(class26.Item_toan_bo_ID, class26.VAT_PHAMid, class26.VI_TRI, class26.VAT_PHAM_SO_LUONG, class26.Item_thuoc_tinh);
                                                      }
                                                      break;
                                          }
                                          if (BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[BitConverter.ToInt32(buffer7, 0)].VAT_PHAM_ID, 0) == 0x3c14dc6f)
                                          {
                                                class26.StrengthNumber = 7;
                                                class26.method_6();
                                                this.LAM_GIAM_DI_VAT_PHAM(BitConverter.ToInt32(buffer7, 0), 1);
                                                if ((BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[class26.VI_TRI].VAT_PHAM_ID, 0) != 0) && (BitConverter.ToInt64(base.TRANG_BI_LAN_BAO_VAY[class26.VI_TRI].Item_toan_bo_ID, 0) == BitConverter.ToInt64(class26.Item_toan_bo_ID, 0)))
                                                {
                                                      this.LAM_GIAM_DI_VAT_PHAM(class26.VI_TRI, 1);
                                                      this.TANG_CUONG_VAT_PHAM(class26.Item_toan_bo_ID, class26.VAT_PHAMid, class26.VI_TRI, class26.VAT_PHAM_SO_LUONG, class26.Item_thuoc_tinh);
                                                }
                                                base.TRANG_BI_LAN_BAO_VAY[class26.VI_TRI].bool_0 = false;
                                                base.GameMessage("Cuong hoa vat pham thanh cong !!", 10, "Msg");
                                          }
                                          if (BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[BitConverter.ToInt32(buffer7, 0)].VAT_PHAM_ID, 0) == 0x3c14dc72)
                                          {
                                                class26.StrengthNumber = 7;
                                                class26.method_6();
                                                this.LAM_GIAM_DI_VAT_PHAM(BitConverter.ToInt32(buffer7, 0), 1);
                                                if ((BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[class26.VI_TRI].VAT_PHAM_ID, 0) != 0) && (BitConverter.ToInt64(base.TRANG_BI_LAN_BAO_VAY[class26.VI_TRI].Item_toan_bo_ID, 0) == BitConverter.ToInt64(class26.Item_toan_bo_ID, 0)))
                                                {
                                                      this.LAM_GIAM_DI_VAT_PHAM(class26.VI_TRI, 1);
                                                      this.TANG_CUONG_VAT_PHAM(class26.Item_toan_bo_ID, class26.VAT_PHAMid, class26.VI_TRI, class26.VAT_PHAM_SO_LUONG, class26.Item_thuoc_tinh);
                                                }
                                                base.TRANG_BI_LAN_BAO_VAY[class26.VI_TRI].bool_0 = false;
                                                base.GameMessage("Cuong hoa vat pham thanh cong !!", 10, "Msg");
                                          }
                                          this.LAM_GIAM_DI_VAT_PHAM(BitConverter.ToInt32(buffer7, 0), 1);
                                          Buffer.BlockCopy(BitConverter.GetBytes(0), 0, dst, 13, 4);
                                          base.GameMessage("VIP user can increase the synthesis rate" + (World.VIP_Hop_thanh_xac_xuat * 100.0) + "%", 9, "system hint 1");
                                    }
                                    Buffer.BlockCopy(buffer, 0, dst, 11, 2);
                                    Buffer.BlockCopy(BitConverter.GetBytes(index), 0, dst, 0x1b, 4);
                                    this.LAM_GIAM_DI_VAT_PHAM(class27.VI_TRI, 1);
                                    if (class28 != null)
                                    {
                                          this.LAM_GIAM_DI_VAT_PHAM(class28.VI_TRI, 1);
                                    }
                                    if (class29 != null)
                                    {
                                          this.LAM_GIAM_DI_VAT_PHAM(class29.VI_TRI, 1);
                                    }
                                    if (class30 != null)
                                    {
                                          this.LAM_GIAM_DI_VAT_PHAM(class30.VI_TRI, 1);
                                    }
                                    this.HOP_THANH_VAT_PHAM_BIEU_MAU.Clear();
                                    this.HOP_THANH_HE_THONG_TACH_RA_SAI();
                                    this.NGUYEN_BAO_HOP_THANH_MO_RA = 0;
                                    goto Label_EE18;
                              }
                              catch (Exception exception12)
                              {
                                    this.NGUYEN_BAO_HOP_THANH_MO_RA = 0;
                                    Form1.WriteLine(1, "合成系统 强化合成 合成 出错![" + base.Userid + "]-[" + base.UserName + "]" + exception12.Message);
                                    Form1.WriteLine(1, "合成系统 强化合成 合成 出错![" + base.Userid + "]-[" + base.UserName + "]" + exception12.StackTrace);
                                    return;
                              }
                              Label_3031:;
                              try
                              {
                                    if (this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(1) || base.TRANG_BI_LAN_BAO_VAY[index].Item_troi_chat)
                                    {
                                          return;
                                    }
                                    Buffer.BlockCopy(buffer, 0, dst, 11, 2);
                                    Buffer.BlockCopy(BitConverter.GetBytes(index), 0, dst, 0x1b, 4);
                                    Buffer.BlockCopy(base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_ID, 0, dst, 0x1f, 4);
                                    Buffer.BlockCopy(base.TRANG_BI_LAN_BAO_VAY[index].Item_thuoc_tinh, 0, dst, 0x27, 0x38);
                                    Buffer.BlockCopy(BitConverter.GetBytes(0), 0, dst, 0x5f, 4);
                                    Buffer.BlockCopy(BitConverter.GetBytes(0), 0, dst, 0x67, 4);
                                    HcItimesClass class31 = new HcItimesClass
                                    {
                                          VI_TRI = index,
                                          VAT_PHAM = base.TRANG_BI_LAN_BAO_VAY[index].Item_byte
                                    };
                                    base.TRANG_BI_LAN_BAO_VAY[index].bool_0 = true;
                                    this.HOP_THANH_VAT_PHAM_BIEU_MAU.Add(1, class31);
                                    goto Label_EE18;
                              }
                              catch (Exception exception13)
                              {
                                    Form1.WriteLine(1, "合成系统 强化合成 合成1 出错![" + base.Userid + "]-[" + base.UserName + "]" + exception13.Message);
                                    return;
                              }
                              Label_3152:;
                              try
                              {
                                    if (!this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(4))
                                    {
                                          HcItimesClass class32 = null;
                                          if (this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(1))
                                          {
                                                class32 = this.HOP_THANH_VAT_PHAM_BIEU_MAU[1];
                                                if (this.HOP_THANH_VAT_PHAM_BIEU_MAU.Count != 0)
                                                {
                                                      Buffer.BlockCopy(buffer, 0, dst, 11, 2);
                                                      Buffer.BlockCopy(BitConverter.GetBytes(index), 0, dst, 0x1b, 4);
                                                      Buffer.BlockCopy(base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_ID, 0, dst, 0x1f, 4);
                                                      Buffer.BlockCopy(base.TRANG_BI_LAN_BAO_VAY[index].Item_thuoc_tinh, 0, dst, 0x27, 0x38);
                                                      Buffer.BlockCopy(BitConverter.GetBytes(0), 0, dst, 0x5f, 4);
                                                      Buffer.BlockCopy(BitConverter.GetBytes(0), 0, dst, 0x67, 4);
                                                      Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, dst, 5, 2);
                                                      if ((BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_SO_LUONG, 0) >= 1) && ((BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_ID, 0) == 0x2faf0806) || (BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_ID, 0) == 0x2faf083c)))
                                                      {
                                                            HcItimesClass class33 = new HcItimesClass
                                                            {
                                                                  VI_TRI = index,
                                                                  VAT_PHAM = base.TRANG_BI_LAN_BAO_VAY[index].Item_byte
                                                            };
                                                            base.TRANG_BI_LAN_BAO_VAY[index].bool_0 = true;
                                                            if (!this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(2))
                                                            {
                                                                  this.HOP_THANH_VAT_PHAM_BIEU_MAU.Add(2, class33);
                                                                  if (base.Client != null)
                                                                  {
                                                                        base.Client.Send(dst, dst.Length);
                                                                  }
                                                            }
                                                            class32.method_5();
                                                            if ((class32.Thuoc_tinh_1.Number_Prop + class32.Thuoc_tinh_2.Number_Prop) != 0)
                                                            {
                                                                  if (BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_SO_LUONG, 0) < 2)
                                                                  {
                                                                        return;
                                                                  }
                                                                  if (!this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(3))
                                                                  {
                                                                        this.HOP_THANH_VAT_PHAM_BIEU_MAU.Add(3, class33);
                                                                        if (base.Client != null)
                                                                        {
                                                                              base.Client.Send(dst, dst.Length);
                                                                        }
                                                                  }
                                                            }
                                                            if ((((class32.Thuoc_tinh_1.Number_Prop + class32.Thuoc_tinh_2.Number_Prop) != 0) && ((class32.Thuoc_tinh_3.Number_Prop + class32.Thuoc_tinh_4.Number_Prop) != 0)) && ((BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_SO_LUONG, 0) >= 3) && !this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(4)))
                                                            {
                                                                  this.HOP_THANH_VAT_PHAM_BIEU_MAU.Add(4, class33);
                                                                  if (base.Client != null)
                                                                  {
                                                                        base.Client.Send(dst, dst.Length);
                                                                  }
                                                            }
                                                      }
                                                }
                                          }
                                    }
                                    return;
                              }
                              catch (Exception exception14)
                              {
                                    Form1.WriteLine(1, "合成系统 强化合成 合成2 出错![" + base.Userid + "]-[" + base.UserName + "]" + exception14.Message);
                                    return;
                              }
                              Label_3413:;
                              try
                              {
                                    if ((this.HOP_THANH_VAT_PHAM_BIEU_MAU.Count == 0) || this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(5))
                                    {
                                          return;
                                    }
                                    Buffer.BlockCopy(buffer, 0, dst, 11, 2);
                                    Buffer.BlockCopy(BitConverter.GetBytes(index), 0, dst, 0x1b, 4);
                                    Buffer.BlockCopy(base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_ID, 0, dst, 0x1f, 4);
                                    Buffer.BlockCopy(base.TRANG_BI_LAN_BAO_VAY[index].Item_thuoc_tinh, 0, dst, 0x27, 0x38);
                                    Buffer.BlockCopy(BitConverter.GetBytes(0), 0, dst, 0x5f, 4);
                                    Buffer.BlockCopy(BitConverter.GetBytes(0), 0, dst, 0x67, 4);
                                    HcItimesClass class34 = new HcItimesClass
                                    {
                                          VI_TRI = index,
                                          VAT_PHAM = base.TRANG_BI_LAN_BAO_VAY[index].Item_byte
                                    };
                                    base.TRANG_BI_LAN_BAO_VAY[index].bool_0 = true;
                                    this.HOP_THANH_VAT_PHAM_BIEU_MAU.Add(5, class34);
                                    goto Label_EE18;
                              }
                              catch (Exception exception15)
                              {
                                    Form1.WriteLine(1, "合成系统 强化合成 合成3 出错![" + base.Userid + "]-[" + base.UserName + "]" + exception15.Message);
                                    return;
                              }
                              Label_3532:;
                              try
                              {
                                    HcItimesClass class35;
                                    if (this.HOP_THANH_VAT_PHAM_BIEU_MAU.TryGetValue(1, out class35))
                                    {
                                          base.TRANG_BI_LAN_BAO_VAY[class35.VI_TRI].bool_0 = false;
                                          this.HOP_THANH_VAT_PHAM_BIEU_MAU.Clear();
                                          Buffer.BlockCopy(buffer, 0, dst, 11, 2);
                                          this.HOP_THANH_HE_THONG_TACH_RA_SAI();
                                    }
                                    this.NGUYEN_BAO_HOP_THANH_MO_RA = 0;
                                    base.OpenWarehouse = false;
                                    return;
                              }
                              catch (Exception exception16)
                              {
                                    this.NGUYEN_BAO_HOP_THANH_MO_RA = 0;
                                    Form1.WriteLine(1, "合成系统 强化合成 合成4 出错![" + base.Userid + "]-[" + base.UserName + "]" + exception16.Message);
                                    return;
                              }
                              Label_35DA:
                              buffer2 = new byte[4];
                              byte[] buffer4 = new byte[4];
                              Buffer.BlockCopy(byte_5, 15, buffer2, 0, 4);
                              Buffer.BlockCopy(byte_5, 0x13, buffer4, 0, 4);
                              if ((BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[BitConverter.ToInt32(buffer2, 0)].VAT_PHAM_ID, 0) == 0) || (this.HOP_THANH_VAT_PHAM_BIEU_MAU.Count <= 0))
                              {
                                    return;
                              }
                              HcItimesClass class5 = null;
                              if (this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(1))
                              {
                                    class5 = this.HOP_THANH_VAT_PHAM_BIEU_MAU[1];
                              }
                              if (BitConverter.ToInt64(base.TRANG_BI_LAN_BAO_VAY[class5.VI_TRI].Item_toan_bo_ID, 0) != BitConverter.ToInt64(class5.Item_toan_bo_ID, 0))
                              {
                                    return;
                              }
                              if (base.TRANG_BI_LAN_BAO_VAY[class5.VI_TRI].Item_troi_chat)
                              {
                                    this.HOP_THANH_NHAC_NHO(num, 2, 0, base.TRANG_BI_LAN_BAO_VAY[class5.VI_TRI]);
                                    return;
                              }
                              class5.method_5();
                              if (class5.Thuoc_tinh_4.Prop_Type != 0)
                              {
                                    class5.Thuoc_tinh_4.Prop_Type = 0;
                                    class5.Thuoc_tinh_4.Number_Prop = 0;
                                    class5.SetProperty();
                              }
                              else if (class5.Thuoc_tinh_3.Prop_Type != 0)
                              {
                                    class5.Thuoc_tinh_3.Prop_Type = 0;
                                    class5.Thuoc_tinh_3.Number_Prop = 0;
                                    class5.SetProperty();
                              }
                              else if (class5.Thuoc_tinh_2.Prop_Type != 0)
                              {
                                    class5.Thuoc_tinh_2.Prop_Type = 0;
                                    class5.Thuoc_tinh_2.Number_Prop = 0;
                                    class5.SetProperty();
                              }
                              else if (class5.Thuoc_tinh_1.Prop_Type != 0)
                              {
                                    class5.Thuoc_tinh_1.Prop_Type = 0;
                                    class5.Thuoc_tinh_1.Number_Prop = 0;
                                    class5.SetProperty();
                              }
                              Buffer.BlockCopy(buffer, 0, dst, 11, 2);
                              Buffer.BlockCopy(BitConverter.GetBytes(index), 0, dst, 0x1b, 4);
                              this.LAM_GIAM_DI_VAT_PHAM(BitConverter.ToInt32(buffer2, 0), 1);
                              if ((BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[class5.VI_TRI].VAT_PHAM_ID, 0) != 0) && (BitConverter.ToInt64(base.TRANG_BI_LAN_BAO_VAY[class5.VI_TRI].Item_toan_bo_ID, 0) == BitConverter.ToInt64(class5.Item_toan_bo_ID, 0)))
                              {
                                    this.LAM_GIAM_DI_VAT_PHAM(class5.VI_TRI, 1);
                                    this.TANG_CUONG_VAT_PHAM(class5.Item_toan_bo_ID, class5.VAT_PHAMid, class5.VI_TRI, class5.VAT_PHAM_SO_LUONG, class5.Item_thuoc_tinh);
                              }
                              base.TRANG_BI_LAN_BAO_VAY[class5.VI_TRI].bool_0 = false;
                              this.HOP_THANH_VAT_PHAM_BIEU_MAU.Clear();
                              this.HOP_THANH_HE_THONG_TACH_RA_SAI();
                              this.NGUYEN_BAO_HOP_THANH_MO_RA = 0;
                              goto Label_EE18;
                              Label_384D:;
                              try
                              {
                                    this.HOP_THANH_VAT_PHAM_BIEU_MAU.Clear();
                                    Buffer.BlockCopy(buffer, 0, dst, 11, 2);
                                    this.HOP_THANH_HE_THONG_TACH_RA_SAI();
                                    this.NGUYEN_BAO_HOP_THANH_MO_RA = 0;
                                    base.OpenWarehouse = false;
                                    goto Label_EE18;
                              }
                              catch (Exception exception17)
                              {
                                    this.NGUYEN_BAO_HOP_THANH_MO_RA = 0;
                                    Form1.WriteLine(1, "合成系统 八卦回天符 合成4 出错![" + base.Userid + "]-[" + base.UserName + "]" + exception17.Message);
                                    return;
                              }
                              Label_38D1:;
                              try
                              {
                                    TBL_XWWL_ITEM tbl_xwwl_item7;
                                    if (this.HOP_THANH_VAT_PHAM_BIEU_MAU.Count <= 0)
                                    {
                                          return;
                                    }
                                    HcItimesClass class36 = null;
                                    HcItimesClass class37 = null;
                                    HcItimesClass class38 = null;
                                    if (this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(1))
                                    {
                                          class36 = this.HOP_THANH_VAT_PHAM_BIEU_MAU[1];
                                    }
                                    if (this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(2))
                                    {
                                          class37 = this.HOP_THANH_VAT_PHAM_BIEU_MAU[2];
                                    }
                                    if (this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(3))
                                    {
                                          class38 = this.HOP_THANH_VAT_PHAM_BIEU_MAU[3];
                                    }
                                    if ((((BitConverter.ToInt64(base.TRANG_BI_LAN_BAO_VAY[class36.VI_TRI].Item_toan_bo_ID, 0) != BitConverter.ToInt64(class36.Item_toan_bo_ID, 0)) || (BitConverter.ToInt64(base.TRANG_BI_LAN_BAO_VAY[class37.VI_TRI].Item_toan_bo_ID, 0) != BitConverter.ToInt64(class37.Item_toan_bo_ID, 0))) || ((class38 != null) && (BitConverter.ToInt64(base.TRANG_BI_LAN_BAO_VAY[class38.VI_TRI].Item_toan_bo_ID, 0) != BitConverter.ToInt64(class38.Item_toan_bo_ID, 0)))) || !World.Itme.TryGetValue(BitConverter.ToInt32(class36.VAT_PHAMid, 0), out tbl_xwwl_item7))
                                    {
                                          return;
                                    }
                                    if ((tbl_xwwl_item7.FLD_RESIDE2 != 1) && (tbl_xwwl_item7.FLD_RESIDE2 != 4))
                                    {
                                          Form1.WriteLine(6, string.Concat(new object[] { "合成系统 强化 BUG1[", BitConverter.ToInt32(class36.VAT_PHAMid, 0), "]-[", BitConverter.ToInt32(class37.VAT_PHAMid, 0), "]" }));
                                          return;
                                    }
                                    if (base.TRANG_BI_LAN_BAO_VAY[class36.VI_TRI].Item_troi_chat)
                                    {
                                          this.HOP_THANH_NHAC_NHO(num, 2, 0, base.TRANG_BI_LAN_BAO_VAY[class36.VI_TRI]);
                                          return;
                                    }
                                    class36.method_8();
                                    class37.method_8();
                                    double num12 = new Random().Next(0, 100);
                                    double num13 = class36.NumberOfPhase * 10;
                                    if (class36.NumberOfPhase >= 10)
                                    {
                                          this.HOP_THANH_VAT_PHAM_BIEU_MAU.Clear();
                                          goto Label_EE18;
                                    }
                                    if (class38 != null)
                                    {
                                          num4 = BitConverter.ToInt32(class38.VAT_PHAMid, 0);
                                          switch (num4)
                                          {
                                                case 0x2faf0803:
                                                      num12 += 5.0;
                                                      goto Label_3B52;

                                                case 0x2faf0804:
                                                      num12 += 10.0;
                                                      goto Label_3B52;

                                                case 0x2faf0805:
                                                      num12 += 15.0;
                                                      goto Label_3B52;

                                                case 0x2faf081d:
                                                      num12 += 20.0;
                                                      goto Label_3B52;
                                          }
                                          if (num4 == 0x3c14dc88)
                                          {
                                                num12 += 25.0;
                                          }
                                    }
                                    Label_3B52:
                                    if (base.FLD_trang_bi_them_vao_hop_thanh_ty_le_thanh_cong_ti_le_phan_tram != 0.0)
                                    {
                                          num12 += 100.0 * base.FLD_trang_bi_them_vao_hop_thanh_ty_le_thanh_cong_ti_le_phan_tram;
                                    }
                                    if (base.dictionary_3.ContainsKey(0x3c14dd38))
                                    {
                                          num12 += 10.0;
                                    }
                                    if (this.NGUYEN_BAO_HOP_THANH_MO_RA == 1)
                                    {
                                          num12 += 5.0;
                                    }
                                    if (base.FLD_VIP == 1)
                                    {
                                          num12 += 100.0 * World.VIP_Hop_thanh_xac_xuat;
                                    }
                                    if (World.Hop_thanh_xac_xuat != 0.0)
                                    {
                                          num12 += 100.0 * World.Hop_thanh_xac_xuat;
                                    }
                                    if (num12 >= num13)
                                    {
                                          class36.PhaseType = class37.PhaseType;
                                          class36.NumberOfPhase++;
                                          class36.method_6();
                                          if (base.FLD_VIP == 1)
                                          {
                                                base.GameMessage("Congratulations, VIP customers improve synthesis rate" + (World.VIP_Hop_thanh_xac_xuat * 100.0) + "%", 9, "system hint");
                                          }
                                    }
                                    else
                                    {
                                          class36.NumberOfPhase = 0;
                                          class36.method_6();
                                          base.GameMessage("VIP user can increase the synthesis rate" + (World.VIP_Hop_thanh_xac_xuat * 100.0) + "%", 9, "system hint 2");
                                          Buffer.BlockCopy(BitConverter.GetBytes(0), 0, dst, 13, 4);
                                    }
                                    Buffer.BlockCopy(buffer, 0, dst, 11, 2);
                                    Buffer.BlockCopy(BitConverter.GetBytes(index), 0, dst, 0x1b, 4);
                                    this.LAM_GIAM_DI_VAT_PHAM(class37.VI_TRI, 1);
                                    if (class38 != null)
                                    {
                                          this.LAM_GIAM_DI_VAT_PHAM(class38.VI_TRI, 1);
                                    }
                                    if ((BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[class36.VI_TRI].VAT_PHAM_ID, 0) != 0) && (BitConverter.ToInt64(base.TRANG_BI_LAN_BAO_VAY[class36.VI_TRI].Item_toan_bo_ID, 0) == BitConverter.ToInt64(class36.Item_toan_bo_ID, 0)))
                                    {
                                          this.LAM_GIAM_DI_VAT_PHAM(class36.VI_TRI, 1);
                                          this.TANG_CUONG_VAT_PHAM(class36.Item_toan_bo_ID, class36.VAT_PHAMid, class36.VI_TRI, class36.VAT_PHAM_SO_LUONG, class36.Item_thuoc_tinh);
                                    }
                                    base.TRANG_BI_LAN_BAO_VAY[class36.VI_TRI].bool_0 = false;
                                    this.HOP_THANH_VAT_PHAM_BIEU_MAU.Clear();
                                    this.HOP_THANH_HE_THONG_TACH_RA_SAI();
                                    this.NGUYEN_BAO_HOP_THANH_MO_RA = 0;
                                    goto Label_EE18;
                              }
                              catch (Exception exception18)
                              {
                                    this.NGUYEN_BAO_HOP_THANH_MO_RA = 0;
                                    Form1.WriteLine(1, "合成系统 合成属性阶段 合成 出错![" + base.Userid + "]-[" + base.UserName + "]" + exception18.Message);
                                    return;
                              }
                              Label_3DE7:;
                              try
                              {
                                    TBL_XWWL_ITEM tbl_xwwl_item8;
                                    if ((this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(1) || base.TRANG_BI_LAN_BAO_VAY[index].Item_troi_chat) || !World.Itme.TryGetValue(BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_ID, 0), out tbl_xwwl_item8))
                                    {
                                          return;
                                    }
                                    if ((tbl_xwwl_item8.FLD_RESIDE2 != 1) && (tbl_xwwl_item8.FLD_RESIDE2 != 4))
                                    {
                                          Form1.WriteLine(6, "合成系统 强化 BUG1[" + BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_ID, 0) + "]");
                                          return;
                                    }
                                    Buffer.BlockCopy(buffer, 0, dst, 11, 2);
                                    Buffer.BlockCopy(BitConverter.GetBytes(index), 0, dst, 0x1b, 4);
                                    Buffer.BlockCopy(base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_ID, 0, dst, 0x1f, 4);
                                    Buffer.BlockCopy(base.TRANG_BI_LAN_BAO_VAY[index].Item_thuoc_tinh, 0, dst, 0x27, 0x38);
                                    Buffer.BlockCopy(BitConverter.GetBytes(0), 0, dst, 0x5f, 4);
                                    Buffer.BlockCopy(BitConverter.GetBytes(0), 0, dst, 0x67, 4);
                                    HcItimesClass class39 = new HcItimesClass
                                    {
                                          VI_TRI = index,
                                          VAT_PHAM = base.TRANG_BI_LAN_BAO_VAY[index].Item_byte
                                    };
                                    base.TRANG_BI_LAN_BAO_VAY[index].bool_0 = true;
                                    this.HOP_THANH_VAT_PHAM_BIEU_MAU.Add(1, class39);
                                    goto Label_EE18;
                              }
                              catch (Exception exception19)
                              {
                                    Form1.WriteLine(1, "合成系统 合成属性阶段 合成1 出错![" + base.Userid + "]-[" + base.UserName + "]" + exception19.Message);
                                    return;
                              }
                              Label_3F6F:;
                              try
                              {
                                    if ((this.HOP_THANH_VAT_PHAM_BIEU_MAU.Count == 0) || this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(2))
                                    {
                                          return;
                                    }
                                    Buffer.BlockCopy(buffer, 0, dst, 11, 2);
                                    Buffer.BlockCopy(BitConverter.GetBytes(index), 0, dst, 0x1b, 4);
                                    Buffer.BlockCopy(base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_ID, 0, dst, 0x1f, 4);
                                    Buffer.BlockCopy(base.TRANG_BI_LAN_BAO_VAY[index].Item_thuoc_tinh, 0, dst, 0x27, 0x38);
                                    Buffer.BlockCopy(BitConverter.GetBytes(0), 0, dst, 0x5f, 4);
                                    Buffer.BlockCopy(BitConverter.GetBytes(0), 0, dst, 0x67, 4);
                                    HcItimesClass class40 = new HcItimesClass
                                    {
                                          VI_TRI = index,
                                          VAT_PHAM = base.TRANG_BI_LAN_BAO_VAY[index].Item_byte
                                    };
                                    base.TRANG_BI_LAN_BAO_VAY[index].bool_0 = true;
                                    this.HOP_THANH_VAT_PHAM_BIEU_MAU.Add(2, class40);
                                    goto Label_EE18;
                              }
                              catch (Exception exception20)
                              {
                                    Form1.WriteLine(1, "合成系统 合成属性阶段 合成2 出错![" + base.Userid + "]-[" + base.UserName + "]" + exception20.Message);
                                    return;
                              }
                              Label_408E:;
                              try
                              {
                                    if ((this.HOP_THANH_VAT_PHAM_BIEU_MAU.Count == 0) || this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(3))
                                    {
                                          return;
                                    }
                                    Buffer.BlockCopy(buffer, 0, dst, 11, 2);
                                    Buffer.BlockCopy(BitConverter.GetBytes(index), 0, dst, 0x1b, 4);
                                    Buffer.BlockCopy(base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_ID, 0, dst, 0x1f, 4);
                                    Buffer.BlockCopy(base.TRANG_BI_LAN_BAO_VAY[index].Item_thuoc_tinh, 0, dst, 0x27, 0x38);
                                    Buffer.BlockCopy(BitConverter.GetBytes(0), 0, dst, 0x5f, 4);
                                    Buffer.BlockCopy(BitConverter.GetBytes(0), 0, dst, 0x67, 4);
                                    HcItimesClass class41 = new HcItimesClass
                                    {
                                          VI_TRI = index,
                                          VAT_PHAM = base.TRANG_BI_LAN_BAO_VAY[index].Item_byte
                                    };
                                    base.TRANG_BI_LAN_BAO_VAY[index].bool_0 = true;
                                    this.HOP_THANH_VAT_PHAM_BIEU_MAU.Add(3, class41);
                                    goto Label_EE18;
                              }
                              catch (Exception exception21)
                              {
                                    Form1.WriteLine(1, "合成系统 合成属性阶段 合成3 出错![" + base.Userid + "]-[" + base.UserName + "]" + exception21.Message);
                                    return;
                              }
                              Label_41AD:;
                              try
                              {
                                    TBL_XWWL_ITEM tbl_xwwl_item9;
                                    if (this.HOP_THANH_VAT_PHAM_BIEU_MAU.Count <= 0)
                                    {
                                          return;
                                    }
                                    HcItimesClass class42 = null;
                                    HcItimesClass class43 = null;
                                    HcItimesClass class44 = null;
                                    HcItimesClass class45 = null;
                                    HcItimesClass class46 = null;
                                    if (this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(1))
                                    {
                                          class42 = this.HOP_THANH_VAT_PHAM_BIEU_MAU[1];
                                    }
                                    if (this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(2))
                                    {
                                          class43 = this.HOP_THANH_VAT_PHAM_BIEU_MAU[2];
                                    }
                                    if (this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(3))
                                    {
                                          class44 = this.HOP_THANH_VAT_PHAM_BIEU_MAU[3];
                                    }
                                    if (this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(4))
                                    {
                                          class45 = this.HOP_THANH_VAT_PHAM_BIEU_MAU[4];
                                    }
                                    if (this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(5))
                                    {
                                          class46 = this.HOP_THANH_VAT_PHAM_BIEU_MAU[5];
                                    }
                                    if ((((((BitConverter.ToInt64(base.TRANG_BI_LAN_BAO_VAY[class42.VI_TRI].Item_toan_bo_ID, 0) != BitConverter.ToInt64(class42.Item_toan_bo_ID, 0)) || (class43 == null)) || ((class43 != null) && (BitConverter.ToInt64(base.TRANG_BI_LAN_BAO_VAY[class43.VI_TRI].Item_toan_bo_ID, 0) != BitConverter.ToInt64(class43.Item_toan_bo_ID, 0)))) || ((class44 != null) && (BitConverter.ToInt64(base.TRANG_BI_LAN_BAO_VAY[class44.VI_TRI].Item_toan_bo_ID, 0) != BitConverter.ToInt64(class44.Item_toan_bo_ID, 0)))) || ((class45 != null) && (BitConverter.ToInt64(base.TRANG_BI_LAN_BAO_VAY[class45.VI_TRI].Item_toan_bo_ID, 0) != BitConverter.ToInt64(class45.Item_toan_bo_ID, 0)))) || ((class46 != null) && (BitConverter.ToInt64(base.TRANG_BI_LAN_BAO_VAY[class46.VI_TRI].Item_toan_bo_ID, 0) != BitConverter.ToInt64(class46.Item_toan_bo_ID, 0))))
                                    {
                                          return;
                                    }
                                    class42.method_5();
                                    class42.method_8();
                                    if (!World.Itme.TryGetValue(BitConverter.ToInt32(class42.VAT_PHAMid, 0), out tbl_xwwl_item9))
                                    {
                                          return;
                                    }
                                    if ((((tbl_xwwl_item9.FLD_RESIDE2 != 1) && (tbl_xwwl_item9.FLD_RESIDE2 != 2)) && ((tbl_xwwl_item9.FLD_RESIDE2 != 4) && (tbl_xwwl_item9.FLD_RESIDE2 != 5))) && ((tbl_xwwl_item9.FLD_RESIDE2 != 6) && (tbl_xwwl_item9.FLD_RESIDE2 != 14)))
                                    {
                                          Form1.WriteLine(6, string.Concat(new object[] { "合成系统 强化 BUG1[", BitConverter.ToInt32(class42.VAT_PHAMid, 0), "]-[", BitConverter.ToInt32(class43.VAT_PHAMid, 0), "]" }));
                                          return;
                                    }
                                    if (base.TRANG_BI_LAN_BAO_VAY[class42.VI_TRI].Item_troi_chat)
                                    {
                                          this.HOP_THANH_NHAC_NHO(num, 2, 0, base.TRANG_BI_LAN_BAO_VAY[class42.VI_TRI]);
                                          return;
                                    }
                                    char[] chArray2 = new char[] { ';' };
                                    string[] strArray2 = World.Cuong_hoa_xac_xuat_khong_che.Split(chArray2);
                                    double num14 = new Random().Next(int.Parse(strArray2[0]), int.Parse(strArray2[1]));
                                    double num15 = class42.StrengthNumber * 10;
                                    if (((class42.StrengthNumber >= 15) && World.Itme.TryGetValue(BitConverter.ToInt32(class42.VAT_PHAMid, 0), out tbl_xwwl_item9)) && (tbl_xwwl_item9.FLD_LEVEL < 130))
                                    {
                                          this.HOP_THANH_VAT_PHAM_BIEU_MAU.Clear();
                                          goto Label_EE18;
                                    }
                                    if (class46 != null)
                                    {
                                          num4 = BitConverter.ToInt32(class46.VAT_PHAMid, 0);
                                          switch (num4)
                                          {
                                                case 0x2faf0803:
                                                      num14 += 5.0;
                                                      goto Label_4558;

                                                case 0x2faf0804:
                                                      num14 += 10.0;
                                                      goto Label_4558;

                                                case 0x2faf0805:
                                                      num14 += 15.0;
                                                      goto Label_4558;

                                                case 0x2faf081d:
                                                      num14 += 20.0;
                                                      goto Label_4558;
                                          }
                                          if (num4 == 0x3c14dc88)
                                          {
                                                num14 += 25.0;
                                          }
                                    }
                                    Label_4558:
                                    if (base.dictionary_3.ContainsKey(0x3c14dd38))
                                    {
                                          num14 += 10.0;
                                    }
                                    if (base.FLD_trang_bi_them_vao_hop_thanh_ty_le_thanh_cong_ti_le_phan_tram != 0.0)
                                    {
                                          num14 += 100.0 * base.FLD_trang_bi_them_vao_hop_thanh_ty_le_thanh_cong_ti_le_phan_tram;
                                    }
                                    if (this.NGUYEN_BAO_HOP_THANH_MO_RA == 1)
                                    {
                                          num14 += 5.0;
                                    }
                                    if (base.FLD_VIP == 1)
                                    {
                                          num14 += 100.0 * World.VIP_Hop_thanh_xac_xuat;
                                    }
                                    if (World.Hop_thanh_xac_xuat != 0.0)
                                    {
                                          num14 += 100.0 * World.Hop_thanh_xac_xuat;
                                    }
                                    if (((class42.Thuoc_tinh_1.Number_Prop + class42.Thuoc_tinh_2.Number_Prop) != 0) && (class44 == null))
                                    {
                                          base.GameMessage("Stone put less at least have put 2", 9, "system hint");
                                          return;
                                    }
                                    if ((((class42.Thuoc_tinh_1.Number_Prop + class42.Thuoc_tinh_2.Number_Prop) != 0) && ((class42.Thuoc_tinh_3.Number_Prop + class42.Thuoc_tinh_4.Number_Prop) != 0)) && (class45 == null))
                                    {
                                          base.GameMessage("Stone put less at least have to put 3", 9, "system hint");
                                          return;
                                    }
                                    if (num14 >= num15)
                                    {
                                          if (tbl_xwwl_item9.FLD_RESIDE2 == 4)
                                          {
                                                class42.StrengthType = 1;
                                          }
                                          else
                                          {
                                                class42.StrengthType = 2;
                                          }
                                          class42.StrengthNumber++;
                                          if (World.Itme.TryGetValue(BitConverter.ToInt32(class42.VAT_PHAMid, 0), out tbl_xwwl_item9))
                                          {
                                                if (tbl_xwwl_item9.FLD_LEVEL < 130)
                                                {
                                                      if (class42.StrengthNumber > 15)
                                                      {
                                                            class42.StrengthNumber = 15;
                                                      }
                                                }
                                                else if (class42.StrengthNumber > 15)
                                                {
                                                      class42.StrengthNumber = 15;
                                                }
                                          }
                                          class42.method_6();
                                          if (class42.StrengthNumber >= World.Giang_ho_bao_tuong_cuong_hoa_giai_doan)
                                          {
                                                World.smethod_5(BitConverter.ToInt32(class42.VAT_PHAMid, 0), base.UserName, class42.StrengthNumber, base.Player_Zx);
                                          }
                                          if ((BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[class42.VI_TRI].VAT_PHAM_ID, 0) != 0) && (BitConverter.ToInt64(base.TRANG_BI_LAN_BAO_VAY[class42.VI_TRI].Item_toan_bo_ID, 0) == BitConverter.ToInt64(class42.Item_toan_bo_ID, 0)))
                                          {
                                                this.LAM_GIAM_DI_VAT_PHAM(class42.VI_TRI, 1);
                                                this.TANG_CUONG_VAT_PHAM(class42.Item_toan_bo_ID, class42.VAT_PHAMid, class42.VI_TRI, class42.VAT_PHAM_SO_LUONG, class42.Item_thuoc_tinh);
                                          }
                                          base.TRANG_BI_LAN_BAO_VAY[class42.VI_TRI].bool_0 = false;
                                          if (base.FLD_VIP == 1)
                                          {
                                                base.GameMessage("Congratulations, VIP customers improve synthesis rate" + (World.VIP_Hop_thanh_xac_xuat * 100.0) + "%", 9, "system hint");
                                          }
                                    }
                                    else if (!tbl_xwwl_item9.FLD_PID.ToString().Contains("1002040") && !tbl_xwwl_item9.FLD_PID.ToString().Contains("2002040"))
                                    {
                                          if (((tbl_xwwl_item9.FLD_RESIDE2 != 1) && (tbl_xwwl_item9.FLD_RESIDE2 != 2)) && ((tbl_xwwl_item9.FLD_RESIDE2 != 5) && (tbl_xwwl_item9.FLD_RESIDE2 != 6)))
                                          {
                                                if (((tbl_xwwl_item9.FLD_RESIDE2 == 4) && !tbl_xwwl_item9.FLD_PID.ToString().Contains("1002040")) && !tbl_xwwl_item9.FLD_PID.ToString().Contains("2002040"))
                                                {
                                                      Random random8 = new Random();
                                                      int num16 = base.DUOC_KIEN_HANG_RONG(this);
                                                      if (num16 != -1)
                                                      {
                                                            switch (tbl_xwwl_item9.FLD_JOB_LEVEL)
                                                            {
                                                                  case 2:
                                                                        {
                                                                              int num17 = random8.Next(7, 12);
                                                                              byte[] bytes = BitConverter.GetBytes(RxjhClass.GetDBItmeId());
                                                                              this.TANG_CUONG_VAT_PHAM_2(bytes, BitConverter.GetBytes(0x3b9accd9), num16, BitConverter.GetBytes(num17), new byte[0x38]);
                                                                              break;
                                                                        }
                                                                  case 3:
                                                                        {
                                                                              int num18 = random8.Next(7, 12);
                                                                              byte[] buffer10 = BitConverter.GetBytes(RxjhClass.GetDBItmeId());
                                                                              this.TANG_CUONG_VAT_PHAM_2(buffer10, BitConverter.GetBytes(0x3b9accda), num16, BitConverter.GetBytes(num18), new byte[0x38]);
                                                                              break;
                                                                        }
                                                                  case 4:
                                                                        {
                                                                              int num19 = random8.Next(7, 12);
                                                                              byte[] buffer11 = BitConverter.GetBytes(RxjhClass.GetDBItmeId());
                                                                              this.TANG_CUONG_VAT_PHAM_2(buffer11, BitConverter.GetBytes(0x3b9accdb), num16, BitConverter.GetBytes(num19), new byte[0x38]);
                                                                              break;
                                                                        }
                                                                  case 5:
                                                                        {
                                                                              int num20 = random8.Next(7, 12);
                                                                              byte[] buffer12 = BitConverter.GetBytes(RxjhClass.GetDBItmeId());
                                                                              this.TANG_CUONG_VAT_PHAM_2(buffer12, BitConverter.GetBytes(0x3b9accdc), num16, BitConverter.GetBytes(num20), new byte[0x38]);
                                                                              break;
                                                                        }
                                                            }
                                                      }
                                                }
                                          }
                                          else
                                          {
                                                int num21 = new Random().Next(7, 10);
                                                int num22 = base.DUOC_KIEN_HANG_RONG(this);
                                                if (num22 != -1)
                                                {
                                                      if (tbl_xwwl_item9.FLD_LEVEL >= 100)
                                                      {
                                                            byte[] buffer13 = BitConverter.GetBytes(RxjhClass.GetDBItmeId());
                                                            this.TANG_CUONG_VAT_PHAM_2(buffer13, BitConverter.GetBytes(0x3b9acce8), num22, BitConverter.GetBytes(num21), new byte[0x38]);
                                                      }
                                                      else if ((tbl_xwwl_item9.FLD_LEVEL >= 80) && (tbl_xwwl_item9.FLD_LEVEL < 0x63))
                                                      {
                                                            byte[] buffer14 = BitConverter.GetBytes(RxjhClass.GetDBItmeId());
                                                            this.TANG_CUONG_VAT_PHAM_2(buffer14, BitConverter.GetBytes(0x3b9acce7), num22, BitConverter.GetBytes(num21), new byte[0x38]);
                                                      }
                                                      else if ((tbl_xwwl_item9.FLD_LEVEL >= 60) && (tbl_xwwl_item9.FLD_LEVEL < 0x4f))
                                                      {
                                                            byte[] buffer15 = BitConverter.GetBytes(RxjhClass.GetDBItmeId());
                                                            this.TANG_CUONG_VAT_PHAM_2(buffer15, BitConverter.GetBytes(0x3b9acce6), num22, BitConverter.GetBytes(num21), new byte[0x38]);
                                                      }
                                                      else if ((tbl_xwwl_item9.FLD_LEVEL >= 40) && (tbl_xwwl_item9.FLD_LEVEL < 0x3b))
                                                      {
                                                            byte[] buffer16 = BitConverter.GetBytes(RxjhClass.GetDBItmeId());
                                                            this.TANG_CUONG_VAT_PHAM_2(buffer16, BitConverter.GetBytes(0x3b9acce5), num22, BitConverter.GetBytes(num21), new byte[0x38]);
                                                      }
                                                }
                                          }
                                          this.LAM_GIAM_DI_VAT_PHAM(class42.VI_TRI, 1);
                                          Buffer.BlockCopy(BitConverter.GetBytes(0), 0, dst, 13, 4);
                                          base.GameMessage("VIP user can increase the synthesis rate" + (World.VIP_Hop_thanh_xac_xuat * 100.0) + "%", 9, "system hint 3");
                                    }
                                    else
                                    {
                                          class42.StrengthNumber = 0;
                                          class42.method_6();
                                          if ((BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[class42.VI_TRI].VAT_PHAM_ID, 0) != 0) && (BitConverter.ToInt64(base.TRANG_BI_LAN_BAO_VAY[class42.VI_TRI].Item_toan_bo_ID, 0) == BitConverter.ToInt64(class42.Item_toan_bo_ID, 0)))
                                          {
                                                this.LAM_GIAM_DI_VAT_PHAM(class42.VI_TRI, 1);
                                                this.TANG_CUONG_VAT_PHAM_NONE_THUOC_TINH(class42.Item_toan_bo_ID, class42.VAT_PHAMid, class42.VI_TRI, class42.VAT_PHAM_SO_LUONG);
                                          }
                                          Buffer.BlockCopy(BitConverter.GetBytes(0), 0, dst, 13, 4);
                                          base.GameMessage("Your weapons will not be broken but a beginning has been to strengthen words~", 9, "system hint");
                                          base.GameMessage("VIP user can increase the synthesis rate" + (World.VIP_Hop_thanh_xac_xuat * 100.0) + "%", 9, "system hint");
                                    }
                                    Buffer.BlockCopy(buffer, 0, dst, 11, 2);
                                    Buffer.BlockCopy(BitConverter.GetBytes(class42.VI_TRI), 0, dst, 0x1b, 4);
                                    this.LAM_GIAM_DI_VAT_PHAM(class43.VI_TRI, 1);
                                    if (class44 != null)
                                    {
                                          this.LAM_GIAM_DI_VAT_PHAM(class44.VI_TRI, 1);
                                    }
                                    if (class45 != null)
                                    {
                                          this.LAM_GIAM_DI_VAT_PHAM(class45.VI_TRI, 1);
                                    }
                                    if (class46 != null)
                                    {
                                          this.LAM_GIAM_DI_VAT_PHAM(class46.VI_TRI, 1);
                                    }
                                    this.HOP_THANH_VAT_PHAM_BIEU_MAU.Clear();
                                    this.HOP_THANH_HE_THONG_TACH_RA_SAI();
                                    this.NGUYEN_BAO_HOP_THANH_MO_RA = 0;
                                    goto Label_EE18;
                              }
                              catch (Exception exception22)
                              {
                                    this.NGUYEN_BAO_HOP_THANH_MO_RA = 0;
                                    Form1.WriteLine(1, "合成系统 强化合成 合成 出错![" + base.Userid + "]-[" + base.UserName + "]" + exception22.Message);
                                    Form1.WriteLine(1, "合成系统 强化合成 合成 出错![" + base.Userid + "]-[" + base.UserName + "]" + exception22.StackTrace);
                                    return;
                              }
                              Label_4D7F:;
                              try
                              {
                                    if (!this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(1))
                                    {
                                          if (base.TRANG_BI_LAN_BAO_VAY[index].Item_troi_chat)
                                          {
                                                this.HOP_THANH_NHAC_NHO(num, 2, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                          }
                                          else
                                          {
                                                TBL_XWWL_ITEM tbl_xwwl_item10;
                                                if (((base.TRANG_BI_LAN_BAO_VAY[index].FLD_cuong_hoa_so_luong >= 10) && World.Itme.TryGetValue(BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_ID, 0), out tbl_xwwl_item10)) && (tbl_xwwl_item10.FLD_LEVEL < 130))
                                                {
                                                      this.HOP_THANH_NHAC_NHO(num, 2, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                                }
                                                else
                                                {
                                                      HcItimesClass class47 = new HcItimesClass
                                                      {
                                                            VI_TRI = index,
                                                            VAT_PHAM = base.TRANG_BI_LAN_BAO_VAY[index].Item_byte
                                                      };
                                                      base.TRANG_BI_LAN_BAO_VAY[index].bool_0 = true;
                                                      this.HOP_THANH_VAT_PHAM_BIEU_MAU.Add(1, class47);
                                                      this.HOP_THANH_NHAC_NHO(num, 1, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                                }
                                          }
                                    }
                                    return;
                              }
                              catch (Exception exception23)
                              {
                                    Form1.WriteLine(1, "合成系统 强化合成 合成1 出错![" + base.Userid + "]-[" + base.UserName + "]" + exception23.Message);
                                    return;
                              }
                              Label_4EA8:;
                              try
                              {
                                    if (!this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(4))
                                    {
                                          HcItimesClass class48 = null;
                                          if (this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(1))
                                          {
                                                class48 = this.HOP_THANH_VAT_PHAM_BIEU_MAU[1];
                                                if (this.HOP_THANH_VAT_PHAM_BIEU_MAU.Count == 0)
                                                {
                                                      this.HOP_THANH_NHAC_NHO(num, 2, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                                }
                                                else if (BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_SO_LUONG, 0) >= 1)
                                                {
                                                      if ((BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_ID, 0) != 0x2faf0806) && (BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_ID, 0) != 0x2faf083c))
                                                      {
                                                            this.HOP_THANH_NHAC_NHO(num, 7, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                                      }
                                                      else
                                                      {
                                                            HcItimesClass class49 = new HcItimesClass
                                                            {
                                                                  VI_TRI = index,
                                                                  VAT_PHAM = base.TRANG_BI_LAN_BAO_VAY[index].Item_byte
                                                            };
                                                            base.TRANG_BI_LAN_BAO_VAY[index].bool_0 = true;
                                                            if (!this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(2))
                                                            {
                                                                  this.HOP_THANH_VAT_PHAM_BIEU_MAU.Add(2, class49);
                                                                  this.HOP_THANH_NHAC_NHO(num, 1, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                                            }
                                                            class48.method_5();
                                                            if ((class48.Thuoc_tinh_1.Number_Prop + class48.Thuoc_tinh_2.Number_Prop) != 0)
                                                            {
                                                                  if (BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_SO_LUONG, 0) < 2)
                                                                  {
                                                                        return;
                                                                  }
                                                                  if (!this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(3))
                                                                  {
                                                                        this.HOP_THANH_VAT_PHAM_BIEU_MAU.Add(3, class49);
                                                                        this.HOP_THANH_NHAC_NHO(num, 1, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                                                  }
                                                            }
                                                            if ((((class48.Thuoc_tinh_1.Number_Prop + class48.Thuoc_tinh_2.Number_Prop) != 0) && ((class48.Thuoc_tinh_3.Number_Prop + class48.Thuoc_tinh_4.Number_Prop) != 0)) && ((BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_SO_LUONG, 0) >= 3) && !this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(4)))
                                                            {
                                                                  this.HOP_THANH_VAT_PHAM_BIEU_MAU.Add(4, class49);
                                                                  this.HOP_THANH_NHAC_NHO(num, 1, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                                            }
                                                      }
                                                }
                                          }
                                          else
                                          {
                                                this.HOP_THANH_NHAC_NHO(num, 5, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                          }
                                    }
                                    return;
                              }
                              catch (Exception exception24)
                              {
                                    Form1.WriteLine(1, "合成系统 强化合成 合成2 出错![" + base.Userid + "]-[" + base.UserName + "]" + exception24.Message);
                                    return;
                              }
                              Label_5105:;
                              try
                              {
                                    if ((this.HOP_THANH_VAT_PHAM_BIEU_MAU.Count == 0) || this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(5))
                                    {
                                          return;
                                    }
                                    Buffer.BlockCopy(buffer, 0, dst, 11, 2);
                                    Buffer.BlockCopy(BitConverter.GetBytes(index), 0, dst, 0x1b, 4);
                                    Buffer.BlockCopy(base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_ID, 0, dst, 0x1f, 4);
                                    Buffer.BlockCopy(base.TRANG_BI_LAN_BAO_VAY[index].Item_thuoc_tinh, 0, dst, 0x27, 0x38);
                                    Buffer.BlockCopy(BitConverter.GetBytes(0), 0, dst, 0x5f, 4);
                                    Buffer.BlockCopy(BitConverter.GetBytes(0), 0, dst, 0x67, 4);
                                    HcItimesClass class50 = new HcItimesClass
                                    {
                                          VI_TRI = index,
                                          VAT_PHAM = base.TRANG_BI_LAN_BAO_VAY[index].Item_byte
                                    };
                                    base.TRANG_BI_LAN_BAO_VAY[index].bool_0 = true;
                                    this.HOP_THANH_VAT_PHAM_BIEU_MAU.Add(5, class50);
                                    goto Label_EE18;
                              }
                              catch (Exception exception25)
                              {
                                    Form1.WriteLine(1, "合成系统 强化合成 合成3 出错![" + base.Userid + "]-[" + base.UserName + "]" + exception25.Message);
                                    return;
                              }
                              Label_5224:;
                              try
                              {
                                    HcItimesClass class51;
                                    if (this.HOP_THANH_VAT_PHAM_BIEU_MAU.TryGetValue(1, out class51))
                                    {
                                          base.TRANG_BI_LAN_BAO_VAY[class51.VI_TRI].bool_0 = false;
                                          this.HOP_THANH_VAT_PHAM_BIEU_MAU.Clear();
                                          Buffer.BlockCopy(buffer, 0, dst, 11, 2);
                                          this.HOP_THANH_HE_THONG_TACH_RA_SAI();
                                    }
                                    this.NGUYEN_BAO_HOP_THANH_MO_RA = 0;
                                    Buffer.BlockCopy(buffer, 0, dst, 11, 2);
                                    Buffer.BlockCopy(BitConverter.GetBytes(index), 0, dst, 0x1b, 4);
                                    Buffer.BlockCopy(base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_ID, 0, dst, 0x1f, 4);
                                    Buffer.BlockCopy(base.TRANG_BI_LAN_BAO_VAY[index].Item_thuoc_tinh, 0, dst, 0x27, 0x38);
                                    goto Label_EE18;
                              }
                              catch (Exception exception26)
                              {
                                    this.NGUYEN_BAO_HOP_THANH_MO_RA = 0;
                                    Form1.WriteLine(1, "合成系统 强化合成 合成4 出错![" + base.Userid + "]-[" + base.UserName + "]" + exception26.Message);
                                    return;
                              }
                              Label_5313:;
                              try
                              {
                                    TBL_XWWL_ITEM tbl_xwwl_item11;
                                    if (this.HOP_THANH_VAT_PHAM_BIEU_MAU.Count <= 0)
                                    {
                                          return;
                                    }
                                    HcItimesClass class52 = null;
                                    HcItimesClass class53 = null;
                                    HcItimesClass class54 = null;
                                    if (this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(1))
                                    {
                                          class52 = this.HOP_THANH_VAT_PHAM_BIEU_MAU[1];
                                    }
                                    if (this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(2))
                                    {
                                          class53 = this.HOP_THANH_VAT_PHAM_BIEU_MAU[2];
                                    }
                                    if (this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(3))
                                    {
                                          class54 = this.HOP_THANH_VAT_PHAM_BIEU_MAU[3];
                                    }
                                    if (((BitConverter.ToInt64(base.TRANG_BI_LAN_BAO_VAY[class52.VI_TRI].Item_toan_bo_ID, 0) != BitConverter.ToInt64(class52.Item_toan_bo_ID, 0)) || (BitConverter.ToInt64(base.TRANG_BI_LAN_BAO_VAY[class53.VI_TRI].Item_toan_bo_ID, 0) != BitConverter.ToInt64(class53.Item_toan_bo_ID, 0))) || ((class54 != null) && (BitConverter.ToInt64(base.TRANG_BI_LAN_BAO_VAY[class54.VI_TRI].Item_toan_bo_ID, 0) != BitConverter.ToInt64(class54.Item_toan_bo_ID, 0))))
                                    {
                                          return;
                                    }
                                    class52.method_5();
                                    class52.method_8();
                                    class53.method_8();
                                    if (base.TRANG_BI_LAN_BAO_VAY[class52.VI_TRI].Item_troi_chat)
                                    {
                                          this.HOP_THANH_NHAC_NHO(num, 2, 0, base.TRANG_BI_LAN_BAO_VAY[class52.VI_TRI]);
                                          return;
                                    }
                                    if (!World.Itme.TryGetValue(BitConverter.ToInt32(class52.VAT_PHAMid, 0), out tbl_xwwl_item11))
                                    {
                                          return;
                                    }
                                    if ((((tbl_xwwl_item11.FLD_RESIDE2 != 1) && (tbl_xwwl_item11.FLD_RESIDE2 != 2)) && ((tbl_xwwl_item11.FLD_RESIDE2 != 4) && (tbl_xwwl_item11.FLD_RESIDE2 != 5))) && ((tbl_xwwl_item11.FLD_RESIDE2 != 6) && (tbl_xwwl_item11.FLD_RESIDE2 != 12)))
                                    {
                                          Form1.WriteLine(6, string.Concat(new object[] { "合成系统 WGF BUG11[", BitConverter.ToInt32(class52.VAT_PHAMid, 0), "]-[", BitConverter.ToInt32(class53.VAT_PHAMid, 0), "]" }));
                                          return;
                                    }
                                    if ((tbl_xwwl_item11.FLD_RESIDE2 == 12) && (BitConverter.ToInt32(class53.VAT_PHAMid, 0) != 0x2faf080d))
                                    {
                                          Form1.WriteLine(6, string.Concat(new object[] { "合成系统 WGF BUG1[", BitConverter.ToInt32(class52.VAT_PHAMid, 0), "]-[", BitConverter.ToInt32(class53.VAT_PHAMid, 0), "]" }));
                                          return;
                                    }
                                    if (((tbl_xwwl_item11.FLD_RESIDE2 == 1) || (tbl_xwwl_item11.FLD_RESIDE2 == 2)) || ((tbl_xwwl_item11.FLD_RESIDE2 == 5) || (tbl_xwwl_item11.FLD_RESIDE2 == 6)))
                                    {
                                          if (((BitConverter.ToInt32(class53.VAT_PHAMid, 0) != 0x2faf0802) && (BitConverter.ToInt32(class53.VAT_PHAMid, 0) != 0x2faf0818)) && (BitConverter.ToInt32(class53.VAT_PHAMid, 0) != 0x2faf083e))
                                          {
                                                Form1.WriteLine(6, string.Concat(new object[] { "合成系统 WGF BUG2[", BitConverter.ToInt32(class52.VAT_PHAMid, 0), "]-[", BitConverter.ToInt32(class53.VAT_PHAMid, 0), "]" }));
                                                return;
                                          }
                                          if ((tbl_xwwl_item11.FLD_RESIDE2 == 6) && (((class52.Thuoc_tinh_2.Number_Prop != 0) || (class52.Thuoc_tinh_3.Number_Prop != 0)) || (class52.Thuoc_tinh_4.Number_Prop != 0)))
                                          {
                                                return;
                                          }
                                    }
                                    if ((((tbl_xwwl_item11.FLD_RESIDE2 == 4) && (BitConverter.ToInt32(class53.VAT_PHAMid, 0) != 0x2faf0801)) && ((BitConverter.ToInt32(class53.VAT_PHAMid, 0) != 0x2faf0817) && (BitConverter.ToInt32(class53.VAT_PHAMid, 0) != 0x2faf0819))) && ((BitConverter.ToInt32(class53.VAT_PHAMid, 0) != 0x2faf081a) && (BitConverter.ToInt32(class53.VAT_PHAMid, 0) != 0x2faf083d)))
                                    {
                                          Form1.WriteLine(6, string.Concat(new object[] { "合成系统 WGF BUG3[", BitConverter.ToInt32(class52.VAT_PHAMid, 0), "]-[", BitConverter.ToInt32(class53.VAT_PHAMid, 0), "]" }));
                                          return;
                                    }
                                    if (class52.StrengthNumber > 0)
                                    {
                                          Form1.WriteLine(6, "合成系统 先强后合 BUG1[" + base.Userid + "]-[" + base.UserName + "]");
                                          return;
                                    }
                                    Random random9 = new Random();
                                    char[] chArray3 = new char[] { ';' };
                                    string[] strArray3 = World.Hop_thanh_xac_xuat_khong_che.Split(chArray3);
                                    char[] chArray4 = new char[] { ';' };
                                    string[] strArray4 = World.Da_Luc_cong_kich_Vo_cong_hop_thanh_xac_xuat_khong_che.Split(chArray4);
                                    char[] chArray5 = new char[] { ';' };
                                    string[] strArray5 = World.Da_Vo_cong_phong_ngu_hop_thanh_xac_xuat_khong_che.Split(chArray5);
                                    char[] chArray6 = new char[] { ';' };
                                    string[] strArray6 = World.Da_Suc_phong_ngu_hop_thanh_xac_xuat_khong_che.Split(chArray6);
                                    double num23 = random9.Next(int.Parse(strArray3[0]), int.Parse(strArray3[1]));
                                    if (class53.PhaseType == 7)
                                    {
                                          num23 = random9.Next(int.Parse(strArray4[0]), int.Parse(strArray4[1]));
                                    }
                                    else if (class53.PhaseType == 11)
                                    {
                                          num23 = random9.Next(int.Parse(strArray5[0]), int.Parse(strArray5[1]));
                                    }
                                    else if (class53.PhaseType == 2)
                                    {
                                          num23 = random9.Next(int.Parse(strArray6[0]), int.Parse(strArray6[1]));
                                    }
                                    double num24 = ((((((class52.Thuoc_tinh_1.So_luong * 20) + (class52.Thuoc_tinh_2.So_luong * 20)) + (class52.Thuoc_tinh_3.So_luong * 20)) + (class52.Thuoc_tinh_4.So_luong * 20)) + class53.NumberOfPhase) >= 0x63) ? 99.0 : ((double)class53.NumberOfPhase);
                                    if (((class52.Thuoc_tinh_1.Number_Prop != 0) && (class52.Thuoc_tinh_2.Number_Prop != 0)) && ((class52.Thuoc_tinh_3.Number_Prop != 0) && (class52.Thuoc_tinh_4.Number_Prop != 0)))
                                    {
                                          return;
                                    }
                                    if (class54 != null)
                                    {
                                          num4 = BitConverter.ToInt32(class54.VAT_PHAMid, 0);
                                          switch (num4)
                                          {
                                                case 0x2faf0803:
                                                      num23 += 5.0;
                                                      goto Label_59B8;

                                                case 0x2faf0804:
                                                      num23 += 10.0;
                                                      goto Label_59B8;

                                                case 0x2faf0805:
                                                      num23 += 15.0;
                                                      goto Label_59B8;

                                                case 0x2faf081d:
                                                      num23 += 20.0;
                                                      goto Label_59B8;
                                          }
                                          if (num4 == 0x3c14dc88)
                                          {
                                                num23 += 25.0;
                                          }
                                    }
                                    Label_59B8:
                                    if (base.dictionary_3.ContainsKey(0x3c14dd38))
                                    {
                                          num23 += 10.0;
                                    }
                                    if (base.FLD_trang_bi_them_vao_hop_thanh_ty_le_thanh_cong_ti_le_phan_tram != 0.0)
                                    {
                                          num23 += 100.0 * base.FLD_trang_bi_them_vao_hop_thanh_ty_le_thanh_cong_ti_le_phan_tram;
                                    }
                                    if (this.NGUYEN_BAO_HOP_THANH_MO_RA == 1)
                                    {
                                          num23 += 5.0;
                                    }
                                    if (base.FLD_VIP == 1)
                                    {
                                          num23 += 100.0 * World.VIP_Hop_thanh_xac_xuat;
                                    }
                                    if (World.Hop_thanh_xac_xuat != 0.0)
                                    {
                                          num23 += 100.0 * World.Hop_thanh_xac_xuat;
                                    }
                                    if (num23 >= num24)
                                    {
                                          if (class52.Thuoc_tinh_1.Prop_Type == 0)
                                          {
                                                if (class53.PhaseType == 8)
                                                {
                                                      class52.Thuoc_tinh_1.QigqongPropType = class53.KHI_CONG_THUOC_TINH_LOAI_HINH;
                                                }
                                                class52.Thuoc_tinh_1.Prop_Type = class53.PhaseType;
                                                class52.Thuoc_tinh_1.Number_Prop = class53.NumberOfPhase;
                                                class52.SetProperty();
                                          }
                                          else if (class52.Thuoc_tinh_2.Prop_Type == 0)
                                          {
                                                if (class53.PhaseType == 8)
                                                {
                                                      class52.Thuoc_tinh_2.QigqongPropType = class53.KHI_CONG_THUOC_TINH_LOAI_HINH;
                                                }
                                                class52.Thuoc_tinh_2.Prop_Type = class53.PhaseType;
                                                class52.Thuoc_tinh_2.Number_Prop = class53.NumberOfPhase;
                                                class52.SetProperty();
                                          }
                                          else if (class52.Thuoc_tinh_3.Prop_Type == 0)
                                          {
                                                if (class53.PhaseType == 8)
                                                {
                                                      class52.Thuoc_tinh_3.QigqongPropType = class53.KHI_CONG_THUOC_TINH_LOAI_HINH;
                                                }
                                                class52.Thuoc_tinh_3.Prop_Type = class53.PhaseType;
                                                class52.Thuoc_tinh_3.Number_Prop = class53.NumberOfPhase;
                                                class52.SetProperty();
                                          }
                                          else if (class52.Thuoc_tinh_4.Prop_Type == 0)
                                          {
                                                if (class53.PhaseType == 8)
                                                {
                                                      class52.Thuoc_tinh_4.QigqongPropType = class53.KHI_CONG_THUOC_TINH_LOAI_HINH;
                                                }
                                                class52.Thuoc_tinh_4.Prop_Type = class53.PhaseType;
                                                class52.Thuoc_tinh_4.Number_Prop = class53.NumberOfPhase;
                                                class52.SetProperty();
                                          }
                                          if (base.FLD_VIP == 1)
                                          {
                                                base.GameMessage("Congratulations, VIP customers improve synthesis rate" + (World.VIP_Hop_thanh_xac_xuat * 100.0) + "%", 9, "system hint");
                                          }
                                    }
                                    else
                                    {
                                          base.GameMessage("VIP customers to improve synthesis rate" + (World.VIP_Hop_thanh_xac_xuat * 100.0) + "%", 9, "system hint");
                                          Buffer.BlockCopy(BitConverter.GetBytes(0), 0, dst, 13, 4);
                                    }
                                    Buffer.BlockCopy(buffer, 0, dst, 11, 2);
                                    Buffer.BlockCopy(class52.VAT_PHAM, 0, dst, 0x1f, 4);
                                    Buffer.BlockCopy(class52.VAT_PHAM, 0, dst, 0x27, 20);
                                    Buffer.BlockCopy(BitConverter.GetBytes(index), 0, dst, 0x1b, 4);
                                    Buffer.BlockCopy(base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_ID, 0, dst, 0x1f, 4);
                                    Buffer.BlockCopy(base.TRANG_BI_LAN_BAO_VAY[index].Item_thuoc_tinh, 0, dst, 0x27, 0x38);
                                    Buffer.BlockCopy(BitConverter.GetBytes(0), 0, dst, 0x5f, 4);
                                    Buffer.BlockCopy(BitConverter.GetBytes(0), 0, dst, 0x67, 4);
                                    this.LAM_GIAM_DI_VAT_PHAM(class53.VI_TRI, 1);
                                    if (class54 != null)
                                    {
                                          this.LAM_GIAM_DI_VAT_PHAM(class54.VI_TRI, 1);
                                    }
                                    if ((BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[class52.VI_TRI].VAT_PHAM_ID, 0) != 0) && (BitConverter.ToInt64(base.TRANG_BI_LAN_BAO_VAY[class52.VI_TRI].Item_toan_bo_ID, 0) == BitConverter.ToInt64(class52.Item_toan_bo_ID, 0)))
                                    {
                                          this.LAM_GIAM_DI_VAT_PHAM(class52.VI_TRI, 1);
                                          this.TANG_CUONG_VAT_PHAM(class52.Item_toan_bo_ID, class52.VAT_PHAMid, class52.VI_TRI, class52.VAT_PHAM_SO_LUONG, class52.Item_thuoc_tinh);
                                    }
                                    base.TRANG_BI_LAN_BAO_VAY[class52.VI_TRI].bool_0 = false;
                                    this.HOP_THANH_VAT_PHAM_BIEU_MAU.Clear();
                                    this.HOP_THANH_HE_THONG_TACH_RA_SAI();
                                    this.NGUYEN_BAO_HOP_THANH_MO_RA = 0;
                                    goto Label_EE18;
                              }
                              catch (Exception exception27)
                              {
                                    this.NGUYEN_BAO_HOP_THANH_MO_RA = 0;
                                    Form1.WriteLine(1, "合成系统 合成属性 合成 出错![" + base.Userid + "]-[" + base.UserName + "]" + exception27.Message);
                                    return;
                              }
                              Label_5DFA:;
                              try
                              {
                                    if (((((base.TRANG_BI_LAN_BAO_VAY[index].GetItem_ID == 0xdbba1L) || (base.TRANG_BI_LAN_BAO_VAY[index].GetItem_ID == 0xdbba2L)) || ((base.TRANG_BI_LAN_BAO_VAY[index].GetItem_ID == 0xdbba3L) || (base.TRANG_BI_LAN_BAO_VAY[index].GetItem_ID == 0xdbba4L))) || (((base.TRANG_BI_LAN_BAO_VAY[index].GetItem_ID == 0xdbba5L) || (base.TRANG_BI_LAN_BAO_VAY[index].GetItem_ID == 0xdbba6L)) || ((base.TRANG_BI_LAN_BAO_VAY[index].GetItem_ID == 0xdbba7L) || (base.TRANG_BI_LAN_BAO_VAY[index].GetItem_ID == 0xdbba8L)))) || (((base.TRANG_BI_LAN_BAO_VAY[index].GetItem_ID == 0xdbbb3L) || (base.TRANG_BI_LAN_BAO_VAY[index].GetItem_ID == 0xdbbb4L)) || ((base.TRANG_BI_LAN_BAO_VAY[index].bool_0 || base.TRANG_BI_LAN_BAO_VAY[index].Item_troi_chat) || this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(1))))
                                    {
                                          return;
                                    }
                                    Buffer.BlockCopy(buffer, 0, dst, 11, 2);
                                    Buffer.BlockCopy(BitConverter.GetBytes(index), 0, dst, 0x1b, 4);
                                    Buffer.BlockCopy(base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_ID, 0, dst, 0x1f, 4);
                                    Buffer.BlockCopy(base.TRANG_BI_LAN_BAO_VAY[index].Item_thuoc_tinh, 0, dst, 0x27, 0x38);
                                    Buffer.BlockCopy(BitConverter.GetBytes(0), 0, dst, 0x5f, 4);
                                    Buffer.BlockCopy(BitConverter.GetBytes(0), 0, dst, 0x67, 4);
                                    HcItimesClass class55 = new HcItimesClass
                                    {
                                          VI_TRI = index,
                                          VAT_PHAM = base.TRANG_BI_LAN_BAO_VAY[index].Item_byte
                                    };
                                    base.TRANG_BI_LAN_BAO_VAY[index].bool_0 = true;
                                    this.HOP_THANH_VAT_PHAM_BIEU_MAU.Add(1, class55);
                                    goto Label_EE18;
                              }
                              catch (Exception exception28)
                              {
                                    Form1.WriteLine(1, "合成系统 合成属性 合成1 出错![" + base.Userid + "]-[" + base.UserName + "]" + exception28.Message);
                                    return;
                              }
                              Label_600E:;
                              try
                              {
                                    if ((this.HOP_THANH_VAT_PHAM_BIEU_MAU.Count == 0) || this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(2))
                                    {
                                          return;
                                    }
                                    Buffer.BlockCopy(buffer, 0, dst, 11, 2);
                                    Buffer.BlockCopy(BitConverter.GetBytes(index), 0, dst, 0x1b, 4);
                                    Buffer.BlockCopy(base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_ID, 0, dst, 0x1f, 4);
                                    Buffer.BlockCopy(base.TRANG_BI_LAN_BAO_VAY[index].Item_thuoc_tinh, 0, dst, 0x27, 0x38);
                                    Buffer.BlockCopy(BitConverter.GetBytes(0), 0, dst, 0x5f, 4);
                                    Buffer.BlockCopy(BitConverter.GetBytes(0), 0, dst, 0x67, 4);
                                    HcItimesClass class56 = new HcItimesClass
                                    {
                                          VI_TRI = index,
                                          VAT_PHAM = base.TRANG_BI_LAN_BAO_VAY[index].Item_byte
                                    };
                                    this.HOP_THANH_VAT_PHAM_BIEU_MAU.Add(2, class56);
                                    base.TRANG_BI_LAN_BAO_VAY[index].bool_0 = true;
                                    goto Label_EE18;
                              }
                              catch (Exception exception29)
                              {
                                    Form1.WriteLine(1, "合成系统 合成属性 合成2 出错![" + base.Userid + "]-[" + base.UserName + "]" + exception29.Message);
                                    return;
                              }
                              Label_612D:;
                              try
                              {
                                    if ((this.HOP_THANH_VAT_PHAM_BIEU_MAU.Count == 0) || this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(3))
                                    {
                                          return;
                                    }
                                    Buffer.BlockCopy(buffer, 0, dst, 11, 2);
                                    Buffer.BlockCopy(BitConverter.GetBytes(index), 0, dst, 0x1b, 4);
                                    Buffer.BlockCopy(base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_ID, 0, dst, 0x1f, 4);
                                    Buffer.BlockCopy(base.TRANG_BI_LAN_BAO_VAY[index].Item_thuoc_tinh, 0, dst, 0x27, 0x38);
                                    Buffer.BlockCopy(BitConverter.GetBytes(0), 0, dst, 0x5f, 4);
                                    Buffer.BlockCopy(BitConverter.GetBytes(0), 0, dst, 0x67, 4);
                                    HcItimesClass class57 = new HcItimesClass
                                    {
                                          VI_TRI = index,
                                          VAT_PHAM = base.TRANG_BI_LAN_BAO_VAY[index].Item_byte
                                    };
                                    this.HOP_THANH_VAT_PHAM_BIEU_MAU.Add(3, class57);
                                    base.TRANG_BI_LAN_BAO_VAY[index].bool_0 = true;
                                    goto Label_EE18;
                              }
                              catch (Exception exception30)
                              {
                                    Form1.WriteLine(1, "合成系统 合成属性 合成3 出错![" + base.Userid + "]-[" + base.UserName + "]" + exception30.Message);
                                    return;
                              }
                              Label_624C:;
                              try
                              {
                                    HcItimesClass class58;
                                    if (this.HOP_THANH_VAT_PHAM_BIEU_MAU.TryGetValue(1, out class58))
                                    {
                                          base.TRANG_BI_LAN_BAO_VAY[class58.VI_TRI].bool_0 = false;
                                          this.HOP_THANH_VAT_PHAM_BIEU_MAU.Clear();
                                          Buffer.BlockCopy(buffer, 0, dst, 11, 2);
                                          this.HOP_THANH_HE_THONG_TACH_RA_SAI();
                                          this.NGUYEN_BAO_HOP_THANH_MO_RA = 0;
                                    }
                                    goto Label_EE18;
                              }
                              catch (Exception exception31)
                              {
                                    this.NGUYEN_BAO_HOP_THANH_MO_RA = 0;
                                    Form1.WriteLine(1, "合成系统 合成属性 合成4 出错![" + base.Userid + "]-[" + base.UserName + "]" + exception31.Message);
                                    return;
                              }
                              Label_62ED:;
                              try
                              {
                                    int num25 = base.DUOC_KIEN_HANG_RONG(this);
                                    if (num25 == -1)
                                    {
                                          base.GameMessage("Backpack backpack no room please cleanup", 9, "system hint");
                                          return;
                                    }
                                    if ((this.HOP_THANH_VAT_PHAM_BIEU_MAU == null) || (this.HOP_THANH_VAT_PHAM_BIEU_MAU.Count != 4))
                                    {
                                          goto Label_6BEB;
                                    }
                                    if (((this.HOP_THANH_VAT_PHAM_BIEU_MAU[1] == null) || (this.HOP_THANH_VAT_PHAM_BIEU_MAU[2] == null)) || ((this.HOP_THANH_VAT_PHAM_BIEU_MAU[3] == null) || (this.HOP_THANH_VAT_PHAM_BIEU_MAU[4] == null)))
                                    {
                                          return;
                                    }
                                    if (World.MOI_LAN_TAI_TAO_TIEU_HAO_THIET_LAP == 0)
                                    {
                                          if (base.Player_Money < World.MOI_LAN_TIEU_HAO_SO_LUONG)
                                          {
                                                this.HOP_THANH_NHAC_NHO(num, 4, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                                return;
                                          }
                                          base.Player_Money -= World.MOI_LAN_TIEU_HAO_SO_LUONG;
                                          base.UpdateMoneyAndWeight();
                                    }
                                    else
                                    {
                                          if (base.FLD_RXPIONT < World.MOI_LAN_TIEU_HAO_SO_LUONG)
                                          {
                                                this.HOP_THANH_NHAC_NHO(num, 4, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                                base.GameMessage("Ingot insufficient, recycling synthetic stone needs to be deducted" + World.MOI_LAN_TIEU_HAO_SO_LUONG.ToString() + "Ingot / times!", 9, "system hint");
                                                return;
                                          }
                                          base.KIEM_SOAT_CASH_SO_LIEU(World.MOI_LAN_TIEU_HAO_SO_LUONG, 0);
                                          base.UPDATE_RXPIONT();
                                    }
                                    int num26 = new Random(World.smethod_15()).Next(0, 240);
                                    int num27 = new Random(World.smethod_15()).Next(0, 0x79);
                                    string str = "3";
                                    int num28 = 0;
                                    int num29 = 0;
                                    int num30 = BitConverter.ToInt32(this.HOP_THANH_VAT_PHAM_BIEU_MAU[1].VAT_PHAMid, 0);
                                    int num31 = 0;
                                    HcItimesClass class59 = this.HOP_THANH_VAT_PHAM_BIEU_MAU[1];
                                    HcItimesClass class60 = this.HOP_THANH_VAT_PHAM_BIEU_MAU[2];
                                    HcItimesClass class61 = this.HOP_THANH_VAT_PHAM_BIEU_MAU[3];
                                    HcItimesClass class62 = this.HOP_THANH_VAT_PHAM_BIEU_MAU[4];
                                    if (((BitConverter.ToInt64(base.TRANG_BI_LAN_BAO_VAY[class59.VI_TRI].Item_toan_bo_ID, 0) != BitConverter.ToInt64(class59.Item_toan_bo_ID, 0)) || (BitConverter.ToInt64(base.TRANG_BI_LAN_BAO_VAY[class60.VI_TRI].Item_toan_bo_ID, 0) != BitConverter.ToInt64(class60.Item_toan_bo_ID, 0))) || ((BitConverter.ToInt64(base.TRANG_BI_LAN_BAO_VAY[class61.VI_TRI].Item_toan_bo_ID, 0) != BitConverter.ToInt64(class61.Item_toan_bo_ID, 0)) || (BitConverter.ToInt64(base.TRANG_BI_LAN_BAO_VAY[class62.VI_TRI].Item_toan_bo_ID, 0) != BitConverter.ToInt64(class62.Item_toan_bo_ID, 0))))
                                    {
                                          return;
                                    }
                                    if (base.FLD_VIP == 1)
                                    {
                                          num26 += 10;
                                          num27 += 20;
                                    }
                                    if (num30 != 0x4c4b401)
                                    {
                                          goto Label_67DF;
                                    }
                                    num31 = 0x4c4b401;
                                    if ((num26 >= 0) && (num26 <= 40))
                                    {
                                          str = "3";
                                    }
                                    else if ((num26 > 40) && (num26 <= 80))
                                    {
                                          str = "5";
                                    }
                                    else if ((num26 > 80) && (num26 <= 120))
                                    {
                                          str = "10";
                                    }
                                    else if ((num26 > 120) && (num26 <= 160))
                                    {
                                          str = "1";
                                    }
                                    else if ((num26 > 160) && (num26 <= 200))
                                    {
                                          str = "1";
                                    }
                                    else if ((num26 > 200) && (num26 <= 240))
                                    {
                                          str = "7";
                                    }
                                    string str2 = str;
                                    if (str2 == null)
                                    {
                                          goto Label_678F;
                                    }
                                    string str3 = str2;
                                    if (str3 == null)
                                    {
                                          goto Label_66F9;
                                    }
                                    if (str3 == "1")
                                    {
                                          char[] chArray7 = new char[] { ';' };
                                          string[] strArray7 = World.TAI_TAO_KIM_CUONG_THACH_TAN_CONG.Split(chArray7);
                                          num28 = new Random(World.smethod_15()).Next(int.Parse(strArray7[0]), int.Parse(strArray7[1]) + 1);
                                    }
                                    else if (str3 != "3")
                                    {
                                          if (str3 != "5")
                                          {
                                                goto Label_66F9;
                                          }
                                          char[] chArray8 = new char[] { ';' };
                                          string[] strArray8 = World.TAI_TAO_KIM_CUONG_THACH_TRUNG_MUC_TIEU.Split(chArray8);
                                          num28 = new Random(World.smethod_15()).Next(int.Parse(strArray8[0]), int.Parse(strArray8[1]) + 1);
                                    }
                                    else
                                    {
                                          char[] chArray9 = new char[] { ';' };
                                          string[] strArray9 = World.TAI_TAO_KIM_CUONG_THACH_SINH_MENH.Split(chArray9);
                                          num28 = new Random(World.smethod_15()).Next(int.Parse(strArray9[0]), int.Parse(strArray9[1]) + 1);
                                    }
                                    goto Label_678F;
                                    Label_66F9:
                                    if (str2 != "7")
                                    {
                                          if (str2 == "10")
                                          {
                                                char[] chArray10 = new char[] { ';' };
                                                string[] strArray10 = World.TAI_TAO_KIM_CUONG_THACH_TRUY_THUONG.Split(chArray10);
                                                num28 = new Random(World.smethod_15()).Next(int.Parse(strArray10[0]), int.Parse(strArray10[1]) + 1);
                                          }
                                    }
                                    else
                                    {
                                          char[] chArray11 = new char[] { ';' };
                                          string[] strArray11 = World.TAI_TAO_KIM_CUONG_THACH_LUC_CONG_KICH_VO_CONG.Split(chArray11);
                                          num28 = new Random(World.smethod_15()).Next(int.Parse(strArray11[0]), int.Parse(strArray11[1]) + 1);
                                    }
                                    Label_678F:
                                    if ((num27 > 0) && (num27 <= 40))
                                    {
                                          num31 = 0x2faf0801;
                                    }
                                    else if ((num27 > 40) && (num27 <= 80))
                                    {
                                          num31 = 0x2faf0817;
                                    }
                                    else if ((num27 > 80) && (num27 <= 0x87))
                                    {
                                          num31 = 0x2faf083d;
                                    }
                                    goto Label_6A59;
                                    Label_67DF:
                                    if (num30 != 0x2faf0802)
                                    {
                                          return;
                                    }
                                    num31 = 0x2faf0802;
                                    if ((num26 >= 0) && (num26 <= 40))
                                    {
                                          str = "3";
                                    }
                                    else if ((num26 > 40) && (num26 <= 80))
                                    {
                                          str = "4";
                                    }
                                    else if ((num26 > 80) && (num26 <= 120))
                                    {
                                          str = "6";
                                    }
                                    else if ((num26 > 120) && (num26 <= 160))
                                    {
                                          str = "2";
                                    }
                                    else if ((num26 > 160) && (num26 <= 200))
                                    {
                                          str = "2";
                                    }
                                    else if ((num26 > 200) && (num26 <= 240))
                                    {
                                          str = "11";
                                    }
                                    str2 = str;
                                    if (str2 == null)
                                    {
                                          goto Label_6A1A;
                                    }
                                    str3 = str2;
                                    if (str3 == null)
                                    {
                                          goto Label_6984;
                                    }
                                    if (str3 == "2")
                                    {
                                          char[] chArray12 = new char[] { ';' };
                                          string[] strArray12 = World.TAI_TAO_HAN_NGOC_THACH_PHONG_NGU.Split(chArray12);
                                          num28 = new Random(World.smethod_15()).Next(int.Parse(strArray12[0]), int.Parse(strArray12[1]) + 1);
                                    }
                                    else if (str3 != "3")
                                    {
                                          if (str3 != "4")
                                          {
                                                goto Label_6984;
                                          }
                                          char[] chArray13 = new char[] { ';' };
                                          string[] strArray13 = World.TAI_TAO_HAN_NGOC_THACH_NOI_CONG.Split(chArray13);
                                          num28 = new Random(World.smethod_15()).Next(int.Parse(strArray13[0]), int.Parse(strArray13[1]) + 1);
                                    }
                                    else
                                    {
                                          char[] chArray14 = new char[] { ';' };
                                          string[] strArray14 = World.TAI_TAO_HAN_NGOC_THACH_SINH_MENH.Split(chArray14);
                                          num28 = new Random(World.smethod_15()).Next(int.Parse(strArray14[0]), int.Parse(strArray14[1]) + 1);
                                    }
                                    goto Label_6A1A;
                                    Label_6984:
                                    if (str2 != "6")
                                    {
                                          if (str2 == "11")
                                          {
                                                char[] chArray15 = new char[] { ';' };
                                                string[] strArray15 = World.TAI_TAO_HAN_NGOC_THACH_PHONG_NGU_VO_CONG.Split(chArray15);
                                                num28 = new Random(World.smethod_15()).Next(int.Parse(strArray15[0]), int.Parse(strArray15[1]) + 1);
                                          }
                                    }
                                    else
                                    {
                                          char[] chArray16 = new char[] { ';' };
                                          string[] strArray16 = World.TAI_TAO_HAN_NGOC_THACH_NE_TRANH.Split(chArray16);
                                          num28 = new Random(World.smethod_15()).Next(int.Parse(strArray16[0]), int.Parse(strArray16[1]) + 1);
                                    }
                                    Label_6A1A:
                                    if ((num27 > 0) && (num27 <= 40))
                                    {
                                          num31 = 0x2faf0802;
                                    }
                                    else if ((num27 > 40) && (num27 <= 80))
                                    {
                                          num31 = 0x2faf0818;
                                    }
                                    else if ((num27 > 80) && (num27 <= 0x87))
                                    {
                                          num31 = 0x2faf083e;
                                    }
                                    Label_6A59:
                                    switch (num28.ToString().Length)
                                    {
                                          case 1:
                                                num29 = int.Parse(str + "0000" + num28);
                                                break;

                                          case 2:
                                                num29 = int.Parse(str + "000" + num28);
                                                break;

                                          case 3:
                                                num29 = int.Parse(str + "00" + num28);
                                                break;

                                          case 4:
                                                num29 = int.Parse(str + "0" + num28);
                                                break;

                                          case 5:
                                                num29 = int.Parse(str + num28);
                                                break;
                                    }
                                    Buffer.BlockCopy(buffer, 0, dst, 11, 2);
                                    Buffer.BlockCopy(BitConverter.GetBytes(class59.VI_TRI), 0, dst, 0x1b, 4);
                                    Buffer.BlockCopy(base.TRANG_BI_LAN_BAO_VAY[class59.VI_TRI].VAT_PHAM_ID, 0, dst, 0x1f, 4);
                                    Buffer.BlockCopy(base.TRANG_BI_LAN_BAO_VAY[class59.VI_TRI].Item_thuoc_tinh, 0, dst, 0x27, 0x38);
                                    this.LAM_GIAM_DI_VAT_PHAM(class59.VI_TRI, 1);
                                    this.LAM_GIAM_DI_VAT_PHAM(class60.VI_TRI, 1);
                                    this.LAM_GIAM_DI_VAT_PHAM(class61.VI_TRI, 1);
                                    this.LAM_GIAM_DI_VAT_PHAM(class62.VI_TRI, 1);
                                    this.TANG_CUONG_VAT_PHAM(BitConverter.GetBytes(RxjhClass.GetDBItmeId()), BitConverter.GetBytes(num31), num25, BitConverter.GetBytes(1), BitConverter.GetBytes(num29), num29);
                                    this.HOP_THANH_VAT_PHAM_BIEU_MAU.Clear();
                                    this.HOP_THANH_HE_THONG_TACH_RA_SAI();
                                    this.NGUYEN_BAO_HOP_THANH_MO_RA = 0;
                                    goto Label_EE18;
                                    Label_6BEB:
                                    base.GameMessage("Stone put less, recycling synthetic stone requires a minimum of four different types of stone", 9, "system hint");
                                    return;
                              }
                              catch (Exception exception32)
                              {
                                    Form1.WriteLine(1, "Synthesis system reengineering synthetic stone - confirm Reengineering wrong![" + base.Userid + "]-[" + base.UserName + "]" + exception32.Message);
                                    return;
                              }
                              Label_6C4E:
                              if (num4 <= 120)
                              {
                                    if (num4 != 0x59)
                                    {
                                          if (num4 != 120)
                                          {
                                                return;
                                          }
                                          try
                                          {
                                                Converter.smethod_25(byte_5);
                                                int num32 = BitConverter.ToInt32(byte_5, 0x13);
                                                int num33 = BitConverter.ToInt32(byte_5, 0x1b);
                                                int num34 = BitConverter.ToInt16(byte_5, 15);
                                                int num35 = BitConverter.ToInt32(byte_5, 0x1f);
                                                if ((num35.ToString().Contains("90010") && (num32.ToString().Contains("1690") || num32.ToString().Contains("2690"))) && (num32.ToString().Contains("1690") || num32.ToString().Contains("2690")))
                                                {
                                                      if (base.TRANG_BI_LAN_BAO_VAY[num33].bool_0 || base.TRANG_BI_LAN_BAO_VAY[num34].bool_0)
                                                      {
                                                            return;
                                                      }
                                                      if (World.Ao_Bang_to_hop_tieu_hao_Loai_hinh == 0)
                                                      {
                                                            if (base.Player_Money < World.Ao_Bang_to_hop_tieu_hao_so_luong)
                                                            {
                                                                  this.HOP_THANH_NHAC_NHO(num, 4, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                                                  return;
                                                            }
                                                            base.Player_Money -= World.Ao_Bang_to_hop_tieu_hao_so_luong;
                                                            base.UpdateMoneyAndWeight();
                                                      }
                                                      else
                                                      {
                                                            if (base.FLD_RXPIONT < World.Ao_Bang_to_hop_tieu_hao_so_luong)
                                                            {
                                                                  this.HOP_THANH_NHAC_NHO(num, 4, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                                                  base.GameMessage("You need to deduct gold ingot inadequate" + World.Ao_Bang_to_hop_tieu_hao_so_luong + "Months, before they can be combined", 50, "");
                                                                  return;
                                                            }
                                                            base.KIEM_SOAT_CASH_SO_LIEU(World.Ao_Bang_to_hop_tieu_hao_so_luong, 0);
                                                            base.UPDATE_RXPIONT();
                                                      }
                                                      byte[] buffer17 = new byte[4];
                                                      Buffer.BlockCopy(byte_5, 0x1f, buffer17, 0, 4);
                                                      byte[] buffer18 = base.TRANG_BI_LAN_BAO_VAY[num33].Item_toan_bo_ID;
                                                      byte[] buffer19 = new byte[0x38];
                                                      byte[] src = BitConverter.GetBytes(base.TRANG_BI_LAN_BAO_VAY[num34].FLD_MAGIC1);
                                                      byte[] buffer21 = BitConverter.GetBytes(base.TRANG_BI_LAN_BAO_VAY[num34].FLD_MAGIC2);
                                                      byte[] buffer22 = BitConverter.GetBytes(base.TRANG_BI_LAN_BAO_VAY[num34].FLD_MAGIC3);
                                                      byte[] buffer23 = BitConverter.GetBytes(base.TRANG_BI_LAN_BAO_VAY[num34].FLD_MAGIC4);
                                                      if (base.TRANG_BI_LAN_BAO_VAY[num34].FLD_MAGIC1 == 0)
                                                      {
                                                            return;
                                                      }
                                                      Buffer.BlockCopy(src, 0, buffer19, 4, 4);
                                                      Buffer.BlockCopy(buffer21, 0, buffer19, 8, 4);
                                                      Buffer.BlockCopy(buffer22, 0, buffer19, 12, 4);
                                                      Buffer.BlockCopy(buffer23, 0, buffer19, 0x10, 4);
                                                      this.LAM_GIAM_DI_VAT_PHAM(num33, 1);
                                                      this.LAM_GIAM_DI_VAT_PHAM(num34, 1);
                                                      this.TANG_CUONG_VAT_PHAM(buffer18, BitConverter.GetBytes(num35), num33, BitConverter.GetBytes(1), buffer19);
                                                      Buffer.BlockCopy(buffer, 0, dst, 11, 2);
                                                      this.HOP_THANH_HE_THONG_TACH_RA_SAI();
                                                      this.NGUYEN_BAO_HOP_THANH_MO_RA = 0;
                                                      goto Label_EE18;
                                                }
                                                this.HOP_THANH_NHAC_NHO(num, 7, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                                base.GameMessage("Such cloak can not be combined", 9, "Door armor combination");
                                                return;
                                          }
                                          catch (Exception exception34)
                                          {
                                                Form1.WriteLine(1, "组合错误![" + base.Userid + "]-[" + base.UserName + "]" + exception34.Message);
                                                return;
                                          }
                                    }
                                    try
                                    {
                                          HcItimesClass class70;
                                          if (this.HOP_THANH_VAT_PHAM_BIEU_MAU.TryGetValue(1, out class70))
                                          {
                                                base.TRANG_BI_LAN_BAO_VAY[class70.VI_TRI].bool_0 = false;
                                                this.HOP_THANH_VAT_PHAM_BIEU_MAU.Clear();
                                                Buffer.BlockCopy(buffer, 0, dst, 11, 2);
                                                this.HOP_THANH_HE_THONG_TACH_RA_SAI();
                                                this.NGUYEN_BAO_HOP_THANH_MO_RA = 0;
                                          }
                                          goto Label_EE18;
                                    }
                                    catch (Exception exception35)
                                    {
                                          this.NGUYEN_BAO_HOP_THANH_MO_RA = 0;
                                          Form1.WriteLine(1, "合成系统 合成属性 合成4 出错![" + base.Userid + "]-[" + base.UserName + "]" + exception35.Message);
                                          return;
                                    }
                              }
                              switch (num4)
                              {
                                    case 140:
                                          try
                                          {
                                                TBL_XWWL_ITEM tbl_xwwl_item17;
                                                byte[] buffer25 = new byte[4];
                                                byte[] buffer26 = new byte[4];
                                                Buffer.BlockCopy(byte_5, 15, buffer25, 0, 4);
                                                Buffer.BlockCopy(byte_5, 0x13, buffer26, 0, 4);
                                                if ((BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[BitConverter.ToInt32(buffer25, 0)].VAT_PHAM_ID, 0) == 0) || (this.HOP_THANH_VAT_PHAM_BIEU_MAU.Count <= 0))
                                                {
                                                      return;
                                                }
                                                HcItimesClass class89 = null;
                                                HcItimesClass class90 = null;
                                                HcItimesClass class91 = null;
                                                if (this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(1))
                                                {
                                                      class89 = this.HOP_THANH_VAT_PHAM_BIEU_MAU[1];
                                                }
                                                if (this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(2))
                                                {
                                                      class90 = this.HOP_THANH_VAT_PHAM_BIEU_MAU[2];
                                                }
                                                if (this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(3))
                                                {
                                                      class91 = this.HOP_THANH_VAT_PHAM_BIEU_MAU[3];
                                                }
                                                if (((BitConverter.ToInt64(base.TRANG_BI_LAN_BAO_VAY[class89.VI_TRI].Item_toan_bo_ID, 0) != BitConverter.ToInt64(class89.Item_toan_bo_ID, 0)) || (BitConverter.ToInt64(base.TRANG_BI_LAN_BAO_VAY[class90.VI_TRI].Item_toan_bo_ID, 0) != BitConverter.ToInt64(class90.Item_toan_bo_ID, 0))) || ((class91 != null) && (BitConverter.ToInt64(base.TRANG_BI_LAN_BAO_VAY[class91.VI_TRI].Item_toan_bo_ID, 0) != BitConverter.ToInt64(class91.Item_toan_bo_ID, 0))))
                                                {
                                                      return;
                                                }
                                                class89.method_5();
                                                class89.method_8();
                                                class90.method_8();
                                                if (base.TRANG_BI_LAN_BAO_VAY[class89.VI_TRI].Item_troi_chat)
                                                {
                                                      this.HOP_THANH_NHAC_NHO(num, 2, 0, base.TRANG_BI_LAN_BAO_VAY[class89.VI_TRI]);
                                                      return;
                                                }
                                                if (!World.Itme.TryGetValue(BitConverter.ToInt32(class89.VAT_PHAMid, 0), out tbl_xwwl_item17))
                                                {
                                                      return;
                                                }
                                                if (tbl_xwwl_item17.FLD_RESIDE2 != 4)
                                                {
                                                      Form1.WriteLine(6, string.Concat(new object[] { "合成系统 WGF BUG11[", BitConverter.ToInt32(class89.VAT_PHAMid, 0), "]-[", BitConverter.ToInt32(class90.VAT_PHAMid, 0), "]" }));
                                                      return;
                                                }
                                                if ((tbl_xwwl_item17.FLD_RESIDE2 == 12) && (BitConverter.ToInt32(class90.VAT_PHAMid, 0) != 0x2faf080d))
                                                {
                                                      Form1.WriteLine(6, string.Concat(new object[] { "合成系统 WGF BUG1[", BitConverter.ToInt32(class89.VAT_PHAMid, 0), "]-[", BitConverter.ToInt32(class90.VAT_PHAMid, 0), "]" }));
                                                      return;
                                                }
                                                if (((tbl_xwwl_item17.FLD_RESIDE2 == 1) || (tbl_xwwl_item17.FLD_RESIDE2 == 2)) || ((tbl_xwwl_item17.FLD_RESIDE2 == 5) || (tbl_xwwl_item17.FLD_RESIDE2 == 6)))
                                                {
                                                      if (((BitConverter.ToInt32(class90.VAT_PHAMid, 0) != 0x2faf0802) && (BitConverter.ToInt32(class90.VAT_PHAMid, 0) != 0x2faf0818)) && (BitConverter.ToInt32(class90.VAT_PHAMid, 0) != 0x2faf083e))
                                                      {
                                                            Form1.WriteLine(6, string.Concat(new object[] { "合成系统 WGF BUG2[", BitConverter.ToInt32(class89.VAT_PHAMid, 0), "]-[", BitConverter.ToInt32(class90.VAT_PHAMid, 0), "]" }));
                                                            return;
                                                      }
                                                      if ((tbl_xwwl_item17.FLD_RESIDE2 == 6) && (((class89.Thuoc_tinh_2.Number_Prop != 0) || (class89.Thuoc_tinh_3.Number_Prop != 0)) || (class89.Thuoc_tinh_4.Number_Prop != 0)))
                                                      {
                                                            return;
                                                      }
                                                }
                                                if ((((tbl_xwwl_item17.FLD_RESIDE2 == 4) && (BitConverter.ToInt32(class90.VAT_PHAMid, 0) != 0x2faf0801)) && ((BitConverter.ToInt32(class90.VAT_PHAMid, 0) != 0x2faf0817) && (BitConverter.ToInt32(class90.VAT_PHAMid, 0) != 0x2faf0819))) && ((BitConverter.ToInt32(class90.VAT_PHAMid, 0) != 0x2faf081a) && (BitConverter.ToInt32(class90.VAT_PHAMid, 0) != 0x2faf083d)))
                                                {
                                                      Form1.WriteLine(6, string.Concat(new object[] { "合成系统 WGF BUG3[", BitConverter.ToInt32(class89.VAT_PHAMid, 0), "]-[", BitConverter.ToInt32(class90.VAT_PHAMid, 0), "]" }));
                                                      return;
                                                }
                                                double num46 = new Random().Next(0, 100);
                                                double num47 = ((((((class89.Thuoc_tinh_1.So_luong * 20) + (class89.Thuoc_tinh_2.So_luong * 20)) + (class89.Thuoc_tinh_3.So_luong * 20)) + (class89.Thuoc_tinh_4.So_luong * 20)) + class90.NumberOfPhase) >= 0x63) ? 99.0 : ((double)class90.NumberOfPhase);
                                                if (class91 != null)
                                                {
                                                      num4 = BitConverter.ToInt32(class91.VAT_PHAMid, 0);
                                                      switch (num4)
                                                      {
                                                            case 0x2faf0803:
                                                                  num46 += 5.0;
                                                                  goto Label_9731;

                                                            case 0x2faf0804:
                                                                  num46 += 10.0;
                                                                  goto Label_9731;

                                                            case 0x2faf0805:
                                                                  num46 += 15.0;
                                                                  goto Label_9731;

                                                            case 0x2faf081d:
                                                                  num46 += 20.0;
                                                                  goto Label_9731;
                                                      }
                                                      if (num4 == 0x3c14dc88)
                                                      {
                                                            num46 += 25.0;
                                                      }
                                                }
                                                Label_9731:
                                                if (base.FLD_trang_bi_them_vao_hop_thanh_ty_le_thanh_cong_ti_le_phan_tram != 0.0)
                                                {
                                                      num46 += 100.0 * base.FLD_trang_bi_them_vao_hop_thanh_ty_le_thanh_cong_ti_le_phan_tram;
                                                }
                                                if (base.dictionary_3.ContainsKey(0x3c14dd38))
                                                {
                                                      num46 += 10.0;
                                                }
                                                if (this.NGUYEN_BAO_HOP_THANH_MO_RA == 1)
                                                {
                                                      num46 += 5.0;
                                                }
                                                if (base.FLD_VIP == 1)
                                                {
                                                      num46 += 100.0 * World.VIP_Hop_thanh_xac_xuat;
                                                }
                                                if (World.Hop_thanh_xac_xuat != 0.0)
                                                {
                                                      num46 += 100.0 * World.Hop_thanh_xac_xuat;
                                                }
                                                if (num46 >= num47)
                                                {
                                                      if (class89.Thuoc_tinh_1.Prop_Type != 0)
                                                      {
                                                            if (class90.PhaseType == 8)
                                                            {
                                                                  class89.Thuoc_tinh_1.QigqongPropType = class90.KHI_CONG_THUOC_TINH_LOAI_HINH;
                                                            }
                                                            class89.Thuoc_tinh_1.Prop_Type = class90.PhaseType;
                                                            class89.Thuoc_tinh_1.Number_Prop = class90.NumberOfPhase;
                                                            class89.SetProperty();
                                                      }
                                                      if (class89.Thuoc_tinh_2.Prop_Type != 0)
                                                      {
                                                            if (class90.PhaseType == 8)
                                                            {
                                                                  class89.Thuoc_tinh_2.QigqongPropType = class90.KHI_CONG_THUOC_TINH_LOAI_HINH;
                                                            }
                                                            class89.Thuoc_tinh_2.Prop_Type = class90.PhaseType;
                                                            class89.Thuoc_tinh_2.Number_Prop = class90.NumberOfPhase;
                                                            class89.SetProperty();
                                                      }
                                                      if (class89.Thuoc_tinh_3.Prop_Type != 0)
                                                      {
                                                            if (class90.PhaseType == 8)
                                                            {
                                                                  class89.Thuoc_tinh_3.QigqongPropType = class90.KHI_CONG_THUOC_TINH_LOAI_HINH;
                                                            }
                                                            class89.Thuoc_tinh_3.Prop_Type = class90.PhaseType;
                                                            class89.Thuoc_tinh_3.Number_Prop = class90.NumberOfPhase;
                                                            class89.SetProperty();
                                                      }
                                                      if (class89.Thuoc_tinh_4.Prop_Type != 0)
                                                      {
                                                            if (class90.PhaseType == 8)
                                                            {
                                                                  class89.Thuoc_tinh_4.QigqongPropType = class90.KHI_CONG_THUOC_TINH_LOAI_HINH;
                                                            }
                                                            class89.Thuoc_tinh_4.Prop_Type = class90.PhaseType;
                                                            class89.Thuoc_tinh_4.Number_Prop = class90.NumberOfPhase;
                                                            class89.SetProperty();
                                                      }
                                                      if (base.FLD_VIP == 1)
                                                      {
                                                            base.GameMessage("Congratulations, VIP customers improve synthesis rate" + (World.VIP_Hop_thanh_xac_xuat * 100.0) + "%", 9, "system hint");
                                                      }
                                                }
                                                else
                                                {
                                                      base.GameMessage("VIP customers to improve synthesis rate" + (World.VIP_Hop_thanh_xac_xuat * 100.0) + "%", 9, "system hint");
                                                      Buffer.BlockCopy(BitConverter.GetBytes(0), 0, dst, 13, 4);
                                                }
                                                Buffer.BlockCopy(buffer, 0, dst, 11, 2);
                                                Buffer.BlockCopy(class89.VAT_PHAM, 0, dst, 0x1f, 4);
                                                Buffer.BlockCopy(class89.VAT_PHAM, 0, dst, 0x27, 20);
                                                Buffer.BlockCopy(BitConverter.GetBytes(index), 0, dst, 0x1b, 4);
                                                Buffer.BlockCopy(base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_ID, 0, dst, 0x1f, 4);
                                                Buffer.BlockCopy(base.TRANG_BI_LAN_BAO_VAY[index].Item_thuoc_tinh, 0, dst, 0x27, 0x38);
                                                Buffer.BlockCopy(BitConverter.GetBytes(0), 0, dst, 0x5f, 4);
                                                Buffer.BlockCopy(BitConverter.GetBytes(0), 0, dst, 0x67, 4);
                                                this.LAM_GIAM_DI_VAT_PHAM(class90.VI_TRI, 1);
                                                this.LAM_GIAM_DI_VAT_PHAM(BitConverter.ToInt32(buffer25, 0), 1);
                                                if (class91 != null)
                                                {
                                                      this.LAM_GIAM_DI_VAT_PHAM(class91.VI_TRI, 1);
                                                }
                                                if ((BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[class89.VI_TRI].VAT_PHAM_ID, 0) != 0) && (BitConverter.ToInt64(base.TRANG_BI_LAN_BAO_VAY[class89.VI_TRI].Item_toan_bo_ID, 0) == BitConverter.ToInt64(class89.Item_toan_bo_ID, 0)))
                                                {
                                                      this.LAM_GIAM_DI_VAT_PHAM(class89.VI_TRI, 1);
                                                      this.TANG_CUONG_VAT_PHAM(class89.Item_toan_bo_ID, class89.VAT_PHAMid, class89.VI_TRI, class89.VAT_PHAM_SO_LUONG, class89.Item_thuoc_tinh);
                                                }
                                                base.TRANG_BI_LAN_BAO_VAY[class89.VI_TRI].bool_0 = false;
                                                this.HOP_THANH_VAT_PHAM_BIEU_MAU.Clear();
                                                this.HOP_THANH_HE_THONG_TACH_RA_SAI();
                                                this.NGUYEN_BAO_HOP_THANH_MO_RA = 0;
                                                goto Label_EE18;
                                          }
                                          catch (Exception exception49)
                                          {
                                                this.NGUYEN_BAO_HOP_THANH_MO_RA = 0;
                                                Form1.WriteLine(1, "合成系统 合成属性 合成 出错![" + base.Userid + "]-[" + base.UserName + "]" + exception49.Message);
                                                return;
                                          }
                                          goto Label_9C7A;

                                    case 0x8d:
                                          goto Label_9C7A;

                                    case 0x8e:
                                          goto Label_9DA7;

                                    case 0x8f:
                                          goto Label_9F58;

                                    case 0x90:
                                    case 0x91:
                                    case 0x92:
                                    case 0x93:
                                    case 0x94:
                                    case 0x9a:
                                    case 0x9b:
                                    case 0x9c:
                                    case 0x9d:
                                    case 0x9e:
                                    case 0xa4:
                                    case 0xa5:
                                    case 0xa6:
                                    case 0xa7:
                                    case 0xa8:
                                    case 0xaf:
                                    case 0xb0:
                                    case 0xb1:
                                    case 0xb2:
                                    case 180:
                                    case 0xb5:
                                    case 0xb6:
                                    case 0xb7:
                                    case 0xb8:
                                    case 0xb9:
                                    case 0xba:
                                    case 0xbb:
                                    case 0xbc:
                                    case 0xbd:
                                    case 0xc2:
                                    case 0xc3:
                                    case 0xc4:
                                    case 0xc5:
                                    case 0xc6:
                                    case 0xd1:
                                    case 0xd8:
                                          return;

                                    case 0x95:
                                          goto Label_A087;

                                    case 150:
                                          goto Label_A144;

                                    case 0x97:
                                          goto Label_A799;

                                    case 0x98:
                                          goto Label_A8C3;

                                    case 0x99:
                                          goto Label_AA1E;

                                    case 0x9f:
                                          goto Label_AB4D;

                                    case 160:
                                          goto Label_ABD9;

                                    case 0xa1:
                                          goto Label_B325;

                                    case 0xa2:
                                          goto Label_B4C9;

                                    case 0xa3:
                                          goto Label_B5F8;

                                    case 0xa9:
                                          goto Label_B727;

                                    case 170:
                                          goto Label_B7DF;

                                    case 0xab:
                                          goto Label_BE7A;

                                    case 0xac:
                                          goto Label_BFC1;

                                    case 0xad:
                                          goto Label_C281;

                                    case 0xae:
                                          goto Label_C34C;

                                    case 0xb3:
                                          goto Label_C424;

                                    case 190:
                                          goto Label_C4C1;

                                    case 0xbf:
                                          try
                                          {
                                                if ((!this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(1) && !base.TRANG_BI_LAN_BAO_VAY[index].Item_troi_chat) && (base.TRANG_BI_LAN_BAO_VAY[index].FLD_FJ_trung_cap_phu_hon != 0))
                                                {
                                                      HcItimesClass class71 = new HcItimesClass
                                                      {
                                                            VI_TRI = index,
                                                            VAT_PHAM = base.TRANG_BI_LAN_BAO_VAY[index].Item_byte
                                                      };
                                                      base.TRANG_BI_LAN_BAO_VAY[index].bool_0 = true;
                                                      this.HOP_THANH_VAT_PHAM_BIEU_MAU.Add(1, class71);
                                                      this.HOP_THANH_NHAC_NHO(num, 1, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                                }
                                          }
                                          catch (Exception exception36)
                                          {
                                                Form1.WriteLine(1, "合成系统 附魂分解 合成1 出错![" + base.Userid + "]-[" + base.UserName + "]" + exception36.Message);
                                          }
                                          return;

                                    case 0xc0:
                                          try
                                          {
                                                if (!this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(2) && (BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_ID, 0) == 0x3b9acd0c))
                                                {
                                                      HcItimesClass class72 = new HcItimesClass
                                                      {
                                                            VI_TRI = index,
                                                            VAT_PHAM = base.TRANG_BI_LAN_BAO_VAY[index].Item_byte
                                                      };
                                                      base.TRANG_BI_LAN_BAO_VAY[index].bool_0 = true;
                                                      this.HOP_THANH_VAT_PHAM_BIEU_MAU.Add(2, class72);
                                                      this.HOP_THANH_NHAC_NHO(num, 1, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                                }
                                          }
                                          catch (Exception exception37)
                                          {
                                                Form1.WriteLine(1, "合成系统 附魂分解 合成2 出错![" + base.Userid + "]-[" + base.UserName + "]" + exception37.Message);
                                          }
                                          return;

                                    case 0xc1:
                                          try
                                          {
                                                if ((this.HOP_THANH_VAT_PHAM_BIEU_MAU.Count != 0) && !this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(3))
                                                {
                                                      HcItimesClass class73 = new HcItimesClass
                                                      {
                                                            VI_TRI = index,
                                                            VAT_PHAM = base.TRANG_BI_LAN_BAO_VAY[index].Item_byte
                                                      };
                                                      base.TRANG_BI_LAN_BAO_VAY[index].bool_0 = true;
                                                      this.HOP_THANH_VAT_PHAM_BIEU_MAU.Add(3, class73);
                                                      this.HOP_THANH_NHAC_NHO(num, 1, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                                }
                                          }
                                          catch (Exception exception38)
                                          {
                                                Form1.WriteLine(1, "合成系统 附魂分解 合成3 出错![" + base.Userid + "]-[" + base.UserName + "]" + exception38.Message);
                                          }
                                          return;

                                    case 0xc7:
                                          try
                                          {
                                                this.HOP_THANH_VAT_PHAM_BIEU_MAU.Clear();
                                                this.HOP_THANH_HE_THONG_TACH_RA_SAI();
                                                this.NGUYEN_BAO_HOP_THANH_MO_RA = 0;
                                                base.OpenWarehouse = false;
                                                this.HOP_THANH_NHAC_NHO(num, 1, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                          }
                                          catch (Exception exception39)
                                          {
                                                this.NGUYEN_BAO_HOP_THANH_MO_RA = 0;
                                                Form1.WriteLine(1, "合成系统 附魂分解 合成4 出错![" + base.Userid + "]-[" + base.UserName + "]" + exception39.Message);
                                          }
                                          return;

                                    case 200:
                                          {
                                                int num36 = 0;
                                                try
                                                {
                                                      TBL_XWWL_ITEM tbl_xwwl_item12;
                                                      HcItimesClass class74 = null;
                                                      if (!this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(1))
                                                      {
                                                            goto Label_7C0F;
                                                      }
                                                      class74 = this.HOP_THANH_VAT_PHAM_BIEU_MAU[1];
                                                      class74.method_5();
                                                      class74.method_8();
                                                      num36 = 1;
                                                      HcItimesClass class75 = null;
                                                      HcItimesClass class76 = null;
                                                      HcItimesClass class77 = null;
                                                      if (this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(4))
                                                      {
                                                            class77 = this.HOP_THANH_VAT_PHAM_BIEU_MAU[4];
                                                      }
                                                      num36 = 2;
                                                      if (!this.HOP_THANH_VAT_PHAM_BIEU_MAU.TryGetValue(3, out class76))
                                                      {
                                                            goto Label_7BF9;
                                                      }
                                                      if (BitConverter.ToInt32(class76.VAT_PHAM_SO_LUONG, 0) < 1)
                                                      {
                                                            this.HOP_THANH_NHAC_NHO(num, 8, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                                            return;
                                                      }
                                                      num36 = 3;
                                                      if (!World.Itme.TryGetValue(BitConverter.ToInt32(class74.VAT_PHAMid, 0), out tbl_xwwl_item12))
                                                      {
                                                            goto Label_7BE3;
                                                      }
                                                      if (((tbl_xwwl_item12.FLD_RESIDE2 != 7) && (tbl_xwwl_item12.FLD_RESIDE2 != 8)) && (tbl_xwwl_item12.FLD_RESIDE2 != 10))
                                                      {
                                                            return;
                                                      }
                                                      if (tbl_xwwl_item12.FLD_LEVEL >= 100)
                                                      {
                                                            if (this.HOP_THANH_VAT_PHAM_BIEU_MAU.TryGetValue(2, out class75))
                                                            {
                                                                  if (BitConverter.ToInt32(class75.VAT_PHAM_SO_LUONG, 0) >= 2)
                                                                  {
                                                                        goto Label_75BF;
                                                                  }
                                                                  this.HOP_THANH_NHAC_NHO(num, 8, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                                            }
                                                            else
                                                            {
                                                                  this.HOP_THANH_NHAC_NHO(num, 5, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                                            }
                                                            return;
                                                      }
                                                      if (tbl_xwwl_item12.FLD_LEVEL >= 80)
                                                      {
                                                            if (this.HOP_THANH_VAT_PHAM_BIEU_MAU.TryGetValue(2, out class75))
                                                            {
                                                                  if (BitConverter.ToInt32(class75.VAT_PHAM_SO_LUONG, 0) >= 1)
                                                                  {
                                                                        goto Label_75BF;
                                                                  }
                                                                  this.HOP_THANH_NHAC_NHO(num, 8, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                                            }
                                                            else
                                                            {
                                                                  this.HOP_THANH_NHAC_NHO(num, 5, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                                            }
                                                            return;
                                                      }
                                                      Label_75BF:
                                                      num36 = 4;
                                                      if (base.TRANG_BI_LAN_BAO_VAY[class74.VI_TRI].Item_troi_chat)
                                                      {
                                                            this.HOP_THANH_NHAC_NHO(num, 2, 0, base.TRANG_BI_LAN_BAO_VAY[class74.VI_TRI]);
                                                      }
                                                      else
                                                      {
                                                            num36 = 5;
                                                            double num37 = new Random().Next(50, 200);
                                                            double num38 = class74.StrengthNumber * 10;
                                                            if (class74.StrengthNumber >= 15)
                                                            {
                                                                  this.HOP_THANH_VAT_PHAM_BIEU_MAU.Clear();
                                                                  this.HOP_THANH_NHAC_NHO(num, 0, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                                            }
                                                            else
                                                            {
                                                                  num36 = 6;
                                                                  if (this.NGUYEN_BAO_HOP_THANH_MO_RA == 1)
                                                                  {
                                                                        num37 += 5.0;
                                                                  }
                                                                  if (base.FLD_VIP == 1)
                                                                  {
                                                                        num37 += 100.0 * World.VIP_Hop_thanh_xac_xuat;
                                                                  }
                                                                  if (World.Hop_thanh_xac_xuat != 0.0)
                                                                  {
                                                                        num37 += 100.0 * World.Hop_thanh_xac_xuat;
                                                                  }
                                                                  if (num37 >= num38)
                                                                  {
                                                                        if (tbl_xwwl_item12.FLD_RESIDE2 == 7)
                                                                        {
                                                                              class74.StrengthType = 2;
                                                                        }
                                                                        else if (tbl_xwwl_item12.FLD_RESIDE2 == 8)
                                                                        {
                                                                              class74.StrengthType = 3;
                                                                        }
                                                                        else if (tbl_xwwl_item12.FLD_RESIDE2 == 10)
                                                                        {
                                                                              class74.StrengthType = 1;
                                                                        }
                                                                        if (class77 == null)
                                                                        {
                                                                              class74.StrengthNumber++;
                                                                        }
                                                                        else if (BitConverter.ToInt32(class77.VAT_PHAMid, 0) == 0x3c14dc48)
                                                                        {
                                                                              Random random10 = new Random(DateTime.Now.Millisecond);
                                                                              class74.StrengthNumber += random10.Next(1, 4);
                                                                        }
                                                                        else if (BitConverter.ToInt32(class77.VAT_PHAMid, 0) == 0x3b9acc6b)
                                                                        {
                                                                              class74.StrengthNumber++;
                                                                        }
                                                                        if (class74.StrengthNumber > 15)
                                                                        {
                                                                              class74.StrengthNumber = 15;
                                                                        }
                                                                        if (class74.StrengthNumber == World.Giang_ho_bao_tuong_cuong_hoa_giai_doan)
                                                                        {
                                                                              World.smethod_5(BitConverter.ToInt32(class74.VAT_PHAMid, 0), base.UserName, class74.StrengthNumber, base.Player_Zx);
                                                                        }
                                                                        num36 = 7;
                                                                        class74.method_6();
                                                                        num36 = 8;
                                                                        if ((BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[class74.VI_TRI].VAT_PHAM_ID, 0) != 0) && (BitConverter.ToInt64(base.TRANG_BI_LAN_BAO_VAY[class74.VI_TRI].Item_toan_bo_ID, 0) == BitConverter.ToInt64(class74.Item_toan_bo_ID, 0)))
                                                                        {
                                                                              this.LAM_GIAM_DI_VAT_PHAM(class74.VI_TRI, 1);
                                                                              this.TANG_CUONG_VAT_PHAM(class74.Item_toan_bo_ID, class74.VAT_PHAMid, class74.VI_TRI, class74.VAT_PHAM_SO_LUONG, class74.Item_thuoc_tinh);
                                                                        }
                                                                        num36 = 9;
                                                                        base.TRANG_BI_LAN_BAO_VAY[class74.VI_TRI].bool_0 = false;
                                                                        if (base.FLD_VIP == 1)
                                                                        {
                                                                              base.GameMessage("Congratulations, VIP customers improve synthesis rate" + (World.VIP_Hop_thanh_xac_xuat * 100.0) + "%", 9, "system hint");
                                                                        }
                                                                        this.HOP_THANH_NHAC_NHO(num, 1, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                                                  }
                                                                  else if (class77 != null)
                                                                  {
                                                                        if (BitConverter.ToInt32(class77.VAT_PHAMid, 0) == 0x3b9acc6b)
                                                                        {
                                                                              if (class74.StrengthNumber <= 2)
                                                                              {
                                                                                    if (tbl_xwwl_item12.FLD_RESIDE2 == 7)
                                                                                    {
                                                                                          class74.StrengthType = 2;
                                                                                    }
                                                                                    else if (tbl_xwwl_item12.FLD_RESIDE2 == 8)
                                                                                    {
                                                                                          class74.StrengthType = 3;
                                                                                    }
                                                                                    else if (tbl_xwwl_item12.FLD_RESIDE2 == 10)
                                                                                    {
                                                                                          class74.StrengthType = 1;
                                                                                    }
                                                                                    class74.StrengthNumber++;
                                                                                    if (class74.StrengthNumber > 15)
                                                                                    {
                                                                                          class74.StrengthNumber = 15;
                                                                                    }
                                                                                    class74.method_6();
                                                                                    num36 = 10;
                                                                                    if ((BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[class74.VI_TRI].VAT_PHAM_ID, 0) != 0) && (BitConverter.ToInt64(base.TRANG_BI_LAN_BAO_VAY[class74.VI_TRI].Item_toan_bo_ID, 0) == BitConverter.ToInt64(class74.Item_toan_bo_ID, 0)))
                                                                                    {
                                                                                          this.LAM_GIAM_DI_VAT_PHAM(class74.VI_TRI, 1);
                                                                                          this.TANG_CUONG_VAT_PHAM(class74.Item_toan_bo_ID, class74.VAT_PHAMid, class74.VI_TRI, class74.VAT_PHAM_SO_LUONG, class74.Item_thuoc_tinh);
                                                                                    }
                                                                                    num36 = 11;
                                                                                    base.TRANG_BI_LAN_BAO_VAY[class74.VI_TRI].bool_0 = false;
                                                                                    this.HOP_THANH_NHAC_NHO(num, 1, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                                                              }
                                                                              else
                                                                              {
                                                                                    num36 = 12;
                                                                                    this.LAM_GIAM_DI_VAT_PHAM(class74.VI_TRI, 1);
                                                                                    this.HOP_THANH_NHAC_NHO(num, 0, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                                                                    base.GameMessage("VIP user can increase the synthesis rate" + (World.VIP_Hop_thanh_xac_xuat * 100.0) + "%", 9, "system hint 4");
                                                                              }
                                                                        }
                                                                        else if (BitConverter.ToInt32(class77.VAT_PHAMid, 0) == 0x3c14dc48)
                                                                        {
                                                                              this.HOP_THANH_NHAC_NHO(num, 0, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                                                              base.GameMessage("VIP user can increase the synthesis rate" + (World.VIP_Hop_thanh_xac_xuat * 100.0) + "%", 9, "system hint 5");
                                                                              class74.method_6();
                                                                        }
                                                                        else
                                                                        {
                                                                              num36 = 13;
                                                                              this.LAM_GIAM_DI_VAT_PHAM(class74.VI_TRI, 1);
                                                                              this.HOP_THANH_NHAC_NHO(num, 0, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                                                              base.GameMessage("VIP user can increase the synthesis rate" + (World.VIP_Hop_thanh_xac_xuat * 100.0) + "%", 9, "system hint 6");
                                                                        }
                                                                  }
                                                                  else
                                                                  {
                                                                        num36 = 14;
                                                                        this.LAM_GIAM_DI_VAT_PHAM(class74.VI_TRI, 1);
                                                                        this.HOP_THANH_NHAC_NHO(num, 0, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                                                        base.GameMessage("VIP user can increase the synthesis rate" + (World.VIP_Hop_thanh_xac_xuat * 100.0) + "%", 9, "system hint 7");
                                                                  }
                                                                  num36 = 15;
                                                                  if (class75 != null)
                                                                  {
                                                                        num36 = 0x10;
                                                                        if (tbl_xwwl_item12.FLD_LEVEL >= 100)
                                                                        {
                                                                              this.LAM_GIAM_DI_VAT_PHAM(class75.VI_TRI, 2);
                                                                        }
                                                                        else if (tbl_xwwl_item12.FLD_LEVEL >= 80)
                                                                        {
                                                                              this.LAM_GIAM_DI_VAT_PHAM(class75.VI_TRI, 1);
                                                                        }
                                                                        else
                                                                        {
                                                                              this.LAM_GIAM_DI_VAT_PHAM(class75.VI_TRI, 1);
                                                                        }
                                                                        num36 = 0x11;
                                                                  }
                                                                  num36 = 0x12;
                                                                  if (class76 != null)
                                                                  {
                                                                        num36 = 0x13;
                                                                        this.LAM_GIAM_DI_VAT_PHAM(class76.VI_TRI, 1);
                                                                  }
                                                                  num36 = 20;
                                                                  if (class77 != null)
                                                                  {
                                                                        num36 = 0x15;
                                                                        this.LAM_GIAM_DI_VAT_PHAM(class77.VI_TRI, 1);
                                                                  }
                                                                  num36 = 0x16;
                                                                  this.HOP_THANH_VAT_PHAM_BIEU_MAU.Clear();
                                                                  this.HOP_THANH_HE_THONG_TACH_RA_SAI();
                                                                  this.NGUYEN_BAO_HOP_THANH_MO_RA = 0;
                                                            }
                                                      }
                                                      return;
                                                      Label_7BE3:
                                                      this.HOP_THANH_NHAC_NHO(num, 7, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                                      return;
                                                      Label_7BF9:
                                                      this.HOP_THANH_NHAC_NHO(num, 5, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                                      return;
                                                      Label_7C0F:
                                                      this.HOP_THANH_NHAC_NHO(num, 5, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                                      return;
                                                }
                                                catch (Exception exception40)
                                                {
                                                      Form1.WriteLine(1, string.Concat(new object[] { "200首饰加工 出错 ", base.Client.int_3, "|", base.Client.ToString(), " ", num36, " ", exception40 }));
                                                      goto Label_EE18;
                                                }
                                                break;
                                          }
                                    case 0xc9:
                                          if (!this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(1))
                                          {
                                                if (!base.TRANG_BI_LAN_BAO_VAY[index].Item_troi_chat)
                                                {
                                                      goto Label_C8A6;
                                                }
                                                this.HOP_THANH_NHAC_NHO(num, 2, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                          }
                                          return;

                                    case 0xca:
                                          break;

                                    case 0xcb:
                                          if (!this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(3))
                                          {
                                                goto Label_CC7B;
                                          }
                                          return;

                                    case 0xcc:
                                          if (!this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(4))
                                          {
                                                goto Label_CE7A;
                                          }
                                          return;

                                    case 0xcd:
                                          try
                                          {
                                                HcItimesClass class78;
                                                if (this.HOP_THANH_VAT_PHAM_BIEU_MAU.TryGetValue(1, out class78))
                                                {
                                                      base.TRANG_BI_LAN_BAO_VAY[class78.VI_TRI].bool_0 = false;
                                                      this.HOP_THANH_VAT_PHAM_BIEU_MAU.Clear();
                                                      this.HOP_THANH_HE_THONG_TACH_RA_SAI();
                                                }
                                                this.NGUYEN_BAO_HOP_THANH_MO_RA = 0;
                                                this.HOP_THANH_NHAC_NHO(num, 1, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                          }
                                          catch (Exception exception41)
                                          {
                                                this.NGUYEN_BAO_HOP_THANH_MO_RA = 0;
                                                Form1.WriteLine(1, "合成系统 首饰加工 205 出错![" + base.Userid + "]-[" + base.UserName + "]" + exception41.Message);
                                          }
                                          return;

                                    case 0xce:
                                          try
                                          {
                                                if (!this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(1))
                                                {
                                                      if (base.TRANG_BI_LAN_BAO_VAY[index].Item_troi_chat)
                                                      {
                                                            this.HOP_THANH_NHAC_NHO(num, 2, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                                      }
                                                      else
                                                      {
                                                            TBL_XWWL_ITEM tbl_xwwl_item13;
                                                            if (World.Itme.TryGetValue(BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_ID, 0), out tbl_xwwl_item13))
                                                            {
                                                                  if (((tbl_xwwl_item13.FLD_RESIDE2 != 7) && (tbl_xwwl_item13.FLD_RESIDE2 != 8)) && (tbl_xwwl_item13.FLD_RESIDE2 != 10))
                                                                  {
                                                                        this.HOP_THANH_NHAC_NHO(num, 0, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                                                  }
                                                                  else if (tbl_xwwl_item13.FLD_LEVEL < 60)
                                                                  {
                                                                        this.HOP_THANH_NHAC_NHO(num, 0, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                                                  }
                                                                  else
                                                                  {
                                                                        HcItimesClass class79 = new HcItimesClass
                                                                        {
                                                                              VI_TRI = index,
                                                                              VAT_PHAM = base.TRANG_BI_LAN_BAO_VAY[index].Item_byte
                                                                        };
                                                                        base.TRANG_BI_LAN_BAO_VAY[index].bool_0 = true;
                                                                        this.HOP_THANH_VAT_PHAM_BIEU_MAU.Add(1, class79);
                                                                        this.HOP_THANH_NHAC_NHO(num, 1, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                                                  }
                                                            }
                                                            else
                                                            {
                                                                  this.HOP_THANH_NHAC_NHO(num, 0, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                                            }
                                                      }
                                                }
                                          }
                                          catch (Exception exception42)
                                          {
                                                Form1.WriteLine(1, string.Concat(new object[] { "206首饰分解 出错", base.Client.int_3, "|", base.Client.ToString(), " ", exception42 }));
                                          }
                                          return;

                                    case 0xcf:
                                          try
                                          {
                                                if (this.HOP_THANH_VAT_PHAM_BIEU_MAU.Count > 0)
                                                {
                                                      HcItimesClass class80 = null;
                                                      if (this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(1))
                                                      {
                                                            TBL_XWWL_ITEM tbl_xwwl_item14;
                                                            class80 = this.HOP_THANH_VAT_PHAM_BIEU_MAU[1];
                                                            if (!World.Itme.TryGetValue(BitConverter.ToInt32(class80.VAT_PHAMid, 0), out tbl_xwwl_item14))
                                                            {
                                                                  goto Label_EE18;
                                                            }
                                                            int num39 = 1;
                                                            int num40 = 1;
                                                            int num41 = 0x3b9acc80;
                                                            int num42 = 0;
                                                            if (base.NHAN_TUI_TRONG_SO_LUONG() < 2)
                                                            {
                                                                  this.HOP_THANH_NHAC_NHO(num, 8, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                                            }
                                                            else
                                                            {
                                                                  Random random11 = new Random(DateTime.Now.Millisecond);
                                                                  if (tbl_xwwl_item14.FLD_LEVEL >= 100)
                                                                  {
                                                                        num39 = random11.Next(11, 0x10);
                                                                        num40 = random11.Next(3, 6);
                                                                  }
                                                                  else if (tbl_xwwl_item14.FLD_LEVEL >= 80)
                                                                  {
                                                                        num39 = random11.Next(6, 11);
                                                                        num40 = random11.Next(2, 4);
                                                                  }
                                                                  else if (tbl_xwwl_item14.FLD_LEVEL >= 60)
                                                                  {
                                                                        num39 = random11.Next(1, 6);
                                                                        num40 = random11.Next(1, 1);
                                                                  }
                                                                  int num43 = base.DUOC_KIEN_HANG_RONG(this);
                                                                  if (num43 != -1)
                                                                  {
                                                                        if (tbl_xwwl_item14.FLD_RESIDE2 == 7)
                                                                        {
                                                                              num42 = 0x3b9acc7e;
                                                                        }
                                                                        else if (tbl_xwwl_item14.FLD_RESIDE2 == 8)
                                                                        {
                                                                              num42 = 0x3b9acc7d;
                                                                        }
                                                                        else if (tbl_xwwl_item14.FLD_RESIDE2 == 10)
                                                                        {
                                                                              num42 = 0x3b9acc7f;
                                                                        }
                                                                        this.LAM_GIAM_DI_VAT_PHAM(class80.VI_TRI, 1);
                                                                        byte[] buffer24 = BitConverter.GetBytes(RxjhClass.GetDBItmeId());
                                                                        this.TANG_CUONG_VAT_PHAM_2(buffer24, BitConverter.GetBytes(num41), num43, BitConverter.GetBytes(num39), new byte[0x38]);
                                                                        num43 = base.DUOC_KIEN_HANG_RONG(this);
                                                                        buffer24 = BitConverter.GetBytes(RxjhClass.GetDBItmeId());
                                                                        this.TANG_CUONG_VAT_PHAM_2(buffer24, BitConverter.GetBytes(num42), num43, BitConverter.GetBytes(num40), new byte[0x38]);
                                                                        this.HOP_THANH_NHAC_NHO(num, 1, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                                                        this.HOP_THANH_VAT_PHAM_BIEU_MAU.Clear();
                                                                        this.HOP_THANH_HE_THONG_TACH_RA_SAI();
                                                                        this.NGUYEN_BAO_HOP_THANH_MO_RA = 0;
                                                                  }
                                                                  else
                                                                  {
                                                                        this.HOP_THANH_NHAC_NHO(num, 8, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                                                  }
                                                            }
                                                      }
                                                      else
                                                      {
                                                            this.HOP_THANH_NHAC_NHO(num, 5, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                                      }
                                                }
                                          }
                                          catch (Exception exception43)
                                          {
                                                Form1.WriteLine(1, string.Concat(new object[] { "207首饰分解 出错", base.Client.int_3, "|", base.Client.ToString(), " ", exception43 }));
                                          }
                                          return;

                                    case 0xd0:
                                          try
                                          {
                                                HcItimesClass class81;
                                                if (this.HOP_THANH_VAT_PHAM_BIEU_MAU.TryGetValue(1, out class81))
                                                {
                                                      base.TRANG_BI_LAN_BAO_VAY[class81.VI_TRI].bool_0 = false;
                                                      this.HOP_THANH_VAT_PHAM_BIEU_MAU.Clear();
                                                      this.HOP_THANH_HE_THONG_TACH_RA_SAI();
                                                }
                                                this.NGUYEN_BAO_HOP_THANH_MO_RA = 0;
                                                this.HOP_THANH_NHAC_NHO(num, 1, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                          }
                                          catch (Exception exception44)
                                          {
                                                this.NGUYEN_BAO_HOP_THANH_MO_RA = 0;
                                                Form1.WriteLine(1, "合成系统 首饰分解 208 出错![" + base.Userid + "]-[" + base.UserName + "]" + exception44.Message);
                                          }
                                          return;

                                    case 210:
                                          try
                                          {
                                                HcItimesClass class82;
                                                if (this.HOP_THANH_VAT_PHAM_BIEU_MAU.TryGetValue(1, out class82))
                                                {
                                                      base.TRANG_BI_LAN_BAO_VAY[class82.VI_TRI].bool_0 = false;
                                                      this.HOP_THANH_VAT_PHAM_BIEU_MAU.Clear();
                                                      this.HOP_THANH_HE_THONG_TACH_RA_SAI();
                                                }
                                                this.NGUYEN_BAO_HOP_THANH_MO_RA = 0;
                                                this.HOP_THANH_NHAC_NHO(num, 1, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                          }
                                          catch (Exception exception45)
                                          {
                                                this.NGUYEN_BAO_HOP_THANH_MO_RA = 0;
                                                Form1.WriteLine(1, "合成系统 披风分解取消 210 出错![" + base.Userid + "]-[" + base.UserName + "]" + exception45.Message);
                                          }
                                          return;

                                    case 0xd3:
                                          try
                                          {
                                                if (!this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(1))
                                                {
                                                      if (base.TRANG_BI_LAN_BAO_VAY[index].Item_troi_chat)
                                                      {
                                                            this.HOP_THANH_NHAC_NHO(num, 2, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                                      }
                                                      else
                                                      {
                                                            TBL_XWWL_ITEM tbl_xwwl_item15;
                                                            if (World.Itme.TryGetValue(BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_ID, 0), out tbl_xwwl_item15) && (tbl_xwwl_item15.FLD_RESIDE2 == 12))
                                                            {
                                                                  HcItimesClass class83 = new HcItimesClass
                                                                  {
                                                                        VI_TRI = index,
                                                                        VAT_PHAM = base.TRANG_BI_LAN_BAO_VAY[index].Item_byte
                                                                  };
                                                                  base.TRANG_BI_LAN_BAO_VAY[index].bool_0 = true;
                                                                  this.HOP_THANH_VAT_PHAM_BIEU_MAU.Add(1, class83);
                                                                  this.HOP_THANH_NHAC_NHO(num, 1, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                                            }
                                                      }
                                                }
                                          }
                                          catch (Exception exception46)
                                          {
                                                Form1.WriteLine(1, string.Concat(new object[] { "211披风分解 出错", base.Client.int_3, "|", base.Client.ToString(), " ", exception46 }));
                                          }
                                          return;

                                    case 0xd4:
                                          if (BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_ID, 0) == 0x3b9acc21)
                                          {
                                                goto Label_83BD;
                                          }
                                          this.HOP_THANH_NHAC_NHO(num, 7, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                          return;

                                    case 0xd5:
                                          try
                                          {
                                                if ((this.HOP_THANH_VAT_PHAM_BIEU_MAU.Count == 0) || this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(3))
                                                {
                                                      return;
                                                }
                                                Buffer.BlockCopy(buffer, 0, dst, 11, 2);
                                                Buffer.BlockCopy(BitConverter.GetBytes(index), 0, dst, 0x1b, 4);
                                                Buffer.BlockCopy(base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_ID, 0, dst, 0x1f, 4);
                                                Buffer.BlockCopy(base.TRANG_BI_LAN_BAO_VAY[index].Item_thuoc_tinh, 0, dst, 0x27, 0x38);
                                                Buffer.BlockCopy(BitConverter.GetBytes(0), 0, dst, 0x5f, 4);
                                                Buffer.BlockCopy(BitConverter.GetBytes(0), 0, dst, 0x67, 4);
                                                HcItimesClass class85 = new HcItimesClass
                                                {
                                                      VI_TRI = index,
                                                      VAT_PHAM = base.TRANG_BI_LAN_BAO_VAY[index].Item_byte
                                                };
                                                this.HOP_THANH_VAT_PHAM_BIEU_MAU.Add(3, class85);
                                                base.TRANG_BI_LAN_BAO_VAY[index].bool_0 = true;
                                                goto Label_EE18;
                                          }
                                          catch (Exception exception47)
                                          {
                                                Form1.WriteLine(1, "合成系统 合成属性 合成3 出错![" + base.Userid + "]-[" + base.UserName + "]" + exception47.Message);
                                                return;
                                          }
                                          goto Label_8566;

                                    case 0xd6:
                                          try
                                          {
                                                if (!base.TRANG_BI_LAN_BAO_VAY[index].Item_troi_chat && (base.TRANG_BI_LAN_BAO_VAY[index].FLD_cuong_hoa_so_luong != 0))
                                                {
                                                      HcItimesClass class126 = new HcItimesClass
                                                      {
                                                            VI_TRI = index,
                                                            VAT_PHAM = base.TRANG_BI_LAN_BAO_VAY[index].Item_byte
                                                      };
                                                      base.TRANG_BI_LAN_BAO_VAY[index].bool_0 = true;
                                                      if (!this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(1))
                                                      {
                                                            this.HOP_THANH_VAT_PHAM_BIEU_MAU.Add(1, class126);
                                                      }
                                                      this.HOP_THANH_NHAC_NHO(num, 1, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                                }
                                          }
                                          catch (Exception exception70)
                                          {
                                                this.NGUYEN_BAO_HOP_THANH_MO_RA = 0;
                                                Form1.WriteLine(1, "合成系统 披风组合 214 出错![" + base.Userid + "]-[" + base.UserName + "]" + exception70.Message);
                                          }
                                          return;

                                    case 0xd7:
                                          try
                                          {
                                                if (!base.TRANG_BI_LAN_BAO_VAY[index].Item_troi_chat)
                                                {
                                                      HcItimesClass class127 = new HcItimesClass
                                                      {
                                                            VI_TRI = index,
                                                            VAT_PHAM = base.TRANG_BI_LAN_BAO_VAY[index].Item_byte
                                                      };
                                                      base.TRANG_BI_LAN_BAO_VAY[index].bool_0 = true;
                                                      if (!this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(3))
                                                      {
                                                            this.HOP_THANH_VAT_PHAM_BIEU_MAU.Add(3, class127);
                                                      }
                                                      this.HOP_THANH_NHAC_NHO(num, 1, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                                }
                                          }
                                          catch (Exception exception71)
                                          {
                                                this.NGUYEN_BAO_HOP_THANH_MO_RA = 0;
                                                Form1.WriteLine(1, "合成系统 披风组合 215 出错![" + base.Userid + "]-[" + base.UserName + "]" + exception71.Message);
                                          }
                                          return;

                                    case 0xd9:
                                          {
                                                int num3 = 0;
                                                try
                                                {
                                                      TBL_XWWL_ITEM tbl_xwwl_item27;
                                                      HcItimesClass class128 = null;
                                                      HcItimesClass class129 = null;
                                                      if (!this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(1))
                                                      {
                                                            goto Label_DB69;
                                                      }
                                                      class128 = this.HOP_THANH_VAT_PHAM_BIEU_MAU[1];
                                                      class128.method_5();
                                                      class128.method_8();
                                                      num3 = 1;
                                                      HcItimesClass class130 = null;
                                                      if (this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(2))
                                                      {
                                                            class130 = this.HOP_THANH_VAT_PHAM_BIEU_MAU[2];
                                                      }
                                                      if (this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(3))
                                                      {
                                                            class129 = this.HOP_THANH_VAT_PHAM_BIEU_MAU[3];
                                                      }
                                                      if ((class129 != null) && (BitConverter.ToInt64(base.TRANG_BI_LAN_BAO_VAY[class129.VI_TRI].Item_toan_bo_ID, 0) != BitConverter.ToInt64(class129.Item_toan_bo_ID, 0)))
                                                      {
                                                            return;
                                                      }
                                                      num3 = 2;
                                                      if (!this.HOP_THANH_VAT_PHAM_BIEU_MAU.TryGetValue(2, out class130))
                                                      {
                                                            goto Label_DB41;
                                                      }
                                                      if (BitConverter.ToInt32(class130.VAT_PHAM_SO_LUONG, 0) < 1)
                                                      {
                                                            this.HOP_THANH_NHAC_NHO(num, 8, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                                            return;
                                                      }
                                                      num3 = 3;
                                                      if (!World.Itme.TryGetValue(BitConverter.ToInt32(class128.VAT_PHAMid, 0), out tbl_xwwl_item27))
                                                      {
                                                            goto Label_DB2B;
                                                      }
                                                      if (tbl_xwwl_item27.FLD_RESIDE2 != 12)
                                                      {
                                                            return;
                                                      }
                                                      num3 = 4;
                                                      if (base.TRANG_BI_LAN_BAO_VAY[class128.VI_TRI].Item_troi_chat)
                                                      {
                                                            this.HOP_THANH_NHAC_NHO(num, 2, 0, base.TRANG_BI_LAN_BAO_VAY[class128.VI_TRI]);
                                                            return;
                                                      }
                                                      if (World.Ao_choang_cuong_hoa_tieu_hao_Loai_hinh == 0)
                                                      {
                                                            if (base.Player_Money < World.Cuong_hoa_tieu_hao_So_luong)
                                                            {
                                                                  this.HOP_THANH_NHAC_NHO(num, 4, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                                                  base.GameMessage("You need to deduct gold ingot inadequate" + World.Cuong_hoa_tieu_hao_So_luong + "Two, it can be strengthened", 50, "");
                                                                  return;
                                                            }
                                                            base.Player_Money -= World.Cuong_hoa_tieu_hao_So_luong;
                                                            base.UpdateMoneyAndWeight();
                                                      }
                                                      else
                                                      {
                                                            if (base.FLD_RXPIONT < World.Cuong_hoa_tieu_hao_So_luong)
                                                            {
                                                                  this.HOP_THANH_NHAC_NHO(num, 4, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                                                  base.GameMessage("You need to deduct ingot inadequate" + World.Cuong_hoa_tieu_hao_So_luong + "Ingot, it can be strengthened", 50, "");
                                                                  return;
                                                            }
                                                            base.KIEM_SOAT_CASH_SO_LIEU(World.Cuong_hoa_tieu_hao_So_luong, 0);
                                                            base.UPDATE_RXPIONT();
                                                      }
                                                      num3 = 5;
                                                      char[] chArray18 = new char[] { ';' };
                                                      string[] strArray18 = World.Ao_choang_cuong_hoa_tong_xac_suat.Split(chArray18);
                                                      double num56 = new Random().Next(int.Parse(strArray18[0]), int.Parse(strArray18[1]));
                                                      double num57 = class128.StrengthNumber * 10;
                                                      if (class128.StrengthNumber <= 10)
                                                      {
                                                            num57 = class128.StrengthNumber * World.Ao_choang_cuong_hoa_1_giai_doan_xac_suat;
                                                      }
                                                      else if ((class128.StrengthNumber > 10) && (class128.StrengthNumber <= 20))
                                                      {
                                                            num57 = class128.StrengthNumber * World.Ao_choang_cuong_hoa_1_giai_doan_xac_suat;
                                                      }
                                                      else if ((class128.StrengthNumber > 20) && (class128.StrengthNumber <= 30))
                                                      {
                                                            num57 = class128.StrengthNumber * World.Ao_choang_cuong_hoa_2_giai_doan_xac_suat;
                                                      }
                                                      else if ((class128.StrengthNumber > 30) && (class128.StrengthNumber <= 40))
                                                      {
                                                            num57 = class128.StrengthNumber * World.Ao_choang_cuong_hoa_3_giai_doan_xac_suat;
                                                      }
                                                      else if ((class128.StrengthNumber > 40) && (class128.StrengthNumber <= 50))
                                                      {
                                                            num57 = class128.StrengthNumber * World.Ao_choang_cuong_hoa_4_giai_doan_xac_suat;
                                                      }
                                                      else if ((class128.StrengthNumber > 50) && (class128.StrengthNumber <= 60))
                                                      {
                                                            num57 = class128.StrengthNumber * World.Ao_choang_cuong_hoa_5_giai_doan_xac_suat;
                                                      }
                                                      else if ((class128.StrengthNumber > 60) && (class128.StrengthNumber <= 70))
                                                      {
                                                            num57 = class128.StrengthNumber * World.Ao_choang_cuong_hoa_6_giai_doan_xac_suat;
                                                      }
                                                      else
                                                      {
                                                            num57 = class128.StrengthNumber * World.Ao_choang_cuong_hoa_7_giai_doan_xac_suat;
                                                      }
                                                      if (class129 != null)
                                                      {
                                                            num4 = BitConverter.ToInt32(class129.VAT_PHAMid, 0);
                                                            switch (num4)
                                                            {
                                                                  case 0x2faf0803:
                                                                        num56 += 5.0;
                                                                        goto Label_D686;

                                                                  case 0x2faf0804:
                                                                        num56 += 10.0;
                                                                        goto Label_D686;

                                                                  case 0x2faf0805:
                                                                        num56 += 15.0;
                                                                        goto Label_D686;

                                                                  case 0x2faf081d:
                                                                        num56 += 20.0;
                                                                        goto Label_D686;
                                                            }
                                                            if (num4 == 0x3c14dc88)
                                                            {
                                                                  num56 += 25.0;
                                                            }
                                                      }
                                                      Label_D686:
                                                      if (class128.StrengthNumber >= 0x63)
                                                      {
                                                            this.HOP_THANH_VAT_PHAM_BIEU_MAU.Clear();
                                                            this.HOP_THANH_NHAC_NHO(num, 1, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                                            base.GameMessage("It has reached this limit can not be served to strengthen", 50, "");
                                                      }
                                                      else
                                                      {
                                                            num3 = 6;
                                                            if (this.NGUYEN_BAO_HOP_THANH_MO_RA == 1)
                                                            {
                                                                  num56 += 5.0;
                                                            }
                                                            if (base.FLD_VIP == 1)
                                                            {
                                                                  num56 += 100.0 * World.VIP_Hop_thanh_xac_xuat;
                                                            }
                                                            if (World.Hop_thanh_xac_xuat != 0.0)
                                                            {
                                                                  num56 += 100.0 * World.Hop_thanh_xac_xuat;
                                                            }
                                                            if (num56 >= num57)
                                                            {
                                                                  class128.StrengthType = 4;
                                                                  if (class130 == null)
                                                                  {
                                                                        return;
                                                                  }
                                                                  if (BitConverter.ToInt32(class130.VAT_PHAMid, 0) == 0x3b9acc21)
                                                                  {
                                                                        class128.StrengthNumber++;
                                                                  }
                                                                  if (class128.StrengthNumber > 0x63)
                                                                  {
                                                                        class128.StrengthNumber = 0x63;
                                                                  }
                                                                  if (class128.StrengthNumber == World.Giang_ho_bao_tuong_cuong_hoa_giai_doan)
                                                                  {
                                                                        World.smethod_5(BitConverter.ToInt32(class128.VAT_PHAMid, 0), base.UserName, class128.StrengthNumber, base.Player_Zx);
                                                                  }
                                                                  num3 = 7;
                                                                  class128.method_6();
                                                                  num3 = 8;
                                                                  if ((BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[class128.VI_TRI].VAT_PHAM_ID, 0) != 0) && (BitConverter.ToInt64(base.TRANG_BI_LAN_BAO_VAY[class128.VI_TRI].Item_toan_bo_ID, 0) == BitConverter.ToInt64(class128.Item_toan_bo_ID, 0)))
                                                                  {
                                                                        this.LAM_GIAM_DI_VAT_PHAM(class128.VI_TRI, 1);
                                                                        this.TANG_CUONG_VAT_PHAM(class128.Item_toan_bo_ID, class128.VAT_PHAMid, class128.VI_TRI, class128.VAT_PHAM_SO_LUONG, class128.Item_thuoc_tinh);
                                                                  }
                                                                  num3 = 9;
                                                                  base.TRANG_BI_LAN_BAO_VAY[class128.VI_TRI].bool_0 = false;
                                                                  if (base.FLD_VIP == 1)
                                                                  {
                                                                        base.GameMessage("Congratulations, VIP customers improve synthesis rate" + (World.VIP_Hop_thanh_xac_xuat * 100.0) + "%", 9, "system hint");
                                                                  }
                                                                  if (World.Ao_choang_cuong_hoa_tieu_hao_Loai_hinh == 0)
                                                                  {
                                                                        this.HOP_THANH_NHAC_NHO(num, 1, World.Cuong_hoa_tieu_hao_So_luong, base.TRANG_BI_LAN_BAO_VAY[index]);
                                                                  }
                                                                  else
                                                                  {
                                                                        this.HOP_THANH_NHAC_NHO(num, 1, World.Cuong_hoa_tieu_hao_So_luong, base.TRANG_BI_LAN_BAO_VAY[index]);
                                                                  }
                                                            }
                                                            else if (class128.StrengthNumber >= 4)
                                                            {
                                                                  class128.StrengthType = 4;
                                                                  class128.StrengthNumber--;
                                                                  if (class128.StrengthNumber > 0x63)
                                                                  {
                                                                        class128.StrengthNumber = 0x63;
                                                                  }
                                                                  class128.method_6();
                                                                  num3 = 10;
                                                                  if ((BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[class128.VI_TRI].VAT_PHAM_ID, 0) != 0) && (BitConverter.ToInt64(base.TRANG_BI_LAN_BAO_VAY[class128.VI_TRI].Item_toan_bo_ID, 0) == BitConverter.ToInt64(class128.Item_toan_bo_ID, 0)))
                                                                  {
                                                                        this.LAM_GIAM_DI_VAT_PHAM(class128.VI_TRI, 1);
                                                                        this.TANG_CUONG_VAT_PHAM(class128.Item_toan_bo_ID, class128.VAT_PHAMid, class128.VI_TRI, class128.VAT_PHAM_SO_LUONG, class128.Item_thuoc_tinh);
                                                                  }
                                                                  num3 = 11;
                                                                  base.TRANG_BI_LAN_BAO_VAY[class128.VI_TRI].bool_0 = false;
                                                                  if (World.Ao_choang_cuong_hoa_tieu_hao_Loai_hinh == 0)
                                                                  {
                                                                        this.HOP_THANH_NHAC_NHO(num, 1, World.Cuong_hoa_tieu_hao_So_luong, base.TRANG_BI_LAN_BAO_VAY[index]);
                                                                  }
                                                                  else
                                                                  {
                                                                        this.HOP_THANH_NHAC_NHO(num, 1, World.Cuong_hoa_tieu_hao_So_luong, base.TRANG_BI_LAN_BAO_VAY[index]);
                                                                  }
                                                                  base.GameMessage("Strengthening failed, the current enhanced level of<" + class128.StrengthNumber + ">", 50, "");
                                                                  base.GameMessage("VIP user can increase the synthesis rate" + (World.VIP_Hop_thanh_xac_xuat * 100.0) + "%", 9, "system hint 12");
                                                            }
                                                            num3 = 15;
                                                            if (class130 != null)
                                                            {
                                                                  num3 = 0x10;
                                                                  this.LAM_GIAM_DI_VAT_PHAM(class130.VI_TRI, 1);
                                                            }
                                                            if (class129 != null)
                                                            {
                                                                  this.LAM_GIAM_DI_VAT_PHAM(class129.VI_TRI, 1);
                                                            }
                                                            this.HOP_THANH_VAT_PHAM_BIEU_MAU.Clear();
                                                            this.HOP_THANH_HE_THONG_TACH_RA_SAI();
                                                            this.NGUYEN_BAO_HOP_THANH_MO_RA = 0;
                                                      }
                                                      return;
                                                      Label_DB2B:
                                                      this.HOP_THANH_NHAC_NHO(num, 7, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                                      return;
                                                      Label_DB41:
                                                      this.HOP_THANH_NHAC_NHO(num, 5, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                                      base.GameMessage("Please put Cloak strengthening cloth", 50, "");
                                                      return;
                                                      Label_DB69:
                                                      this.HOP_THANH_NHAC_NHO(num, 5, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                                      return;
                                                }
                                                catch (Exception exception72)
                                                {
                                                      Form1.WriteLine(1, string.Concat(new object[] { "披风强化217 出错 ", base.Client.int_3, "|", base.Client.ToString(), " ", num3, " ", exception72 }));
                                                      goto Label_EE18;
                                                }
                                                goto Label_DBEF;
                                          }
                                    case 0xda:
                                          goto Label_DBEF;

                                    case 0xdb:
                                          goto Label_DEB4;

                                    case 220:
                                          goto Label_E1BA;

                                    case 0xdd:
                                          goto Label_E270;

                                    case 0xde:
                                          goto Label_E443;

                                    case 0xdf:
                                          goto Label_E6C9;

                                    case 0xe0:
                                          goto Label_E8D6;

                                    case 0x578:
                                          goto Label_8566;

                                    default:
                                          return;
                              }
                              if (!this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(2))
                              {
                                    goto Label_CA4F;
                              }
                              return;
                              Label_83BD:
                              if (BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_SO_LUONG, 0) < 1)
                              {
                                    this.HOP_THANH_NHAC_NHO(num, 8, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                              }
                              else
                              {
                                    HcItimesClass class84 = new HcItimesClass
                                    {
                                          VI_TRI = index,
                                          VAT_PHAM = base.TRANG_BI_LAN_BAO_VAY[index].Item_byte
                                    };
                                    base.TRANG_BI_LAN_BAO_VAY[index].bool_0 = true;
                                    if (!this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(2))
                                    {
                                          this.HOP_THANH_VAT_PHAM_BIEU_MAU.Add(2, class84);
                                    }
                                    this.HOP_THANH_NHAC_NHO(num, 1, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                              }
                              return;
                              Label_8566:;
                              try
                              {
                                    TBL_XWWL_ITEM tbl_xwwl_item16;
                                    if (this.HOP_THANH_VAT_PHAM_BIEU_MAU.Count <= 0)
                                    {
                                          return;
                                    }
                                    HcItimesClass class86 = null;
                                    HcItimesClass class87 = null;
                                    HcItimesClass class88 = null;
                                    if (this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(1))
                                    {
                                          class86 = this.HOP_THANH_VAT_PHAM_BIEU_MAU[1];
                                    }
                                    if (this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(2))
                                    {
                                          class87 = this.HOP_THANH_VAT_PHAM_BIEU_MAU[2];
                                    }
                                    if (this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(3))
                                    {
                                          class88 = this.HOP_THANH_VAT_PHAM_BIEU_MAU[3];
                                    }
                                    if (((BitConverter.ToInt64(base.TRANG_BI_LAN_BAO_VAY[class86.VI_TRI].Item_toan_bo_ID, 0) != BitConverter.ToInt64(class86.Item_toan_bo_ID, 0)) || (BitConverter.ToInt64(base.TRANG_BI_LAN_BAO_VAY[class87.VI_TRI].Item_toan_bo_ID, 0) != BitConverter.ToInt64(class87.Item_toan_bo_ID, 0))) || ((class88 != null) && (BitConverter.ToInt64(base.TRANG_BI_LAN_BAO_VAY[class88.VI_TRI].Item_toan_bo_ID, 0) != BitConverter.ToInt64(class88.Item_toan_bo_ID, 0))))
                                    {
                                          return;
                                    }
                                    class86.method_5();
                                    class86.method_8();
                                    class87.method_8();
                                    if (base.TRANG_BI_LAN_BAO_VAY[class86.VI_TRI].Item_troi_chat)
                                    {
                                          this.HOP_THANH_NHAC_NHO(num, 2, 0, base.TRANG_BI_LAN_BAO_VAY[class86.VI_TRI]);
                                          return;
                                    }
                                    if (!World.Itme.TryGetValue(BitConverter.ToInt32(class86.VAT_PHAMid, 0), out tbl_xwwl_item16))
                                    {
                                          return;
                                    }
                                    if (tbl_xwwl_item16.FLD_RESIDE2 != 4)
                                    {
                                          Form1.WriteLine(6, string.Concat(new object[] { "合成系统 WGF BUG11[", BitConverter.ToInt32(class86.VAT_PHAMid, 0), "]-[", BitConverter.ToInt32(class87.VAT_PHAMid, 0), "]" }));
                                          return;
                                    }
                                    if ((tbl_xwwl_item16.FLD_RESIDE2 == 12) && (BitConverter.ToInt32(class87.VAT_PHAMid, 0) != 0x2faf080d))
                                    {
                                          Form1.WriteLine(6, string.Concat(new object[] { "合成系统 WGF BUG1[", BitConverter.ToInt32(class86.VAT_PHAMid, 0), "]-[", BitConverter.ToInt32(class87.VAT_PHAMid, 0), "]" }));
                                          return;
                                    }
                                    if (((tbl_xwwl_item16.FLD_RESIDE2 == 1) || (tbl_xwwl_item16.FLD_RESIDE2 == 2)) || ((tbl_xwwl_item16.FLD_RESIDE2 == 5) || (tbl_xwwl_item16.FLD_RESIDE2 == 6)))
                                    {
                                          if (((BitConverter.ToInt32(class87.VAT_PHAMid, 0) != 0x2faf0802) && (BitConverter.ToInt32(class87.VAT_PHAMid, 0) != 0x2faf0818)) && (BitConverter.ToInt32(class87.VAT_PHAMid, 0) != 0x2faf083e))
                                          {
                                                Form1.WriteLine(6, string.Concat(new object[] { "合成系统 WGF BUG2[", BitConverter.ToInt32(class86.VAT_PHAMid, 0), "]-[", BitConverter.ToInt32(class87.VAT_PHAMid, 0), "]" }));
                                                return;
                                          }
                                          if ((tbl_xwwl_item16.FLD_RESIDE2 == 6) && (((class86.Thuoc_tinh_2.Number_Prop != 0) || (class86.Thuoc_tinh_3.Number_Prop != 0)) || (class86.Thuoc_tinh_4.Number_Prop != 0)))
                                          {
                                                return;
                                          }
                                    }
                                    if ((((tbl_xwwl_item16.FLD_RESIDE2 == 4) && (BitConverter.ToInt32(class87.VAT_PHAMid, 0) != 0x2faf0801)) && ((BitConverter.ToInt32(class87.VAT_PHAMid, 0) != 0x2faf0817) && (BitConverter.ToInt32(class87.VAT_PHAMid, 0) != 0x2faf0819))) && ((BitConverter.ToInt32(class87.VAT_PHAMid, 0) != 0x2faf081a) && (BitConverter.ToInt32(class87.VAT_PHAMid, 0) != 0x2faf083d)))
                                    {
                                          Form1.WriteLine(6, string.Concat(new object[] { "合成系统 WGF BUG3[", BitConverter.ToInt32(class86.VAT_PHAMid, 0), "]-[", BitConverter.ToInt32(class87.VAT_PHAMid, 0), "]" }));
                                          return;
                                    }
                                    Random random12 = new Random();
                                    char[] chArray17 = new char[] { ';' };
                                    string[] strArray17 = World.Hop_thanh_xac_xuat_khong_che.Split(chArray17);
                                    double num44 = random12.Next(int.Parse(strArray17[0]), int.Parse(strArray17[1]));
                                    double num45 = ((((((class86.Thuoc_tinh_1.So_luong * 20) + (class86.Thuoc_tinh_2.So_luong * 20)) + (class86.Thuoc_tinh_3.So_luong * 20)) + (class86.Thuoc_tinh_4.So_luong * 20)) + class87.NumberOfPhase) >= 0x63) ? 99.0 : ((double)class87.NumberOfPhase);
                                    if (class88 != null)
                                    {
                                          num4 = BitConverter.ToInt32(class88.VAT_PHAMid, 0);
                                          switch (num4)
                                          {
                                                case 0x2faf0803:
                                                      num44 += 5.0;
                                                      goto Label_8A8F;

                                                case 0x2faf0804:
                                                      num44 += 10.0;
                                                      goto Label_8A8F;

                                                case 0x2faf0805:
                                                      num44 += 15.0;
                                                      goto Label_8A8F;

                                                case 0x2faf081d:
                                                      num44 += 20.0;
                                                      goto Label_8A8F;
                                          }
                                          if (num4 == 0x3c14dc88)
                                          {
                                                num44 += 25.0;
                                          }
                                    }
                                    Label_8A8F:
                                    if (base.FLD_trang_bi_them_vao_hop_thanh_ty_le_thanh_cong_ti_le_phan_tram != 0.0)
                                    {
                                          num44 += 100.0 * base.FLD_trang_bi_them_vao_hop_thanh_ty_le_thanh_cong_ti_le_phan_tram;
                                    }
                                    if (base.dictionary_3.ContainsKey(0x3c14dd38))
                                    {
                                          num44 += 10.0;
                                    }
                                    if (this.NGUYEN_BAO_HOP_THANH_MO_RA == 1)
                                    {
                                          num44 += 5.0;
                                    }
                                    if (base.FLD_VIP == 1)
                                    {
                                          num44 += 100.0 * World.VIP_Hop_thanh_xac_xuat;
                                    }
                                    if (World.Hop_thanh_xac_xuat != 0.0)
                                    {
                                          num44 += 100.0 * World.Hop_thanh_xac_xuat;
                                    }
                                    if (num44 >= num45)
                                    {
                                          if (class86.Thuoc_tinh_1.Prop_Type != 0)
                                          {
                                                if (class86.Thuoc_tinh_1.Prop_Type == class87.PhaseType)
                                                {
                                                      if (class87.NumberOfPhase <= class86.Thuoc_tinh_1.Number_Prop)
                                                      {
                                                            if (class86.Thuoc_tinh_2.Prop_Type == 0)
                                                            {
                                                                  base.GameMessage("Does not meet the conditions can not synthesize", 50, "");
                                                                  return;
                                                            }
                                                            if (class86.Thuoc_tinh_2.Prop_Type == class87.PhaseType)
                                                            {
                                                                  if (class87.NumberOfPhase > class86.Thuoc_tinh_2.Number_Prop)
                                                                  {
                                                                        class86.Thuoc_tinh_2.Prop_Type = class87.PhaseType;
                                                                        class86.Thuoc_tinh_2.Number_Prop = class87.NumberOfPhase;
                                                                        class86.SetProperty();
                                                                  }
                                                                  else if ((class86.Thuoc_tinh_3.Prop_Type != 0) && (class86.Thuoc_tinh_3.Prop_Type == class87.PhaseType))
                                                                  {
                                                                        if (class87.NumberOfPhase > class86.Thuoc_tinh_3.Number_Prop)
                                                                        {
                                                                              class86.Thuoc_tinh_3.Prop_Type = class87.PhaseType;
                                                                              class86.Thuoc_tinh_3.Number_Prop = class87.NumberOfPhase;
                                                                              class86.SetProperty();
                                                                        }
                                                                        else if (((class86.Thuoc_tinh_4.Prop_Type != 0) && (class86.Thuoc_tinh_4.Prop_Type == class87.PhaseType)) && (class87.NumberOfPhase > class86.Thuoc_tinh_4.Number_Prop))
                                                                        {
                                                                              class86.Thuoc_tinh_4.Prop_Type = class87.PhaseType;
                                                                              class86.Thuoc_tinh_4.Number_Prop = class87.NumberOfPhase;
                                                                              class86.SetProperty();
                                                                        }
                                                                  }
                                                            }
                                                      }
                                                      else
                                                      {
                                                            class86.Thuoc_tinh_1.Prop_Type = class87.PhaseType;
                                                            class86.Thuoc_tinh_1.Number_Prop = class87.NumberOfPhase;
                                                            class86.SetProperty();
                                                      }
                                                }
                                                else if (class86.Thuoc_tinh_1.Prop_Type != class87.PhaseType)
                                                {
                                                      class86.Thuoc_tinh_1.Prop_Type = class87.PhaseType;
                                                      class86.Thuoc_tinh_1.Number_Prop = class87.NumberOfPhase;
                                                      class86.SetProperty();
                                                }
                                          }
                                          else if (class86.Thuoc_tinh_1.Prop_Type == 0)
                                          {
                                                if (class87.PhaseType == 8)
                                                {
                                                      class86.Thuoc_tinh_1.QigqongPropType = class87.KHI_CONG_THUOC_TINH_LOAI_HINH;
                                                }
                                                class86.Thuoc_tinh_1.Prop_Type = class87.PhaseType;
                                                class86.Thuoc_tinh_1.Number_Prop = class87.NumberOfPhase;
                                                class86.SetProperty();
                                          }
                                          else if (class86.Thuoc_tinh_2.Prop_Type == 0)
                                          {
                                                if (class87.PhaseType == 8)
                                                {
                                                      class86.Thuoc_tinh_2.QigqongPropType = class87.KHI_CONG_THUOC_TINH_LOAI_HINH;
                                                }
                                                class86.Thuoc_tinh_2.Prop_Type = class87.PhaseType;
                                                class86.Thuoc_tinh_2.Number_Prop = class87.NumberOfPhase;
                                                class86.SetProperty();
                                          }
                                          else if (class86.Thuoc_tinh_3.Prop_Type == 0)
                                          {
                                                if (class87.PhaseType == 8)
                                                {
                                                      class86.Thuoc_tinh_3.QigqongPropType = class87.KHI_CONG_THUOC_TINH_LOAI_HINH;
                                                }
                                                class86.Thuoc_tinh_3.Prop_Type = class87.PhaseType;
                                                class86.Thuoc_tinh_3.Number_Prop = class87.NumberOfPhase;
                                                class86.SetProperty();
                                          }
                                          else if (class86.Thuoc_tinh_4.Prop_Type == 0)
                                          {
                                                if (class87.PhaseType == 8)
                                                {
                                                      class86.Thuoc_tinh_4.QigqongPropType = class87.KHI_CONG_THUOC_TINH_LOAI_HINH;
                                                }
                                                class86.Thuoc_tinh_4.Prop_Type = class87.PhaseType;
                                                class86.Thuoc_tinh_4.Number_Prop = class87.NumberOfPhase;
                                                class86.SetProperty();
                                          }
                                          if (base.FLD_VIP == 1)
                                          {
                                                base.GameMessage("Congratulations, VIP customers improve synthesis rate" + (World.VIP_Hop_thanh_xac_xuat * 100.0) + "%", 9, "system hint");
                                          }
                                    }
                                    else
                                    {
                                          base.GameMessage("VIP customers to improve synthesis rate" + (World.VIP_Hop_thanh_xac_xuat * 100.0) + "%", 9, "system hint");
                                          Buffer.BlockCopy(BitConverter.GetBytes(0), 0, dst, 13, 4);
                                    }
                                    Buffer.BlockCopy(buffer, 0, dst, 11, 2);
                                    Buffer.BlockCopy(class86.VAT_PHAM, 0, dst, 0x1f, 4);
                                    Buffer.BlockCopy(class86.VAT_PHAM, 0, dst, 0x27, 20);
                                    Buffer.BlockCopy(BitConverter.GetBytes(index), 0, dst, 0x1b, 4);
                                    Buffer.BlockCopy(base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_ID, 0, dst, 0x1f, 4);
                                    Buffer.BlockCopy(base.TRANG_BI_LAN_BAO_VAY[index].Item_thuoc_tinh, 0, dst, 0x27, 0x38);
                                    Buffer.BlockCopy(BitConverter.GetBytes(0), 0, dst, 0x5f, 4);
                                    Buffer.BlockCopy(BitConverter.GetBytes(0), 0, dst, 0x67, 4);
                                    this.LAM_GIAM_DI_VAT_PHAM(class87.VI_TRI, 1);
                                    if (class88 != null)
                                    {
                                          this.LAM_GIAM_DI_VAT_PHAM(class88.VI_TRI, 1);
                                    }
                                    if ((BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[class86.VI_TRI].VAT_PHAM_ID, 0) != 0) && (BitConverter.ToInt64(base.TRANG_BI_LAN_BAO_VAY[class86.VI_TRI].Item_toan_bo_ID, 0) == BitConverter.ToInt64(class86.Item_toan_bo_ID, 0)))
                                    {
                                          this.LAM_GIAM_DI_VAT_PHAM(class86.VI_TRI, 1);
                                          this.TANG_CUONG_VAT_PHAM(class86.Item_toan_bo_ID, class86.VAT_PHAMid, class86.VI_TRI, class86.VAT_PHAM_SO_LUONG, class86.Item_thuoc_tinh);
                                    }
                                    base.TRANG_BI_LAN_BAO_VAY[class86.VI_TRI].bool_0 = false;
                                    this.HOP_THANH_VAT_PHAM_BIEU_MAU.Clear();
                                    this.HOP_THANH_HE_THONG_TACH_RA_SAI();
                                    this.NGUYEN_BAO_HOP_THANH_MO_RA = 0;
                                    goto Label_EE18;
                              }
                              catch (Exception exception48)
                              {
                                    this.NGUYEN_BAO_HOP_THANH_MO_RA = 0;
                                    Form1.WriteLine(1, "合成系统 合成属性 合成 出错![" + base.Userid + "]-[" + base.UserName + "]" + exception48.Message);
                              }
                              return;
                              Label_9C7A:;
                              try
                              {
                                    long num48 = base.TRANG_BI_LAN_BAO_VAY[index].GetItem_ID;
                                    if (!num48.ToString().Contains("1002040"))
                                    {
                                          num48 = base.TRANG_BI_LAN_BAO_VAY[index].GetItem_ID;
                                          if (!num48.ToString().Contains("2002040"))
                                          {
                                                base.GameMessage("Load only Han Feiguan dragon knife and Tan Hua Ling weapons can not put other items", 9, "system hint");
                                                return;
                                          }
                                    }
                                    HcItimesClass class92 = new HcItimesClass
                                    {
                                          VI_TRI = index,
                                          VAT_PHAM = base.TRANG_BI_LAN_BAO_VAY[index].Item_byte
                                    };
                                    base.TRANG_BI_LAN_BAO_VAY[index].bool_0 = true;
                                    if (!this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(1))
                                    {
                                          this.HOP_THANH_VAT_PHAM_BIEU_MAU.Add(1, class92);
                                    }
                                    this.HOP_THANH_NHAC_NHO(num, 1, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                    return;
                              }
                              catch (Exception exception50)
                              {
                                    this.NGUYEN_BAO_HOP_THANH_MO_RA = 0;
                                    Form1.WriteLine(1, "火龙石合成属性 141 出错![" + base.Userid + "]-[" + base.UserName + "]" + exception50.Message);
                                    return;
                              }
                              Label_9DA7:;
                              try
                              {
                                    TBL_XWWL_ITEM tbl_xwwl_item18;
                                    HcItimesClass class93 = null;
                                    if (this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(1))
                                    {
                                          class93 = this.HOP_THANH_VAT_PHAM_BIEU_MAU[1];
                                    }
                                    if (World.Itme.TryGetValue(BitConverter.ToInt32(class93.VAT_PHAMid, 0), out tbl_xwwl_item18))
                                    {
                                          if (base.TRANG_BI_LAN_BAO_VAY[index].GetItem_ID == 0x2faf0801L)
                                          {
                                                if (tbl_xwwl_item18.FLD_LEVEL > 0x7d)
                                                {
                                                      return;
                                                }
                                          }
                                          else if (base.TRANG_BI_LAN_BAO_VAY[index].GetItem_ID == 0x2faf0817L)
                                          {
                                                if ((tbl_xwwl_item18.FLD_LEVEL < 80) || (tbl_xwwl_item18.FLD_LEVEL > 0x7d))
                                                {
                                                      return;
                                                }
                                          }
                                          else if ((base.TRANG_BI_LAN_BAO_VAY[index].GetItem_ID == 0x2faf083dL) && ((tbl_xwwl_item18.FLD_LEVEL > 0x87) || (tbl_xwwl_item18.FLD_LEVEL < 130)))
                                          {
                                                return;
                                          }
                                    }
                                    HcItimesClass class94 = new HcItimesClass
                                    {
                                          VI_TRI = index,
                                          VAT_PHAM = base.TRANG_BI_LAN_BAO_VAY[index].Item_byte
                                    };
                                    base.TRANG_BI_LAN_BAO_VAY[index].bool_0 = true;
                                    if (!this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(2))
                                    {
                                          this.HOP_THANH_VAT_PHAM_BIEU_MAU.Add(2, class94);
                                    }
                                    this.HOP_THANH_NHAC_NHO(num, 1, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                    return;
                              }
                              catch (Exception exception51)
                              {
                                    this.NGUYEN_BAO_HOP_THANH_MO_RA = 0;
                                    Form1.WriteLine(1, "火龙石合成属性 141 出错![" + base.Userid + "]-[" + base.UserName + "]" + exception51.Message);
                                    return;
                              }
                              Label_9F58:;
                              try
                              {
                                    if ((this.HOP_THANH_VAT_PHAM_BIEU_MAU.Count == 0) || this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(3))
                                    {
                                          return;
                                    }
                                    Buffer.BlockCopy(buffer, 0, dst, 11, 2);
                                    Buffer.BlockCopy(BitConverter.GetBytes(index), 0, dst, 0x1b, 4);
                                    Buffer.BlockCopy(base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_ID, 0, dst, 0x1f, 4);
                                    Buffer.BlockCopy(base.TRANG_BI_LAN_BAO_VAY[index].Item_thuoc_tinh, 0, dst, 0x27, 0x38);
                                    Buffer.BlockCopy(BitConverter.GetBytes(0), 0, dst, 0x5f, 4);
                                    Buffer.BlockCopy(BitConverter.GetBytes(0), 0, dst, 0x67, 4);
                                    HcItimesClass class95 = new HcItimesClass
                                    {
                                          VI_TRI = index,
                                          VAT_PHAM = base.TRANG_BI_LAN_BAO_VAY[index].Item_byte
                                    };
                                    this.HOP_THANH_VAT_PHAM_BIEU_MAU.Add(3, class95);
                                    base.TRANG_BI_LAN_BAO_VAY[index].bool_0 = true;
                                    goto Label_EE18;
                              }
                              catch (Exception exception52)
                              {
                                    Form1.WriteLine(1, "合成系统 合成属性 合成3 出错![" + base.Userid + "]-[" + base.UserName + "]" + exception52.Message);
                                    return;
                              }
                              Label_A087:;
                              try
                              {
                                    HcItimesClass class96;
                                    if (this.HOP_THANH_VAT_PHAM_BIEU_MAU.TryGetValue(1, out class96))
                                    {
                                          base.TRANG_BI_LAN_BAO_VAY[class96.VI_TRI].bool_0 = false;
                                          this.HOP_THANH_VAT_PHAM_BIEU_MAU.Clear();
                                          this.HOP_THANH_HE_THONG_TACH_RA_SAI();
                                    }
                                    base.OpenWarehouse = false;
                                    this.NGUYEN_BAO_HOP_THANH_MO_RA = 0;
                                    this.HOP_THANH_NHAC_NHO(num, 1, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                    return;
                              }
                              catch (Exception exception53)
                              {
                                    this.NGUYEN_BAO_HOP_THANH_MO_RA = 0;
                                    Form1.WriteLine(1, "火龙石149 出错![" + base.Userid + "]-[" + base.UserName + "]" + exception53.Message);
                                    return;
                              }
                              Label_A144:;
                              try
                              {
                                    TBL_XWWL_ITEM tbl_xwwl_item19;
                                    if (this.HOP_THANH_VAT_PHAM_BIEU_MAU.Count <= 0)
                                    {
                                          return;
                                    }
                                    HcItimesClass class97 = null;
                                    HcItimesClass class98 = null;
                                    HcItimesClass class99 = null;
                                    if (this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(1))
                                    {
                                          class97 = this.HOP_THANH_VAT_PHAM_BIEU_MAU[1];
                                    }
                                    if (this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(2))
                                    {
                                          class98 = this.HOP_THANH_VAT_PHAM_BIEU_MAU[2];
                                    }
                                    if (this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(3))
                                    {
                                          class99 = this.HOP_THANH_VAT_PHAM_BIEU_MAU[3];
                                    }
                                    if ((((class97 == null) || (BitConverter.ToInt64(base.TRANG_BI_LAN_BAO_VAY[class97.VI_TRI].Item_toan_bo_ID, 0) != BitConverter.ToInt64(class97.Item_toan_bo_ID, 0))) || (BitConverter.ToInt64(base.TRANG_BI_LAN_BAO_VAY[class98.VI_TRI].Item_toan_bo_ID, 0) != BitConverter.ToInt64(class98.Item_toan_bo_ID, 0))) || (((class99 != null) && (BitConverter.ToInt64(base.TRANG_BI_LAN_BAO_VAY[class99.VI_TRI].Item_toan_bo_ID, 0) != BitConverter.ToInt64(class99.Item_toan_bo_ID, 0))) || !World.Itme.TryGetValue(BitConverter.ToInt32(class97.VAT_PHAMid, 0), out tbl_xwwl_item19)))
                                    {
                                          return;
                                    }
                                    if ((tbl_xwwl_item19.FLD_RESIDE2 != 1) && (tbl_xwwl_item19.FLD_RESIDE2 != 4))
                                    {
                                          Form1.WriteLine(6, string.Concat(new object[] { "合成系统 强化 BUG1[", BitConverter.ToInt32(class97.VAT_PHAMid, 0), "]-[", BitConverter.ToInt32(class98.VAT_PHAMid, 0), "]" }));
                                          return;
                                    }
                                    if (base.TRANG_BI_LAN_BAO_VAY[class97.VI_TRI].Item_troi_chat)
                                    {
                                          this.HOP_THANH_NHAC_NHO(num, 2, 0, base.TRANG_BI_LAN_BAO_VAY[class97.VI_TRI]);
                                          return;
                                    }
                                    double num49 = new Random().Next(0, 100);
                                    double num50 = ((class97.FLD_FJ_thuc_tinh * 20) >= 100) ? 99.0 : ((double)class97.FLD_FJ_thuc_tinh);
                                    if (class97.FLD_FJ_thuc_tinh >= World.Thu_cong_phu_hon_giai_doan_cao_nhat)
                                    {
                                          this.HOP_THANH_VAT_PHAM_BIEU_MAU.Clear();
                                          Buffer.BlockCopy(buffer, 0, dst, 11, 2);
                                          this.HOP_THANH_HE_THONG_TACH_RA_SAI();
                                          this.NGUYEN_BAO_HOP_THANH_MO_RA = 0;
                                          return;
                                    }
                                    if (class99 != null)
                                    {
                                          num4 = BitConverter.ToInt32(class99.VAT_PHAMid, 0);
                                          switch (num4)
                                          {
                                                case 0x2faf0803:
                                                      num49 += 5.0;
                                                      goto Label_A48F;

                                                case 0x2faf0804:
                                                      num49 += 10.0;
                                                      goto Label_A48F;

                                                case 0x2faf0805:
                                                      num49 += 15.0;
                                                      goto Label_A48F;

                                                case 0x2faf081d:
                                                      num49 += 20.0;
                                                      goto Label_A48F;
                                          }
                                          if (num4 == 0x3c14dc88)
                                          {
                                                num49 += 25.0;
                                          }
                                    }
                                    Label_A48F:
                                    if (base.FLD_trang_bi_them_vao_hop_thanh_ty_le_thanh_cong_ti_le_phan_tram != 0.0)
                                    {
                                          num49 += 100.0 * base.FLD_trang_bi_them_vao_hop_thanh_ty_le_thanh_cong_ti_le_phan_tram;
                                    }
                                    if (base.dictionary_3.ContainsKey(0x3c14dd38))
                                    {
                                          num49 += 10.0;
                                    }
                                    if (this.NGUYEN_BAO_HOP_THANH_MO_RA == 1)
                                    {
                                          num49 += 5.0;
                                    }
                                    if (base.FLD_VIP == 1)
                                    {
                                          num49 += 100.0 * World.VIP_Hop_thanh_xac_xuat;
                                    }
                                    if (World.Hop_thanh_xac_xuat != 0.0)
                                    {
                                          num49 += 100.0 * World.Hop_thanh_xac_xuat;
                                    }
                                    if (World.Phu_hon_hop_thanh_xac_xuat_tang_cuong != 0.0)
                                    {
                                          num49 += 100.0 * World.Phu_hon_hop_thanh_xac_xuat_tang_cuong;
                                    }
                                    if (num49 >= num50)
                                    {
                                          class97.FLD_FJ_thuc_tinh++;
                                          if (base.FLD_VIP == 1)
                                          {
                                                base.GameMessage("Congratulations, VIP customers improve synthesis rate" + (World.VIP_Hop_thanh_xac_xuat * 100.0) + "%", 9, "system hint");
                                          }
                                    }
                                    else
                                    {
                                          base.GameMessage("VIP user can increase the synthesis rate" + (World.VIP_Hop_thanh_xac_xuat * 100.0) + "%", 9, "system hint 8");
                                          Buffer.BlockCopy(BitConverter.GetBytes(0), 0, dst, 13, 4);
                                    }
                                    Buffer.BlockCopy(buffer, 0, dst, 11, 2);
                                    Buffer.BlockCopy(BitConverter.GetBytes(index), 0, dst, 0x1b, 4);
                                    this.LAM_GIAM_DI_VAT_PHAM(class98.VI_TRI, 1);
                                    if (class99 != null)
                                    {
                                          this.LAM_GIAM_DI_VAT_PHAM(class99.VI_TRI, 1);
                                    }
                                    if ((BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[class97.VI_TRI].VAT_PHAM_ID, 0) != 0) && (BitConverter.ToInt64(base.TRANG_BI_LAN_BAO_VAY[class97.VI_TRI].Item_toan_bo_ID, 0) == BitConverter.ToInt64(class97.Item_toan_bo_ID, 0)))
                                    {
                                          this.LAM_GIAM_DI_VAT_PHAM(class97.VI_TRI, 1);
                                          this.TANG_CUONG_VAT_PHAM(class97.Item_toan_bo_ID, class97.VAT_PHAMid, class97.VI_TRI, class97.VAT_PHAM_SO_LUONG, class97.Item_thuoc_tinh);
                                    }
                                    base.TRANG_BI_LAN_BAO_VAY[class97.VI_TRI].bool_0 = false;
                                    this.HOP_THANH_VAT_PHAM_BIEU_MAU.Clear();
                                    this.HOP_THANH_HE_THONG_TACH_RA_SAI();
                                    this.NGUYEN_BAO_HOP_THANH_MO_RA = 0;
                                    goto Label_EE18;
                              }
                              catch (Exception exception54)
                              {
                                    this.NGUYEN_BAO_HOP_THANH_MO_RA = 0;
                                    Form1.WriteLine(1, "合成系统 合成属性阶段 合成 出错![" + base.Userid + "]-[" + base.UserName + "]" + exception54.Message);
                                    return;
                              }
                              Label_A799:;
                              try
                              {
                                    if (((this.HOP_THANH_VAT_PHAM_BIEU_MAU.Count == 0) || !this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(2)) || (this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(1) || base.TRANG_BI_LAN_BAO_VAY[index].Item_troi_chat))
                                    {
                                          return;
                                    }
                                    Buffer.BlockCopy(buffer, 0, dst, 11, 2);
                                    Buffer.BlockCopy(BitConverter.GetBytes(index), 0, dst, 0x1b, 4);
                                    Buffer.BlockCopy(base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_ID, 0, dst, 0x1f, 4);
                                    Buffer.BlockCopy(base.TRANG_BI_LAN_BAO_VAY[index].Item_thuoc_tinh, 0, dst, 0x27, 0x38);
                                    HcItimesClass class100 = new HcItimesClass
                                    {
                                          VI_TRI = index,
                                          VAT_PHAM = base.TRANG_BI_LAN_BAO_VAY[index].Item_byte
                                    };
                                    base.TRANG_BI_LAN_BAO_VAY[index].bool_0 = true;
                                    this.HOP_THANH_VAT_PHAM_BIEU_MAU.Add(1, class100);
                                    goto Label_EE18;
                              }
                              catch (Exception exception55)
                              {
                                    Form1.WriteLine(1, "合成系统 合成属性阶段 合成1 出错![" + base.Userid + "]-[" + base.UserName + "]" + exception55.Message);
                                    return;
                              }
                              Label_A8C3:;
                              try
                              {
                                    if (this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(2))
                                    {
                                          return;
                                    }
                                    Buffer.BlockCopy(buffer, 0, dst, 11, 2);
                                    Buffer.BlockCopy(BitConverter.GetBytes(index), 0, dst, 0x1b, 4);
                                    Buffer.BlockCopy(base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_ID, 0, dst, 0x1f, 4);
                                    Buffer.BlockCopy(base.TRANG_BI_LAN_BAO_VAY[index].Item_thuoc_tinh, 0, dst, 0x27, 0x38);
                                    Buffer.BlockCopy(BitConverter.GetBytes(0), 0, dst, 0x5f, 4);
                                    Buffer.BlockCopy(BitConverter.GetBytes(0), 0, dst, 0x67, 4);
                                    if ((BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_ID, 0) != 0x3b9acb6d) && (BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_ID, 0) != 0x3b9acb6f))
                                    {
                                          return;
                                    }
                                    HcItimesClass class101 = new HcItimesClass
                                    {
                                          VI_TRI = index,
                                          VAT_PHAM = base.TRANG_BI_LAN_BAO_VAY[index].Item_byte
                                    };
                                    base.TRANG_BI_LAN_BAO_VAY[index].bool_0 = true;
                                    this.HOP_THANH_VAT_PHAM_BIEU_MAU.Add(2, class101);
                                    goto Label_EE18;
                              }
                              catch (Exception exception56)
                              {
                                    Form1.WriteLine(1, "合成系统 合成属性阶段 合成2 出错![" + base.Userid + "]-[" + base.UserName + "]" + exception56.Message);
                                    return;
                              }
                              Label_AA1E:;
                              try
                              {
                                    if ((this.HOP_THANH_VAT_PHAM_BIEU_MAU.Count == 0) || this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(3))
                                    {
                                          return;
                                    }
                                    Buffer.BlockCopy(buffer, 0, dst, 11, 2);
                                    Buffer.BlockCopy(BitConverter.GetBytes(index), 0, dst, 0x1b, 4);
                                    Buffer.BlockCopy(base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_ID, 0, dst, 0x1f, 4);
                                    Buffer.BlockCopy(base.TRANG_BI_LAN_BAO_VAY[index].Item_thuoc_tinh, 0, dst, 0x27, 0x38);
                                    Buffer.BlockCopy(BitConverter.GetBytes(0), 0, dst, 0x5f, 4);
                                    Buffer.BlockCopy(BitConverter.GetBytes(0), 0, dst, 0x67, 4);
                                    HcItimesClass class102 = new HcItimesClass
                                    {
                                          VI_TRI = index,
                                          VAT_PHAM = base.TRANG_BI_LAN_BAO_VAY[index].Item_byte
                                    };
                                    base.TRANG_BI_LAN_BAO_VAY[index].bool_0 = true;
                                    this.HOP_THANH_VAT_PHAM_BIEU_MAU.Add(3, class102);
                                    goto Label_EE18;
                              }
                              catch (Exception exception57)
                              {
                                    Form1.WriteLine(1, "合成系统 合成属性阶段 合成3 出错![" + base.Userid + "]-[" + base.UserName + "]" + exception57.Message);
                                    return;
                              }
                              Label_AB4D:;
                              try
                              {
                                    this.HOP_THANH_VAT_PHAM_BIEU_MAU.Clear();
                                    Buffer.BlockCopy(buffer, 0, dst, 11, 2);
                                    this.HOP_THANH_HE_THONG_TACH_RA_SAI();
                                    this.NGUYEN_BAO_HOP_THANH_MO_RA = 0;
                                    base.OpenWarehouse = false;
                                    goto Label_EE18;
                              }
                              catch (Exception exception58)
                              {
                                    this.NGUYEN_BAO_HOP_THANH_MO_RA = 0;
                                    Form1.WriteLine(1, "合成系统 合成属性阶段 合成4 出错![" + base.Userid + "]-[" + base.UserName + "]" + exception58.Message);
                                    return;
                              }
                              Label_ABD9:;
                              try
                              {
                                    TBL_XWWL_ITEM tbl_xwwl_item20;
                                    byte[] buffer27 = new byte[4];
                                    byte[] buffer28 = new byte[4];
                                    Buffer.BlockCopy(byte_5, 15, buffer27, 0, 4);
                                    Buffer.BlockCopy(byte_5, 0x13, buffer28, 0, 4);
                                    if ((BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[BitConverter.ToInt32(buffer27, 0)].VAT_PHAM_ID, 0) == 0) || (this.HOP_THANH_VAT_PHAM_BIEU_MAU.Count <= 0))
                                    {
                                          return;
                                    }
                                    HcItimesClass class103 = null;
                                    HcItimesClass class104 = null;
                                    HcItimesClass class105 = null;
                                    if (this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(1))
                                    {
                                          class103 = this.HOP_THANH_VAT_PHAM_BIEU_MAU[1];
                                    }
                                    if (this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(2))
                                    {
                                          class104 = this.HOP_THANH_VAT_PHAM_BIEU_MAU[2];
                                    }
                                    if (this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(3))
                                    {
                                          class105 = this.HOP_THANH_VAT_PHAM_BIEU_MAU[3];
                                    }
                                    if ((((BitConverter.ToInt64(base.TRANG_BI_LAN_BAO_VAY[class103.VI_TRI].Item_toan_bo_ID, 0) != BitConverter.ToInt64(class103.Item_toan_bo_ID, 0)) || (BitConverter.ToInt64(base.TRANG_BI_LAN_BAO_VAY[class104.VI_TRI].Item_toan_bo_ID, 0) != BitConverter.ToInt64(class104.Item_toan_bo_ID, 0))) || ((class105 != null) && (BitConverter.ToInt64(base.TRANG_BI_LAN_BAO_VAY[class105.VI_TRI].Item_toan_bo_ID, 0) != BitConverter.ToInt64(class105.Item_toan_bo_ID, 0)))) || !World.Itme.TryGetValue(BitConverter.ToInt32(class103.VAT_PHAMid, 0), out tbl_xwwl_item20))
                                    {
                                          return;
                                    }
                                    if (((tbl_xwwl_item20.FLD_RESIDE2 != 1) && (tbl_xwwl_item20.FLD_RESIDE2 != 4)) && ((tbl_xwwl_item20.FLD_RESIDE2 != 5) && (tbl_xwwl_item20.FLD_RESIDE2 != 6)))
                                    {
                                          Form1.WriteLine(6, string.Concat(new object[] { "合成系统 强化 BUG1[", BitConverter.ToInt32(class103.VAT_PHAMid, 0), "]-[", BitConverter.ToInt32(class104.VAT_PHAMid, 0), "]" }));
                                          return;
                                    }
                                    if (base.TRANG_BI_LAN_BAO_VAY[class103.VI_TRI].Item_troi_chat)
                                    {
                                          this.HOP_THANH_NHAC_NHO(num, 2, 0, base.TRANG_BI_LAN_BAO_VAY[class103.VI_TRI]);
                                          return;
                                    }
                                    class103.method_8();
                                    class104.method_8();
                                    double num51 = new Random().Next(0, 100);
                                    double num52 = class103.NumberOfPhase * 10;
                                    if (class103.NumberOfPhase >= 10)
                                    {
                                          this.HOP_THANH_VAT_PHAM_BIEU_MAU.Clear();
                                          goto Label_EE18;
                                    }
                                    if (class105 != null)
                                    {
                                          num4 = BitConverter.ToInt32(class105.VAT_PHAMid, 0);
                                          switch (num4)
                                          {
                                                case 0x2faf0803:
                                                      num51 += 5.0;
                                                      goto Label_AF70;

                                                case 0x2faf0804:
                                                      num51 += 10.0;
                                                      goto Label_AF70;

                                                case 0x2faf0805:
                                                      num51 += 15.0;
                                                      goto Label_AF70;

                                                case 0x2faf081d:
                                                      num51 += 20.0;
                                                      goto Label_AF70;
                                          }
                                          if (num4 == 0x3c14dc88)
                                          {
                                                num51 += 25.0;
                                          }
                                    }
                                    Label_AF70:
                                    if (base.FLD_trang_bi_them_vao_hop_thanh_ty_le_thanh_cong_ti_le_phan_tram != 0.0)
                                    {
                                          num51 += 100.0 * base.FLD_trang_bi_them_vao_hop_thanh_ty_le_thanh_cong_ti_le_phan_tram;
                                    }
                                    if (base.dictionary_3.ContainsKey(0x3c14dd38))
                                    {
                                          num51 += 10.0;
                                    }
                                    if (this.NGUYEN_BAO_HOP_THANH_MO_RA == 1)
                                    {
                                          num51 += 5.0;
                                    }
                                    if (base.FLD_VIP == 1)
                                    {
                                          num51 += 100.0 * World.VIP_Hop_thanh_xac_xuat;
                                    }
                                    if (World.Hop_thanh_xac_xuat != 0.0)
                                    {
                                          num51 += 100.0 * World.Hop_thanh_xac_xuat;
                                    }
                                    if (num51 >= num52)
                                    {
                                          class103.PhaseType = class104.PhaseType;
                                          Random random13 = new Random(DateTime.Now.Millisecond);
                                          class103.NumberOfPhase += random13.Next(1, 4);
                                          if (class103.NumberOfPhase > 10)
                                          {
                                                class103.NumberOfPhase = 10;
                                          }
                                          class103.method_6();
                                          if (base.FLD_VIP == 1)
                                          {
                                                base.GameMessage("Congratulations, VIP customers improve synthesis rate" + (World.VIP_Hop_thanh_xac_xuat * 100.0) + "%", 9, "system hint");
                                          }
                                    }
                                    else
                                    {
                                          Random random14 = new Random(DateTime.Now.Millisecond);
                                          class103.NumberOfPhase -= random14.Next(0, 3);
                                          if (class103.NumberOfPhase < 0)
                                          {
                                                class103.NumberOfPhase = 0;
                                          }
                                          class103.method_6();
                                          base.GameMessage("VIP user can increase the synthesis rate" + (World.VIP_Hop_thanh_xac_xuat * 100.0) + "%", 9, "system hint 9");
                                          Buffer.BlockCopy(BitConverter.GetBytes(0), 0, dst, 13, 4);
                                    }
                                    Buffer.BlockCopy(buffer, 0, dst, 11, 2);
                                    Buffer.BlockCopy(BitConverter.GetBytes(index), 0, dst, 0x1b, 4);
                                    this.LAM_GIAM_DI_VAT_PHAM(BitConverter.ToInt32(buffer27, 0), 1);
                                    this.LAM_GIAM_DI_VAT_PHAM(class104.VI_TRI, 1);
                                    if (class105 != null)
                                    {
                                          this.LAM_GIAM_DI_VAT_PHAM(class105.VI_TRI, 1);
                                    }
                                    if ((BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[class103.VI_TRI].VAT_PHAM_ID, 0) != 0) && (BitConverter.ToInt64(base.TRANG_BI_LAN_BAO_VAY[class103.VI_TRI].Item_toan_bo_ID, 0) == BitConverter.ToInt64(class103.Item_toan_bo_ID, 0)))
                                    {
                                          this.LAM_GIAM_DI_VAT_PHAM(class103.VI_TRI, 1);
                                          this.TANG_CUONG_VAT_PHAM(class103.Item_toan_bo_ID, class103.VAT_PHAMid, class103.VI_TRI, class103.VAT_PHAM_SO_LUONG, class103.Item_thuoc_tinh);
                                    }
                                    base.TRANG_BI_LAN_BAO_VAY[class103.VI_TRI].bool_0 = false;
                                    this.HOP_THANH_VAT_PHAM_BIEU_MAU.Clear();
                                    this.HOP_THANH_HE_THONG_TACH_RA_SAI();
                                    this.NGUYEN_BAO_HOP_THANH_MO_RA = 0;
                                    goto Label_EE18;
                              }
                              catch (Exception exception59)
                              {
                                    this.NGUYEN_BAO_HOP_THANH_MO_RA = 0;
                                    Form1.WriteLine(1, "合成系统 合成属性阶段 合成 出错![" + base.Userid + "]-[" + base.UserName + "]" + exception59.Message);
                                    return;
                              }
                              Label_B325:;
                              try
                              {
                                    TBL_XWWL_ITEM tbl_xwwl_item21;
                                    if ((this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(1) || base.TRANG_BI_LAN_BAO_VAY[index].Item_troi_chat) || !World.Itme.TryGetValue(BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_ID, 0), out tbl_xwwl_item21))
                                    {
                                          return;
                                    }
                                    if ((tbl_xwwl_item21.FLD_RESIDE2 != 1) && (tbl_xwwl_item21.FLD_RESIDE2 != 4))
                                    {
                                          Form1.WriteLine(6, "合成系统 强化 BUG1[" + BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_ID, 0) + "]");
                                          return;
                                    }
                                    Buffer.BlockCopy(buffer, 0, dst, 11, 2);
                                    Buffer.BlockCopy(BitConverter.GetBytes(index), 0, dst, 0x1b, 4);
                                    Buffer.BlockCopy(base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_ID, 0, dst, 0x1f, 4);
                                    Buffer.BlockCopy(base.TRANG_BI_LAN_BAO_VAY[index].Item_thuoc_tinh, 0, dst, 0x27, 0x38);
                                    Buffer.BlockCopy(BitConverter.GetBytes(0), 0, dst, 0x5f, 4);
                                    Buffer.BlockCopy(BitConverter.GetBytes(0), 0, dst, 0x67, 4);
                                    HcItimesClass class106 = new HcItimesClass
                                    {
                                          VI_TRI = index,
                                          VAT_PHAM = base.TRANG_BI_LAN_BAO_VAY[index].Item_byte
                                    };
                                    base.TRANG_BI_LAN_BAO_VAY[index].bool_0 = true;
                                    this.HOP_THANH_VAT_PHAM_BIEU_MAU.Add(1, class106);
                                    goto Label_EE18;
                              }
                              catch (Exception exception60)
                              {
                                    Form1.WriteLine(1, "合成系统 合成属性阶段 合成1 出错![" + base.Userid + "]-[" + base.UserName + "]" + exception60.Message);
                                    return;
                              }
                              Label_B4C9:;
                              try
                              {
                                    if ((this.HOP_THANH_VAT_PHAM_BIEU_MAU.Count == 0) || this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(2))
                                    {
                                          return;
                                    }
                                    Buffer.BlockCopy(buffer, 0, dst, 11, 2);
                                    Buffer.BlockCopy(BitConverter.GetBytes(index), 0, dst, 0x1b, 4);
                                    Buffer.BlockCopy(base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_ID, 0, dst, 0x1f, 4);
                                    Buffer.BlockCopy(base.TRANG_BI_LAN_BAO_VAY[index].Item_thuoc_tinh, 0, dst, 0x27, 0x38);
                                    Buffer.BlockCopy(BitConverter.GetBytes(0), 0, dst, 0x5f, 4);
                                    Buffer.BlockCopy(BitConverter.GetBytes(0), 0, dst, 0x67, 4);
                                    HcItimesClass class107 = new HcItimesClass
                                    {
                                          VI_TRI = index,
                                          VAT_PHAM = base.TRANG_BI_LAN_BAO_VAY[index].Item_byte
                                    };
                                    base.TRANG_BI_LAN_BAO_VAY[index].bool_0 = true;
                                    this.HOP_THANH_VAT_PHAM_BIEU_MAU.Add(2, class107);
                                    goto Label_EE18;
                              }
                              catch (Exception exception61)
                              {
                                    Form1.WriteLine(1, "合成系统 合成属性阶段 合成2 出错![" + base.Userid + "]-[" + base.UserName + "]" + exception61.Message);
                                    return;
                              }
                              Label_B5F8:;
                              try
                              {
                                    if ((this.HOP_THANH_VAT_PHAM_BIEU_MAU.Count == 0) || this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(3))
                                    {
                                          return;
                                    }
                                    Buffer.BlockCopy(buffer, 0, dst, 11, 2);
                                    Buffer.BlockCopy(BitConverter.GetBytes(index), 0, dst, 0x1b, 4);
                                    Buffer.BlockCopy(base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_ID, 0, dst, 0x1f, 4);
                                    Buffer.BlockCopy(base.TRANG_BI_LAN_BAO_VAY[index].Item_thuoc_tinh, 0, dst, 0x27, 0x38);
                                    Buffer.BlockCopy(BitConverter.GetBytes(0), 0, dst, 0x5f, 4);
                                    Buffer.BlockCopy(BitConverter.GetBytes(0), 0, dst, 0x67, 4);
                                    HcItimesClass class108 = new HcItimesClass
                                    {
                                          VI_TRI = index,
                                          VAT_PHAM = base.TRANG_BI_LAN_BAO_VAY[index].Item_byte
                                    };
                                    base.TRANG_BI_LAN_BAO_VAY[index].bool_0 = true;
                                    this.HOP_THANH_VAT_PHAM_BIEU_MAU.Add(3, class108);
                                    goto Label_EE18;
                              }
                              catch (Exception exception62)
                              {
                                    Form1.WriteLine(1, "合成系统 合成属性阶段 合成3 出错![" + base.Userid + "]-[" + base.UserName + "]" + exception62.Message);
                                    return;
                              }
                              Label_B727:;
                              try
                              {
                                    HcItimesClass class109;
                                    if (this.HOP_THANH_VAT_PHAM_BIEU_MAU.TryGetValue(1, out class109))
                                    {
                                          base.TRANG_BI_LAN_BAO_VAY[class109.VI_TRI].bool_0 = false;
                                          this.HOP_THANH_VAT_PHAM_BIEU_MAU.Clear();
                                          this.HOP_THANH_HE_THONG_TACH_RA_SAI();
                                    }
                                    base.OpenWarehouse = false;
                                    this.NGUYEN_BAO_HOP_THANH_MO_RA = 0;
                                    Buffer.BlockCopy(buffer, 0, dst, 11, 2);
                                    goto Label_EE18;
                              }
                              catch (Exception exception63)
                              {
                                    this.NGUYEN_BAO_HOP_THANH_MO_RA = 0;
                                    Form1.WriteLine(1, "合成系统 合成属性阶段 合成4 出错![" + base.Userid + "]-[" + base.UserName + "]" + exception63.Message);
                                    return;
                              }
                              Label_B7DF:;
                              try
                              {
                                    TBL_XWWL_ITEM tbl_xwwl_item22;
                                    if (this.HOP_THANH_VAT_PHAM_BIEU_MAU.Count <= 0)
                                    {
                                          return;
                                    }
                                    HcItimesClass class110 = null;
                                    HcItimesClass class111 = null;
                                    HcItimesClass class112 = null;
                                    HcItimesClass class113 = null;
                                    if (!this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(1))
                                    {
                                          return;
                                    }
                                    class110 = this.HOP_THANH_VAT_PHAM_BIEU_MAU[1];
                                    if (!this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(2))
                                    {
                                          return;
                                    }
                                    class111 = this.HOP_THANH_VAT_PHAM_BIEU_MAU[2];
                                    if (this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(3))
                                    {
                                          class112 = this.HOP_THANH_VAT_PHAM_BIEU_MAU[3];
                                    }
                                    if (!this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(4))
                                    {
                                          return;
                                    }
                                    class113 = this.HOP_THANH_VAT_PHAM_BIEU_MAU[4];
                                    if (((((BitConverter.ToInt64(base.TRANG_BI_LAN_BAO_VAY[class110.VI_TRI].Item_toan_bo_ID, 0) != BitConverter.ToInt64(class110.Item_toan_bo_ID, 0)) || (BitConverter.ToInt64(base.TRANG_BI_LAN_BAO_VAY[class111.VI_TRI].Item_toan_bo_ID, 0) != BitConverter.ToInt64(class111.Item_toan_bo_ID, 0))) || (BitConverter.ToInt64(base.TRANG_BI_LAN_BAO_VAY[class113.VI_TRI].Item_toan_bo_ID, 0) != BitConverter.ToInt64(class113.Item_toan_bo_ID, 0))) || ((class112 != null) && (BitConverter.ToInt64(base.TRANG_BI_LAN_BAO_VAY[class112.VI_TRI].Item_toan_bo_ID, 0) != BitConverter.ToInt64(class112.Item_toan_bo_ID, 0)))) || !World.Itme.TryGetValue(BitConverter.ToInt32(class110.VAT_PHAMid, 0), out tbl_xwwl_item22))
                                    {
                                          return;
                                    }
                                    if ((tbl_xwwl_item22.FLD_RESIDE2 != 1) && (tbl_xwwl_item22.FLD_RESIDE2 != 4))
                                    {
                                          Form1.WriteLine(6, string.Concat(new object[] { "合成系统 中级附魂 BUG1[", BitConverter.ToInt32(class110.VAT_PHAMid, 0), "]-[", BitConverter.ToInt32(class111.VAT_PHAMid, 0), "]" }));
                                          return;
                                    }
                                    if (tbl_xwwl_item22.FLD_LEVEL < 60)
                                    {
                                          return;
                                    }
                                    if (base.TRANG_BI_LAN_BAO_VAY[class110.VI_TRI].Item_troi_chat)
                                    {
                                          this.HOP_THANH_NHAC_NHO(num, 2, 0, base.TRANG_BI_LAN_BAO_VAY[class110.VI_TRI]);
                                          return;
                                    }
                                    class111.method_8();
                                    double num53 = new Random().Next(0, 100);
                                    double num54 = class110.FLD_FJ_thuc_tinh * 20;
                                    if (class112 != null)
                                    {
                                          num4 = BitConverter.ToInt32(class112.VAT_PHAMid, 0);
                                          switch (num4)
                                          {
                                                case 0x2faf0803:
                                                      num53 += 5.0;
                                                      goto Label_BB52;

                                                case 0x2faf0804:
                                                      num53 += 10.0;
                                                      goto Label_BB52;

                                                case 0x2faf0805:
                                                      num53 += 15.0;
                                                      goto Label_BB52;

                                                case 0x2faf081d:
                                                      num53 += 20.0;
                                                      goto Label_BB52;
                                          }
                                          if (num4 == 0x3c14dc88)
                                          {
                                                num53 += 25.0;
                                          }
                                    }
                                    Label_BB52:
                                    if (base.FLD_trang_bi_them_vao_hop_thanh_ty_le_thanh_cong_ti_le_phan_tram != 0.0)
                                    {
                                          num53 += 100.0 * base.FLD_trang_bi_them_vao_hop_thanh_ty_le_thanh_cong_ti_le_phan_tram;
                                    }
                                    if (base.dictionary_3.ContainsKey(0x3c14dd38))
                                    {
                                          num53 += 10.0;
                                    }
                                    if (this.NGUYEN_BAO_HOP_THANH_MO_RA == 1)
                                    {
                                          num53 += 5.0;
                                    }
                                    if (base.FLD_VIP == 1)
                                    {
                                          num53 += 100.0 * World.VIP_Hop_thanh_xac_xuat;
                                    }
                                    if (World.Hop_thanh_xac_xuat != 0.0)
                                    {
                                          num53 += 100.0 * World.Hop_thanh_xac_xuat;
                                    }
                                    if (num53 >= num54)
                                    {
                                          class110.FLD_FJ_trung_cap_phu_hon = class111.NumberOfPhase;
                                          this.LAM_GIAM_DI_VAT_PHAM(class110.VI_TRI, 1);
                                          this.TANG_CUONG_VAT_PHAM(class110.Item_toan_bo_ID, class110.VAT_PHAMid, class110.VI_TRI, class110.VAT_PHAM_SO_LUONG, class110.Item_thuoc_tinh);
                                          if (base.FLD_VIP == 1)
                                          {
                                                base.GameMessage("Congratulations, VIP customers improve synthesis rate" + (World.VIP_Hop_thanh_xac_xuat * 100.0) + "%", 9, "system hint");
                                          }
                                          if (class111 != null)
                                          {
                                                this.LAM_GIAM_DI_VAT_PHAM(class111.VI_TRI, 1);
                                          }
                                          if (class113 != null)
                                          {
                                                this.LAM_GIAM_DI_VAT_PHAM(class113.VI_TRI, 1);
                                          }
                                          if (class112 != null)
                                          {
                                                this.LAM_GIAM_DI_VAT_PHAM(class112.VI_TRI, 1);
                                          }
                                          base.TRANG_BI_LAN_BAO_VAY[class110.VI_TRI].bool_0 = false;
                                          this.HOP_THANH_VAT_PHAM_BIEU_MAU.Clear();
                                          this.HOP_THANH_HE_THONG_TACH_RA_SAI();
                                          this.NGUYEN_BAO_HOP_THANH_MO_RA = 0;
                                          this.HOP_THANH_NHAC_NHO(num, 1, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                    }
                                    else
                                    {
                                          base.GameMessage("VIP user can increase the synthesis rate" + (World.VIP_Hop_thanh_xac_xuat * 100.0) + "%", 9, "system hint 10");
                                          if (class111 != null)
                                          {
                                                this.LAM_GIAM_DI_VAT_PHAM(class111.VI_TRI, 1);
                                          }
                                          if (class113 != null)
                                          {
                                                this.LAM_GIAM_DI_VAT_PHAM(class113.VI_TRI, 1);
                                          }
                                          if (class112 != null)
                                          {
                                                this.LAM_GIAM_DI_VAT_PHAM(class112.VI_TRI, 1);
                                          }
                                          base.TRANG_BI_LAN_BAO_VAY[class110.VI_TRI].bool_0 = false;
                                          this.HOP_THANH_VAT_PHAM_BIEU_MAU.Clear();
                                          this.HOP_THANH_HE_THONG_TACH_RA_SAI();
                                          this.NGUYEN_BAO_HOP_THANH_MO_RA = 0;
                                          this.HOP_THANH_NHAC_NHO(num, 0, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                    }
                                    return;
                              }
                              catch (Exception exception64)
                              {
                                    this.NGUYEN_BAO_HOP_THANH_MO_RA = 0;
                                    Form1.WriteLine(1, "合成系统 中级附魂 合成 出错![" + base.Userid + "]-[" + base.UserName + "]" + exception64.Message);
                                    return;
                              }
                              Label_BE7A:;
                              try
                              {
                                    TBL_XWWL_ITEM tbl_xwwl_item23;
                                    if (((((this.HOP_THANH_VAT_PHAM_BIEU_MAU.Count != 0) && this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(4)) && (!this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(1) && !base.TRANG_BI_LAN_BAO_VAY[index].Item_troi_chat)) && (World.Itme.TryGetValue(BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_ID, 0), out tbl_xwwl_item23) && ((tbl_xwwl_item23.FLD_RESIDE2 == 1) || (tbl_xwwl_item23.FLD_RESIDE2 == 4)))) && (tbl_xwwl_item23.FLD_LEVEL >= 60))
                                    {
                                          HcItimesClass class114 = new HcItimesClass
                                          {
                                                VI_TRI = index,
                                                VAT_PHAM = base.TRANG_BI_LAN_BAO_VAY[index].Item_byte
                                          };
                                          base.TRANG_BI_LAN_BAO_VAY[index].bool_0 = true;
                                          this.HOP_THANH_VAT_PHAM_BIEU_MAU.Add(1, class114);
                                          this.HOP_THANH_NHAC_NHO(num, 1, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                    }
                                    return;
                              }
                              catch (Exception exception65)
                              {
                                    Form1.WriteLine(1, "合成系统 中级附魂 合成1 出错![" + base.Userid + "]-[" + base.UserName + "]" + exception65.Message);
                                    return;
                              }
                              Label_BFC1:;
                              try
                              {
                                    TBL_XWWL_ITEM tbl_xwwl_item24;
                                    if ((this.HOP_THANH_VAT_PHAM_BIEU_MAU.Count == 0) || this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(2))
                                    {
                                          return;
                                    }
                                    HcItimesClass class115 = new HcItimesClass
                                    {
                                          VI_TRI = index,
                                          VAT_PHAM = base.TRANG_BI_LAN_BAO_VAY[index].Item_byte
                                    };
                                    class115.method_8();
                                    HcItimesClass class116 = null;
                                    if (!this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(1))
                                    {
                                          return;
                                    }
                                    class116 = this.HOP_THANH_VAT_PHAM_BIEU_MAU[1];
                                    int num55 = BitConverter.ToInt32(class115.method_1(), 0);
                                    if (World.Itme.TryGetValue(BitConverter.ToInt32(class116.VAT_PHAMid, 0), out tbl_xwwl_item24))
                                    {
                                          if ((tbl_xwwl_item24.FLD_RESIDE2 != 4) && (tbl_xwwl_item24.FLD_RESIDE2 != 1))
                                          {
                                                this.HOP_THANH_NHAC_NHO(num, 0, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                                this.HOP_THANH_VAT_PHAM_BIEU_MAU.Remove(1);
                                                return;
                                          }
                                          if (num55 == 0x2faf082e)
                                          {
                                                if (((tbl_xwwl_item24.FLD_LEVEL >= 60) && (tbl_xwwl_item24.FLD_LEVEL <= 110)) && (class115.NumberOfPhase > 0x17))
                                                {
                                                      this.HOP_THANH_NHAC_NHO(num, 0, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                                      this.HOP_THANH_VAT_PHAM_BIEU_MAU.Remove(1);
                                                      return;
                                                }
                                          }
                                          else if (((num55 == 0x2faf082f) && (tbl_xwwl_item24.FLD_LEVEL >= 80)) && (tbl_xwwl_item24.FLD_LEVEL <= 130))
                                          {
                                                if (tbl_xwwl_item24.FLD_RESIDE2 == 4)
                                                {
                                                      if (class115.NumberOfPhase <= 0x24)
                                                      {
                                                            goto Label_C1F7;
                                                      }
                                                      this.HOP_THANH_NHAC_NHO(num, 2, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                                      this.HOP_THANH_VAT_PHAM_BIEU_MAU.Remove(1);
                                                }
                                                else if (tbl_xwwl_item24.FLD_RESIDE2 == 1)
                                                {
                                                      if (class115.NumberOfPhase >= 0x24)
                                                      {
                                                            goto Label_C1F7;
                                                      }
                                                      this.HOP_THANH_NHAC_NHO(num, 3, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                                      this.HOP_THANH_VAT_PHAM_BIEU_MAU.Remove(1);
                                                }
                                                else
                                                {
                                                      this.HOP_THANH_NHAC_NHO(num, 0, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                                      this.HOP_THANH_VAT_PHAM_BIEU_MAU.Remove(1);
                                                }
                                                return;
                                          }
                                    }
                                    Label_C1F7:
                                    base.TRANG_BI_LAN_BAO_VAY[index].bool_0 = true;
                                    this.HOP_THANH_VAT_PHAM_BIEU_MAU.Add(2, class115);
                                    this.HOP_THANH_NHAC_NHO(num, 1, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                    return;
                              }
                              catch (Exception exception66)
                              {
                                    Form1.WriteLine(1, "合成系统 中级附魂 合成2 出错![" + base.Userid + "]-[" + base.UserName + "]" + exception66.Message);
                                    return;
                              }
                              Label_C281:;
                              try
                              {
                                    if ((this.HOP_THANH_VAT_PHAM_BIEU_MAU.Count != 0) && !this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(3))
                                    {
                                          HcItimesClass class117 = new HcItimesClass
                                          {
                                                VI_TRI = index,
                                                VAT_PHAM = base.TRANG_BI_LAN_BAO_VAY[index].Item_byte
                                          };
                                          base.TRANG_BI_LAN_BAO_VAY[index].bool_0 = true;
                                          this.HOP_THANH_VAT_PHAM_BIEU_MAU.Add(3, class117);
                                          this.HOP_THANH_NHAC_NHO(num, 1, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                    }
                                    return;
                              }
                              catch (Exception exception67)
                              {
                                    Form1.WriteLine(1, "合成系统 中级附魂 合成3 出错![" + base.Userid + "]-[" + base.UserName + "]" + exception67.Message);
                                    return;
                              }
                              Label_C34C:;
                              try
                              {
                                    if (!this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(4) && (BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_ID, 0) == 0x3b9acb4a))
                                    {
                                          HcItimesClass class118 = new HcItimesClass
                                          {
                                                VI_TRI = index,
                                                VAT_PHAM = base.TRANG_BI_LAN_BAO_VAY[index].Item_byte
                                          };
                                          base.TRANG_BI_LAN_BAO_VAY[index].bool_0 = true;
                                          this.HOP_THANH_VAT_PHAM_BIEU_MAU.Add(4, class118);
                                          this.HOP_THANH_NHAC_NHO(num, 1, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                    }
                                    return;
                              }
                              catch (Exception exception68)
                              {
                                    Form1.WriteLine(1, "合成系统 中级附魂 合成4 出错![" + base.Userid + "]-[" + base.UserName + "]" + exception68.Message);
                                    return;
                              }
                              Label_C424:;
                              try
                              {
                                    this.HOP_THANH_VAT_PHAM_BIEU_MAU.Clear();
                                    Buffer.BlockCopy(buffer, 0, dst, 11, 2);
                                    this.HOP_THANH_HE_THONG_TACH_RA_SAI();
                                    this.NGUYEN_BAO_HOP_THANH_MO_RA = 0;
                                    base.OpenWarehouse = false;
                                    this.HOP_THANH_NHAC_NHO(num, 1, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                    return;
                              }
                              catch (Exception exception69)
                              {
                                    this.NGUYEN_BAO_HOP_THANH_MO_RA = 0;
                                    Form1.WriteLine(1, "合成系统 合成属性阶段 合成4 出错![" + base.Userid + "]-[" + base.UserName + "]" + exception69.Message);
                                    return;
                              }
                              Label_C4C1:
                              if (this.HOP_THANH_VAT_PHAM_BIEU_MAU.Count <= 0)
                              {
                                    return;
                              }
                              HcItimesClass class6 = null;
                              HcItimesClass class7 = null;
                              HcItimesClass class8 = null;
                              if (!this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(1))
                              {
                                    return;
                              }
                              class6 = this.HOP_THANH_VAT_PHAM_BIEU_MAU[1];
                              if (!this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(2))
                              {
                                    return;
                              }
                              class7 = this.HOP_THANH_VAT_PHAM_BIEU_MAU[2];
                              if (this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(3))
                              {
                                    class8 = this.HOP_THANH_VAT_PHAM_BIEU_MAU[3];
                              }
                              if (((BitConverter.ToInt64(base.TRANG_BI_LAN_BAO_VAY[class6.VI_TRI].Item_toan_bo_ID, 0) != BitConverter.ToInt64(class6.Item_toan_bo_ID, 0)) || (BitConverter.ToInt64(base.TRANG_BI_LAN_BAO_VAY[class7.VI_TRI].Item_toan_bo_ID, 0) != BitConverter.ToInt64(class7.Item_toan_bo_ID, 0))) || ((class8 != null) && (BitConverter.ToInt64(base.TRANG_BI_LAN_BAO_VAY[class8.VI_TRI].Item_toan_bo_ID, 0) != BitConverter.ToInt64(class8.Item_toan_bo_ID, 0))))
                              {
                                    return;
                              }
                              if (base.TRANG_BI_LAN_BAO_VAY[class6.VI_TRI].Item_troi_chat)
                              {
                                    this.HOP_THANH_NHAC_NHO(num, 2, 0, base.TRANG_BI_LAN_BAO_VAY[class6.VI_TRI]);
                                    return;
                              }
                              double num5 = new Random().Next(0, 100);
                              double num6 = class6.FLD_FJ_thuc_tinh * 10;
                              if (class8 != null)
                              {
                                    num4 = BitConverter.ToInt32(class8.VAT_PHAMid, 0);
                                    switch (num4)
                                    {
                                          case 0x2faf0803:
                                                num5 += 5.0;
                                                goto Label_C69B;

                                          case 0x2faf0804:
                                                num5 += 10.0;
                                                goto Label_C69B;

                                          case 0x2faf0805:
                                                num5 += 15.0;
                                                goto Label_C69B;

                                          case 0x2faf081d:
                                                num5 += 20.0;
                                                goto Label_C69B;
                                    }
                                    if (num4 == 0x3c14dc88)
                                    {
                                          num5 += 25.0;
                                    }
                              }
                              Label_C69B:
                              if (this.NGUYEN_BAO_HOP_THANH_MO_RA == 1)
                              {
                                    num5 += 5.0;
                              }
                              if (base.FLD_VIP == 1)
                              {
                                    num5 += 100.0 * World.VIP_Hop_thanh_xac_xuat;
                              }
                              if (World.Hop_thanh_xac_xuat != 0.0)
                              {
                                    num5 += 100.0 * World.Hop_thanh_xac_xuat;
                              }
                              if (num5 >= num6)
                              {
                                    class6.FLD_FJ_trung_cap_phu_hon = 0;
                                    this.LAM_GIAM_DI_VAT_PHAM(class6.VI_TRI, 1);
                                    this.TANG_CUONG_VAT_PHAM(class6.Item_toan_bo_ID, class6.VAT_PHAMid, class6.VI_TRI, class6.VAT_PHAM_SO_LUONG, class6.Item_thuoc_tinh);
                                    if (base.FLD_VIP == 1)
                                    {
                                          base.GameMessage("Congratulations, VIP customers improve synthesis rate" + (World.VIP_Hop_thanh_xac_xuat * 100.0) + "%", 9, "system hint");
                                    }
                                    if (class7 != null)
                                    {
                                          this.LAM_GIAM_DI_VAT_PHAM(class7.VI_TRI, 1);
                                    }
                                    if (class8 != null)
                                    {
                                          this.LAM_GIAM_DI_VAT_PHAM(class8.VI_TRI, 1);
                                    }
                                    base.TRANG_BI_LAN_BAO_VAY[class6.VI_TRI].bool_0 = false;
                                    this.HOP_THANH_VAT_PHAM_BIEU_MAU.Clear();
                                    this.HOP_THANH_HE_THONG_TACH_RA_SAI();
                                    this.NGUYEN_BAO_HOP_THANH_MO_RA = 0;
                                    this.HOP_THANH_NHAC_NHO(num, 1, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                              }
                              else
                              {
                                    base.GameMessage("VIP user can increase the synthesis rate" + (World.VIP_Hop_thanh_xac_xuat * 100.0) + "%", 9, "system hint 11");
                                    if (class7 != null)
                                    {
                                          this.LAM_GIAM_DI_VAT_PHAM(class7.VI_TRI, 1);
                                    }
                                    if (class8 != null)
                                    {
                                          this.LAM_GIAM_DI_VAT_PHAM(class8.VI_TRI, 1);
                                    }
                                    base.TRANG_BI_LAN_BAO_VAY[class6.VI_TRI].bool_0 = false;
                                    this.HOP_THANH_VAT_PHAM_BIEU_MAU.Clear();
                                    this.HOP_THANH_HE_THONG_TACH_RA_SAI();
                                    this.NGUYEN_BAO_HOP_THANH_MO_RA = 0;
                                    this.HOP_THANH_NHAC_NHO(num, 0, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                              }
                              return;
                              Label_C8A6:
                              if ((World.Itme.TryGetValue(BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_ID, 0), out tbl_xwwl_item25) && (((tbl_xwwl_item25.FLD_RESIDE2 == 7) || (tbl_xwwl_item25.FLD_RESIDE2 == 8)) || (tbl_xwwl_item25.FLD_RESIDE2 == 10))) && (tbl_xwwl_item25.FLD_LEVEL >= 60))
                              {
                                    if (tbl_xwwl_item25.FLD_LEVEL >= 100)
                                    {
                                          this.HOP_THANH_NHAC_NHO(num, 0x79, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                          HcItimesClass class119 = new HcItimesClass
                                          {
                                                VI_TRI = index,
                                                VAT_PHAM = base.TRANG_BI_LAN_BAO_VAY[index].Item_byte
                                          };
                                          base.TRANG_BI_LAN_BAO_VAY[index].bool_0 = true;
                                          this.HOP_THANH_VAT_PHAM_BIEU_MAU.Add(1, class119);
                                    }
                                    else if (tbl_xwwl_item25.FLD_LEVEL >= 80)
                                    {
                                          this.HOP_THANH_NHAC_NHO(num, 0x6f, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                          HcItimesClass class120 = new HcItimesClass
                                          {
                                                VI_TRI = index,
                                                VAT_PHAM = base.TRANG_BI_LAN_BAO_VAY[index].Item_byte
                                          };
                                          base.TRANG_BI_LAN_BAO_VAY[index].bool_0 = true;
                                          this.HOP_THANH_VAT_PHAM_BIEU_MAU.Add(1, class120);
                                    }
                                    else
                                    {
                                          if (tbl_xwwl_item25.FLD_LEVEL < 60)
                                          {
                                                goto Label_EE18;
                                          }
                                          this.HOP_THANH_NHAC_NHO(num, 0x65, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                          HcItimesClass class121 = new HcItimesClass
                                          {
                                                VI_TRI = index,
                                                VAT_PHAM = base.TRANG_BI_LAN_BAO_VAY[index].Item_byte
                                          };
                                          base.TRANG_BI_LAN_BAO_VAY[index].bool_0 = true;
                                          this.HOP_THANH_VAT_PHAM_BIEU_MAU.Add(1, class121);
                                    }
                              }
                              return;
                              Label_CA4F:
                              class2 = null;
                              if (this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(1))
                              {
                                    TBL_XWWL_ITEM tbl_xwwl_item26;
                                    class2 = this.HOP_THANH_VAT_PHAM_BIEU_MAU[1];
                                    if (World.Itme.TryGetValue(BitConverter.ToInt32(class2.VAT_PHAMid, 0), out tbl_xwwl_item26))
                                    {
                                          if (tbl_xwwl_item26.FLD_LEVEL >= 100)
                                          {
                                                if (BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_ID, 0) != 0x3b9acc80)
                                                {
                                                      this.HOP_THANH_NHAC_NHO(num, 7, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                                }
                                                else if (BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_SO_LUONG, 0) < 2)
                                                {
                                                      this.HOP_THANH_NHAC_NHO(num, 8, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                                }
                                                else
                                                {
                                                      this.HOP_THANH_NHAC_NHO(num, 1, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                                      this.HOP_THANH_NHAC_NHO(num, 1, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                                      HcItimesClass class122 = new HcItimesClass
                                                      {
                                                            VI_TRI = index,
                                                            VAT_PHAM = base.TRANG_BI_LAN_BAO_VAY[index].Item_byte
                                                      };
                                                      base.TRANG_BI_LAN_BAO_VAY[index].bool_0 = true;
                                                      if (!this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(2))
                                                      {
                                                            this.HOP_THANH_VAT_PHAM_BIEU_MAU.Add(2, class122);
                                                      }
                                                }
                                          }
                                          else
                                          {
                                                if (tbl_xwwl_item26.FLD_LEVEL < 80)
                                                {
                                                      goto Label_EE18;
                                                }
                                                if (BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_ID, 0) != 0x3b9acc80)
                                                {
                                                      this.HOP_THANH_NHAC_NHO(num, 7, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                                }
                                                else if (BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_SO_LUONG, 0) < 1)
                                                {
                                                      this.HOP_THANH_NHAC_NHO(num, 8, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                                }
                                                else
                                                {
                                                      this.HOP_THANH_NHAC_NHO(num, 1, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                                      HcItimesClass class123 = new HcItimesClass
                                                      {
                                                            VI_TRI = index,
                                                            VAT_PHAM = base.TRANG_BI_LAN_BAO_VAY[index].Item_byte
                                                      };
                                                      base.TRANG_BI_LAN_BAO_VAY[index].bool_0 = true;
                                                      if (!this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(2))
                                                      {
                                                            this.HOP_THANH_VAT_PHAM_BIEU_MAU.Add(2, class123);
                                                      }
                                                }
                                          }
                                    }
                                    else
                                    {
                                          this.HOP_THANH_NHAC_NHO(num, 7, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                    }
                              }
                              else
                              {
                                    this.HOP_THANH_NHAC_NHO(num, 5, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                              }
                              return;
                              Label_CC7B:
                              class3 = null;
                              if (!this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(1))
                              {
                                    goto Label_CE64;
                              }
                              class3 = this.HOP_THANH_VAT_PHAM_BIEU_MAU[1];
                              if (!World.Itme.TryGetValue(BitConverter.ToInt32(class3.VAT_PHAMid, 0), out tbl_xwwl_item))
                              {
                                    goto Label_CE4E;
                              }
                              if (tbl_xwwl_item.FLD_RESIDE2 == 7)
                              {
                                    if (BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_ID, 0) != 0x3b9acc7e)
                                    {
                                          this.HOP_THANH_NHAC_NHO(num, 7, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                    }
                                    else
                                    {
                                          if (BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_SO_LUONG, 0) >= 1)
                                          {
                                                goto Label_CDEB;
                                          }
                                          this.HOP_THANH_NHAC_NHO(num, 8, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                    }
                                    return;
                              }
                              if (tbl_xwwl_item.FLD_RESIDE2 == 8)
                              {
                                    if (BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_ID, 0) != 0x3b9acc7d)
                                    {
                                          this.HOP_THANH_NHAC_NHO(num, 7, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                    }
                                    else
                                    {
                                          if (BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_SO_LUONG, 0) >= 1)
                                          {
                                                goto Label_CDEB;
                                          }
                                          this.HOP_THANH_NHAC_NHO(num, 8, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                    }
                                    return;
                              }
                              if (tbl_xwwl_item.FLD_RESIDE2 == 10)
                              {
                                    if (BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_ID, 0) != 0x3b9acc7f)
                                    {
                                          this.HOP_THANH_NHAC_NHO(num, 7, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                          return;
                                    }
                                    if (BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_SO_LUONG, 0) < 1)
                                    {
                                          this.HOP_THANH_NHAC_NHO(num, 8, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                          return;
                                    }
                              }
                              Label_CDEB:
                              class4 = new HcItimesClass();
                              class4.VI_TRI = index;
                              class4.VAT_PHAM = base.TRANG_BI_LAN_BAO_VAY[index].Item_byte;
                              base.TRANG_BI_LAN_BAO_VAY[index].bool_0 = true;
                              if (!this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(3))
                              {
                                    this.HOP_THANH_VAT_PHAM_BIEU_MAU.Add(3, class4);
                              }
                              this.HOP_THANH_NHAC_NHO(num, 1, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                              return;
                              Label_CE4E:
                              this.HOP_THANH_NHAC_NHO(num, 7, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                              return;
                              Label_CE64:
                              this.HOP_THANH_NHAC_NHO(num, 5, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                              return;
                              Label_CE7A:
                              if ((BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_ID, 0) != 0x3c14dc48) && (BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_ID, 0) != 0x3b9acc6b))
                              {
                                    this.HOP_THANH_NHAC_NHO(num, 7, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                              }
                              else
                              {
                                    HcItimesClass class124 = null;
                                    if (this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(1))
                                    {
                                          class124 = this.HOP_THANH_VAT_PHAM_BIEU_MAU[1];
                                          class124.method_5();
                                          class124.method_8();
                                          if ((BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_ID, 0) == 0x3b9acc6b) && (class124.StrengthNumber > 2))
                                          {
                                                this.HOP_THANH_NHAC_NHO(num, 7, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                          }
                                          else
                                          {
                                                HcItimesClass class125 = new HcItimesClass
                                                {
                                                      VI_TRI = index,
                                                      VAT_PHAM = base.TRANG_BI_LAN_BAO_VAY[index].Item_byte
                                                };
                                                base.TRANG_BI_LAN_BAO_VAY[index].bool_0 = true;
                                                if (!this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(4))
                                                {
                                                      this.HOP_THANH_VAT_PHAM_BIEU_MAU.Add(4, class125);
                                                }
                                                this.HOP_THANH_NHAC_NHO(num, 1, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                          }
                                    }
                                    else
                                    {
                                          this.HOP_THANH_NHAC_NHO(num, 5, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                    }
                              }
                              return;
                              Label_DBEF:;
                              try
                              {
                                    if (this.HOP_THANH_VAT_PHAM_BIEU_MAU.Count > 0)
                                    {
                                          HcItimesClass class131 = null;
                                          if (this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(1))
                                          {
                                                TBL_XWWL_ITEM tbl_xwwl_item28;
                                                class131 = this.HOP_THANH_VAT_PHAM_BIEU_MAU[1];
                                                if (World.Ao_choang_phan_giai_tieu_hao_Loai_hinh == 0)
                                                {
                                                      if (base.Player_Money < World.Phan_giai_tieu_hao_So_luong)
                                                      {
                                                            base.GameMessage("You need to deduct less gold coins" + World.Phan_giai_tieu_hao_So_luong + "Months, before it can be decomposed", 50, "");
                                                            this.HOP_THANH_NHAC_NHO(num, 4, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                                            return;
                                                      }
                                                      base.Player_Money -= World.Phan_giai_tieu_hao_So_luong;
                                                      base.UpdateMoneyAndWeight();
                                                }
                                                else
                                                {
                                                      if (base.FLD_RXPIONT < World.Phan_giai_tieu_hao_So_luong)
                                                      {
                                                            this.HOP_THANH_NHAC_NHO(num, 4, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                                            base.GameMessage("You need to deduct gold ingot inadequate" + World.Phan_giai_tieu_hao_So_luong + "Months, before it can be decomposed", 50, "");
                                                            return;
                                                      }
                                                      base.KIEM_SOAT_CASH_SO_LIEU(World.Phan_giai_tieu_hao_So_luong, 0);
                                                      base.UPDATE_RXPIONT();
                                                }
                                                if (!World.Itme.TryGetValue(BitConverter.ToInt32(class131.VAT_PHAMid, 0), out tbl_xwwl_item28))
                                                {
                                                      goto Label_EE18;
                                                }
                                                int num58 = 1;
                                                int num59 = 0;
                                                if (base.NHAN_TUI_TRONG_SO_LUONG() < 2)
                                                {
                                                      this.HOP_THANH_NHAC_NHO(num, 8, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                                }
                                                else
                                                {
                                                      num58 = new Random(DateTime.Now.Millisecond).Next(1, 3);
                                                      if (base.DUOC_KIEN_HANG_RONG(this) != -1)
                                                      {
                                                            if (tbl_xwwl_item28.FLD_RESIDE2 == 12)
                                                            {
                                                                  num59 = 0x3b9acc21;
                                                            }
                                                            this.LAM_GIAM_DI_VAT_PHAM(class131.VI_TRI, 1);
                                                            byte[] buffer29 = BitConverter.GetBytes(RxjhClass.GetDBItmeId());
                                                            int num60 = base.DUOC_KIEN_HANG_RONG(this);
                                                            buffer29 = BitConverter.GetBytes(RxjhClass.GetDBItmeId());
                                                            this.TANG_CUONG_VAT_PHAM_2(buffer29, BitConverter.GetBytes(num59), num60, BitConverter.GetBytes(num58), new byte[0x38]);
                                                            this.HOP_THANH_NHAC_NHO(num, 1, num58, base.TRANG_BI_LAN_BAO_VAY[index]);
                                                            this.HOP_THANH_VAT_PHAM_BIEU_MAU.Clear();
                                                            this.HOP_THANH_HE_THONG_TACH_RA_SAI();
                                                            this.NGUYEN_BAO_HOP_THANH_MO_RA = 0;
                                                      }
                                                      else
                                                      {
                                                            this.HOP_THANH_NHAC_NHO(num, 8, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                                      }
                                                }
                                          }
                                          else
                                          {
                                                this.HOP_THANH_NHAC_NHO(num, 5, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                          }
                                    }
                                    return;
                              }
                              catch (Exception exception73)
                              {
                                    Form1.WriteLine(1, string.Concat(new object[] { "218披风分解 出错", base.Client.int_3, "|", base.Client.ToString(), " ", exception73 }));
                                    return;
                              }
                              Label_DEB4:;
                              try
                              {
                                    if (this.HOP_THANH_VAT_PHAM_BIEU_MAU.Count >= 3)
                                    {
                                          HcItimesClass class132 = null;
                                          HcItimesClass class133 = null;
                                          HcItimesClass class134 = null;
                                          if (this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(1))
                                          {
                                                class133 = this.HOP_THANH_VAT_PHAM_BIEU_MAU[1];
                                          }
                                          if (this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(2))
                                          {
                                                class134 = this.HOP_THANH_VAT_PHAM_BIEU_MAU[2];
                                          }
                                          if (this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(3))
                                          {
                                                class132 = this.HOP_THANH_VAT_PHAM_BIEU_MAU[3];
                                          }
                                          if (World.Ao_choang_to_hop_tieu_hao_Loai_hinh == 0)
                                          {
                                                if (base.Player_Money < World.To_hop_tieu_hao_so_luong)
                                                {
                                                      base.GameMessage("You need to deduct less gold coins" + World.To_hop_tieu_hao_so_luong + "Months, before it can be decomposed", 50, "");
                                                      this.HOP_THANH_NHAC_NHO(num, 4, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                                      return;
                                                }
                                                base.Player_Money -= World.To_hop_tieu_hao_so_luong;
                                                base.UpdateMoneyAndWeight();
                                          }
                                          else
                                          {
                                                if (base.FLD_RXPIONT < World.To_hop_tieu_hao_so_luong)
                                                {
                                                      this.HOP_THANH_NHAC_NHO(num, 4, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                                      base.GameMessage("You need to deduct gold ingot inadequate" + World.To_hop_tieu_hao_so_luong + "Months, before it can be decomposed", 50, "");
                                                      return;
                                                }
                                                base.KIEM_SOAT_CASH_SO_LIEU(World.To_hop_tieu_hao_so_luong, 0);
                                                base.UPDATE_RXPIONT();
                                          }
                                          int num61 = class132.VI_TRI;
                                          int num62 = BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[num61].VAT_PHAM_ID, 0);
                                          int num63 = base.TRANG_BI_LAN_BAO_VAY[class133.VI_TRI].FLD_MAGIC0;
                                          int num64 = base.TRANG_BI_LAN_BAO_VAY[class133.VI_TRI].FLD_MAGIC1;
                                          int num65 = base.TRANG_BI_LAN_BAO_VAY[class133.VI_TRI].FLD_MAGIC2;
                                          int num66 = base.TRANG_BI_LAN_BAO_VAY[class133.VI_TRI].FLD_MAGIC3;
                                          int num67 = base.TRANG_BI_LAN_BAO_VAY[class133.VI_TRI].FLD_MAGIC4;
                                          this.LAM_GIAM_DI_VAT_PHAM(class132.VI_TRI, 1);
                                          this.LAM_GIAM_DI_VAT_PHAM(class133.VI_TRI, 1);
                                          this.LAM_GIAM_DI_VAT_PHAM(class134.VI_TRI, 1);
                                          this.TANG_CUONG_VAT_PHAM_MANG_THUOC_TINH(num62, num61, 1, num63, num64, num65, num66, num67, 0, 0, 0, 0);
                                          this.HOP_THANH_VAT_PHAM_BIEU_MAU.Clear();
                                          this.HOP_THANH_HE_THONG_TACH_RA_SAI();
                                          this.NGUYEN_BAO_HOP_THANH_MO_RA = 0;
                                          this.HOP_THANH_NHAC_NHO(num, 1, 0, base.TRANG_BI_LAN_BAO_VAY[class132.VI_TRI]);
                                    }
                                    return;
                              }
                              catch (Exception exception74)
                              {
                                    Form1.WriteLine(1, "组合错误![" + base.Userid + "]-[" + base.UserName + "]" + exception74.Message);
                                    return;
                              }
                              Label_E1BA:;
                              try
                              {
                                    HcItimesClass class135;
                                    if (this.HOP_THANH_VAT_PHAM_BIEU_MAU.TryGetValue(1, out class135))
                                    {
                                          base.TRANG_BI_LAN_BAO_VAY[class135.VI_TRI].bool_0 = false;
                                          this.HOP_THANH_VAT_PHAM_BIEU_MAU.Clear();
                                          this.HOP_THANH_HE_THONG_TACH_RA_SAI();
                                    }
                                    this.NGUYEN_BAO_HOP_THANH_MO_RA = 0;
                                    this.HOP_THANH_NHAC_NHO(num, 1, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                    return;
                              }
                              catch (Exception exception75)
                              {
                                    this.NGUYEN_BAO_HOP_THANH_MO_RA = 0;
                                    Form1.WriteLine(1, "合成系统 披风分解取消 210 出错![" + base.Userid + "]-[" + base.UserName + "]" + exception75.Message);
                                    return;
                              }
                              Label_E270:;
                              try
                              {
                                    TBL_XWWL_ITEM tbl_xwwl_item29;
                                    if (World.Itme.TryGetValue(BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_ID, 0), out tbl_xwwl_item29))
                                    {
                                          if (tbl_xwwl_item29.FLD_LEVEL < 130)
                                          {
                                                base.GameMessage("Wu Xun only put new equipment and more than 130 equipment", 9, "system hint");
                                                this.HOP_THANH_NHAC_NHO(num, 2, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                                return;
                                          }
                                          if ((tbl_xwwl_item29.ItmeNAME.Contains("真-") || tbl_xwwl_item29.ItmeNAME.Contains("未完成")) || tbl_xwwl_item29.ItmeNAME.Contains("伪造的"))
                                          {
                                                base.GameMessage("This equipment has been unable to upgrade", 9, "system hint");
                                                this.HOP_THANH_NHAC_NHO(num, 2, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                                return;
                                          }
                                    }
                                    HcItimesClass class136 = new HcItimesClass();
                                    if (base.TRANG_BI_LAN_BAO_VAY[index].FLD_cuong_hoa_so_luong >= 7)
                                    {
                                          class136.VI_TRI = index;
                                          class136.VAT_PHAM = base.TRANG_BI_LAN_BAO_VAY[index].Item_byte;
                                          base.TRANG_BI_LAN_BAO_VAY[index].bool_0 = true;
                                          if (!this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(2))
                                          {
                                                this.HOP_THANH_VAT_PHAM_BIEU_MAU.Add(2, class136);
                                          }
                                          this.HOP_THANH_NHAC_NHO(num, 1, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                    }
                                    else
                                    {
                                          base.GameMessage("Must be placed greater than or equal to strengthen [7] equipment", 9, "system hint");
                                          this.HOP_THANH_NHAC_NHO(num, 2, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                    }
                                    return;
                              }
                              catch (Exception exception76)
                              {
                                    this.NGUYEN_BAO_HOP_THANH_MO_RA = 0;
                                    Form1.WriteLine(1, "合成系统 装备升级放VAT_PHAM 221 出错![" + base.Userid + "]-[" + base.UserName + "]" + exception76.Message);
                                    return;
                              }
                              Label_E443:;
                              try
                              {
                                    TBL_XWWL_ITEM tbl_xwwl_item30;
                                    if (base.TRANG_BI_LAN_BAO_VAY[index].Item_troi_chat)
                                    {
                                          return;
                                    }
                                    if ((base.TRANG_BI_LAN_BAO_VAY[index].GetItem_ID == 0x3b9acd56L) && (base.TRANG_BI_LAN_BAO_VAY[index].GetItem_ID == 0x3b9acd55L))
                                    {
                                          base.GameMessage("Please put [King Shuiyu] or [spider gold] to equipment upgrades", 9, "system hint");
                                          this.HOP_THANH_NHAC_NHO(num, 2, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                          return;
                                    }
                                    if (this.HOP_THANH_VAT_PHAM_BIEU_MAU.Count <= 0)
                                    {
                                          return;
                                    }
                                    HcItimesClass class137 = null;
                                    HcItimesClass class138 = new HcItimesClass();
                                    if (this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(2))
                                    {
                                          class137 = this.HOP_THANH_VAT_PHAM_BIEU_MAU[2];
                                    }
                                    if (World.Itme.TryGetValue(BitConverter.ToInt32(class137.VAT_PHAMid, 0), out tbl_xwwl_item30))
                                    {
                                          if (((tbl_xwwl_item30.FLD_RESIDE2 != 1) && (tbl_xwwl_item30.FLD_RESIDE2 != 2)) && ((tbl_xwwl_item30.FLD_RESIDE2 != 5) && (tbl_xwwl_item30.FLD_RESIDE2 != 6)))
                                          {
                                                if (tbl_xwwl_item30.FLD_RESIDE2 == 4)
                                                {
                                                      if (base.TRANG_BI_LAN_BAO_VAY[index].GetItem_ID == 0x3b9acd55L)
                                                      {
                                                            goto Label_E606;
                                                      }
                                                      base.GameMessage("Please put King Shuiyu upgrade weapons", 9, "system hint");
                                                      this.HOP_THANH_NHAC_NHO(num, 2, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                                }
                                                else
                                                {
                                                      base.GameMessage("This system is only suitable for 130 weapons and 130 Wu Xun equipment upgrades", 9, "system hint");
                                                      this.HOP_THANH_NHAC_NHO(num, 2, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                                }
                                                return;
                                          }
                                          if (base.TRANG_BI_LAN_BAO_VAY[index].GetItem_ID != 0x3b9acd56L)
                                          {
                                                base.GameMessage("Please put the spider gold equipment upgrades", 9, "system hint");
                                                this.HOP_THANH_NHAC_NHO(num, 2, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                                return;
                                          }
                                    }
                                    Label_E606:
                                    class138.VI_TRI = index;
                                    class138.VAT_PHAM = base.TRANG_BI_LAN_BAO_VAY[index].Item_byte;
                                    base.TRANG_BI_LAN_BAO_VAY[index].bool_0 = true;
                                    if (!this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(1))
                                    {
                                          this.HOP_THANH_VAT_PHAM_BIEU_MAU.Add(1, class138);
                                    }
                                    this.HOP_THANH_NHAC_NHO(num, 1, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                    return;
                              }
                              catch (Exception exception77)
                              {
                                    this.NGUYEN_BAO_HOP_THANH_MO_RA = 0;
                                    Form1.WriteLine(1, "合成系统 披风组合 214 出错![" + base.Userid + "]-[" + base.UserName + "]" + exception77.Message);
                                    return;
                              }
                              Label_E6C9:;
                              try
                              {
                                    if (!base.TRANG_BI_LAN_BAO_VAY[index].Item_troi_chat)
                                    {
                                          if ((((base.TRANG_BI_LAN_BAO_VAY[index].GetItem_ID != 0x3c14dc88L) && (base.TRANG_BI_LAN_BAO_VAY[index].GetItem_ID != 0x2faf081dL)) && ((base.TRANG_BI_LAN_BAO_VAY[index].GetItem_ID != 0x2faf0805L) && (base.TRANG_BI_LAN_BAO_VAY[index].GetItem_ID != 0x2faf0804L))) && (base.TRANG_BI_LAN_BAO_VAY[index].GetItem_ID != 0x2faf0803L))
                                          {
                                                base.GameMessage("Please do not put into the lucky charm other items", 9, "system hint");
                                                this.HOP_THANH_NHAC_NHO(num, 2, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                          }
                                          else if (this.HOP_THANH_VAT_PHAM_BIEU_MAU.Count > 0)
                                          {
                                                if (!this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(1))
                                                {
                                                      base.GameMessage("Please put synthetic materials", 9, "system hint");
                                                      this.HOP_THANH_NHAC_NHO(num, 2, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                                }
                                                else
                                                {
                                                      HcItimesClass class139 = null;
                                                      HcItimesClass class140 = new HcItimesClass();
                                                      if (this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(2))
                                                      {
                                                            class139 = this.HOP_THANH_VAT_PHAM_BIEU_MAU[2];
                                                      }
                                                      if (base.TRANG_BI_LAN_BAO_VAY[class139.VI_TRI].FLD_cuong_hoa_so_luong < 7)
                                                      {
                                                            this.HOP_THANH_NHAC_NHO(num, 2, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                                      }
                                                      else
                                                      {
                                                            class140.VI_TRI = index;
                                                            class140.VAT_PHAM = base.TRANG_BI_LAN_BAO_VAY[index].Item_byte;
                                                            base.TRANG_BI_LAN_BAO_VAY[index].bool_0 = true;
                                                            if (!this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(3))
                                                            {
                                                                  this.HOP_THANH_VAT_PHAM_BIEU_MAU.Add(3, class140);
                                                            }
                                                            this.HOP_THANH_NHAC_NHO(num, 1, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                                                      }
                                                }
                                          }
                                    }
                                    return;
                              }
                              catch (Exception exception78)
                              {
                                    this.NGUYEN_BAO_HOP_THANH_MO_RA = 0;
                                    Form1.WriteLine(1, "合成系统 披风组合 214 出错![" + base.Userid + "]-[" + base.UserName + "]" + exception78.Message);
                                    return;
                              }
                              Label_E8D6:;
                              try
                              {
                                    TBL_XWWL_ITEM tbl_xwwl_item31;
                                    if (this.HOP_THANH_VAT_PHAM_BIEU_MAU.Count <= 0)
                                    {
                                          return;
                                    }
                                    HcItimesClass class141 = null;
                                    HcItimesClass class142 = null;
                                    HcItimesClass class143 = null;
                                    if (this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(2))
                                    {
                                          class141 = this.HOP_THANH_VAT_PHAM_BIEU_MAU[2];
                                    }
                                    if (this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(1))
                                    {
                                          class142 = this.HOP_THANH_VAT_PHAM_BIEU_MAU[1];
                                    }
                                    if (this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(3))
                                    {
                                          class143 = this.HOP_THANH_VAT_PHAM_BIEU_MAU[3];
                                    }
                                    if (((((class141 == null) || (BitConverter.ToInt64(base.TRANG_BI_LAN_BAO_VAY[class141.VI_TRI].Item_toan_bo_ID, 0) != BitConverter.ToInt64(class141.Item_toan_bo_ID, 0))) || (BitConverter.ToInt64(base.TRANG_BI_LAN_BAO_VAY[class142.VI_TRI].Item_toan_bo_ID, 0) != BitConverter.ToInt64(class142.Item_toan_bo_ID, 0))) || ((class143 != null) && (BitConverter.ToInt64(base.TRANG_BI_LAN_BAO_VAY[class143.VI_TRI].Item_toan_bo_ID, 0) != BitConverter.ToInt64(class143.Item_toan_bo_ID, 0)))) || !World.Itme.TryGetValue(BitConverter.ToInt32(class141.VAT_PHAMid, 0), out tbl_xwwl_item31))
                                    {
                                          return;
                                    }
                                    if (base.TRANG_BI_LAN_BAO_VAY[class141.VI_TRI].Item_troi_chat)
                                    {
                                          this.HOP_THANH_NHAC_NHO(num, 2, 0, base.TRANG_BI_LAN_BAO_VAY[class141.VI_TRI]);
                                          return;
                                    }
                                    Random random1 = new Random();
                                    double num68 = random1.Next(0, 100);
                                    double num69 = random1.Next(0, 100);
                                    if (class143 != null)
                                    {
                                          num4 = BitConverter.ToInt32(class143.VAT_PHAMid, 0);
                                          switch (num4)
                                          {
                                                case 0x2faf0803:
                                                      num68 += 5.0;
                                                      goto Label_EB2A;

                                                case 0x2faf0804:
                                                      num68 += 10.0;
                                                      goto Label_EB2A;

                                                case 0x2faf0805:
                                                      num68 += 15.0;
                                                      goto Label_EB2A;
                                          }
                                          if (num4 == 0x2faf081d)
                                          {
                                                num68 += 20.0;
                                          }
                                    }
                                    Label_EB2A:
                                    if (base.FLD_trang_bi_them_vao_hop_thanh_ty_le_thanh_cong_ti_le_phan_tram != 0.0)
                                    {
                                          num68 += 100.0 * base.FLD_trang_bi_them_vao_hop_thanh_ty_le_thanh_cong_ti_le_phan_tram;
                                    }
                                    if (base.dictionary_3.ContainsKey(0x3c14dd38))
                                    {
                                          num68 += 10.0;
                                    }
                                    if (this.NGUYEN_BAO_HOP_THANH_MO_RA == 1)
                                    {
                                          num68 += 5.0;
                                    }
                                    if (base.FLD_VIP == 1)
                                    {
                                          num68 += 100.0 * World.VIP_Hop_thanh_xac_xuat;
                                    }
                                    if (World.Hop_thanh_xac_xuat != 0.0)
                                    {
                                          num68 += 100.0 * World.Hop_thanh_xac_xuat;
                                    }
                                    if (num68 >= num69)
                                    {
                                          if (base.FLD_VIP == 1)
                                          {
                                                base.GameMessage("Congratulations, VIP customers improve synthesis rate" + (World.VIP_Hop_thanh_xac_xuat * 100.0) + "%", 9, "system hint");
                                          }
                                    }
                                    else
                                    {
                                          base.GameMessage("VIP user can increase the synthesis rate" + (World.VIP_Hop_thanh_xac_xuat * 100.0) + "%", 9, "system hint 13");
                                          Buffer.BlockCopy(BitConverter.GetBytes(0), 0, dst, 13, 4);
                                    }
                                    Buffer.BlockCopy(buffer, 0, dst, 11, 2);
                                    Buffer.BlockCopy(BitConverter.GetBytes(index), 0, dst, 0x1b, 4);
                                    this.LAM_GIAM_DI_VAT_PHAM(class142.VI_TRI, 1);
                                    if (class143 != null)
                                    {
                                          this.LAM_GIAM_DI_VAT_PHAM(class143.VI_TRI, 1);
                                    }
                                    if (((BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[class141.VI_TRI].VAT_PHAM_ID, 0) != 0) && (BitConverter.ToInt64(base.TRANG_BI_LAN_BAO_VAY[class141.VI_TRI].Item_toan_bo_ID, 0) == BitConverter.ToInt64(class141.Item_toan_bo_ID, 0))) && (num68 >= num69))
                                    {
                                          int num70 = BitConverter.ToInt32(class141.VAT_PHAMid, 0) + 1;
                                          this.LAM_GIAM_DI_VAT_PHAM(class141.VI_TRI, 1);
                                          this.TANG_CUONG_VAT_PHAM(class141.Item_toan_bo_ID, BitConverter.GetBytes(num70), class141.VI_TRI, class141.VAT_PHAM_SO_LUONG, class141.Item_thuoc_tinh);
                                    }
                                    base.TRANG_BI_LAN_BAO_VAY[class141.VI_TRI].bool_0 = false;
                                    this.HOP_THANH_VAT_PHAM_BIEU_MAU.Clear();
                                    this.HOP_THANH_HE_THONG_TACH_RA_SAI();
                                    this.NGUYEN_BAO_HOP_THANH_MO_RA = 0;
                              }
                              catch (Exception exception79)
                              {
                                    this.NGUYEN_BAO_HOP_THANH_MO_RA = 0;
                                    Form1.WriteLine(1, "合成系统 合成属性阶段 合成 出错![" + base.Userid + "]-[" + base.UserName + "]" + exception79.Message);
                                    return;
                              }
                              Label_EE18:
                              if (num != 0)
                              {
                                    Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, dst, 5, 2);
                                    if (base.Client != null)
                                    {
                                          base.Client.method_8(dst, dst.Length);
                                    }
                              }
                        }
                        catch (Exception exception80)
                        {
                              this.NGUYEN_BAO_HOP_THANH_MO_RA = 0;
                              Form1.WriteLine(1, string.Concat(new object[] { "合成系统出错![", base.Userid, "]-[", base.UserName, "][", num, "]", exception80.Message }));
                        }
                  }
            }

            private void EnterExitPremShop(byte[] byte_5, int int_128)
            {
                  this.Packet_Modify(byte_5, int_128);
                  int num = BitConverter.ToInt32(byte_5, 12);
                  switch (byte_5[11])
                  {
                        case 1:
                              try
                              {
                                    if (base.OpenWarehouse)
                                    {
                                          this.TIEN_VAO_CUA_HANG_TAC_DUNG_GOI(1, 14, num, 0, null, null);
                                    }
                                    else
                                    {
                                          Players players = base.Get_char_data(num);
                                          if (((players != null) && (players.PlayerShop.int_0 == 2)) && ((players.PlayerShop != null) && players.PlayerShop.PersonStore_Open))
                                          {
                                                if (!this.TRA_TIM_PHAM_VI_NGUOI_CHOI(40, players))
                                                {
                                                      this.TIEN_VAO_CUA_HANG_TAC_DUNG_GOI(1, 12, num, 0, null, null);
                                                }
                                                else if (players.PlayerShop.CA_NHAN_CUA_HANG_CO_HAY_KHONG_SU_DUNG_BEN_TRONG)
                                                {
                                                      this.TIEN_VAO_CUA_HANG_TAC_DUNG_GOI(1, 13, num, 0, null, null);
                                                }
                                                else
                                                {
                                                      players.PlayerShop.CA_NHAN_CUA_HANG_CO_HAY_KHONG_SU_DUNG_BEN_TRONG = true;
                                                      players.PlayerShop.class15_0 = this;
                                                      base.bool_5 = true;
                                                      base.int_0 = num;
                                                      base.OpenWarehouse = true;
                                                      this.TIEN_VAO_CUA_HANG_TAC_DUNG_GOI(1, 1, players.UserSessionID, 0, players.PlayerShop.CUA_HANG_TEN, players.PlayerShop.CUA_HANG_ITEM_DANH_SACH);
                                                      players.TIEN_VAO_CUA_HANG_TAC_DUNG_GOI(1, 1, players.UserSessionID, base.UserSessionID, null, null);
                                                }
                                          }
                                    }
                              }
                              catch (Exception exception)
                              {
                                    Form1.WriteLine(1, string.Concat(new object[] { "Ingot into individual shops 1 error", base.Client.int_3, "|", base.Client.ToString(), " ", exception }));
                              }
                              break;

                        case 2:
                              try
                              {
                                    object[] objArray6;
                                    CA_NHAN_CUA_HANG_ITEM_LOAI ca_nhan_cua_hang_item_loai;
                                    VAT_PHAM_LOAI vat_pham_loai;
                                    int num3 = BitConverter.ToInt32(byte_5, 0x10);
                                    long key = BitConverter.ToInt64(byte_5, 0x18);
                                    int num5 = BitConverter.ToInt16(byte_5, 0x20);
                                    Players players2 = base.Get_char_data(num);
                                    if (((players2 == null) || !players2.OpenWarehouse) || !players2.PlayerShop.CUA_HANG_ITEM_DANH_SACH.TryGetValue(key, out ca_nhan_cua_hang_item_loai))
                                    {
                                          break;
                                    }
                                    int num6 = base.DUOC_KIEN_HANG_RONG(this);
                                    if (num6 == -1)
                                    {
                                          this.TIEN_VAO_CUA_HANG_TAC_DUNG_GOI(2, 0x18, num, 0, null, null);
                                          break;
                                    }
                                    if (((num5 > ca_nhan_cua_hang_item_loai.class23_0.Get_VAT_PHAM_SO_LUONG) || (ca_nhan_cua_hang_item_loai.class23_0.Get_VAT_PHAM_SO_LUONG < 0)) || (num5 < 0))
                                    {
                                          goto Label_0A47;
                                    }
                                    if (BitConverter.ToInt32(players2.TRANG_BI_LAN_BAO_VAY[ca_nhan_cua_hang_item_loai.int_1].VAT_PHAM_ID, 0) == 0)
                                    {
                                          this.TIEN_VAO_CUA_HANG_TAC_DUNG_GOI(2, 0x15, num, 0, null, null);
                                          break;
                                    }
                                    if (BitConverter.ToInt64(players2.TRANG_BI_LAN_BAO_VAY[ca_nhan_cua_hang_item_loai.int_1].Item_toan_bo_ID, 0) != key)
                                    {
                                          this.TIEN_VAO_CUA_HANG_TAC_DUNG_GOI(2, 0x15, num, 0, null, null);
                                          break;
                                    }
                                    if (BitConverter.ToInt32(players2.TRANG_BI_LAN_BAO_VAY[ca_nhan_cua_hang_item_loai.int_1].VAT_PHAM_ID, 0) != num3)
                                    {
                                          this.TIEN_VAO_CUA_HANG_TAC_DUNG_GOI(2, 0x15, num, 0, null, null);
                                          break;
                                    }
                                    if (key == 0)
                                    {
                                          this.TIEN_VAO_CUA_HANG_TAC_DUNG_GOI(2, 0x15, num, 0, null, null);
                                          break;
                                    }
                                    if (base.FLD_RXPIONT < (ca_nhan_cua_hang_item_loai.long_0 * num5))
                                    {
                                          this.TIEN_VAO_CUA_HANG_TAC_DUNG_GOI(2, 0x16, num, 0, null, null);
                                          break;
                                    }
                                    switch (num3)
                                    {
                                          case 0x2faf080b:
                                          case 0x2faf080c:
                                          case 0x2faf080d:
                                          case 0x2faf0802:
                                          case 0x2faf0801:
                                          case 0x2faf0817:
                                          case 0x2faf0818:
                                          case 0x2faf0819:
                                          case 0x2faf081a:
                                          case 0x2faf081b:
                                          case 0x2faf081c:
                                          case 0x2faf083d:
                                          case 0x2faf083e:
                                                break;

                                          default:
                                                vat_pham_loai = base.NHAN_NHAN_VAT_ITEM_TOAN_BO_ID(players2, key);
                                                goto Label_037C;
                                    }
                                    vat_pham_loai = base.UNKNOWN_107(players2, key, ca_nhan_cua_hang_item_loai.class23_0.FLD_MAGIC0);
                                    Label_037C:
                                    if (vat_pham_loai != null)
                                    {
                                          if (BitConverter.ToInt32(vat_pham_loai.VAT_PHAM_SO_LUONG, 0) < ca_nhan_cua_hang_item_loai.int_0)
                                          {
                                                Form1.WriteLine(6, string.Concat(new object[] { "Illegal copying_Ingot personal store_Into the store1[", base.Userid, "]-[", base.UserName, "]VAT_PHAM名称[", vat_pham_loai.method_13(), "] VAT_PHAM_SO_LUONG[", BitConverter.ToInt32(vat_pham_loai.VAT_PHAM_SO_LUONG, 0), "] 数量[", ca_nhan_cua_hang_item_loai.int_0, "]" }));
                                          }
                                          else if ((World.Itme[BitConverter.ToInt32(vat_pham_loai.VAT_PHAM_ID, 0)].FLD_SIDE == 0) && (BitConverter.ToInt32(vat_pham_loai.VAT_PHAM_SO_LUONG, 0) > 1))
                                          {
                                                Form1.WriteLine(6, string.Concat(new object[] { "非法复制_元宝个人商店_进店2[", base.Userid, "]-[", base.UserName, "]VAT_PHAM名称[", vat_pham_loai.method_13(), "] VAT_PHAM_SO_LUONG[", BitConverter.ToInt32(vat_pham_loai.VAT_PHAM_SO_LUONG, 0), "] 数量[", ca_nhan_cua_hang_item_loai.int_0, "]" }));
                                          }
                                          else
                                          {
                                                Form1.WriteLine(5, string.Concat(new object[] {
                                    "[", players2.Userid, "][", players2.UserName, "] 元宝个人商店买出VAT_PHAM :[", base.Userid, "][", base.UserName, "] (VAT_PHAM:", vat_pham_loai.method_13(), "/编号:", BitConverter.ToInt32(vat_pham_loai.method_5(), 0), "属性:[", vat_pham_loai.FLD_MAGIC0, ",", vat_pham_loai.FLD_MAGIC1,
                                    ",", vat_pham_loai.FLD_MAGIC2, ",", vat_pham_loai.FLD_MAGIC3, ",", vat_pham_loai.FLD_MAGIC4, "] 价格[", ca_nhan_cua_hang_item_loai.long_0, "]"
                                }));
                                                players2.KIEM_SOAT_CASH_SO_LIEU((int)(ca_nhan_cua_hang_item_loai.long_0 * num5), 1);
                                                base.KIEM_SOAT_CASH_SO_LIEU((int)(ca_nhan_cua_hang_item_loai.long_0 * num5), 0);
                                                RxjhClass.INSERT_ITEM_GHI_CHEP(players2.Userid, players2.UserName, base.Userid, base.UserName, (double)BitConverter.ToInt64(vat_pham_loai.Item_toan_bo_ID, 0), BitConverter.ToInt32(vat_pham_loai.VAT_PHAM_ID, 0), vat_pham_loai.method_13(), num5, string.Concat(new object[] { vat_pham_loai.FLD_MAGIC0, "-", vat_pham_loai.FLD_MAGIC1, "-", vat_pham_loai.FLD_MAGIC2, "-", vat_pham_loai.FLD_MAGIC3, "-", vat_pham_loai.FLD_MAGIC4, "初", vat_pham_loai.FLD_FJ_thuc_tinh, "中", vat_pham_loai.FLD_FJ_trung_cap_phu_hon, "进", vat_pham_loai.FLD_FJ_tien_hoa }), (int)(ca_nhan_cua_hang_item_loai.long_0 * num5), "元宝商店");
                                                PacketData data = new PacketData();
                                                data.method_2(2);
                                                data.method_2(2);
                                                data.Write4(num);
                                                data.method_8(ca_nhan_cua_hang_item_loai.class23_0.GetItem_ID);
                                                data.method_8(key);
                                                data.Write2(num5);
                                                data.Write2(ca_nhan_cua_hang_item_loai.int_1);
                                                data.method_8(ca_nhan_cua_hang_item_loai.long_0);
                                                data.Write4(ca_nhan_cua_hang_item_loai.class23_0.FLD_MAGIC0);
                                                data.Write4(ca_nhan_cua_hang_item_loai.class23_0.FLD_MAGIC1);
                                                data.Write4(ca_nhan_cua_hang_item_loai.class23_0.FLD_MAGIC2);
                                                data.Write4(ca_nhan_cua_hang_item_loai.class23_0.FLD_MAGIC3);
                                                data.Write4(ca_nhan_cua_hang_item_loai.class23_0.FLD_MAGIC4);
                                                data.Write2(ca_nhan_cua_hang_item_loai.class23_0.FLD_FJ_MAGIC0);
                                                data.Write2(ca_nhan_cua_hang_item_loai.class23_0.FLD_FJ_MAGIC1);
                                                data.Write2(ca_nhan_cua_hang_item_loai.class23_0.FLD_FJ_trung_cap_phu_hon);
                                                data.Write2(ca_nhan_cua_hang_item_loai.class23_0.FLD_FJ_MAGIC2);
                                                data.Write2(ca_nhan_cua_hang_item_loai.class23_0.FLD_FJ_MAGIC3);
                                                data.Write2(ca_nhan_cua_hang_item_loai.class23_0.FLD_FJ_MAGIC4);
                                                data.Write2(ca_nhan_cua_hang_item_loai.class23_0.FLD_FJ_MAGIC5);
                                                data.Write2(0);
                                                data.Write4(ca_nhan_cua_hang_item_loai.class23_0.FLD_FJ_KSSJ);
                                                data.Write4(ca_nhan_cua_hang_item_loai.class23_0.FLD_FJ_JSSJ);
                                                if (ca_nhan_cua_hang_item_loai.class23_0.FLD_keo_dai_suc_manh != 0)
                                                {
                                                      data.Write2(0);
                                                }
                                                else
                                                {
                                                      data.Write2(0);
                                                }
                                                data.Write4(ca_nhan_cua_hang_item_loai.class23_0.FLD_FJ_thuc_tinh);
                                                data.Write2(0);
                                                data.Write2(ca_nhan_cua_hang_item_loai.class23_0.FLD_FJ_tien_hoa);
                                                data.Write2(0);
                                                data.Write4(0);
                                                data.Write4(0);
                                                data.Write4(0);
                                                data.method_8(key);
                                                if (base.Client != null)
                                                {
                                                      base.Client.method_5(data, 0xf1c, base.UserSessionID, 0);
                                                }
                                                if (players2.Client != null)
                                                {
                                                      players2.Client.method_5(data, 0xf1c, base.UserSessionID, 0);
                                                }
                                                this.TANG_CUONG_VAT_PHAM(vat_pham_loai.Item_toan_bo_ID, vat_pham_loai.VAT_PHAM_ID, num6, BitConverter.GetBytes(num5), vat_pham_loai.Item_thuoc_tinh, vat_pham_loai.FLD_MAGIC0);
                                                players2.LAM_GIAM_DI_VAT_PHAM(vat_pham_loai.VAT_PHAM_VI_TRI, num5);
                                                if ((ca_nhan_cua_hang_item_loai.int_0 - num5) > 0)
                                                {
                                                      ca_nhan_cua_hang_item_loai.int_0 -= num5;
                                                }
                                                else if (players2.PlayerShop.CUA_HANG_ITEM_DANH_SACH.ContainsKey(key))
                                                {
                                                      CA_NHAN_CUA_HANG_ITEM_LOAI local1 = players2.PlayerShop.CUA_HANG_ITEM_DANH_SACH[key];
                                                      players2.PlayerShop.CUA_HANG_ITEM_DANH_SACH.Remove(key);
                                                }
                                                base.UPDATE_RXPIONT();
                                                players2.UPDATE_RXPIONT();
                                                if (players2.PlayerShop.CUA_HANG_ITEM_DANH_SACH.Count == 0)
                                                {
                                                      players2.NGUYEN_BAO_CA_NHAN_CUA_HANG_DONG_CUA();
                                                }
                                          }
                                    }
                                    else
                                    {
                                          this.TIEN_VAO_CUA_HANG_TAC_DUNG_GOI(2, 0x15, num, 0, null, null);
                                    }
                                    break;
                                    Label_0A47:
                                    objArray6 = new object[] { "非法购买_元宝个人商店_负数VAT_PHAM[", base.Userid, "]-[", base.UserName, "]VAT_PHAM名称[", ca_nhan_cua_hang_item_loai.class23_0.method_13(), "] VAT_PHAM_SO_LUONG[", ca_nhan_cua_hang_item_loai.class23_0.Get_VAT_PHAM_SO_LUONG, "]" };
                                    Form1.WriteLine(0x4d, string.Concat(objArray6));
                                    this.TIEN_VAO_CUA_HANG_TAC_DUNG_GOI(2, 0x15, num, 0, null, null);
                              }
                              catch (Exception exception2)
                              {
                                    Form1.WriteLine(1, string.Concat(new object[] { "进元宝个人商店 2 出错", base.Client.int_3, "|", base.Client.ToString(), " ", exception2 }));
                              }
                              break;

                        case 3:
                              try
                              {
                                    this.NGUYEN_BAO_CA_NHAN_CUA_HANG_XUAT_CUA_HANG(num);
                              }
                              catch (Exception exception3)
                              {
                                    Form1.WriteLine(1, string.Concat(new object[] { "进元宝个人商店 3 出错", base.Client.int_3, "|", base.Client.ToString(), " ", exception3 }));
                              }
                              break;

                        case 4:
                              break;

                        case 5:
                              if (this.int_118 == 0)
                              {
                                    this.NGUYEN_BAO_CA_NHAN_CUA_HANG_TUAN_TRA_CO_HAY_KHONG_TONG_QUAT_BAO_GOM(0);
                                    return;
                              }
                              if (this.int_118 == 1)
                              {
                                    this.NGUYEN_BAO_CA_NHAN_CUA_HANG_TUAN_TRA_CO_HAY_KHONG_TONG_QUAT_BAO_GOM(1);
                                    return;
                              }
                              break;

                        default:
                              return;
                  }
            }

            public void Exit(byte[] byte_5, int int_128)
            {
                  Form1.WriteLine(4, "LogOut");
                  //Save_Char_data_Stored();
                  this.Packet_Modify(byte_5, int_128);
                  this.bool_14 = false;
                  base.Exiting = true;
                  this.Players_Logout();
                  byte[] dst = Converter.hexStringToByte("AA55390001840404002A00010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000664B55AA");
                  byte[] src = new byte[base.Userid.Length];
                  src = Encoding.Default.GetBytes(base.Userid);
                  Buffer.BlockCopy(src, 0, dst, 0x21, src.Length);
                  Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, dst, 5, 2);
                  if (base.Client != null)
                  {
                        base.Client.Send(dst, dst.Length);
                  }
                  if (base.Client != null)
                  {
                        base.Client.Dispose();
                  }
            }

            ~Players()
            {
                  this.Dispose(false);
            }

            public void Force_Warfare_System(byte[] data, int length)
            {
                  try
                  {
                        this.Packet_Modify(data, length);
                        byte[] dst = Converter.hexStringToByte("AA552F00012C0114222000020001000B000000010000000000000000000000000000000000000000000000000000000000000055AA");
                        byte[] buffer2 = new byte[2];
                        byte[] buffer3 = new byte[2];
                        Buffer.BlockCopy(data, 11, buffer2, 0, 2);
                        Buffer.BlockCopy(data, 0x13, buffer3, 0, 2);
                        int num = BitConverter.ToInt16(buffer2, 0);
                        int num2 = BitConverter.ToInt16(buffer3, 0);
                        switch (num)
                        {
                              case 1:
                                    if (num2 != 1)
                                    {
                                          goto Label_041E;
                                    }
                                    if (World.eve != null)
                                    {
                                          switch (BitConverter.ToInt16(buffer3, 0))
                                          {
                                                case 2:
                                                      goto Label_0110;
                                          }
                                    }
                                    goto Label_046F;

                              case 2:
                                    if (num2 != 1)
                                    {
                                          goto Label_0454;
                                    }
                                    if (World.eve != null)
                                    {
                                          if (base.Player_FLD_JOB_LEVEL < 2)
                                          {
                                                goto Label_0440;
                                          }
                                          switch (BitConverter.ToInt16(buffer3, 0))
                                          {
                                                case 1:
                                                      goto Label_01BF;

                                                case 2:
                                                      goto Label_0238;
                                          }
                                    }
                                    goto Label_046F;

                              case 3:
                              case 4:
                                    switch (BitConverter.ToInt16(buffer3, 0))
                                    {
                                          case 1:
                                                goto Label_02C9;

                                          case 2:
                                                goto Label_0342;
                                    }
                                    goto Label_046F;

                              case 11:
                                    if ((BitConverter.ToInt16(buffer3, 0) == 1) && (base.Evil_mode == 1))
                                    {
                                          this.Move(497f, 1582f, 15f, 0x65);
                                          base.NHAN_VAT_HP = base.NHAN_VAT_LON_NHAT_HP;
                                          this.UpdateHP_MP_SP();
                                          base.PlayerIsDead = false;
                                    }
                                    goto Label_046F;

                              default:
                                    Buffer.BlockCopy(buffer2, 0, dst, 11, 2);
                                    Buffer.BlockCopy(buffer2, 0, dst, 15, 2);
                                    goto Label_046F;
                        }
                        if (base.Player_Zx == 1)
                        {
                              this.Move(545f, 0f, 15f, 0x321);
                              base.NHAN_VAT_HP = base.NHAN_VAT_LON_NHAT_HP;
                              this.UpdateHP_MP_SP();
                              base.PlayerIsDead = false;
                        }
                        else
                        {
                              this.Move(-565f, 0f, 15f, 0x321);
                              base.NHAN_VAT_HP = base.NHAN_VAT_LON_NHAT_HP;
                              this.UpdateHP_MP_SP();
                              base.PlayerIsDead = false;
                        }
                        goto Label_046F;
                        Label_0110:
                        if (base.Player_Zx == 1)
                        {
                              this.Move(545f, 0f, 15f, 0x321);
                              base.NHAN_VAT_HP = base.NHAN_VAT_LON_NHAT_HP;
                              this.UpdateHP_MP_SP();
                              base.PlayerIsDead = false;
                        }
                        else
                        {
                              this.Move(-565f, 0f, 15f, 0x321);
                              base.NHAN_VAT_HP = base.NHAN_VAT_LON_NHAT_HP;
                              this.UpdateHP_MP_SP();
                              base.PlayerIsDead = false;
                        }
                        goto Label_046F;
                        Label_01BF:
                        if (base.Player_Zx == 1)
                        {
                              this.Move(545f, 0f, 15f, 0x321);
                              base.NHAN_VAT_HP = base.NHAN_VAT_LON_NHAT_HP;
                              this.UpdateHP_MP_SP();
                              base.PlayerIsDead = false;
                        }
                        else
                        {
                              this.Move(-565f, 0f, 15f, 0x321);
                              base.NHAN_VAT_HP = base.NHAN_VAT_LON_NHAT_HP;
                              this.UpdateHP_MP_SP();
                              base.PlayerIsDead = false;
                        }
                        goto Label_046F;
                        Label_0238:
                        if (base.Player_Zx == 1)
                        {
                              this.Move(545f, 0f, 15f, 0x321);
                              base.NHAN_VAT_HP = base.NHAN_VAT_LON_NHAT_HP;
                              this.UpdateHP_MP_SP();
                              base.PlayerIsDead = false;
                        }
                        else
                        {
                              this.Move(-565f, 0f, 15f, 0x321);
                              base.NHAN_VAT_HP = base.NHAN_VAT_LON_NHAT_HP;
                              this.UpdateHP_MP_SP();
                              base.PlayerIsDead = false;
                        }
                        goto Label_046F;
                        Label_02C9:
                        if (base.Player_Zx == 1)
                        {
                              this.Move(545f, 0f, 15f, 0x321);
                              base.NHAN_VAT_HP = base.NHAN_VAT_LON_NHAT_HP;
                              this.UpdateHP_MP_SP();
                              base.PlayerIsDead = false;
                        }
                        else
                        {
                              this.Move(-565f, 0f, 15f, 0x321);
                              base.NHAN_VAT_HP = base.NHAN_VAT_LON_NHAT_HP;
                              this.UpdateHP_MP_SP();
                              base.PlayerIsDead = false;
                        }
                        goto Label_046F;
                        Label_0342:
                        if (base.Player_Zx == 1)
                        {
                              this.Move(545f, 0f, 15f, 0x321);
                              base.NHAN_VAT_HP = base.NHAN_VAT_LON_NHAT_HP;
                              this.UpdateHP_MP_SP();
                              base.PlayerIsDead = false;
                        }
                        else
                        {
                              this.Move(-565f, 0f, 15f, 0x321);
                              base.NHAN_VAT_HP = base.NHAN_VAT_LON_NHAT_HP;
                              this.UpdateHP_MP_SP();
                              base.PlayerIsDead = false;
                        }
                        goto Label_046F;
                        Label_041E:
                        if (num2 != 0)
                        {
                              goto Label_046F;
                        }
                        base.int_17 = 1;
                        base.GameMessage("TEST4，You will not be able to attend.", 50, "");
                        return;
                        Label_0440:
                        base.GameMessage("TEST5.", 50, "");
                        goto Label_046F;
                        Label_0454:
                        base.int_17 = 1;
                        base.GameMessage("TEST6, You will not be able to attend.", 50, "");
                        return;
                        Label_046F:
                        Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, dst, 5, 2);
                        if (base.Client != null)
                        {
                              base.Client.Send(dst, dst.Length);
                        }
                  }
                  catch (Exception exception)
                  {
                        Form1.WriteLine(1, " 出错 [" + base.Userid + "][" + base.UserName + "] " + exception.Message);
                  }
            }

            public int GET_NHIEM_VU_GIAI_DOAN(int int_128)
            {
                  NHIEM_VU_CLASS nhiem_vu_class;
                  if (base.dictionary_2.TryGetValue(int_128, out nhiem_vu_class))
                  {
                        return nhiem_vu_class.NHIEM_VU_GIAI_DOAN_ID;
                  }
                  return 0;
            }

            public Players GetPlayerThis()
            {
                  return this;
            }

            public void GIA_NHAP_BANG(byte[] byte_5, int int_128)
            {
                  try
                  {
                        byte[] buffer;
                        int num;
                        string str;
                        int num2;
                        int num3;
                        byte[] buffer2;
                        int num4;
                        string str2;
                        this.Packet_Modify(byte_5, int_128);
                        byte[] dst = new byte[4];
                        Buffer.BlockCopy(byte_5, 0x1c, dst, 0, 1);
                        switch (BitConverter.ToInt32(dst, 0))
                        {
                              case 1:
                                    buffer = new byte[20];
                                    num = 0;
                                    goto Label_0214;

                              case 2:
                                    {
                                          byte[] buffer4 = new byte[4];
                                          Buffer.BlockCopy(byte_5, 11, buffer4, 0, 2);
                                          num2 = BitConverter.ToInt32(buffer4, 0);
                                          byte[] buffer5 = new byte[4];
                                          Buffer.BlockCopy(byte_5, 0x1d, buffer5, 0, 1);
                                          num3 = BitConverter.ToInt32(buffer5, 0);
                                          if (num3 != 0x17)
                                          {
                                                goto Label_0363;
                                          }
                                          byte[] buffer6 = Converter.hexStringToByte("AA553100010A00E80022000B000000000000000000000000000000000217BDD600000000000000000000000000000000000000000055AA");
                                          byte[] bytes = Encoding.Default.GetBytes(base.UserName);
                                          Buffer.BlockCopy(bytes, 0, buffer6, 30, bytes.Length);
                                          Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, buffer6, 5, 2);
                                          Players players2 = base.Get_char_data(num2);
                                          if (players2 != null)
                                          {
                                                Buffer.BlockCopy(BitConverter.GetBytes(players2.UserSessionID), 0, buffer6, 11, 2);
                                                if (players2.Client != null)
                                                {
                                                      players2.Client.Send(buffer6, buffer6.Length);
                                                }
                                          }
                                          if (base.Client != null)
                                          {
                                                base.Client.Send(buffer6, buffer6.Length);
                                          }
                                          return;
                                    }
                              case 3:
                                    {
                                          byte[] buffer8 = Converter.hexStringToByte("AA553100010B00E80022000000000000000000000000000000000000031F000000000000000000000000000000000000000000000055AA");
                                          Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, buffer8, 5, 2);
                                          if (base.Client != null)
                                          {
                                                base.Client.Send(buffer8, buffer8.Length);
                                          }
                                          byte[] src = Encoding.Default.GetBytes(base.UserName);
                                          Buffer.BlockCopy(src, 0, buffer8, 30, src.Length);
                                          string guildName = base.GuildName;
                                          RxjhClass.EXE_XWWL_Out_Guild_DATA(base.UserName);
                                          base.DOC_SO_LIEU_BANG_PHAI();
                                          Buffer.BlockCopy(BitConverter.GetBytes(4), 0, buffer8, 0x1c, 1);
                                          base.UNKNOWN_97(guildName, buffer8, buffer8.Length);
                                          base.LAN_DAU_DOI_THOAI_DA_TRANG_BI_VAT_PHAM();
                                          this.DI_CHUYEN_KHOANG_CACH_TRUOC_BAN_DO(base.CharacterCoords_Map);
                                          this.BAT_GIU_KIEM_TRA_LAI_PHAM_VI_NGUOI_CHOI();
                                          return;
                                    }
                              case 4:
                                    buffer2 = new byte[20];
                                    num4 = 0;
                                    goto Label_0550;

                              default:
                                    return;
                        }
                        Label_01FF:
                        if (byte_5[30 + num] == 0)
                        {
                              goto Label_0219;
                        }
                        buffer[num] = byte_5[30 + num];
                        num++;
                        Label_0214:
                        if (num < 20)
                        {
                              goto Label_01FF;
                        }
                        Label_0219:
                        str = Encoding.Default.GetString(buffer).Replace("\0", "");
                        Players players = base.Get_Char_Data(str);
                        if (players != null)
                        {
                              byte[] buffer10 = Converter.hexStringToByte("AA553100012A03E80022003103400000000000000000000000000000010AC0B600000000000000000000000000000000000000000055AA");
                              byte[] buffer11 = Encoding.Default.GetBytes(base.GuildName);
                              Buffer.BlockCopy(buffer11, 0, buffer10, 13, buffer11.Length);
                              byte[] buffer12 = Encoding.Default.GetBytes(players.UserName);
                              Buffer.BlockCopy(buffer12, 0, buffer10, 30, buffer12.Length);
                              Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, buffer10, 5, 2);
                              Buffer.BlockCopy(BitConverter.GetBytes(players.UserSessionID), 0, buffer10, 11, 2);
                              if (RxjhClass.SELECT_ALL_TBL_XWWL_GuildMember(base.GuildName).Rows.Count >= 70)
                              {
                                    Buffer.BlockCopy(BitConverter.GetBytes(0x10), 0, buffer10, 0x1d, 1);
                              }
                              else if (players.Player_FLD_LEVEL >= 0x23)
                              {
                                    if (players.Bang_phai_Id != 0)
                                    {
                                          Buffer.BlockCopy(BitConverter.GetBytes(0x11), 0, buffer10, 0x1d, 1);
                                    }
                                    else if (players.Client != null)
                                    {
                                          players.Client.Send(buffer10, buffer10.Length);
                                    }
                              }
                              else
                              {
                                    Buffer.BlockCopy(BitConverter.GetBytes(0x10), 0, buffer10, 0x1d, 1);
                              }
                              if (base.Client != null)
                              {
                                    base.Client.Send(buffer10, buffer10.Length);
                              }
                        }
                        return;
                        Label_0363:
                        if (num3 != 0x15)
                        {
                              if (num3 == 0x16)
                              {
                                    byte[] buffer13 = Converter.hexStringToByte("AA553100010A00E80022000B00CC00000000000000000000000000000216617300000000000000000000000000000000000000000055AA");
                                    byte[] buffer14 = Encoding.Default.GetBytes(base.UserName);
                                    Buffer.BlockCopy(buffer14, 0, buffer13, 30, buffer14.Length);
                                    Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, buffer13, 5, 2);
                                    Players players3 = base.Get_char_data(num2);
                                    if (players3 != null)
                                    {
                                          byte[] buffer15 = Encoding.Default.GetBytes(players3.GuildName);
                                          Buffer.BlockCopy(buffer15, 0, buffer13, 13, buffer15.Length);
                                          Buffer.BlockCopy(BitConverter.GetBytes(players3.UserSessionID), 0, buffer13, 11, 2);
                                          if (players3.Client != null)
                                          {
                                                players3.Client.Send(buffer13, buffer13.Length);
                                          }
                                    }
                                    if (base.Client != null)
                                    {
                                          base.Client.Send(buffer13, buffer13.Length);
                                    }
                              }
                        }
                        else
                        {
                              byte[] buffer16 = Converter.hexStringToByte("AA553100012A03E80022002A034400000000000000000000000000000215C0B600000000000000000000000000000000000000000055AA");
                              byte[] buffer17 = Encoding.Default.GetBytes(base.UserName);
                              Buffer.BlockCopy(buffer17, 0, buffer16, 30, buffer17.Length);
                              Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, buffer16, 5, 2);
                              Players players4 = base.Get_char_data(num2);
                              if (players4 != null)
                              {
                                    byte[] buffer18 = Encoding.Default.GetBytes(players4.GuildName);
                                    Buffer.BlockCopy(buffer18, 0, buffer16, 13, buffer18.Length);
                                    Buffer.BlockCopy(BitConverter.GetBytes(players4.UserSessionID), 0, buffer16, 11, 2);
                                    if (players4.Client != null)
                                    {
                                          players4.Client.Send(buffer16, buffer16.Length);
                                    }
                                    RxjhClass.EXE_XWWL_JR_Guild_DATA_New(base.UserName, players4.GuildName, base.Player_FLD_LEVEL);
                              }
                              if (base.Client != null)
                              {
                                    base.Client.Send(buffer16, buffer16.Length);
                              }
                              base.DOC_SO_LIEU_BANG_PHAI();
                              base.LAN_DAU_DOI_THOAI_DA_TRANG_BI_VAT_PHAM();
                              this.DI_CHUYEN_KHOANG_CACH_TRUOC_BAN_DO(base.CharacterCoords_Map);
                              this.BAT_GIU_KIEM_TRA_LAI_PHAM_VI_NGUOI_CHOI();
                        }
                        return;
                        Label_0535:
                        if (byte_5[30 + num4] == 0)
                        {
                              goto Label_0556;
                        }
                        buffer2[num4] = byte_5[30 + num4];
                        num4++;
                        Label_0550:
                        if (num4 < 20)
                        {
                              goto Label_0535;
                        }
                        Label_0556:
                        str2 = Encoding.Default.GetString(buffer2).Replace("\0", "");
                        if (RxjhClass.EXE_XWWL_OutBz_Guild_DATA(str2, base.GuildName) == 0)
                        {
                              byte[] buffer19 = Converter.hexStringToByte("AA553100010A00E800220000000000000000000000000000000000000421617300000000000000000000000000000000000000000055AA");
                              byte[] buffer20 = Encoding.Default.GetBytes(str2);
                              Buffer.BlockCopy(buffer20, 0, buffer19, 30, buffer20.Length);
                              base.UNKNOWN_97(base.GuildName, buffer19, buffer19.Length);
                              Players players5 = base.Get_Char_Data(str2);
                              if (players5 != null)
                              {
                                    players5.DOC_SO_LIEU_BANG_PHAI();
                                    players5.LAN_DAU_DOI_THOAI_DA_TRANG_BI_VAT_PHAM();
                                    players5.DI_CHUYEN_KHOANG_CACH_TRUOC_BAN_DO(base.CharacterCoords_Map);
                                    players5.BAT_GIU_KIEM_TRA_LAI_PHAM_VI_NGUOI_CHOI();
                              }
                        }
                  }
                  catch (Exception exception)
                  {
                        Form1.WriteLine(1, "Join martial Error![" + base.Userid + "]-[" + base.UserName + "]" + exception.Message);
                  }
            }

            public void GIA_NHAP_TO_DOI_NHAC_NHO(Players class15_0)
            {
                  byte[] dst = Converter.hexStringToByte("AA552600000100350017000100010002000000000000000000000000000000000000000000000000000055AA");
                  Buffer.BlockCopy(BitConverter.GetBytes(class15_0.UserSessionID), 0, dst, 15, 2);
                  byte[] bytes = Encoding.Default.GetBytes(class15_0.UserName);
                  Buffer.BlockCopy(bytes, 0, dst, 0x11, bytes.Length);
                  Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, dst, 5, 2);
                  if (base.Client != null)
                  {
                        base.Client.Send(dst, dst.Length);
                  }
            }

            public void GIAI_TAN_TO_DOI_NHAC_NHO()
            {
                  if (World.jlMsg == 1)
                  {
                        Form1.WriteLine(0, "Players_解散组队提示");
                  }
                  byte[] dst = Converter.hexStringToByte("AA5513000000003700040003000200000000000000000055AA");
                  Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, dst, 5, 2);
                  if (base.Client != null)
                  {
                        base.Client.Send(dst, dst.Length);
                  }
            }

            public void GIAO_DICH_CHUYEN_DO_VAT(byte[] byte_5, int int_128)
            {
                  if (!base.OpenWarehouse)
                  {
                        Form1.WriteLine(6, "交易放东西 BUG![" + base.Userid + "]-[" + base.UserName + "]");
                  }
                  else
                  {
                        try
                        {
                              this.Packet_Modify(byte_5, int_128);
                              byte[] dst = new byte[0x49];
                              byte[] buffer2 = new byte[8];
                              byte[] buffer3 = new byte[4];
                              byte[] buffer4 = new byte[8];
                              Buffer.BlockCopy(byte_5, 0x17, dst, 0, 0x10);
                              Buffer.BlockCopy(byte_5, 0x2b, dst, 0x10, 0x38);
                              Buffer.BlockCopy(byte_5, 0x17, buffer2, 0, 8);
                              Buffer.BlockCopy(byte_5, 0x23, buffer3, 0, 4);
                              Buffer.BlockCopy(byte_5, 0x2b, buffer4, 0, 8);
                              if (!World.smethod_18(BitConverter.ToInt32(buffer3, 0)))
                              {
                                    if (BitConverter.ToInt32(buffer3, 0) == 0x77359400)
                                    {
                                          if ((BitConverter.ToInt64(buffer4, 0) + base.class66_0.long_0) <= base.Player_Money)
                                          {
                                                long num = BitConverter.ToInt64(buffer4, 0);
                                                if ((base.class66_0.GIAO_DICH_CON_NGUOI.Player_Money + num) > World.long_3)
                                                {
                                                      num = World.long_3 - base.class66_0.GIAO_DICH_CON_NGUOI.Player_Money;
                                                }
                                                base.class66_0.long_0 += num;
                                                byte[] buffer5 = Converter.hexStringToByte("AA556F000198009A0060000100000001000000000000000000000000000000000000000094357700000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000CD055AA");
                                                Buffer.BlockCopy(BitConverter.GetBytes(num), 0, buffer5, 0x2b, 8);
                                                Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, buffer5, 5, 2);
                                                if (base.Client != null)
                                                {
                                                      base.Client.Send(buffer5, buffer5.Length);
                                                }
                                                if (base.class66_0.GIAO_DICH_CON_NGUOI.Client != null)
                                                {
                                                      base.class66_0.GIAO_DICH_CON_NGUOI.Client.Send(buffer5, buffer5.Length);
                                                }
                                          }
                                    }
                                    else if (base.class66_0.GIAO_DICH_CON_NGUOI.NHAN_TUI_TRONG_SO_LUONG() < (base.class66_0.dictionary_0.Count + 1))
                                    {
                                          base.GameMessage("The other side has no vacancy backpack", 9, "system hint");
                                    }
                                    else if (BitConverter.ToInt64(buffer2, 0) != 0)
                                    {
                                          VAT_PHAM_LOAI vat_pham_loai = base.NHAN_NHAN_VAT_ITEM_TOAN_BO_ID(this, BitConverter.ToInt64(buffer2, 0));
                                          if (((vat_pham_loai != null) && !vat_pham_loai.Item_troi_chat) && !base.class66_0.dictionary_0.ContainsKey(BitConverter.ToInt64(buffer2, 0)))
                                          {
                                                IndividualStoreItems_Category category = new IndividualStoreItems_Category
                                                {
                                                      VAT_PHAM = vat_pham_loai,
                                                      VAT_PHAM_SO_LUONG = BitConverter.ToInt32(buffer4, 0)
                                                };
                                                base.class66_0.dictionary_0.Add(BitConverter.ToInt64(buffer2, 0), category);
                                                byte[] buffer6 = Converter.hexStringToByte("AA556F000194029A0060000100000001000000000000008716E56781832006000000000208AF2F000000000100000000000000470D0300000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000CD055AA");
                                                Buffer.BlockCopy(vat_pham_loai.Item_byte, 0, buffer6, 0x17, 8);
                                                Buffer.BlockCopy(vat_pham_loai.Item_byte, 8, buffer6, 0x23, 4);
                                                Buffer.BlockCopy(buffer4, 0, buffer6, 0x2b, 8);
                                                Buffer.BlockCopy(vat_pham_loai.Item_byte, 0x10, buffer6, 0x33, 0x38);
                                                Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, buffer6, 5, 2);
                                                if (base.Client != null)
                                                {
                                                      base.Client.Send(buffer6, buffer6.Length);
                                                }
                                                if (base.class66_0.GIAO_DICH_CON_NGUOI.Client != null)
                                                {
                                                      base.class66_0.GIAO_DICH_CON_NGUOI.Client.Send(buffer6, buffer6.Length);
                                                }
                                          }
                                    }
                              }
                        }
                        catch (Exception exception)
                        {
                              Form1.WriteLine(1, string.Concat(new object[] { "交易放东西出错 [", base.Userid, "][", base.UserName, "][", base.Client.ToString(), "] ", exception }));
                        }
                  }
            }

            public void GIAO_DICH_DAI_LOAI(byte[] byte_5, int int_128)
            {
                  try
                  {
                        this.Packet_Modify(byte_5, int_128);
                        byte[] dst = new byte[4];
                        byte[] buffer2 = new byte[4];
                        Buffer.BlockCopy(byte_5, 0x13, dst, 0, 4);
                        Buffer.BlockCopy(byte_5, 11, buffer2, 0, 4);
                        int num = BitConverter.ToInt32(dst, 0);
                        int num2 = BitConverter.ToInt32(buffer2, 0);
                        switch (num2)
                        {
                              case 1:
                                    this.GUI_DI_GIAO_DICH_THINH_CAU(num, num2);
                                    return;

                              case 2:
                                    this.TIEP_NHAN_GIAO_DICH_THINH_CAU(num, num2);
                                    return;

                              case 3:
                                    this.DOI_PHUONG_HUY_BO_YEU_CAU_GIA_NHAP(num, num2);
                                    return;

                              case 4:
                                    this.TOI_HUY_BO_GIAO_DICH_YEU_CAU(num, num2);
                                    return;

                              case 5:
                                    this.DONG_Y_CHAP_NHAN(num, num2);
                                    return;

                              case 6:
                                    this.DONG_GIAO_DICH(num, num2);
                                    return;
                        }
                  }
                  catch (Exception exception)
                  {
                        Form1.WriteLine(1, string.Concat(new object[] { "交易大类出错 [", base.Userid, "][", base.UserName, "][", base.Client.ToString(), "] ", exception }));
                  }
            }

            public void GIAO_DICH_THANH_CONG(Players class15_0)
            {
                  try
                  {
                        if (class15_0.Exiting)
                        {
                              DBA.smethod_7($"UPDATE TBL_ACCOUNT SET FLD_ZT=1 WHERE FLD_ID='{class15_0.Userid}'", "rxjhaccount");
                              Form1.WriteLine(6, "退出复制BUG11 [" + class15_0.Userid + "][" + class15_0.UserName + "][" + class15_0.Client.ToString() + "] ");
                              if (class15_0.Client != null)
                              {
                                    class15_0.Client.Dispose();
                              }
                        }
                        else if (!class15_0.OpenWarehouse)
                        {
                              Form1.WriteLine(6, "交易成功 BUG![" + class15_0.Userid + "]-[" + class15_0.UserName + "]");
                        }
                        else if (!class15_0.class66_0.GIAO_DICH_CON_NGUOI.OpenWarehouse)
                        {
                              Form1.WriteLine(6, "交易成功 BUG![" + class15_0.class66_0.GIAO_DICH_CON_NGUOI.Userid + "]-[" + class15_0.class66_0.GIAO_DICH_CON_NGUOI.UserName + "]");
                        }
                        else
                        {
                              if (class15_0.class66_0.long_0 > 0L)
                              {
                                    if (class15_0.Player_Money < class15_0.class66_0.long_0)
                                    {
                                          return;
                                    }
                                    if ((class15_0.class66_0.GIAO_DICH_CON_NGUOI.Player_Money + class15_0.class66_0.long_0) > World.long_3)
                                    {
                                          class15_0.class66_0.long_0 = World.long_3 - class15_0.class66_0.GIAO_DICH_CON_NGUOI.Player_Money;
                                    }
                                    Players players1 = class15_0.class66_0.GIAO_DICH_CON_NGUOI;
                                    players1.Player_Money += class15_0.class66_0.long_0;
                                    class15_0.class66_0.GIAO_DICH_CON_NGUOI.UpdateMoneyAndWeight();
                                    class15_0.Player_Money -= class15_0.class66_0.long_0;
                                    Form1.WriteLine(5, string.Concat(new object[] { "交易金钱 [", class15_0.Userid, "][", class15_0.UserName, "] 和[", class15_0.class66_0.GIAO_DICH_CON_NGUOI.Userid, "][", class15_0.class66_0.GIAO_DICH_CON_NGUOI.UserName, "](", class15_0.class66_0.long_0, ")" }));
                              }
                              using (Dictionary<long, IndividualStoreItems_Category>.ValueCollection.Enumerator enumerator = class15_0.class66_0.dictionary_0.Values.GetEnumerator())
                              {
                                    object[] objArray7;
                                    object[] objArray6;
                                    object[] objArray5;
                                    object[] objArray4;
                                    IndividualStoreItems_Category current;
                                    VAT_PHAM_LOAI vat_pham_loai;
                                    VAT_PHAM_LOAI vat_pham_loai2;
                                    while (enumerator.MoveNext())
                                    {
                                          TBL_XWWL_ITEM tbl_xwwl_item;
                                          int num4;
                                          current = enumerator.Current;
                                          vat_pham_loai = current.VAT_PHAM;
                                          int num = base.DUOC_KIEN_HANG_RONG(class15_0.class66_0.GIAO_DICH_CON_NGUOI);
                                          if (num == -1)
                                          {
                                                break;
                                          }
                                          long num2 = vat_pham_loai.GetItem_ID;
                                          if (num2 <= 0x2faf080dL)
                                          {
                                                if (num2 <= 0x2faf0802L)
                                                {
                                                      if (num2 < 0x2faf0801L)
                                                      {
                                                            goto Label_03C9;
                                                      }
                                                      num4 = (int)(num2 - 0x2faf0801L);
                                                      switch (num4)
                                                      {
                                                            case 0:
                                                            case 1:
                                                                  goto Label_03B3;
                                                      }
                                                }
                                                if ((num2 <= 0x2faf080dL) && (num2 >= 0x2faf080bL))
                                                {
                                                      switch (((int)(num2 - 0x2faf080bL)))
                                                      {
                                                            case 0:
                                                            case 1:
                                                            case 2:
                                                                  goto Label_03B3;
                                                      }
                                                }
                                                goto Label_03C9;
                                          }
                                          if (num2 <= 0x2faf081cL)
                                          {
                                                if (num2 < 0x2faf0817L)
                                                {
                                                      goto Label_03C9;
                                                }
                                                switch (((int)(num2 - 0x2faf0817L)))
                                                {
                                                      case 0:
                                                      case 1:
                                                      case 2:
                                                      case 3:
                                                      case 4:
                                                      case 5:
                                                            goto Label_03B3;
                                                }
                                          }
                                          if ((num2 > 0x2faf083eL) || (num2 < 0x2faf083dL))
                                          {
                                                goto Label_03C9;
                                          }
                                          num4 = (int)(num2 - 0x2faf083dL);
                                          if ((num4 != 0) && (num4 != 1))
                                          {
                                                goto Label_03C9;
                                          }
                                          Label_03B3:
                                          vat_pham_loai2 = base.UNKNOWN_107(class15_0, vat_pham_loai.GetItem_toan_bo_ID, vat_pham_loai.FLD_MAGIC0);
                                          goto Label_03D7;
                                          Label_03C9:
                                          vat_pham_loai2 = base.NHAN_NHAN_VAT_ITEM_TOAN_BO_ID(class15_0, vat_pham_loai.GetItem_toan_bo_ID);
                                          Label_03D7:
                                          if (vat_pham_loai2 == null)
                                          {
                                                goto Label_08E5;
                                          }
                                          if (!World.Itme.TryGetValue(BitConverter.ToInt32(vat_pham_loai2.VAT_PHAM_ID, 0), out tbl_xwwl_item))
                                          {
                                                break;
                                          }
                                          int num3 = tbl_xwwl_item.FLD_SIDE;
                                          if (current.VAT_PHAM_SO_LUONG < 1)
                                          {
                                                goto Label_071A;
                                          }
                                          if (current.VAT_PHAM_SO_LUONG > BitConverter.ToInt32(vat_pham_loai2.VAT_PHAM_SO_LUONG, 0))
                                          {
                                                goto Label_07B3;
                                          }
                                          if (((vat_pham_loai2.method_12() != 1) && (vat_pham_loai2.method_12() != 2)) && ((vat_pham_loai2.method_12() != 5) && (vat_pham_loai2.method_12() != 6)))
                                          {
                                                if (vat_pham_loai2.method_12() == 4)
                                                {
                                                      int num1 = vat_pham_loai2.FLD_MAGIC1;
                                                }
                                          }
                                          else
                                          {
                                                int num5 = vat_pham_loai2.FLD_MAGIC1;
                                          }
                                          Form1.WriteLine(5, string.Concat(new object[] {
                                "[", class15_0.Userid, "][", class15_0.UserName, "] 交易VAT_PHAM :[", class15_0.class66_0.GIAO_DICH_CON_NGUOI.Userid, "][", class15_0.class66_0.GIAO_DICH_CON_NGUOI.UserName, "]  VAT_PHAM:", vat_pham_loai2.method_13(), " 编号:", BitConverter.ToInt32(vat_pham_loai2.method_5(), 0), " 数量[", current.VAT_PHAM_SO_LUONG, "]  属性:[", vat_pham_loai2.FLD_MAGIC0,
                                ",", vat_pham_loai2.FLD_MAGIC1, ",", vat_pham_loai2.FLD_MAGIC2, ",", vat_pham_loai2.FLD_MAGIC3, ",", vat_pham_loai2.FLD_MAGIC4, "]"
                            }));
                                          if ((num3 == 0) && (current.VAT_PHAM_SO_LUONG > 1))
                                          {
                                                goto Label_084C;
                                          }
                                          RxjhClass.INSERT_ITEM_GHI_CHEP(class15_0.Userid, class15_0.UserName, class15_0.class66_0.GIAO_DICH_CON_NGUOI.Userid, class15_0.class66_0.GIAO_DICH_CON_NGUOI.UserName, (double)BitConverter.ToInt64(vat_pham_loai2.Item_toan_bo_ID, 0), BitConverter.ToInt32(vat_pham_loai2.VAT_PHAM_ID, 0), vat_pham_loai2.method_13(), current.VAT_PHAM_SO_LUONG, string.Concat(new object[] { vat_pham_loai2.FLD_MAGIC0, "-", vat_pham_loai2.FLD_MAGIC1, "-", vat_pham_loai2.FLD_MAGIC2, "-", vat_pham_loai2.FLD_MAGIC3, "-", vat_pham_loai2.FLD_MAGIC4, "初", vat_pham_loai2.FLD_FJ_thuc_tinh, "中", vat_pham_loai2.FLD_FJ_trung_cap_phu_hon, "进", vat_pham_loai2.FLD_FJ_tien_hoa }), 0, "交易");
                                          class15_0.class66_0.GIAO_DICH_CON_NGUOI.TANG_CUONG_VAT_PHAM(vat_pham_loai2.Item_toan_bo_ID, vat_pham_loai2.VAT_PHAM_ID, num, BitConverter.GetBytes(current.VAT_PHAM_SO_LUONG), vat_pham_loai2.Item_thuoc_tinh, vat_pham_loai.FLD_MAGIC0);
                                          class15_0.LAM_GIAM_DI_VAT_PHAM(vat_pham_loai2.VAT_PHAM_VI_TRI, current.VAT_PHAM_SO_LUONG);
                                    }
                                    return;
                                    Label_071A:
                                    objArray4 = new object[] { "非法复制_交易22[", class15_0.Userid, "]-[", class15_0.UserName, "]VAT_PHAM名称[", vat_pham_loai2.method_13(), "] VAT_PHAM名称2[", vat_pham_loai.method_13(), "] VAT_PHAM_SO_LUONG[", BitConverter.ToInt32(vat_pham_loai2.VAT_PHAM_SO_LUONG, 0), "] 数量[", current.VAT_PHAM_SO_LUONG, "]" };
                                    Form1.WriteLine(6, string.Concat(objArray4));
                                    return;
                                    Label_07B3:
                                    objArray5 = new object[] { "非法复制_交易2[", class15_0.Userid, "]-[", class15_0.UserName, "]VAT_PHAM名称[", vat_pham_loai2.method_13(), "] VAT_PHAM名称2[", vat_pham_loai.method_13(), "] VAT_PHAM_SO_LUONG[", BitConverter.ToInt32(vat_pham_loai2.VAT_PHAM_SO_LUONG, 0), "] 数量[", current.VAT_PHAM_SO_LUONG, "]" };
                                    Form1.WriteLine(6, string.Concat(objArray5));
                                    return;
                                    Label_084C:
                                    objArray6 = new object[] { "非法复制_交易1[", class15_0.Userid, "]-[", class15_0.UserName, "]VAT_PHAM名称[", vat_pham_loai2.method_13(), "] VAT_PHAM名称2[", vat_pham_loai.method_13(), "] VAT_PHAM_SO_LUONG[", BitConverter.ToInt32(vat_pham_loai2.VAT_PHAM_SO_LUONG, 0), "] 数量[", current.VAT_PHAM_SO_LUONG, "]" };
                                    Form1.WriteLine(6, string.Concat(objArray6));
                                    return;
                                    Label_08E5:
                                    objArray7 = new object[] { "非法复制_交易3[", class15_0.Userid, "]-[", class15_0.UserName, "]VAT_PHAM名称[", vat_pham_loai2.method_13(), "] VAT_PHAM名称2[", vat_pham_loai.method_13(), "] VAT_PHAM_SO_LUONG[", BitConverter.ToInt32(vat_pham_loai2.VAT_PHAM_SO_LUONG, 0), "] 数量[", BitConverter.ToInt32(vat_pham_loai.VAT_PHAM_SO_LUONG, 0), "]" };
                                    Form1.WriteLine(6, string.Concat(objArray7));
                              }
                        }
                  }
                  catch (Exception exception)
                  {
                        Form1.WriteLine(1, string.Concat(new object[] { "交易成功出错 [", class15_0.Userid, "][", class15_0.UserName, "][", class15_0.Client.ToString(), "]和[", class15_0.class66_0.GIAO_DICH_CON_NGUOI.Userid, "][", class15_0.class66_0.GIAO_DICH_CON_NGUOI.UserName, "][", class15_0.class66_0.GIAO_DICH_CON_NGUOI.Client.ToString(), "] ", exception }));
                  }
            }

            public void GUI_DI_BAC_SI_CHUA_BENH_NHOM_SO_LIEU(int int_128, TO_DOI_CLASS class25_0, int int_129, int int_130, TBL_XWWL_KONGFU class79_1)
            {
                  byte[] dst = Converter.hexStringToByte("AA5534010035012F0024013A2753D6010000001BD70100360100006F8A8C44000070415A30CC440000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003A270000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000070000000000000000000000000000000000000000000000000000000000000000000000000000000100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000055AA");
                  Buffer.BlockCopy(BitConverter.GetBytes(int_128), 0, dst, 11, 2);
                  Buffer.BlockCopy(BitConverter.GetBytes(class25_0.dictionary_0.Count), 0, dst, 15, 1);
                  Buffer.BlockCopy(BitConverter.GetBytes(int_130), 0, dst, 0x13, 4);
                  Buffer.BlockCopy(BitConverter.GetBytes(class79_1.FLD_EFFERT), 0, dst, 0x17, 4);
                  Buffer.BlockCopy(BitConverter.GetBytes(base.CharacterCoords_X), 0, dst, 0x1b, 4);
                  Buffer.BlockCopy(BitConverter.GetBytes(base.CharacterCoords_Y), 0, dst, 0x23, 4);
                  Buffer.BlockCopy(BitConverter.GetBytes((float)15f), 0, dst, 0x1f, 4);
                  Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, dst, 5, 2);
                  int num = 0;
                  foreach (Players players in class25_0.dictionary_0.Values)
                  {
                        long num2;
                        if ((players.NHAN_VAT_LON_NHAT_HP - players.NHAN_VAT_HP) >= int_129)
                        {
                              num2 = int_129;
                        }
                        else
                        {
                              num2 = players.NHAN_VAT_LON_NHAT_HP - players.NHAN_VAT_HP;
                        }
                        if (this.TRA_TIM_PHAM_VI_NGUOI_CHOI(500, players))
                        {
                              Buffer.BlockCopy(BitConverter.GetBytes(players.UserSessionID), 0, dst, 0x7b + (num * 2), 2);
                              Buffer.BlockCopy(BitConverter.GetBytes(num2), 0, dst, 0xa3 + (num * 2), 2);
                              players.NHAN_VAT_HP += num2;
                              players.UpdateHP_MP_SP();
                        }
                        num++;
                  }
                  if (base.Client != null)
                  {
                        base.Client.method_8(dst, dst.Length);
                  }
                  this.SendRangeOfPackets(dst, dst.Length);
            }

            public void GUI_DI_GIAO_DICH_THINH_CAU(int int_128, int int_129)
            {
                  try
                  {
                        if (((!base.bool_5 && !base.OpenWarehouse) && ((base.PlayerShop == null) || !base.PlayerShop.PersonStore_Open)) && ((base.class66_0 == null) || (base.class66_0.GIAO_DICH_CON_NGUOI == null)))
                        {
                              byte[] dst = Converter.hexStringToByte("AA5543000000009800340001000000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010000000000000000000055AA");
                              if (int_128 != base.UserSessionID)
                              {
                                    Players players = base.Get_char_data(int_128);
                                    if ((((players != null) && !players.OpenWarehouse) && ((players.PlayerShop == null) || !players.PlayerShop.PersonStore_Open)) && (!players.bool_5 && ((players.class66_0 == null) || (players.class66_0.GIAO_DICH_CON_NGUOI == null))))
                                    {
                                          if (players.Config.交易 == 0)
                                          {
                                                base.GameMessage("The other settings do not permit transactions", 9, "system hint");
                                          }
                                          else
                                          {
                                                Buffer.BlockCopy(BitConverter.GetBytes(int_129), 0, dst, 11, 4);
                                                Buffer.BlockCopy(BitConverter.GetBytes(int_129), 0, dst, 15, 4);
                                                Buffer.BlockCopy(BitConverter.GetBytes(players.UserSessionID), 0, dst, 0x13, 4);
                                                byte[] bytes = Encoding.Default.GetBytes(base.UserName);
                                                Buffer.BlockCopy(bytes, 0, dst, 0x17, bytes.Length);
                                                base.class66_0 = new Transactional(players);
                                                players.class66_0 = new Transactional(this);
                                                Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, dst, 5, 2);
                                                if (players.Client != null)
                                                {
                                                      players.Client.Send(dst, dst.Length);
                                                }
                                                if (base.Client != null)
                                                {
                                                      base.Client.Send(dst, dst.Length);
                                                }
                                          }
                                    }
                              }
                        }
                  }
                  catch (Exception exception)
                  {
                        Form1.WriteLine(1, "请求交易出错 [" + base.Userid + "][" + base.UserName + "][" + base.Client.ToString() + "] " + exception.Message);
                  }
            }

            public void GUI_DI_HO_HET_TIN_TUC_PHAT_THANH_SO_LIEU(byte[] byte_5, int int_128)
            {
                  try
                  {
                        foreach (Players players in World.allConnectedChars.Values)
                        {
                              if (((players.UserName != base.UserName) && this.TRA_TIM_PHAM_VI_NGUOI_CHOI(0x3e8, players)) && (players.Client != null))
                              {
                                    players.Client.Send(byte_5, int_128);
                              }
                        }
                  }
                  catch
                  {
                  }
            }

            public void GUI_DI_LUU_LAI_THO_LINH_PHU_SO_LIEU(byte[] byte_5, byte[] byte_6, TBL_XWWL_MAP class31_1)
            {
                  try
                  {
                        byte[] dst = Converter.hexStringToByte("AA5532000000000D10230001000A003132333400000000000000000000006500000054A8034400007041342FCB44000000000000000055AA");
                        Buffer.BlockCopy(byte_6, 0, dst, 13, 2);
                        Buffer.BlockCopy(byte_5, 0, dst, 15, byte_5.Length);
                        Buffer.BlockCopy(BitConverter.GetBytes(class31_1.Rxjh_Map), 0, dst, 30, 4);
                        Buffer.BlockCopy(BitConverter.GetBytes(class31_1.Rxjh_X), 0, dst, 0x22, 4);
                        Buffer.BlockCopy(BitConverter.GetBytes(class31_1.Rxjh_Z), 0, dst, 0x26, 4);
                        Buffer.BlockCopy(BitConverter.GetBytes(class31_1.Rxjh_Y), 0, dst, 0x2a, 4);
                        Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, dst, 5, 2);
                        if (base.Client != null)
                        {
                              base.Client.Send(dst, dst.Length);
                        }
                  }
                  catch (Exception exception)
                  {
                        Form1.WriteLine(1, "Send save earth magic data error![" + base.Userid + "]-[" + base.UserName + "]" + exception.Message);
                  }
            }

            public void GUI_DI_PHAN_KHANG_LAM_TON_THUONG_CONG_KICH_SO_LIEU(long long_17, int int_128)
            {
                  if (World.jlMsg == 1)
                  {
                        Form1.WriteLine(0, "PlayerBase_发送反伤攻击数据");
                  }
                  byte[] dst = Converter.hexStringToByte("AA551C0000A42789000C002C0100000F0000000100000000000000000000000055AA");
                  Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, dst, 5, 2);
                  Buffer.BlockCopy(BitConverter.GetBytes(int_128), 0, dst, 11, 2);
                  Buffer.BlockCopy(BitConverter.GetBytes((int)long_17), 0, dst, 0x13, 2);
                  this.SendRangeOfPackets(dst, dst.Length);
            }

            public void GUI_DI_QUAN_CONG_CONG_KICH_SO_LIEU(Players class15_0, TO_DOI_CLASS class25_0, int int_128, int int_129, int int_130, int int_131)
            {
                  try
                  {
                        TBL_XWWL_KONGFU tbl_xwwl_kongfu = World.TBL_KONGFU[int_129];
                        using (PacketData data = new PacketData())
                        {
                              data.Write2(int_128);
                              data.Write2(0);
                              data.Write4(class25_0.dictionary_0.Count);
                              data.Write4(int_129);
                              data.Write4(tbl_xwwl_kongfu.FLD_EFFERT);
                              data.method_1(class15_0.CharacterCoords_X);
                              data.method_1(15f);
                              data.method_1(class15_0.CharacterCoords_Y);
                              for (int i = 0; i < 80; i++)
                              {
                                    data.method_2(0);
                              }
                              data.Write2(0);
                              data.Write2(0);
                              PacketData data2 = new PacketData();
                              PacketData data3 = new PacketData();
                              PacketData data4 = new PacketData();
                              PacketData data5 = new PacketData();
                              foreach (Players players in class25_0.dictionary_0.Values)
                              {
                                    data2.Write2(players.UserSessionID);
                                    data3.Write4(players.FLD_ATTACK);
                                    data4.Write4((int)players.NHAN_VAT_HP);
                                    data5.method_2(1);
                              }
                              for (int j = 0; j < (20 - class25_0.dictionary_0.Count); j++)
                              {
                                    data2.Write2(0);
                                    data3.Write4(0);
                                    data4.Write4(0);
                              }
                              for (int k = 0; k < (100 - class25_0.dictionary_0.Count); k++)
                              {
                                    data5.method_2(0);
                              }
                              byte[] buffer = data2.method_17();
                              data.method_10(buffer, 0, buffer.Length);
                              buffer = data3.method_17();
                              data.method_10(buffer, 0, buffer.Length);
                              buffer = data5.method_17();
                              data.method_10(buffer, 0, buffer.Length);
                              buffer = data4.method_17();
                              data.method_10(buffer, 0, buffer.Length);
                              data.Write4(-1);
                              data.method_0(new byte[0x24]);
                              data.method_17();
                              if (class15_0.Client != null)
                              {
                                    class15_0.Client.method_4(data, 0x2f00, class15_0.UserSessionID);
                              }
                              this.vmethod_1(data, 0x2f00, class15_0.UserSessionID);
                        }
                  }
                  catch (Exception exception)
                  {
                        Form1.WriteLine(1, "发送群攻攻击数据 出错 [" + base.Userid + "][" + base.UserName + "] " + exception.Message);
                  }
            }

            public void GUI_DI_QUAN_CONG_CONG_KICH_SO_LIEU_2(Players class15_0, List<NHAN_VAT_CONG_KICH> list_6, int int_128, int int_129, int int_130, int int_131, int int_132)
            {
                  try
                  {
                        TBL_XWWL_KONGFU tbl_xwwl_kongfu = World.TBL_KONGFU[int_129];
                        Random random = new Random(World.smethod_15());
                        using (PacketData data = new PacketData())
                        {
                              data.Write2(int_128);
                              data.Write2(0);
                              data.Write4(list_6.Count);
                              data.Write4(int_129);
                              data.Write4(tbl_xwwl_kongfu.FLD_EFFERT);
                              data.method_1(class15_0.CharacterCoords_X);
                              data.method_1(15f);
                              data.method_1(class15_0.CharacterCoords_Y);
                              for (int i = 0; i < 80; i++)
                              {
                                    data.method_2(0);
                              }
                              if (class15_0.Player_Job == 4)
                              {
                                    if (BitConverter.ToInt32(class15_0.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[12].VAT_PHAM_ID, 0) != 0)
                                    {
                                          data.Write2(100);
                                    }
                                    else
                                    {
                                          data.Write2(0);
                                    }
                              }
                              else
                              {
                                    data.Write2(0);
                              }
                              data.Write2(0);
                              PacketData data2 = new PacketData();
                              PacketData data3 = new PacketData();
                              PacketData data4 = new PacketData();
                              PacketData data5 = new PacketData();
                              foreach (NHAN_VAT_CONG_KICH nhan_vat_cong_kich in list_6)
                              {
                                    data2.Write2(nhan_vat_cong_kich.NHAN_VAT_ID);
                                    data3.Write4((int)nhan_vat_cong_kich.LUC_CONG_KICH);
                                    data4.Write4((int)nhan_vat_cong_kich.long_0);
                                    data5.method_2(0);
                              }
                              for (int j = 0; j < (20 - list_6.Count); j++)
                              {
                                    data2.Write2(0);
                                    data3.Write4(0);
                                    data4.Write4(0);
                              }
                              for (int k = 0; k < (100 - list_6.Count); k++)
                              {
                                    if ((k >= 0x3a) && (k <= (0x3a + list_6.Count)))
                                    {
                                          if (base.bool_8)
                                          {
                                                data5.method_2(100);
                                          }
                                          else if (base.bool_9)
                                          {
                                                data5.method_2(120);
                                          }
                                          else
                                          {
                                                data5.method_2(0);
                                          }
                                    }
                                    else
                                    {
                                          data5.method_2(0);
                                    }
                              }
                              if (base.bool_8)
                              {
                                    base.bool_8 = false;
                              }
                              if (base.bool_9)
                              {
                                    base.bool_9 = false;
                              }
                              byte[] buffer = data2.method_17();
                              data.method_10(buffer, 0, buffer.Length);
                              buffer = data3.method_17();
                              data.method_10(buffer, 0, buffer.Length);
                              buffer = data5.method_17();
                              data.method_10(buffer, 0, buffer.Length);
                              buffer = data4.method_17();
                              data.method_10(buffer, 0, buffer.Length);
                              if (int_132 != -1)
                              {
                                    if (random.Next(0, 100) < 80)
                                    {
                                          data.Write4(int_132);
                                    }
                                    else
                                    {
                                          data.Write4(0);
                                    }
                              }
                              else
                              {
                                    data.Write4(int_132);
                              }
                              data.method_0(new byte[0x24]);
                              data.method_17();
                              if (class15_0.Client != null)
                              {
                                    class15_0.Client.method_5(data, 0x2f00, class15_0.UserSessionID, 0);
                              }
                              this.vmethod_2(data, 0x2f00, class15_0.UserSessionID, 0);
                        }
                  }
                  catch (Exception exception)
                  {
                        Form1.WriteLine(1, "发送群攻攻击数据2 出错 [" + base.Userid + "][" + base.UserName + "] " + exception.Message);
                  }
            }

            public void GUI_DI_SU_TU_HONG_PHAT_THANH_SO_LIEU(byte[] byte_5, int int_128)
            {
                  try
                  {
                        foreach (Players players in World.allConnectedChars.Values)
                        {
                              if (players.Client != null)
                              {
                                    players.Client.Send(byte_5, int_128);
                              }
                        }
                  }
                  catch
                  {
                  }
            }

            public void GUI_DI_THO_LINH_PHU_SO_LIEU()
            {
                  try
                  {
                        if (World.jlMsg == 1)
                        {
                              Form1.WriteLine(0, "Players_Send magic soil data");
                        }
                        string str = "000000000000000055AA";
                        byte[] src = Converter.hexStringToByte("AA559500002C010B1086000600");
                        byte[] buffer2 = Converter.hexStringToByte(str);
                        byte[] dst = new byte[((base.hashtable_0.Count * 0x21) + src.Length) + buffer2.Length];
                        Buffer.BlockCopy(src, 0, dst, 0, src.Length);
                        Buffer.BlockCopy(buffer2, 0, dst, dst.Length - buffer2.Length, buffer2.Length);
                        Buffer.BlockCopy(BitConverter.GetBytes((int)(2 + (base.hashtable_0.Count * 0x21))), 0, dst, 9, 2);
                        Buffer.BlockCopy(BitConverter.GetBytes((int)(0x11 + (base.hashtable_0.Count * 0x21))), 0, dst, 2, 2);
                        Buffer.BlockCopy(BitConverter.GetBytes(base.hashtable_0.Count), 0, dst, 11, 1);
                        int num = 0;
                        foreach (DictionaryEntry entry in base.hashtable_0)
                        {
                              TBL_XWWL_MAP tbl_xwwl_map = (TBL_XWWL_MAP)entry.Value;
                              byte[] bytes = Encoding.Default.GetBytes(tbl_xwwl_map.Rxjh_name);
                              Buffer.BlockCopy(BitConverter.GetBytes((int)entry.Key), 0, dst, 13 + (num * 0x21), 2);
                              Buffer.BlockCopy(bytes, 0, dst, 15 + (num * 0x21), bytes.Length);
                              Buffer.BlockCopy(BitConverter.GetBytes(tbl_xwwl_map.Rxjh_Map), 0, dst, 30 + (num * 0x21), 4);
                              Buffer.BlockCopy(BitConverter.GetBytes(tbl_xwwl_map.Rxjh_X), 0, dst, 0x22 + (num * 0x21), 4);
                              Buffer.BlockCopy(BitConverter.GetBytes(tbl_xwwl_map.Rxjh_Z), 0, dst, 0x26 + (num * 0x21), 4);
                              Buffer.BlockCopy(BitConverter.GetBytes(tbl_xwwl_map.Rxjh_Y), 0, dst, 0x2a + (num * 0x21), 4);
                              num++;
                        }
                        Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, dst, 5, 2);
                        if (base.Client != null)
                        {
                              base.Client.Send(dst, dst.Length);
                        }
                  }
                  catch (Exception exception)
                  {
                        Form1.WriteLine(1, "Send magic soil data error![" + base.Userid + "]-[" + base.UserName + "]" + exception.Message);
                  }
            }

            public void GUI_DI_TIN_TUC(string string_10, int int_128, string string_11)
            {
                  if (World.jlMsg == 1)
                  {
                        Form1.WriteLine(0, "Players_发送消息");
                  }
                  try
                  {
                        byte[] buffer;
                        if (DateTime.Now.Subtract(this.dateTime_11).TotalSeconds < 3.0)
                        {
                              base.GameMessage("Dung gui tin nhan qua nhanh nhu vay , hay suy nghi truoc khi chat!", 9, "Msg");
                        }
                        else
                        {
                              this.dateTime_11 = DateTime.Now;
                              buffer = Converter.hexStringToByte("AA55A6000000006600970000C8CEBDDC0000000000000000000000000000000000003000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000055AA");
                              buffer[11] = (byte)int_128;
                              if ((string_11 == null) || (string_11 == ""))
                              {
                                    string_11 = base.UserName;
                              }
                              byte[] bytes = Encoding.Default.GetBytes(string_11);
                              byte[] src = Encoding.Default.GetBytes(string_10);
                              Buffer.BlockCopy(src, 0, buffer, 0x23, src.Length);
                              Buffer.BlockCopy(bytes, 0, buffer, 12, bytes.Length);
                              Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, buffer, 5, 2);
                              switch (int_128)
                              {
                                    case 0:
                                          if ((base.class66_0 == null) || !base.class66_0.bool_0)
                                          {
                                                goto Label_061F;
                                          }
                                          buffer[11] = 11;
                                          if (base.Client != null)
                                          {
                                                base.Client.Send(buffer, buffer.Length);
                                          }
                                          if (base.class66_0.GIAO_DICH_CON_NGUOI.Client != null)
                                          {
                                                base.class66_0.GIAO_DICH_CON_NGUOI.Client.Send(buffer, buffer.Length);
                                          }
                                          break;

                                    case 1:
                                          if (base.Client != null)
                                          {
                                                base.Client.Send(buffer, buffer.Length);
                                          }
                                          this.GUI_DI_HO_HET_TIN_TUC_PHAT_THANH_SO_LIEU(buffer, buffer.Length);
                                          break;

                                    case 2:
                                          TO_DOI_CLASS to_doi_class;
                                          if (World.W_TO_DOI.TryGetValue(base.TO_DOI_ID, out to_doi_class))
                                          {
                                                base.GUI_DI_TO_DOI_TIN_TUC_SO_LIEU(buffer, buffer.Length, to_doi_class.dictionary_0);
                                          }
                                          break;

                                    case 3:
                                          if (base.GuildName != "")
                                          {
                                                base.UNKNOWN_97(base.GuildName, buffer, buffer.Length);
                                          }
                                          break;

                                    case 4:
                                          base.GUI_DI_TRUYEN_AM_TIN_TUC_SO_LIEU(buffer, buffer.Length, string_11, string_10, int_128);
                                          break;

                                    case 14:
                                          {
                                                if (DateTime.Now.Subtract(this.dateTime_10).TotalSeconds >= 30.0)
                                                {
                                                      goto Label_051D;
                                                }
                                                base.GameMessage("Lion's roar can be used every 30 seconds back", 9, "system hint");
                                                int num3 = 0;
                                                for (int k = 0; k < base.TRANG_BI_LAN_BAO_VAY.Length; k++)
                                                {
                                                      if ((BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[k].VAT_PHAM_ID, 0) == 0x3c0599c1) || (BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[k].VAT_PHAM_ID, 0) == 0x3c0599d3))
                                                      {
                                                            this.VAT_PHAM_GIAM_DI_THUOC_TINH_SO_LUONG(k, num3);
                                                            if (num3 > 0)
                                                            {
                                                                  num3 = 0;
                                                            }
                                                      }
                                                }
                                                break;
                                          }
                                    case 0xcc:
                                          {
                                                if (DateTime.Now.Subtract(this.dateTime_10).TotalSeconds >= 30.0)
                                                {
                                                      goto Label_03B9;
                                                }
                                                base.GameMessage("Lion's roar can be used every 30 seconds back", 9, "system hint");
                                                int num5 = 0;
                                                for (int m = 0; m < base.TRANG_BI_LAN_BAO_VAY.Length; m++)
                                                {
                                                      if (BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[m].VAT_PHAM_ID, 0) == 0x3c0599dc)
                                                      {
                                                            this.VAT_PHAM_GIAM_DI_THUOC_TINH_SO_LUONG(m, num5);
                                                            if (num5 > 0)
                                                            {
                                                                  num5 = 0;
                                                            }
                                                      }
                                                      if (BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[m].VAT_PHAM_ID, 0) == 0x3c0599db)
                                                      {
                                                            this.VAT_PHAM_GIAM_DI_THUOC_TINH_SO_LUONG(m, num5);
                                                            if (num5 > 0)
                                                            {
                                                                  num5 = 0;
                                                            }
                                                      }
                                                      if (BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[m].VAT_PHAM_ID, 0) == 0x3c0599da)
                                                      {
                                                            this.VAT_PHAM_GIAM_DI_THUOC_TINH_SO_LUONG(m, num5);
                                                            if (num5 > 0)
                                                            {
                                                                  num5 = 0;
                                                            }
                                                      }
                                                      if (BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[m].VAT_PHAM_ID, 0) == 0x3c0599d9)
                                                      {
                                                            this.VAT_PHAM_GIAM_DI_THUOC_TINH_SO_LUONG(m, num5);
                                                            if (num5 > 0)
                                                            {
                                                                  num5 = 0;
                                                            }
                                                      }
                                                }
                                                break;
                                          }
                              }
                        }
                        return;
                        Label_03B9:
                        this.dateTime_10 = DateTime.Now;
                        int num = 1;
                        for (int i = 0; i < base.TRANG_BI_LAN_BAO_VAY.Length; i++)
                        {
                              if (BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[i].VAT_PHAM_ID, 0) == 0x3c0599dc)
                              {
                                    this.VAT_PHAM_GIAM_DI_THUOC_TINH_SO_LUONG(i, num);
                                    if (num > 0)
                                    {
                                          num = 0;
                                    }
                              }
                              if (BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[i].VAT_PHAM_ID, 0) == 0x3c0599db)
                              {
                                    this.VAT_PHAM_GIAM_DI_THUOC_TINH_SO_LUONG(i, num);
                                    if (num > 0)
                                    {
                                          num = 0;
                                    }
                              }
                              if (BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[i].VAT_PHAM_ID, 0) == 0x3c0599da)
                              {
                                    this.VAT_PHAM_GIAM_DI_THUOC_TINH_SO_LUONG(i, num);
                                    if (num > 0)
                                    {
                                          num = 0;
                                    }
                              }
                              if (BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[i].VAT_PHAM_ID, 0) == 0x3c0599d9)
                              {
                                    this.VAT_PHAM_GIAM_DI_THUOC_TINH_SO_LUONG(i, num);
                                    if (num > 0)
                                    {
                                          num = 0;
                                    }
                              }
                        }
                        World.class20_0.method_4(string.Concat(new object[] { "狮子吼|", base.UserSessionID, "|", base.UserName, "|", string_10, "|", base.Client.ToString(), "|", World.Server_ID, "|", base.CharacterCoords_Map }));
                        return;
                        Label_051D:
                        this.dateTime_10 = DateTime.Now;
                        bool flag = false;
                        int num2 = 1;
                        for (int j = 0; j < base.TRANG_BI_LAN_BAO_VAY.Length; j++)
                        {
                              if ((BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[j].VAT_PHAM_ID, 0) == 0x3c0599c1) || (BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[j].VAT_PHAM_ID, 0) == 0x3c0599d3))
                              {
                                    this.VAT_PHAM_GIAM_DI_THUOC_TINH_SO_LUONG(j, num2);
                                    if (num2 > 0)
                                    {
                                          num2 = 0;
                                    }
                                    flag = true;
                              }
                        }
                        if (flag)
                        {
                              if (World.queue_2.Count < World.The_maximum_number_of_Idiom)
                              {
                                    SU_TU_HONG_CLASS su_tu_hong_class = new SU_TU_HONG_CLASS
                                    {
                                          FLD_INDEX = base.UserSessionID,
                                          UserName = base.UserName,
                                          TxtId = int_128,
                                          Txt = string_10
                                    };
                                    World.queue_2.Enqueue(su_tu_hong_class);
                                    if (World.int_129 >= 0x7f)
                                    {
                                          World.int_129 = 0;
                                    }
                                    else
                                    {
                                          World.int_129++;
                                    }
                                    base.GameMessage("Idiom successful registration", 9, "system hint");
                              }
                              else
                              {
                                    base.GameMessage("Idiom queue is full, please wait .....", 9, "system hint");
                              }
                        }
                        return;
                        Label_061F:
                        if (base.Client != null)
                        {
                              base.Client.Send(buffer, buffer.Length);
                        }
                        this.vmethod_0(buffer, buffer.Length);
                  }
                  catch (Exception exception)
                  {
                        Form1.WriteLine(1, "发送消息出错![" + base.Userid + "]-[" + base.UserName + "]" + exception.Message);
                  }
            }

            public void GUI_DI_TIN_TUC_DEN(string string_10, int int_128, string string_11)
            {
                  if (World.jlMsg == 1)
                  {
                        Form1.WriteLine(0, "Players_发送消息出");
                  }
                  string str = "000000000000000055AA";
                  byte[] src = Converter.hexStringToByte("AA55AB00012C0166009C000461736400000000000000000000000000000000000003");
                  byte[] buffer2 = Converter.hexStringToByte(str);
                  byte[] bytes = Encoding.Default.GetBytes(string_10);
                  byte[] dst = new byte[(src.Length + buffer2.Length) + bytes.Length];
                  Buffer.BlockCopy(src, 0, dst, 0, src.Length);
                  Buffer.BlockCopy(buffer2, 0, dst, dst.Length - buffer2.Length, buffer2.Length);
                  Buffer.BlockCopy(BitConverter.GetBytes(bytes.Length), 0, dst, 0x21, 1);
                  Buffer.BlockCopy(bytes, 0, dst, 0x22, bytes.Length);
                  dst[11] = (byte)int_128;
                  if ((string_11 == null) || (string_11 == ""))
                  {
                        string_11 = base.UserName;
                  }
                  byte[] buffer5 = Encoding.Default.GetBytes(string_11);
                  Buffer.BlockCopy(BitConverter.GetBytes((int)(((src.Length + bytes.Length) - 11) + 15)), 0, dst, 2, 2);
                  Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, dst, 5, 2);
                  Buffer.BlockCopy(BitConverter.GetBytes((int)((src.Length + bytes.Length) - 11)), 0, dst, 9, 2);
                  Buffer.BlockCopy(buffer5, 0, dst, 12, buffer5.Length);
                  if (base.Client != null)
                  {
                        base.Client.Send(dst, dst.Length);
                  }
            }

            public void GUI_YEU_CAU_VAO_NHOM(byte[] byte_5, int int_128)
            {
                  try
                  {
                        if ((!base.bool_5 && (base.CharacterCoords_Map != 0x321)) && !base.OpenWarehouse)
                        {
                              byte[] dst = new byte[4];
                              Buffer.BlockCopy(byte_5, 15, dst, 0, 2);
                              int num = BitConverter.ToInt32(dst, 0);
                              byte[] buffer2 = Converter.hexStringToByte("AA552A00000B0031001B00010001000A00000000000000000000000000000000000000000000000000000000000055AA");
                              Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, buffer2, 0x11, 2);
                              Players players = base.Get_char_data(num);
                              if (((players != null) && ((players.PlayerShop == null) || !players.PlayerShop.PersonStore_Open)) && (!players.bool_5 && (players.UserName != base.UserName)))
                              {
                                    if (players.Config.组队 == 0)
                                    {
                                          base.GameMessage("Do not allow the other team to set", 9, "system hint");
                                    }
                                    else if (Math.Abs((int)(base.Player_FLD_LEVEL - players.Player_FLD_LEVEL)) >= World.To_doi_Cap_bac_han_che)
                                    {
                                          base.GameMessage("Only two sides differ in rank" + World.To_doi_Cap_bac_han_che + "Within the team level before they can!", 20, "system hint");
                                    }
                                    else if (players.TO_DOI_ID == 0)
                                    {
                                          TO_DOI_CLASS to_doi_class;
                                          if (World.W_TO_DOI.TryGetValue(base.TO_DOI_ID, out to_doi_class))
                                          {
                                                to_doi_class.class15_0 = players;
                                                players.TO_DOI_ID = base.TO_DOI_ID;
                                          }
                                          else
                                          {
                                                to_doi_class = new TO_DOI_CLASS(this)
                                                {
                                                      class15_0 = players
                                                };
                                                base.TO_DOI_ID = World.smethod_9(to_doi_class);
                                                players.TO_DOI_ID = base.TO_DOI_ID;
                                                to_doi_class.int_0 = base.TO_DOI_ID;
                                          }
                                          byte[] bytes = Encoding.Default.GetBytes(base.UserName);
                                          Buffer.BlockCopy(bytes, 0, buffer2, 0x15, bytes.Length);
                                          Buffer.BlockCopy(BitConverter.GetBytes(players.UserSessionID), 0, buffer2, 5, 2);
                                          if (players.Client != null)
                                          {
                                                players.Client.Send(buffer2, buffer2.Length);
                                          }
                                          Buffer.BlockCopy(BitConverter.GetBytes(1), 0, buffer2, 0x13, 2);
                                          Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, buffer2, 5, 2);
                                          if (base.Client != null)
                                          {
                                                base.Client.Send(buffer2, buffer2.Length);
                                          }
                                    }
                              }
                        }
                  }
                  catch (Exception exception)
                  {
                        Form1.WriteLine(1, "发送组队出错![" + base.Userid + "]-[" + base.UserName + "]" + exception.Message);
                  }
            }

            public void GuildWarRequest(byte[] byte_5, int int_128)
            {
                  try
                  {
                        Dictionary<int, Players> dictionary;
                        char[] separator = new char[] { ';' };
                        string[] strArray = World.Application_help_combat_several_gold_bullions.Split(separator);
                        char[] chArray2 = new char[] { ';' };
                        string[] strArray2 = World.Bang_chien_nhan_so_khong_che.Split(chArray2);
                        if (World.GangWar_Switch == 0)
                        {
                              base.GameMessage("Help stop the war now open", 9, "system hint");
                        }
                        else
                        {
                              int num = BitConverter.ToInt16(byte_5, 15);
                              int num2 = BitConverter.ToInt32(byte_5, 0x2e3);
                              int key = new Random().Next(0, 0x270f);
                              if (base.Bang_phai_nhan_vat_thu_bac != 6)
                              {
                                    this.YEU_CAU_BANG_CHIEN_NHAC_NHO(3);
                              }
                              else if (num2 == 0x1b59)
                              {
                                    this.YEU_CAU_BANG_CHIEN_NHAC_NHO(2);
                                    base.GameMessage("The figure also does not open, please try another diagram", 9, "system hint");
                              }
                              else if (((num2 == 0x1bbd) && (num < int.Parse(strArray2[0]))) && (num > int.Parse(strArray2[1])))
                              {
                                    this.YEU_CAU_BANG_CHIEN_NHAC_NHO(4);
                              }
                              else
                              {
                                    dictionary = new Dictionary<int, Players>();
                                    for (int i = 0; i < num; i++)
                                    {
                                          byte[] dst = new byte[15];
                                          Buffer.BlockCopy(byte_5, 0x11 + (i * 15), dst, 0, dst.Length);
                                          string str = Encoding.Default.GetString(dst).Replace("\0", "");
                                          Players players = base.Get_Char_Data(str);
                                          if (players != null)
                                          {
                                                dictionary.Add(players.UserSessionID, players);
                                                if (players.Player_FLD_LEVEL < 60)
                                                {
                                                      goto Label_030C;
                                                }
                                          }
                                    }
                                    if (((num2 == 0x1bbd) && (dictionary.Count < int.Parse(strArray2[0]))) && (dictionary.Count > int.Parse(strArray2[1])))
                                    {
                                          this.YEU_CAU_BANG_CHIEN_NHAC_NHO(4);
                                          dictionary.Clear();
                                    }
                                    else
                                    {
                                          this.KIEM_TRA_BACH_BAO_CAC_NGUYEN_BAO_SO_LUONG();
                                          if ((base.FLD_RXPIONT >= int.Parse(strArray[0])) && (base.Player_Money >= int.Parse(strArray[1])))
                                          {
                                                BANG_CHIEN_STRING bang_chien_string = new BANG_CHIEN_STRING
                                                {
                                                      int_0 = key,
                                                      int_1 = num2,
                                                      string_0 = base.GuildName,
                                                      string_1 = base.UserName,
                                                      dictionary_0 = dictionary
                                                };
                                                World.dictionary_25.Add(key, bang_chien_string);
                                                this.YEU_CAU_BANG_CHIEN_NHAC_NHO(0);
                                                Form1.WriteLine(0x58, string.Concat(new object[] { "Successful application to help fight Application gangID:", key, " Gang name:", base.GuildName, " Main fact:", base.UserName, " Number of people:", bang_chien_string.dictionary_0.Count }));
                                                base.KIEM_SOAT_CASH_SO_LIEU(int.Parse(strArray[0]), 0);
                                                base.Player_Money -= int.Parse(strArray[1]);
                                                RxjhClass.INSERT_BANG_CHIEN_TIEN_DAT_CUOC(base.Userid, base.UserName, key, 50);
                                                base.UPDATE_RXPIONT();
                                                base.UpdateMoneyAndWeight();
                                          }
                                          else
                                          {
                                                base.GameMessage(string.Concat(new object[] { "Your gold is not enough money or can not apply for gang warfare, gang warfare apply for a minimum of", int.Parse(strArray[0]), "Ingot and", int.Parse(strArray[1]), "Game currency" }), 9, "system hint");
                                                this.YEU_CAU_BANG_CHIEN_NHAC_NHO(2);
                                          }
                                    }
                              }
                        }
                        return;
                        Label_030C:
                        this.YEU_CAU_BANG_CHIEN_NHAC_NHO(7);
                        dictionary.Clear();
                  }
                  catch (Exception exception)
                  {
                        Form1.WriteLine(1, "Application gang war Error：" + exception);
                  }
            }

            public void HankwangAddWeapon()
            {
                  if (base.Player_Job == 8)
                  {
                        int num = base.DUOC_KIEN_HANG_RONG(this);
                        long num1 = base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].GetItem_ID;
                        if (base.Player_FLD_JOB_LEVEL == 1)
                        {
                              this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x5f8fde2, num, 1, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_MAGIC0, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_MAGIC1, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_MAGIC2, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_MAGIC3, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_MAGIC4, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_FJ_thuc_tinh, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_FJ_trung_cap_phu_hon, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_FJ_tien_hoa, 0, 0);
                              base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].Item_byte = new byte[0x49];
                              base.LAN_DAU_DOI_THOAI_DA_TRANG_BI_VAT_PHAM();
                              this.Update_Equipment_Effectiveness();
                        }
                        else if (base.Player_FLD_JOB_LEVEL == 2)
                        {
                              this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x5f8fde3, num, 1, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_MAGIC0, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_MAGIC1, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_MAGIC2, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_MAGIC3, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_MAGIC4, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_FJ_thuc_tinh, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_FJ_trung_cap_phu_hon, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_FJ_tien_hoa, 0, 0);
                              base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].Item_byte = new byte[0x49];
                              base.LAN_DAU_DOI_THOAI_DA_TRANG_BI_VAT_PHAM();
                              this.Update_Equipment_Effectiveness();
                        }
                        else if (base.Player_FLD_JOB_LEVEL == 3)
                        {
                              this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x5f8fde4, num, 1, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_MAGIC0, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_MAGIC1, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_MAGIC2, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_MAGIC3, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_MAGIC4, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_FJ_thuc_tinh, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_FJ_trung_cap_phu_hon, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_FJ_tien_hoa, 0, 0);
                              base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].Item_byte = new byte[0x49];
                              base.LAN_DAU_DOI_THOAI_DA_TRANG_BI_VAT_PHAM();
                              this.Update_Equipment_Effectiveness();
                        }
                        else if (base.Player_FLD_JOB_LEVEL == 4)
                        {
                              this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x5f8fde5, num, 1, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_MAGIC0, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_MAGIC1, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_MAGIC2, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_MAGIC3, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_MAGIC4, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_FJ_thuc_tinh, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_FJ_trung_cap_phu_hon, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_FJ_tien_hoa, 0, 0);
                              base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].Item_byte = new byte[0x49];
                              base.LAN_DAU_DOI_THOAI_DA_TRANG_BI_VAT_PHAM();
                              this.Update_Equipment_Effectiveness();
                        }
                        else if (base.Player_FLD_JOB_LEVEL == 5)
                        {
                              this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x5f8fde6, num, 1, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_MAGIC0, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_MAGIC1, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_MAGIC2, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_MAGIC3, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_MAGIC4, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_FJ_thuc_tinh, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_FJ_trung_cap_phu_hon, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_FJ_tien_hoa, 0, 0);
                              base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].Item_byte = new byte[0x49];
                              base.LAN_DAU_DOI_THOAI_DA_TRANG_BI_VAT_PHAM();
                              this.Update_Equipment_Effectiveness();
                        }
                        else if (base.Player_FLD_JOB_LEVEL == 6)
                        {
                              this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x5f8fde7, num, 1, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_MAGIC0, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_MAGIC1, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_MAGIC2, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_MAGIC3, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_MAGIC4, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_FJ_thuc_tinh, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_FJ_trung_cap_phu_hon, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_FJ_tien_hoa, 0, 0);
                              base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].Item_byte = new byte[0x49];
                              base.LAN_DAU_DOI_THOAI_DA_TRANG_BI_VAT_PHAM();
                              this.Update_Equipment_Effectiveness();
                        }
                        else if (base.Player_FLD_JOB_LEVEL == 7)
                        {
                              this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x5f8fde8, num, 1, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_MAGIC0, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_MAGIC1, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_MAGIC2, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_MAGIC3, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_MAGIC4, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_FJ_thuc_tinh, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_FJ_trung_cap_phu_hon, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_FJ_tien_hoa, 0, 0);
                              base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].Item_byte = new byte[0x49];
                              base.LAN_DAU_DOI_THOAI_DA_TRANG_BI_VAT_PHAM();
                              this.Update_Equipment_Effectiveness();
                        }
                        else if (base.Player_FLD_JOB_LEVEL == 8)
                        {
                              this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x5f8fde9, num, 1, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_MAGIC0, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_MAGIC1, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_MAGIC2, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_MAGIC3, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_MAGIC4, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_FJ_thuc_tinh, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_FJ_trung_cap_phu_hon, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_FJ_tien_hoa, 0, 0);
                              base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].Item_byte = new byte[0x49];
                              base.LAN_DAU_DOI_THOAI_DA_TRANG_BI_VAT_PHAM();
                              this.Update_Equipment_Effectiveness();
                        }
                        else if (base.Player_FLD_JOB_LEVEL == 9)
                        {
                              this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x5f8fdfa, num, 1, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_MAGIC0, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_MAGIC1, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_MAGIC2, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_MAGIC3, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_MAGIC4, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_FJ_thuc_tinh, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_FJ_trung_cap_phu_hon, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_FJ_tien_hoa, 0, 0);
                              base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].Item_byte = new byte[0x49];
                              base.LAN_DAU_DOI_THOAI_DA_TRANG_BI_VAT_PHAM();
                              this.Update_Equipment_Effectiveness();
                        }
                  }
            }

            public void HAP_HON(int int_128)
            {
                  if (World.Hap_hon_mo_ra == 1)
                  {
                        Random random = new Random();
                        int num = random.Next(0, 100);
                        if (base.FLD_VIP == 1)
                        {
                              num -= 15;
                        }
                        if ((base.int_110 != 0) && (random.Next(0, 80) <= base.int_110))
                        {
                              num -= 5;
                              base.Show_Char(base.UserSessionID, 0x192);
                        }
                        if (num <= World.Hap_hon_xac_suat)
                        {
                              int num2 = BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[0].VAT_PHAM_ID, 0);
                              if ((((num2 == 0x3b9acb41) || (num2 == 0x3b9acb43)) || ((num2 == 0x3b9acb45) || (num2 == 0x3b9acb47))) && (random.Next(0, 0xa8c) <= base.TRANG_BI_LAN_BAO_VAY[0].FLD_MAGIC0))
                              {
                                    this.HAP_HON_DI_CHUYEN_THANH_GOI(int_128);
                                    char[] separator = new char[] { ';' };
                                    string[] strArray = World.Hap_hon_tuy_theo_so_luong.Split(separator);
                                    int num3 = random.Next(int.Parse(strArray[0]), int.Parse(strArray[1]));
                                    switch (num2)
                                    {
                                          case 0x3b9acb41:
                                                {
                                                      VAT_PHAM_LOAI vat_pham_loai1 = base.TRANG_BI_LAN_BAO_VAY[0];
                                                      vat_pham_loai1.FLD_MAGIC2 += num3;
                                                      this.HAP_HON_SO_LUONG_GOI();
                                                      if (base.TRANG_BI_LAN_BAO_VAY[0].FLD_MAGIC2 >= base.TRANG_BI_LAN_BAO_VAY[0].FLD_MAGIC1)
                                                      {
                                                            this.LAM_GIAM_DI_VAT_PHAM(0, 1);
                                                            byte[] bytes = BitConverter.GetBytes(0x3b9acd03);
                                                            byte[] buffer2 = BitConverter.GetBytes(1);
                                                            byte[] buffer3 = new byte[20];
                                                            byte[] buffer4 = BitConverter.GetBytes(RxjhClass.GetDBItmeId());
                                                            this.TANG_CUONG_VAT_PHAM_2(buffer4, bytes, 0, buffer2, buffer3);
                                                      }
                                                      return;
                                                }
                                          case 0x3b9acb42:
                                          case 0x3b9acb44:
                                          case 0x3b9acb46:
                                                return;

                                          case 0x3b9acb43:
                                                {
                                                      VAT_PHAM_LOAI vat_pham_loai2 = base.TRANG_BI_LAN_BAO_VAY[0];
                                                      vat_pham_loai2.FLD_MAGIC2 += num3;
                                                      this.HAP_HON_SO_LUONG_GOI();
                                                      if (base.TRANG_BI_LAN_BAO_VAY[0].FLD_MAGIC2 >= base.TRANG_BI_LAN_BAO_VAY[0].FLD_MAGIC1)
                                                      {
                                                            this.LAM_GIAM_DI_VAT_PHAM(0, 1);
                                                            byte[] buffer5 = BitConverter.GetBytes(0x3b9acd04);
                                                            byte[] buffer6 = BitConverter.GetBytes(1);
                                                            byte[] buffer7 = new byte[20];
                                                            byte[] buffer8 = BitConverter.GetBytes(RxjhClass.GetDBItmeId());
                                                            this.TANG_CUONG_VAT_PHAM_2(buffer8, buffer5, 0, buffer6, buffer7);
                                                      }
                                                      return;
                                                }
                                          case 0x3b9acb45:
                                                {
                                                      VAT_PHAM_LOAI vat_pham_loai3 = base.TRANG_BI_LAN_BAO_VAY[0];
                                                      vat_pham_loai3.FLD_MAGIC2 += num3;
                                                      this.HAP_HON_SO_LUONG_GOI();
                                                      if (base.TRANG_BI_LAN_BAO_VAY[0].FLD_MAGIC2 >= base.TRANG_BI_LAN_BAO_VAY[0].FLD_MAGIC1)
                                                      {
                                                            this.LAM_GIAM_DI_VAT_PHAM(0, 1);
                                                            byte[] buffer9 = BitConverter.GetBytes(0x3b9acd05);
                                                            byte[] buffer10 = BitConverter.GetBytes(1);
                                                            byte[] buffer11 = new byte[20];
                                                            byte[] buffer12 = BitConverter.GetBytes(RxjhClass.GetDBItmeId());
                                                            this.TANG_CUONG_VAT_PHAM_2(buffer12, buffer9, 0, buffer10, buffer11);
                                                      }
                                                      return;
                                                }
                                          case 0x3b9acb47:
                                                {
                                                      VAT_PHAM_LOAI vat_pham_loai4 = base.TRANG_BI_LAN_BAO_VAY[0];
                                                      vat_pham_loai4.FLD_MAGIC2 += num3;
                                                      this.HAP_HON_SO_LUONG_GOI();
                                                      if (base.TRANG_BI_LAN_BAO_VAY[0].FLD_MAGIC2 >= base.TRANG_BI_LAN_BAO_VAY[0].FLD_MAGIC1)
                                                      {
                                                            this.LAM_GIAM_DI_VAT_PHAM(0, 1);
                                                            byte[] buffer13 = BitConverter.GetBytes(0x3b9acd06);
                                                            byte[] buffer14 = BitConverter.GetBytes(1);
                                                            byte[] buffer15 = new byte[20];
                                                            byte[] buffer16 = BitConverter.GetBytes(RxjhClass.GetDBItmeId());
                                                            this.TANG_CUONG_VAT_PHAM_2(buffer16, buffer13, 0, buffer14, buffer15);
                                                      }
                                                      return;
                                                }
                                    }
                              }
                        }
                  }
            }

            public void HAP_HON_DI_CHUYEN_THANH_GOI(int int_128)
            {
                  PacketData data = new PacketData();
                  data.Write4(int_128);
                  data.Write4(BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[0].VAT_PHAM_ID, 0));
                  data.Write4(base.TRANG_BI_LAN_BAO_VAY[0].FLD_MAGIC1);
                  if (base.Client != null)
                  {
                        base.Client.method_4(data, 0xd918, base.UserSessionID);
                  }
                  this.vmethod_1(data, 0xd918, base.UserSessionID);
            }

            public void HAP_HON_SO_LUONG_GOI()
            {
                  PacketData data = new PacketData();
                  data.Write4(1);
                  data.method_10(base.TRANG_BI_LAN_BAO_VAY[0].Item_byte, 0, 12);
                  data.Write4(0);
                  data.Write4(1);
                  data.Write4(0);
                  data.Write4(1);
                  data.Write4(0);
                  data.method_10(base.TRANG_BI_LAN_BAO_VAY[0].Item_byte, 0x10, 40);
                  if (base.Client != null)
                  {
                        base.Client.method_4(data, 0x2300, base.UserSessionID);
                  }
            }

            public void HarinAddWeapon()
            {
                  if (base.Player_Job == 9)
                  {
                        int num = base.DUOC_KIEN_HANG_RONG(this);
                        long num1 = base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].GetItem_ID;
                        if (base.Player_FLD_JOB_LEVEL == 1)
                        {
                              this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xbeedee2, num, 1, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_MAGIC0, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_MAGIC1, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_MAGIC2, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_MAGIC3, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_MAGIC4, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_FJ_thuc_tinh, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_FJ_trung_cap_phu_hon, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_FJ_tien_hoa, 0, 0);
                              base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].Item_byte = new byte[0x49];
                              base.LAN_DAU_DOI_THOAI_DA_TRANG_BI_VAT_PHAM();
                              this.Update_Equipment_Effectiveness();
                        }
                        else if (base.Player_FLD_JOB_LEVEL == 2)
                        {
                              this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xbeedee2, num, 1, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_MAGIC0, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_MAGIC1, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_MAGIC2, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_MAGIC3, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_MAGIC4, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_FJ_thuc_tinh, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_FJ_trung_cap_phu_hon, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_FJ_tien_hoa, 0, 0);
                              base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].Item_byte = new byte[0x49];
                              base.LAN_DAU_DOI_THOAI_DA_TRANG_BI_VAT_PHAM();
                              this.Update_Equipment_Effectiveness();
                        }
                        else if (base.Player_FLD_JOB_LEVEL == 3)
                        {
                              this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xbeedee4, num, 1, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_MAGIC0, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_MAGIC1, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_MAGIC2, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_MAGIC3, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_MAGIC4, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_FJ_thuc_tinh, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_FJ_trung_cap_phu_hon, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_FJ_tien_hoa, 0, 0);
                              base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].Item_byte = new byte[0x49];
                              base.LAN_DAU_DOI_THOAI_DA_TRANG_BI_VAT_PHAM();
                              this.Update_Equipment_Effectiveness();
                        }
                        else if (base.Player_FLD_JOB_LEVEL == 4)
                        {
                              this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xbeedee5, num, 1, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_MAGIC0, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_MAGIC1, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_MAGIC2, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_MAGIC3, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_MAGIC4, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_FJ_thuc_tinh, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_FJ_trung_cap_phu_hon, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_FJ_tien_hoa, 0, 0);
                              base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].Item_byte = new byte[0x49];
                              base.LAN_DAU_DOI_THOAI_DA_TRANG_BI_VAT_PHAM();
                              this.Update_Equipment_Effectiveness();
                        }
                        else if (base.Player_FLD_JOB_LEVEL == 5)
                        {
                              this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xbeedee6, num, 1, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_MAGIC0, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_MAGIC1, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_MAGIC2, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_MAGIC3, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_MAGIC4, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_FJ_thuc_tinh, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_FJ_trung_cap_phu_hon, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_FJ_tien_hoa, 0, 0);
                              base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].Item_byte = new byte[0x49];
                              base.LAN_DAU_DOI_THOAI_DA_TRANG_BI_VAT_PHAM();
                              this.Update_Equipment_Effectiveness();
                        }
                        else if (base.Player_FLD_JOB_LEVEL == 6)
                        {
                              this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xbeedee7, num, 1, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_MAGIC0, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_MAGIC1, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_MAGIC2, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_MAGIC3, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_MAGIC4, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_FJ_thuc_tinh, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_FJ_trung_cap_phu_hon, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_FJ_tien_hoa, 0, 0);
                              base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].Item_byte = new byte[0x49];
                              base.LAN_DAU_DOI_THOAI_DA_TRANG_BI_VAT_PHAM();
                              this.Update_Equipment_Effectiveness();
                        }
                        else if (base.Player_FLD_JOB_LEVEL == 7)
                        {
                              this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xbeedee8, num, 1, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_MAGIC0, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_MAGIC1, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_MAGIC2, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_MAGIC3, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_MAGIC4, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_FJ_thuc_tinh, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_FJ_trung_cap_phu_hon, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_FJ_tien_hoa, 0, 0);
                              base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].Item_byte = new byte[0x49];
                              base.LAN_DAU_DOI_THOAI_DA_TRANG_BI_VAT_PHAM();
                              this.Update_Equipment_Effectiveness();
                        }
                        else if (base.Player_FLD_JOB_LEVEL == 8)
                        {
                              this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xbeedee9, num, 1, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_MAGIC0, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_MAGIC1, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_MAGIC2, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_MAGIC3, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_MAGIC4, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_FJ_thuc_tinh, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_FJ_trung_cap_phu_hon, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_FJ_tien_hoa, 0, 0);
                              base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].Item_byte = new byte[0x49];
                              base.LAN_DAU_DOI_THOAI_DA_TRANG_BI_VAT_PHAM();
                              this.Update_Equipment_Effectiveness();
                        }
                        else if (base.Player_FLD_JOB_LEVEL == 9)
                        {
                              this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xbeedefa, num, 1, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_MAGIC0, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_MAGIC1, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_MAGIC2, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_MAGIC3, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_MAGIC4, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_FJ_thuc_tinh, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_FJ_trung_cap_phu_hon, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].FLD_FJ_tien_hoa, 0, 0);
                              base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].Item_byte = new byte[0x49];
                              base.LAN_DAU_DOI_THOAI_DA_TRANG_BI_VAT_PHAM();
                              this.Update_Equipment_Effectiveness();
                        }
                  }
            }

            public void HE_THONG_CHAM_CONG_KHEN_THUONG()
            {
                  try
                  {
                        using (Dictionary<int, HE_THONG_CHAM_CONG_KHEN_THUONG_CLASS>.ValueCollection.Enumerator enumerator = World.dictionary_17.Values.GetEnumerator())
                        {
                              while (enumerator.MoveNext())
                              {
                                    HE_THONG_CHAM_CONG_KHEN_THUONG_CLASS current = enumerator.Current;
                                    char[] separator = new char[] { ',' };
                                    string[] strArray = World.Thang_cap_thanh_vien_can_Thuoc_tinh.Split(separator);
                                    if ((base.DANH_DAU_SO_LAN != current.SO_LAN) || (base.Player_FLD_LEVEL < current.CAP_BAC))
                                    {
                                          break;
                                    }
                                    if (current.VO_HUAN != 0)
                                    {
                                          base.Player_WuXun += current.VO_HUAN;
                                          base.GameMessage("Obtain Wu Xun" + current.VO_HUAN.ToString() + "point!", 20, "Attendance bonus");
                                          base.UpdatePowersAndStatus();
                                    }
                                    if (current.TRANG_PHUC_ID != 0)
                                    {
                                          int num2 = base.DUOC_KIEN_HANG_RONG_VI_TRI();
                                          if (num2 == -1)
                                          {
                                                goto Label_05A8;
                                          }
                                          byte[] bytes = BitConverter.GetBytes(RxjhClass.GetDBItmeId());
                                          byte[] buffer2 = new byte[0x38];
                                          this.TANG_CUONG_VAT_PHAM_1(bytes, BitConverter.GetBytes(current.TRANG_PHUC_ID), num2, BitConverter.GetBytes(1), buffer2, false);
                                          base.GameMessage("Congratulations, you get a set of equipment. Quickly open and see", 20, "Attendance bonus");
                                    }
                                    if (current.NGUYEN_BAO != 0)
                                    {
                                          this.KIEM_TRA_BACH_BAO_CAC_NGUYEN_BAO_SO_LUONG();
                                          base.KIEM_SOAT_CASH_SO_LIEU(current.NGUYEN_BAO, 1);
                                          base.GameMessage("get" + current.NGUYEN_BAO.ToString() + "个元宝！", 20, "Attendance bonus");
                                          base.UPDATE_RXPIONT();
                                    }
                                    if (current.SINH_MENH != 0)
                                    {
                                          base.Khen_thuong_them_vao_sinh_menh += current.SINH_MENH;
                                          base.UpdatePowersAndStatus();
                                          base.GameMessage("get" + current.SINH_MENH.ToString() + "life value!", 20, "Attendance bonus");
                                    }
                                    if ((current.CONG_KICH != 0) && (base.Khen_thuong_them_vao_cong_kich < long.Parse(strArray[0])))
                                    {
                                          base.Khen_thuong_them_vao_cong_kich += current.CONG_KICH;
                                          base.UpdatePowersAndStatus();
                                          base.GameMessage("get" + current.CONG_KICH.ToString() + "Attack!", 20, "Attendance bonus");
                                    }
                                    if ((current.PHONG_NGU != 0) && (base.Khen_thuong_them_vao_phong_ngu < long.Parse(strArray[1])))
                                    {
                                          base.Khen_thuong_them_vao_phong_ngu += current.PHONG_NGU;
                                          base.UpdatePowersAndStatus();
                                          base.GameMessage("get" + current.PHONG_NGU.ToString() + "Defense!", 20, "Attendance bonus");
                                    }
                                    if (current.NE_TRANH != 0)
                                    {
                                          base.Khen_thuong_them_vao_ne_tranh += current.NE_TRANH;
                                          base.UpdatePowersAndStatus();
                                          base.GameMessage("get" + current.NE_TRANH.ToString() + "Avoid value!", 20, "Attendance bonus");
                                    }
                                    if (current.TRUNG_MUC_TIEU != 0)
                                    {
                                          base.Khen_thuong_them_vao_trung_muc_tieu += current.TRUNG_MUC_TIEU;
                                          base.UpdatePowersAndStatus();
                                          base.GameMessage("get" + current.TRUNG_MUC_TIEU.ToString() + "Hits value!", 20, "Attendance bonus");
                                    }
                                    if (current.NOI_CONG != 0)
                                    {
                                          base.Khen_thuong_them_vao_noi_cong += current.NOI_CONG;
                                          base.UpdatePowersAndStatus();
                                          base.GameMessage("get" + current.NOI_CONG.ToString() + "Internal strength value!", 20, "Attendance bonus");
                                    }
                                    if (current.TIEN_BAC != "")
                                    {
                                          base.Player_Money += long.Parse(current.TIEN_BAC);
                                          base.GameMessage("Get medal" + current.TIEN_BAC + "Two!", 20, "Attendance bonus");
                                          base.Get_Money_Tip(uint.Parse(current.TIEN_BAC));
                                          base.UpdateMoneyAndWeight();
                                    }
                                    if (current.GOI_VIP_VAT_PHAM != "")
                                    {
                                          int num3 = base.DUOC_KIEN_HANG_RONG_VI_TRI();
                                          if (num3 == -1)
                                          {
                                                goto Label_05BF;
                                          }
                                          char[] chArray2 = new char[] { ';' };
                                          string[] strArray2 = current.GOI_VIP_VAT_PHAM.Split(chArray2);
                                          this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(int.Parse(strArray2[0]), num3, int.Parse(strArray2[1]), int.Parse(strArray2[2]), int.Parse(strArray2[3]), int.Parse(strArray2[4]), int.Parse(strArray2[5]), int.Parse(strArray2[6]), int.Parse(strArray2[7]), int.Parse(strArray2[8]), int.Parse(strArray2[9]), int.Parse(strArray2[10]), int.Parse(strArray2[11]));
                                          base.GameMessage("Congratulations, you get a prize. Quickly open and see", 20, "Attendance bonus");
                                    }
                                    if (current.GOI_VIP_VAT_PHAM_2 != "")
                                    {
                                          int num4 = base.DUOC_KIEN_HANG_RONG_VI_TRI();
                                          if (num4 == -1)
                                          {
                                                goto Label_05D3;
                                          }
                                          char[] chArray3 = new char[] { ';' };
                                          string[] strArray3 = current.GOI_VIP_VAT_PHAM_2.Split(chArray3);
                                          this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(int.Parse(strArray3[0]), num4, int.Parse(strArray3[1]), int.Parse(strArray3[2]), int.Parse(strArray3[3]), int.Parse(strArray3[4]), int.Parse(strArray3[5]), int.Parse(strArray3[6]), int.Parse(strArray3[7]), int.Parse(strArray3[8]), int.Parse(strArray3[9]), int.Parse(strArray3[10]), int.Parse(strArray3[11]));
                                          base.GameMessage("Congratulations, you get a prize. Quickly open and see", 20, "Attendance bonus");
                                    }
                                    if ((current.Thanh_vien_thu_bac != 0) && (base.Thanh_vien_thu_bac < World.Nhan_vat_level_cao_nhat))
                                    {
                                          if ((base.Thanh_vien_thu_bac + current.Thanh_vien_thu_bac) > World.Nhan_vat_level_cao_nhat)
                                          {
                                                base.Thanh_vien_thu_bac = World.Nhan_vat_level_cao_nhat;
                                          }
                                          else
                                          {
                                                base.Thanh_vien_thu_bac += current.Thanh_vien_thu_bac;
                                                base.GameMessage("Congratulations, you get VIP Level" + current.Thanh_vien_thu_bac.ToString() + "level!", 10, "Attendance bonus");
                                          }
                                          base.LUU_NHAN_VAT_SO_LIEU();
                                    }
                              }
                              return;
                              Label_05A8:
                              base.GameMessage("Backpack no vacancy, and quickly clean up under the bar.", 20, "Attendance bonus");
                              return;
                              Label_05BF:
                              base.GameMessage("Backpack no vacancy, and quickly clean up under the bar.", 20, "Attendance bonus");
                              return;
                              Label_05D3:
                              base.GameMessage("Backpack no vacancy, and quickly clean up under the bar.", 20, "Attendance bonus");
                        }
                  }
                  catch (Exception exception)
                  {
                        Form1.WriteLine(1, "Attendance bonus System error! [" + base.Userid + "]-[" + base.UserName + "]" + exception.Message);
                  }
            }

            public void HE_THONG_CHUYEN_SINH()
            {
                  try
                  {
                        object[] objArray1;
                        int num;
                        byte[] buffer;
                        string[] strArray;
                        int num2;
                        int num3;
                        if (World.Chuyen_sinh_khen_thuong_loai_hinh == 7)
                        {
                              goto Label_070E;
                        }
                        if (base.Chuyen_sinh_so_lan >= World.Han_che_chuyen_sinh_so_lan)
                        {
                              base.GameMessage("The maximum number of times as the reincarnation of the suit" + World.Han_che_chuyen_sinh_so_lan + "Times!", 10, "Reincarnation Tips");
                        }
                        else
                        {
                              if ((base.Player_FLD_LEVEL < World.Chuyen_sinh_can_level) || (base.Player_FLD_JOB_LEVEL < World.Chuyen_sinh_can_may_vong))
                              {
                                    goto Label_06C2;
                              }
                              switch (World.Chuyen_sinh_khen_thuong_loai_hinh)
                              {
                                    case 0:
                                          base.Player_WuXun += World.Chuyen_sinh_khen_thuong_so_luong;
                                          base.UpdatePowersAndStatus();
                                          base.GameMessage("Reincarnation is successful, you are presented" + World.Chuyen_sinh_khen_thuong_so_luong + "Wu Xun point!", 10, "Reincarnation Tips");
                                          goto Label_05E4;

                                    case 1:
                                          if (base.FLD_RXPIONT != World.Nhan_vat_lon_nhat_CASH_so_luong)
                                          {
                                                this.KIEM_TRA_BACH_BAO_CAC_NGUYEN_BAO_SO_LUONG();
                                                base.KIEM_SOAT_CASH_SO_LIEU(World.Chuyen_sinh_khen_thuong_so_luong, 1);
                                                base.GameMessage("Reincarnation is successful, you are presented" + World.Chuyen_sinh_khen_thuong_so_luong + "Ingot!", 10, "Reincarnation Tips");
                                                base.UPDATE_RXPIONT();
                                          }
                                          goto Label_05E4;

                                    case 2:
                                          base.Player_Money += World.Chuyen_sinh_khen_thuong_so_luong;
                                          base.GameMessage("Reincarnation is successful, you are presented" + World.Chuyen_sinh_khen_thuong_so_luong + "money!", 10, "Reincarnation Tips");
                                          base.UpdateMoneyAndWeight();
                                          goto Label_05E4;

                                    case 3:
                                          {
                                                char[] separator = new char[] { ';' };
                                                string[] strArray2 = World.Chuyen_sinh_khen_thuong_Thuoc_tinh.Split(separator);
                                                char[] chArray3 = new char[] { ',' };
                                                string[] strArray3 = World.Thang_cap_thanh_vien_can_Thuoc_tinh.Split(chArray3);
                                                if (int.Parse(strArray2[0]) != 0)
                                                {
                                                      base.Khen_thuong_them_vao_sinh_menh += long.Parse(strArray2[0]);
                                                      base.GameMessage("life" + int.Parse(strArray2[0]), 10, "Reincarnation prompt");
                                                }
                                                if ((long.Parse(strArray2[1]) != 0) && (base.Khen_thuong_them_vao_cong_kich < long.Parse(strArray3[0])))
                                                {
                                                      base.Khen_thuong_them_vao_cong_kich += long.Parse(strArray2[1]);
                                                      base.GameMessage("attack" + long.Parse(strArray2[1]), 10, "Reincarnation prompt");
                                                }
                                                if ((long.Parse(strArray2[2]) != 0) && (base.Khen_thuong_them_vao_phong_ngu < long.Parse(strArray3[1])))
                                                {
                                                      base.Khen_thuong_them_vao_phong_ngu += long.Parse(strArray2[2]);
                                                      base.GameMessage("defense" + long.Parse(strArray2[2]), 10, "Reincarnation prompt");
                                                }
                                                if (int.Parse(strArray2[3]) != 0)
                                                {
                                                      base.Khen_thuong_them_vao_ne_tranh += int.Parse(strArray2[3]);
                                                      base.GameMessage("avoid" + int.Parse(strArray2[3]), 10, "Reincarnation prompt");
                                                }
                                                if (int.Parse(strArray2[4]) != 0)
                                                {
                                                      base.Khen_thuong_them_vao_noi_cong += int.Parse(strArray2[4]);
                                                      base.GameMessage("Neigong" + int.Parse(strArray2[4]), 10, "Reincarnation prompt");
                                                }
                                                if (int.Parse(strArray2[5]) != 0)
                                                {
                                                      base.Khen_thuong_them_vao_trung_muc_tieu += int.Parse(strArray2[5]);
                                                      base.GameMessage("Hit" + int.Parse(strArray2[5]), 10, "Reincarnation prompt");
                                                }
                                                if ((int.Parse(strArray2[6]) != 0) && (base.FLD_RXPIONT != World.Nhan_vat_lon_nhat_CASH_so_luong))
                                                {
                                                      this.KIEM_TRA_BACH_BAO_CAC_NGUYEN_BAO_SO_LUONG();
                                                      base.KIEM_SOAT_CASH_SO_LIEU(int.Parse(strArray2[6]), 1);
                                                      base.GameMessage("Reincarnation is successful, you are presented" + int.Parse(strArray2[6]) + "Ingot!", 10, "Reincarnation prompt");
                                                      base.UPDATE_RXPIONT();
                                                }
                                                if ((int.Parse(strArray2[7]) != 0) && (base.Thanh_vien_thu_bac < World.Nhan_vat_level_cao_nhat))
                                                {
                                                      if ((base.Thanh_vien_thu_bac + int.Parse(strArray2[7])) > World.Nhan_vat_level_cao_nhat)
                                                      {
                                                            base.Thanh_vien_thu_bac = World.Nhan_vat_level_cao_nhat;
                                                      }
                                                      else
                                                      {
                                                            base.Thanh_vien_thu_bac += int.Parse(strArray2[7]);
                                                            base.GameMessage("Reincarnation is successful, the system Get your VIP Level" + long.Parse(strArray2[7]) + "level!", 10, "Reincarnation prompt");
                                                      }
                                                      base.LUU_NHAN_VAT_SO_LIEU();
                                                }
                                                goto Label_05E4;
                                          }
                                    case 4:
                                          num = base.DUOC_KIEN_HANG_RONG(this);
                                          if (num != -1)
                                          {
                                                goto Label_0537;
                                          }
                                          base.GameMessage("Please leave an empty backpack, give you a suit!", 10, "Reincarnation prompt");
                                          return;

                                    case 5:
                                          {
                                                char[] chArray1 = new char[] { ';' };
                                                strArray = World.Chuyen_sinh_khen_thuong_Item.Split(chArray1);
                                                num2 = base.DUOC_KIEN_HANG_RONG(this);
                                                if (num2 != -1)
                                                {
                                                      goto Label_0568;
                                                }
                                                base.GameMessage("Please leave an empty backpack, send you a mysterious gift Oh!", 10, "Reincarnation prompt");
                                                return;
                                          }
                                    case 6:
                                          Players players;
                                          if (World.allConnectedChars.TryGetValue(base.UserSessionID, out players))
                                          {
                                                DateTime now = DateTime.Now;
                                                now = DateTime.Now.AddDays((double)World.Chuyen_sinh_khen_thuong_so_luong);
                                                base.FLD_VIP = 1;
                                                base.FLD_VIPTIM = now;
                                                base.LUU_THANH_VIEN_SO_LIEU();
                                          }
                                          base.GameMessage("Congratulations, you get" + World.Chuyen_sinh_khen_thuong_so_luong + "Day membership, please check the small back!", 10, "Reincarnation prompt");
                                          goto Label_05E4;
                              }
                              base.GameMessage("The service is not open reincarnation features!", 10, "system hint");
                        }
                        return;
                        Label_0537:
                        buffer = BitConverter.GetBytes(RxjhClass.GetDBItmeId());
                        byte[] buffer2 = new byte[0x38];
                        this.TANG_CUONG_VAT_PHAM_1(buffer, BitConverter.GetBytes(World.Chuyen_sinh_khen_thuong_trang_phuc), num, BitConverter.GetBytes(1), buffer2, false);
                        goto Label_05E4;
                        Label_0568:
                        this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(int.Parse(strArray[0]), num2, int.Parse(strArray[1]), int.Parse(strArray[2]), int.Parse(strArray[3]), int.Parse(strArray[4]), int.Parse(strArray[5]), int.Parse(strArray[6]), int.Parse(strArray[7]), int.Parse(strArray[8]), int.Parse(strArray[9]), int.Parse(strArray[10]), int.Parse(strArray[11]));
                        base.GameMessage("Congratulations, you get a system of reward items, please check!", 10, "Reincarnation prompt");
                        Label_05E4:
                        num3 = base.Chuyen_sinh_so_lan;
                        base.Chuyen_sinh_so_lan = num3 + 1;
                        if (World.Co_hay_khong_mo_ra_chuyen_sinh_so_lan_khen_thuong == 1)
                        {
                              using (Dictionary<int, ns1.CHUYEN_SINH_SO_LAN_KHEN_THUONG>.ValueCollection.Enumerator enumerator = World.dictionary_19.Values.GetEnumerator())
                              {
                                    Players players2;
                                    while (enumerator.MoveNext())
                                    {
                                          ns1.CHUYEN_SINH_SO_LAN_KHEN_THUONG current = enumerator.Current;
                                          if (base.Chuyen_sinh_so_lan == current.CHUYEN_SINH_SO_LAN)
                                          {
                                                goto Label_0634;
                                          }
                                    }
                                    goto Label_065C;
                                    Label_0634:
                                    players2 = World.smethod_1(base.UserSessionID);
                                    if (players2 != null)
                                    {
                                          players2.CHUYEN_SINH_SO_LAN_KHEN_THUONG();
                                    }
                              }
                        }
                        Label_065C:
                        base.Player_FLD_LEVEL = World.Chuyen_sinh_giam_xuong_level;
                        base.NHAN_VAT_KINH_NGHIEM = 0L;
                        this.NHAN_VAT_CHUYEN_NGHE_NGHIEP(base.Player_Zx, World.Chuyen_sinh_ha_xuong_may_vong);
                        this.UpdateHP_MP_SP();
                        base.UpdateExperience();
                        base.UpdatePowersAndStatus();
                        base.Update_Figure_Data(this);
                        base.Upgrade_Tip(1);
                        if (World.Chuyen_sinh_thong_cao == 1)
                        {
                              World.SendMsg(string.Format(World.Chuyen_sinh_thong_cao_noi_dung, base.UserName));
                        }
                        return;
                        Label_06C2:
                        objArray1 = new object[] { "Must reach", World.Chuyen_sinh_can_level, "Level and", World.Chuyen_sinh_can_may_vong, "To reincarnation!" };
                        base.GameMessage(string.Concat(objArray1), 10, "Reincarnation prompt");
                        return;
                        Label_070E:
                        base.GameMessage("The service is not open reincarnation features!", 10, "system hint");
                  }
                  catch (Exception exception)
                  {
                        Form1.WriteLine(1, "转生系统出错! [" + base.Userid + "]-[" + base.UserName + "]" + exception.Message);
                  }
            }

            #region 퀘스트 판독 LUA
            public void MissIonLuaScript(byte[] byte_5, int length)
            {
                  //2017-03-13 수정
                  //PlayersBes -> Player_FLD_LEVEL,Player_FLD_JOB_LEVEL  이름변경
                  //AA551500012C0183000600900102000000000000000000000055AA

                  LuaFunction function;
                  int num = BitConverter.ToUInt16(byte_5, 11);
                  int num1 = BitConverter.ToUInt16(byte_5, 13);
                  int num2 = BitConverter.ToInt16(byte_5, 15);

                  Form1.WriteLine(1, string.Format("MissIon Code : {0},{1},{2},{3}", base.UserSessionID, num, num1, num2));
                  try
                  {
                        if (num1 != 4)
                        {
                              if (!World.scriptClass_0.NHIEM_VU_SU_KIEN_DANH_SACH.TryGetValue(num, out function))
                              {
                                    Form1.WriteLine(1, string.Format("MissIon Code [1] : {0},{1},{2},{3}", base.UserSessionID, num, num1, num2));
                                    function = World.scriptClass_0.pLuaVM.GetFunction(string.Concat("MissIon", num));
                                    World.scriptClass_0.NHIEM_VU_SU_KIEN_DANH_SACH.Add(num, function);
                              }
                              if (function == null)
                              {
                                    Form1.WriteLine(1, string.Format("MissIon Code [2] : {0},{1},{2},{3}", base.UserSessionID, num, num1, num2));
                                    switch (num1)
                                    {
                                          case 1:
                                                {
                                                      this.NHIEM_VU_NHAC_NHO_SO_LIEU_GUI_DI(num, 11, num2);
                                                      break;
                                                }
                                          case 3:
                                                {
                                                      this.NHIEM_VU_NHAC_NHO_SO_LIEU_GUI_DI(num, 31, num2);
                                                      break;
                                                }
                                          case 5:
                                                {
                                                      this.NHIEM_VU_NHAC_NHO_SO_LIEU_GUI_DI(num, 51, num2);
                                                      break;
                                                }
                                    }
                              }
                              else
                              {
                                    Form1.WriteLine(1, string.Format("MissIon Code [3] : {0},{1},{2},{3}", base.UserSessionID, num, num1, num2));
                                    function.Call(new object[] { base.UserSessionID, num, num1, num2 });

                              }
                        }
                        else
                        {
                              Form1.WriteLine(1, string.Format("MissIon Code [4] : {0},{1},{2},{3}", base.UserSessionID, num, num1, num2));
                              this.NHIEM_VU_NHAC_NHO_SO_LIEU_GUI_DI(num, 41, num2);
                              this.THIET_LAP_NHIEM_VU_SO_LIEU(num, num2);
                        }
                  }
                  catch (Exception exception1)
                  {
                        Exception exception = exception1;
                        Console.WriteLine(exception);
                        Form1.WriteLine(2, string.Concat(new object[] { "MissIon", num, "(", base.UserSessionID, ",", num, ",", num1, ",", num2, ")" }));
                        Form1.WriteLine(2, string.Concat("And NPC dialogue--", exception.Message));
                        switch (num1)
                        {
                              case 1:
                                    {
                                          this.NHIEM_VU_NHAC_NHO_SO_LIEU_GUI_DI(num, 11, num2);
                                          break;
                                    }
                              case 2:
                              case 4:
                                    {
                                          break;
                                    }
                              case 3:
                                    {
                                          this.NHIEM_VU_NHAC_NHO_SO_LIEU_GUI_DI(num, 31, num2);
                                          break;
                                    }
                              case 5:
                                    {
                                          this.NHIEM_VU_NHAC_NHO_SO_LIEU_GUI_DI(num, 51, num2);
                                          break;
                                    }
                              default:
                                    {
                                          break;
                                    }
                        }
                  }
            }
            #endregion

            public void HIEN_THI_THANH_VIEN_PARTY()
            {
                  try
                  {
                        TO_DOI_CLASS to_doi_class;
                        if (World.jlMsg == 1)
                        {
                              Form1.WriteLine(0, "Players_显示队员");
                        }
                        if (World.W_TO_DOI.TryGetValue(base.TO_DOI_ID, out to_doi_class))
                        {
                              using (PacketData data = new PacketData())
                              {
                                    data.method_2(1);
                                    data.method_2(100);
                                    data.method_2(0);
                                    data.method_2(to_doi_class.dictionary_0.Count);
                                    data.method_2(1);
                                    data.method_2(0);
                                    foreach (Players players in to_doi_class.dictionary_0.Values)
                                    {
                                          if (players.UserName == to_doi_class.string_0)
                                          {
                                                data.Write2(players.UserSessionID);
                                                data.Write2((int)players.NHAN_VAT_HP);
                                                data.Write2(players.NHAN_VAT_MP);
                                                data.Write2((int)players.NHAN_VAT_LON_NHAT_HP);
                                                data.Write2(players.NHAN_VAT_LON_NHAT_MP);
                                                data.method_15(players.UserName, 14);
                                                data.Write4(0);
                                          }
                                    }
                                    foreach (Players players2 in to_doi_class.dictionary_0.Values)
                                    {
                                          if (players2.UserName != to_doi_class.string_0)
                                          {
                                                data.Write4(0);
                                                data.Write2(players2.UserSessionID);
                                                data.Write2((int)players2.NHAN_VAT_HP);
                                                data.Write2(players2.NHAN_VAT_MP);
                                                data.Write2((int)players2.NHAN_VAT_LON_NHAT_HP);
                                                data.Write2(players2.NHAN_VAT_LON_NHAT_MP);
                                                data.method_15(players2.UserName, 14);
                                                data.Write4(0);
                                          }
                                    }
                                    for (int i = 0; i < to_doi_class.dictionary_0.Count; i++)
                                    {
                                          if (base.Client != null)
                                          {
                                                base.Client.method_5(data, 0x7800, base.UserSessionID, 0);
                                          }
                                    }
                              }
                        }
                  }
                  catch (Exception exception)
                  {
                        Form1.WriteLine(1, "显示队员()错误[" + base.Userid + "]-[" + base.UserName + "]" + exception.Message);
                  }
            }

            public void HOC_KHI_CONG_MOI(int int_128)
            {
                  if (BitConverter.ToInt16(base.Qigong[int_128].气功_byte, 0) == 0xff)
                  {
                        base.Qigong[int_128] = new QigongClass(new byte[2]);
                        base.UpdatePowersAndStatus();
                  }
            }

            public void HOC_TAP_CHE_TAC_KY_NANG(byte[] byte_5, int int_128)
            {
                  if (World.jlMsg == 1)
                  {
                        Form1.WriteLine(0, "Players_HOC_TAP_CHE_TAC_KY_NANG");
                  }
                  if (base.FLD_CHE_TAO_LOAI_HINH == 0)
                  {
                        byte[] dst = new byte[4];
                        Buffer.BlockCopy(byte_5, 11, dst, 0, 2);
                        int num = BitConverter.ToInt32(dst, 0);
                        base.FLD_CHE_TAO_LOAI_HINH = num;
                        base.FLD_CHE_TAO_DO_THUAN_THUC = 0;
                        byte[] buffer2 = Converter.hexStringToByte("AA55670001BF013917580002000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000784A55AA");
                        Buffer.BlockCopy(dst, 0, buffer2, 11, 2);
                        Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, buffer2, 5, 2);
                        if (base.Client != null)
                        {
                              base.Client.method_8(buffer2, buffer2.Length);
                        }
                        base.Production_Level();
                        base.UpdateExperience();
                        base.Update_Production_System();
                  }
            }

            public void HOC_TAP_CHE_TAO_KY_NANG(byte[] byte_5, int int_128)
            {
                  if (World.jlMsg == 1)
                  {
                        Form1.WriteLine(0, "Players_HOC_TAP_CHE_TAO_KY_NANG");
                  }
                  if (base.FLD_CHE_TAO_LOAI_HINH == 0)
                  {
                        this.PACKET_VE_KY_NANG_CHE_TAO();
                  }
                  else
                  {
                        base.FLD_CHE_TAO_LOAI_HINH = 0;
                        base.FLD_CHE_TAO_DO_THUAN_THUC = 0;
                        byte[] dst = Converter.hexStringToByte("AA550E0000AC04431708000100000080C3C90155AA");
                        Buffer.BlockCopy(BitConverter.GetBytes(base.FLD_CHE_TAO_LOAI_HINH), 0, dst, 11, 2);
                        Buffer.BlockCopy(BitConverter.GetBytes((long)0x1c9c380L), 0, dst, 15, 4);
                        Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, dst, 5, 2);
                        if (base.Client != null)
                        {
                              base.Client.method_8(dst, dst.Length);
                        }
                        base.Production_Level();
                        base.UpdateExperience();
                        base.Update_Production_System();
                  }
            }

            public void HOP_THANH_HE_THONG_TACH_RA_DUNG()
            {
                  for (int i = 0; i < 0x24; i++)
                  {
                        base.TRANG_BI_LAN_BAO_VAY[i].bool_0 = true;
                  }
            }

            public void HOP_THANH_HE_THONG_TACH_RA_SAI()
            {
                  for (int i = 0; i < 0x24; i++)
                  {
                        base.TRANG_BI_LAN_BAO_VAY[i].bool_0 = false;
                  }
            }

            public void HOP_THANH_NHAC_NHO(int int_128, int int_129, int int_130, VAT_PHAM_LOAI class23_6)
            {
                  byte[] dst = Converter.hexStringToByte("AA55770001330251006800150001000000000000000000000000000000000042EEF8050000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000008813000000000000000000000000000000000000000000000000625855AA");
                  Buffer.BlockCopy(BitConverter.GetBytes(int_128), 0, dst, 11, 2);
                  Buffer.BlockCopy(BitConverter.GetBytes(int_129), 0, dst, 13, 2);
                  Buffer.BlockCopy(BitConverter.GetBytes(class23_6.VAT_PHAM_VI_TRI), 0, dst, 0x1b, 4);
                  Buffer.BlockCopy(class23_6.VAT_PHAM_ID, 0, dst, 0x1f, 4);
                  Buffer.BlockCopy(class23_6.Item_thuoc_tinh, 0, dst, 0x27, 0x38);
                  Buffer.BlockCopy(BitConverter.GetBytes((long)int_130), 0, dst, 0x5f, 4);
                  Buffer.BlockCopy(BitConverter.GetBytes((long)int_130), 0, dst, 0x67, 4);
                  Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, dst, 5, 2);
                  if (base.Client != null)
                  {
                        base.Client.method_8(dst, dst.Length);
                  }
            }

            public void HUY_BO_SAO_CHEP(byte[] byte_5, int int_128)
            {
                  try
                  {
                        this.Packet_Modify(byte_5, int_128);
                        if (base.Exiting)
                        {
                              Form1.WriteLine(6, "退出复制BUG [" + base.Userid + "][" + base.UserName + "][" + base.Client.ToString() + "] ");
                        }
                        else if ((!base.OpenWarehouse && ((base.PlayerShop == null) || !base.PlayerShop.PersonStore_Open)) && (base.dictionary_3.ContainsKey(0x3c14dc8d) || base.dictionary_3.ContainsKey(0x3c14dd38)))
                        {
                              for (int i = 0; i < 14; i++)
                              {
                                    if ((base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[i].GetItem_ID != 0) && (base.class23_4[i].GetItem_ID != 0))
                                    {
                                          base.class23_5[i].Item_byte = base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[i].Item_byte;
                                          base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[i].Item_byte = base.class23_4[i].Item_byte;
                                          base.class23_4[i].Item_byte = base.class23_5[i].Item_byte;
                                          base.class23_5[i].Item_byte = new byte[0x49];
                                    }
                                    else if ((base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[i].GetItem_ID == 0) && (base.class23_4[i].GetItem_ID != 0))
                                    {
                                          base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[i].Item_byte = base.class23_4[i].Item_byte;
                                          base.class23_4[i].Item_byte = new byte[0x49];
                                    }
                              }
                              base.LAN_DAU_DOI_THOAI_DA_TRANG_BI_VAT_PHAM();
                              this.Update_Equipment_Effectiveness();
                              base.TINH_TOAN_NHAN_VAT_TRANG_BI_SO_LIEU();
                              base.UpdatePowersAndStatus();
                              base.UpdateMoneyAndWeight();
                              this.UpdateHP_MP_SP();
                        }
                  }
                  catch (Exception exception)
                  {
                        Form1.WriteLine(1, "更换辅助装备出错 [" + base.Userid + "][" + base.UserName + "] " + exception.Message);
                  }
            }

            public void ITEM_TRAO_DOI_HE_THONG(ITEM_TRAO_DOI class56_0)
            {
                  int num = 0;
                  char[] separator = new char[] { ';' };
                  string[] strArray = class56_0.CAN_ITEM.Split(separator);
                  for (int i = 0; i < strArray.Length; i++)
                  {
                        if (strArray[i] != null)
                        {
                              char[] chArray2 = new char[] { ',' };
                              string[] strArray2 = strArray[i].Split(chArray2);
                              for (int j = 0; j < 0x24; j++)
                              {
                                    if ((BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[j].VAT_PHAM_ID, 0) == int.Parse(strArray2[0])) && (BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[j].VAT_PHAM_SO_LUONG, 0) >= int.Parse(strArray2[1])))
                                    {
                                          goto Label_0085;
                                    }
                              }
                        }
                        continue;
                        Label_0085:
                        num++;
                  }
                  if (num == strArray.Length)
                  {
                        for (int k = 0; k < num; k++)
                        {
                              char[] chArray3 = new char[] { ',' };
                              string[] strArray3 = strArray[k].Split(chArray3);
                              int index = 0;
                              while (index < 0x24)
                              {
                                    if (BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_ID, 0) == int.Parse(strArray3[0]))
                                    {
                                          goto Label_00E6;
                                    }
                                    index++;
                              }
                              continue;
                              Label_00E6:
                              this.LAM_GIAM_DI_VAT_PHAM(index, int.Parse(strArray3[1]));
                        }
                        this.TRAO_DOI_ITEM_XAC_NHAN(class56_0);
                  }
                  else
                  {
                        base.GameMessage(class56_0.THUYET_MINH.ToString() ?? "", 9, "Exchange goods");
                  }
            }

            public void KEO_BUA_BAO_NHAC_NHO(int int_128, int int_129, int int_130, int int_131)
            {
                  byte[] dst = Converter.hexStringToByte("AA55170001D10374170800030001000300010000000000000065FD55AA");
                  Buffer.BlockCopy(BitConverter.GetBytes(int_128), 0, dst, 11, 2);
                  Buffer.BlockCopy(BitConverter.GetBytes(int_129), 0, dst, 13, 2);
                  Buffer.BlockCopy(BitConverter.GetBytes(int_130), 0, dst, 15, 2);
                  Buffer.BlockCopy(BitConverter.GetBytes(int_131), 0, dst, 0x11, 2);
                  Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, dst, 5, 2);
                  if (base.Client != null)
                  {
                        base.Client.method_8(dst, dst.Length);
                  }
            }

            public void KHIEU_CHIEN_HE_THONG()
            {
                  if (World.Ca_nhan_khieu_chien_co_hay_khong_mo_ra == 0)
                  {
                        return;
                  }
                  bool flag = false;
                  using (IEnumerator<Players> enumerator = World.allConnectedChars.Values.GetEnumerator())
                  {
                        while (enumerator.MoveNext())
                        {
                              if (enumerator.Current.CharacterCoords_Map == World.Khieu_chien_ban_do_so_hieu)
                              {
                                    goto Label_0038;
                              }
                        }
                        goto Label_0046;
                        Label_0038:
                        flag = true;
                  }
                  Label_0046:
                  if (!World.list_2.Contains(this))
                  {
                        if (flag)
                        {
                              base.GameMessage("It has been challenging the system, please try again later application", 0x15, "Challenge System");
                              return;
                        }
                        World.list_2.Add(this);
                        if (base.FLD_RXPIONT < World.Khieu_chien_xin_can_thiet_CASH_So_luong)
                        {
                              base.GameMessage("Your ingot inadequate, need to participate in Challenge gold[" + World.Khieu_chien_xin_can_thiet_CASH_So_luong + "]Months", 0x16, "Rules Challenge");
                              return;
                        }
                        base.PlayerPKMode = 2;
                        this.MOVE_NEW((float)World.Khieu_chien_ban_do_toa_do_X, (float)World.Khieu_chien_ban_do_toa_do_Y, 15f, World.Khieu_chien_ban_do_so_hieu);
                        base.method_47((long)World.Khieu_chien_xin_can_thiet_CASH_So_luong, 0);
                        base.UPDATE_RXPIONT();
                        base.GameMessage("The system automatically charged ingot[" + World.Khieu_chien_xin_can_thiet_CASH_So_luong + "]Months, after winning get all gold", 0x16, "Rules Challenge");
                        base.GameMessage("You can use the command[" + World.Gui_di_khieu_chien_thu_tuc_menh_lenh + "], Sending full-service challenges of the information", 0x16, "Rules Challenge");
                        foreach (Players players in World.allConnectedChars.Values)
                        {
                              int num = new Random(World.smethod_15()).Next(1, 4);
                              string str = string.Format(World.Khieu_chien_la_to_noi_dung_1, base.UserName);
                              string str2 = string.Format(World.Khieu_chien_la_to_noi_dung_2, base.UserName);
                              string str3 = string.Format(World.Khieu_chien_la_to_noi_dung_3, base.UserName);
                              switch (num)
                              {
                                    case 1:
                                          players.GameMessage(str ?? "", 0x17, "Full service provocation");
                                          break;

                                    case 2:
                                          players.GameMessage(str2 ?? "", 0x18, "Full service provocation");
                                          break;

                                    case 3:
                                          players.GameMessage(str3 ?? "", 0x1a, "Full service provocation");
                                          break;

                                    default:
                                          players.GameMessage(str3 ?? "", 0x1a, "Full service provocation");
                                          break;
                              }
                              players.GameMessage("Please enter in the chat window[" + World.Khieu_chien_tham_gia_menh_lenh + "]Commands can participate in the challenge", 0x16, "Rules Challenge");
                              players.GameMessage("Bet ingot needs[" + World.Khieu_chien_xin_can_thiet_CASH_So_luong + "]Gold, after winning the competition to obtain ingots", 0x16, "Rules Challenge");
                              players.GameMessage("Challenge does not count in this map membership levels, counting only attribute, attribute feel very cattle to challenge you", 0x16, "Rules Challenge");
                              if (World.Khieu_chien_he_thong_thu_ve_CASH_So_luong != 0)
                              {
                                    players.GameMessage("The system will automatically deduct[" + World.Khieu_chien_he_thong_thu_ve_CASH_So_luong + "]Ingots", 0x16, "Rules Challenge");
                              }
                        }
                  }
                  else
                  {
                        base.GameMessage("You have to request the opening of the challenge, please do not repeat open", 0x15, "Challenge System");
                  }
            }

            public void KHIEU_CHIEN_THIET_LAP()
            {
                  if ((World.Ca_nhan_khieu_chien_co_hay_khong_mo_ra != 0) && (base.CharacterCoords_Map != World.Khieu_chien_ban_do_so_hieu))
                  {
                        if (World.list_2.Count == 1)
                        {
                              if (World.list_2.Contains(this))
                              {
                                    base.GameMessage("You have not to repeat the registration in the competition", 0x16, "Rules Challenge");
                              }
                              else if (base.FLD_RXPIONT < World.Khieu_chien_xin_can_thiet_CASH_So_luong)
                              {
                                    base.GameMessage("@Cash khong du, can co[" + World.Khieu_chien_xin_can_thiet_CASH_So_luong + "]", 0x16, "Đấu trường");
                              }
                              else
                              {
                                    World.list_2.Add(this);
                                    if (World.class12_0 == null)
                                    {
                                          World.class12_0 = new KHIEU_CHIEN_THIET_LAP_2();
                                    }
                                    base.PlayerPKMode = 2;
                                    this.MOVE_NEW((float)World.Khieu_chien_ban_do_toa_do_X, (float)World.Khieu_chien_ban_do_toa_do_Y, 15f, World.Khieu_chien_ban_do_so_hieu);
                                    base.method_47((long)World.Khieu_chien_xin_can_thiet_CASH_So_luong, 0);
                                    base.UPDATE_RXPIONT();
                                    base.GameMessage("The system automatically charged ingot[" + World.Khieu_chien_xin_can_thiet_CASH_So_luong + "]Months, after winning get all gold", 0x16, "Rules Challenge");
                                    foreach (Players players in World.allConnectedChars.Values)
                                    {
                                          int num = new Random(World.smethod_15()).Next(1, 4);
                                          string str = string.Format(World.Chap_nhan_khieu_chien_la_to_noi_dung_1, base.UserName);
                                          string str2 = string.Format(World.Chap_nhan_khieu_chien_la_to_noi_dung_2, base.UserName);
                                          string str3 = string.Format(World.Chap_nhan_khieu_chien_la_to_noi_dung_3, base.UserName);
                                          switch (num)
                                          {
                                                case 1:
                                                      players.GameMessage(str ?? "", 0x17, "accept the challenge");
                                                      break;

                                                case 2:
                                                      players.GameMessage(str2 ?? "", 0x18, "accept the challenge");
                                                      break;

                                                case 3:
                                                      players.GameMessage(str3 ?? "", 0x1a, "accept the challenge");
                                                      break;

                                                default:
                                                      players.GameMessage(str3 ?? "", 0x1a, "accept the challenge");
                                                      break;
                                          }
                                    }
                              }
                        }
                        else if (World.list_2.Count == 2)
                        {
                              base.GameMessage("Which has already begun intense fighting, please wait participate", 0x17, "Challenge System");
                        }
                        else
                        {
                              base.GameMessage("Temporarily unmanned open challenge system", 0x17, "Challenge System");
                              base.GameMessage("You can use the command[" + World.Mot_minh_dau_mo_ra_menh_lenh + "]Open Challenge System", 0x17, "Challenge System");
                              base.GameMessage("Open to consume gold" + World.Khieu_chien_xin_can_thiet_CASH_So_luong, 0x17, "Challenge System");
                        }
                  }
            }

            public void KHO_CAC_MAT_HANG_VAT_PHAM_CONG_VOI_COT(int int_128, int int_129, long long_17, int int_130, int int_131, int int_132)
            {
                  int num = 0;
                  int num2 = 0;
                  try
                  {
                        VAT_PHAM_LOAI vat_pham_loai;
                        TBL_XWWL_ITEM tbl_xwwl_item;
                        VAT_PHAM_LOAI vat_pham_loai2;
                        if (int_128 == 0x77359400)
                        {
                              if (int_131 == 5)
                              {
                                    if (base.CA_NHAN_NHA_KHO_TIEN_SO_LUONG < long_17)
                                    {
                                          Form1.WriteLine(6, string.Concat(new object[] { "非法复制_仓库存取_取仓库1[", base.Userid, "]-[", base.UserName, "]___[", int_131, "]___[", int_128, "]___[", int_129, "]___[", long_17, "]" }));
                                          return;
                                    }
                                    base.Player_Money += long_17;
                                    base.CA_NHAN_NHA_KHO_TIEN_SO_LUONG -= long_17;
                                    this.KHO_VAT_PHAM_CONG_VA_TRU_TIEN(int_128, base.CA_NHAN_NHA_KHO_TIEN_SO_LUONG, 0x95, int_131);
                              }
                              else
                              {
                                    if (base.TONG_HOP_NHA_KHO_TIEN_SO < long_17)
                                    {
                                          Form1.WriteLine(6, string.Concat(new object[] { "非法复制_仓库存取_取仓库2[", base.Userid, "]-[", base.UserName, "]___[", int_131, "]___[", int_128, "]___[", int_129, "]___[", long_17, "]" }));
                                          return;
                                    }
                                    base.Player_Money += long_17;
                                    base.TONG_HOP_NHA_KHO_TIEN_SO -= long_17;
                                    this.KHO_VAT_PHAM_CONG_VA_TRU_TIEN(int_128, base.TONG_HOP_NHA_KHO_TIEN_SO, 0x95, int_131);
                              }
                              goto Label_0923;
                        }
                        if (long_17 < 1L)
                        {
                              return;
                        }
                        if (int_131 == 5)
                        {
                              vat_pham_loai = base.class23_0[int_129];
                              for (int j = 0; j < 60; j++)
                              {
                                    if ((BitConverter.ToInt32(base.class23_0[j].VAT_PHAM_SO_LUONG, 0) > 0) || (BitConverter.ToInt32(base.class23_0[j].VAT_PHAM_ID, 0) != 0))
                                    {
                                          num++;
                                    }
                              }
                        }
                        else
                        {
                              vat_pham_loai = base.class23_1[int_129];
                              for (int k = 0; k < 60; k++)
                              {
                                    if ((BitConverter.ToInt32(base.class23_1[k].VAT_PHAM_SO_LUONG, 0) > 0) || (BitConverter.ToInt32(base.class23_1[k].VAT_PHAM_ID, 0) != 0))
                                    {
                                          num++;
                                    }
                              }
                        }
                        for (int i = 0; i < 0x24; i++)
                        {
                              if ((BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[i].VAT_PHAM_SO_LUONG, 0) > 0) || (BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[i].VAT_PHAM_ID, 0) != 0))
                              {
                                    num2++;
                              }
                        }
                        if (!World.Itme.TryGetValue(BitConverter.ToInt32(vat_pham_loai.VAT_PHAM_ID, 0), out tbl_xwwl_item))
                        {
                              return;
                        }
                        int num3 = tbl_xwwl_item.FLD_SIDE;
                        if ((num3 == 0) && (long_17 > 1L))
                        {
                              Form1.WriteLine(6, string.Concat(new object[] { "非法复制_仓库存取_取仓库3[", base.Userid, "]-[", base.UserName, "]___[", int_131, "] VAT_PHAM名称[", vat_pham_loai.method_13(), "] VAT_PHAM_SO_LUONG[", BitConverter.ToInt32(vat_pham_loai.VAT_PHAM_SO_LUONG, 0), "] 数量[", long_17, "]" }));
                              if (int_131 == 5)
                              {
                                    base.class23_0[int_129].Item_byte = new byte[0x49];
                              }
                              else
                              {
                                    base.class23_1[int_129].Item_byte = new byte[0x49];
                              }
                              return;
                        }
                        if (BitConverter.ToInt32(vat_pham_loai.VAT_PHAM_SO_LUONG, 0) < long_17)
                        {
                              if (int_131 == 5)
                              {
                                    base.class23_0[int_129].Item_byte = new byte[0x49];
                              }
                              else
                              {
                                    base.class23_1[int_129].Item_byte = new byte[0x49];
                              }
                              Form1.WriteLine(6, string.Concat(new object[] { "非法复制_仓库存取_取仓库4[", base.Userid, "]-[", base.UserName, "]___[", int_131, "] VAT_PHAM名称[", vat_pham_loai.method_13(), "] VAT_PHAM_SO_LUONG[", BitConverter.ToInt32(vat_pham_loai.VAT_PHAM_SO_LUONG, 0), "] 数量[", long_17, "]" }));
                              return;
                        }
                        if (num3 == 0)
                        {
                              long_17 = 1L;
                              if (BitConverter.ToInt32(vat_pham_loai.VAT_PHAM_SO_LUONG, 0) != 1L)
                              {
                                    return;
                              }
                              if ((vat_pham_loai.VAT_PHAM_TONG_TRONG_LUONG + base.NHAN_VAT_MANG_NANG) >= base.NHAN_VAT_MANG_NANG_TONG_TRONG_LUONG)
                              {
                                    base.BuyItem_Tip(11);
                                    return;
                              }
                              base.NHAN_VAT_MANG_NANG += vat_pham_loai.VAT_PHAM_TONG_TRONG_LUONG;
                              byte[] buffer3 = new byte[0x49];
                              byte[] buffer1 = new byte[8];
                              BitConverter.GetBytes(long_17);
                              Buffer.BlockCopy(BitConverter.GetBytes(long_17), 0, buffer3, 12, 4);
                              Buffer.BlockCopy(vat_pham_loai.Item_toan_bo_ID, 0, buffer3, 0, 8);
                              Buffer.BlockCopy(vat_pham_loai.VAT_PHAM_ID, 0, buffer3, 8, 4);
                              Buffer.BlockCopy(vat_pham_loai.Item_thuoc_tinh, 0, buffer3, 0x10, 0x38);
                              Buffer.BlockCopy(vat_pham_loai.Item_byte, 0x48, buffer3, 0x48, 1);
                              base.TRANG_BI_LAN_BAO_VAY[int_130].Item_byte = buffer3;
                              this.NHA_KHO_GOI_ITEM_THAO_TAC(0x9300, int_131, int_128, long_17, base.TRANG_BI_LAN_BAO_VAY[int_130], int_130);
                              if (int_131 == 5)
                              {
                                    if (base.class23_0[int_129].Item_troi_chat)
                                    {
                                          this.NHA_KHO_GOI_ITEM_THAO_TAC(0x9500, int_131, int_128 - 0x4e20, 0L, base.class23_0[int_129], int_129);
                                    }
                                    else
                                    {
                                          this.NHA_KHO_GOI_ITEM_THAO_TAC(0x9500, int_131, int_128, 0L, base.class23_0[int_129], int_129);
                                    }
                                    base.class23_0[int_129].Item_byte = new byte[0x49];
                              }
                              else
                              {
                                    this.NHA_KHO_GOI_ITEM_THAO_TAC(0x9500, int_131, int_128, 0L, base.class23_1[int_129], int_129);
                                    base.class23_1[int_129].Item_byte = new byte[0x49];
                              }
                              goto Label_0923;
                        }
                        if (BitConverter.ToInt32(vat_pham_loai.VAT_PHAM_SO_LUONG, 0) < long_17)
                        {
                              goto Label_0923;
                        }
                        byte[] dst = new byte[0x49];
                        byte[] buffer4 = new byte[4];
                        byte[] src = new byte[8];
                        switch (BitConverter.ToInt32(vat_pham_loai.VAT_PHAM_ID, 0))
                        {
                              case 0x2faf080b:
                              case 0x2faf080c:
                              case 0x2faf080d:
                              case 0x2faf0802:
                              case 0x2faf0801:
                              case 0x2faf0817:
                              case 0x2faf0818:
                              case 0x2faf0819:
                              case 0x2faf081a:
                              case 0x2faf081b:
                              case 0x2faf081c:
                              case 0x2faf083d:
                              case 0x2faf083e:
                                    break;

                              default:
                                    vat_pham_loai2 = base.NHAN_NHAN_VAT_ITEM_LOAI_HINH(BitConverter.ToInt32(vat_pham_loai.VAT_PHAM_ID, 0));
                                    goto Label_06BD;
                        }
                        vat_pham_loai2 = base.method_108(BitConverter.ToInt32(vat_pham_loai.VAT_PHAM_ID, 0), int_132);
                        Label_06BD:
                        if (vat_pham_loai2 != null)
                        {
                              src = vat_pham_loai2.Item_toan_bo_ID;
                              int_130 = vat_pham_loai2.VAT_PHAM_VI_TRI;
                              Buffer.BlockCopy(BitConverter.GetBytes((long)(long_17 + BitConverter.ToInt32(vat_pham_loai2.VAT_PHAM_SO_LUONG, 0))), 0, dst, 12, 4);
                        }
                        else
                        {
                              BitConverter.GetBytes(long_17);
                              src = BitConverter.GetBytes(RxjhClass.GetDBItmeId());
                              Buffer.BlockCopy(BitConverter.GetBytes(long_17), 0, dst, 12, 4);
                        }
                        Buffer.BlockCopy(src, 0, dst, 0, 8);
                        Buffer.BlockCopy(vat_pham_loai.VAT_PHAM_ID, 0, dst, 8, 4);
                        Buffer.BlockCopy(vat_pham_loai.Item_thuoc_tinh, 0, dst, 0x10, 0x38);
                        Buffer.BlockCopy(vat_pham_loai.Item_byte, 0x48, dst, 0x48, 1);
                        if (((vat_pham_loai.Item_mot_minh_trong_luong * long_17) + base.NHAN_VAT_MANG_NANG) >= base.NHAN_VAT_MANG_NANG_TONG_TRONG_LUONG)
                        {
                              base.BuyItem_Tip(11);
                              return;
                        }
                        base.TRANG_BI_LAN_BAO_VAY[int_130].Item_byte = dst;
                        int num4 = BitConverter.ToInt32(vat_pham_loai.VAT_PHAM_SO_LUONG, 0) - ((int)long_17);
                        this.NHA_KHO_GOI_ITEM_THAO_TAC(0x9300, int_131, int_128, long_17, base.TRANG_BI_LAN_BAO_VAY[int_130], int_130);
                        if (int_131 == 5)
                        {
                              if (num4 <= 0)
                              {
                                    this.NHA_KHO_GOI_ITEM_THAO_TAC(0x9500, int_131, int_128, 0L, base.class23_0[int_129], int_129);
                                    base.class23_0[int_129].Item_byte = new byte[0x49];
                              }
                              else
                              {
                                    base.class23_0[int_129].VAT_PHAM_SO_LUONG = BitConverter.GetBytes(num4);
                                    this.NHA_KHO_GOI_ITEM_THAO_TAC(0x9500, int_131, int_128, (long)num4, base.class23_0[int_129], int_129);
                              }
                        }
                        else if (num4 <= 0)
                        {
                              this.NHA_KHO_GOI_ITEM_THAO_TAC(0x9500, int_131, int_128, 0L, base.class23_1[int_129], int_129);
                              base.class23_1[int_129].Item_byte = new byte[0x49];
                        }
                        else
                        {
                              base.class23_1[int_129].VAT_PHAM_SO_LUONG = BitConverter.GetBytes(num4);
                              this.NHA_KHO_GOI_ITEM_THAO_TAC(0x9500, int_131, int_128, (long)num4, base.class23_1[int_129], int_129);
                        }
                  }
                  catch (Exception exception)
                  {
                        Form1.WriteLine(1, string.Concat(new object[] { "仓库_装备栏加VAT_PHAM 出错 [", base.Userid, "][", base.UserName, "]VI_TRI[", int_129, "]数量[", long_17, "]包VI_TRI[", int_130, "]仓库类型[", int_131, "] ", exception.Message }));
                  }
                  Label_0923:
                  base.UpdateMoneyAndWeight();
            }

            public void KHO_CAC_MAT_HANG_VAT_PHAM_CONG_VOI_COT_2(int int_128, int int_129, long long_17, int int_130, int int_131, int int_132)
            {
                  int num = 0;
                  int num2 = 0;
                  try
                  {
                        TBL_XWWL_ITEM tbl_xwwl_item;
                        VAT_PHAM_LOAI vat_pham_loai;
                        if (int_128 == 0x77359400)
                        {
                              if (base.Player_Money < long_17)
                              {
                                    Form1.WriteLine(6, string.Concat(new object[] { "非法复制_仓库存取_放东西到仓库1[", base.Userid, "]-[", base.UserName, "]___[", int_131, "]___[", int_128, "]___[", int_129, "]___[", long_17, "]" }));
                                    return;
                              }
                              base.Player_Money -= long_17;
                              if (int_131 == 3)
                              {
                                    base.CA_NHAN_NHA_KHO_TIEN_SO_LUONG += long_17;
                                    this.KHO_VAT_PHAM_CONG_VA_TRU_TIEN(int_128, base.CA_NHAN_NHA_KHO_TIEN_SO_LUONG, 0x95, int_131);
                              }
                              else
                              {
                                    base.TONG_HOP_NHA_KHO_TIEN_SO += long_17;
                                    this.KHO_VAT_PHAM_CONG_VA_TRU_TIEN(int_128, base.TONG_HOP_NHA_KHO_TIEN_SO, 0x95, int_131);
                              }
                              goto Label_07CF;
                        }
                        if (((int_128 == 0x3c14dc2c) || (int_128 == 0x3c14dc44)) || ((long_17 < 1L) || base.TRANG_BI_LAN_BAO_VAY[int_129].bool_0))
                        {
                              return;
                        }
                        VAT_PHAM_LOAI vat_pham_loai2 = base.TRANG_BI_LAN_BAO_VAY[int_129];
                        if (!World.Itme.TryGetValue(BitConverter.ToInt32(vat_pham_loai2.VAT_PHAM_ID, 0), out tbl_xwwl_item))
                        {
                              return;
                        }
                        int num3 = tbl_xwwl_item.FLD_SIDE;
                        for (int i = 0; i < 0x24; i++)
                        {
                              if ((BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[i].VAT_PHAM_SO_LUONG, 0) > 0) || (BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[i].VAT_PHAM_ID, 0) != 0))
                              {
                                    num++;
                              }
                        }
                        if (int_131 == 3)
                        {
                              for (int j = 0; j < 60; j++)
                              {
                                    if ((BitConverter.ToInt32(base.class23_0[j].VAT_PHAM_SO_LUONG, 0) > 0) || (BitConverter.ToInt32(base.class23_0[j].VAT_PHAM_ID, 0) != 0))
                                    {
                                          num2++;
                                    }
                              }
                        }
                        else
                        {
                              for (int k = 0; k < 60; k++)
                              {
                                    if ((BitConverter.ToInt32(base.class23_1[k].VAT_PHAM_SO_LUONG, 0) > 0) || (BitConverter.ToInt32(base.class23_1[k].VAT_PHAM_ID, 0) != 0))
                                    {
                                          num2++;
                                    }
                              }
                        }
                        if (num3 == 0)
                        {
                              if (long_17 > 1L)
                              {
                                    Form1.WriteLine(6, string.Concat(new object[] { "非法复制_仓库存取_放东西到仓库3[", base.Userid, "]-[", base.UserName, "]___[", int_131, "] VAT_PHAM名称[", vat_pham_loai2.method_13(), "] VAT_PHAM_SO_LUONG[", BitConverter.ToInt32(vat_pham_loai2.VAT_PHAM_SO_LUONG, 0), "] 数量[", long_17, "]" }));
                                    this.LAM_GIAM_DI_VAT_PHAM(int_129, BitConverter.ToInt32(vat_pham_loai2.VAT_PHAM_SO_LUONG, 0));
                                    return;
                              }
                              if (BitConverter.ToInt32(vat_pham_loai2.VAT_PHAM_SO_LUONG, 0) == long_17)
                              {
                                    base.NHAN_VAT_MANG_NANG -= vat_pham_loai2.VAT_PHAM_TONG_TRONG_LUONG;
                                    byte[] buffer3 = new byte[0x49];
                                    byte[] buffer1 = new byte[8];
                                    BitConverter.GetBytes(long_17);
                                    Buffer.BlockCopy(BitConverter.GetBytes(long_17), 0, buffer3, 12, 4);
                                    Buffer.BlockCopy(vat_pham_loai2.Item_toan_bo_ID, 0, buffer3, 0, 8);
                                    Buffer.BlockCopy(vat_pham_loai2.VAT_PHAM_ID, 0, buffer3, 8, 4);
                                    Buffer.BlockCopy(vat_pham_loai2.Item_thuoc_tinh, 0, buffer3, 0x10, 0x38);
                                    Buffer.BlockCopy(vat_pham_loai2.Item_byte, 0x48, buffer3, 0x48, 1);
                                    this.NHA_KHO_GOI_ITEM_THAO_TAC(0x9300, int_131, int_128, long_17, base.TRANG_BI_LAN_BAO_VAY[int_129], int_129);
                                    if (int_131 == 3)
                                    {
                                          base.class23_0[int_130].Item_byte = buffer3;
                                          this.NHA_KHO_GOI_ITEM_THAO_TAC(0x9500, int_131, int_128, long_17, base.class23_0[int_130], int_130);
                                    }
                                    else
                                    {
                                          base.class23_1[int_130].Item_byte = buffer3;
                                          this.NHA_KHO_GOI_ITEM_THAO_TAC(0x9500, int_131, int_128, long_17, base.class23_1[int_130], int_130);
                                    }
                                    base.TRANG_BI_LAN_BAO_VAY[int_129].Item_byte = new byte[0x49];
                              }
                              else
                              {
                                    this.LAM_GIAM_DI_VAT_PHAM(int_129, BitConverter.ToInt32(vat_pham_loai2.VAT_PHAM_SO_LUONG, 0));
                              }
                              goto Label_07CF;
                        }
                        if (BitConverter.ToInt32(vat_pham_loai2.VAT_PHAM_SO_LUONG, 0) < long_17)
                        {
                              Form1.WriteLine(6, string.Concat(new object[] { "非法复制_仓库存取_放东西到仓库2[", base.Userid, "]-[", base.UserName, "]___[", int_131, "] VAT_PHAM名称[", vat_pham_loai2.method_13(), "] VAT_PHAM_SO_LUONG[", BitConverter.ToInt32(vat_pham_loai2.VAT_PHAM_SO_LUONG, 0), "] 数量[", long_17, "]" }));
                              return;
                        }
                        int num4 = BitConverter.ToInt32(vat_pham_loai2.VAT_PHAM_SO_LUONG, 0) - ((int)long_17);
                        base.NHAN_VAT_MANG_NANG -= vat_pham_loai2.VAT_PHAM_TONG_TRONG_LUONG;
                        byte[] dst = new byte[0x49];
                        byte[] buffer4 = new byte[4];
                        byte[] src = new byte[8];
                        switch (BitConverter.ToInt32(vat_pham_loai2.VAT_PHAM_ID, 0))
                        {
                              case 0x2faf080b:
                              case 0x2faf080c:
                              case 0x2faf080d:
                              case 0x2faf0802:
                              case 0x2faf0801:
                              case 0x2faf0817:
                              case 0x2faf0818:
                              case 0x2faf0819:
                              case 0x2faf081a:
                              case 0x2faf081b:
                              case 0x2faf081c:
                              case 0x2faf083d:
                              case 0x2faf083e:
                                    break;

                              default:
                                    vat_pham_loai = base.NHAN_DUOC_NHAN_VAT_THEM_VAO_KHO_CHUNG_LOAI_HINH(BitConverter.ToInt32(vat_pham_loai2.VAT_PHAM_ID, 0), int_131);
                                    goto Label_05B4;
                        }
                        vat_pham_loai = base.UNKNOWN_105(BitConverter.ToInt32(vat_pham_loai2.VAT_PHAM_ID, 0), int_131, int_132);
                        Label_05B4:
                        if (vat_pham_loai != null)
                        {
                              src = vat_pham_loai.Item_toan_bo_ID;
                              int_130 = vat_pham_loai.VAT_PHAM_VI_TRI;
                              Buffer.BlockCopy(BitConverter.GetBytes((long)(long_17 + BitConverter.ToInt32(vat_pham_loai.VAT_PHAM_SO_LUONG, 0))), 0, dst, 12, 4);
                        }
                        else
                        {
                              BitConverter.GetBytes(long_17);
                              if (num4 <= 0)
                              {
                                    src = vat_pham_loai2.Item_toan_bo_ID;
                              }
                              else
                              {
                                    src = BitConverter.GetBytes(RxjhClass.GetDBItmeId());
                              }
                              Buffer.BlockCopy(BitConverter.GetBytes(long_17), 0, dst, 12, 4);
                        }
                        Buffer.BlockCopy(src, 0, dst, 0, 8);
                        Buffer.BlockCopy(vat_pham_loai2.VAT_PHAM_ID, 0, dst, 8, 4);
                        Buffer.BlockCopy(vat_pham_loai2.Item_thuoc_tinh, 0, dst, 0x10, 0x38);
                        Buffer.BlockCopy(vat_pham_loai2.Item_byte, 0x48, dst, 0x48, 1);
                        if (num4 <= 0)
                        {
                              base.TRANG_BI_LAN_BAO_VAY[int_129].Item_byte = new byte[0x49];
                              this.NHA_KHO_GOI_ITEM_THAO_TAC(0x9300, int_131, int_128, long_17, base.TRANG_BI_LAN_BAO_VAY[int_129], int_129);
                        }
                        else
                        {
                              base.TRANG_BI_LAN_BAO_VAY[int_129].VAT_PHAM_SO_LUONG = BitConverter.GetBytes(num4);
                              this.NHA_KHO_GOI_ITEM_THAO_TAC(0x9300, int_131, int_128, long_17, base.TRANG_BI_LAN_BAO_VAY[int_129], int_129);
                        }
                        if (int_131 == 3)
                        {
                              base.class23_0[int_130].Item_byte = dst;
                              this.NHA_KHO_GOI_ITEM_THAO_TAC(0x9500, int_131, int_128, (long)base.class23_0[int_130].Get_VAT_PHAM_SO_LUONG, base.class23_0[int_130], int_130);
                        }
                        else
                        {
                              base.class23_1[int_130].Item_byte = dst;
                              this.NHA_KHO_GOI_ITEM_THAO_TAC(0x9500, int_131, int_128, (long)base.class23_1[int_130].Get_VAT_PHAM_SO_LUONG, base.class23_1[int_130], int_130);
                        }
                  }
                  catch (Exception exception)
                  {
                        Form1.WriteLine(1, string.Concat(new object[] { "仓库_装备栏减VAT_PHAM 出错 [", base.Userid, "][", base.UserName, "]VI_TRI[", int_129, "]数量[", long_17, "]仓库VI_TRI[", int_130, "]仓库类型[", int_131, "] ", exception.Message }));
                  }
                  Label_07CF:
                  base.UpdateMoneyAndWeight();
            }

            public void KHO_VAT_PHAM_CONG_VA_TRU_TIEN(int int_128, long long_17, int int_129, int int_130)
            {
                  byte[] dst = Converter.hexStringToByte("AA55870001560395007800030000000300000000943577000000006E00000000000000000000000000000000000000000000000000000000000000000000000000000002000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000E76C55AA");
                  Buffer.BlockCopy(BitConverter.GetBytes(int_130), 0, dst, 11, 1);
                  Buffer.BlockCopy(BitConverter.GetBytes(int_130), 0, dst, 15, 1);
                  Buffer.BlockCopy(BitConverter.GetBytes(long_17), 0, dst, 0x1b, 8);
                  Buffer.BlockCopy(BitConverter.GetBytes(int_128), 0, dst, 0x13, 4);
                  Buffer.BlockCopy(BitConverter.GetBytes(int_128), 0, dst, 0x33, 4);
                  Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, dst, 5, 2);
                  if (base.Client != null)
                  {
                        base.Client.Send(dst, dst.Length);
                  }
            }

            public void KHOA_TAI_KHOAN(Players class15_0, string string_10)
            {
                  DBA.smethod_7($"UPDATE TBL_ACCOUNT SET FLD_ZT=1 WHERE FLD_ID='{class15_0.Userid}'", "rxjhaccount");
                  Form1.WriteLine(9, "帐号已被停封 [" + class15_0.Userid + "][" + class15_0.UserName + "][" + class15_0.Client.ToString() + "]  原因：" + string_10);
                  if (class15_0.Client != null)
                  {
                        class15_0.Client.Dispose();
                  }
            }

            public void KIEM_TRA_BACH_BAO_CAC_NGUYEN_BAO_SO_LUONG()
            {
                  if (World.jlMsg == 1)
                  {
                        Form1.WriteLine(0, "Players_查百宝阁元宝数");
                  }
                  string str = string.Format("select FLD_SEX,FLD_RXPIONT,FLD_RXPIONTX,FLD_VIP,FLD_VIPTIM from [TBL_ACCOUNT] where FLD_ID=@Userid", new object[0]);
                  SqlParameter[] parameterArray = new SqlParameter[] { SqlDBA.MakeInParam("@Userid", SqlDbType.VarChar, 30, base.Userid) };
                  DataTable table = DBA.GetDBToDataTable(str, parameterArray, "rxjhaccount");
                  base.FLD_RXPIONT = long.Parse(table.Rows[0]["FLD_RXPIONT"].ToString());
                  if (base.FLD_RXPIONT >= 0L)
                  {
                        table.Dispose();
                  }
            }

            public void KIEM_TRA_BANG_PHAI()
            {
                  if (World.jlMsg == 1)
                  {
                        Form1.WriteLine(0, "Players_Richard gang");
                  }
                  try
                  {
                        string str = "00000000000000000000A44E55AA";
                        byte[] dst = Converter.hexStringToByte("AA55CE0000D203E900C8007F1C5D00CED2C8A5C5B6B0AEC3C500000000000003000000000000000100000000000000000000000000000000000000000000000000000000000000E80300000000000000000000");
                        byte[] src = Converter.hexStringToByte(str);
                        DataTable table = RxjhClass.SELECT_GUILDNAME(base.GuildName);
                        if (table != null)
                        {
                              byte[] bytes = BitConverter.GetBytes(base.Bang_phai_Id);
                              Buffer.BlockCopy(bytes, 0, dst, 11, bytes.Length);
                              byte[] buffer4 = Encoding.Default.GetBytes(base.GuildName);
                              Buffer.BlockCopy(buffer4, 0, dst, 15, buffer4.Length);
                              int num = int.Parse(table.Rows[0]["Leve"].ToString());
                              int num2 = int.Parse(table.Rows[0]["Danh_tieng"].ToString());
                              int num3 = 0;
                              try
                              {
                                    num3 = int.Parse(table.Rows[0]["Mon_phai_Vo_huan"].ToString());
                                    int.Parse(table.Rows[0]["Thang"].ToString());
                                    int.Parse(table.Rows[0]["Bai"].ToString());
                                    int.Parse(table.Rows[0]["Hoa"].ToString());
                              }
                              catch (Exception exception)
                              {
                                    Form1.WriteLine(1, "New gangs check error![" + base.Userid + "]-[" + base.UserName + "]" + exception.Message);
                              }
                              byte[] buffer5 = new byte[100];
                              byte[] buffer6 = Encoding.Default.GetBytes(table.Rows[0]["G_Notice"].ToString());
                              Buffer.BlockCopy(BitConverter.GetBytes(num), 0, dst, 0x1f, 2);
                              Buffer.BlockCopy(BitConverter.GetBytes(num2), 0, dst, 0x23, 2);
                              if (base.Bang_phai_mon_huy != null)
                              {
                                    Buffer.BlockCopy(BitConverter.GetBytes(World.Server_Group_ID), 0, dst, 0x2b, 2);
                              }
                              else
                              {
                                    Buffer.BlockCopy(BitConverter.GetBytes(0), 0, dst, 0x2b, 2);
                              }
                              Buffer.BlockCopy(BitConverter.GetBytes(num3), 0, dst, 0x47, 4);
                              DataTable table2 = RxjhClass.SELECT_ALL_TBL_XWWL_GuildMember(base.GuildName);
                              int count = table2.Rows.Count;
                              if (count > 70)
                              {
                                    count = 70;
                              }
                              Buffer.BlockCopy(BitConverter.GetBytes(count), 0, dst, 0x27, 2);
                              byte[] buffer7 = new byte[(((count * 0x18) + dst.Length) + src.Length) + buffer5.Length];
                              Buffer.BlockCopy(dst, 0, buffer7, 0, dst.Length);
                              Buffer.BlockCopy(src, 0, buffer7, buffer7.Length - src.Length, src.Length);
                              int num5 = 0;
                              while (true)
                              {
                                    if (num5 >= count)
                                    {
                                          break;
                                    }
                                    byte[] buffer8 = Encoding.Default.GetBytes(table2.Rows[num5]["Name"].ToString());
                                    Buffer.BlockCopy(buffer8, 0, buffer7, (dst.Length + 4) + (num5 * 0x18), buffer8.Length);
                                    Buffer.BlockCopy(BitConverter.GetBytes(int.Parse(table2.Rows[num5]["Leve"].ToString())), 0, buffer7, (dst.Length + 0x16) + (num5 * 0x18), 2);
                                    try
                                    {
                                          if (base.Get_Char_Data(table2.Rows[num5]["Name"].ToString()) != null)
                                          {
                                                Buffer.BlockCopy(BitConverter.GetBytes(1), 0, buffer7, (dst.Length + 0x18) + (num5 * 0x18), 2);
                                          }
                                    }
                                    catch (Exception exception2)
                                    {
                                          Form1.WriteLine(1, "Richard gang member error![" + base.Userid + "]-[" + base.UserName + "]" + exception2.Message);
                                    }
                                    Buffer.BlockCopy(BitConverter.GetBytes(int.Parse(table2.Rows[num5]["FLD_LEVEL"].ToString())), 0, buffer7, (dst.Length + 20) + (num5 * 0x18), 2);
                                    num5++;
                              }
                              Buffer.BlockCopy(buffer6, 0, buffer7, dst.Length + (count * 0x18), buffer6.Length);
                              Buffer.BlockCopy(BitConverter.GetBytes((int)(((0x3b + (count * 0x18)) + buffer5.Length) + 8)), 0, buffer7, 2, 2);
                              Buffer.BlockCopy(BitConverter.GetBytes((int)((0x34 + (count * 0x18)) + buffer5.Length)), 0, buffer7, 9, 2);
                              Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, buffer7, 5, 2);
                              if (base.Client != null)
                              {
                                    base.Client.method_8(buffer7, buffer7.Length);
                              }
                              table2.Dispose();
                              table.Dispose();
                        }
                  }
                  catch (Exception exception3)
                  {
                        Form1.WriteLine(1, "Richard gang Error![" + base.Userid + "]-[" + base.UserName + "]" + exception3.Message);
                  }
            }

            public bool KIEM_TRA_ITEM_NHIEM_VU(int int_128, int int_129)
            {
                  for (int i = 0; i < base.class22_0.Length; i++)
                  {
                        if ((base.class22_0[i].VAT_PHAM_ID == int_128) && (base.class22_0[i].VAT_PHAM_SO_LUONG >= int_129))
                        {
                              return true;
                        }
                  }
                  return false;
            }

            public void KIEM_TRA_NHAN_VAT_CO_TON_TAI(byte[] byte_5, int int_128)
            {
                  try
                  {
                        string str = "AA552300000000390014000100000000000000000000000000000000000000000000000000000055AA";
                        byte[] dst = Converter.hexStringToByte("AA552300000000390014000000000000000000000000000000000000000000000000000000000055AA");
                        byte[] buffer2 = Converter.hexStringToByte(str);
                        byte[] bytes = new byte[0x10];
                        for (int i = 0; i < 0x10; i++)
                        {
                              if (byte_5[11 + i] == 0)
                              {
                                    break;
                              }
                              bytes[i] = byte_5[11 + i];
                        }
                        string s = Encoding.Default.GetString(bytes).Replace("\0", "").Trim();
                        byte[] src = Encoding.Default.GetBytes(s);
                        Buffer.BlockCopy(src, 0, dst, 15, src.Length);
                        Buffer.BlockCopy(src, 0, buffer2, 15, src.Length);
                        if (s == "")
                        {
                              Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, dst, 5, 2);
                              if (base.Client != null)
                              {
                                    base.Client.Send(dst, dst.Length);
                              }
                        }
                        if (RxjhClass.SELECT_FLD_NAME(s) != 1)
                        {
                              Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, dst, 5, 2);
                              if (base.Client != null)
                              {
                                    base.Client.Send(dst, dst.Length);
                              }
                        }
                        else
                        {
                              Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, buffer2, 5, 2);
                              if (base.Client != null)
                              {
                                    base.Client.Send(buffer2, buffer2.Length);
                              }
                        }
                  }
                  catch (Exception exception)
                  {
                        Form1.WriteLine(1, "创建人物检查人物是否存在出错[" + base.Userid + "]-[" + base.Client.ToString() + "]" + exception.Message);
                  }
            }

            public void KIEM_TRA_THOI_GIAN_DUNG_SKILL(byte[] byte_5, int int_128)
            {
                  if (World.Toc_do_do_luong_mo_ra == 1)
                  {
                        if (((int)DateTime.Now.Subtract(this.dateTime_9).TotalMilliseconds) < World.Gia_toc_khi_do_luong_Thoi_gian_tieu_diet)
                        {
                              this.int_116++;
                              if (this.int_116 > World.int_209)
                              {
                                    if (World.Toc_do_do_luong_thao_tac == 0)
                                    {
                                          base.GameMessage("Prohibit any acceleration behavior, such as acceleration automatic T off the assembly line!", 9, "caveat");
                                    }
                                    else
                                    {
                                          base.GameMessage("Prohibit any acceleration behavior, such as acceleration automatic T off the assembly line!", 9, "caveat");
                                          base.Client.Dispose();
                                    }
                              }
                        }
                        this.dateTime_9 = DateTime.Now;
                  }
            }

            public void KIEM_TRA_TO_DOI(byte[] byte_5, int int_128)
            {
                  if (World.jlMsg == 1)
                  {
                        Form1.WriteLine(0, "Players_Investigation team");
                  }
                  try
                  {
                        this.Packet_Modify(byte_5, int_128);
                        int num = BitConverter.ToInt16(byte_5, 5);
                        BitConverter.ToInt32(byte_5, 11);
                        if (base.Get_char_data(num) != null)
                        {
                              PacketData data = new PacketData();
                              using (Dictionary<int, TO_DOI_CLASS>.ValueCollection.Enumerator enumerator = World.W_TO_DOI.Values.GetEnumerator())
                              {
                                    while (enumerator.MoveNext())
                                    {
                                          TO_DOI_CLASS current = enumerator.Current;
                                          data.Write2(100);
                                          data.Write2(6);
                                          data.Write2(8);
                                          data.method_15("哈哈哈", 14);
                                          if (base.Client != null)
                                          {
                                                base.Client.method_4(data, 0x1a58, base.UserSessionID);
                                          }
                                    }
                              }
                        }
                  }
                  catch (Exception exception)
                  {
                        Form1.WriteLine(1, "Team Error![" + base.Userid + "]-[" + base.UserName + "]" + exception.Message);
                  }
            }

            public void KIEU_TOC(byte[] byte_5, int int_128)
            {
                  try
                  {
                        this.Packet_Modify(byte_5, int_128);
                        byte[] dst = new byte[4];
                        byte[] buffer2 = new byte[4];
                        Buffer.BlockCopy(byte_5, 11, dst, 0, 1);
                        Buffer.BlockCopy(byte_5, 13, buffer2, 0, 2);
                        if (BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[BitConverter.ToInt32(dst, 0)].VAT_PHAM_ID, 0) == 0x3c14dc65)
                        {
                              byte[] buffer3 = Converter.hexStringToByte("AA552800002C01081618000100080041440300000000000FDC143C0000000000009B0000000000000000000055AA");
                              byte[] buffer4 = Converter.hexStringToByte("AA551300002A01091604002A019999000000000000000055AA");
                              Buffer.BlockCopy(dst, 0, buffer3, 13, 1);
                              Buffer.BlockCopy(buffer2, 0, buffer3, 0x21, 1);
                              Buffer.BlockCopy(base.TRANG_BI_LAN_BAO_VAY[BitConverter.ToInt32(dst, 0)].Item_toan_bo_ID, 0, buffer3, 15, 8);
                              Buffer.BlockCopy(base.TRANG_BI_LAN_BAO_VAY[BitConverter.ToInt32(dst, 0)].VAT_PHAM_ID, 0, buffer3, 0x17, 4);
                              Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, buffer3, 5, 2);
                              Buffer.BlockCopy(buffer2, 0, buffer4, 13, 1);
                              Buffer.BlockCopy(buffer2, 0, buffer4, 14, 1);
                              Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, buffer4, 5, 2);
                              if (base.Client != null)
                              {
                                    base.Client.Send(buffer3, buffer3.Length);
                              }
                              if (base.Client != null)
                              {
                                    base.Client.Send(buffer4, buffer4.Length);
                              }
                              Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, buffer4, 11, 2);
                              this.vmethod_0(buffer4, buffer4.Length);
                              base.class84_0.KIEU_TOC = buffer2[0];
                              this.LAM_GIAM_DI_VAT_PHAM(BitConverter.ToInt32(dst, 0), 1);
                        }
                  }
                  catch (Exception exception)
                  {
                        Form1.WriteLine(1, "Hair Error![" + base.Userid + "]-[" + base.UserName + "]" + exception.Message);
                  }
            }

            public void KIM_HUONG_NGOC_TANG_GIAI_TRU(byte[] byte_5, int int_128)
            {
                  this.Packet_Modify(byte_5, int_128);
                  int num2 = byte_5[11];
                  int num3 = byte_5[12];
                  switch (num2)
                  {
                        case 1:
                              {
                                    byte[] buffer2 = Converter.hexStringToByte("AA551100012C01DF0002000101000000000000E98955AA");
                                    Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, buffer2, 5, 2);
                                    if (base.Client != null)
                                    {
                                          base.Client.Send(buffer2, buffer2.Length);
                                    }
                                    return;
                              }
                        case 3:
                              if (World.Number_lock_ingot > 0)
                              {
                                    if (base.FLD_RXPIONT < (World.Number_lock_ingot * num3))
                                    {
                                          base.GameMessage("Ingot enough, lock a piece of equipment you need to consume" + World.Number_lock_ingot + "Ingot!", 9, "system hint");
                                          break;
                                    }
                                    base.KIEM_SOAT_CASH_SO_LIEU(World.Number_lock_ingot * num3, 0);
                              }
                              for (int i = 0; i < num3; i++)
                              {
                                    int index = byte_5[30 + (i * 0x12)];
                                    byte[] buffer3 = new byte[0x38];
                                    base.TRANG_BI_LAN_BAO_VAY[index].Item_troi_chat = false;
                                    base.TRANG_BI_LAN_BAO_VAY[index].bool_0 = false;
                                    byte[] buffer4 = base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_ID;
                                    byte[] buffer5 = base.TRANG_BI_LAN_BAO_VAY[index].Item_toan_bo_ID;
                                    Buffer.BlockCopy(base.TRANG_BI_LAN_BAO_VAY[index].Item_byte, 0x10, buffer3, 0, 0x38);
                                    this.LAM_GIAM_DI_VAT_PHAM(index, 1);
                                    this.TANG_CUONG_VAT_PHAM_1(buffer5, buffer4, index, BitConverter.GetBytes(1), buffer3, true);
                              }
                              base.UPDATE_RXPIONT();
                              break;

                        case 4:
                              if (World.Unlock_ingot_number > 0)
                              {
                                    if (base.FLD_RXPIONT < (World.Unlock_ingot_number * num3))
                                    {
                                          base.GameMessage("Ingot enough to unlock a piece of equipment needs to consume" + World.Unlock_ingot_number + "Ingot!", 9, "system hint");
                                          break;
                                    }
                                    base.KIEM_SOAT_CASH_SO_LIEU(World.Unlock_ingot_number * num3, 0);
                              }
                              for (int j = 0; j < num3; j++)
                              {
                                    int num6 = byte_5[30 + (j * 0x12)];
                                    if (base.TRANG_BI_LAN_BAO_VAY[num6].GetItem_ID != 0x3b9acb9fL)
                                    {
                                          byte[] buffer6 = new byte[0x38];
                                          base.TRANG_BI_LAN_BAO_VAY[num6].Item_troi_chat = false;
                                          base.TRANG_BI_LAN_BAO_VAY[num6].bool_0 = false;
                                          byte[] buffer7 = base.TRANG_BI_LAN_BAO_VAY[num6].VAT_PHAM_ID;
                                          byte[] buffer8 = base.TRANG_BI_LAN_BAO_VAY[num6].Item_toan_bo_ID;
                                          Buffer.BlockCopy(base.TRANG_BI_LAN_BAO_VAY[num6].Item_byte, 0x10, buffer6, 0, 0x38);
                                          this.LAM_GIAM_DI_VAT_PHAM(num6, 1);
                                          this.TANG_CUONG_VAT_PHAM_1(buffer8, buffer7, num6, BitConverter.GetBytes(1), buffer6, false);
                                    }
                              }
                              base.UPDATE_RXPIONT();
                              break;
                  }
                  byte[] dst = Converter.hexStringToByte("AA551100012C01DF0002000101000000000000E98955AA");
                  Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, dst, 5, 2);
                  if (base.Client != null)
                  {
                        base.Client.Send(dst, dst.Length);
                  }
            }

            public void KY_NANG_COMBO()
            {
                  byte[] dst = Converter.hexStringToByte("AA552300000A00C60014000100000035EA040059E404005AE404005BE40400000000000000000055AA");
                  base.list_5.Clear();
                  int num = 0;
                  while (true)
                  {
                        if (num >= 3)
                        {
                              break;
                        }
                        byte[] buffer2 = new byte[4];
                        try
                        {
                              if (BitConverter.ToInt32(buffer2, 0) != 0)
                              {
                                    base.list_5.Add(new TBL_XWWL_KONGFU(BitConverter.ToInt32(buffer2, 0)));
                              }
                              Buffer.BlockCopy(buffer2, num * 4, dst, 15, 4);
                        }
                        catch
                        {
                        }
                        num++;
                  }
                  Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, dst, 5, 2);
                  if (base.Client != null)
                  {
                        base.Client.Send(dst, dst.Length);
                  }
            }

            public void LAM_GIAM_DI_VAT_PHAM(int int_128, int int_129)
            {
                  try
                  {
                        TBL_XWWL_ITEM tbl_xwwl_item;
                        using (PacketData data = new PacketData())
                        {
                              data.method_3(1);
                              data.method_3(int_128);
                              data.Write2(0);
                              data.method_9(base.TRANG_BI_LAN_BAO_VAY[int_128].GetItem_ID);
                              data.method_8((long)int_129);
                              data.method_8(0L);
                              if (base.Client != null)
                              {
                                    base.Client.method_4(data, 0x2200, base.UserSessionID);
                              }
                        }
                        if (BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[int_128].VAT_PHAM_SO_LUONG, 0) <= int_129)
                        {
                              base.TRANG_BI_LAN_BAO_VAY[int_128].Item_byte = new byte[0x49];
                              return;
                        }
                        byte[] bytes = BitConverter.GetBytes((int)(BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[int_128].VAT_PHAM_SO_LUONG, 0) - int_129));
                        base.TRANG_BI_LAN_BAO_VAY[int_128].VAT_PHAM_SO_LUONG = BitConverter.GetBytes(0);
                        if (!World.Itme.TryGetValue(BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[int_128].VAT_PHAM_ID, 0), out tbl_xwwl_item))
                        {
                              return;
                        }
                        byte[] dst = new byte[0x38];
                        long num = base.TRANG_BI_LAN_BAO_VAY[int_128].GetItem_ID;
                        if (num <= 0x2faf080dL)
                        {
                              if (num <= 0x2faf0802L)
                              {
                                    if (num < 0x2faf0801L)
                                    {
                                          goto Label_029B;
                                    }
                                    switch (((int)(num - 0x2faf0801L)))
                                    {
                                          case 0:
                                          case 1:
                                                goto Label_01ED;
                                    }
                              }
                              if ((num <= 0x2faf080dL) && (num >= 0x2faf080bL))
                              {
                                    switch (((int)(num - 0x2faf080bL)))
                                    {
                                          case 0:
                                          case 1:
                                          case 2:
                                                goto Label_01ED;
                                    }
                              }
                              goto Label_029B;
                        }
                        if (num <= 0x2faf081cL)
                        {
                              if (num < 0x2faf0817L)
                              {
                                    goto Label_029B;
                              }
                              switch (((int)(num - 0x2faf0817L)))
                              {
                                    case 0:
                                    case 1:
                                    case 2:
                                    case 3:
                                    case 4:
                                    case 5:
                                          goto Label_01ED;
                              }
                        }
                        if ((num > 0x2faf083eL) || (num < 0x2faf083dL))
                        {
                              goto Label_029B;
                        }
                        int num2 = (int)(num - 0x2faf083dL);
                        if ((num2 != 0) && (num2 != 1))
                        {
                              goto Label_029B;
                        }
                        Label_01ED:
                        Buffer.BlockCopy(BitConverter.GetBytes(base.TRANG_BI_LAN_BAO_VAY[int_128].FLD_MAGIC0), 0, dst, 0, 4);
                        Buffer.BlockCopy(BitConverter.GetBytes(tbl_xwwl_item.FLD_MAGIC1), 0, dst, 4, 4);
                        Buffer.BlockCopy(BitConverter.GetBytes(tbl_xwwl_item.FLD_MAGIC2), 0, dst, 8, 4);
                        Buffer.BlockCopy(BitConverter.GetBytes(tbl_xwwl_item.FLD_MAGIC3), 0, dst, 12, 4);
                        Buffer.BlockCopy(BitConverter.GetBytes(tbl_xwwl_item.FLD_MAGIC4), 0, dst, 0x10, 4);
                        this.TANG_CUONG_VAT_PHAM(base.TRANG_BI_LAN_BAO_VAY[int_128].Item_toan_bo_ID, base.TRANG_BI_LAN_BAO_VAY[int_128].VAT_PHAM_ID, base.TRANG_BI_LAN_BAO_VAY[int_128].VAT_PHAM_VI_TRI, bytes, dst, base.TRANG_BI_LAN_BAO_VAY[int_128].FLD_MAGIC0);
                        return;
                        Label_029B:
                        Buffer.BlockCopy(BitConverter.GetBytes(tbl_xwwl_item.FLD_MAGIC0), 0, dst, 0, 4);
                        Buffer.BlockCopy(BitConverter.GetBytes(tbl_xwwl_item.FLD_MAGIC1), 0, dst, 4, 4);
                        Buffer.BlockCopy(BitConverter.GetBytes(tbl_xwwl_item.FLD_MAGIC2), 0, dst, 8, 4);
                        Buffer.BlockCopy(BitConverter.GetBytes(tbl_xwwl_item.FLD_MAGIC3), 0, dst, 12, 4);
                        Buffer.BlockCopy(BitConverter.GetBytes(tbl_xwwl_item.FLD_MAGIC4), 0, dst, 0x10, 4);
                        this.TANG_CUONG_VAT_PHAM(base.TRANG_BI_LAN_BAO_VAY[int_128].Item_toan_bo_ID, base.TRANG_BI_LAN_BAO_VAY[int_128].VAT_PHAM_ID, base.TRANG_BI_LAN_BAO_VAY[int_128].VAT_PHAM_VI_TRI, bytes, dst);
                  }
                  catch (Exception exception)
                  {
                        Form1.WriteLine(1, string.Concat(new object[] { "LAM_GIAM_DI_VAT_PHAM 出错[", base.Userid, "][", base.UserName, "] VI_TRI[", int_128, "] 数量[", int_129, "] VAT_PHAM名称[", base.TRANG_BI_LAN_BAO_VAY[int_128].method_13(), "]TRANG_BI_LAN_BAO_VAY数量[", BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[int_128].VAT_PHAM_SO_LUONG, 0), "]", exception.Message }));
                  }
            }

            public void LAN_THEO_NGUOI_CHOI(Players class15_0)
            {
                  try
                  {
                        int num;
                        if (base.FLD_RXPIONT <= World.Lan_theo_player_can_CASH_so_luong)
                        {
                              goto Label_02C3;
                        }
                        int num2 = 0;
                        bool flag = false;
                        if (World.Phong_ngu_truy_sat_can_thiet_Item_ID != "")
                        {
                              num = 0;
                              while (num < 0x24)
                              {
                                    if (BitConverter.ToInt32(class15_0.TRANG_BI_LAN_BAO_VAY[num].VAT_PHAM_ID, 0) == int.Parse(World.Phong_ngu_truy_sat_can_thiet_Item_ID))
                                    {
                                          goto Label_0053;
                                    }
                                    num++;
                              }
                        }
                        goto Label_0057;
                        Label_0053:
                        num2 = num;
                        flag = true;
                        Label_0057:
                        if (!flag)
                        {
                              this.Move(class15_0.CharacterCoords_X, class15_0.CharacterCoords_Y, class15_0.CharacterCoords_Z, class15_0.CharacterCoords_Map);
                              base.method_47(World.Lan_theo_player_can_CASH_so_luong, 0);
                              base.UPDATE_RXPIONT();
                              base.GameMessage("Tracking successful, the system charge you" + World.Lan_theo_player_can_CASH_so_luong + "Ingot handling charges!", 10, "GPS");
                              base.System_Announcement(string.Concat(new object[] { "Nhan vat [", base.UserName, "] va [", class15_0.UserName, "]Phat ra khong bao truy sat nhau toa do X [", class15_0.CharacterCoords_X, "]-Y [", class15_0.CharacterCoords_Y, "]-Map[", TBL_XWWL_MAP.smethod_0(class15_0.CharacterCoords_Map), "]no mau tra bang mau!" }));
                              class15_0.GameMessage("You are now being hunted down", 20, "Red Alert");
                              if (World.Phong_ngu_truy_sat_can_thiet_Item_ID != "")
                              {
                                    class15_0.GameMessage("buy" + TBL_XWWL_ITEM.smethod_1(int.Parse(World.Phong_ngu_truy_sat_can_thiet_Item_ID)) + "After the kill can prevent others, quickly buy it!", 10, "Anti kill prompt");
                                    base.System_Announcement("Just inside the backpack [" + TBL_XWWL_ITEM.smethod_1(int.Parse(World.Phong_ngu_truy_sat_can_thiet_Item_ID)) + "] Article can prevent others kill, while being chased consumes one achieve the effect of body");
                              }
                        }
                        else
                        {
                              class15_0.LAM_GIAM_DI_VAT_PHAM(num2, 1);
                              base.method_47(World.Lan_theo_player_can_CASH_so_luong, 0);
                              base.UPDATE_RXPIONT();
                              base.GameMessage("Items to kill each other and anti-[" + TBL_XWWL_ITEM.smethod_1(int.Parse(World.Phong_ngu_truy_sat_can_thiet_Item_ID)) + "], Other consumption[" + TBL_XWWL_ITEM.smethod_1(int.Parse(World.Phong_ngu_truy_sat_can_thiet_Item_ID)) + "]One", 10, "Failed to kill");
                              base.GameMessage("Tracking system fails to charge you" + World.Lan_theo_player_can_CASH_so_luong + "Ingot handling charges!", 10, "GPS");
                              class15_0.GameMessage("Just kill someone tracking you, artifact bodycare unscathed, you will consume [" + TBL_XWWL_ITEM.smethod_1(int.Parse(World.Phong_ngu_truy_sat_can_thiet_Item_ID)) + "]One", 10, "Spy satellites prompts you");
                              base.System_Announcement("玩家[" + base.UserName + "]对[" + class15_0.UserName + "]发出了江湖追杀令,但是以失败告终!对方身上有神器【" + TBL_XWWL_ITEM.smethod_1(int.Parse(World.Phong_ngu_truy_sat_can_thiet_Item_ID)) + "】护体毫发无损");
                        }
                        return;
                        Label_02C3:
                        base.GameMessage("Use of the service requires" + World.Lan_theo_player_can_CASH_so_luong + "Ingot can", 10, "GPS system");
                  }
                  catch (Exception exception)
                  {
                        Form1.WriteLine(1, "追杀系统出错! [" + base.Userid + "]-[" + base.UserName + "]" + exception.Message);
                  }
            }

            public void Learn_Skill_Tip(int int_128)
            {
                  byte[] dst = Converter.hexStringToByte("AA554B0100330146003C010000000001000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000006E3F0000000000000000000055AA");
                  Buffer.BlockCopy(BitConverter.GetBytes(base.Player_ExpErience), 0, dst, 0x143, 4);
                  Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, dst, 5, 2);
                  Buffer.BlockCopy(BitConverter.GetBytes(int_128), 0, dst, 15, 2);
                  if (base.Client != null)
                  {
                        base.Client.Send(dst, dst.Length);
                  }
            }

            public void LIEN_TIEP_DO_BO_2(string string_10, string string_11, int int_128)
            {
                  if (World.jlMsg == 1)
                  {
                        Form1.WriteLine(0, "Players_连接登陆2");
                  }
                  int num = 0;
                  try
                  {
                        base.Client.bool_0 = true;
                        if ((string_11 == null) || (string_11 == "在线"))
                        {
                              goto Label_047B;
                        }
                        using (IEnumerator<NetState> enumerator = World.threadSafeDictionary_0.Values.GetEnumerator())
                        {
                              NetState current;
                              while (enumerator.MoveNext())
                              {
                                    current = enumerator.Current;
                                    if (((base.Client != null) && (current != base.Client)) && (current.Player.Userid == string_10))
                                    {
                                          goto Label_0084;
                                    }
                              }
                              goto Label_00C3;
                              Label_0084:
                              current.Dispose();
                              if (base.Client != null)
                              {
                                    base.Client.bool_0 = true;
                              }
                              if (base.Client != null)
                              {
                                    base.Client.Dispose();
                              }
                              return;
                        }
                        Label_00C3:
                        num = 1;
                        base.Client.bool_0 = true;
                        base.Client.bool_1 = true;
                        string str = string.Format("select FLD_SEX,FLD_RXPIONT,FLD_RXPIONTX,FLD_VIP,FLD_QCVIP,FLD_WCVIP,FLD_VIPTIM,FLD_QCVIPTIM,FLD_WCVIPTIM,FLD_QCVIP,FLD_FQ,FLD_QDSJ,FLD_QDCS from [TBL_ACCOUNT] where FLD_ID=@Userid", new object[0]);
                        SqlParameter[] parameterArray = new SqlParameter[] { SqlDBA.MakeInParam("@Userid", SqlDbType.VarChar, 30, string_10) };
                        DataTable table = DBA.GetDBToDataTable(str, parameterArray, "rxjhaccount");
                        num = 2;
                        base.DANH_DAU_THOI_GIAN = DateTime.Parse(table.Rows[0]["FLD_QDSJ"].ToString());
                        base.DANH_DAU_SO_LAN = int.Parse(table.Rows[0]["FLD_QDCS"].ToString());
                        base.FLD_RXPIONT = long.Parse(table.Rows[0]["FLD_RXPIONT"].ToString());
                        base.FLD_RXPIONTX = long.Parse(table.Rows[0]["FLD_RXPIONTX"].ToString());
                        base.FLD_VIP = int.Parse(table.Rows[0]["FLD_VIP"].ToString());
                        base.FLD_QCVIP = int.Parse(table.Rows[0]["FLD_QCVIP"].ToString());
                        base.FLD_QCVIPTIM = DateTime.Parse(table.Rows[0]["FLD_QCVIPTIM"].ToString());
                        base.FLD_VIPTIM = DateTime.Parse(table.Rows[0]["FLD_VIPTIM"].ToString());
                        base.FLD_WCVIP = int.Parse(table.Rows[0]["FLD_WCVIP"].ToString());
                        base.FLD_WCVIPTIM = DateTime.Parse(table.Rows[0]["FLD_WCVIPTIM"].ToString());
                        base.Player_Sex = int.Parse(table.Rows[0]["FLD_SEX"].ToString());
                        base.PHAN_KHU_ID = table.Rows[0]["FLD_FQ"].ToString();
                        if (World.vip_line == 1)
                        {
                              if (base.FLD_VIP != 1)
                              {
                                    if (base.Client != null)
                                    {
                                          base.Client.Dispose();
                                    }
                                    return;
                              }
                              if ((base.FLD_VIP == 1) && (DateTime.Now > base.FLD_VIPTIM))
                              {
                                    if (base.Client != null)
                                    {
                                          base.Client.Dispose();
                                    }
                                    return;
                              }
                        }
                        num = 3;
                        StringBuilder builder = new StringBuilder();
                        if (World.int_132 == 1)
                        {
                              builder.Append("AA5546150084020200371500000000020000000000000017000000000000005DC49A271615000031371315EFE6068EB45D8AB4519E189D0AF349A9AB70C86C53A0404007E7DDC87EE000BE0E57A71362A70611776C1BFFEA6AE5A1ADABF9346DD51F771188BD5BAE0B4C721FCE11D4CF50C40738BE03FA9B90AD47FE330DD59A8CA31D9CDEFC0384C86A4E812667F953B480FCFDADA97D45542D4D1A82CDC6F25323A0ECA8D632592B529B7147530C9523A25351E0588B22ED2B2C770C8E040E25C9B5BD563096C53A841A4F58326DD78D5BFA57A536B3DE34D78EFAA812C2DD5D7DDCC5CB43E30473F73CA57B8B47184407743852557CDBF8EF6ECB196E8D681E555C97BF050CE5025C652E813F1E3391E9AAA97EC8C39DA0DB7A9EDBD198F707D63E8CFE8DE2B6CD697B42CCB85FA242DA5559A9DC1BA7A9C35EB1A3750167657D48E160C43E3D63CDE7553940BBA978DFB72B21A183D7D58F2978E49D79FBA39C60C60940B51863878FE0441DAC29D9FC3F0AEAA41621DE5F9F579DD31CDACBA22075212476210CE1D75645D17DAFBA40008D3559803A89066CDB382136C8ECA737E449DBC2F43E956953D8B30E01A49C0C2C4867A6412FFE315DCFBE2240924A35C5445E1CFE7E27856AEB860E1D6213386B5CF34A615285393974A828A4F2D5AC69CB7F3FEFE4D214740FB787270053D1B029EC7F38AF48027B45B181884E4A83264B55DC4C43813016ABF44F899459E1CFC062041EDBB1C48177919B1C34C44447E63948602180AD52C50FD84D3BDE1B3736B9FDE904CF47ECD661B4F192E71BFE2AFA00408F56A7A66ACBDD77BB0FB1A071C805BF85B3EA1BE7CA6C84CE6256213763A6245716FAF80E19D9338B138B5794666C1F211B44179FFB65DA1CB03B2E6BC5D4F616B423C63222723411A5FAC58EE2E461476C04454ABFCF5C96292E839492A8188043292B7864F4D6717418245ECA4BF547A42BEE361CA64CD16A22D6B23F560383DB66384DA7D834FF7A6C74BEF98A1A4CB005B826257661B38B6969FD7581A2A5331EC753BDB272956358BC94C1EA87BF6B321B0135516E9D4A8086EE24180DB0D183048CBBB2C619AD8C8CAF0AE65FF65FE2951325818072E5FC6CCBB50A2042333386B1BD2062093AB27F32B37DC5DE1CB6222E4029CAF60E8EA0F4CB020432C96E8AF7D6D50F6CE7DCC593701E80C48DAA4E5C18E922050958A852BA5936BCE7C5CBB299E1D4607B9612DD33F62DC01CA18F48B61D4556C6C0E301E265C7FCE94A0BDA1CEB5890B65F84407C9C89AEFDD96A2020CE3DABC4CDD2311BA528824CADFB3E7FE0A4FFA0552158AD3EABFC4B347A6E3B596E9ED70DA1584D0B2E3DEC553D0DFFDCD1E3A8ABDA98AF4E4763BD63309A76C12C8A1F623920B6669690574D69149860A4E7A086CA1F92352C46E9DE458D056849308BF274E6AEEA8E40F1FE1D51A0F4AD5DC2365E97227D2BB7E3E1B5E950DB9B449EB37E81B61628B7B2B9CEA1D5E6102474EA5130D31487D9BB502B2A538E26D17E26F9BB5D15D94DE415AD14D299BE19011C8C6EF07388357FE8A48C6476CCE9FE1DAD50B6FDD9D0827262D6D546D1155FF6EAB021294B4767B5AB9C65B8E48C64B1815DED65BA587685E486A525B5A93734D2626F1006E238A65AC4B216B628D5EC97D6A5408E721CDD2A88F303F48C9ECCF6F8ACCD2A34406916D85DAB6D33FDE3720156EC374BFB24F2570098436CBBB4FA443084A1C03CA100AEC40E3FD637E01BAA6BE10739540A57EB2A90397B22428A05AF011B766AF89A55B640398566E2A565DBE0B4654A1CBA9FE32B0BBF1E8D9896CA302345E6F882A4F7FFAAF86BA845C5A4C145D5C0E4F48838CD22A6558BC3AE5394DF80BF20012CF197557F5453D461914B1B2E260047F37D17F4F23D4D74F00BD14B960AAC4611AF20D140D4609D32FA235BEE0FDB8F41FA0BE6C58679A66C4BEC8C27B67A9E808F986A638C14F6FCE6DB496D461F5A6C8DEBFD0D06431C2FE50DD395D2A3B29A1CC22D8E32649F945D81E9DD22FE671C5CA5E12F26CCC9AC53AB8F802514A2E912436E779768D7E15EEAE63269CB6EC06DC9D47A7F8CB86939BF219ED07AEEAB3C3130B3DD3C37F346C0EBD751DAA8D1E0865FD6017025E05D82E3475E6399A1DC94DE5DA34F779A545007390BA89D48FEAD54B773916B88FEA028347FBB08CBB026BF0CD5723010F60EF597B282D7507A2B66A7FF715102142EF6E897C7E0C3EA0C2E4DB11CFEEE2F42F76EBA7EB3B30F6F3BB499EB6126158F466A5FB24525C35B48CCFAD4594519E46D98691DCEFA44083A853693E2144DCF74BF098D54FEE3A4E64977710E4213C717F7101E1A33385140DA80FD280DEB9FAB9C18A3ECFD79CA736C8A5D48E30C0D0F5AE32640FF75199EB58DF8A840018ECF89BA95C67DEF4FBB80D9E52A80DD8F6D31C7B108B5763E3FBBCB12AAB20E577305B7E081A82A245A690963CD0C17A6F46E65477D61F6A9F1F7306D27E489A7CFD44327574AB59CACCB40F9C030BB2DB62D7EFFD933E89528F13703224CCF7A170A7CCC411054EC0DA7EFFDFE79601D6E4636F62C2DC21D28C812B4451362EF026588F803AF8CEC61C3DBBDD5351338182DC541A226DFA5C37A8E6884DD99DD9DA300673377D8ED19295B9CCD09BD407980D57EC1EEC08C1368C2FE185AEF07690A506CC73E0E703DB5F7290E975A356ACE0394A2F29321A060CA21CFF35B09709628F9C2C06874EEEB3D57191178585E5BCD1BE594E92C48176D9599DF417E500B2970DAC4A96D78C6F70259AE46E97003D5109CB3AA941F542DEEA7650DB73572C1641F968D1FB4BDB8D23ADA12FA1AE39833BA9EA27D4F7CFE5ECC4CCEB054A0B2103B9EEEC396DDF030788CE2E6FC7913B778BBA98A28C443258100C865B94C3CF1ACEE33140F58BA471C5502CAF45AE1FF0FB6E8775D010F80DBA93E290CD9F502DE5C9C33CA5D9EF01B8DE2AABE1B3B503F076E303FF991F3530787FFAA2568987F94F52C243001E1944809C5EB1D01C3B0746CFA199AAD83364187E4CE99BD51901BB37EB12F0F953F167D615B82390F124BE36E86C8359EA95BFE88E12A8D98DFB0C9D56C24F122E9683FF480F191B27052A8D9BF553BF8DBDD40CE5E6EEC762696C3C814772B921F28E060BEDC910DE3DB465B5725D71197A64A1175DF47D504EEE4EEC54ED5358706C88CCA94332E30C919366C6B5F3A46B22EDAF4F46307749D1DD348F3A48E354B8C5EC5CFCBBB124B34813A0F55B63EA977FE0C49406AE6F7663A0C83E5D14DDB4081AE31836753A1890F6F7D961B4C38501BEDB9948F96ED273AC38780D8141424B34040496BE06B438DE46C63894D772635A5E6541CA2F8CFFAAA26AE268D161A0DB720181CFF7EC9214A252F8A0FBE21DA3E352A5FC437A297B38AA9C46F2D2B24C28482C8229BCB56DD215DAD5C0E52E19EB5737383C323A2A02509700C25E881AAD0348A54025B0005E0E9C203D53402C15C20061858E7387F1E075FD4B8CEE814431E467FE55C8EE554E27D79EF5562663DBF178FE2E75345AF32399A2CA256793DA5BF52DB13043FECEE2E8E982B92C114804936AB250D6FA89FEA8DA4AA50AE01F7678185B771586FF083E322C7E7837C6A5FB712393FCFAB7590651B4265B7EAADCBD9EE22744C57768FD202EB5548B75493BF1DE3FEDA71C349733342C180A276A147BBFF8370DE1000D6074FE2F2DF6030855D5098E1C2DFC97616C506560850FB1E68279720B17B33E08BB1421A88260A947240B00179A08057182C8A1BB5E70185E024FC1A99F32E43940464EB0248A8116E0B9B461A0478A6AF054EB0CEC42AE49DCA4E6C3A4C1C36B24853A0F60C89D5F3C9E2ED4151FE7750E52FBCF1D919F8229655C0D968F28A0BDDF262AB1B3680388DB39B47C0483A716220EAA5F07974655C48C1D522F26E98C9D87545C590581949E4B7E5B5D54DFB9A56E811C7F1664B2B9D42B9A417F130DD60BEBFBD412F37A18AFD04C9A114E08570D2175F74C0C25805FE4DC4DCB8A615256EEB31F26C96057246586BF395DB6E8D99FFD0E6C1A9F9D16F97F46C345E3B42102E9AF6ED6D2335816C6894AE53B739E322FE1B6F9FEEAB8E9BDD201EC3A09BE7A0E300AF4E1FD814B563EBABBA54F1B783BD1030ECA80AE984D74BF7E1A3A2693E22310D6DFFF69F975693F380ACBBE298FBC537D0E37A11DBF8A9B4AF6E667535100FD406C05587B76AC3FD8741E0BDFB1A8EDF72B63A9D49C2713A27BA164B99BBFD38C079DA2C2E709DB1C3B8BAAAFC7942964BFE3AA0486D346202A8FDA9B153BF1B9EBD7EFDAC4F6984D2D7C5C29427E125BCE6C19ADD926AE9928EB6DD243DBB31AC50F14DFF521FB318AFB79839B023149CE770B92CC5779764E69F1244390EE84F80E673143304B80D46EA7D56B2FADB8A41B3585AB74D538C176260FDCE9876C30241D1AD3E64070194C51B86952CAF59D08ACC30021C2D4D13F17258BBFC9721CD26CECD94472EBC5223992A4DF371DD66C31FA732A40338BBFE5B9CAC2CDA139E9802FFE54CB536749E10B73ABD6620A2487E085850832638EAB210241978619FB6D4E9B4563AE38F63ADFA354D73F7DD660A44583BF34807A3CB86D383A38124B4933B863E65965FC8EC0BECCB487A1E1A06EEFA14F46742FBC76C14B52F5CBDC5C500E1FC029530EE3F73D3C453D96B0AAE51CE8247485B44A5831DF87F029AEC2835D56ED4CF25395604E82E31D84B58FFA9ABC10A7F0E9D8100C4BE47201D5D78B695BFFE812F98FE811526DF50376702A231FD173A0008A885981B740DE73E87AF6EE264DF275E8AD7A5176CAAE0FDB41BE0F013A31E90EFED88F3DF139E48E06BB36AB88185DD28E075DE4199E6830356F9C5B7492D2C400E87515CD26A00E257B178387C6512E41D35EF350450A1DA90C19DF2150F2C63A9E56580485C3594BC08AEB351B498634B44B34E79F2867D801264C877090E159FF32D757BCB4EC5A141684EAAD76F3553E83095C93CC050B7F557F961175F11646734D967F0C3C708AC8A926F45793DEF1BFA36114511187280A9EA652F3F14B6561DB6AAF71C2C61829392CE592CD19C1177F1941A935E08DC14263B3014E260ABCD895B3A01D038BD756DDFC998C69744D87D1462ECD91710929844887FBF79C399B27C68E4EEC99083B0963D6D4114E03003283714E979086988F1A09853BD0B4BF928A2C2455FD2F55B3568D0B3EAB87043951EDC409C9BC27F8C9EAFEDB783EFD1B73BDAD3668536D0925C8C1874D82E83DED5F70C2653171305C215DC8D9E4150EA2C0F7D633E52DBE393C1FF2ADF86DEC1D0DA70D8F4D4E0D0373C33DF89187DEAF6973D900BA71220F31696D07F3E522AA5549D0D3D00581C86EFE32FD704BF5528C6B24EA02259223A87A0BBB1771E13ACD0FDA726593E922B5340DA235188BF76DA1BB228499EB91FFCB99956AE0FA2AE870CC804E3A3B04D427BA34583ED44852D67DC652CAF09AF4BAA3686ECEE79444DF2CF5AD3463B55FFDF92E18B4FD8567112002CDB5052817BC0AA3C3B63CE039270633E9F22A03F3EC038455D502297235F9BEBA623E1C18D648BD68C1859B98AD90D361EDB743081CD73BAB4B8509306DC49CCD3D86593CAF7F69B44C9772CE23474773CE7CF3E758CDA9DC138C517791BEDAEDE5FB688266439CBD3E37E0F4059C742AE7B1433CCCF83FD3DA7CB6461B3FF2BC623C12B0001911E705B094431D1C76DBF087BB3177654EDE583E2E24B9B25BBB2B7CC278936432954FFA39A9EE2776F7B8A66D24DC2C7DF2A0AE2016147220D6C6B016105FCB18D70E04F2575B6694B138609FD4A63F5DDA04B0D037DDBF7DACB17F6BD8A3F1CF01E8BE4CB9C96F08D5996C0DEBF195815D9C494E2F6E810A0C01C3C50DDFD15B00D340E4A950891396E0E7D21BABA6622D809426E0C4F1292924FE17E9F3CF9F4AF95C36B047C672EFB1BC566C21A34A315DA8BBEBEAB5AA8FD194DADA9FA5593925FE2E8BF13AF0CC23036D427CBA747FCBF110819BD5AF209CEDB397D8294E63C7076A91A35AD52E33D2522B56C11CA636AA3B89C7281B8E2480F9D79665D9E174B5378C6E42EF845CD27B86EFA7591627E209588AD16B139669B462A2305B2E5C469C8F87654B731E1A8D2071E11E3DCA2C21CCC9F5D1B913441E0417873167AB677159132A4708C1A60B0EE4EF92C073EC59B5537077A31582E9A1A29EB84271D064797B631B5096FE7DCEDF632106FDEE75CA026CFA01A95FAF2EF0A95BD4416052581BE359DF94BDE0D388231F2A62D06BBE08114A297D74B2E2FDACD711D29077FB2103D93D35253171305D81BF3255464A843BB68EBEDC06D0F1952BFD2E07E74BB1A5A56D5CAD83D9D499FB641052C644CDFC7FF43C253AB12EBB21330456CDAA18AF787B4278DACB6689604404A36A9691E793DDF8664545D38CE53307688A4E9F193777A5639E85F1CFA11C8745F4508B0C0254D22D365C96F1BF0D8D3133BEDD126CD8D1BC3266EFCDBB50D7422ED8D224288F01F9D93C6006067652C171B821B1F2F1A463325AC4BE67CF155DE46D18F89B8A4C6D47DDFB177C514DB2E32B4E95DEA905A87E0647FE17442B43E8D2F2D4CB3161523701E9ED21FC0D4C412259283036CD71839785C95C387118EE034F700DF79045694CF610ADFA81F2C2FAE31A1A0BA6C714D86DE9CF5F9906687A7DFAF1833026F7BFC04ACC8D0D87E06EE30767BC1392AC7BA52815F3A2CA65CE7B896890E01A19CB07D4C24BC751143DCA7032BD1A1230CFED867284B32B7AACB27642056EA41603F68DFBF2C7A971B7A1EBDC1896138E411E5C055DF8F09F48A3DAAFB5CD13A203ADD98EF966EA92036678CEF75A7C46A9668C29E89AF1DB610FCAA20377ABC03A1F1DD5744795DB4656FC90E83782485097A3E769836C2944E05AD7E95A8161710D939A589CD246383B7A477CFCDF3DCE49E6E7C7E8B579A44DA78A7FC3B1286524F08A1D7246EC0F09958C058E11DBF06A365D8453E49BE919EF25696DE560D2CD70685A188AAD587A0B9D922E5B6CB7F9398C377FBD17CF12C483142280C2168D834FC21FA8B26307F00EB0C79DCCFAB2B1FA606C6979FA8E08AF845016F2604D5A01933165C0E155F9FB4511CF13755F42B7CF512111AE2618C6469595507E584882A2131E796C6D2DB43387B97E240CB516B0DA5C9987D4BA4D20A9C7F862F432B0CF561A41BA2F7CFD8E1D16B765F596AA30238501A5AD51C599C9FA4349B1E2B82473BC826F8D2AB52BCAEB1A9C0AE8BA9F620F50D668FA6D8DB12D507E31CFEE91FB20D42C43E7205E917BB3333E027F3C61D8C09DB6456CD7E59673FDAA456ECD3CD491F985A5E9EC7CE1A30E04F9190CBEE597563A4A069E4FC191B66216F91E5474853E45CEC97BDEC46C3491BBF7C2478DD8162E1CA4E1982093B848AC7505CAC3829B55383B694F20352E710D9CF672CB607F1A52727210EBB6C68A1E9EFF6DA07C344E113EE9F3175622CBDADFFCB00FFD27751B374B485835D1C1354284F44E4AA2EE5C74988361494155D3DF2C4E07A0ED6F18A0E376BF269C24B50C98D3728166E20AFAF6098FC00C3532ACE1861E445E71E5FFF5ABE72A0FA3A6FED0DA543FDCE84D4342FC97E3488364EF5CBAC37C35D4CCDCD000000000000000055AA");
                        }
                        else
                        {
                              builder.Append("AA55461500B3020200371500000000010000000000000033000000080000005DC49A271615000031371315EFE6068EB45D8AB4519E189D0AF349A9AB70C86C53A0404007E7DDC87EE000BE0E57A71362A70611776C1BFFEA6AE5A1ADABF9346DD51F771188BD5BAE0B4C721FCE11D4CF50C40738BE03FA9B90AD47FE330DD59A8CA31D9CDEFC0384C86A4E812667F953B480FCFDADA97D45542D4D1A82CDC6F25323A0ECA8D632592B529B7147530C9523A25351E0588B22ED2B2C770C8E040E25C9B5BD563096C53A841A4F58326DD78D5BFA57A536B3DE34D78EFAA812C2DD5D7DDCC5CB43E30473F73CA57B8B47184407743852557CDBF8EF6ECB196E8D681E555C97BF050CE5025C652E813F1E3391E9AAA97EC8C39DA0DB7A9EDBD198F707D63E8CFE8DE2B6CD697B42CCB85FA242DA5559A9DC1BA7A9C35EB1A3750167657D48E160C43E3D63CDE7553940BBA978DFB72B21A183D7D58F2978E49D79FBA39C60C60940B51863878FE0441DAC29D9FC3F0AEAA41621DE5F9F579DD31CDACBA22075212476210CE1D75645D17DAFBA40008D3559803A89066CDB382136C8ECA737E449DBC2F43E956953D8B30E01A49C0C2C4867A6412FFE315DCFBE2240924A35C5445E1CFE7E27856AEB860E1D6213386B5CF34A615285393974A828A4F2D5AC69CB7F3FEFE4D214740FB787270053D1B029EC7F38AF48027B45B181884E4A83264B55DC4C43813016ABF44F899459E1CFC062041EDBB1C48177919B1C34C44447E63948602180AD52C50FD84D3BDE1B3736B9FDE904CF47ECD661B4F192E71BFE2AFA00408F56A7A66ACBDD77BB0FB1A071C805BF85B3EA1BE7CA6C84CE6256213763A6245716FAF80E19D9338B138B5794666C1F211B44179FFB65DA1CB03B2E6BC5D4F616B423C63222723411A5FAC58EE2E461476C04454ABFCF5C96292E839492A8188043292B7864F4D6717418245ECA4BF547A42BEE361CA64CD16A22D6B23F560383DB66384DA7D834FF7A6C74BEF98A1A4CB005B826257661B38B6969FD7581A2A5331EC753BDB272956358BC94C1EA87BF6B321B0135516E9D4A8086EE24180DB0D183048CBBB2C619AD8C8CAF0AE65FF65FE2951325818072E5FC6CCBB50A2042333386B1BD2062093AB27F32B37DC5DE1CB6222E4029CAF60E8EA0F4CB020432C96E8AF7D6D50F6CE7DCC593701E80C48DAA4E5C18E922050958A852BA5936BCE7C5CBB299E1D4607B9612DD33F62DC01CA18F48B61D4556C6C0E301E265C7FCE94A0BDA1CEB5890B65F84407C9C89AEFDD96A2020CE3DABC4CDD2311BA528824CADFB3E7FE0A4FFA0552158AD3EABFC4B347A6E3B596E9ED70DA1584D0B2E3DEC553D0DFFDCD1E3A8ABDA98AF4E4763BD63309A76C12C8A1F623920B6669690574D69149860A4E7A086CA1F92352C46E9DE458D056849308BF274E6AEEA8E40F1FE1D51A0F4AD5DC2365E97227D2BB7E3E1B5E950DB9B449EB37E81B61628B7B2B9CEA1D5E6102474EA5130D31487D9BB502B2A538E26D17E26F9BB5D15D94DE415AD14D299BE19011C8C6EF07388357FE8A48C6476CCE9FE1DAD50B6FDD9D0827262D6D546D1155FF6EAB021294B4767B5AB9C65B8E48C64B1815DED65BA587685E486A525B5A93734D2626F1006E238A65AC4B216B628D5EC97D6A5408E721CDD2A88F303F48C9ECCF6F8ACCD2A34406916D85DAB6D33FDE3720156EC374BFB24F2570098436CBBB4FA443084A1C03CA100AEC40E3FD637E01BAA6BE10739540A57EB2A90397B22428A05AF011B766AF89A55B640398566E2A565DBE0B4654A1CBA9FE32B0BBF1E8D9896CA302345E6F882A4F7FFAAF86BA845C5A4C145D5C0E4F48838CD22A6558BC3AE5394DF80BF20012CF197557F5453D461914B1B2E260047F37D17F4F23D4D74F00BD14B960AAC4611AF20D140D4609D32FA235BEE0FDB8F41FA0BE6C58679A66C4BEC8C27B67A9E808F986A638C14F6FCE6DB496D461F5A6C8DEBFD0D06431C2FE50DD395D2A3B29A1CC22D8E32649F945D81E9DD22FE671C5CA5E12F26CCC9AC53AB8F802514A2E912436E779768D7E15EEAE63269CB6EC06DC9D47A7F8CB86939BF219ED07AEEAB3C3130B3DD3C37F346C0EBD751DAA8D1E0865FD6017025E05D82E3475E6399A1DC94DE5DA34F779A545007390BA89D48FEAD54B773916B88FEA028347FBB08CBB026BF0CD5723010F60EF597B282D7507A2B66A7FF715102142EF6E897C7E0C3EA0C2E4DB11CFEEE2F42F76EBA7EB3B30F6F3BB499EB6126158F466A5FB24525C35B48CCFAD4594519E46D98691DCEFA44083A853693E2144DCF74BF098D54FEE3A4E64977710E4213C717F7101E1A33385140DA80FD280DEB9FAB9C18A3ECFD79CA736C8A5D48E30C0D0F5AE32640FF75199EB58DF8A840018ECF89BA95C67DEF4FBB80D9E52A80DD8F6D31C7B108B5763E3FBBCB12AAB20E577305B7E081A82A245A690963CD0C17A6F46E65477D61F6A9F1F7306D27E489A7CFD44327574AB59CACCB40F9C030BB2DB62D7EFFD933E89528F13703224CCF7A170A7CCC411054EC0DA7EFFDFE79601D6E4636F62C2DC21D28C812B4451362EF026588F803AF8CEC61C3DBBDD5351338182DC541A226DFA5C37A8E6884DD99DD9DA300673377D8ED19295B9CCD09BD407980D57EC1EEC08C1368C2FE185AEF07690A506CC73E0E703DB5F7290E975A356ACE0394A2F29321A060CA21CFF35B09709628F9C2C06874EEEB3D57191178585E5BCD1BE594E92C48176D9599DF417E500B2970DAC4A96D78C6F70259AE46E97003D5109CB3AA941F542DEEA7650DB73572C1641F968D1FB4BDB8D23ADA12FA1AE39833BA9EA27D4F7CFE5ECC4CCEB054A0B2103B9EEEC396DDF030788CE2E6FC7913B778BBA98A28C443258100C865B94C3CF1ACEE33140F58BA471C5502CAF45AE1FF0FB6E8775D010F80DBA93E290CD9F502DE5C9C33CA5D9EF01B8DE2AABE1B3B503F076E303FF991F3530787FFAA2568987F94F52C243001E1944809C5EB1D01C3B0746CFA199AAD83364187E4CE99BD51901BB37EB12F0F953F167D615B82390F124BE36E86C8359EA95BFE88E12A8D98DFB0C9D56C24F122E9683FF480F191B27052A8D9BF553BF8DBDD40CE5E6EEC762696C3C814772B921F28E060BEDC910DE3DB465B5725D71197A64A1175DF47D504EEE4EEC54ED5358706C88CCA94332E30C919366C6B5F3A46B22EDAF4F46307749D1DD348F3A48E354B8C5EC5CFCBBB124B34813A0F55B63EA977FE0C49406AE6F7663A0C83E5D14DDB4081AE31836753A1890F6F7D961B4C38501BEDB9948F96ED273AC38780D8141424B34040496BE06B438DE46C63894D772635A5E6541CA2F8CFFAAA26AE268D161A0DB720181CFF7EC9214A252F8A0FBE21DA3E352A5FC437A297B38AA9C46F2D2B24C28482C8229BCB56DD215DAD5C0E52E19EB5737383C323A2A02509700C25E881AAD0348A54025B0005E0E9C203D53402C15C20061858E7387F1E075FD4B8CEE814431E467FE55C8EE554E27D79EF5562663DBF178FE2E75345AF32399A2CA256793DA5BF52DB13043FECEE2E8E982B92C114804936AB250D6FA89FEA8DA4AA50AE01F7678185B771586FF083E322C7E7837C6A5FB712393FCFAB7590651B4265B7EAADCBD9EE22744C57768FD202EB5548B75493BF1DE3FEDA71C349733342C180A276A147BBFF8370DE1000D6074FE2F2DF6030855D5098E1C2DFC97616C506560850FB1E68279720B17B33E08BB1421A88260A947240B00179A08057182C8A1BB5E70185E024FC1A99F32E43940464EB0248A8116E0B9B461A0478A6AF054EB0CEC42AE49DCA4E6C3A4C1C36B24853A0F60C89D5F3C9E2ED4151FE7750E52FBCF1D919F8229655C0D968F28A0BDDF262AB1B3680388DB39B47C0483A716220EAA5F07974655C48C1D522F26E98C9D87545C590581949E4B7E5B5D54DFB9A56E811C7F1664B2B9D42B9A417F130DD60BEBFBD412F37A18AFD04C9A114E08570D2175F74C0C25805FE4DC4DCB8A615256EEB31F26C96057246586BF395DB6E8D99FFD0E6C1A9F9D16F97F46C345E3B42102E9AF6ED6D2335816C6894AE53B739E322FE1B6F9FEEAB8E9BDD201EC3A09BE7A0E300AF4E1FD814B563EBABBA54F1B783BD1030ECA80AE984D74BF7E1A3A2693E22310D6DFFF69F975693F380ACBBE298FBC537D0E37A11DBF8A9B4AF6E667535100FD406C05587B76AC3FD8741E0BDFB1A8EDF72B63A9D49C2713A27BA164B99BBFD38C079DA2C2E709DB1C3B8BAAAFC7942964BFE3AA0486D346202A8FDA9B153BF1B9EBD7EFDAC4F6984D2D7C5C29427E125BCE6C19ADD926AE9928EB6DD243DBB31AC50F14DFF521FB318AFB79839B023149CE770B92CC5779764E69F1244390EE84F80E673143304B80D46EA7D56B2FADB8A41B3585AB74D538C176260FDCE9876C30241D1AD3E64070194C51B86952CAF59D08ACC30021C2D4D13F17258BBFC9721CD26CECD94472EBC5223992A4DF371DD66C31FA732A40338BBFE5B9CAC2CDA139E9802FFE54CB536749E10B73ABD6620A2487E085850832638EAB210241978619FB6D4E9B4563AE38F63ADFA354D73F7DD660A44583BF34807A3CB86D383A38124B4933B863E65965FC8EC0BECCB487A1E1A06EEFA14F46742FBC76C14B52F5CBDC5C500E1FC029530EE3F73D3C453D96B0AAE51CE8247485B44A5831DF87F029AEC2835D56ED4CF25395604E82E31D84B58FFA9ABC10A7F0E9D8100C4BE47201D5D78B695BFFE812F98FE811526DF50376702A231FD173A0008A885981B740DE73E87AF6EE264DF275E8AD7A5176CAAE0FDB41BE0F013A31E90EFED88F3DF139E48E06BB36AB88185DD28E075DE4199E6830356F9C5B7492D2C400E87515CD26A00E257B178387C6512E41D35EF350450A1DA90C19DF2150F2C63A9E56580485C3594BC08AEB351B498634B44B34E79F2867D801264C877090E159FF32D757BCB4EC5A141684EAAD76F3553E83095C93CC050B7F557F961175F11646734D967F0C3C708AC8A926F45793DEF1BFA36114511187280A9EA652F3F14B6561DB6AAF71C2C61829392CE592CD19C1177F1941A935E08DC14263B3014E260ABCD895B3A01D038BD756DDFC998C69744D87D1462ECD91710929844887FBF79C399B27C68E4EEC99083B0963D6D4114E03003283714E979086988F1A09853BD0B4BF928A2C2455FD2F55B3568D0B3EAB87043951EDC409C9BC27F8C9EAFEDB783EFD1B73BDAD3668536D0925C8C1874D82E83DED5F70C2653171305C215DC8D9E4150EA2C0F7D633E52DBE393C1FF2ADF86DEC1D0DA70D8F4D4E0D0373C33DF89187DEAF6973D900BA71220F31696D07F3E522AA5549D0D3D00581C86EFE32FD704BF5528C6B24EA02259223A87A0BBB1771E13ACD0FDA726593E922B5340DA235188BF76DA1BB228499EB91FFCB99956AE0FA2AE870CC804E3A3B04D427BA34583ED44852D67DC652CAF09AF4BAA3686ECEE79444DF2CF5AD3463B55FFDF92E18B4FD8567112002CDB5052817BC0AA3C3B63CE039270633E9F22A03F3EC038455D502297235F9BEBA623E1C18D648BD68C1859B98AD90D361EDB743081CD73BAB4B8509306DC49CCD3D86593CAF7F69B44C9772CE23474773CE7CF3E758CDA9DC138C517791BEDAEDE5FB688266439CBD3E37E0F4059C742AE7B1433CCCF83FD3DA7CB6461B3FF2BC623C12B0001911E705B094431D1C76DBF087BB3177654EDE583E2E24B9B25BBB2B7CC278936432954FFA39A9EE2776F7B8A66D24DC2C7DF2A0AE2016147220D6C6B016105FCB18D70E04F2575B6694B138609FD4A63F5DDA04B0D037DDBF7DACB17F6BD8A3F1CF01E8BE4CB9C96F08D5996C0DEBF195815D9C494E2F6E810A0C01C3C50DDFD15B00D340E4A950891396E0E7D21BABA6622D809426E0C4F1292924FE17E9F3CF9F4AF95C36B047C672EFB1BC566C21A34A315DA8BBEBEAB5AA8FD194DADA9FA5593925FE2E8BF13AF0CC23036D427CBA747FCBF110819BD5AF209CEDB397D8294E63C7076A91A35AD52E33D2522B56C11CA636AA3B89C7281B8E2480F9D79665D9E174B5378C6E42EF845CD27B86EFA7591627E209588AD16B139669B462A2305B2E5C469C8F87654B731E1A8D2071E11E3DCA2C21CCC9F5D1B913441E0417873167AB677159132A4708C1A60B0EE4EF92C073EC59B5537077A31582E9A1A29EB84271D064797B631B5096FE7DCEDF632106FDEE75CA026CFA01A95FAF2EF0A95BD4416052581BE359DF94BDE0D388231F2A62D06BBE08114A297D74B2E2FDACD711D29077FB2103D93D35253171305D81BF3255464A843BB68EBEDC06D0F1952BFD2E07E74BB1A5A56D5CAD83D9D499FB641052C644CDFC7FF43C253AB12EBB21330456CDAA18AF787B4278DACB6689604404A36A9691E793DDF8664545D38CE53307688A4E9F193777A5639E85F1CFA11C8745F4508B0C0254D22D365C96F1BF0D8D3133BEDD126CD8D1BC3266EFCDBB50D7422ED8D224288F01F9D93C6006067652C171B821B1F2F1A463325AC4BE67CF155DE46D18F89B8A4C6D47DDFB177C514DB2E32B4E95DEA905A87E0647FE17442B43E8D2F2D4CB3161523701E9ED21FC0D4C412259283036CD71839785C95C387118EE034F700DF79045694CF610ADFA81F2C2FAE31A1A0BA6C714D86DE9CF5F9906687A7DFAF1833026F7BFC04ACC8D0D87E06EE30767BC1392AC7BA52815F3A2CA65CE7B896890E01A19CB07D4C24BC751143DCA7032BD1A1230CFED867284B32B7AACB27642056EA41603F68DFBF2C7A971B7A1EBDC1896138E411E5C055DF8F09F48A3DAAFB5CD13A203ADD98EF966EA92036678CEF75A7C46A9668C29E89AF1DB610FCAA20377ABC03A1F1DD5744795DB4656FC90E83782485097A3E769836C2944E05AD7E95A8161710D939A589CD246383B7A477CFCDF3DCE49E6E7C7E8B579A44DA78A7FC3B1286524F08A1D7246EC0F09958C058E11DBF06A365D8453E49BE919EF25696DE560D2CD70685A188AAD587A0B9D922E5B6CB7F9398C377FBD17CF12C483142280C2168D834FC21FA8B26307F00EB0C79DCCFAB2B1FA606C6979FA8E08AF845016F2604D5A01933165C0E155F9FB4511CF13755F42B7CF512111AE2618C6469595507E584882A2131E796C6D2DB43387B97E240CB516B0DA5C9987D4BA4D20A9C7F862F432B0CF561A41BA2F7CFD8E1D16B765F596AA30238501A5AD51C599C9FA4349B1E2B82473BC826F8D2AB52BCAEB1A9C0AE8BA9F620F50D668FA6D8DB12D507E31CFEE91FB20D42C43E7205E917BB3333E027F3C61D8C09DB6456CD7E59673FDAA456ECD3CD491F985A5E9EC7CE1A30E04F9190CBEE597563A4A069E4FC191B66216F91E5474853E45CEC97BDEC46C3491BBF7C2478DD8162E1CA4E1982093B848AC7505CAC3829B55383B694F20352E710D9CF672CB607F1A52727210EBB6C68A1E9EFF6DA07C344E113EE9F3175622CBDADFFCB00FFD27751B374B485835D1C1354284F44E4AA2EE5C74988361494155D3DF2C4E07A0ED6F18A0E376BF269C24B50C98D3728166E20AFAF6098FC00C3532ACE1861E445E71E5FFF5ABE72A0FA3A6FED0DA543FDCE84D4342FC97E3488364EF5CBAC37C35D4CCDCD000000000000000055AA");
                        }
                        num = 4;
                        byte[] dst = Converter.hexStringToByte(builder.ToString());
                        Buffer.BlockCopy(BitConverter.GetBytes(0x17), 0, dst, 0x17, 4);
                        Buffer.BlockCopy(BitConverter.GetBytes((int)(int_128 - 1)), 0, dst, 0x1b, 4);
                        if (World.int_132 == 1)
                        {
                              Buffer.BlockCopy(BitConverter.GetBytes(base.Client.int_2), 0, dst, 0x1f, 4);
                        }
                        Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, dst, 5, 2);
                        Buffer.BlockCopy(BitConverter.GetBytes(int.Parse(table.Rows[0]["FLD_SEX"].ToString())), 0, dst, 15, 2);
                        num = 5;
                        if (base.Client != null)
                        {
                              base.Client.Send(dst, dst.Length);
                        }
                        if (World.int_132 == 1)
                        {
                              base.Client.bool_2 = true;
                        }
                        Form1.WriteLine(3, string.Concat(new object[] { "连接登陆成功[", base.UserSessionID, "]-[", string_10.ToString(), "]" }));
                        num = 6;
                        table.Dispose();
                        return;
                        Label_047B:
                        using (IEnumerator<NetState> enumerator2 = World.threadSafeDictionary_0.Values.GetEnumerator())
                        {
                              NetState state2;
                              while (enumerator2.MoveNext())
                              {
                                    state2 = enumerator2.Current;
                                    if (((base.Client != null) && (state2 != base.Client)) && (state2.Player.Userid == string_10))
                                    {
                                          goto Label_04C8;
                                    }
                              }
                              goto Label_04DD;
                              Label_04C8:
                              state2.Dispose();
                        }
                        Label_04DD:
                        if (base.Client != null)
                        {
                              base.Client.Dispose();
                        }
                  }
                  catch (Exception exception)
                  {
                        if (base.Client != null)
                        {
                              base.Client.Dispose();
                        }
                        Form1.WriteLine(1, "连接登陆2()出错：" + num + exception);
                  }
            }

            public void LINH_THU_BIEN_THAN(byte[] byte_5, int int_128)
            {
                  try
                  {
                        this.Packet_Modify(byte_5, int_128);
                        byte[] dst = new byte[4];
                        Buffer.BlockCopy(byte_5, 11, dst, 0, 1);
                        byte[] buffer2 = new byte[4];
                        Buffer.BlockCopy(byte_5, 13, buffer2, 0, 2);
                        byte[] buffer3 = Converter.hexStringToByte("AA55230001F4045B1014000100050038FE0D108546940181DC143C00000100000000000000E4A255AA");
                        if (BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[BitConverter.ToInt32(dst, 0)].VAT_PHAM_ID, 0) == 0x3c14dc81)
                        {
                              Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, buffer3, 5, 2);
                              byte[] buffer4 = Converter.hexStringToByte("AA551500002C015C100600989E00000100000000000000000055AA");
                              Buffer.BlockCopy(buffer2, 0, buffer4, 15, 2);
                              Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, buffer4, 5, 2);
                              Buffer.BlockCopy(BitConverter.GetBytes(base.NHAN_VAT_LINH_THU_TOAN_BO_TRANG_PHUC_ID), 0, buffer4, 11, 2);
                              if (base.Client != null)
                              {
                                    base.Client.Send(buffer3, buffer3.Length);
                              }
                              if (base.Client != null)
                              {
                                    base.Client.Send(buffer4, buffer4.Length);
                              }
                              this.vmethod_0(buffer4, buffer4.Length);
                              if (base.NHAN_VAT_LINH_THU != null)
                              {
                                    base.NHAN_VAT_LINH_THU.CallPet(BitConverter.ToInt16(buffer2, 0));
                              }
                              this.LAM_GIAM_DI_VAT_PHAM(BitConverter.ToInt32(dst, 0), 1);
                        }
                  }
                  catch (Exception exception)
                  {
                        Form1.WriteLine(1, "They reveal transfiguration![" + base.Userid + "]-[" + base.UserName + "]" + exception.Message);
                  }
            }

            //캐릭터 정보 로드
            public void LoadCharacters(byte[] byte_5, int int_128)
            {
                  
                  try
                  {
                        this.Packet_Modify(byte_5, int_128);
                        base.allChars = new Dictionary<int, string>();
                        byte[] src = new byte[0x49];
                        byte[] buffer2 = new byte[] {
                    170, 0x55, 20, 0, 0, 0, 0, 0x11, 0, 5, 0, 0xff, 0x2e, 0x18, 0x89, 2,
                    0, 0, 0, 0, 0, 0, 0, 0, 0x55, 170
                };
                        string str = "AA552C0B012C0111001D0B000000000000000000000000000000000000000000000000000000000000000000000000000000000001000000080100000100010200004843000000000080CA44650000000000000000000000000000000000000000000000FFFFFFFFFFFFFFFF0100000000000000FFFFFFFFFFFFFFFF0200000000000000FFFFFFFFFFFFFFFF08080F09910074000000000064000000000000009100740000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000069498804052A4400E80393D255AA";
                        string str2 = string.Format("select * from [TBL_XWWL_Char] where FLD_ID=@Userid", new object[0]);
                        SqlParameter[] parameterArray = new SqlParameter[] { SqlDBA.MakeInParam("@Userid", SqlDbType.VarChar, 30, base.Userid) };
                        DataTable table = DBA.smethod_9(str2, parameterArray);
                        if (table == null)
                        {
                              goto Label_065B;
                        }
                        if (table.Rows.Count == 0)
                        {
                              if (base.Client != null)
                              {
                                    base.Client.Send(buffer2, buffer2.Length);
                              }
                              goto Label_0652;
                        }
                        if (table.Rows.Count > 4)
                        {
                              Form1.WriteLine(1, string.Concat(new object[] { "人物列表出错，人物数量太多[", base.Userid, "][", base.UserName, "] 人物全服ID=[", base.UserSessionID, "] [", base.Client.ToString(), "] 数[", table.Rows.Count, "]" }));
                              table.Dispose();
                              base.Client.Dispose();
                              return;
                        }
                        int num = 0;
                        Label_0154:
                        if (num < table.Rows.Count)
                        {
                              base.allChars.Add((int)table.Rows[num]["FLD_INDEX"], table.Rows[num]["FLD_NAME"].ToString());
                              byte[] dst = Converter.hexStringToByte(str);
                              Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, dst, 5, 2);
                              byte[] bytes = Encoding.Default.GetBytes(table.Rows[num]["FLD_NAME"].ToString());
                              byte[] buffer5 = BitConverter.GetBytes((int)table.Rows[num]["FLD_ZX"]);
                              byte[] buffer6 = BitConverter.GetBytes((int)table.Rows[num]["FLD_LEVEL"]);
                              byte[] buffer7 = BitConverter.GetBytes((int)table.Rows[num]["FLD_JOB_LEVEL"]);
                              byte[] buffer8 = BitConverter.GetBytes((int)table.Rows[num]["FLD_JOB"]);
                              byte[] buffer9 = BitConverter.GetBytes((int)table.Rows[num]["FLD_HP"]);
                              BitConverter.GetBytes((int)table.Rows[num]["FLD_SP"]);
                              byte[] buffer10 = (byte[])table.Rows[num]["FLD_WEARITEM"];                            
                              byte[] buffer11 = BitConverter.GetBytes(float.Parse(table.Rows[num]["FLD_X"].ToString()));
                              byte[] buffer12 = BitConverter.GetBytes((int)table.Rows[num]["FLD_MENOW"]);
                              Buffer.BlockCopy(buffer11, 0, dst, 0x44, 4);
                              Buffer.BlockCopy(BitConverter.GetBytes(float.Parse(table.Rows[num]["FLD_Z"].ToString())), 0, dst, 0x48, 4);
                              Buffer.BlockCopy(BitConverter.GetBytes(float.Parse(table.Rows[num]["FLD_Y"].ToString())), 0, dst, 0x4c, 4);
                              Buffer.BlockCopy(buffer12, 0, dst, 80, 2);
                              DataTable table2 = RxjhClass.EXE_LOAD_GUILD(table.Rows[num]["FLD_NAME"].ToString());
                              //퀘스트 정보 로드
                              byte[] buffer4 = (byte[])table.Rows[num]["FLD_QUEST"];
                              Form1.WriteLine(1, "Players LoadCharacters FLD_QUEST Data: [" + BitConverter.ToString(buffer4).Replace("-", "") + "]");
                              int num16 = 0;
                              while (true)
                              {
                                    if (num16 >= 100)
                                    {
                                          break;
                                    }
                                    byte[] buffer31 = new byte[4];
                                    try
                                    {
                                          if (buffer4.Length < ((num16 * 4) + 4))
                                          {
                                                break;
                                          }
                                          Buffer.BlockCopy(buffer4, num16 * 4, buffer31, 0, 4);
                                          NHIEM_VU_CLASS nhiem_vu_class = new NHIEM_VU_CLASS(buffer31);
                                          if ((nhiem_vu_class.NHIEM_VU_ID != 0) && !this.dictionary_2.ContainsKey(nhiem_vu_class.NHIEM_VU_ID))
                                          {
                                                this.dictionary_2.Add(nhiem_vu_class.NHIEM_VU_ID, nhiem_vu_class);
                                          }
                                    }
                                    catch (Exception exception21)
                                    {
                                          Console.WriteLine(exception21);
                                    }
                                    num16++;
                              }
                              if (table2 != null)
                              {
                                    Buffer.BlockCopy(BitConverter.GetBytes((int)table2.Rows[0]["Mon_trang_phuc_tu"]), 0, dst, 0x54, 1);
                                    Buffer.BlockCopy(BitConverter.GetBytes((int)table2.Rows[0]["Mon_trang_phuc_mau_sac"]), 0, dst, 0x56, 2);
                                    table2.Dispose();
                              }
                              byte[] buffer13 = BitConverter.GetBytes((int)table.Rows[num]["FLD_JQ"]);
                              Buffer.BlockCopy(buffer13, 0, dst, 0xb14, buffer13.Length);
                              dst[11] = byte.Parse(table.Rows[num]["FLD_INDEX"].ToString());
                              Buffer.BlockCopy(bytes, 0, dst, 12, bytes.Length);
                              Buffer.BlockCopy(buffer5, 0, dst, 50, 2);
                              Buffer.BlockCopy(buffer6, 0, dst, 0x34, 2);
                              Buffer.BlockCopy(buffer7, 0, dst, 0x36, 2);
                              Buffer.BlockCopy(buffer8, 0, dst, 0x38, 2);
                              NHAN_VAT_CLASS nhan_vat_class1 = new NHAN_VAT_CLASS((byte[])table.Rows[num]["FLD_FACE"]);
                              Buffer.BlockCopy(BitConverter.GetBytes(nhan_vat_class1.MAU_TOC), 0, dst, 0x3a, 2);
                              Buffer.BlockCopy(BitConverter.GetBytes((short)nhan_vat_class1.KIEU_TOC), 0, dst, 60, 2);
                              Buffer.BlockCopy(BitConverter.GetBytes((short)nhan_vat_class1.GIOI_TINH), 0, dst, 0x41, 1);
                              Buffer.BlockCopy(buffer9, 0, dst, 0xa4, 2);
                              Buffer.BlockCopy(BitConverter.GetBytes((int)table.Rows[num]["FLD_MP"]), 0, dst, 0xa6, 2);
                              int num1 = (int)table.Rows[num]["FLD_ZBVER"];
                              int num2 = 200;
                              int num3 = 0;
                              while (true)
                              {
                                    if (num3 < 15)
                                    {
                                          if (num3 >= 15)
                                          {
                                                Buffer.BlockCopy(src, 0, dst, num2 + (num3 * World.int_5), 0x48);
                                          }
                                          else
                                          {
                                                try
                                                {
                                                      Buffer.BlockCopy(buffer10, num3 * 0x49, dst, num2 + (num3 * World.int_5), 12);
                                                      Buffer.BlockCopy(buffer10, (num3 * 0x49) + 12, dst, (num2 + (num3 * World.int_5)) + 0x10, 60);
                                                }
                                                catch
                                                {
                                                      Buffer.BlockCopy(src, 0, dst, num2 + (num3 * World.int_5), 0x48);
                                                }
                                          }
                                    }
                                    else
                                    {
                                          if (base.Client != null)
                                          {
                                                base.Client.method_8(dst, dst.Length);
                                          }
                                          num++;
                                          goto Label_0154;
                                    }
                                    num3++;
                              }
                        }
                        Label_0652:
                        table.Dispose();
                        return;
                        Label_065B:
                        base.Client.Send(buffer2, buffer2.Length);
                  }
                  catch (Exception exception)
                  {
                        Form1.WriteLine(1, "获取人物列表出错[" + base.Userid + "]-[" + base.Client.ToString() + "]" + exception.Message);
                  }
            }

            public void LoginConnection(byte[] byte_5, int int_128)
            {
                  try
                  {
                        PacketReader reader = new PacketReader(byte_5, int_128, false);
                        reader.method_1(11, SeekOrigin.Begin);
                        string input = reader.method_25(30).Trim();
                        if (!Regex.IsMatch(input, @"^(?:[\u4e00-\u9fa5]*\w*\s*)+$"))
                        {
                              Form1.WriteLine(3, "连接登陆出错|" + Converter.smethod_24(byte_5));
                              if (base.Client != null)
                              {
                                    base.Client.Dispose();
                              }
                        }
                        else if (base.Userid != "")
                        {
                              DBA.smethod_7($"UPDATE TBL_ACCOUNT SET FLD_ZT=1 WHERE FLD_ID='{base.Userid}'", "rxjhaccount");
                              Form1.WriteLine(0x4d, string.Concat(new object[] { "非法修改封包封号_连接登陆[", base.Userid, "][", base.UserName, "] 人物全服ID=[", base.UserSessionID, "] [", base.Client.ToString(), "]" }));
                              if (base.Client != null)
                              {
                                    base.Client.Dispose();
                              }
                        }
                        else
                        {
                              Players players = World.smethod_0(input);
                              if (players != null)
                              {
                                    
                                    players.LUU_NHAN_VAT_SO_LIEU();
                                    players.Players_Logout();
                                    players.Dispose();
                                    players.Client.Dispose();
                                    base.Client.Dispose();
                              }
                              else
                              {
                                    reader.method_1(0x4f, SeekOrigin.Begin);
                                    string str2 = reader.method_25(0x10).Trim();
                                    reader.method_1(0x5f, SeekOrigin.Begin);
                                    string str3 = reader.method_25(0x10).Trim();
                                    if (this.Discover_has_landed_the_account_number(str2, base.Client.ToString(), str3) >= World.Cho_phep_mo_nhieu_So_luong)
                                    {
                                          base.Client.Dispose();
                                    }
                                    else
                                    {
                                          ClientIpAddress address = new ClientIpAddress(input, str2, base.Client.ToString(), str3);
                                          World.threadSafeDictionary_2.Add(base.UserSessionID, address);
                                          base.Userid = input;
                                          World.class20_0.method_4(string.Concat(new object[] { "用户登陆|", input, "|", base.Client.ToString(), "|", World.Server_ID, "|", base.UserSessionID }));
                                    }
                              }
                        }
                  }
                  catch (Exception exception)
                  {
                        Form1.WriteLine(1, string.Concat(new object[] { "连接登陆出错[", base.UserSessionID, "]-[", base.Client.ToString(), "]", exception.Message }));
                  }
            }

            public void LOI_KHUYEN_CHIEN_TRANH_BAT_DAU(int int_128, int int_129)
            {
                  byte[] dst = Converter.hexStringToByte("AA55170001E001371008000000000000000000000000000000ED3155AA");
                  Buffer.BlockCopy(BitConverter.GetBytes(int_128), 0, dst, 11, 4);
                  Buffer.BlockCopy(BitConverter.GetBytes(int_129), 0, dst, 15, 4);
                  Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, dst, 5, 2);
                  if (base.Client != null)
                  {
                        base.Client.Send(dst, dst.Length);
                  }
            }

            public void LUU_LAI_THO_LINH_PHU(byte[] byte_5, int int_128)
            {
                  try
                  {
                        this.Packet_Modify(byte_5, int_128);
                        char[] separator = new char[] { ',' };
                        string[] strArray = World.Ban_do_khoa_chat.Split(separator);
                        for (int i = 0; i < strArray.Length; i++)
                        {
                              if (strArray[i] == base.CharacterCoords_Map.ToString())
                              {
                                    goto Label_0122;
                              }
                        }
                        byte[] dst = new byte[4];
                        byte[] bytes = new byte[15];
                        for (int j = 0; j < 15; j++)
                        {
                              if (byte_5[11 + j] == 0)
                              {
                                    break;
                              }
                              bytes[j] = byte_5[11 + j];
                        }
                        string str = Encoding.Default.GetString(bytes).Replace("\0", "");
                        Buffer.BlockCopy(byte_5, 0x1a, dst, 0, 2);
                        TBL_XWWL_MAP tbl_xwwl_map = new TBL_XWWL_MAP(base.CharacterCoords_X, base.CharacterCoords_Y, base.CharacterCoords_Z, base.CharacterCoords_Map)
                        {
                              Rxjh_name = str
                        };
                        if (base.hashtable_0.ContainsKey(BitConverter.ToInt32(dst, 0)))
                        {
                              base.hashtable_0.Remove(BitConverter.ToInt32(dst, 0));
                        }
                        base.hashtable_0.Add(BitConverter.ToInt32(dst, 0), tbl_xwwl_map);
                        this.GUI_DI_LUU_LAI_THO_LINH_PHU_SO_LIEU(bytes, dst, tbl_xwwl_map);
                        return;
                        Label_0122:
                        base.GameMessage("Sorry this map is not allowed to save!", 10, "system hint");
                  }
                  catch (Exception exception)
                  {
                        Form1.WriteLine(1, "Save earth magic Error![" + base.Userid + "]-[" + base.UserName + "]" + exception.Message);
                  }
            }

            public void MagicAttack(int int_128, int PeopleID)
            {
                  if (World.jlMsg == 1)
                  {
                        Form1.WriteLine(0, "Players_魔法攻击");
                  }
                  try
                  {
                        Players players;
                        TBL_XWWL_KONGFU tbl_xwwl_kongfu;
                        double num;
                        double num2;
                        int num3;
                        double num4;
                        double num108;
                        double num109;
                        double num110;
                        double num111;
                        Random random = new Random(World.smethod_15());
                        double num5 = 100.0;
                        double num6 = 0.0;
                        if (PeopleID >= 0x2710)
                        {
                              try
                              {
                                    TBL_XWWL_NPC tbl_xwwl_npc;
                                    TBL_XWWL_KONGFU tbl_xwwl_kongfu2;
                                    TO_DOI_CLASS to_doi_class2;
                                    if ((!MapClass.GetnpcTemplate(base.CharacterCoords_Map).TryGetValue(PeopleID, out tbl_xwwl_npc) || (tbl_xwwl_npc.IsNpc == 1)) || (base.PlayerShop != null))
                                    {
                                          return;
                                    }
                                    if (base.CharacterCoords_Map == 0x321)
                                    {
                                          if ((tbl_xwwl_npc.FLD_PID == 0x3c84) || (tbl_xwwl_npc.FLD_PID == 0x3c83))
                                          {
                                                if (base.Player_Zx == 1)
                                                {
                                                      return;
                                                }
                                          }
                                          else if (((tbl_xwwl_npc.FLD_PID == 0x3c86) || (tbl_xwwl_npc.FLD_PID == 0x3c85)) && (base.Player_Zx == 2))
                                          {
                                                return;
                                          }
                                    }
                                    if (World.Danh_quai_khoang_cach_khong_che_co_hay_khong_mo_ra != 0)
                                    {
                                          if (((base.Player_Job != 4) && (base.Player_Job != 5)) && (base.Player_Job != 7))
                                          {
                                                if (Math.Sqrt(Math.Pow((double)(base.CharacterCoords_X - tbl_xwwl_npc.Rxjh_X), 2.0) + Math.Pow((double)(base.CharacterCoords_Y - tbl_xwwl_npc.Rxjh_Y), 2.0)) >= World.Quai_vat_gan_nguoi_nghe_nghiep_Cong_kich_khoang_cach)
                                                {
                                                      return;
                                                }
                                          }
                                          else if (Math.Sqrt(Math.Pow((double)(base.CharacterCoords_X - tbl_xwwl_npc.Rxjh_X), 2.0) + Math.Pow((double)(base.CharacterCoords_Y - tbl_xwwl_npc.Rxjh_Y), 2.0)) >= World.Quai_vat_trinh_dien_nghe_nghiep_Cong_kich_khoang_cach)
                                          {
                                                return;
                                          }
                                    }
                                    if (tbl_xwwl_npc.Rxjh_HP <= 0L)
                                    {
                                          tbl_xwwl_npc.method_17();
                                          return;
                                    }
                                    if ((!World.TBL_KONGFU.TryGetValue(int_128, out tbl_xwwl_kongfu2) || ((tbl_xwwl_kongfu2.FLD_PID == 0x61a81) && !World.TBL_KONGFU.TryGetValue(base.Bow_quan_cong_skill_ID, out tbl_xwwl_kongfu2))) || ((base.Player_Job != tbl_xwwl_kongfu2.FLD_JOB) || ((tbl_xwwl_kongfu2.FLD_ZX != 0) && (base.Player_Zx != tbl_xwwl_kongfu2.FLD_ZX))))
                                    {
                                          return;
                                    }
                                    if (tbl_xwwl_kongfu2.FLD_VO_CONG_LOAI_HINH == 3)
                                    {
                                          int num17 = 0;
                                          num17 = tbl_xwwl_kongfu2.FLD_MP + ((base.class79_0[3, tbl_xwwl_kongfu2.FLD_INDEX].VO_CONG_THU_BAC - 1) * base.class79_0[3, tbl_xwwl_kongfu2.FLD_INDEX].FLD_MOI_CAP_THEM_MP);
                                          if (base.NHAN_VAT_MP < num17)
                                          {
                                                base.NOI_CONG_KHONG_DU_NHAC_NHO();
                                                return;
                                          }
                                          this.PHEP_THUAT_SU_DUNG((double)num17);
                                    }
                                    else if ((tbl_xwwl_kongfu2.FLD_VO_CONG_LOAI_HINH == 0) && (base.class79_0[0, tbl_xwwl_kongfu2.FLD_INDEX] != null))
                                    {
                                          int num18 = 0;
                                          if (base.class79_0[0, tbl_xwwl_kongfu2.FLD_INDEX].VO_CONG_THU_BAC != 0)
                                          {
                                                num18 = tbl_xwwl_kongfu2.FLD_MP + ((base.class79_0[0, tbl_xwwl_kongfu2.FLD_INDEX].VO_CONG_THU_BAC - 1) * base.class79_0[0, tbl_xwwl_kongfu2.FLD_INDEX].FLD_MOI_CAP_THEM_MP);
                                          }
                                          else
                                          {
                                                num18 = tbl_xwwl_kongfu2.FLD_MP;
                                          }
                                          if (base.NHAN_VAT_MP < num18)
                                          {
                                                base.NOI_CONG_KHONG_DU_NHAC_NHO();
                                                return;
                                          }
                                          this.PHEP_THUAT_SU_DUNG((double)num18);
                                    }
                                    else if (tbl_xwwl_kongfu2.FLD_VO_CONG_LOAI_HINH == 2)
                                    {
                                          if (base.NHAN_VAT_MP < base.Phu_the_vo_cong_luc_cong_kich_MP)
                                          {
                                                base.NOI_CONG_KHONG_DU_NHAC_NHO();
                                                return;
                                          }
                                          this.PHEP_THUAT_SU_DUNG((double)base.Phu_the_vo_cong_luc_cong_kich_MP);
                                    }
                                    else
                                    {
                                          if (base.NHAN_VAT_MP < tbl_xwwl_kongfu2.FLD_MP)
                                          {
                                                base.NOI_CONG_KHONG_DU_NHAC_NHO();
                                                return;
                                          }
                                          this.PHEP_THUAT_SU_DUNG((double)tbl_xwwl_kongfu2.FLD_MP);
                                    }
                                    if (tbl_xwwl_kongfu2.FLD_INDEX == -1)
                                    {
                                          base.int_1 = 0;
                                          this.CONG_KICH_TINH_TOAN_HOAN_THANH2(this, PeopleID, int_128, 0L, 0, tbl_xwwl_npc.Rxjh_HP);
                                          if ((base.list_5.Count > 1) && (base.int_1 == 0))
                                          {
                                                TO_DOI_CLASS to_doi_class3;
                                                TBL_XWWL_KONGFU tbl_xwwl_kongfu3 = base.list_5[0];
                                                double num19 = tbl_xwwl_npc.FLD_DF;
                                                double num20 = base.FLD_BasicCharAttack;
                                                long num1 = base.FLD_BasicCharDefense;
                                                if (((base.Player_Job == 1) || (base.Player_Job == 8)) && ((base.Pha_giap_ty_le != 0.0) && (random.Next(0, 0x65) < base.Pha_giap_ty_le)))
                                                {
                                                      num19 *= 0.3;
                                                      base.Show_Char(PeopleID, 0x10);
                                                }
                                                if (base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].ItemPropertyType == 1)
                                                {
                                                      num19 -= num19 * (base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].ItemPropertyNumber * 0.01);
                                                }
                                                if (base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[0].ItemPropertyType == 1)
                                                {
                                                      num20 -= num20 * (base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[0].ItemPropertyNumber * 0.01);
                                                }
                                                if (base.Player_Job == 2)
                                                {
                                                      double num21 = random.NextDouble() * 100.0;
                                                      double num22 = random.Next(0, 120);
                                                      if ((base.Kiem_khach_Vo_kien_bat_toi != 0.0) && (num21 < base.Kiem_khach_Vo_kien_bat_toi))
                                                      {
                                                            base.Show_Char(PeopleID, 120);
                                                            num19 *= 0.5;
                                                      }
                                                      if ((base.Kiem_khach_thang_thien_1_khi_cong_Thua_thang_truy_kich != 0.0) && (num22 < base.Kiem_khach_thang_thien_1_khi_cong_Thua_thang_truy_kich))
                                                      {
                                                            base.Show_Char(PeopleID, 120);
                                                            num19 -= (num19 * base.Kiem_khach_thang_thien_1_khi_cong_Thua_thang_truy_kich) * 0.01;
                                                      }
                                                }
                                                if (((base.Player_Job == 1) || (base.Player_Job == 8)) && (base.Toi_thieu_cong_kich != 0.0))
                                                {
                                                      num20 = base.FLD_BasicCharAttack + (base.FLD_BasicCharAttack * base.Toi_thieu_cong_kich);
                                                }
                                                if (((base.Player_Job == 2) || (base.Player_Job == 9)) && (base.Toi_thieu_cong_kich != 0.0))
                                                {
                                                      num20 += num20 * base.Toi_thieu_cong_kich;
                                                }
                                                if ((base.Player_Job == 3) && (base.Toi_thieu_cong_kich != 0.0))
                                                {
                                                      num20 += num20 * base.Toi_thieu_cong_kich;
                                                }
                                                if ((base.Player_Job == 4) && (base.Cung_thu_Ngung_than_tu_khi != 0.0))
                                                {
                                                      num20 += num20 * base.Cung_thu_Ngung_than_tu_khi;
                                                }
                                                if ((base.Player_Job == 5) && (base.Toi_thieu_cong_kich != 0.0))
                                                {
                                                      num20 += num20 * base.Toi_thieu_cong_kich;
                                                }
                                                if ((base.Player_Job == 6) && (base.Toi_thieu_cong_kich != 0.0))
                                                {
                                                      num20 += num20 * base.Toi_thieu_cong_kich;
                                                }
                                                if (((base.Dao_khach_thang_thien_1_khi_cong_Don_xuat_nghich_canh != 0.0) && (tbl_xwwl_kongfu2.FLD_VO_CONG_LOAI_HINH == 3)) && ((base.class79_0[3, tbl_xwwl_kongfu2.FLD_INDEX].VO_CONG_THU_BAC >= 5) && (random.Next(0, 120) < base.Dao_khach_thang_thien_1_khi_cong_Don_xuat_nghich_canh)))
                                                {
                                                      base.Show_Char(PeopleID, 310);
                                                      if (base.Add_Status_List.ContainsKey(0xaaf96))
                                                      {
                                                            base.Add_Status_List[0xaaf96].THOI_GIAN_KET_THUC_SU_KIEN();
                                                      }
                                                      Additional_Sate_Class class5 = new Additional_Sate_Class(this, 0x2af8, 0xaaf96, 1);
                                                      base.Add_Status_List.Add(class5.FLD_PID, class5);
                                                      base.FLD_nhan_vat_vo_cong_luc_cong_kich_tang_cuong_ti_le_phan_tram += 0.3;
                                                      base.addFLD_DEF_Percentage(0.1M);
                                                      this.Status_Effect(BitConverter.GetBytes(0xaaf96), 1, 0x2af8);
                                                      base.UpdatePowersAndStatus();
                                                }
                                                if (base.Player_Job == 7)
                                                {
                                                      if (base.Toi_thieu_cong_kich != 0.0)
                                                      {
                                                            num20 += num20 * base.Toi_thieu_cong_kich;
                                                      }
                                                      if ((!base.Add_Status_List.ContainsKey(0xdbd31) && !base.Add_Status_List.ContainsKey(0xdbd32)) && !base.Add_Status_List.ContainsKey(0xdbd33))
                                                      {
                                                            int num23 = 0;
                                                            int num24 = random.Next(0, 100);
                                                            if (random.Next(0, 0x6f) <= (base.Cam_su_Nhat_am_xuat_kich * 100.0))
                                                            {
                                                                  base.Show_Char(PeopleID, 0x57);
                                                                  if (num24 <= 0x21)
                                                                  {
                                                                        num23 = 0xdbd31;
                                                                  }
                                                                  else if ((num24 >= 0x21) && (num24 <= 0x42))
                                                                  {
                                                                        num23 = 0xdbd32;
                                                                  }
                                                                  else
                                                                  {
                                                                        num23 = 0xdbd33;
                                                                  }
                                                                  Additional_Sate_Class class6 = new Additional_Sate_Class(this, 0xea60, num23, 0);
                                                                  base.Add_Status_List.Add(num23, class6);
                                                                  this.Status_Effect(BitConverter.GetBytes(num23), 1, 0xea60);
                                                                  base.Update_Figure_Data(this);
                                                            }
                                                      }
                                                      if (base.Add_Status_List.ContainsKey(0xdbd31))
                                                      {
                                                            int num25 = random.Next(0, 11);
                                                            int num26 = random.Next(0, 0x65);
                                                            int num27 = random.Next(0, 0x65);
                                                            int num28 = random.Next(0, 0x65);
                                                            base.Cam_su_Tam_hoa_huyen_phat_dong_xac_suat = (base.Cam_su_Cam_thanh_qua_nguyet * 0.005) * 100.0;
                                                            if (random.Next(0, 0x65) <= (((int)(base.Cam_su_Loan_phuong_hoa_minh * 100.0)) + ((int)(base.Cam_su_thang_thien_1_khi_cong_Phi_hoa_diem_thuy * 0.2))))
                                                            {
                                                                  base.Cam_su_Tam_hoa_huyen_phat_dong_xac_suat *= 2.0;
                                                            }
                                                            if (num26 <= base.Cam_su_Tam_hoa_huyen_phat_dong_xac_suat)
                                                            {
                                                                  if ((num27 <= base.Cam_su_Sat_am_cam_khuc) && !tbl_xwwl_npc.threadSafeDictionary_1.ContainsKey(11))
                                                                  {
                                                                        double num29 = 10000.0;
                                                                        num29 += base.Cam_su_Sat_am_cam_khuc * 1000.0;
                                                                        DI_THUONG_TRANG_THAI_NEW di_thuong_trang_thai_new = new DI_THUONG_TRANG_THAI_NEW(tbl_xwwl_npc, base.UserSessionID, (int)num29, 11, 0);
                                                                        tbl_xwwl_npc.threadSafeDictionary_1.Add(11, di_thuong_trang_thai_new);
                                                                  }
                                                                  if ((num28 <= base.Cam_su_Sat_menh_cam_thanh) && !tbl_xwwl_npc.threadSafeDictionary_1.ContainsKey(9))
                                                                  {
                                                                        double num30 = 10000.0;
                                                                        num30 += base.Cam_su_Sat_menh_cam_thanh * 1000.0;
                                                                        DI_THUONG_TRANG_THAI_NEW di_thuong_trang_thai_new2 = new DI_THUONG_TRANG_THAI_NEW(tbl_xwwl_npc, base.UserSessionID, (int)num30, 9, 0);
                                                                        tbl_xwwl_npc.threadSafeDictionary_1.Add(9, di_thuong_trang_thai_new2);
                                                                        tbl_xwwl_npc.FLD_DF *= 0.92999999999999994;
                                                                  }
                                                                  if ((num25 == 10) && !tbl_xwwl_npc.threadSafeDictionary_1.ContainsKey(10))
                                                                  {
                                                                        DI_THUONG_TRANG_THAI_NEW di_thuong_trang_thai_new3 = new DI_THUONG_TRANG_THAI_NEW(tbl_xwwl_npc, base.UserSessionID, 0x2710, 10, (int)num5);
                                                                        di_thuong_trang_thai_new3.method_0(num5);
                                                                        tbl_xwwl_npc.threadSafeDictionary_1.Add(10, di_thuong_trang_thai_new3);
                                                                  }
                                                                  if (!tbl_xwwl_npc.threadSafeDictionary_1.ContainsKey(9) && !tbl_xwwl_npc.threadSafeDictionary_1.ContainsKey(11))
                                                                  {
                                                                        if (num26 <= 50)
                                                                        {
                                                                              double num31 = 10000.0;
                                                                              num31 += base.Cam_su_Sat_am_cam_khuc * 1000.0;
                                                                              DI_THUONG_TRANG_THAI_NEW di_thuong_trang_thai_new4 = new DI_THUONG_TRANG_THAI_NEW(tbl_xwwl_npc, base.UserSessionID, (int)num31, 11, 0);
                                                                              tbl_xwwl_npc.threadSafeDictionary_1.Add(11, di_thuong_trang_thai_new4);
                                                                        }
                                                                        else
                                                                        {
                                                                              double num32 = 10000.0;
                                                                              num32 += base.Cam_su_Sat_menh_cam_thanh * 1000.0;
                                                                              DI_THUONG_TRANG_THAI_NEW di_thuong_trang_thai_new5 = new DI_THUONG_TRANG_THAI_NEW(tbl_xwwl_npc, base.UserSessionID, (int)num32, 9, 0);
                                                                              tbl_xwwl_npc.threadSafeDictionary_1.Add(9, di_thuong_trang_thai_new5);
                                                                              tbl_xwwl_npc.FLD_DF *= 0.92999999999999994;
                                                                        }
                                                                  }
                                                            }
                                                      }
                                                      num6 = base.Cam_su_Cam_thanh_qua_nguyet * 0.0086;
                                                      if (base.Add_Status_List.ContainsKey(0xdbd32) && (random.Next(0, 0x79) <= (((int)(base.Cam_su_Loan_phuong_hoa_minh * 100.0)) + ((int)(base.Cam_su_thang_thien_1_khi_cong_Phi_hoa_diem_thuy * 0.2)))))
                                                      {
                                                            num6 *= 2.0 + (base.Cam_su_thang_thien_1_khi_cong_Phi_hoa_diem_thuy * 0.02);
                                                      }
                                                }
                                                if (tbl_xwwl_kongfu2.FLD_VO_CONG_LOAI_HINH == 3)
                                                {
                                                      int num33 = 0;
                                                      num33 = tbl_xwwl_kongfu2.FLD_AT + (((base.class79_0[3, tbl_xwwl_kongfu2.FLD_INDEX].VO_CONG_THU_BAC - 1) * base.class79_0[3, tbl_xwwl_kongfu2.FLD_INDEX].FLD_MOI_CAP_THEM_NGUY_HAI) / 4);
                                                      num5 = ((((num20 - (num19 * 0.7)) + base.FLD_NHAN_VAT_CO_BAN_TRUNG_MUC_TIEU) * 1.5) + (num33 * ((1.0 + base.FLD_trang_bi_luc_cong_kich_vo_cong_tang_cuong_ti_le_phan_tram) + (base.FLD_nhan_vat_vo_cong_luc_cong_kich_tang_cuong_ti_le_phan_tram * (1.0 + base.FLD_NHAN_VAT_KHI_CONG_LUC_CONG_KICH_VO_CONG_TANG_CUONG_TI_LE_PHAN_TRAM))))) + (base.FLD_NHAN_VAT_CO_BAN_TRUNG_MUC_TIEU / 4);
                                                }
                                                else if (tbl_xwwl_kongfu2.FLD_VO_CONG_LOAI_HINH == 2)
                                                {
                                                      num5 = ((((num20 - (num19 * 0.7)) + base.FLD_NHAN_VAT_CO_BAN_TRUNG_MUC_TIEU) * 1.5) + (base.Phu_the_vo_cong_luc_cong_kich * ((1.0 + base.FLD_trang_bi_luc_cong_kich_vo_cong_tang_cuong_ti_le_phan_tram) + (base.FLD_nhan_vat_vo_cong_luc_cong_kich_tang_cuong_ti_le_phan_tram * (1.0 + base.FLD_NHAN_VAT_KHI_CONG_LUC_CONG_KICH_VO_CONG_TANG_CUONG_TI_LE_PHAN_TRAM))))) + (base.FLD_NHAN_VAT_CO_BAN_TRUNG_MUC_TIEU / 4);
                                                }
                                                else if ((tbl_xwwl_kongfu2.FLD_VO_CONG_LOAI_HINH == 0) && (base.class79_0[0, tbl_xwwl_kongfu2.FLD_INDEX].VO_CONG_THU_BAC != 0))
                                                {
                                                      int num34 = 0;
                                                      num34 = tbl_xwwl_kongfu2.FLD_AT + (((base.class79_0[0, tbl_xwwl_kongfu2.FLD_INDEX].VO_CONG_THU_BAC - 1) * base.class79_0[0, tbl_xwwl_kongfu2.FLD_INDEX].FLD_MOI_CAP_THEM_NGUY_HAI) / 4);
                                                      num5 = ((((num20 - (num19 * 0.7)) + base.FLD_NHAN_VAT_CO_BAN_TRUNG_MUC_TIEU) * 1.5) + (num34 * ((1.0 + base.FLD_trang_bi_luc_cong_kich_vo_cong_tang_cuong_ti_le_phan_tram) + (base.FLD_nhan_vat_vo_cong_luc_cong_kich_tang_cuong_ti_le_phan_tram * (1.0 + base.FLD_NHAN_VAT_KHI_CONG_LUC_CONG_KICH_VO_CONG_TANG_CUONG_TI_LE_PHAN_TRAM))))) + (base.FLD_NHAN_VAT_CO_BAN_TRUNG_MUC_TIEU / 4);
                                                }
                                                else
                                                {
                                                      num5 = ((((num20 - (num19 * 0.7)) + base.FLD_NHAN_VAT_CO_BAN_TRUNG_MUC_TIEU) * 1.5) + (tbl_xwwl_kongfu2.FLD_AT * ((1.0 + base.FLD_trang_bi_luc_cong_kich_vo_cong_tang_cuong_ti_le_phan_tram) + (base.FLD_nhan_vat_vo_cong_luc_cong_kich_tang_cuong_ti_le_phan_tram * (1.0 + base.FLD_NHAN_VAT_KHI_CONG_LUC_CONG_KICH_VO_CONG_TANG_CUONG_TI_LE_PHAN_TRAM))))) + (base.FLD_NHAN_VAT_CO_BAN_TRUNG_MUC_TIEU / 4);
                                                }
                                                if (base.Quai_vat_vo_cong_them_vao != 0.0)
                                                {
                                                      num5 += num5 * base.Quai_vat_vo_cong_them_vao;
                                                }
                                                if ((base.Huyen_ti_chan_mach != 0.0) && (random.Next(0, 100) <= base.Huyen_ti_chan_mach))
                                                {
                                                      base.Show_Char(PeopleID, 0x18a);
                                                      if (base.Add_Status_List.ContainsKey(0xdc17d))
                                                      {
                                                            base.Add_Status_List[0xdc17d].THOI_GIAN_KET_THUC_SU_KIEN();
                                                      }
                                                      double num35 = 3000.0;
                                                      Additional_Sate_Class class7 = new Additional_Sate_Class(this, (int)num35, 0xdc17d, 0);
                                                      base.Add_Status_List.Add(0xdc17d, class7);
                                                      this.Status_Effect(BitConverter.GetBytes(0xdc17d), 1, (int)num35);
                                                      base.addFLD_DEF_Percentage(0.1M);
                                                      base.UpdatePowersAndStatus();
                                                }
                                                if ((base.Vong_mai_thiem_tan != 0.0) && (random.Next(0, 100) <= base.Vong_mai_thiem_tan))
                                                {
                                                      base.Show_Char(PeopleID, 0x162);
                                                      if (base.Add_Status_List.ContainsKey(0x7a7c5))
                                                      {
                                                            base.Add_Status_List[0x7a7c5].THOI_GIAN_KET_THUC_SU_KIEN();
                                                      }
                                                      double num36 = 3000.0;
                                                      Additional_Sate_Class class8 = new Additional_Sate_Class(this, (int)num36, 0x7a7c5, 0);
                                                      base.Add_Status_List.Add(0x7a7c5, class8);
                                                      this.Status_Effect(BitConverter.GetBytes(0x7a7c5), 1, (int)num36);
                                                      base.Nhan_vat_them_vao_lon_nhat_HP += 0x3e8;
                                                      this.UpdateHP_MP_SP();
                                                }
                                                if ((base.Liet_nhat_viem_viem != 0.0) && (random.Next(0, 100) <= base.Liet_nhat_viem_viem))
                                                {
                                                      base.Show_Char(PeopleID, 0x158);
                                                }
                                                if (((base.Man_nguyet_cuong_phong != 0.0) && (random.Next(0, 100) <= base.Man_nguyet_cuong_phong)) && (World.W_TO_DOI.TryGetValue(base.TO_DOI_ID, out to_doi_class3) && World.W_TO_DOI.TryGetValue(base.TO_DOI_ID, out to_doi_class3)))
                                                {
                                                      foreach (Players players2 in to_doi_class3.dictionary_0.Values)
                                                      {
                                                            if (this.TRA_TIM_PHAM_VI_NGUOI_CHOI(300, players2))
                                                            {
                                                                  if (players2.Add_Status_List.ContainsKey(0xaae6e))
                                                                  {
                                                                        return;
                                                                  }
                                                                  players2.Show_Char(players2.UserSessionID, 0x162);
                                                                  Additional_Sate_Class class9 = new Additional_Sate_Class(players2, 0xbb8, 0xaae6e, 0);
                                                                  players2.Add_Status_List.Add(0xaae6e, class9);
                                                                  if (players2.Player_Job == 3)
                                                                  {
                                                                        players2.addFLD_ATT_Percentage(0.29M);
                                                                        players2.addFLD_DEF_Percentage(0.29M);
                                                                  }
                                                                  else
                                                                  {
                                                                        players2.addFLD_ATT_Percentage(0.25M);
                                                                        players2.addFLD_DEF_Percentage(0.25M);
                                                                  }
                                                                  players2.Status_Effect(BitConverter.GetBytes(0xaae6e), 1, 0xbb8);
                                                                  players2.UpdatePowersAndStatus();
                                                            }
                                                      }
                                                }
                                                if ((base.Thang_thien_4_khi_cong_Hong_nguyet_cuong_phong != 0.0) && (random.Next(0, 120) <= base.Thang_thien_4_khi_cong_Hong_nguyet_cuong_phong))
                                                {
                                                      foreach (Players players3 in World.allConnectedChars.Values)
                                                      {
                                                            if ((this.TRA_TIM_PHAM_VI_NGUOI_CHOI(30, players3) && (players3.Player_Job == base.Player_Job)) && ((base.Player_Zx == players3.Player_Zx) && players3.Add_Status_List.ContainsKey(0xaae6e)))
                                                            {
                                                                  players3.Show_Char(players3.UserSessionID, 0x139);
                                                            }
                                                      }
                                                }
                                                if ((base.Player_Job == 1) || (base.Player_Job == 8))
                                                {
                                                      if (((base.Dao_khach_thang_thien_3_khi_cong_Pham_am_pha_kinh != 0.0) && (tbl_xwwl_kongfu2.FLD_VO_CONG_LOAI_HINH == 3)) && ((base.class79_0[3, tbl_xwwl_kongfu2.FLD_INDEX].VO_CONG_THU_BAC >= 5) && (random.Next(0, 120) < base.Dao_khach_thang_thien_3_khi_cong_Pham_am_pha_kinh)))
                                                      {
                                                            base.Show_Char(PeopleID, 0x138);
                                                            num5 *= 1.5 + base.Phan_am_pha_kinh_thuong_ton;
                                                      }
                                                      if ((base.Dao_khach_Am_anh_tuyet_sat != 0.0) && (random.Next(0, 0x8d) < base.Dao_khach_Am_anh_tuyet_sat))
                                                      {
                                                            base.Show_Char(PeopleID, 0x12);
                                                            num5 *= 1.0 + base.Toi_thieu_cong_kich;
                                                      }
                                                      if (((base.Han_bao_quan_Thien_ma_cuong_huyet != 0.0) && (random.Next(0, 0x83) < base.Han_bao_quan_Thien_ma_cuong_huyet)) && (tbl_xwwl_kongfu2.FLD_CDTIME > 0x3e8))
                                                      {
                                                            base.Show_Char(PeopleID, 0xfc);
                                                            num5 *= 1.4;
                                                      }
                                                      if (((base.Han_bao_quan_Thien_ma_cuong_huyet_2 != 0.0) && (random.Next(0, 0x8d) < base.Han_bao_quan_Thien_ma_cuong_huyet_2)) && (tbl_xwwl_kongfu2.FLD_CDTIME > 0x3e8))
                                                      {
                                                            base.Show_Char(PeopleID, 0x4f1c);
                                                            num5 *= 1.8;
                                                      }
                                                      if ((base.Han_bao_quan_Hanh_phong_long_vu != 0.0) && (random.Next(0, 0x8d) < base.Han_bao_quan_Hanh_phong_long_vu))
                                                      {
                                                            base.Show_Char(PeopleID, 600);
                                                            num5 *= 1.25;
                                                      }
                                                      if ((base.Dao_khach_thang_thien_2_khi_cong_Cung_duong_mat_lo != 0.0) && (random.Next(0, 120) <= base.Dao_khach_thang_thien_2_khi_cong_Cung_duong_mat_lo))
                                                      {
                                                            base.Show_Char(PeopleID, 0x137);
                                                            num5 *= 2.0;
                                                      }
                                                      if ((base.Vo_cong_chi_mang_ti_le != 0.0) && (random.Next(0, 0x97) < base.Vo_cong_chi_mang_ti_le))
                                                      {
                                                            base.Show_Char(PeopleID, 0x11);
                                                            num5 *= 1.2;
                                                      }
                                                }
                                                if (base.Player_Job == 2)
                                                {
                                                      num5 *= 1.0 + base.SAT_THUONG_VO_CONG_TANG;
                                                      double num37 = random.NextDouble() * 200.0;
                                                      if (((tbl_xwwl_kongfu2.FLD_VO_CONG_LOAI_HINH == 3) && (base.class79_0[3, tbl_xwwl_kongfu2.FLD_INDEX].VO_CONG_THU_BAC >= 5)) && (base.Kiem_khach_thang_thien_1_khi_cong_Thua_thang_truy_kich > num37))
                                                      {
                                                            num5 *= 1.4;
                                                            base.Show_Char(PeopleID, 0x141);
                                                      }
                                                }
                                                if (base.Player_Job == 3)
                                                {
                                                      num5 *= 1.0 + base.Thuong_khach_Can_khon_na_di;
                                                      if (base.Add_Status_List.ContainsKey(0xaae6e))
                                                      {
                                                            if (((base.Thuong_khach_thang_thien_3_khi_cong_No_y_chi_hong != 0.0) && (tbl_xwwl_kongfu2.FLD_VO_CONG_LOAI_HINH == 3)) && ((base.class79_0[3, tbl_xwwl_kongfu2.FLD_INDEX].VO_CONG_THU_BAC >= 5) && (random.Next(0, 0x79) < base.Thuong_khach_thang_thien_3_khi_cong_No_y_chi_hong)))
                                                            {
                                                                  num5 *= 1.5 + base.Tuc_gian_chi_hong_Them_vao_thuong_ton;
                                                                  base.Show_Char(PeopleID, 0x14c);
                                                            }
                                                            if (((base.Thuong_khach_thang_thien_2_khi_cong_Di_thoi_vi_tien != 0.0) && (tbl_xwwl_kongfu2.FLD_VO_CONG_LOAI_HINH == 3)) && ((base.class79_0[3, tbl_xwwl_kongfu2.FLD_INDEX].VO_CONG_THU_BAC >= 5) && (random.Next(0, 0x6f) < (base.Thuong_khach_thang_thien_1_khi_cong_Pha_giap_thu_hon + base.Thuong_khach_thang_thien_2_khi_cong_Di_thoi_vi_tien))))
                                                            {
                                                                  double num38 = 0.4 + (base.Thuong_khach_thang_thien_2_khi_cong_Di_thoi_vi_tien * 0.01);
                                                                  num5 += base.FLD_trang_bi_them_vao_phong_ngu * num38;
                                                                  base.Show_Char(PeopleID, 330);
                                                            }
                                                      }
                                                      if ((base.Thuong_khach_thang_thien_1_khi_cong_Pha_giap_thu_hon != 0.0) && (random.Next(0, 0x83) < base.Thuong_khach_thang_thien_1_khi_cong_Pha_giap_thu_hon))
                                                      {
                                                            num5 += base.FLD_trang_bi_them_vao_phong_ngu * 0.4;
                                                            base.Show_Char(PeopleID, 330);
                                                      }
                                                }
                                                if (base.Player_Job == 4)
                                                {
                                                      num5 += base.Cung_thu_Due_loi_chi_tien + 1.0;
                                                      if (((base.Cung_thu_thang_thien_3_khi_cong_Thien_ngoai_tam_thi != 0.0) && (base.Cung_thu_thang_thien_1_khi_cong_Tuyet_anh_xa_hon != 0.0)) && ((tbl_xwwl_kongfu2.FLD_VO_CONG_LOAI_HINH == 3) && (base.class79_0[3, tbl_xwwl_kongfu2.FLD_INDEX].VO_CONG_THU_BAC >= 5)))
                                                      {
                                                            int num39 = random.Next(0, 120);
                                                            if ((num39 < base.Cung_thu_thang_thien_3_khi_cong_Thien_ngoai_tam_thi) && (num39 < base.Cung_thu_thang_thien_1_khi_cong_Tuyet_anh_xa_hon))
                                                            {
                                                                  base.Show_Char(PeopleID, 340);
                                                                  base.Show_Char(PeopleID, 0x156);
                                                                  num5 *= 1.8;
                                                                  base.bool_8 = true;
                                                            }
                                                      }
                                                      if ((base.Cung_thu_Vo_minh_am_thi != 0.0) && (random.Next(0, 0x6f) < (base.Cung_thu_Vo_minh_am_thi + World.CUNG_THU_VO_MINH_AM_THI_TY_LE)))
                                                      {
                                                            num5 *= 1.05 + (base.Cung_thu_Vo_minh_am_thi * 0.01);
                                                            base.Show_Char(PeopleID, 0x31);
                                                            base.bool_8 = true;
                                                      }
                                                      if ((base.Cung_thu_Tri_menh_tuyet_sat != 0.0) && (random.Next(0, 0x8d) < (base.Cung_thu_Tri_menh_tuyet_sat + World.CUNG_THU_TRI_MENH_TUYET_SAT_TY_LE)))
                                                      {
                                                            base.Show_Char(PeopleID, 140);
                                                            num5 *= 1.5;
                                                            base.bool_9 = true;
                                                      }
                                                }
                                                if (base.Player_Job == 5)
                                                {
                                                      num5 *= 1.0 + base.Y_truong_cong_kich_luc;
                                                      if (((base.Y_thang_thien_3_khi_cong_Minh_kinh_chi_thuy != 0.0) && (tbl_xwwl_kongfu2.FLD_VO_CONG_LOAI_HINH == 3)) && ((base.class79_0[3, tbl_xwwl_kongfu2.FLD_INDEX].VO_CONG_THU_BAC >= 5) && (random.Next(0, 120) < base.Y_thang_thien_3_khi_cong_Minh_kinh_chi_thuy)))
                                                      {
                                                            base.Show_Char(PeopleID, 0x160);
                                                            num5 *= 2.0;
                                                      }
                                                      if ((base.Y_thang_thien_2_khi_cong_vo_trung_sinh_huu != 0.0) && (random.Next(0, 120) < base.Y_thang_thien_2_khi_cong_vo_trung_sinh_huu))
                                                      {
                                                            base.Show_Char(PeopleID, 0x15f);
                                                            num5 *= 1.3;
                                                      }
                                                      if ((base.Vo_cong_chi_mang_ti_le != 0.0) && (random.Next(0, 100) < base.Vo_cong_chi_mang_ti_le))
                                                      {
                                                            base.Show_Char(PeopleID, 0x11);
                                                            num5 *= 1.2;
                                                      }
                                                }
                                                if (base.Player_Job == 7)
                                                {
                                                      num5 *= 1.0 + base.SAT_THUONG_VO_CONG_TANG;
                                                      double num40 = random.NextDouble() * World.KHI_CONG_TI_LE_PHAN_TRAM;
                                                      if ((base.Cam_su_kich_luc_cong_thanh != 0.0) && (num40 <= base.Cam_su_kich_luc_cong_thanh))
                                                      {
                                                            num5 *= 2.0;
                                                            base.Show_Char(PeopleID, 0x58);
                                                      }
                                                }
                                                if ((((base.Player_Job == 6) && (base.Thich_khach_thang_thien_3_khi_cong_Di_no_hoan_no != 0.0)) && ((tbl_xwwl_kongfu2.FLD_VO_CONG_LOAI_HINH == 3) && (this.int_127 == 5))) && ((base.class79_0[3, tbl_xwwl_kongfu2.FLD_INDEX].VO_CONG_THU_BAC >= 5) && (random.Next(0, 120) < base.Thich_khach_thang_thien_3_khi_cong_Di_no_hoan_no)))
                                                {
                                                      base.Show_Char(PeopleID, 0x174);
                                                      num5 *= this.int_127;
                                                      this.int_127 = 0;
                                                      this.UpdateHP_MP_SP();
                                                }
                                                if (base.Player_Job == 7)
                                                {
                                                      num5 *= 1.0 + num6;
                                                }
                                                if (base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].ItemPropertyType == 5)
                                                {
                                                      num5 += base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].ItemPropertyNumber * 3;
                                                }
                                                if (World.Version_switch != 0)
                                                {
                                                      num5 = random.Next(((int)num5) - 15, ((int)num5) + 15);
                                                }
                                                if (base.Thanh_vien_thu_bac != 0)
                                                {
                                                      num5 = 10000000000;
                                                }
                                                if (num5 <= 0.0)
                                                {
                                                      num5 = 1.0;
                                                }
                                                this.CONG_KICH_TINH_TOAN_HOAN_THANH2(this, PeopleID, tbl_xwwl_kongfu3.FLD_PID, (long)num5, 0, tbl_xwwl_npc.Rxjh_HP);
                                                base.int_1++;
                                          }
                                          if (base.Add_Status_List.ContainsKey(0x3b9acccd))
                                          {
                                                base.Add_Status_List[0x3b9acccd].THOI_GIAN_KET_THUC_SU_KIEN();
                                          }
                                          else if (base.Add_Status_List.ContainsKey(0x3b9accce))
                                          {
                                                base.Add_Status_List[0x3b9accce].THOI_GIAN_KET_THUC_SU_KIEN();
                                          }
                                          else if (base.Add_Status_List.ContainsKey(0x3b9acccf))
                                          {
                                                base.Add_Status_List[0x3b9acccf].THOI_GIAN_KET_THUC_SU_KIEN();
                                          }
                                          else if (base.Add_Status_List.ContainsKey(0x3b9accd0))
                                          {
                                                base.Add_Status_List[0x3b9accd0].THOI_GIAN_KET_THUC_SU_KIEN();
                                          }
                                          else if (base.Add_Status_List.ContainsKey(0x3b9acdbf))
                                          {
                                                base.Add_Status_List[0x3b9acdbf].THOI_GIAN_KET_THUC_SU_KIEN();
                                          }
                                          else if (base.Add_Status_List.ContainsKey(0x3b9acdc0))
                                          {
                                                base.Add_Status_List[0x3b9acdc0].THOI_GIAN_KET_THUC_SU_KIEN();
                                          }
                                          else if (base.Add_Status_List.ContainsKey(0x3b9acdc1))
                                          {
                                                base.Add_Status_List[0x3b9acdc1].THOI_GIAN_KET_THUC_SU_KIEN();
                                          }
                                          return;
                                    }
                                    if (base.int_1 > 0)
                                    {
                                          if (base.int_1 < base.list_5.Count)
                                          {
                                                TO_DOI_CLASS to_doi_class4;
                                                TBL_XWWL_KONGFU tbl_xwwl_kongfu4 = base.list_5[base.int_1];
                                                double num41 = tbl_xwwl_npc.FLD_DF;
                                                double num42 = base.FLD_BasicCharAttack;
                                                long num137 = base.FLD_BasicCharDefense;
                                                if (((base.Player_Job == 1) || (base.Player_Job == 8)) && ((base.Pha_giap_ty_le != 0.0) && (random.Next(0, 0x65) < base.Pha_giap_ty_le)))
                                                {
                                                      num41 *= 0.3;
                                                      base.Show_Char(PeopleID, 0x10);
                                                }
                                                if (((base.Player_Job == 1) || (base.Player_Job == 8)) && (base.Toi_thieu_cong_kich != 0.0))
                                                {
                                                      num42 += num42 * base.Toi_thieu_cong_kich;
                                                }
                                                if (((base.Player_Job == 2) || (base.Player_Job == 9)) && (base.Toi_thieu_cong_kich != 0.0))
                                                {
                                                      num42 += num42 * base.Toi_thieu_cong_kich;
                                                }
                                                if ((base.Player_Job == 3) && (base.Toi_thieu_cong_kich != 0.0))
                                                {
                                                      num42 += num42 * base.Toi_thieu_cong_kich;
                                                }
                                                if ((base.Player_Job == 4) && (base.Cung_thu_Ngung_than_tu_khi != 0.0))
                                                {
                                                      num42 += num42 * base.Cung_thu_Ngung_than_tu_khi;
                                                }
                                                if ((base.Player_Job == 5) && (base.Toi_thieu_cong_kich != 0.0))
                                                {
                                                      num42 += num42 * base.Toi_thieu_cong_kich;
                                                }
                                                if ((base.Player_Job == 6) && (base.Toi_thieu_cong_kich != 0.0))
                                                {
                                                      num42 += num42 * base.Toi_thieu_cong_kich;
                                                }
                                                if (((base.Dao_khach_thang_thien_1_khi_cong_Don_xuat_nghich_canh != 0.0) && (tbl_xwwl_kongfu2.FLD_VO_CONG_LOAI_HINH == 3)) && ((base.class79_0[3, tbl_xwwl_kongfu2.FLD_INDEX].VO_CONG_THU_BAC >= 5) && (random.Next(0, 120) < base.Dao_khach_thang_thien_1_khi_cong_Don_xuat_nghich_canh)))
                                                {
                                                      base.Show_Char(PeopleID, 310);
                                                      if (base.Add_Status_List.ContainsKey(0xaaf96))
                                                      {
                                                            base.Add_Status_List[0xaaf96].THOI_GIAN_KET_THUC_SU_KIEN();
                                                      }
                                                      Additional_Sate_Class class10 = new Additional_Sate_Class(this, 0x2af8, 0xaaf96, 1);
                                                      base.Add_Status_List.Add(class10.FLD_PID, class10);
                                                      base.FLD_nhan_vat_vo_cong_luc_cong_kich_tang_cuong_ti_le_phan_tram += 0.3;
                                                      base.addFLD_DEF_Percentage(0.1M);
                                                      this.Status_Effect(BitConverter.GetBytes(0xaaf96), 1, 0x2af8);
                                                      base.UpdatePowersAndStatus();
                                                }
                                                if (base.Player_Job == 7)
                                                {
                                                      if (base.Toi_thieu_cong_kich != 0.0)
                                                      {
                                                            num42 += num42 * base.Toi_thieu_cong_kich;
                                                      }
                                                      if ((!base.Add_Status_List.ContainsKey(0xdbd31) && !base.Add_Status_List.ContainsKey(0xdbd32)) && !base.Add_Status_List.ContainsKey(0xdbd33))
                                                      {
                                                            int num43 = 0;
                                                            int num44 = random.Next(0, 100);
                                                            if (random.Next(0, 0x6f) <= (base.Cam_su_Nhat_am_xuat_kich * 100.0))
                                                            {
                                                                  base.Show_Char(PeopleID, 0x57);
                                                                  if (num44 <= 0x21)
                                                                  {
                                                                        num43 = 0xdbd31;
                                                                  }
                                                                  else if ((num44 >= 0x21) && (num44 <= 0x42))
                                                                  {
                                                                        num43 = 0xdbd32;
                                                                  }
                                                                  else
                                                                  {
                                                                        num43 = 0xdbd33;
                                                                  }
                                                                  Additional_Sate_Class class11 = new Additional_Sate_Class(this, 0xea60, num43, 0);
                                                                  base.Add_Status_List.Add(num43, class11);
                                                                  this.Status_Effect(BitConverter.GetBytes(num43), 1, 0xea60);
                                                                  base.Update_Figure_Data(this);
                                                            }
                                                      }
                                                      if (base.Add_Status_List.ContainsKey(0xdbd31))
                                                      {
                                                            int num45 = random.Next(0, 11);
                                                            int num46 = random.Next(0, 0x65);
                                                            int num47 = random.Next(0, 0x65);
                                                            int num48 = random.Next(0, 0x65);
                                                            base.Cam_su_Tam_hoa_huyen_phat_dong_xac_suat = (base.Cam_su_Cam_thanh_qua_nguyet * 0.005) * 100.0;
                                                            if (random.Next(0, 0x65) <= (((int)(base.Cam_su_Loan_phuong_hoa_minh * 100.0)) + ((int)(base.Cam_su_thang_thien_1_khi_cong_Phi_hoa_diem_thuy * 0.2))))
                                                            {
                                                                  base.Cam_su_Tam_hoa_huyen_phat_dong_xac_suat *= 2.0;
                                                            }
                                                            if (num46 <= base.Cam_su_Tam_hoa_huyen_phat_dong_xac_suat)
                                                            {
                                                                  if ((num47 <= base.Cam_su_Sat_am_cam_khuc) && !tbl_xwwl_npc.threadSafeDictionary_1.ContainsKey(11))
                                                                  {
                                                                        double num49 = 10000.0;
                                                                        num49 += base.Cam_su_Sat_am_cam_khuc * 1000.0;
                                                                        DI_THUONG_TRANG_THAI_NEW di_thuong_trang_thai_new6 = new DI_THUONG_TRANG_THAI_NEW(tbl_xwwl_npc, base.UserSessionID, (int)num49, 11, 0);
                                                                        tbl_xwwl_npc.threadSafeDictionary_1.Add(11, di_thuong_trang_thai_new6);
                                                                  }
                                                                  if ((num48 <= base.Cam_su_Sat_menh_cam_thanh) && !tbl_xwwl_npc.threadSafeDictionary_1.ContainsKey(9))
                                                                  {
                                                                        double num50 = 10000.0;
                                                                        num50 += base.Cam_su_Sat_menh_cam_thanh * 1000.0;
                                                                        DI_THUONG_TRANG_THAI_NEW di_thuong_trang_thai_new7 = new DI_THUONG_TRANG_THAI_NEW(tbl_xwwl_npc, base.UserSessionID, (int)num50, 9, 0);
                                                                        tbl_xwwl_npc.threadSafeDictionary_1.Add(9, di_thuong_trang_thai_new7);
                                                                        tbl_xwwl_npc.FLD_DF *= 0.7;
                                                                  }
                                                                  if ((num45 == 10) && !tbl_xwwl_npc.threadSafeDictionary_1.ContainsKey(10))
                                                                  {
                                                                        DI_THUONG_TRANG_THAI_NEW di_thuong_trang_thai_new8 = new DI_THUONG_TRANG_THAI_NEW(tbl_xwwl_npc, base.UserSessionID, 0x2710, 10, (int)num5);
                                                                        di_thuong_trang_thai_new8.method_0(num5);
                                                                        tbl_xwwl_npc.threadSafeDictionary_1.Add(10, di_thuong_trang_thai_new8);
                                                                  }
                                                                  if (!tbl_xwwl_npc.threadSafeDictionary_1.ContainsKey(9) && !tbl_xwwl_npc.threadSafeDictionary_1.ContainsKey(11))
                                                                  {
                                                                        if (num46 <= 50)
                                                                        {
                                                                              double num51 = 10000.0;
                                                                              num51 += base.Cam_su_Sat_am_cam_khuc * 1000.0;
                                                                              DI_THUONG_TRANG_THAI_NEW di_thuong_trang_thai_new9 = new DI_THUONG_TRANG_THAI_NEW(tbl_xwwl_npc, base.UserSessionID, (int)num51, 11, 0);
                                                                              tbl_xwwl_npc.threadSafeDictionary_1.Add(11, di_thuong_trang_thai_new9);
                                                                        }
                                                                        else
                                                                        {
                                                                              double num52 = 10000.0;
                                                                              num52 += base.Cam_su_Sat_menh_cam_thanh * 1000.0;
                                                                              DI_THUONG_TRANG_THAI_NEW di_thuong_trang_thai_new10 = new DI_THUONG_TRANG_THAI_NEW(tbl_xwwl_npc, base.UserSessionID, (int)num52, 9, 0);
                                                                              tbl_xwwl_npc.threadSafeDictionary_1.Add(9, di_thuong_trang_thai_new10);
                                                                              tbl_xwwl_npc.FLD_DF *= 0.7;
                                                                        }
                                                                  }
                                                            }
                                                      }
                                                      num6 = base.Cam_su_Cam_thanh_qua_nguyet * 0.0086;
                                                      if (base.Add_Status_List.ContainsKey(0xdbd32) && (random.Next(0, 0x79) <= (((int)(base.Cam_su_Loan_phuong_hoa_minh * 100.0)) + ((int)(base.Cam_su_thang_thien_1_khi_cong_Phi_hoa_diem_thuy * 0.2)))))
                                                      {
                                                            num6 *= 2.0 + (base.Cam_su_thang_thien_1_khi_cong_Phi_hoa_diem_thuy * 0.02);
                                                      }
                                                }
                                                if (tbl_xwwl_kongfu2.FLD_VO_CONG_LOAI_HINH == 3)
                                                {
                                                      int num53 = 0;
                                                      num53 = tbl_xwwl_kongfu2.FLD_AT + (((base.class79_0[3, tbl_xwwl_kongfu2.FLD_INDEX].VO_CONG_THU_BAC - 1) * base.class79_0[3, tbl_xwwl_kongfu2.FLD_INDEX].FLD_MOI_CAP_THEM_NGUY_HAI) / 4);
                                                      num5 = ((((num42 - (num41 * 0.7)) + base.FLD_NHAN_VAT_CO_BAN_TRUNG_MUC_TIEU) * 1.5) + (num53 * ((1.0 + base.FLD_trang_bi_luc_cong_kich_vo_cong_tang_cuong_ti_le_phan_tram) + (base.FLD_nhan_vat_vo_cong_luc_cong_kich_tang_cuong_ti_le_phan_tram * (1.0 + base.FLD_NHAN_VAT_KHI_CONG_LUC_CONG_KICH_VO_CONG_TANG_CUONG_TI_LE_PHAN_TRAM))))) + (base.FLD_NHAN_VAT_CO_BAN_TRUNG_MUC_TIEU / 4);
                                                }
                                                else if (tbl_xwwl_kongfu2.FLD_VO_CONG_LOAI_HINH == 2)
                                                {
                                                      num5 = ((((num42 - (num41 * 0.7)) + base.FLD_NHAN_VAT_CO_BAN_TRUNG_MUC_TIEU) * 1.5) + (base.Phu_the_vo_cong_luc_cong_kich * ((1.0 + base.FLD_trang_bi_luc_cong_kich_vo_cong_tang_cuong_ti_le_phan_tram) + (base.FLD_nhan_vat_vo_cong_luc_cong_kich_tang_cuong_ti_le_phan_tram * (1.0 + base.FLD_NHAN_VAT_KHI_CONG_LUC_CONG_KICH_VO_CONG_TANG_CUONG_TI_LE_PHAN_TRAM))))) + (base.FLD_NHAN_VAT_CO_BAN_TRUNG_MUC_TIEU / 4);
                                                }
                                                else if ((tbl_xwwl_kongfu2.FLD_VO_CONG_LOAI_HINH == 0) && (base.class79_0[0, tbl_xwwl_kongfu2.FLD_INDEX].VO_CONG_THU_BAC != 0))
                                                {
                                                      int num54 = 0;
                                                      num54 = tbl_xwwl_kongfu2.FLD_AT + (((base.class79_0[0, tbl_xwwl_kongfu2.FLD_INDEX].VO_CONG_THU_BAC - 1) * base.class79_0[0, tbl_xwwl_kongfu2.FLD_INDEX].FLD_MOI_CAP_THEM_NGUY_HAI) / 4);
                                                      num5 = ((((num42 - (num41 * 0.7)) + base.FLD_NHAN_VAT_CO_BAN_TRUNG_MUC_TIEU) * 1.5) + (num54 * ((1.0 + base.FLD_trang_bi_luc_cong_kich_vo_cong_tang_cuong_ti_le_phan_tram) + (base.FLD_nhan_vat_vo_cong_luc_cong_kich_tang_cuong_ti_le_phan_tram * (1.0 + base.FLD_NHAN_VAT_KHI_CONG_LUC_CONG_KICH_VO_CONG_TANG_CUONG_TI_LE_PHAN_TRAM))))) + (base.FLD_NHAN_VAT_CO_BAN_TRUNG_MUC_TIEU / 4);
                                                }
                                                else
                                                {
                                                      num5 = ((((num42 - (num41 * 0.7)) + base.FLD_NHAN_VAT_CO_BAN_TRUNG_MUC_TIEU) * 1.5) + (tbl_xwwl_kongfu2.FLD_AT * ((1.0 + base.FLD_trang_bi_luc_cong_kich_vo_cong_tang_cuong_ti_le_phan_tram) + (base.FLD_nhan_vat_vo_cong_luc_cong_kich_tang_cuong_ti_le_phan_tram * (1.0 + base.FLD_NHAN_VAT_KHI_CONG_LUC_CONG_KICH_VO_CONG_TANG_CUONG_TI_LE_PHAN_TRAM))))) + (base.FLD_NHAN_VAT_CO_BAN_TRUNG_MUC_TIEU / 4);
                                                }
                                                if (base.Quai_vat_vo_cong_them_vao != 0.0)
                                                {
                                                      num5 += num5 * base.Quai_vat_vo_cong_them_vao;
                                                }
                                                if ((base.Huyen_ti_chan_mach != 0.0) && (random.Next(0, 100) <= base.Huyen_ti_chan_mach))
                                                {
                                                      base.Show_Char(PeopleID, 0x18a);
                                                      if (base.Add_Status_List.ContainsKey(0xdc17d))
                                                      {
                                                            base.Add_Status_List[0xdc17d].THOI_GIAN_KET_THUC_SU_KIEN();
                                                      }
                                                      double num55 = 3000.0;
                                                      Additional_Sate_Class class12 = new Additional_Sate_Class(this, (int)num55, 0xdc17d, 0);
                                                      base.Add_Status_List.Add(0xdc17d, class12);
                                                      this.Status_Effect(BitConverter.GetBytes(0xdc17d), 1, (int)num55);
                                                      base.addFLD_DEF_Percentage(0.1M);
                                                      base.UpdatePowersAndStatus();
                                                }
                                                if ((base.Vong_mai_thiem_tan != 0.0) && (random.Next(0, 100) <= base.Vong_mai_thiem_tan))
                                                {
                                                      base.Show_Char(PeopleID, 0x162);
                                                      if (base.Add_Status_List.ContainsKey(0x7a7c5))
                                                      {
                                                            base.Add_Status_List[0x7a7c5].THOI_GIAN_KET_THUC_SU_KIEN();
                                                      }
                                                      double num56 = 3000.0;
                                                      Additional_Sate_Class class13 = new Additional_Sate_Class(this, (int)num56, 0x7a7c5, 0);
                                                      base.Add_Status_List.Add(int_128, class13);
                                                      this.Status_Effect(BitConverter.GetBytes(0x7a7c5), 1, (int)num56);
                                                      base.Nhan_vat_them_vao_lon_nhat_HP += 0x3e8;
                                                      this.UpdateHP_MP_SP();
                                                }
                                                if ((base.Liet_nhat_viem_viem != 0.0) && (random.Next(0, 100) <= base.Liet_nhat_viem_viem))
                                                {
                                                      base.Show_Char(PeopleID, 0x158);
                                                }
                                                if (((base.Man_nguyet_cuong_phong != 0.0) && (random.Next(0, 100) <= base.Man_nguyet_cuong_phong)) && World.W_TO_DOI.TryGetValue(base.TO_DOI_ID, out to_doi_class4))
                                                {
                                                      foreach (Players players4 in to_doi_class4.dictionary_0.Values)
                                                      {
                                                            if (this.TRA_TIM_PHAM_VI_NGUOI_CHOI(300, players4))
                                                            {
                                                                  if (players4.Add_Status_List.ContainsKey(0xaae6e))
                                                                  {
                                                                        return;
                                                                  }
                                                                  players4.Show_Char(players4.UserSessionID, 0x162);
                                                                  Additional_Sate_Class class14 = new Additional_Sate_Class(players4, 0xbb8, 0xaae6e, 0);
                                                                  players4.Add_Status_List.Add(0xaae6e, class14);
                                                                  if (players4.Player_Job == 3)
                                                                  {
                                                                        players4.addFLD_ATT_Percentage(0.29M);
                                                                        players4.addFLD_DEF_Percentage(0.29M);
                                                                  }
                                                                  else
                                                                  {
                                                                        players4.addFLD_ATT_Percentage(0.25M);
                                                                        players4.addFLD_DEF_Percentage(0.25M);
                                                                  }
                                                                  players4.Status_Effect(BitConverter.GetBytes(0xaae6e), 1, 0xbb8);
                                                                  players4.UpdatePowersAndStatus();
                                                            }
                                                      }
                                                }
                                                if ((base.Thang_thien_4_khi_cong_Hong_nguyet_cuong_phong != 0.0) && (random.Next(0, 120) <= base.Thang_thien_4_khi_cong_Hong_nguyet_cuong_phong))
                                                {
                                                      foreach (Players players5 in World.allConnectedChars.Values)
                                                      {
                                                            if ((this.TRA_TIM_PHAM_VI_NGUOI_CHOI(200, players5) && (players5.Player_Job == base.Player_Job)) && ((base.Player_Zx == players5.Player_Zx) && players5.Add_Status_List.ContainsKey(0xaae6e)))
                                                            {
                                                                  players5.Show_Char(PeopleID, 0x139);
                                                            }
                                                      }
                                                }
                                                if ((base.Player_Job == 1) || (base.Player_Job == 8))
                                                {
                                                      if (((base.Dao_khach_thang_thien_3_khi_cong_Pham_am_pha_kinh != 0.0) && (tbl_xwwl_kongfu2.FLD_VO_CONG_LOAI_HINH == 3)) && ((base.class79_0[3, tbl_xwwl_kongfu2.FLD_INDEX].VO_CONG_THU_BAC >= 5) && (random.Next(0, 120) < base.Dao_khach_thang_thien_3_khi_cong_Pham_am_pha_kinh)))
                                                      {
                                                            base.Show_Char(PeopleID, 0x138);
                                                            num5 *= 1.5 + base.Phan_am_pha_kinh_thuong_ton;
                                                      }
                                                      if ((base.Dao_khach_Am_anh_tuyet_sat != 0.0) && (random.Next(0, 0x8d) < base.Dao_khach_Am_anh_tuyet_sat))
                                                      {
                                                            base.Show_Char(PeopleID, 0x12);
                                                            num5 *= 1.0 + base.Toi_thieu_cong_kich;
                                                      }
                                                      if (((base.Han_bao_quan_Thien_ma_cuong_huyet != 0.0) && (random.Next(0, 0x83) < base.Han_bao_quan_Thien_ma_cuong_huyet)) && (tbl_xwwl_kongfu2.FLD_CDTIME > 0x3e8))
                                                      {
                                                            base.Show_Char(PeopleID, 0xfc);
                                                            num5 *= 1.4;
                                                      }
                                                      if (((base.Han_bao_quan_Thien_ma_cuong_huyet_2 != 0.0) && (random.Next(0, 0x8d) < base.Han_bao_quan_Thien_ma_cuong_huyet_2)) && (tbl_xwwl_kongfu2.FLD_CDTIME > 0x3e8))
                                                      {
                                                            base.Show_Char(PeopleID, 0x4f1c);
                                                            num5 *= 1.8;
                                                      }
                                                      if ((base.Han_bao_quan_Hanh_phong_long_vu != 0.0) && (random.Next(0, 0x8d) < base.Han_bao_quan_Hanh_phong_long_vu))
                                                      {
                                                            base.Show_Char(PeopleID, 600);
                                                            num5 *= 1.25;
                                                      }
                                                      if ((base.Dao_khach_thang_thien_2_khi_cong_Cung_duong_mat_lo != 0.0) && (random.Next(0, 120) <= base.Dao_khach_thang_thien_2_khi_cong_Cung_duong_mat_lo))
                                                      {
                                                            base.Show_Char(PeopleID, 0x137);
                                                            num5 *= 2.0;
                                                      }
                                                      if ((base.Vo_cong_chi_mang_ti_le != 0.0) && (random.Next(0, 0x97) < base.Vo_cong_chi_mang_ti_le))
                                                      {
                                                            base.Show_Char(PeopleID, 0x11);
                                                            num5 *= 1.2;
                                                      }
                                                }
                                                if (base.Player_Job == 2)
                                                {
                                                      num5 *= 1.0 + base.SAT_THUONG_VO_CONG_TANG;
                                                      double num57 = random.NextDouble() * 200.0;
                                                      if (((tbl_xwwl_kongfu2.FLD_VO_CONG_LOAI_HINH == 3) && (base.class79_0[3, tbl_xwwl_kongfu2.FLD_INDEX].VO_CONG_THU_BAC >= 5)) && (base.Kiem_khach_thang_thien_1_khi_cong_Thua_thang_truy_kich > num57))
                                                      {
                                                            num5 *= 1.4;
                                                            base.Show_Char(PeopleID, 0x141);
                                                      }
                                                }
                                                if (base.Player_Job == 3)
                                                {
                                                      num5 *= 1.0 + base.Thuong_khach_Can_khon_na_di;
                                                      if (base.Add_Status_List.ContainsKey(0xaae6e))
                                                      {
                                                            if (((base.Thuong_khach_thang_thien_3_khi_cong_No_y_chi_hong != 0.0) && (tbl_xwwl_kongfu2.FLD_VO_CONG_LOAI_HINH == 3)) && ((base.class79_0[3, tbl_xwwl_kongfu2.FLD_INDEX].VO_CONG_THU_BAC >= 5) && (random.Next(0, 0x79) < base.Thuong_khach_thang_thien_3_khi_cong_No_y_chi_hong)))
                                                            {
                                                                  num5 *= 1.5 + base.Tuc_gian_chi_hong_Them_vao_thuong_ton;
                                                                  base.Show_Char(PeopleID, 0x14c);
                                                            }
                                                            if (((base.Thuong_khach_thang_thien_2_khi_cong_Di_thoi_vi_tien != 0.0) && (tbl_xwwl_kongfu2.FLD_VO_CONG_LOAI_HINH == 3)) && ((base.class79_0[3, tbl_xwwl_kongfu2.FLD_INDEX].VO_CONG_THU_BAC >= 5) && (random.Next(0, 0x6f) < (base.Thuong_khach_thang_thien_1_khi_cong_Pha_giap_thu_hon + base.Thuong_khach_thang_thien_2_khi_cong_Di_thoi_vi_tien))))
                                                            {
                                                                  double num58 = 0.4 + (base.Thuong_khach_thang_thien_2_khi_cong_Di_thoi_vi_tien * 0.01);
                                                                  num5 += base.FLD_trang_bi_them_vao_phong_ngu * num58;
                                                                  base.Show_Char(PeopleID, 330);
                                                            }
                                                      }
                                                      if ((base.Thuong_khach_thang_thien_1_khi_cong_Pha_giap_thu_hon != 0.0) && (random.Next(0, 0x83) < base.Thuong_khach_thang_thien_1_khi_cong_Pha_giap_thu_hon))
                                                      {
                                                            num5 += base.FLD_trang_bi_them_vao_phong_ngu * 0.4;
                                                            base.Show_Char(PeopleID, 330);
                                                      }
                                                }
                                                if (base.Player_Job == 4)
                                                {
                                                      num5 += base.Cung_thu_Due_loi_chi_tien + 1.0;
                                                      if (((base.Cung_thu_thang_thien_3_khi_cong_Thien_ngoai_tam_thi != 0.0) && (base.Cung_thu_thang_thien_1_khi_cong_Tuyet_anh_xa_hon != 0.0)) && ((tbl_xwwl_kongfu2.FLD_VO_CONG_LOAI_HINH == 3) && (base.class79_0[3, tbl_xwwl_kongfu2.FLD_INDEX].VO_CONG_THU_BAC >= 5)))
                                                      {
                                                            int num59 = random.Next(0, 120);
                                                            if ((num59 < base.Cung_thu_thang_thien_3_khi_cong_Thien_ngoai_tam_thi) && (num59 < base.Cung_thu_thang_thien_1_khi_cong_Tuyet_anh_xa_hon))
                                                            {
                                                                  base.Show_Char(PeopleID, 340);
                                                                  base.Show_Char(PeopleID, 0x156);
                                                                  num5 *= 1.8;
                                                                  base.bool_8 = true;
                                                            }
                                                      }
                                                      if ((base.Cung_thu_Vo_minh_am_thi != 0.0) && (random.Next(0, 0x6f) < (base.Cung_thu_Vo_minh_am_thi + World.CUNG_THU_VO_MINH_AM_THI_TY_LE)))
                                                      {
                                                            num5 *= 1.05 + (base.Cung_thu_Vo_minh_am_thi * 0.01);
                                                            base.Show_Char(PeopleID, 0x31);
                                                            base.bool_8 = true;
                                                      }
                                                      if ((base.Cung_thu_Tri_menh_tuyet_sat != 0.0) && (random.Next(0, 0x8d) < (base.Cung_thu_Tri_menh_tuyet_sat + World.CUNG_THU_TRI_MENH_TUYET_SAT_TY_LE)))
                                                      {
                                                            base.Show_Char(PeopleID, 140);
                                                            num5 *= 1.5;
                                                            base.bool_9 = true;
                                                      }
                                                }
                                                if (base.Player_Job == 5)
                                                {
                                                      num5 *= 1.0 + base.Y_truong_cong_kich_luc;
                                                      if (((base.Y_thang_thien_3_khi_cong_Minh_kinh_chi_thuy != 0.0) && (tbl_xwwl_kongfu2.FLD_VO_CONG_LOAI_HINH == 3)) && ((base.class79_0[3, tbl_xwwl_kongfu2.FLD_INDEX].VO_CONG_THU_BAC >= 5) && (random.Next(0, 120) < base.Y_thang_thien_3_khi_cong_Minh_kinh_chi_thuy)))
                                                      {
                                                            base.Show_Char(PeopleID, 0x160);
                                                            num5 *= 2.0;
                                                      }
                                                      if ((base.Y_thang_thien_2_khi_cong_vo_trung_sinh_huu != 0.0) && (random.Next(0, 120) < base.Y_thang_thien_2_khi_cong_vo_trung_sinh_huu))
                                                      {
                                                            base.Show_Char(PeopleID, 0x15f);
                                                            num5 *= 1.3;
                                                      }
                                                      if ((base.Vo_cong_chi_mang_ti_le != 0.0) && (random.Next(0, 100) < base.Vo_cong_chi_mang_ti_le))
                                                      {
                                                            base.Show_Char(PeopleID, 0x11);
                                                            num5 *= 1.2;
                                                      }
                                                }
                                                if (base.Player_Job == 7)
                                                {
                                                      num5 *= 1.0 + base.SAT_THUONG_VO_CONG_TANG;
                                                      double num60 = random.NextDouble() * World.KHI_CONG_TI_LE_PHAN_TRAM;
                                                      if ((base.Cam_su_kich_luc_cong_thanh != 0.0) && (num60 <= base.Cam_su_kich_luc_cong_thanh))
                                                      {
                                                            num5 *= 2.0;
                                                            base.Show_Char(PeopleID, 0x58);
                                                      }
                                                }
                                                if ((((base.Player_Job == 6) && (base.Thich_khach_thang_thien_3_khi_cong_Di_no_hoan_no != 0.0)) && ((this.int_127 == 5) && (tbl_xwwl_kongfu2.FLD_VO_CONG_LOAI_HINH == 3))) && ((base.class79_0[3, tbl_xwwl_kongfu2.FLD_INDEX].VO_CONG_THU_BAC >= 5) && (random.Next(0, 120) < base.Thich_khach_thang_thien_3_khi_cong_Di_no_hoan_no)))
                                                {
                                                      base.Show_Char(PeopleID, 0x174);
                                                      num5 *= this.int_127;
                                                      this.int_127 = 0;
                                                      this.UpdateHP_MP_SP();
                                                }
                                                if (base.Player_Job == 7)
                                                {
                                                      num5 *= 1.0 + num6;
                                                }
                                                if (base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].ItemPropertyType == 5)
                                                {
                                                      num5 += base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].ItemPropertyNumber * 3;
                                                }
                                                if (World.Version_switch != 0)
                                                {
                                                      num5 = random.Next(((int)num5) - 15, ((int)num5) + 15);
                                                }
                                                if (base.Thanh_vien_thu_bac != 0)
                                                {
                                                      num5 = 10000000000;
                                                }
                                                if (num5 <= 0.0)
                                                {
                                                      num5 = 0.0;
                                                }
                                                this.CONG_KICH_TINH_TOAN_HOAN_THANH2(this, PeopleID, tbl_xwwl_kongfu4.FLD_PID, (long)num5, 0, tbl_xwwl_npc.Rxjh_HP);
                                                base.int_1++;
                                          }
                                          else
                                          {
                                                base.int_1 = 0;
                                          }
                                          if (base.Add_Status_List.ContainsKey(0x3b9acccd))
                                          {
                                                base.Add_Status_List[0x3b9acccd].THOI_GIAN_KET_THUC_SU_KIEN();
                                          }
                                          else if (base.Add_Status_List.ContainsKey(0x3b9accce))
                                          {
                                                base.Add_Status_List[0x3b9accce].THOI_GIAN_KET_THUC_SU_KIEN();
                                          }
                                          else if (base.Add_Status_List.ContainsKey(0x3b9acccf))
                                          {
                                                base.Add_Status_List[0x3b9acccf].THOI_GIAN_KET_THUC_SU_KIEN();
                                          }
                                          else if (base.Add_Status_List.ContainsKey(0x3b9accd0))
                                          {
                                                base.Add_Status_List[0x3b9accd0].THOI_GIAN_KET_THUC_SU_KIEN();
                                          }
                                          else if (base.Add_Status_List.ContainsKey(0x3b9acdbf))
                                          {
                                                base.Add_Status_List[0x3b9acdbf].THOI_GIAN_KET_THUC_SU_KIEN();
                                          }
                                          else if (base.Add_Status_List.ContainsKey(0x3b9acdc0))
                                          {
                                                base.Add_Status_List[0x3b9acdc0].THOI_GIAN_KET_THUC_SU_KIEN();
                                          }
                                          else if (base.Add_Status_List.ContainsKey(0x3b9acdc1))
                                          {
                                                base.Add_Status_List[0x3b9acdc1].THOI_GIAN_KET_THUC_SU_KIEN();
                                          }
                                          return;
                                    }
                                    double num15 = tbl_xwwl_npc.FLD_DF;
                                    double num16 = base.FLD_BasicCharAttack;
                                    long num138 = base.FLD_BasicCharDefense;
                                    if ((base.int_109 != 0) && (random.Next(0, 80) <= base.int_109))
                                    {
                                          num15 -= num15 * 0.3;
                                          base.Show_Char(PeopleID, 0x191);
                                    }
                                    if (((base.Player_Job == 1) || (base.Player_Job == 8)) && ((base.Pha_giap_ty_le != 0.0) && (random.Next(0, 0x65) < base.Pha_giap_ty_le)))
                                    {
                                          num15 *= 0.3;
                                          base.Show_Char(PeopleID, 0x11);
                                    }
                                    if (base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].ItemPropertyType == 1)
                                    {
                                          num15 -= num15 * (base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].ItemPropertyNumber * 0.01);
                                    }
                                    if (base.Player_Job == 2)
                                    {
                                          double num61 = random.NextDouble() * 100.0;
                                          double num62 = random.Next(0, 120);
                                          if ((base.Kiem_khach_Vo_kien_bat_toi != 0.0) && (num61 < base.Kiem_khach_Vo_kien_bat_toi))
                                          {
                                                base.Show_Char(PeopleID, 120);
                                                num15 *= 0.5;
                                          }
                                          if ((base.Kiem_khach_thang_thien_1_khi_cong_Thua_thang_truy_kich != 0.0) && (num62 < base.Kiem_khach_thang_thien_1_khi_cong_Thua_thang_truy_kich))
                                          {
                                                base.Show_Char(PeopleID, 120);
                                                num15 -= (num15 * base.Kiem_khach_thang_thien_1_khi_cong_Thua_thang_truy_kich) * 0.01;
                                          }
                                    }
                                    if (((base.Player_Job == 1) || (base.Player_Job == 8)) && (base.Toi_thieu_cong_kich != 0.0))
                                    {
                                          num16 += num16 * base.Toi_thieu_cong_kich;
                                    }
                                    if ((base.Player_Job == 2) && (base.Toi_thieu_cong_kich != 0.0))
                                    {
                                          num16 += num16 * base.Toi_thieu_cong_kich;
                                    }
                                    if ((base.Player_Job == 3) && (base.Toi_thieu_cong_kich != 0.0))
                                    {
                                          num16 += num16 * base.Toi_thieu_cong_kich;
                                    }
                                    if ((base.Player_Job == 4) && (base.Cung_thu_Ngung_than_tu_khi != 0.0))
                                    {
                                          num16 += num16 * base.Cung_thu_Ngung_than_tu_khi;
                                    }
                                    if ((base.Player_Job == 5) && (base.Toi_thieu_cong_kich != 0.0))
                                    {
                                          num16 += num16 * base.Toi_thieu_cong_kich;
                                    }
                                    if ((base.Player_Job == 6) && (base.Toi_thieu_cong_kich != 0.0))
                                    {
                                          num16 += num16 * base.Toi_thieu_cong_kich;
                                    }
                                    if (((base.Dao_khach_thang_thien_1_khi_cong_Don_xuat_nghich_canh != 0.0) && (tbl_xwwl_kongfu2.FLD_VO_CONG_LOAI_HINH == 3)) && ((base.class79_0[3, tbl_xwwl_kongfu2.FLD_INDEX].VO_CONG_THU_BAC >= 5) && (random.Next(0, 120) < base.Dao_khach_thang_thien_1_khi_cong_Don_xuat_nghich_canh)))
                                    {
                                          base.Show_Char(PeopleID, 310);
                                          if (base.Add_Status_List.ContainsKey(0xaaf96))
                                          {
                                                base.Add_Status_List[0xaaf96].THOI_GIAN_KET_THUC_SU_KIEN();
                                          }
                                          Additional_Sate_Class class15 = new Additional_Sate_Class(this, 0x2af8, 0xaaf96, 1);
                                          base.Add_Status_List.Add(class15.FLD_PID, class15);
                                          base.FLD_nhan_vat_vo_cong_luc_cong_kich_tang_cuong_ti_le_phan_tram += 0.3;
                                          base.addFLD_DEF_Percentage(0.1M);
                                          this.Status_Effect(BitConverter.GetBytes(0xaaf96), 1, 0x2af8);
                                          base.UpdatePowersAndStatus();
                                    }
                                    if (base.Player_Job == 7)
                                    {
                                          if (base.Toi_thieu_cong_kich != 0.0)
                                          {
                                                num16 += num16 * base.Toi_thieu_cong_kich;
                                          }
                                          if ((!base.Add_Status_List.ContainsKey(0xdbd31) && !base.Add_Status_List.ContainsKey(0xdbd32)) && !base.Add_Status_List.ContainsKey(0xdbd33))
                                          {
                                                int num63 = 0;
                                                int num64 = random.Next(0, 100);
                                                if (random.Next(0, 0x6f) <= (base.Cam_su_Nhat_am_xuat_kich * 100.0))
                                                {
                                                      base.Show_Char(PeopleID, 0x57);
                                                      if (num64 <= 0x21)
                                                      {
                                                            num63 = 0xdbd31;
                                                      }
                                                      else if ((num64 >= 0x21) && (num64 <= 0x42))
                                                      {
                                                            num63 = 0xdbd32;
                                                      }
                                                      else
                                                      {
                                                            num63 = 0xdbd33;
                                                      }
                                                      Additional_Sate_Class class16 = new Additional_Sate_Class(this, 0xea60, num63, 0);
                                                      base.Add_Status_List.Add(num63, class16);
                                                      this.Status_Effect(BitConverter.GetBytes(num63), 1, 0xea60);
                                                      base.Update_Figure_Data(this);
                                                }
                                          }
                                          if (base.Add_Status_List.ContainsKey(0xdbd31))
                                          {
                                                int num65 = random.Next(0, 11);
                                                int num66 = random.Next(0, 0x65);
                                                int num67 = random.Next(0, 0x65);
                                                int num68 = random.Next(0, 0x65);
                                                base.Cam_su_Tam_hoa_huyen_phat_dong_xac_suat = (base.Cam_su_Cam_thanh_qua_nguyet * 0.005) * 100.0;
                                                if (random.Next(0, 0x65) <= (((int)(base.Cam_su_Loan_phuong_hoa_minh * 100.0)) + ((int)(base.Cam_su_thang_thien_1_khi_cong_Phi_hoa_diem_thuy * 0.2))))
                                                {
                                                      base.Cam_su_Tam_hoa_huyen_phat_dong_xac_suat *= 2.0;
                                                }
                                                if (num66 <= base.Cam_su_Tam_hoa_huyen_phat_dong_xac_suat)
                                                {
                                                      if ((num67 <= base.Cam_su_Sat_am_cam_khuc) && !tbl_xwwl_npc.threadSafeDictionary_1.ContainsKey(11))
                                                      {
                                                            double num69 = 10000.0;
                                                            num69 += base.Cam_su_Sat_am_cam_khuc * 1000.0;
                                                            DI_THUONG_TRANG_THAI_NEW di_thuong_trang_thai_new11 = new DI_THUONG_TRANG_THAI_NEW(tbl_xwwl_npc, base.UserSessionID, (int)num69, 11, 0);
                                                            tbl_xwwl_npc.threadSafeDictionary_1.Add(11, di_thuong_trang_thai_new11);
                                                      }
                                                      if ((num68 <= base.Cam_su_Sat_menh_cam_thanh) && !tbl_xwwl_npc.threadSafeDictionary_1.ContainsKey(9))
                                                      {
                                                            double num70 = 10000.0;
                                                            num70 += base.Cam_su_Sat_menh_cam_thanh * 1000.0;
                                                            DI_THUONG_TRANG_THAI_NEW di_thuong_trang_thai_new12 = new DI_THUONG_TRANG_THAI_NEW(tbl_xwwl_npc, base.UserSessionID, (int)num70, 9, 0);
                                                            tbl_xwwl_npc.threadSafeDictionary_1.Add(9, di_thuong_trang_thai_new12);
                                                            tbl_xwwl_npc.FLD_DF *= 0.7;
                                                      }
                                                      if ((num65 == 10) && !tbl_xwwl_npc.threadSafeDictionary_1.ContainsKey(10))
                                                      {
                                                            DI_THUONG_TRANG_THAI_NEW di_thuong_trang_thai_new13 = new DI_THUONG_TRANG_THAI_NEW(tbl_xwwl_npc, base.UserSessionID, 0x2710, 10, (int)num5);
                                                            di_thuong_trang_thai_new13.method_0(num5);
                                                            tbl_xwwl_npc.threadSafeDictionary_1.Add(10, di_thuong_trang_thai_new13);
                                                      }
                                                      if (!tbl_xwwl_npc.threadSafeDictionary_1.ContainsKey(9) && !tbl_xwwl_npc.threadSafeDictionary_1.ContainsKey(11))
                                                      {
                                                            if (num66 <= 50)
                                                            {
                                                                  double num71 = 10000.0;
                                                                  num71 += base.Cam_su_Sat_am_cam_khuc * 1000.0;
                                                                  DI_THUONG_TRANG_THAI_NEW di_thuong_trang_thai_new14 = new DI_THUONG_TRANG_THAI_NEW(tbl_xwwl_npc, base.UserSessionID, (int)num71, 11, 0);
                                                                  tbl_xwwl_npc.threadSafeDictionary_1.Add(11, di_thuong_trang_thai_new14);
                                                            }
                                                            else
                                                            {
                                                                  double num72 = 10000.0;
                                                                  num72 += base.Cam_su_Sat_menh_cam_thanh * 1000.0;
                                                                  DI_THUONG_TRANG_THAI_NEW di_thuong_trang_thai_new15 = new DI_THUONG_TRANG_THAI_NEW(tbl_xwwl_npc, base.UserSessionID, (int)num72, 9, 0);
                                                                  tbl_xwwl_npc.threadSafeDictionary_1.Add(9, di_thuong_trang_thai_new15);
                                                                  tbl_xwwl_npc.FLD_DF *= 0.7;
                                                            }
                                                      }
                                                }
                                          }
                                          num6 = base.Cam_su_Cam_thanh_qua_nguyet * 0.0086;
                                          if (base.Add_Status_List.ContainsKey(0xdbd32) && (random.Next(0, 0x79) <= (((int)(base.Cam_su_Loan_phuong_hoa_minh * 100.0)) + ((int)(base.Cam_su_thang_thien_1_khi_cong_Phi_hoa_diem_thuy * 0.2)))))
                                          {
                                                num6 *= 2.0 + (base.Cam_su_thang_thien_1_khi_cong_Phi_hoa_diem_thuy * 0.02);
                                          }
                                    }
                                    if (tbl_xwwl_kongfu2.FLD_VO_CONG_LOAI_HINH == 3)
                                    {
                                          int num73 = 0;
                                          num73 = tbl_xwwl_kongfu2.FLD_AT + (((base.class79_0[3, tbl_xwwl_kongfu2.FLD_INDEX].VO_CONG_THU_BAC - 1) * base.class79_0[3, tbl_xwwl_kongfu2.FLD_INDEX].FLD_MOI_CAP_THEM_NGUY_HAI) / 4);
                                          num5 = ((((num16 - (num15 * 0.7)) + base.FLD_NHAN_VAT_CO_BAN_TRUNG_MUC_TIEU) * 1.5) + (num73 * ((1.0 + base.FLD_trang_bi_luc_cong_kich_vo_cong_tang_cuong_ti_le_phan_tram) + (base.FLD_nhan_vat_vo_cong_luc_cong_kich_tang_cuong_ti_le_phan_tram * (1.0 + base.FLD_NHAN_VAT_KHI_CONG_LUC_CONG_KICH_VO_CONG_TANG_CUONG_TI_LE_PHAN_TRAM))))) + (base.FLD_NHAN_VAT_CO_BAN_TRUNG_MUC_TIEU / 4);
                                    }
                                    else if (tbl_xwwl_kongfu2.FLD_VO_CONG_LOAI_HINH == 2)
                                    {
                                          num5 = ((((num16 - (num15 * 0.7)) + base.FLD_NHAN_VAT_CO_BAN_TRUNG_MUC_TIEU) * 1.5) + (base.Phu_the_vo_cong_luc_cong_kich * ((1.0 + base.FLD_trang_bi_luc_cong_kich_vo_cong_tang_cuong_ti_le_phan_tram) + (base.FLD_nhan_vat_vo_cong_luc_cong_kich_tang_cuong_ti_le_phan_tram * (1.0 + base.FLD_NHAN_VAT_KHI_CONG_LUC_CONG_KICH_VO_CONG_TANG_CUONG_TI_LE_PHAN_TRAM))))) + (base.FLD_NHAN_VAT_CO_BAN_TRUNG_MUC_TIEU / 4);
                                    }
                                    else if ((tbl_xwwl_kongfu2.FLD_VO_CONG_LOAI_HINH == 0) && (base.class79_0[0, tbl_xwwl_kongfu2.FLD_INDEX] != null))
                                    {
                                          if (base.class79_0[0, tbl_xwwl_kongfu2.FLD_INDEX].VO_CONG_THU_BAC != 0)
                                          {
                                                int num74 = 0;
                                                num74 = tbl_xwwl_kongfu2.FLD_AT + (((base.class79_0[0, tbl_xwwl_kongfu2.FLD_INDEX].VO_CONG_THU_BAC - 1) * base.class79_0[0, tbl_xwwl_kongfu2.FLD_INDEX].FLD_MOI_CAP_THEM_NGUY_HAI) / 4);
                                                num5 = ((((num16 - (num15 * 0.7)) + base.FLD_NHAN_VAT_CO_BAN_TRUNG_MUC_TIEU) * 1.5) + (num74 * ((1.0 + base.FLD_trang_bi_luc_cong_kich_vo_cong_tang_cuong_ti_le_phan_tram) + (base.FLD_nhan_vat_vo_cong_luc_cong_kich_tang_cuong_ti_le_phan_tram * (1.0 + base.FLD_NHAN_VAT_KHI_CONG_LUC_CONG_KICH_VO_CONG_TANG_CUONG_TI_LE_PHAN_TRAM))))) + (base.FLD_NHAN_VAT_CO_BAN_TRUNG_MUC_TIEU / 4);
                                          }
                                          else
                                          {
                                                num5 = ((((num16 - (num15 * 0.7)) + base.FLD_NHAN_VAT_CO_BAN_TRUNG_MUC_TIEU) * 1.5) + (tbl_xwwl_kongfu2.FLD_AT * ((1.0 + base.FLD_trang_bi_luc_cong_kich_vo_cong_tang_cuong_ti_le_phan_tram) + (base.FLD_nhan_vat_vo_cong_luc_cong_kich_tang_cuong_ti_le_phan_tram * (1.0 + base.FLD_NHAN_VAT_KHI_CONG_LUC_CONG_KICH_VO_CONG_TANG_CUONG_TI_LE_PHAN_TRAM))))) + (base.FLD_NHAN_VAT_CO_BAN_TRUNG_MUC_TIEU / 4);
                                          }
                                    }
                                    else
                                    {
                                          num5 = ((((num16 - (num15 * 0.7)) + base.FLD_NHAN_VAT_CO_BAN_TRUNG_MUC_TIEU) * 1.5) + (tbl_xwwl_kongfu2.FLD_AT * ((1.0 + base.FLD_trang_bi_luc_cong_kich_vo_cong_tang_cuong_ti_le_phan_tram) + (base.FLD_nhan_vat_vo_cong_luc_cong_kich_tang_cuong_ti_le_phan_tram * (1.0 + base.FLD_NHAN_VAT_KHI_CONG_LUC_CONG_KICH_VO_CONG_TANG_CUONG_TI_LE_PHAN_TRAM))))) + (base.FLD_NHAN_VAT_CO_BAN_TRUNG_MUC_TIEU / 4);
                                    }
                                    if (base.Quai_vat_vo_cong_them_vao != 0.0)
                                    {
                                          num5 += num5 * base.Quai_vat_vo_cong_them_vao;
                                    }
                                    if ((base.Huyen_ti_chan_mach != 0.0) && (random.Next(0, 100) <= base.Huyen_ti_chan_mach))
                                    {
                                          base.Show_Char(PeopleID, 0x18a);
                                          if (base.Add_Status_List.ContainsKey(0xdc17d))
                                          {
                                                base.Add_Status_List[0xdc17d].THOI_GIAN_KET_THUC_SU_KIEN();
                                          }
                                          double num75 = 3000.0;
                                          Additional_Sate_Class class17 = new Additional_Sate_Class(this, (int)num75, 0xdc17d, 0);
                                          base.Add_Status_List.Add(0xdc17d, class17);
                                          this.Status_Effect(BitConverter.GetBytes(0xdc17d), 1, (int)num75);
                                          base.addFLD_DEF_Percentage(0.1M);
                                          base.UpdatePowersAndStatus();
                                    }
                                    if ((base.Vong_mai_thiem_tan != 0.0) && (random.Next(0, 100) <= base.Vong_mai_thiem_tan))
                                    {
                                          base.Show_Char(PeopleID, 0x162);
                                          if (base.Add_Status_List.ContainsKey(0x7a7c5))
                                          {
                                                base.Add_Status_List[0x7a7c5].THOI_GIAN_KET_THUC_SU_KIEN();
                                          }
                                          double num76 = 3000.0;
                                          Additional_Sate_Class class18 = new Additional_Sate_Class(this, (int)num76, 0x7a7c5, 0);
                                          base.Add_Status_List.Add(0x7a7c5, class18);
                                          this.Status_Effect(BitConverter.GetBytes(0x7a7c5), 1, (int)num76);
                                          base.Nhan_vat_them_vao_lon_nhat_HP += 0x3e8;
                                          this.UpdateHP_MP_SP();
                                    }
                                    if ((base.Liet_nhat_viem_viem != 0.0) && (random.Next(0, 100) <= base.Liet_nhat_viem_viem))
                                    {
                                          base.Show_Char(PeopleID, 0x158);
                                    }
                                    if (((base.Man_nguyet_cuong_phong != 0.0) && (random.Next(0, 100) <= base.Man_nguyet_cuong_phong)) && World.W_TO_DOI.TryGetValue(base.TO_DOI_ID, out to_doi_class2))
                                    {
                                          foreach (Players players6 in to_doi_class2.dictionary_0.Values)
                                          {
                                                if (this.TRA_TIM_PHAM_VI_NGUOI_CHOI(300, players6))
                                                {
                                                      if (players6.Add_Status_List.ContainsKey(0xaae6e))
                                                      {
                                                            return;
                                                      }
                                                      players6.Show_Char(players6.UserSessionID, 0x162);
                                                      Additional_Sate_Class class19 = new Additional_Sate_Class(players6, 0xbb8, 0xaae6e, 0);
                                                      players6.Add_Status_List.Add(0xaae6e, class19);
                                                      if (players6.Player_Job == 3)
                                                      {
                                                            players6.addFLD_ATT_Percentage(0.29M);
                                                            players6.addFLD_DEF_Percentage(0.29M);
                                                      }
                                                      else
                                                      {
                                                            players6.addFLD_ATT_Percentage(0.25M);
                                                            players6.addFLD_DEF_Percentage(0.25M);
                                                      }
                                                      players6.Status_Effect(BitConverter.GetBytes(0xaae6e), 1, 0xbb8);
                                                      players6.UpdatePowersAndStatus();
                                                }
                                          }
                                    }
                                    if ((base.Thang_thien_4_khi_cong_Hong_nguyet_cuong_phong != 0.0) && (random.Next(0, 120) <= base.Thang_thien_4_khi_cong_Hong_nguyet_cuong_phong))
                                    {
                                          foreach (Players players7 in World.allConnectedChars.Values)
                                          {
                                                if ((this.TRA_TIM_PHAM_VI_NGUOI_CHOI(30, players7) && (players7.Player_Job == base.Player_Job)) && ((base.Player_Zx == players7.Player_Zx) && players7.Add_Status_List.ContainsKey(0xaae6e)))
                                                {
                                                      players7.Show_Char(PeopleID, 0x139);
                                                }
                                          }
                                    }
                                    if ((base.Player_Job == 1) || (base.Player_Job == 8))
                                    {
                                          if (((base.Dao_khach_thang_thien_3_khi_cong_Pham_am_pha_kinh != 0.0) && (tbl_xwwl_kongfu2.FLD_VO_CONG_LOAI_HINH == 3)) && ((base.class79_0[3, tbl_xwwl_kongfu2.FLD_INDEX].VO_CONG_THU_BAC >= 5) && (random.Next(0, 120) < base.Dao_khach_thang_thien_3_khi_cong_Pham_am_pha_kinh)))
                                          {
                                                base.Show_Char(PeopleID, 0x138);
                                                num5 *= 1.5 + base.Phan_am_pha_kinh_thuong_ton;
                                          }
                                          if ((base.Dao_khach_Am_anh_tuyet_sat != 0.0) && (random.Next(0, 0x8d) < base.Dao_khach_Am_anh_tuyet_sat))
                                          {
                                                base.Show_Char(PeopleID, 0x12);
                                                num5 *= 1.0 + base.Toi_thieu_cong_kich;
                                          }
                                          if ((base.Han_bao_quan_Hanh_phong_long_vu != 0.0) && (random.Next(0, 0x8d) < base.Han_bao_quan_Hanh_phong_long_vu))
                                          {
                                                base.Show_Char(PeopleID, 600);
                                                num5 *= 1.25;
                                          }
                                          if (((base.Han_bao_quan_Thien_ma_cuong_huyet != 0.0) && (random.Next(0, 0x83) < base.Han_bao_quan_Thien_ma_cuong_huyet)) && (tbl_xwwl_kongfu2.FLD_CDTIME > 0x3e8))
                                          {
                                                base.Show_Char(PeopleID, 0xfc);
                                                num5 *= 1.4;
                                          }
                                          if (((base.Han_bao_quan_Thien_ma_cuong_huyet_2 != 0.0) && (random.Next(0, 0x8d) < base.Han_bao_quan_Thien_ma_cuong_huyet_2)) && (tbl_xwwl_kongfu2.FLD_CDTIME > 0x3e8))
                                          {
                                                base.Show_Char(PeopleID, 0x4f1c);
                                                num5 *= 1.8;
                                          }
                                          if ((base.Vo_cong_chi_mang_ti_le != 0.0) && (random.Next(0, 0x97) < base.Vo_cong_chi_mang_ti_le))
                                          {
                                                base.Show_Char(PeopleID, 0x11);
                                                num5 *= 1.2;
                                          }
                                    }
                                    if (base.Player_Job == 2)
                                    {
                                          num5 *= 1.0 + base.SAT_THUONG_VO_CONG_TANG;
                                          double num77 = random.NextDouble() * 200.0;
                                          if (((tbl_xwwl_kongfu2.FLD_VO_CONG_LOAI_HINH == 3) && (base.class79_0[3, tbl_xwwl_kongfu2.FLD_INDEX].VO_CONG_THU_BAC >= 5)) && (base.Kiem_khach_thang_thien_1_khi_cong_Thua_thang_truy_kich > num77))
                                          {
                                                num5 *= 1.4;
                                                base.Show_Char(PeopleID, 0x141);
                                          }
                                    }
                                    if (base.Player_Job == 3)
                                    {
                                          num5 *= 1.0 + base.Thuong_khach_Can_khon_na_di;
                                          if (base.Add_Status_List.ContainsKey(0xaae6e))
                                          {
                                                if (((base.Thuong_khach_thang_thien_3_khi_cong_No_y_chi_hong != 0.0) && (tbl_xwwl_kongfu2.FLD_VO_CONG_LOAI_HINH == 3)) && ((base.class79_0[3, tbl_xwwl_kongfu2.FLD_INDEX].VO_CONG_THU_BAC >= 5) && (random.Next(0, 0x79) < base.Thuong_khach_thang_thien_3_khi_cong_No_y_chi_hong)))
                                                {
                                                      num5 *= 1.5 + base.Tuc_gian_chi_hong_Them_vao_thuong_ton;
                                                      base.Show_Char(PeopleID, 0x14c);
                                                }
                                                if (((base.Thuong_khach_thang_thien_2_khi_cong_Di_thoi_vi_tien != 0.0) && (tbl_xwwl_kongfu2.FLD_VO_CONG_LOAI_HINH == 3)) && ((base.class79_0[3, tbl_xwwl_kongfu2.FLD_INDEX].VO_CONG_THU_BAC >= 5) && (random.Next(0, 0x6f) < (base.Thuong_khach_thang_thien_1_khi_cong_Pha_giap_thu_hon + base.Thuong_khach_thang_thien_2_khi_cong_Di_thoi_vi_tien))))
                                                {
                                                      double num78 = 0.4 + (base.Thuong_khach_thang_thien_2_khi_cong_Di_thoi_vi_tien * 0.01);
                                                      num5 += base.FLD_trang_bi_them_vao_phong_ngu * num78;
                                                      base.Show_Char(PeopleID, 330);
                                                }
                                          }
                                          if ((base.Thuong_khach_thang_thien_1_khi_cong_Pha_giap_thu_hon != 0.0) && (random.Next(0, 0x83) < base.Thuong_khach_thang_thien_1_khi_cong_Pha_giap_thu_hon))
                                          {
                                                num5 += base.FLD_trang_bi_them_vao_phong_ngu * 0.4;
                                                base.Show_Char(PeopleID, 330);
                                          }
                                    }
                                    if (base.Player_Job == 4)
                                    {
                                          num5 += base.Cung_thu_Due_loi_chi_tien + 1.0;
                                          if (((base.Cung_thu_thang_thien_3_khi_cong_Thien_ngoai_tam_thi != 0.0) && (base.Cung_thu_thang_thien_1_khi_cong_Tuyet_anh_xa_hon != 0.0)) && ((tbl_xwwl_kongfu2.FLD_VO_CONG_LOAI_HINH == 3) && (base.class79_0[3, tbl_xwwl_kongfu2.FLD_INDEX].VO_CONG_THU_BAC >= 5)))
                                          {
                                                int num79 = random.Next(0, 120);
                                                if ((num79 < base.Cung_thu_thang_thien_3_khi_cong_Thien_ngoai_tam_thi) && (num79 < base.Cung_thu_thang_thien_1_khi_cong_Tuyet_anh_xa_hon))
                                                {
                                                      base.Show_Char(PeopleID, 340);
                                                      base.Show_Char(PeopleID, 0x156);
                                                      num5 *= 1.8;
                                                      base.bool_8 = true;
                                                }
                                          }
                                          if ((base.Cung_thu_Vo_minh_am_thi != 0.0) && (random.Next(0, 0x6f) < (base.Cung_thu_Vo_minh_am_thi + World.CUNG_THU_VO_MINH_AM_THI_TY_LE)))
                                          {
                                                num5 *= 1.05 + (base.Cung_thu_Vo_minh_am_thi * 0.01);
                                                base.Show_Char(PeopleID, 0x31);
                                                base.bool_8 = true;
                                          }
                                          if ((base.Cung_thu_Tri_menh_tuyet_sat != 0.0) && (random.Next(0, 0x8d) < (base.Cung_thu_Tri_menh_tuyet_sat + World.CUNG_THU_TRI_MENH_TUYET_SAT_TY_LE)))
                                          {
                                                base.Show_Char(PeopleID, 140);
                                                num5 *= 1.5;
                                                base.bool_9 = true;
                                          }
                                    }
                                    if (base.Player_Job == 5)
                                    {
                                          num5 *= 1.0 + base.Y_truong_cong_kich_luc;
                                          if (((base.Y_thang_thien_3_khi_cong_Minh_kinh_chi_thuy != 0.0) && (tbl_xwwl_kongfu2.FLD_VO_CONG_LOAI_HINH == 3)) && ((base.class79_0[3, tbl_xwwl_kongfu2.FLD_INDEX].VO_CONG_THU_BAC >= 5) && (random.Next(0, 120) < base.Y_thang_thien_3_khi_cong_Minh_kinh_chi_thuy)))
                                          {
                                                base.Show_Char(PeopleID, 0x160);
                                                num5 *= 2.0;
                                          }
                                          if ((base.Y_thang_thien_2_khi_cong_vo_trung_sinh_huu != 0.0) && (random.Next(0, 120) < base.Y_thang_thien_2_khi_cong_vo_trung_sinh_huu))
                                          {
                                                base.Show_Char(PeopleID, 0x15f);
                                                num5 *= 1.3;
                                          }
                                          if ((base.Vo_cong_chi_mang_ti_le != 0.0) && (random.Next(0, 100) < base.Vo_cong_chi_mang_ti_le))
                                          {
                                                base.Show_Char(PeopleID, 0x11);
                                                num5 *= 1.2;
                                          }
                                    }
                                    if (base.Player_Job == 7)
                                    {
                                          num5 *= 1.0 + base.SAT_THUONG_VO_CONG_TANG;
                                          double num80 = random.NextDouble() * World.KHI_CONG_TI_LE_PHAN_TRAM;
                                          if ((base.Cam_su_kich_luc_cong_thanh != 0.0) && (num80 <= base.Cam_su_kich_luc_cong_thanh))
                                          {
                                                num5 *= 2.0;
                                                base.Show_Char(PeopleID, 0x58);
                                          }
                                    }
                                    try
                                    {
                                          if ((((World.TBL_KONGFU.TryGetValue(int_128, out tbl_xwwl_kongfu) && (tbl_xwwl_kongfu.FLD_AT != 0)) && ((tbl_xwwl_npc.FLD_PID != 0x69016) && (tbl_xwwl_npc.FLD_PID != 0x6b726))) && (((tbl_xwwl_npc.FLD_PID != 0x6907a) && (tbl_xwwl_npc.FLD_PID != 0x6b78a)) && ((tbl_xwwl_npc.FLD_PID != 0x690de) && (tbl_xwwl_npc.FLD_PID != 0x6b7ee)))) && ((tbl_xwwl_npc.FLD_PID != 0x69142) && (tbl_xwwl_npc.FLD_PID != 0x6b852)))
                                          {
                                                int totalSeconds = (int)DateTime.Now.Subtract(tbl_xwwl_kongfu.FLD_CDSKILL).TotalSeconds;
                                                if (totalSeconds < (tbl_xwwl_kongfu2.FLD_CDTIME / 0x3e8))
                                                {
                                                      base.GameMessage("Thoi gian su dung vo cong con " + ((tbl_xwwl_kongfu2.FLD_CDTIME / 0x3e8) - totalSeconds) + " giay !!", 9, "Msg");
                                                      return;
                                                }
                                                tbl_xwwl_kongfu.FLD_CDSKILL = DateTime.Now;
                                          }
                                          if (base.Player_Job == 6)
                                          {
                                                if (tbl_xwwl_kongfu2.FLD_PID == 0xc3a17)
                                                {
                                                      if (((int)DateTime.Now.Subtract(this.dateTime_15).TotalSeconds) < 20)
                                                      {
                                                            return;
                                                      }
                                                      this.dateTime_15 = DateTime.Now;
                                                      num5 = 0.0;
                                                      this.int_127++;
                                                      if (this.int_127 > 5)
                                                      {
                                                            this.int_127 = 5;
                                                      }
                                                      this.UpdateHP_MP_SP();
                                                }
                                                else if (tbl_xwwl_kongfu2.FLD_PID == 0xc3a79)
                                                {
                                                      this.method_438(BitConverter.GetBytes(tbl_xwwl_kongfu2.FLD_PID), 1);
                                                      this.Move(tbl_xwwl_npc.Rxjh_X, tbl_xwwl_npc.Rxjh_Y, tbl_xwwl_npc.Rxjh_Z, tbl_xwwl_npc.Rxjh_Map);
                                                }
                                                else if ((((tbl_xwwl_kongfu2.FLD_INDEX == 1) || (tbl_xwwl_kongfu2.FLD_INDEX == 5)) || ((tbl_xwwl_kongfu2.FLD_INDEX == 9) || (tbl_xwwl_kongfu2.FLD_INDEX == 13))) || (((tbl_xwwl_kongfu2.FLD_INDEX == 0x11) || (tbl_xwwl_kongfu2.FLD_INDEX == 0x15)) || (tbl_xwwl_kongfu2.FLD_INDEX == 0x19)))
                                                {
                                                      if (this.int_127 > 0)
                                                      {
                                                            if (!tbl_xwwl_npc.threadSafeDictionary_1.ContainsKey(9))
                                                            {
                                                                  double num82 = 10000.0;
                                                                  num82 += base.Thich_khach_Thien_chu_van_thu * 1000.0;
                                                                  DI_THUONG_TRANG_THAI_NEW di_thuong_trang_thai_new16 = new DI_THUONG_TRANG_THAI_NEW(tbl_xwwl_npc, base.UserSessionID, (int)num82, 9, 0);
                                                                  tbl_xwwl_npc.threadSafeDictionary_1.Add(9, di_thuong_trang_thai_new16);
                                                            }
                                                            if (!tbl_xwwl_npc.threadSafeDictionary_1.ContainsKey(11))
                                                            {
                                                                  double num83 = 10000.0;
                                                                  num83 += base.Thich_khach_Thien_chu_van_thu * 1000.0;
                                                                  DI_THUONG_TRANG_THAI_NEW di_thuong_trang_thai_new17 = new DI_THUONG_TRANG_THAI_NEW(tbl_xwwl_npc, base.UserSessionID, (int)num83, 11, 0);
                                                                  tbl_xwwl_npc.threadSafeDictionary_1.Add(11, di_thuong_trang_thai_new17);
                                                            }
                                                            this.int_127--;
                                                            this.UpdateHP_MP_SP();
                                                      }
                                                }
                                                else if ((((tbl_xwwl_kongfu2.FLD_INDEX == 2) || (tbl_xwwl_kongfu2.FLD_INDEX == 6)) || ((tbl_xwwl_kongfu2.FLD_INDEX == 10) || (tbl_xwwl_kongfu2.FLD_INDEX == 14))) || (((tbl_xwwl_kongfu2.FLD_INDEX == 0x12) || (tbl_xwwl_kongfu2.FLD_INDEX == 0x16)) || (tbl_xwwl_kongfu2.FLD_INDEX == 0x1a)))
                                                {
                                                      if (this.int_127 > 0)
                                                      {
                                                            if (!tbl_xwwl_npc.threadSafeDictionary_1.ContainsKey(9))
                                                            {
                                                                  double num85 = 10000.0;
                                                                  num85 += base.Thich_khach_Thien_chu_van_thu * 1000.0;
                                                                  DI_THUONG_TRANG_THAI_NEW di_thuong_trang_thai_new18 = new DI_THUONG_TRANG_THAI_NEW(tbl_xwwl_npc, base.UserSessionID, (int)num85, 9, 0);
                                                                  tbl_xwwl_npc.threadSafeDictionary_1.Add(9, di_thuong_trang_thai_new18);
                                                            }
                                                            double num84 = 0.005;
                                                            switch (tbl_xwwl_kongfu2.FLD_INDEX)
                                                            {
                                                                  case 2:
                                                                        num84 = 0.005;
                                                                        break;

                                                                  case 6:
                                                                        num84 = 0.007;
                                                                        break;

                                                                  case 10:
                                                                        num84 = 0.009;
                                                                        break;

                                                                  case 0x16:
                                                                        num84 = 0.015;
                                                                        break;

                                                                  case 0x1a:
                                                                        num84 = 0.02;
                                                                        break;

                                                                  case 14:
                                                                        num84 = 0.011;
                                                                        break;

                                                                  case 0x12:
                                                                        num84 = 0.013;
                                                                        break;
                                                            }
                                                            if (!tbl_xwwl_npc.threadSafeDictionary_1.ContainsKey(10))
                                                            {
                                                                  double num87 = 10000.0;
                                                                  num87 += base.Thich_khach_Thien_chu_van_thu * 1000.0;
                                                                  DI_THUONG_TRANG_THAI_NEW di_thuong_trang_thai_new19 = new DI_THUONG_TRANG_THAI_NEW(tbl_xwwl_npc, base.UserSessionID, (int)num87, 10, (int)(num5 * num84));
                                                                  di_thuong_trang_thai_new19.method_0(num5 * num84);
                                                                  tbl_xwwl_npc.threadSafeDictionary_1.Add(10, di_thuong_trang_thai_new19);
                                                            }
                                                            this.int_127--;
                                                            this.UpdateHP_MP_SP();
                                                      }
                                                }
                                                else if (((((tbl_xwwl_kongfu2.FLD_INDEX == 3) || (tbl_xwwl_kongfu2.FLD_INDEX == 7)) || ((tbl_xwwl_kongfu2.FLD_INDEX == 11) || (tbl_xwwl_kongfu2.FLD_INDEX == 15))) || (((tbl_xwwl_kongfu2.FLD_INDEX == 0x13) || (tbl_xwwl_kongfu2.FLD_INDEX == 0x17)) || (tbl_xwwl_kongfu2.FLD_INDEX == 0x1b))) && (this.int_127 > 0))
                                                {
                                                      num5 += (num5 * 0.3) * this.int_127;
                                                      base.Show_Char(PeopleID, 80);
                                                      this.int_127 = 0;
                                                      this.UpdateHP_MP_SP();
                                                }
                                          }
                                    }
                                    catch (Exception)
                                    {
                                          Form1.WriteLine(1, "Bo may chiu ");
                                    }
                                    if (base.Player_Job == 7)
                                    {
                                          num5 *= 1.0 + num6;
                                    }
                                    if (base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].ItemPropertyType == 5)
                                    {
                                          num5 += base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].ItemPropertyNumber * 3;
                                    }
                                    if ((base.int_112 != 0) && (random.Next(0, 80) <= base.int_112))
                                    {
                                          num5 += num5 * 0.2;
                                          base.Show_Char(PeopleID, 0x194);
                                    }
                                    if (World.Version_switch != 0)
                                    {
                                          num5 = random.Next(((int)num5) - 15, ((int)num5) + 15);
                                    }
                                    if (base.Thanh_vien_thu_bac != 0)
                                    {
                                          num5 = 1.0;
                                    }
                                    if (num5 <= 0.0)
                                    {
                                          num5 = 1.0;
                                    }
                                    if (base.Add_Status_List.ContainsKey(0x3b9acccd))
                                    {
                                          base.Add_Status_List[0x3b9acccd].THOI_GIAN_KET_THUC_SU_KIEN();
                                    }
                                    else if (base.Add_Status_List.ContainsKey(0x3b9accce))
                                    {
                                          base.Add_Status_List[0x3b9accce].THOI_GIAN_KET_THUC_SU_KIEN();
                                    }
                                    else if (base.Add_Status_List.ContainsKey(0x3b9acccf))
                                    {
                                          base.Add_Status_List[0x3b9acccf].THOI_GIAN_KET_THUC_SU_KIEN();
                                    }
                                    else if (base.Add_Status_List.ContainsKey(0x3b9accd0))
                                    {
                                          base.Add_Status_List[0x3b9accd0].THOI_GIAN_KET_THUC_SU_KIEN();
                                    }
                                    else if (base.Add_Status_List.ContainsKey(0x3b9acdbf))
                                    {
                                          base.Add_Status_List[0x3b9acdbf].THOI_GIAN_KET_THUC_SU_KIEN();
                                    }
                                    else if (base.Add_Status_List.ContainsKey(0x3b9acdc0))
                                    {
                                          base.Add_Status_List[0x3b9acdc0].THOI_GIAN_KET_THUC_SU_KIEN();
                                    }
                                    else if (base.Add_Status_List.ContainsKey(0x3b9acdc1))
                                    {
                                          base.Add_Status_List[0x3b9acdc1].THOI_GIAN_KET_THUC_SU_KIEN();
                                    }
                                    this.CONG_KICH_TINH_TOAN_HOAN_THANH2(this, PeopleID, int_128, (long)num5, 0, tbl_xwwl_npc.Rxjh_HP);
                              }
                              catch (Exception exception)
                              {
                                    Form1.WriteLine(1, string.Concat(new object[] { "魔法攻击2 ", base.UserSessionID, "|", base.Client.ToString(), " | ", int_128, " | ", PeopleID, " | ", exception.Message }));
                              }
                              return;
                        }
                        if (((((!World.allConnectedChars.TryGetValue(PeopleID, out players) || (players.NHAN_VAT_HP <= 0L)) || !World.TBL_KONGFU.TryGetValue(int_128, out tbl_xwwl_kongfu)) || (((base.Player_Job != tbl_xwwl_kongfu.FLD_JOB) && (int_128 != 0x92c71)) && (int_128 != 0x92c72))) || ((tbl_xwwl_kongfu.FLD_ZX != 0) && (base.Player_Zx != tbl_xwwl_kongfu.FLD_ZX))) || ((base.Player_FLD_JOB_LEVEL < tbl_xwwl_kongfu.FLD_JOBLEVEL) || (base.Player_FLD_LEVEL < tbl_xwwl_kongfu.FLD_LEVEL)))
                        {
                              return;
                        }
                        if (tbl_xwwl_kongfu.FLD_VO_CONG_LOAI_HINH == 3)
                        {
                              int num88 = 0;
                              num88 = tbl_xwwl_kongfu.FLD_MP + ((base.class79_0[3, tbl_xwwl_kongfu.FLD_INDEX].VO_CONG_THU_BAC - 1) * base.class79_0[3, tbl_xwwl_kongfu.FLD_INDEX].FLD_MOI_CAP_THEM_MP);
                              if (base.NHAN_VAT_MP < num88)
                              {
                                    base.NOI_CONG_KHONG_DU_NHAC_NHO();
                                    return;
                              }
                              this.PHEP_THUAT_SU_DUNG((double)num88);
                        }
                        else if (tbl_xwwl_kongfu.FLD_VO_CONG_LOAI_HINH == 2)
                        {
                              if (base.NHAN_VAT_MP < base.Phu_the_vo_cong_luc_cong_kich_MP)
                              {
                                    base.NOI_CONG_KHONG_DU_NHAC_NHO();
                                    return;
                              }
                              this.PHEP_THUAT_SU_DUNG((double)base.Phu_the_vo_cong_luc_cong_kich_MP);
                        }
                        else
                        {
                              if (base.NHAN_VAT_MP < tbl_xwwl_kongfu.FLD_MP)
                              {
                                    base.NOI_CONG_KHONG_DU_NHAC_NHO();
                                    return;
                              }
                              this.PHEP_THUAT_SU_DUNG((double)tbl_xwwl_kongfu.FLD_MP);
                        }
                        int num7 = int_128;
                        if (num7 > 0x7a69b)
                        {
                              goto Label_5974;
                        }
                        switch (num7)
                        {
                              case 0x61f31:
                                    this.CHAR_SENT_DATA_ATTACK(this, PeopleID, int_128, (int)num5, 0, 0, -1);
                                    return;

                              case 0x61f32:
                                    {
                                          if (players.Add_Status_List.ContainsKey(0x61f32))
                                          {
                                                players.Add_Status_List[0x61f32].THOI_GIAN_KET_THUC_SU_KIEN();
                                          }
                                          double num89 = 300000.0 + (1000.0 * base.Hoi_luu_chan_khi);
                                          Additional_Sate_Class class20 = new Additional_Sate_Class(players, (int)num89, int_128, 0);
                                          players.Add_Status_List.Add(int_128, class20);
                                          players.Status_Effect(BitConverter.GetBytes(int_128), 1, (int)num89);
                                          players.FLD_nhan_vat_them_vao_sinh_menh += 40;
                                          players.FLD_nhan_vat_them_vao_ne_tranh -= 20;
                                          players.UpdatePowersAndStatus();
                                          this.CHAR_SENT_DATA_ATTACK(this, PeopleID, int_128, (int)num5, 0, 0, -1);
                                          return;
                                    }
                              case 0x61f33:
                                    {
                                          if (players.Add_Status_List.ContainsKey(0x61f33))
                                          {
                                                players.Add_Status_List[0x61f33].THOI_GIAN_KET_THUC_SU_KIEN();
                                          }
                                          double num90 = 300000.0 + (1000.0 * base.Hoi_luu_chan_khi);
                                          Additional_Sate_Class class21 = new Additional_Sate_Class(players, (int)num90, int_128, 0);
                                          players.Add_Status_List.Add(int_128, class21);
                                          players.Status_Effect(BitConverter.GetBytes(int_128), 1, (int)num90);
                                          players.FLD_nhan_vat_them_vao_sinh_menh -= 20;
                                          players.FLD_nhan_vat_them_vao_ne_tranh += 40;
                                          players.UpdatePowersAndStatus();
                                          this.CHAR_SENT_DATA_ATTACK(this, PeopleID, int_128, (int)num5, 0, 0, -1);
                                          return;
                                    }
                              case 0x61f95:
                                    {
                                          if (players.Add_Status_List.ContainsKey(0x61f95))
                                          {
                                                players.Add_Status_List[0x61f95].THOI_GIAN_KET_THUC_SU_KIEN();
                                          }
                                          double num91 = 300000.0 + (1000.0 * base.Hoi_luu_chan_khi);
                                          Additional_Sate_Class class22 = new Additional_Sate_Class(players, (int)num91, int_128, 0);
                                          players.Add_Status_List.Add(int_128, class22);
                                          players.Status_Effect(BitConverter.GetBytes(int_128), 1, (int)num91);
                                          players.FLD_nhan_vat_vo_cong_luc_cong_kich_tang_cuong_ti_le_phan_tram += 0.1;
                                          this.CHAR_SENT_DATA_ATTACK(this, PeopleID, int_128, (int)num5, 0, 0, -1);
                                          return;
                                    }
                              case 0x61f96:
                                    {
                                          if (players.Add_Status_List.ContainsKey(0x61f96))
                                          {
                                                players.Add_Status_List[0x61f96].THOI_GIAN_KET_THUC_SU_KIEN();
                                          }
                                          double num92 = 300000.0 + (1000.0 * base.Hoi_luu_chan_khi);
                                          Additional_Sate_Class class23 = new Additional_Sate_Class(players, (int)num92, int_128, 0);
                                          players.Add_Status_List.Add(int_128, class23);
                                          players.Status_Effect(BitConverter.GetBytes(int_128), 1, (int)num92);
                                          players.FLD_nhan_vat_vo_cong_suc_phong_ngu_tang_cuong_ti_le_phan_tram += 0.1;
                                          this.CHAR_SENT_DATA_ATTACK(this, PeopleID, int_128, (int)num5, 0, 0, -1);
                                          return;
                                    }
                              case 0x61f97:
                                    {
                                          if (players.Add_Status_List.ContainsKey(0x61f97))
                                          {
                                                players.Add_Status_List[0x61f97].THOI_GIAN_KET_THUC_SU_KIEN();
                                          }
                                          double num93 = 300000.0 + (1000.0 * base.Hoi_luu_chan_khi);
                                          Additional_Sate_Class class24 = new Additional_Sate_Class(players, (int)num93, int_128, 0);
                                          players.Add_Status_List.Add(int_128, class24);
                                          players.Status_Effect(BitConverter.GetBytes(int_128), 1, (int)num93);
                                          players.Cung_ten_Tri_menh_nhat_kich_ty_le += 5.0;
                                          this.CHAR_SENT_DATA_ATTACK(this, PeopleID, int_128, (int)num5, 0, 0, -1);
                                          return;
                                    }
                              case 0x7a5d1:
                                    {
                                          double num94 = BitConverter.ToInt16(base.Qigong[4].气功_byte, 0);
                                          double num95 = 0.02 * num94;
                                          num = World.DAI_PHU_HOI_KHI_LIEU_THUONG_THEM_HP + (World.DAI_PHU_HOI_KHI_LIEU_THUONG_THEM_HP * num95);
                                          if (random.Next(0, 0x65) >= base.Y_van_vat_hoi_xuan)
                                          {
                                                break;
                                          }
                                          base.Show_Char(base.UserSessionID, 150);
                                          players.Increase_HP(((int)num) * 2);
                                          goto Label_58EC;
                                    }
                              case 0x7a5d2:
                                    {
                                          double num96 = BitConverter.ToInt16(base.Qigong[4].气功_byte, 0);
                                          double num97 = 0.02 * num96;
                                          num2 = World.DAI_PHU_VAN_KHI_LIEU_THUONG_THEM_HP + (World.DAI_PHU_VAN_KHI_LIEU_THUONG_THEM_HP * num97);
                                          if (random.Next(0, 0x65) >= base.Y_van_vat_hoi_xuan)
                                          {
                                                goto Label_5906;
                                          }
                                          base.Show_Char(base.UserSessionID, 150);
                                          players.Increase_HP(((int)num2) * 2);
                                          goto Label_590E;
                                    }
                              case 0x7a5d3:
                                    {
                                          TO_DOI_CLASS to_doi_class5;
                                          num3 = random.Next(0, 0x65);
                                          double num98 = BitConverter.ToInt16(base.Qigong[4].气功_byte, 0);
                                          double num99 = 0.02 * num98;
                                          num4 = World.DAI_PHU_TU_KHI_LIEU_THUONG_THEM_HP + (World.DAI_PHU_TU_KHI_LIEU_THUONG_THEM_HP * num99);
                                          if (!World.W_TO_DOI.TryGetValue(base.TO_DOI_ID, out to_doi_class5))
                                          {
                                                goto Label_5928;
                                          }
                                          int num100 = (int)num4;
                                          if ((random.Next(0, 0x9b) <= base.Y_thang_thien_1_khi_cong_Cuong_y_ho_the) && (base.Y_thang_thien_1_khi_cong_Cuong_y_ho_the != 0.0))
                                          {
                                                foreach (Players players8 in to_doi_class5.dictionary_0.Values)
                                                {
                                                      if (this.TRA_TIM_PHAM_VI_NGUOI_CHOI(500, players8))
                                                      {
                                                            players8.Show_Char(players8.UserSessionID, 350);
                                                            players8.NHAN_VAT_SP += ((((int)base.Y_thang_thien_1_khi_cong_Cuong_y_ho_the) + 5) / 100) * players8.NHAN_VAT_SP;
                                                            if (players8.Add_Status_List.ContainsKey(0xaafbe))
                                                            {
                                                                  players8.Add_Status_List[0xaafbe].THOI_GIAN_KET_THUC_SU_KIEN();
                                                            }
                                                            Additional_Sate_Class class25 = new Additional_Sate_Class(players8, 0x2bf20, 0xaafbe, 1);
                                                            players8.Add_Status_List.Add(class25.FLD_PID, class25);
                                                            players8.addFLD_DEF_Percentage(0.2M);
                                                            players8.Status_Effect(BitConverter.GetBytes(0xaafbe), 1, 0x2bf20);
                                                            players8.UpdatePowersAndStatus();
                                                      }
                                                }
                                          }
                                          this.GUI_DI_BAC_SI_CHUA_BENH_NHOM_SO_LIEU(PeopleID, to_doi_class5, num100, int_128, tbl_xwwl_kongfu);
                                          return;
                                    }
                              case 0x7a635:
                                    {
                                          if (players.Add_Status_List.ContainsKey(0x7a635))
                                          {
                                                players.Add_Status_List[0x7a635].THOI_GIAN_KET_THUC_SU_KIEN();
                                          }
                                          if (players.Add_Status_List.ContainsKey(0x7a6fd))
                                          {
                                                players.Add_Status_List[0x7a6fd].THOI_GIAN_KET_THUC_SU_KIEN();
                                          }
                                          double num101 = 600000.0;
                                          num101 *= 1.0 + base.Y_hap_tinh_dai_phap;
                                          Additional_Sate_Class class26 = new Additional_Sate_Class(players, (int)num101, int_128, 0);
                                          players.Add_Status_List.Add(int_128, class26);
                                          players.Status_Effect(BitConverter.GetBytes(int_128), 1, (int)num101);
                                          players.addFLD_ATT_Percentage(0.1M);
                                          players.UpdatePowersAndStatus();
                                          this.CHAR_SENT_DATA_ATTACK(this, PeopleID, int_128, (int)num5, 0, 0, -1);
                                          return;
                                    }
                              case 0x7a636:
                                    {
                                          if (players.Add_Status_List.ContainsKey(0x7a6fe))
                                          {
                                                players.Add_Status_List[0x7a6fe].THOI_GIAN_KET_THUC_SU_KIEN();
                                          }
                                          if (players.Add_Status_List.ContainsKey(0x7a637))
                                          {
                                                players.Add_Status_List[0x7a637].THOI_GIAN_KET_THUC_SU_KIEN();
                                          }
                                          if (players.Add_Status_List.ContainsKey(0x7a636))
                                          {
                                                players.Add_Status_List[0x7a636].THOI_GIAN_KET_THUC_SU_KIEN();
                                          }
                                          double num102 = 600000.0;
                                          num102 *= 1.0 + base.Y_hap_tinh_dai_phap;
                                          Additional_Sate_Class class27 = new Additional_Sate_Class(players, (int)num102, int_128, 0);
                                          players.Add_Status_List.Add(int_128, class27);
                                          players.Status_Effect(BitConverter.GetBytes(int_128), 1, (int)num102);
                                          players.addFLD_DEF_Percentage(0.05M);
                                          players.UpdatePowersAndStatus();
                                          this.CHAR_SENT_DATA_ATTACK(this, PeopleID, int_128, (int)num5, 0, 0, -1);
                                          return;
                                    }
                              case 0x7a637:
                                    {
                                          if (players.Add_Status_List.ContainsKey(0x7a6fe))
                                          {
                                                players.Add_Status_List[0x7a6fe].THOI_GIAN_KET_THUC_SU_KIEN();
                                          }
                                          if (players.Add_Status_List.ContainsKey(0x7a637))
                                          {
                                                players.Add_Status_List[0x7a637].THOI_GIAN_KET_THUC_SU_KIEN();
                                          }
                                          if (players.Add_Status_List.ContainsKey(0x7a636))
                                          {
                                                players.Add_Status_List[0x7a636].THOI_GIAN_KET_THUC_SU_KIEN();
                                          }
                                          double num103 = 600000.0;
                                          num103 *= 1.0 + base.Y_hap_tinh_dai_phap;
                                          Additional_Sate_Class class28 = new Additional_Sate_Class(players, (int)num103, int_128, 0);
                                          players.Add_Status_List.Add(int_128, class28);
                                          players.Status_Effect(BitConverter.GetBytes(int_128), 1, (int)num103);
                                          players.addFLD_DEF_Percentage(0.15M);
                                          players.UpdatePowersAndStatus();
                                          this.CHAR_SENT_DATA_ATTACK(this, PeopleID, int_128, (int)num5, 0, 0, -1);
                                          return;
                                    }
                              case 0x7a699:
                                    {
                                          if (players.Add_Status_List.ContainsKey(0x7a699))
                                          {
                                                players.Add_Status_List[0x7a699].THOI_GIAN_KET_THUC_SU_KIEN();
                                          }
                                          if (players.Add_Status_List.ContainsKey(0x7a762))
                                          {
                                                players.Add_Status_List[0x7a762].THOI_GIAN_KET_THUC_SU_KIEN();
                                          }
                                          double num104 = 600000.0;
                                          num104 *= 1.0 + base.Y_hap_tinh_dai_phap;
                                          Additional_Sate_Class class29 = new Additional_Sate_Class(players, (int)num104, int_128, 0);
                                          players.Add_Status_List.Add(int_128, class29);
                                          players.Status_Effect(BitConverter.GetBytes(int_128), 1, (int)num104);
                                          players.FLD_them_vao_ti_le_phan_tram_sinh_menh += 0.1;
                                          players.UpdatePowersAndStatus();
                                          this.CHAR_SENT_DATA_ATTACK(this, PeopleID, int_128, (int)num5, 0, 0, -1);
                                          return;
                                    }
                              case 0x7a69a:
                                    {
                                          if (players.Add_Status_List.ContainsKey(0x7a69a))
                                          {
                                                players.Add_Status_List[0x7a69a].THOI_GIAN_KET_THUC_SU_KIEN();
                                          }
                                          if (players.Add_Status_List.ContainsKey(0x7a763))
                                          {
                                                players.Add_Status_List[0x7a763].THOI_GIAN_KET_THUC_SU_KIEN();
                                          }
                                          double num105 = 600000.0;
                                          num105 *= 1.0 + base.Y_hap_tinh_dai_phap;
                                          Additional_Sate_Class class30 = new Additional_Sate_Class(players, (int)num105, int_128, 0);
                                          players.Add_Status_List.Add(int_128, class30);
                                          players.Status_Effect(BitConverter.GetBytes(int_128), 1, (int)num105);
                                          players.FLD_them_vao_ti_le_phan_tram_ne_tranh += 0.1;
                                          players.UpdatePowersAndStatus();
                                          this.CHAR_SENT_DATA_ATTACK(this, PeopleID, int_128, (int)num5, 0, 0, -1);
                                          return;
                                    }
                              case 0x7a69b:
                                    {
                                          if (players.Add_Status_List.ContainsKey(0x7a69b))
                                          {
                                                players.Add_Status_List[0x7a69b].THOI_GIAN_KET_THUC_SU_KIEN();
                                          }
                                          if (players.Add_Status_List.ContainsKey(0x7a761))
                                          {
                                                players.Add_Status_List[0x7a761].THOI_GIAN_KET_THUC_SU_KIEN();
                                          }
                                          double num106 = 600000.0;
                                          num106 *= 1.0 + base.Y_hap_tinh_dai_phap;
                                          Additional_Sate_Class class31 = new Additional_Sate_Class(players, (int)num106, int_128, 0);
                                          players.Add_Status_List.Add(int_128, class31);
                                          players.Status_Effect(BitConverter.GetBytes(int_128), 1, (int)num106);
                                          players.FLD_them_vao_ti_le_phan_tram_HP_han_muc_toi_da += 0.1;
                                          players.UpdateHP_MP_SP();
                                          this.CHAR_SENT_DATA_ATTACK(this, PeopleID, int_128, (int)num5, 0, 0, -1);
                                          return;
                                    }
                              default:
                                    goto Label_64C4;
                        }
                        players.Increase_HP((int)num);
                        Label_58EC:
                        players.UpdateHP_MP_SP();
                        this.CHAR_SENT_DATA_ATTACK(this, PeopleID, int_128, (int)num5, 0, 0, -1);
                        return;
                        Label_5906:
                        players.Increase_HP((int)num2);
                        Label_590E:
                        players.UpdateHP_MP_SP();
                        this.CHAR_SENT_DATA_ATTACK(this, PeopleID, int_128, (int)num5, 0, 0, -1);
                        return;
                        Label_5928:
                        if (num3 < base.Y_van_vat_hoi_xuan)
                        {
                              base.Show_Char(players.UserSessionID, 150);
                              players.Increase_HP(((int)num4) * 2);
                        }
                        else
                        {
                              players.Increase_HP((int)num4);
                        }
                        players.UpdateHP_MP_SP();
                        this.CHAR_SENT_DATA_ATTACK(this, PeopleID, int_128, (int)num5, 0, 0, -1);
                        return;
                        Label_5974:
                        if (num7 > 0x7a763)
                        {
                              goto Label_63A1;
                        }
                        if (num7 != 0x7a6fd)
                        {
                              switch (num7)
                              {
                                    case 0x7a761:
                                          goto Label_5DCE;

                                    case 0x7a762:
                                          goto Label_5FBF;

                                    case 0x7a763:
                                          goto Label_61B0;

                                    case 0x7a6fe:
                                          goto Label_5B97;
                              }
                              goto Label_64C4;
                        }
                        double num107 = 600000.0;
                        num107 *= 1.0 + base.Y_hap_tinh_dai_phap;
                        if (base.TO_DOI_ID != 0)
                        {
                              TO_DOI_CLASS to_doi_class6;
                              if (World.W_TO_DOI.TryGetValue(base.TO_DOI_ID, out to_doi_class6))
                              {
                                    foreach (Players players9 in to_doi_class6.dictionary_0.Values)
                                    {
                                          if (this.TRA_TIM_PHAM_VI_NGUOI_CHOI(400, players9))
                                          {
                                                if (players9.Add_Status_List.ContainsKey(0x7a635))
                                                {
                                                      players.Add_Status_List[0x7a635].THOI_GIAN_KET_THUC_SU_KIEN();
                                                }
                                                if (players9.Add_Status_List.ContainsKey(0x7a6fd))
                                                {
                                                      players9.Add_Status_List[0x7a6fd].THOI_GIAN_KET_THUC_SU_KIEN();
                                                }
                                                Additional_Sate_Class class32 = new Additional_Sate_Class(players9, (int)num107, int_128, 0);
                                                players9.Add_Status_List.Add(int_128, class32);
                                                players9.Status_Effect(BitConverter.GetBytes(int_128), 1, (int)num107);
                                                players9.addFLD_ATT_Percentage(0.1M);
                                                players9.UpdatePowersAndStatus();
                                                players9.GUI_DI_QUAN_CONG_CONG_KICH_SO_LIEU(this, to_doi_class6, players9.UserSessionID, int_128, (int)num5, 0);
                                          }
                                    }
                              }
                        }
                        else
                        {
                              if (players.Add_Status_List.ContainsKey(0x7a635))
                              {
                                    players.Add_Status_List[0x7a635].THOI_GIAN_KET_THUC_SU_KIEN();
                              }
                              if (players.Add_Status_List.ContainsKey(0x7a6fd))
                              {
                                    players.Add_Status_List[0x7a6fd].THOI_GIAN_KET_THUC_SU_KIEN();
                              }
                              Additional_Sate_Class class33 = new Additional_Sate_Class(players, (int)num107, int_128, 0);
                              players.Add_Status_List.Add(int_128, class33);
                              players.Status_Effect(BitConverter.GetBytes(int_128), 1, (int)num107);
                              players.addFLD_ATT_Percentage(0.1M);
                              players.UpdatePowersAndStatus();
                              this.CHAR_SENT_DATA_ATTACK(this, PeopleID, int_128, (int)num5, 0, 0, -1);
                        }
                        return;
                        Label_5B97:
                        num108 = 600000.0;
                        num108 *= 1.0 + base.Y_hap_tinh_dai_phap;
                        if (base.TO_DOI_ID != 0)
                        {
                              TO_DOI_CLASS to_doi_class7;
                              if (World.W_TO_DOI.TryGetValue(base.TO_DOI_ID, out to_doi_class7))
                              {
                                    foreach (Players players10 in to_doi_class7.dictionary_0.Values)
                                    {
                                          if (this.TRA_TIM_PHAM_VI_NGUOI_CHOI(400, players10))
                                          {
                                                if (players10.Add_Status_List.ContainsKey(0x7a636))
                                                {
                                                      players10.Add_Status_List[0x7a636].THOI_GIAN_KET_THUC_SU_KIEN();
                                                }
                                                if (players10.Add_Status_List.ContainsKey(0x7a6fe))
                                                {
                                                      players10.Add_Status_List[0x7a6fe].THOI_GIAN_KET_THUC_SU_KIEN();
                                                }
                                                if (players10.Add_Status_List.ContainsKey(0x7a637))
                                                {
                                                      players10.Add_Status_List[0x7a637].THOI_GIAN_KET_THUC_SU_KIEN();
                                                }
                                                Additional_Sate_Class class34 = new Additional_Sate_Class(players10, (int)num108, int_128, 0);
                                                players10.Add_Status_List.Add(int_128, class34);
                                                players10.Status_Effect(BitConverter.GetBytes(int_128), 1, (int)num108);
                                                players10.addFLD_DEF_Percentage(0.15M);
                                                players10.UpdatePowersAndStatus();
                                                players10.GUI_DI_QUAN_CONG_CONG_KICH_SO_LIEU(this, to_doi_class7, players10.UserSessionID, int_128, (int)num5, 0);
                                          }
                                    }
                              }
                        }
                        else
                        {
                              if (players.Add_Status_List.ContainsKey(0x7a636))
                              {
                                    players.Add_Status_List[0x7a636].THOI_GIAN_KET_THUC_SU_KIEN();
                              }
                              if (players.Add_Status_List.ContainsKey(0x7a6fe))
                              {
                                    players.Add_Status_List[0x7a6fe].THOI_GIAN_KET_THUC_SU_KIEN();
                              }
                              if (players.Add_Status_List.ContainsKey(0x7a637))
                              {
                                    players.Add_Status_List[0x7a637].THOI_GIAN_KET_THUC_SU_KIEN();
                              }
                              Additional_Sate_Class class35 = new Additional_Sate_Class(players, (int)num108, int_128, 0);
                              players.Add_Status_List.Add(int_128, class35);
                              players.Status_Effect(BitConverter.GetBytes(int_128), 1, (int)num108);
                              players.addFLD_DEF_Percentage(0.15M);
                              players.UpdatePowersAndStatus();
                              this.CHAR_SENT_DATA_ATTACK(this, PeopleID, int_128, (int)num5, 0, 0, -1);
                        }
                        return;
                        Label_5DCE:
                        num109 = 600000.0;
                        num109 *= 1.0 + base.Y_hap_tinh_dai_phap;
                        if (base.TO_DOI_ID != 0)
                        {
                              TO_DOI_CLASS to_doi_class8;
                              if (World.W_TO_DOI.TryGetValue(base.TO_DOI_ID, out to_doi_class8))
                              {
                                    foreach (Players players11 in to_doi_class8.dictionary_0.Values)
                                    {
                                          if (this.TRA_TIM_PHAM_VI_NGUOI_CHOI(400, players11))
                                          {
                                                if (players11.Add_Status_List.ContainsKey(0x7a761))
                                                {
                                                      players11.Add_Status_List[0x7a761].THOI_GIAN_KET_THUC_SU_KIEN();
                                                }
                                                if (players11.Add_Status_List.ContainsKey(0x7a69b))
                                                {
                                                      players11.Add_Status_List[0x7a69b].THOI_GIAN_KET_THUC_SU_KIEN();
                                                }
                                                Additional_Sate_Class class36 = new Additional_Sate_Class(players11, (int)num109, int_128, 0);
                                                players11.Add_Status_List.Add(int_128, class36);
                                                players11.Status_Effect(BitConverter.GetBytes(int_128), 1, (int)num109);
                                                players11.FLD_them_vao_ti_le_phan_tram_HP_han_muc_toi_da += 0.1;
                                                players11.UpdateHP_MP_SP();
                                                players11.GUI_DI_QUAN_CONG_CONG_KICH_SO_LIEU(this, to_doi_class8, players11.UserSessionID, int_128, (int)num5, 0);
                                          }
                                    }
                              }
                        }
                        else
                        {
                              if (players.Add_Status_List.ContainsKey(0x7a761))
                              {
                                    players.Add_Status_List[0x7a761].THOI_GIAN_KET_THUC_SU_KIEN();
                              }
                              if (players.Add_Status_List.ContainsKey(0x7a69b))
                              {
                                    players.Add_Status_List[0x7a69b].THOI_GIAN_KET_THUC_SU_KIEN();
                              }
                              Additional_Sate_Class class37 = new Additional_Sate_Class(players, (int)num109, int_128, 0);
                              players.Add_Status_List.Add(int_128, class37);
                              players.Status_Effect(BitConverter.GetBytes(int_128), 1, (int)num109);
                              players.FLD_them_vao_ti_le_phan_tram_HP_han_muc_toi_da += 0.1;
                              players.UpdateHP_MP_SP();
                              this.CHAR_SENT_DATA_ATTACK(this, PeopleID, int_128, (int)num5, 0, 0, -1);
                        }
                        return;
                        Label_5FBF:
                        num110 = 600000.0;
                        num110 *= 1.0 + base.Y_hap_tinh_dai_phap;
                        if (base.TO_DOI_ID != 0)
                        {
                              TO_DOI_CLASS to_doi_class9;
                              if (World.W_TO_DOI.TryGetValue(base.TO_DOI_ID, out to_doi_class9))
                              {
                                    foreach (Players players12 in to_doi_class9.dictionary_0.Values)
                                    {
                                          if (this.TRA_TIM_PHAM_VI_NGUOI_CHOI(400, players12))
                                          {
                                                if (players12.Add_Status_List.ContainsKey(0x7a762))
                                                {
                                                      players12.Add_Status_List[0x7a762].THOI_GIAN_KET_THUC_SU_KIEN();
                                                }
                                                if (players12.Add_Status_List.ContainsKey(0x7a699))
                                                {
                                                      players12.Add_Status_List[0x7a699].THOI_GIAN_KET_THUC_SU_KIEN();
                                                }
                                                Additional_Sate_Class class38 = new Additional_Sate_Class(players12, (int)num110, int_128, 0);
                                                players12.Add_Status_List.Add(int_128, class38);
                                                players12.Status_Effect(BitConverter.GetBytes(int_128), 1, (int)num110);
                                                players12.FLD_them_vao_ti_le_phan_tram_sinh_menh += 0.1;
                                                players12.UpdatePowersAndStatus();
                                                players12.GUI_DI_QUAN_CONG_CONG_KICH_SO_LIEU(this, to_doi_class9, players12.UserSessionID, int_128, (int)num5, 0);
                                          }
                                    }
                              }
                        }
                        else
                        {
                              if (players.Add_Status_List.ContainsKey(0x7a699))
                              {
                                    players.Add_Status_List[0x7a699].THOI_GIAN_KET_THUC_SU_KIEN();
                              }
                              if (players.Add_Status_List.ContainsKey(0x7a762))
                              {
                                    players.Add_Status_List[0x7a762].THOI_GIAN_KET_THUC_SU_KIEN();
                              }
                              Additional_Sate_Class class39 = new Additional_Sate_Class(players, (int)num110, int_128, 0);
                              players.Add_Status_List.Add(int_128, class39);
                              players.Status_Effect(BitConverter.GetBytes(int_128), 1, (int)num110);
                              players.FLD_them_vao_ti_le_phan_tram_sinh_menh += 0.1;
                              players.UpdatePowersAndStatus();
                              this.CHAR_SENT_DATA_ATTACK(this, PeopleID, int_128, (int)num5, 0, 0, -1);
                        }
                        return;
                        Label_61B0:
                        num111 = 600000.0;
                        num111 *= 1.0 + base.Y_hap_tinh_dai_phap;
                        if (base.TO_DOI_ID != 0)
                        {
                              TO_DOI_CLASS to_doi_class10;
                              if (World.W_TO_DOI.TryGetValue(base.TO_DOI_ID, out to_doi_class10))
                              {
                                    foreach (Players players13 in to_doi_class10.dictionary_0.Values)
                                    {
                                          if (this.TRA_TIM_PHAM_VI_NGUOI_CHOI(400, players13))
                                          {
                                                if (players13.Add_Status_List.ContainsKey(0x7a69a))
                                                {
                                                      players13.Add_Status_List[0x7a69a].THOI_GIAN_KET_THUC_SU_KIEN();
                                                }
                                                if (players13.Add_Status_List.ContainsKey(0x7a763))
                                                {
                                                      players13.Add_Status_List[0x7a763].THOI_GIAN_KET_THUC_SU_KIEN();
                                                }
                                                Additional_Sate_Class class40 = new Additional_Sate_Class(players13, (int)num111, int_128, 0);
                                                players13.Add_Status_List.Add(int_128, class40);
                                                players13.Status_Effect(BitConverter.GetBytes(int_128), 1, (int)num111);
                                                players13.FLD_them_vao_ti_le_phan_tram_ne_tranh += 0.1;
                                                players13.UpdatePowersAndStatus();
                                                players13.GUI_DI_QUAN_CONG_CONG_KICH_SO_LIEU(this, to_doi_class10, players13.UserSessionID, int_128, (int)num5, 0);
                                          }
                                    }
                              }
                        }
                        else
                        {
                              if (players.Add_Status_List.ContainsKey(0x7a763))
                              {
                                    players.Add_Status_List[0x7a763].THOI_GIAN_KET_THUC_SU_KIEN();
                              }
                              if (players.Add_Status_List.ContainsKey(0x7a69a))
                              {
                                    players.Add_Status_List[0x7a69a].THOI_GIAN_KET_THUC_SU_KIEN();
                              }
                              Additional_Sate_Class class41 = new Additional_Sate_Class(players, (int)num111, int_128, 0);
                              players.Add_Status_List.Add(int_128, class41);
                              players.Status_Effect(BitConverter.GetBytes(int_128), 1, (int)num111);
                              players.FLD_them_vao_ti_le_phan_tram_ne_tranh += 0.1;
                              players.UpdatePowersAndStatus();
                              this.CHAR_SENT_DATA_ATTACK(this, PeopleID, int_128, (int)num5, 0, 0, -1);
                        }
                        return;
                        Label_63A1:
                        if (num7 <= 0x92c71)
                        {
                              switch (num7)
                              {
                                    case 0x7a7c5:
                                          goto Label_8830;

                                    case 0x92c71:
                                          goto Label_63DB;
                              }
                        }
                        else
                        {
                              switch (num7)
                              {
                                    case 0x92c72:
                                          if ((base.FLD_TINH_NHAN == players.UserName) || (players.UserName == base.UserName))
                                          {
                                                goto Label_87A6;
                                          }
                                          return;

                                    case 0xdc17d:
                                          {
                                                if (players.Add_Status_List.ContainsKey(0xdc17d))
                                                {
                                                      players.Add_Status_List[0xdc17d].THOI_GIAN_KET_THUC_SU_KIEN();
                                                }
                                                double num112 = 3000.0;
                                                Additional_Sate_Class class42 = new Additional_Sate_Class(players, (int)num112, int_128, 0);
                                                players.Add_Status_List.Add(int_128, class42);
                                                players.Status_Effect(BitConverter.GetBytes(int_128), 1, (int)num112);
                                                players.addFLD_DEF_Percentage(0.1M);
                                                players.UpdatePowersAndStatus();
                                                this.CHAR_SENT_DATA_ATTACK(this, PeopleID, int_128, (int)num5, 0, 0, -1);
                                                return;
                                          }
                              }
                        }
                        goto Label_64C4;
                        Label_63DB:
                        if ((base.FLD_TINH_NHAN == players.UserName) || (players.UserName == base.UserName))
                        {
                              goto Label_8722;
                        }
                        return;
                        Label_64C4:
                        if ((World.PK_khoang_cach_khong_che_co_hay_khong_mo_ra != 0) && (int_128 != 0xc3a79))
                        {
                              if (((base.Player_Job != 4) && (base.Player_Job != 5)) && (base.Player_Job != 7))
                              {
                                    if (Math.Sqrt(Math.Pow((double)(base.CharacterCoords_X - players.CharacterCoords_X), 2.0) + Math.Pow((double)(base.CharacterCoords_Y - players.CharacterCoords_Y), 2.0)) >= World.Nhan_vat_gan_nguoi_nghe_nghiep_cong_kich_khoang_cach)
                                    {
                                          return;
                                    }
                              }
                              else if (Math.Sqrt(Math.Pow((double)(base.CharacterCoords_X - players.CharacterCoords_X), 2.0) + Math.Pow((double)(base.CharacterCoords_Y - players.CharacterCoords_Y), 2.0)) >= World.Nhan_vat_trinh_dien_nghe_nghiep_Cong_kich_khoang_cach)
                              {
                                    return;
                              }
                        }
                        if (!this.PHAT_DONG_KHU_AN_TOAN_TOA_DO(players))
                        {
                              if ((base.int_16 != 1) && (players.int_16 != 1))
                              {
                                    if ((base.PlayerShop == null) && (players.PlayerShop == null))
                                    {
                                          if (players.Client.offLineStatus)
                                          {
                                                if (World.Co_hay_khong_bat_dau_dung_cach_tuyen_Treo_thiet_bi_nhac_nho != 0)
                                                {
                                                      base.GameMessage(World.Cach_tuyen_Treo_thiet_bi_Nhac_nho_noi_dung ?? "", 10, "Goodbye prompt");
                                                }
                                                return;
                                          }
                                          if ((base.CharacterCoords_Map == 0x321) && (base.Player_Zx == players.Player_Zx))
                                          {
                                                return;
                                          }
                                          if (base.PlayerPKMode == 1)
                                          {
                                                if ((base.Evil_mode != 0) && (players.Evil_mode != 0))
                                                {
                                                      if (base.Evil_mode == players.Evil_mode)
                                                      {
                                                            return;
                                                      }
                                                }
                                                else if (base.Player_Zx == players.Player_Zx)
                                                {
                                                      return;
                                                }
                                          }
                                          if (((players.int_4 != 8) && !this.PHAT_DONG_KHU_AN_TOAN_TOA_DO_2(this)) && (PeopleID != base.UserSessionID))
                                          {
                                                char[] separator = new char[] { ';' };
                                                string[] strArray = World.Cam_PK_ban_do.Split(separator);
                                                if ((int.Parse(strArray[0]) == 0) || (((base.CharacterCoords_Map != int.Parse(strArray[0])) && (base.CharacterCoords_Map != int.Parse(strArray[1]))) && (base.CharacterCoords_Map != int.Parse(strArray[2]))))
                                                {
                                                      char[] chArray2 = new char[] { ',' };
                                                      string[] strArray2 = World.Nguc_giam_ban_do.Trim().Split(chArray2);
                                                      if (base.CharacterCoords_Map != int.Parse(strArray2[0]))
                                                      {
                                                            if (((players.Player_FLD_LEVEL < 0x23) && (base.CharacterCoords_Map != World.Khieu_chien_ban_do_so_hieu)) && (players.CharacterCoords_Map != World.Khieu_chien_ban_do_so_hieu))
                                                            {
                                                                  base.GameMessage("This service enable new protected mode, can not attack the player 35 or less!", 9, "system hint");
                                                            }
                                                            else if (((Math.Abs((int)(base.Player_FLD_LEVEL - players.Player_FLD_LEVEL)) > World.PK_Dang_cap_chenh_lech) && (base.CharacterCoords_Map != World.Khieu_chien_ban_do_so_hieu)) && (players.CharacterCoords_Map != World.Khieu_chien_ban_do_so_hieu))
                                                            {
                                                                  base.GameMessage("The two sides can not rank much difference PK! ! ! ! Note: Level difference" + World.PK_Dang_cap_chenh_lech + "Within level to PK", 9, "system hint");
                                                            }
                                                            else
                                                            {
                                                                  TO_DOI_CLASS to_doi_class;
                                                                  double num8 = players.FLD_BasicCharDefense;
                                                                  double num9 = base.FLD_BasicCharAttack;
                                                                  if ((base.int_109 != 0) && (random.Next(0, 80) <= base.int_109))
                                                                  {
                                                                        num8 -= num8 * 0.3;
                                                                        base.Show_Char(PeopleID, 0x191);
                                                                  }
                                                                  if ((((World.TBL_KONGFU.TryGetValue(int_128, out tbl_xwwl_kongfu) && (tbl_xwwl_kongfu.FLD_AT != 0)) && ((tbl_xwwl_kongfu.FLD_PID != 0x69016) && (tbl_xwwl_kongfu.FLD_PID != 0x6b726))) && (((tbl_xwwl_kongfu.FLD_PID != 0x6907a) && (tbl_xwwl_kongfu.FLD_PID != 0x6b78a)) && ((tbl_xwwl_kongfu.FLD_PID != 0x690de) && (tbl_xwwl_kongfu.FLD_PID != 0x6b7ee)))) && ((tbl_xwwl_kongfu.FLD_PID != 0x69142) && (tbl_xwwl_kongfu.FLD_PID != 0x6b852)))
                                                                  {
                                                                        int num113 = (int)DateTime.Now.Subtract(tbl_xwwl_kongfu.FLD_CDSKILL).TotalSeconds;
                                                                        if (num113 < (tbl_xwwl_kongfu.FLD_CDTIME / 0x3e8))
                                                                        {
                                                                              base.GameMessage("Thoi gian su dung vo cong con " + ((tbl_xwwl_kongfu.FLD_CDTIME / 0x3e8) - num113) + " giay !!", 9, "Msg");
                                                                              return;
                                                                        }
                                                                        tbl_xwwl_kongfu.FLD_CDSKILL = DateTime.Now;
                                                                  }
                                                                  if (((base.Player_Job == 1) || (base.Player_Job == 8)) && ((base.Pha_giap_ty_le != 0.0) && (random.Next(0, 0x65) < base.Pha_giap_ty_le)))
                                                                  {
                                                                        num8 *= 0.3;
                                                                        base.Show_Char(PeopleID, 0x10);
                                                                  }
                                                                  if (base.Player_Job == 2)
                                                                  {
                                                                        double num114 = random.NextDouble() * 100.0;
                                                                        double num115 = random.Next(0, 120);
                                                                        if ((base.Kiem_khach_Vo_kien_bat_toi != 0.0) && (num114 < base.Kiem_khach_Vo_kien_bat_toi))
                                                                        {
                                                                              base.Show_Char(PeopleID, 120);
                                                                              num8 *= 0.5;
                                                                        }
                                                                        if ((base.Kiem_khach_thang_thien_1_khi_cong_Thua_thang_truy_kich != 0.0) && (num115 < base.Kiem_khach_thang_thien_1_khi_cong_Thua_thang_truy_kich))
                                                                        {
                                                                              base.Show_Char(PeopleID, 120);
                                                                              num8 -= (num8 * base.Kiem_khach_thang_thien_1_khi_cong_Thua_thang_truy_kich) * 0.01;
                                                                        }
                                                                  }
                                                                  if (((players.Player_Job == 3) && (players.Thuong_khach_Chuyen_cong_vi_thu != 0.0)) && (random.Next(0, 0x8d) < players.Thuong_khach_Chuyen_cong_vi_thu))
                                                                  {
                                                                        players.Show_Char(base.UserSessionID, 130);
                                                                        num8 += players.FLD_ATTACK / 3;
                                                                  }
                                                                  if (base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].ItemPropertyType == 1)
                                                                  {
                                                                        num8 -= num8 * (base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].ItemPropertyNumber * 0.01);
                                                                  }
                                                                  if (players.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[0].ItemPropertyType == 1)
                                                                  {
                                                                        num9 -= num9 * (players.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[0].ItemPropertyNumber * 0.01);
                                                                  }
                                                                  if (((base.Player_Job == 1) || (base.Player_Job == 8)) && (base.Toi_thieu_cong_kich != 0.0))
                                                                  {
                                                                        num9 += num9 * base.Toi_thieu_cong_kich;
                                                                  }
                                                                  if (((base.Player_Job == 2) || (base.Player_Job == 9)) && (base.Toi_thieu_cong_kich != 0.0))
                                                                  {
                                                                        num9 += num9 * base.Toi_thieu_cong_kich;
                                                                  }
                                                                  if ((base.Player_Job == 3) && (base.Toi_thieu_cong_kich != 0.0))
                                                                  {
                                                                        num9 += num9 * base.Toi_thieu_cong_kich;
                                                                  }
                                                                  if ((base.Player_Job == 4) && (base.Cung_thu_Ngung_than_tu_khi != 0.0))
                                                                  {
                                                                        num9 += num9 * base.Cung_thu_Ngung_than_tu_khi;
                                                                  }
                                                                  if ((base.Player_Job == 5) && (base.Toi_thieu_cong_kich != 0.0))
                                                                  {
                                                                        num9 += num9 * base.Toi_thieu_cong_kich;
                                                                  }
                                                                  if ((base.Player_Job == 6) && (base.Toi_thieu_cong_kich != 0.0))
                                                                  {
                                                                        num9 += num9 * base.Toi_thieu_cong_kich;
                                                                  }
                                                                  if (((base.Dao_khach_thang_thien_1_khi_cong_Don_xuat_nghich_canh != 0.0) && (tbl_xwwl_kongfu.FLD_VO_CONG_LOAI_HINH == 3)) && ((base.class79_0[3, tbl_xwwl_kongfu.FLD_INDEX].VO_CONG_THU_BAC >= 5) && (random.Next(0, 120) < base.Dao_khach_thang_thien_1_khi_cong_Don_xuat_nghich_canh)))
                                                                  {
                                                                        base.Show_Char(PeopleID, 310);
                                                                        if (base.Add_Status_List.ContainsKey(0xaaf96))
                                                                        {
                                                                              base.Add_Status_List[0xaaf96].THOI_GIAN_KET_THUC_SU_KIEN();
                                                                        }
                                                                        Additional_Sate_Class class43 = new Additional_Sate_Class(this, 0x2af8, 0xaaf96, 1);
                                                                        base.Add_Status_List.Add(class43.FLD_PID, class43);
                                                                        base.FLD_nhan_vat_vo_cong_luc_cong_kich_tang_cuong_ti_le_phan_tram += 0.3;
                                                                        base.addFLD_DEF_Percentage(0.1M);
                                                                        this.Status_Effect(BitConverter.GetBytes(0xaaf96), 1, 0x2af8);
                                                                        base.UpdatePowersAndStatus();
                                                                  }
                                                                  if (base.Player_Job == 7)
                                                                  {
                                                                        if (base.Toi_thieu_cong_kich != 0.0)
                                                                        {
                                                                              num9 += num9 * base.Toi_thieu_cong_kich;
                                                                        }
                                                                        if ((!base.Add_Status_List.ContainsKey(0xdbd31) && !base.Add_Status_List.ContainsKey(0xdbd32)) && !base.Add_Status_List.ContainsKey(0xdbd33))
                                                                        {
                                                                              int num116 = 0;
                                                                              int num117 = random.Next(0, 100);
                                                                              if (random.Next(0, 0x6f) <= (base.Cam_su_Nhat_am_xuat_kich * 100.0))
                                                                              {
                                                                                    base.Show_Char(PeopleID, 0x57);
                                                                                    if (num117 <= 0x21)
                                                                                    {
                                                                                          num116 = 0xdbd31;
                                                                                    }
                                                                                    else if ((num117 >= 0x21) && (num117 <= 0x42))
                                                                                    {
                                                                                          num116 = 0xdbd32;
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                          num116 = 0xdbd33;
                                                                                    }
                                                                                    Additional_Sate_Class class44 = new Additional_Sate_Class(this, 0xea60, num116, 0);
                                                                                    base.Add_Status_List.Add(num116, class44);
                                                                                    this.Status_Effect(BitConverter.GetBytes(num116), 1, 0xea60);
                                                                                    base.Update_Figure_Data(this);
                                                                              }
                                                                        }
                                                                        if (base.Add_Status_List.ContainsKey(0xdbd31))
                                                                        {
                                                                              int num118 = random.Next(0, 11);
                                                                              int num119 = random.Next(0, 0x65);
                                                                              int num120 = random.Next(0, 0x65);
                                                                              int num121 = random.Next(0, 0x65);
                                                                              base.Cam_su_Tam_hoa_huyen_phat_dong_xac_suat = (base.Cam_su_Cam_thanh_qua_nguyet * 0.005) * 100.0;
                                                                              if (random.Next(0, 0x65) <= (((int)(base.Cam_su_Loan_phuong_hoa_minh * 100.0)) + ((int)(base.Cam_su_thang_thien_1_khi_cong_Phi_hoa_diem_thuy * 0.2))))
                                                                              {
                                                                                    base.Cam_su_Tam_hoa_huyen_phat_dong_xac_suat *= 2.0;
                                                                              }
                                                                              if (num119 <= base.Cam_su_Tam_hoa_huyen_phat_dong_xac_suat)
                                                                              {
                                                                                    if ((num120 <= base.Cam_su_Sat_am_cam_khuc) && !players.threadSafeDictionary_4.ContainsKey(11))
                                                                                    {
                                                                                          double num122 = 10000.0;
                                                                                          num122 += base.Cam_su_Sat_am_cam_khuc * 1000.0;
                                                                                          DI_THUONG_TRANG_THAI_NEW di_thuong_trang_thai_new20 = new DI_THUONG_TRANG_THAI_NEW(players, (int)num122, 11, 0);
                                                                                          players.threadSafeDictionary_4.Add(11, di_thuong_trang_thai_new20);
                                                                                    }
                                                                                    if ((num121 <= base.Cam_su_Sat_menh_cam_thanh) && !players.threadSafeDictionary_4.ContainsKey(9))
                                                                                    {
                                                                                          double num123 = 10000.0;
                                                                                          num123 += base.Cam_su_Sat_menh_cam_thanh * 1000.0;
                                                                                          DI_THUONG_TRANG_THAI_NEW di_thuong_trang_thai_new21 = new DI_THUONG_TRANG_THAI_NEW(players, (int)num123, 9, 0);
                                                                                          players.threadSafeDictionary_4.Add(9, di_thuong_trang_thai_new21);
                                                                                          players.DLL_FLD_THEM_VAO_TI_LE_PHAN_TRAM_PHONG_NGU(0.07M);
                                                                                    }
                                                                                    if ((num118 == 10) && !players.threadSafeDictionary_4.ContainsKey(10))
                                                                                    {
                                                                                          DI_THUONG_TRANG_THAI_NEW di_thuong_trang_thai_new22 = new DI_THUONG_TRANG_THAI_NEW(players, 0x2710, 10, (int)num5);
                                                                                          if (World.Co_hay_khong_bat_dau_dung_di_thuong_xuat_huyet != 0)
                                                                                          {
                                                                                                di_thuong_trang_thai_new22.method_0(num5);
                                                                                          }
                                                                                          players.threadSafeDictionary_4.Add(10, di_thuong_trang_thai_new22);
                                                                                    }
                                                                                    if (!players.threadSafeDictionary_4.ContainsKey(9) && !players.threadSafeDictionary_4.ContainsKey(11))
                                                                                    {
                                                                                          if (num119 <= 50)
                                                                                          {
                                                                                                double num124 = 10000.0;
                                                                                                num124 += base.Cam_su_Sat_am_cam_khuc * 1000.0;
                                                                                                DI_THUONG_TRANG_THAI_NEW di_thuong_trang_thai_new23 = new DI_THUONG_TRANG_THAI_NEW(players, (int)num124, 11, 0);
                                                                                                players.threadSafeDictionary_4.Add(11, di_thuong_trang_thai_new23);
                                                                                          }
                                                                                          else
                                                                                          {
                                                                                                double num125 = 10000.0;
                                                                                                num125 += base.Cam_su_Sat_menh_cam_thanh * 1000.0;
                                                                                                DI_THUONG_TRANG_THAI_NEW di_thuong_trang_thai_new24 = new DI_THUONG_TRANG_THAI_NEW(players, (int)num125, 9, 0);
                                                                                                players.threadSafeDictionary_4.Add(9, di_thuong_trang_thai_new24);
                                                                                                players.DLL_FLD_THEM_VAO_TI_LE_PHAN_TRAM_PHONG_NGU(0.07M);
                                                                                          }
                                                                                    }
                                                                              }
                                                                        }
                                                                        num6 = base.Cam_su_Cam_thanh_qua_nguyet * 0.0086;
                                                                        if (base.Add_Status_List.ContainsKey(0xdbd32) && (random.Next(0, 0x79) <= (((int)(base.Cam_su_Loan_phuong_hoa_minh * 100.0)) + ((int)(base.Cam_su_thang_thien_1_khi_cong_Phi_hoa_diem_thuy * 0.2)))))
                                                                        {
                                                                              num6 *= 2.0 + (base.Cam_su_thang_thien_1_khi_cong_Phi_hoa_diem_thuy * 0.02);
                                                                        }
                                                                  }
                                                                  int num10 = 0;
                                                                  if (tbl_xwwl_kongfu.FLD_VO_CONG_LOAI_HINH == 3)
                                                                  {
                                                                        num10 = tbl_xwwl_kongfu.FLD_AT + (((base.class79_0[3, tbl_xwwl_kongfu.FLD_INDEX].VO_CONG_THU_BAC - 1) * base.class79_0[3, tbl_xwwl_kongfu.FLD_INDEX].FLD_MOI_CAP_THEM_NGUY_HAI) / 4);
                                                                  }
                                                                  else if (tbl_xwwl_kongfu.FLD_VO_CONG_LOAI_HINH == 2)
                                                                  {
                                                                        num10 = base.Phu_the_vo_cong_luc_cong_kich;
                                                                  }
                                                                  else if ((tbl_xwwl_kongfu.FLD_VO_CONG_LOAI_HINH == 0) && (base.class79_0[0, tbl_xwwl_kongfu.FLD_INDEX] != null))
                                                                  {
                                                                        if (base.class79_0[0, tbl_xwwl_kongfu.FLD_INDEX].VO_CONG_THU_BAC != 0)
                                                                        {
                                                                              num10 = tbl_xwwl_kongfu.FLD_AT + (((base.class79_0[0, tbl_xwwl_kongfu.FLD_INDEX].VO_CONG_THU_BAC - 1) * base.class79_0[0, tbl_xwwl_kongfu.FLD_INDEX].FLD_MOI_CAP_THEM_NGUY_HAI) / 4);
                                                                        }
                                                                  }
                                                                  else
                                                                  {
                                                                        num10 = tbl_xwwl_kongfu.FLD_AT;
                                                                  }
                                                                  num5 = (((num9 - num8) + (num10 * (((1.0 + base.FLD_trang_bi_luc_cong_kich_vo_cong_tang_cuong_ti_le_phan_tram) + (base.FLD_nhan_vat_vo_cong_luc_cong_kich_tang_cuong_ti_le_phan_tram * (1.0 + base.FLD_NHAN_VAT_KHI_CONG_LUC_CONG_KICH_VO_CONG_TANG_CUONG_TI_LE_PHAN_TRAM))) - ((1.0 + players.FLD_trang_bi_suc_phong_ngu_vo_cong_tang_cuong_ti_le_phan_tram) + (players.FLD_nhan_vat_vo_cong_suc_phong_ngu_tang_cuong_ti_le_phan_tram * ((1.0 + players.FLD_NHAN_VAT_KHI_CONG_LUC_PHONG_NGU_VO_CONG_TANG_CUONG_TI_LE_PHAN_TRAM) + players.SU_DO_THEM_VAO_SUC_PHONG_NGU_VO_CONG)))))) + (base.FLD_NHAN_VAT_CO_BAN_TRUNG_MUC_TIEU / 4)) - (players.FLD_NHAN_VAT_CO_BAN_NE_TRANH / 4);
                                                                  if ((base.Huyen_ti_chan_mach != 0.0) && (random.Next(0, 100) <= base.Huyen_ti_chan_mach))
                                                                  {
                                                                        base.Show_Char(PeopleID, 0x18a);
                                                                        if (base.Add_Status_List.ContainsKey(0xdc17d))
                                                                        {
                                                                              base.Add_Status_List[0xdc17d].THOI_GIAN_KET_THUC_SU_KIEN();
                                                                        }
                                                                        double num126 = 3000.0;
                                                                        Additional_Sate_Class class45 = new Additional_Sate_Class(this, (int)num126, 0xdc17d, 0);
                                                                        base.Add_Status_List.Add(0xdc17d, class45);
                                                                        this.Status_Effect(BitConverter.GetBytes(0xdc17d), 1, (int)num126);
                                                                        base.addFLD_DEF_Percentage(0.1M);
                                                                        base.UpdatePowersAndStatus();
                                                                  }
                                                                  if ((base.Vong_mai_thiem_tan != 0.0) && (random.Next(0, 100) <= base.Vong_mai_thiem_tan))
                                                                  {
                                                                        base.Show_Char(PeopleID, 0x162);
                                                                        if (base.Add_Status_List.ContainsKey(0x7a7c5))
                                                                        {
                                                                              base.Add_Status_List[0x7a7c5].THOI_GIAN_KET_THUC_SU_KIEN();
                                                                        }
                                                                        double num127 = 3000.0;
                                                                        Additional_Sate_Class class46 = new Additional_Sate_Class(this, (int)num127, 0x7a7c5, 0);
                                                                        base.Add_Status_List.Add(0x7a7c5, class46);
                                                                        this.Status_Effect(BitConverter.GetBytes(0x7a7c5), 1, (int)num127);
                                                                        base.Nhan_vat_them_vao_lon_nhat_HP += 0x3e8;
                                                                        this.UpdateHP_MP_SP();
                                                                  }
                                                                  if ((base.Liet_nhat_viem_viem != 0.0) && (random.Next(0, 100) <= base.Liet_nhat_viem_viem))
                                                                  {
                                                                        base.Show_Char(PeopleID, 0x158);
                                                                  }
                                                                  if (((base.Man_nguyet_cuong_phong != 0.0) && (random.Next(0, 100) <= base.Man_nguyet_cuong_phong)) && World.W_TO_DOI.TryGetValue(base.TO_DOI_ID, out to_doi_class))
                                                                  {
                                                                        foreach (Players players14 in to_doi_class.dictionary_0.Values)
                                                                        {
                                                                              if (this.TRA_TIM_PHAM_VI_NGUOI_CHOI(300, players14))
                                                                              {
                                                                                    if (players14.Add_Status_List.ContainsKey(0xaae6e))
                                                                                    {
                                                                                          return;
                                                                                    }
                                                                                    players14.Show_Char(players14.UserSessionID, 0x162);
                                                                                    Additional_Sate_Class class47 = new Additional_Sate_Class(players14, 0xbb8, 0xaae6e, 0);
                                                                                    players14.Add_Status_List.Add(0xaae6e, class47);
                                                                                    if (players14.Player_Job == 3)
                                                                                    {
                                                                                          players14.addFLD_ATT_Percentage(0.29M);
                                                                                          players14.addFLD_DEF_Percentage(0.29M);
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                          players14.addFLD_ATT_Percentage(0.25M);
                                                                                          players14.addFLD_DEF_Percentage(0.25M);
                                                                                    }
                                                                                    players14.Status_Effect(BitConverter.GetBytes(0xaae6e), 1, 0xbb8);
                                                                                    players14.UpdatePowersAndStatus();
                                                                              }
                                                                        }
                                                                  }
                                                                  if ((base.Truong_hong_quan_thien != 0.0) && (random.Next(0, 100) <= base.Truong_hong_quan_thien))
                                                                  {
                                                                        foreach (Players players15 in World.allConnectedChars.Values)
                                                                        {
                                                                              if (this.TRA_TIM_PHAM_VI_NGUOI_CHOI(30, players15) && (base.Player_Zx == players15.Player_Zx))
                                                                              {
                                                                                    if (players15.Add_Status_List.ContainsKey(0xab0bb))
                                                                                    {
                                                                                          players15.Add_Status_List[0xab0bb].THOI_GIAN_KET_THUC_SU_KIEN();
                                                                                    }
                                                                                    Additional_Sate_Class class48 = new Additional_Sate_Class(players15, 0xbb8, 0xab0bb, 1);
                                                                                    players15.Add_Status_List.Add(0xab0bb, class48);
                                                                                    players15.FLD_nhan_vat_them_vao_cong_kich += 100;
                                                                                    players15.FLD_nhan_vat_them_vao_phong_ngu += 100;
                                                                                    players15.Nhan_vat_them_vao_lon_nhat_HP += 0x3e8;
                                                                                    players15.Nhan_vat_them_vao_lon_nhat_MP += 0x3e8;
                                                                                    players15.Status_Effect(BitConverter.GetBytes(0xab0bb), 1, 0xbb8);
                                                                                    players15.UpdatePowersAndStatus();
                                                                                    players15.UpdateHP_MP_SP();
                                                                                    players15.Show_Char(players15.UserSessionID, 0x25b);
                                                                              }
                                                                        }
                                                                  }
                                                                  if ((base.Ai_hong_bien_da != 0.0) && (random.Next(0, 100) <= base.Ai_hong_bien_da))
                                                                  {
                                                                        base.Show_Char(PeopleID, 0x25c);
                                                                        foreach (Players players16 in World.allConnectedChars.Values)
                                                                        {
                                                                              if ((this.TRA_TIM_PHAM_VI_NGUOI_CHOI(30, players16) && (base.Player_Zx != players16.Player_Zx)) && (base.UserSessionID != players16.UserSessionID))
                                                                              {
                                                                                    if (!players16.threadSafeDictionary_4.ContainsKey(6))
                                                                                    {
                                                                                          DI_THUONG_TRANG_THAI_NEW di_thuong_trang_thai_new25 = new DI_THUONG_TRANG_THAI_NEW(players16, 0xbb8, 6, 0);
                                                                                          players16.threadSafeDictionary_4.Add(6, di_thuong_trang_thai_new25);
                                                                                          players16.FLD_them_vao_ti_le_phan_tram_HP_han_muc_toi_da -= 0.15;
                                                                                          if (players16.NHAN_VAT_HP > players16.NHAN_VAT_LON_NHAT_HP)
                                                                                          {
                                                                                                players16.NHAN_VAT_HP = players16.NHAN_VAT_LON_NHAT_HP;
                                                                                          }
                                                                                          players16.UpdateHP_MP_SP();
                                                                                    }
                                                                                    players16.Show_Char(players16.UserSessionID, 0x25c);
                                                                              }
                                                                        }
                                                                  }
                                                                  if ((base.Thang_thien_4_khi_cong_Doc_xa_xuat_dong != 0.0) && (random.Next(0, 100) <= base.Thang_thien_4_khi_cong_Doc_xa_xuat_dong))
                                                                  {
                                                                        players.Show_Char(players.UserSessionID, 0x139);
                                                                  }
                                                                  if ((base.Thang_thien_4_khi_cong_Hong_nguyet_cuong_phong != 0.0) && (random.Next(0, 100) <= base.Thang_thien_4_khi_cong_Hong_nguyet_cuong_phong))
                                                                  {
                                                                        foreach (Players players17 in World.allConnectedChars.Values)
                                                                        {
                                                                              if ((this.TRA_TIM_PHAM_VI_NGUOI_CHOI(30, players17) && (players17.Player_Job == base.Player_Job)) && ((base.Player_Zx == players17.Player_Zx) && players17.Add_Status_List.ContainsKey(0xaae6e)))
                                                                              {
                                                                                    players17.Show_Char(players17.UserSessionID, 0x139);
                                                                              }
                                                                        }
                                                                  }
                                                                  if ((base.Player_Job == 1) || (base.Player_Job == 8))
                                                                  {
                                                                        if (((base.Dao_khach_thang_thien_3_khi_cong_Pham_am_pha_kinh != 0.0) && (tbl_xwwl_kongfu.FLD_VO_CONG_LOAI_HINH == 3)) && ((base.class79_0[3, tbl_xwwl_kongfu.FLD_INDEX].VO_CONG_THU_BAC >= 5) && (random.Next(0, 120) < base.Dao_khach_thang_thien_3_khi_cong_Pham_am_pha_kinh)))
                                                                        {
                                                                              base.Show_Char(PeopleID, 0x138);
                                                                              num5 *= 1.5 + base.Phan_am_pha_kinh_thuong_ton;
                                                                        }
                                                                        if ((base.Dao_khach_Am_anh_tuyet_sat != 0.0) && (random.Next(0, 0x8d) < base.Dao_khach_Am_anh_tuyet_sat))
                                                                        {
                                                                              base.Show_Char(PeopleID, 0x12);
                                                                              num5 *= 1.0 + base.Toi_thieu_cong_kich;
                                                                        }
                                                                        if (((base.Han_bao_quan_Thien_ma_cuong_huyet != 0.0) && (random.Next(0, 0x83) < base.Han_bao_quan_Thien_ma_cuong_huyet)) && (tbl_xwwl_kongfu.FLD_CDTIME > 0x3e8))
                                                                        {
                                                                              base.Show_Char(PeopleID, 0xfc);
                                                                              num5 *= 1.4;
                                                                        }
                                                                        if (((base.Han_bao_quan_Thien_ma_cuong_huyet_2 != 0.0) && (random.Next(0, 0x8d) < base.Han_bao_quan_Thien_ma_cuong_huyet_2)) && (tbl_xwwl_kongfu.FLD_CDTIME > 0x3e8))
                                                                        {
                                                                              base.Show_Char(PeopleID, 0x4f1c);
                                                                              num5 *= 1.8;
                                                                        }
                                                                        if ((base.Han_bao_quan_Hanh_phong_long_vu != 0.0) && (random.Next(0, 0x8d) < base.Han_bao_quan_Hanh_phong_long_vu))
                                                                        {
                                                                              base.Show_Char(PeopleID, 600);
                                                                              num5 *= 1.25;
                                                                        }
                                                                        if ((base.Dao_khach_thang_thien_2_khi_cong_Cung_duong_mat_lo != 0.0) && (random.Next(0, 120) <= base.Dao_khach_thang_thien_2_khi_cong_Cung_duong_mat_lo))
                                                                        {
                                                                              base.Show_Char(PeopleID, 0x137);
                                                                              num5 *= 2.0;
                                                                        }
                                                                        if ((base.Vo_cong_chi_mang_ti_le != 0.0) && (random.Next(0, 0x97) < base.Vo_cong_chi_mang_ti_le))
                                                                        {
                                                                              base.Show_Char(PeopleID, 0x11);
                                                                              num5 *= 1.2;
                                                                        }
                                                                  }
                                                                  if ((base.Player_Job == 2) || (base.Player_Job == 9))
                                                                  {
                                                                        num5 *= 1.0 + base.SAT_THUONG_VO_CONG_TANG;
                                                                        random.NextDouble();
                                                                        random.NextDouble();
                                                                        random.NextDouble();
                                                                        double num128 = random.NextDouble() * 200.0;
                                                                        if (((tbl_xwwl_kongfu.FLD_VO_CONG_LOAI_HINH == 3) && (base.class79_0[3, tbl_xwwl_kongfu.FLD_INDEX].VO_CONG_THU_BAC >= 5)) && (base.Kiem_khach_thang_thien_1_khi_cong_Thua_thang_truy_kich > num128))
                                                                        {
                                                                              num5 *= 1.4;
                                                                              base.Show_Char(PeopleID, 0x141);
                                                                        }
                                                                        if ((((tbl_xwwl_kongfu.FLD_VO_CONG_LOAI_HINH == 3) && (base.class79_0[3, tbl_xwwl_kongfu.FLD_INDEX].VO_CONG_THU_BAC >= 5)) && (num5 <= 0.0)) && ((players.double_116 == 0.0) || (players.double_116 < 3.0)))
                                                                        {
                                                                              players.double_116++;
                                                                              players.double_115 += num5 * base.Kiem_Khach_thang_thien_2_khi_cong_Thien_dia_dong_tho;
                                                                        }
                                                                        if (players.double_116 != 0.0)
                                                                        {
                                                                              num5 += players.double_115;
                                                                              players.double_115 = 0.0;
                                                                              players.double_116 = 0.0;
                                                                        }
                                                                  }
                                                                  if (base.Player_Job == 3)
                                                                  {
                                                                        num5 *= 1.0 + base.Thuong_khach_Can_khon_na_di;
                                                                        if (base.Add_Status_List.ContainsKey(0xaae6e))
                                                                        {
                                                                              if (((base.Thuong_khach_thang_thien_3_khi_cong_No_y_chi_hong != 0.0) && (tbl_xwwl_kongfu.FLD_VO_CONG_LOAI_HINH == 3)) && ((base.class79_0[3, tbl_xwwl_kongfu.FLD_INDEX].VO_CONG_THU_BAC >= 5) && (random.Next(0, 0x79) < base.Thuong_khach_thang_thien_3_khi_cong_No_y_chi_hong)))
                                                                              {
                                                                                    num5 *= 1.5 + base.Tuc_gian_chi_hong_Them_vao_thuong_ton;
                                                                                    base.Show_Char(PeopleID, 0x14c);
                                                                              }
                                                                              if (((base.Thuong_khach_thang_thien_2_khi_cong_Di_thoi_vi_tien != 0.0) && (tbl_xwwl_kongfu.FLD_VO_CONG_LOAI_HINH == 3)) && ((base.class79_0[3, tbl_xwwl_kongfu.FLD_INDEX].VO_CONG_THU_BAC >= 5) && (random.Next(0, 0x6f) < (base.Thuong_khach_thang_thien_1_khi_cong_Pha_giap_thu_hon + base.Thuong_khach_thang_thien_2_khi_cong_Di_thoi_vi_tien))))
                                                                              {
                                                                                    double num129 = 0.4 + (base.Thuong_khach_thang_thien_2_khi_cong_Di_thoi_vi_tien * 0.01);
                                                                                    num5 += base.FLD_trang_bi_them_vao_phong_ngu * num129;
                                                                                    base.Show_Char(PeopleID, 330);
                                                                              }
                                                                        }
                                                                        if ((base.Thuong_khach_thang_thien_1_khi_cong_Pha_giap_thu_hon != 0.0) && (random.Next(0, 0x83) < base.Thuong_khach_thang_thien_1_khi_cong_Pha_giap_thu_hon))
                                                                        {
                                                                              num5 += base.FLD_trang_bi_them_vao_phong_ngu * 0.4;
                                                                              base.Show_Char(PeopleID, 330);
                                                                        }
                                                                  }
                                                                  if (base.Player_Job == 4)
                                                                  {
                                                                        num5 += base.Cung_thu_Due_loi_chi_tien + 1.0;
                                                                        if (((base.Cung_thu_thang_thien_3_khi_cong_Thien_ngoai_tam_thi != 0.0) && (base.Cung_thu_thang_thien_1_khi_cong_Tuyet_anh_xa_hon != 0.0)) && ((tbl_xwwl_kongfu.FLD_VO_CONG_LOAI_HINH == 3) && (base.class79_0[3, tbl_xwwl_kongfu.FLD_INDEX].VO_CONG_THU_BAC >= 5)))
                                                                        {
                                                                              int num130 = random.Next(0, 120);
                                                                              if ((num130 < base.Cung_thu_thang_thien_3_khi_cong_Thien_ngoai_tam_thi) && (num130 < base.Cung_thu_thang_thien_1_khi_cong_Tuyet_anh_xa_hon))
                                                                              {
                                                                                    base.Show_Char(PeopleID, 340);
                                                                                    base.Show_Char(PeopleID, 0x156);
                                                                                    num5 *= 1.8;
                                                                                    base.bool_8 = true;
                                                                              }
                                                                        }
                                                                        if ((base.Cung_thu_Vo_minh_am_thi != 0.0) && (random.Next(0, 0x6f) < (base.Cung_thu_Vo_minh_am_thi + World.CUNG_THU_VO_MINH_AM_THI_TY_LE)))
                                                                        {
                                                                              num5 *= 1.05 + (base.Cung_thu_Vo_minh_am_thi * 0.01);
                                                                              base.Show_Char(PeopleID, 0x31);
                                                                              base.bool_8 = true;
                                                                        }
                                                                        if ((base.Cung_thu_Tri_menh_tuyet_sat != 0.0) && (random.Next(0, 0x8d) < (base.Cung_thu_Tri_menh_tuyet_sat + World.CUNG_THU_TRI_MENH_TUYET_SAT_TY_LE)))
                                                                        {
                                                                              base.Show_Char(PeopleID, 140);
                                                                              num5 *= 1.5;
                                                                              base.bool_9 = true;
                                                                        }
                                                                  }
                                                                  if (base.Player_Job == 5)
                                                                  {
                                                                        num5 *= 1.0 + base.Y_truong_cong_kich_luc;
                                                                        if (((base.Y_thang_thien_3_khi_cong_Minh_kinh_chi_thuy != 0.0) && (tbl_xwwl_kongfu.FLD_VO_CONG_LOAI_HINH == 3)) && ((base.class79_0[3, tbl_xwwl_kongfu.FLD_INDEX].VO_CONG_THU_BAC >= 5) && (random.Next(0, 120) < base.Y_thang_thien_3_khi_cong_Minh_kinh_chi_thuy)))
                                                                        {
                                                                              base.Show_Char(PeopleID, 0x160);
                                                                              num5 *= 2.0;
                                                                        }
                                                                        if ((base.Y_thang_thien_2_khi_cong_vo_trung_sinh_huu != 0.0) && (random.Next(0, 120) < base.Y_thang_thien_2_khi_cong_vo_trung_sinh_huu))
                                                                        {
                                                                              base.Show_Char(PeopleID, 0x15f);
                                                                              num5 *= 1.3;
                                                                        }
                                                                        if ((base.Vo_cong_chi_mang_ti_le != 0.0) && (random.Next(0, 100) < base.Vo_cong_chi_mang_ti_le))
                                                                        {
                                                                              base.Show_Char(PeopleID, 0x11);
                                                                              num5 *= 1.2;
                                                                        }
                                                                  }
                                                                  if (base.Player_Job == 7)
                                                                  {
                                                                        num5 *= 1.0 + base.SAT_THUONG_VO_CONG_TANG;
                                                                        double num131 = random.NextDouble() * World.KHI_CONG_TI_LE_PHAN_TRAM;
                                                                        if ((base.Cam_su_kich_luc_cong_thanh != 0.0) && (num131 <= base.Cam_su_kich_luc_cong_thanh))
                                                                        {
                                                                              num5 *= 2.0;
                                                                              base.Show_Char(PeopleID, 0x58);
                                                                        }
                                                                  }
                                                                  if ((((base.Player_Job == 6) && (base.Thich_khach_thang_thien_3_khi_cong_Di_no_hoan_no != 0.0)) && ((this.int_127 == 5) && (tbl_xwwl_kongfu.FLD_VO_CONG_LOAI_HINH == 3))) && ((base.class79_0[3, tbl_xwwl_kongfu.FLD_INDEX].VO_CONG_THU_BAC >= 5) && (random.Next(0, 120) < base.Thich_khach_thang_thien_3_khi_cong_Di_no_hoan_no)))
                                                                  {
                                                                        base.Show_Char(PeopleID, 0x174);
                                                                        num5 *= this.int_127;
                                                                        this.int_127 = 0;
                                                                        this.UpdateHP_MP_SP();
                                                                  }
                                                                  if (((players.Player_Job == 2) || (players.Player_Job == 9)) && ((players.Kiem_khach_Ho_than_cuong_khi != 0.0) && (random.Next(0, 130) < players.Kiem_khach_Ho_than_cuong_khi)))
                                                                  {
                                                                        num5 *= 0.5;
                                                                        players.Show_Char(PeopleID, 0x19);
                                                                  }
                                                                  if (players.Player_Job == 6)
                                                                  {
                                                                        if ((players.Thich_khach_thang_thien_1_khi_cong_Da_ma_trien_than != 0.0) && (random.Next(0, 0x91) <= players.Thich_khach_thang_thien_1_khi_cong_Da_ma_trien_than))
                                                                        {
                                                                              players.Show_Char(PeopleID, 370);
                                                                              num5 *= 0.7;
                                                                        }
                                                                        if ((players.Thich_khach_thang_thien_2_khi_cong_Thuan_thuy_thoi_chu != 0.0) && (random.Next(0, 120) <= players.Thich_khach_thang_thien_2_khi_cong_Thuan_thuy_thoi_chu))
                                                                        {
                                                                              players.Show_Char(PeopleID, 0x173);
                                                                              num5 *= 0.8;
                                                                              players.Increase_HP((int)(num5 * 0.2));
                                                                              players.UpdateHP_MP_SP();
                                                                        }
                                                                  }
                                                                  if (((players.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[0].ItemPropertyType == 6) && ((players.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[0].ItemPropertyNumber * 0.5) >= random.Next(0, 90))) && !base.threadSafeDictionary_4.ContainsKey(3))
                                                                  {
                                                                        DI_THUONG_TRANG_THAI_NEW di_thuong_trang_thai_new26 = new DI_THUONG_TRANG_THAI_NEW(this, 0xea60, 3, 0);
                                                                        base.threadSafeDictionary_4.Add(3, di_thuong_trang_thai_new26);
                                                                  }
                                                                  if (base.Player_Job == 6)
                                                                  {
                                                                        if (tbl_xwwl_kongfu.FLD_PID == 0xc3a17)
                                                                        {
                                                                              if (((int)DateTime.Now.Subtract(this.dateTime_15).TotalSeconds) < 20)
                                                                              {
                                                                                    return;
                                                                              }
                                                                              this.dateTime_15 = DateTime.Now;
                                                                              num5 = 0.0;
                                                                              this.int_127++;
                                                                              if (this.int_127 > 5)
                                                                              {
                                                                                    this.int_127 = 5;
                                                                              }
                                                                              this.UpdateHP_MP_SP();
                                                                        }
                                                                        else if (tbl_xwwl_kongfu.FLD_PID == 0xc3a79)
                                                                        {
                                                                              this.method_438(BitConverter.GetBytes(tbl_xwwl_kongfu.FLD_PID), 1);
                                                                              this.Move(players.CharacterCoords_X, players.CharacterCoords_Y, players.CharacterCoords_Z, players.CharacterCoords_Map);
                                                                        }
                                                                        else if ((((tbl_xwwl_kongfu.FLD_INDEX != 1) && (tbl_xwwl_kongfu.FLD_INDEX != 5)) && ((tbl_xwwl_kongfu.FLD_INDEX != 9) && (tbl_xwwl_kongfu.FLD_INDEX != 13))) && (((tbl_xwwl_kongfu.FLD_INDEX != 0x11) && (tbl_xwwl_kongfu.FLD_INDEX != 0x15)) && (tbl_xwwl_kongfu.FLD_INDEX != 0x19)))
                                                                        {
                                                                              if (((((tbl_xwwl_kongfu.FLD_INDEX == 3) || (tbl_xwwl_kongfu.FLD_INDEX == 7)) || ((tbl_xwwl_kongfu.FLD_INDEX == 11) || (tbl_xwwl_kongfu.FLD_INDEX == 15))) || (((tbl_xwwl_kongfu.FLD_INDEX == 0x13) || (tbl_xwwl_kongfu.FLD_INDEX == 0x17)) || (tbl_xwwl_kongfu.FLD_INDEX == 0x1b))) && (this.int_127 > 0))
                                                                              {
                                                                                    num5 += (num5 * 0.3) * this.int_127;
                                                                                    base.Show_Char(PeopleID, 80);
                                                                                    this.int_127 = 0;
                                                                                    this.UpdateHP_MP_SP();
                                                                              }
                                                                        }
                                                                        else if (this.int_127 > 0)
                                                                        {
                                                                              if (!players.threadSafeDictionary_4.ContainsKey(9))
                                                                              {
                                                                                    double num135 = 10000.0;
                                                                                    num135 += base.Thich_khach_Thien_chu_van_thu * 1000.0;
                                                                                    DI_THUONG_TRANG_THAI_NEW di_thuong_trang_thai_new29 = new DI_THUONG_TRANG_THAI_NEW(players, (int)num135, 9, 0);
                                                                                    players.threadSafeDictionary_4.Add(9, di_thuong_trang_thai_new29);
                                                                                    players.DLL_FLD_THEM_VAO_TI_LE_PHAN_TRAM_PHONG_NGU(0.07M);
                                                                                    players.UpdatePowersAndStatus();
                                                                              }
                                                                              if (!players.threadSafeDictionary_4.ContainsKey(11))
                                                                              {
                                                                                    double num136 = 10000.0;
                                                                                    num136 += base.Thich_khach_Thien_chu_van_thu * 1000.0;
                                                                                    DI_THUONG_TRANG_THAI_NEW di_thuong_trang_thai_new30 = new DI_THUONG_TRANG_THAI_NEW(players, (int)num136, 11, 0);
                                                                                    players.threadSafeDictionary_4.Add(11, di_thuong_trang_thai_new30);
                                                                              }
                                                                              this.int_127--;
                                                                              this.UpdateHP_MP_SP();
                                                                        }
                                                                  }
                                                                  if (((players.Player_Job == 5) && (players.Thang_thien_1_khi_cong_Cuong_phong_thien_y != 0.0)) && (random.Next(0, 150) <= players.Thang_thien_1_khi_cong_Cuong_phong_thien_y))
                                                                  {
                                                                        players.NHAN_VAT_SP = players.NHAN_VAT_LON_NHAT_SP + 1;
                                                                        players.UpdateHP_MP_SP();
                                                                  }
                                                                  if (base.Player_Job == 7)
                                                                  {
                                                                        num5 *= 1.0 + num6;
                                                                  }
                                                                  if (base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].ItemPropertyType == 5)
                                                                  {
                                                                        num5 += base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].ItemPropertyNumber * 3;
                                                                  }
                                                                  if ((base.int_112 != 0) && (random.Next(0, 80) <= base.int_112))
                                                                  {
                                                                        num5 += num5 * 0.2;
                                                                        base.Show_Char(PeopleID, 0x194);
                                                                  }
                                                                  if (World.Version_switch != 0)
                                                                  {
                                                                        num5 = random.Next(((int)num5) - 15, ((int)num5) + 15);
                                                                  }
                                                                  if ((base.Thanh_vien_thu_bac != 0) || (players.Thanh_vien_thu_bac != 0))
                                                                  {
                                                                        if ((base.Thanh_vien_thu_bac <= players.Thanh_vien_thu_bac) && (base.Thanh_vien_thu_bac != players.Thanh_vien_thu_bac))
                                                                        {
                                                                              num5 = 0.0;
                                                                        }
                                                                        else
                                                                        {
                                                                              num5 = 10000000000;
                                                                        }
                                                                  }
                                                                  if ((players.Kiem_khach_Hoi_lieu_than_phap != 0.0) && ((random.NextDouble() * World.KHI_CONG_TI_LE_PHAN_TRAM) < players.Kiem_khach_Hoi_lieu_than_phap))
                                                                  {
                                                                        num5 = 0.0;
                                                                        players.Show_Char(PeopleID, 0x196);
                                                                  }
                                                                  if ((players.HBQ_Thien_ma_thoat_cot_ty_le != 0.0) && ((random.NextDouble() * World.KHI_CONG_TI_LE_PHAN_TRAM) <= players.HBQ_Thien_ma_thoat_cot_ty_le))
                                                                  {
                                                                        num5 *= base.HBQ_Thien_ma_thoat_cot_ty_le;
                                                                        base.Show_Char(PeopleID, 0x114);
                                                                        players.Show_Char(PeopleID, 0x114);
                                                                  }
                                                                  if (((players.Player_Job == 6) && (players.Thich_khach_Tam_hoa_tu_dinh != 0.0)) && ((random.NextDouble() * World.KHI_CONG_TI_LE_PHAN_TRAM) <= players.Thich_khach_Tam_hoa_tu_dinh))
                                                                  {
                                                                        players.double_114 = num5 * players.Thich_khach_Lien_tieu_dai_da;
                                                                        num5 = 0.0;
                                                                  }
                                                                  if (num5 <= 0.0)
                                                                  {
                                                                        num5 = 1.0;
                                                                  }
                                                                  if (base.Add_Status_List.ContainsKey(0x3b9acccd))
                                                                  {
                                                                        base.Add_Status_List[0x3b9acccd].THOI_GIAN_KET_THUC_SU_KIEN();
                                                                  }
                                                                  else if (base.Add_Status_List.ContainsKey(0x3b9accce))
                                                                  {
                                                                        base.Add_Status_List[0x3b9accce].THOI_GIAN_KET_THUC_SU_KIEN();
                                                                  }
                                                                  else if (base.Add_Status_List.ContainsKey(0x3b9acccf))
                                                                  {
                                                                        base.Add_Status_List[0x3b9acccf].THOI_GIAN_KET_THUC_SU_KIEN();
                                                                  }
                                                                  else if (base.Add_Status_List.ContainsKey(0x3b9accd0))
                                                                  {
                                                                        base.Add_Status_List[0x3b9accd0].THOI_GIAN_KET_THUC_SU_KIEN();
                                                                  }
                                                                  else if (base.Add_Status_List.ContainsKey(0x3b9acdbf))
                                                                  {
                                                                        base.Add_Status_List[0x3b9acdbf].THOI_GIAN_KET_THUC_SU_KIEN();
                                                                  }
                                                                  else if (base.Add_Status_List.ContainsKey(0x3b9acdc0))
                                                                  {
                                                                        base.Add_Status_List[0x3b9acdc0].THOI_GIAN_KET_THUC_SU_KIEN();
                                                                  }
                                                                  else if (base.Add_Status_List.ContainsKey(0x3b9acdc1))
                                                                  {
                                                                        base.Add_Status_List[0x3b9acdc1].THOI_GIAN_KET_THUC_SU_KIEN();
                                                                  }
                                                                  this.CONG_KICH_TINH_TOAN_HOAN_THANH2(this, PeopleID, int_128, (long)num5, 0, 0L);
                                                            }
                                                      }
                                                }
                                          }
                                    }
                                    return;
                              }
                              base.GameMessage("Safe Mode is turned banned PK!", 9, "system hint");
                        }
                        return;
                        Label_8722:
                        if (players.Add_Status_List.ContainsKey(0x92c71))
                        {
                              players.Add_Status_List[0x92c71].THOI_GIAN_KET_THUC_SU_KIEN();
                        }
                        double num12 = 1800000.0;
                        Additional_Sate_Class class2 = new Additional_Sate_Class(players, (int)num12, int_128, 0);
                        players.Add_Status_List.Add(int_128, class2);
                        players.Status_Effect(BitConverter.GetBytes(int_128), 1, (int)num12);
                        players.ADD_FLD_trang_bi_them_vao_Phong_cu_Cuong_hoa(1);
                        players.TINH_TOAN_NHAN_VAT_TRANG_BI_SO_LIEU();
                        players.UpdatePowersAndStatus();
                        this.CHAR_SENT_DATA_ATTACK(this, PeopleID, int_128, (int)num5, 0, 0, -1);
                        return;
                        Label_87A6:
                        if (players.Add_Status_List.ContainsKey(0x92c72))
                        {
                              players.Add_Status_List[0x92c72].THOI_GIAN_KET_THUC_SU_KIEN();
                        }
                        double num13 = 1800000.0;
                        Additional_Sate_Class class3 = new Additional_Sate_Class(players, (int)num13, int_128, 0);
                        players.Add_Status_List.Add(int_128, class3);
                        players.Status_Effect(BitConverter.GetBytes(int_128), 1, (int)num13);
                        players.ADD_FLD_trang_bi_them_vao_vu_khi_cuong_hoa(1);
                        players.TINH_TOAN_NHAN_VAT_TRANG_BI_SO_LIEU();
                        players.Update_Equipment_Effectiveness();
                        players.UpdatePowersAndStatus();
                        this.CHAR_SENT_DATA_ATTACK(this, PeopleID, int_128, (int)num5, 0, 0, -1);
                        return;
                        Label_8830:
                        if (players.Add_Status_List.ContainsKey(0x7a7c5))
                        {
                              players.Add_Status_List[0x7a7c5].THOI_GIAN_KET_THUC_SU_KIEN();
                        }
                        double num14 = 3000.0;
                        num14 *= 1.0 + base.Y_hap_tinh_dai_phap;
                        Additional_Sate_Class class4 = new Additional_Sate_Class(players, (int)num14, int_128, 0);
                        players.Add_Status_List.Add(int_128, class4);
                        players.Status_Effect(BitConverter.GetBytes(int_128), 1, (int)num14);
                        players.Nhan_vat_them_vao_lon_nhat_HP += 0x3e8;
                        players.UpdateHP_MP_SP();
                        this.CHAR_SENT_DATA_ATTACK(this, PeopleID, int_128, (int)num5, 0, 0, -1);
                  }
                  catch (Exception exception2)
                  {
                        if (this.timer_2 != null)
                        {
                              this.timer_2.Enabled = false;
                              this.timer_2.Close();
                              this.timer_2.Dispose();
                              this.timer_2 = null;
                        }
                        if (this.timer_1 != null)
                        {
                              this.timer_1.Enabled = false;
                              this.timer_1.Close();
                              this.timer_1.Dispose();
                              this.timer_1 = null;
                        }
                        Form1.WriteLine(1, string.Concat(new object[] { "魔法攻击", base.UserSessionID, "|", base.Client.ToString(), " | ", int_128, " | ", PeopleID, " | ", exception2.Message }));
                  }
            }

            #region 플레이어 패킷
            public void ManagePacket(byte[] data, int length)
            {
                  if (World.jlMsg == 1)
                  {
                        Form1.WriteLine(0, "Players_ManagePacket");
                  }
                  //Form1.WriteLine(0, "Players ManagePacket " + BitConverter.ToString(data).Replace("-", ""));
                  int num = BitConverter.ToInt16(data, 7);
                  Form1.WriteLine(0, "Players ManagePacket NO: [" + string.Format("0x{0:X}-({1})", num, num.ToString()) + "] (" + BitConverter.ToString(data).Replace("-", "") + ")");
                  try
                  {
                        int num2;
                        if (!World.allConnectedChars.ContainsKey(base.UserSessionID))
                        {
                              switch (num)
                              {
                                    case 1:
                                          this.LoginConnection(data, length);
                                          break;

                                    case 3:
                                          this.Exit(data, length);
                                          break;

                                    case 5:
                                          this.CharLogin(data, length);
                                          break;

                                    case 0x10:
                                          this.LoadCharacters(data, length);
                                          break;

                                    case 20:
                                          this.CreateCharacter(data, length);
                                          break;

                                    case 0x8f:
                                          this.Display();
                                          break;

                                    case 0x2014:
                                          this.XAC_NHAN_PHIEN_BAN(data, length);
                                          break;

                                    case 30:
                                          this.DelCharacter(data, length);
                                          break;

                                    case 0x38:
                                          this.KIEM_TRA_NHAN_VAT_CO_TON_TAI(data, length);
                                          break;
                              }
                        }
                        else
                        {
                              num2 = num;
                              if (num2 == 0x152)
                              {
                                    this.MO_RA_CUA_HANG(data, length);
                                    //Form1.WriteLine(1, "Players ManagePacket MO_RA_CUA_HANG [Unkown Packet1]");
                              }
                              if (num2 > 0x103c)
                              {
                                    //Form1.WriteLine(1, "Players ManagePacket MO_RA_CUA_HANG [Unkown Packet2]");
                                    goto Label_06FB;
                              }
                              if (num2 <= 0xb1)
                              {
                                    //Form1.WriteLine(1, "Players ManagePacket MO_RA_CUA_HANG [Unkown Packet3]");
                                    switch (num2)
                                    {
                                          case 3:
                                                this.Exit(data, length);
                                                break;

                                          case 7:
                                                this.NHAN_VAT_DI_CHUYEN(data, length);
                                                break;

                                          case 8:
                                                this.NOI_CHUYEN(data, length);
                                                break;

                                          case 9:
                                                this.CONG_KICH(data, length);
                                                break;

                                          case 11:
                                                this.NHAT_ITEM(data, length);
                                                break;

                                          case 14:
                                                this.DropItem(data, length);
                                                break;

                                          case 0x10:
                                                this.LoadCharacters(data, length);
                                                break;

                                          case 0x16:
                                                this.UpdateConfig(data, length);
                                                break;

                                          case 0x1a:
                                                this.ReplaceEquipment(data, length);
                                                break;

                                          case 0x24:
                                                this.ActionExpress(data, length);
                                                break;

                                          case 40:
                                                this.DOI_TRUONG_QUAN_LY(data, length);
                                                break;

                                          case 0x2a:
                                                this.TeamLootManagement(data, length);
                                                break;

                                          case 0x30:
                                                this.GUI_YEU_CAU_VAO_NHOM(data, length);
                                                break;                                         

                                          case 50:
                                                this.TOI_TU_ROI_NHOM(data, length);
                                                break;

                                          case 0x34:
                                                this.DOI_PHUONG_TU_ROI_NHOM(data, length);
                                                break;

                                          case 0x36:
                                                this.ROI_KHOI_TO_DOI(data, length);
                                                break;

                                          case 0x38:
                                                this.KIEM_TRA_NHAN_VAT_CO_TON_TAI(data, length);
                                                break;

                                          case 0x3a:
                                                this.OpenItem(data, length);
                                                break;

                                          case 0x3c:
                                                this.Buff(data, length);
                                                break;

                                          case 0x43:
                                                this.AddQigongPoint(data, length);
                                                break;

                                          case 0x45:
                                                this.TINH_TOAN_HOC_SKILL(data, length);
                                                break;

                                          case 0x48:
                                                this.TU_VONG_TRO_VE_THANH(data, length);
                                                break;

                                          case 80:
                                                this.EnchantItem(data, length);
                                                break;

                                          case 0x8f:
                                                this.Display();
                                                break;

                                          case 0x90:                                         
                                                Form1.WriteLine(1, "Players ManagePacket NPC Talk Packet");
                                                this.MO_RA_CUA_HANG(data, length);
                                                break;

                                          case 0x92:
                                                this.SellAndBuyItems(data, length);
                                                break;

                                          case 0x94:
                                                this.QUYEN_TRUY_CAP_KHO(data, length);
                                                break;

                                          case 0x97:
                                                this.GIAO_DICH_DAI_LOAI(data, length);
                                                break;

                                          case 0x99:
                                                this.GIAO_DICH_CHUYEN_DO_VAT(data, length);
                                                break;

                                          case 0xb0:
                                                this.KIEM_TRA_THOI_GIAN_DUNG_SKILL(data, length);
                                                break;

                                          case 0x56:
                                                this.SwitchToCharSelection(data, length);
                                                break;

                                          case 0x83:
                                                //퀘스트 스크립트 판독
                                                this.MissIonLuaScript(data, length);
                                                break;
                                    }
                              }
                              else if (num2 <= 0xd4)
                              {
                                    if (num2 <= 0xcb)
                                    {
                                          if (num2 == 0xc2)
                                          {
                                                this.METHOD_SKILL_UNKNOWN(data, length);
                                          }
                                          else if (num2 == 0xc5)
                                          {
                                                this.Buff(data, length);
                                          }
                                          else if (num2 == 0xcb)
                                          {
                                                this.MO_CUA_HANG(data, length);
                                          }
                                    }
                                    else
                                    {
                                          switch (num2)
                                          {
                                                case 0xce:
                                                      this.VAO_SHOP(data, length);
                                                      break;

                                                case 0xd1:
                                                      this.NPC_TRUYEN_TONG(data, length);
                                                      break;

                                                case 0xd4:
                                                      this.AccessBBG(data, length);
                                                      break;
                                          }
                                    }
                              }
                              else
                              {
                                    switch (num2)
                                    {
                                          case 0xde:
                                                if (World.Equipment_plus_unlock_switch == 1)
                                                {
                                                      this.KIM_HUONG_NGOC_TANG_GIAI_TRU(data, length);
                                                }
                                                break;

                                          case 0xe1:
                                                goto Label_05EC;

                                          case 0xe3:
                                                goto Label_05F9;

                                          case 0xe5:
                                                goto Label_0606;

                                          case 0xe7:
                                                goto Label_0613;

                                          case 0xe8:
                                                goto Label_0620;

                                          case 0xea:
                                                goto Label_062B;

                                          case 0xec:
                                                goto Label_0638;

                                          case 0xee:
                                                goto Label_0645;

                                          case 0x141:
                                                goto Label_0652;

                                          case 0x1001:
                                                this.TRUONG_BACH_DAN(data, length);
                                                break;

                                          case 0x1003:
                                                this.UNKNOWN_VO_CONG(data, length);
                                                break;

                                          case 0x1005:
                                                this.SU_DUNG_THO_LINH_PHU(data, length);
                                                break;

                                          case 0x100c:
                                                this.LUU_LAI_THO_LINH_PHU(data, length);
                                                break;

                                          case 0x100e:
                                                this.XOA_BO_THO_LINH_PHU(data, length);
                                                break;

                                          case 0x1010:
                                                this.NHUOM_TOC(data, length);
                                                break;

                                          case 0x1013:
                                                this.MO_RA_PHU(data, length);
                                                break;

                                          case 0x1015:
                                                this.PKSwitch(data, length);
                                                break;

                                          case 0x1017:
                                                this.AddtoShortcutBar(data, length);
                                                break;

                                          case 0x1031:
                                                this.EditGuildNoticeMessage(data, length);
                                                break;

                                          case 0x103a:
                                                this.CancelGuildWarRequest(data, length);
                                                break;

                                          case 0x103c:
                                                this.GuildWarRequest(data, length);
                                                break;
                                    }
                              }
                        }
                        return;
                        Label_05EC:
                        this.XUYEN_CHAM_DAN_TUYEN(data, length);
                        return;
                        Label_05F9:
                        this.CreateGuildConfirm(data, length);
                        return;
                        Label_0606:
                        this.TAO_BANG_PHAI(data, length);
                        return;
                        Label_0613:
                        this.GIA_NHAP_BANG(data, length);
                        return;
                        Label_0620:
                        this.KIEM_TRA_BANG_PHAI();
                        return;
                        Label_062B:
                        this.NHAN_DUOC_MON_HUY(data, length);
                        return;
                        Label_0638:
                        this.CHAP_NHAN_MON_HUY(data, length);
                        return;
                        Label_0645:
                        this.UNKNOWN_BANG_PHAI(data, length);
                        return;
                        Label_0652:
                        this.DANG_KY_CHIEU_LIEN_HOAN_2(data, length);
                        return;
                        Label_06FB:
                        if (num2 <= 0x1742)
                        {
                              if (num2 <= 0x1607)
                              {
                                    switch (num2)
                                    {
                                          case 0x1050:
                                                this.TRIEU_HOI_LINH_THU(data, length);
                                                break;

                                          case 0x1054:
                                                this.PetActionPackage(data, length);
                                                break;

                                          case 0x1056:
                                                this.TEN_LINH_THU_GOI_PAK(data, length);
                                                break;

                                          case 0x105a:
                                                this.LINH_THU_BIEN_THAN(data, length);
                                                break;

                                          case 0x1088:
                                                this.PAK_0x8910(data, length);
                                                break;

                                          case 0x1541:
                                                this.ChangeGuildUniform(data, length);
                                                break;

                                          case 0x1607:
                                                this.KIEU_TOC(data, length);
                                                break;
                                    }
                              }
                              else if (num2 <= 0x1630)
                              {
                                    if (num2 == 0x1610)
                                    {
                                          this.TO_DOI_TRUYEN_TONG(data, length);
                                    }
                                    else if (num2 == 0x1616)
                                    {
                                          this.DOI_TEN_NHAN_VAT(data, length);
                                    }
                                    else if (num2 == 0x1630)
                                    {
                                          this.BANG_PHAI_TRUYEN_TONG(data, length);
                                    }
                              }
                              else
                              {
                                    switch (num2)
                                    {
                                          case 0x1720:
                                                this.UNKNOWN_VE_CASH(data, length);
                                                break;

                                          case 0x1722:
                                                this.NHAN_VAT_TU_VONG_PHUC_SINH(data, length);
                                                break;

                                          case 0x1724:
                                                this.TU_VONG_TRO_VE_THANH_2(data, length);
                                                break;

                                          case 0x1730:
                                                this.CHE_TAC_PHAN_GIAI_HE_THONG(data, length);
                                                break;

                                          case 0x1732:
                                                this.CHE_TAC_PHAN_GIAI_KIEM_TRA(data, length);
                                                break;

                                          case 0x1735:
                                                this.CHE_TAO_HE_THONG_SAN_XUAT(data, length);
                                                break;

                                          case 0x1737:
                                                this.CHE_TAO_HE_THONG_KIEM_TRA(data, length);
                                                break;

                                          case 0x1738:
                                                this.HOC_TAP_CHE_TAC_KY_NANG(data, length);
                                                break;

                                          case 0x165c:
                                                this.HUY_BO_SAO_CHEP(data, length);
                                                break;

                                          case 0x1740:
                                                this.CHE_TAC_HE_THONG_SAN_XUAT(data, length);
                                                break;

                                          case 0x1742:
                                                this.HOC_TAP_CHE_TAO_KY_NANG(data, length);
                                                break;
                                    }
                              }
                        }
                        else if (num2 <= 0x1902)
                        {
                              if (num2 <= 0x1770)
                              {
                                    if (num2 == 0x1750)
                                    {
                                          this.AN_THAN(data, length);
                                    }
                                    else if (num2 == 0x1753)
                                    {
                                          this.CAC_LOAI_THAO_MOC(data, length);
                                    }
                                    else if (num2 == 0x1770)
                                    {
                                          this.TEN_HINH_THUC(data, length);
                                    }
                              }
                              else if (num2 <= 0x1779)
                              {
                                    if (num2 == 0x1773)
                                    {
                                          this.RandomBuff(data, length);
                                    }
                                    else if (num2 == 0x1779)
                                    {
                                          this.TINH_NHAN_HE_THONG(data, length);
                                    }
                              }
                              else if (num2 == 0x1806)
                              {
                                    this.AddAcensionQigongPoint(data, length);
                              }
                              else if (num2 == 0x1902)
                              {
                                    this.DAO_CU_TO_HOP(data, length);
                              }
                        }
                        else
                        {
                              switch (num2)
                              {
                                    case 0x1921:
                                          this.THIET_LAP_PHO_BAN_DO_KHO(data, length);
                                          break;

                                    case 0x1923:
                                          this.XEM_KHI_CONG(data, length);
                                          break;

                                    case 0x1912:
                                          if (World.Kiem_tra_trang_bi_mo_ra == 1)
                                          {
                                                this.XEM_LOAI_HINH_THIET_BI(data, length);
                                          }
                                          break;

                                    case 0x1c0b:
                                          this.NGUYEN_BAO_CA_NHAN_CUA_HANG(data, length);
                                          break;

                                    case 0x1c0d:
                                          this.EnterExitPremShop(data, length);
                                          break;

                                    case 0x1c1a:
                                          this.PremShopSToryQuery(data, length);
                                          break;

                                    case 0x1c1b:
                                          this.PremShopStoreQuery2(data, length);
                                          break;

                                    case 0x2214:
                                          this.Force_Warfare_System(data, length);
                                          break;

                                    case 0x3073:
                                          this.MO_RA_PHU_DOI_TEN(data, length);
                                          break;

                                    case 0x3124:
                                          goto Label_0AE5;
                              }
                        }
                        return;
                        Label_0AE5:
                        this.RepairItem(data, length);
                  }
                  catch (Exception exception)
                  {
                        Form1.WriteLine(1, string.Concat(new object[] { "Managed Package () error", base.Client.int_3, "|", base.Client.ToString(), " ", num, "  ", exception }));
                        Console.WriteLine(exception);
                        base.Client.Dispose();
                  }
            }
            #endregion

            public void method_358(object sender, ElapsedEventArgs e)
            {
                  if ((base.NHAN_VAT_HP >= base.NHAN_VAT_LON_NHAT_HP) && (base.NHAN_VAT_MP >= base.NHAN_VAT_LON_NHAT_MP))
                  {
                        if (this.timer_3 != null)
                        {
                              this.timer_3.Enabled = false;
                              this.timer_3.Close();
                              this.timer_3.Dispose();
                              this.timer_3 = null;
                        }
                  }
                  else
                  {
                        if ((base.NHAN_VAT_HP + 160L) < base.NHAN_VAT_LON_NHAT_HP)
                        {
                              base.NHAN_VAT_HP += 160L;
                        }
                        else
                        {
                              base.NHAN_VAT_HP = base.NHAN_VAT_LON_NHAT_HP;
                        }
                        if ((base.NHAN_VAT_MP + 0x66) < base.NHAN_VAT_LON_NHAT_MP)
                        {
                              base.NHAN_VAT_MP += 0x66;
                        }
                        else
                        {
                              base.NHAN_VAT_MP = base.NHAN_VAT_LON_NHAT_MP;
                        }
                        this.UpdateHP_MP_SP();
                  }
            }

            public void method_412(int int_128, int int_129)
            {
                  TBL_XWWL_KONGFU tbl_xwwl_kongfu = TBL_XWWL_KONGFU.smethod_0(base.Player_Zx, base.Player_Job, int_128, int_129);
                  if (tbl_xwwl_kongfu != null)
                  {
                        base.class79_0[tbl_xwwl_kongfu.FLD_VO_CONG_LOAI_HINH, tbl_xwwl_kongfu.FLD_INDEX] = new TBL_XWWL_KONGFU(tbl_xwwl_kongfu.FLD_PID);
                        base.Player_ExpErience -= tbl_xwwl_kongfu.FLD_NEEDEXP;
                        this.Learn_Skill_Tip(1);
                  }
            }

            public void method_413(int int_128, int int_129)
            {
                  TBL_XWWL_KONGFU tbl_xwwl_kongfu = TBL_XWWL_KONGFU.smethod_2(this, int_128, int_129);
                  if (tbl_xwwl_kongfu != null)
                  {
                        base.class79_0[tbl_xwwl_kongfu.FLD_VO_CONG_LOAI_HINH, tbl_xwwl_kongfu.FLD_INDEX] = new TBL_XWWL_KONGFU(tbl_xwwl_kongfu.FLD_PID);
                        base.Player_ExpErience -= tbl_xwwl_kongfu.FLD_NEEDEXP;
                        this.Learn_Skill_Tip(1);
                  }
            }

            public void method_427(Players class15_0, int int_128, int int_129, int int_130, int int_131)
            {
                  try
                  {
                        byte[] dst = Converter.hexStringToByte("AA558300DA040A007400FC280100010000008103000000000000000000000000000000000000000000007F000000074A87C4CB09ADC359D48FC2000100002C0100000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000055AA");
                        if (int_129 != 0)
                        {
                              Buffer.BlockCopy(BitConverter.GetBytes(int_129), 0, dst, 0x1f, 4);
                              Buffer.BlockCopy(BitConverter.GetBytes(World.TBL_KONGFU[int_129].FLD_EFFERT), 0, dst, 0x23, 4);
                              Buffer.BlockCopy(BitConverter.GetBytes(int_130), 0, dst, 0x13, 4);
                        }
                        else
                        {
                              Buffer.BlockCopy(BitConverter.GetBytes(int_131), 0, dst, 0x2b, 4);
                              Buffer.BlockCopy(BitConverter.GetBytes(int_130), 0, dst, 0x13, 4);
                        }
                        Buffer.BlockCopy(BitConverter.GetBytes(class15_0.NHAN_VAT_LINH_THU.NHAN_VAT_TOA_DO_X), 0, dst, 0x2f, 4);
                        Buffer.BlockCopy(BitConverter.GetBytes(class15_0.NHAN_VAT_LINH_THU.NHAN_VAT_TOA_DO_Y), 0, dst, 0x37, 4);
                        Buffer.BlockCopy(BitConverter.GetBytes((float)15f), 0, dst, 0x2f, 4);
                        Buffer.BlockCopy(BitConverter.GetBytes(class15_0.NHAN_VAT_LINH_THU_TOAN_BO_TRANG_PHUC_ID), 0, dst, 5, 2);
                        Buffer.BlockCopy(BitConverter.GetBytes(int_128), 0, dst, 11, 2);
                        Buffer.BlockCopy(BitConverter.GetBytes(1), 0, dst, 15, 4);
                        if (class15_0.Client != null)
                        {
                              class15_0.Client.Send(dst, dst.Length);
                        }
                        this.vmethod_0(dst, dst.Length);
                  }
                  catch
                  {
                  }
            }

            public void method_436(int int_128)
            {
                  byte[] dst = Converter.hexStringToByte("AA551300005F00481704005F000600000000000000000055AA");
                  Buffer.BlockCopy(BitConverter.GetBytes(int_128), 0, dst, 13, 2);
                  Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, dst, 11, 2);
                  Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, dst, 5, 2);
                  if (base.Client != null)
                  {
                        base.Client.Send(dst, dst.Length);
                  }
                  this.vmethod_0(dst, dst.Length);
            }

            public void method_438(byte[] byte_5, int int_128)
            {
                  using (PacketData data = new PacketData())
                  {
                        data.Write4(BitConverter.ToInt32(byte_5, 0));
                        data.method_2(1);
                        data.method_2(int_128);
                        data.Write4(0);
                        data.Write4(0);
                        if (base.Client != null)
                        {
                              base.Client.method_5(data, 0x3d00, base.UserSessionID, 0);
                        }
                        this.vmethod_2(data, 0x3d00, base.UserSessionID, 0);
                  }
            }

            public void Method_Cap_Nhat_Linh_Thu_Vo_Cong_Trang_Thai()
            {
                  PacketData data = new PacketData();
                  data.Write2(base.NHAN_VAT_LINH_THU.FLD_LEVEL);
                  data.Write2(base.NHAN_VAT_LINH_THU.FLD_CONG_KICH);
                  data.Write2(base.NHAN_VAT_LINH_THU.FLD_TRUNG_MUC_TIEU);
                  data.Write2(0);
                  data.Write2(0);
                  data.Write2(0);
                  for (int i = 0; i < 0x20; i++)
                  {
                        data.method_10(base.NHAN_VAT_LINH_THU.class79_0[i].Vo_CongID_byte, 0, 4);
                  }
                  data.Write4(0);
                  data.Write4(0);
                  data.Write4(0);
                  data.Write4(0);
                  data.Write4(0);
                  base.Client.method_5(data, 0x6b00, base.NHAN_VAT_LINH_THU_TOAN_BO_TRANG_PHUC_ID, 0);
            }

            public void Method_Linh_Thu_Level()
            {
                  PacketData data = new PacketData();
                  data.Write2(base.NHAN_VAT_LINH_THU.FLD_LEVEL);
                  base.Client.method_5(data, 0x7700, base.NHAN_VAT_LINH_THU_TOAN_BO_TRANG_PHUC_ID, 0);
                  this.vmethod_2(data, 0x7700, base.NHAN_VAT_LINH_THU_TOAN_BO_TRANG_PHUC_ID, 0);
            }

            public void Method_Linh_Thu_Mang_Nang()
            {
                  PacketData data = new PacketData();
                  data.Write4(0);
                  data.Write4(0);
                  data.Write4(base.NHAN_VAT_LINH_THU.FLD_MANG_NANG);
                  data.Write4(base.NHAN_VAT_LINH_THU.FLD_MANG_NANG_MAX);
                  base.Client.method_5(data, 0x7c00, base.NHAN_VAT_LINH_THU_TOAN_BO_TRANG_PHUC_ID, 0);
            }

            public void Method_Linh_Thu_Vat_Pham()
            {
                  PacketData data = new PacketData();
                  data.Write2(60);
                  data.Write2(0);
                  data.Write4(0);
                  for (int i = 0; i < 0x10; i++)
                  {
                        if (BitConverter.ToInt32(base.NHAN_VAT_LINH_THU.class23_0[i].VAT_PHAM_SO_LUONG, 0) == 0)
                        {
                              base.NHAN_VAT_LINH_THU.class23_0[i].Item_byte = new byte[0x49];
                        }
                        data.method_10(base.NHAN_VAT_LINH_THU.class23_0[i].method_0(), 0, World.int_5);
                  }
                  if (base.Client != null)
                  {
                        base.Client.method_4(data, 0x7100, base.NHAN_VAT_LINH_THU_TOAN_BO_TRANG_PHUC_ID);
                  }
            }

            public void METHOD_SKILL_UNKNOWN(byte[] byte_5, int int_128)
            {
                  byte[] dst = Converter.hexStringToByte("AA552300002C01C6001400010000000000000059E404005AE404005BE40400000000000000000055AA");
                  Buffer.BlockCopy(byte_5, 15, dst, 15, 0x10);
                  base.list_5.Clear();
                  int num = 0;
                  while (true)
                  {
                        if (num >= 3)
                        {
                              break;
                        }
                        byte[] buffer2 = new byte[4];
                        try
                        {
                              Buffer.BlockCopy(byte_5, (num * 4) + 0x13, buffer2, 0, 4);
                              if (BitConverter.ToInt32(buffer2, 0) != 0)
                              {
                                    base.list_5.Add(new TBL_XWWL_KONGFU(BitConverter.ToInt32(buffer2, 0)));
                              }
                        }
                        catch
                        {
                        }
                        num++;
                  }
                  Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, dst, 5, 2);
                  if (base.Client != null)
                  {
                        base.Client.Send(dst, dst.Length);
                  }
            }

            public void Method_SpPetAction(int int_128)
            {
                  if (int_128 == 3)
                  {
                        base.NHAN_VAT_LINH_THU.CUOI_THU = 1;
                  }
                  else if (int_128 == 4)
                  {
                        base.NHAN_VAT_LINH_THU.CUOI_THU = 0;
                  }
                  using (PacketData data = new PacketData())
                  {
                        data.Write4(int_128);
                        base.Client.method_5(data, 0x5510, base.NHAN_VAT_LINH_THU_TOAN_BO_TRANG_PHUC_ID, 0);
                        this.vmethod_2(data, 0x5510, base.NHAN_VAT_LINH_THU_TOAN_BO_TRANG_PHUC_ID, 0);
                  }
            }

            public void Method_SpPetExp()
            {
                  double num = Convert.ToInt64(World.lever[base.NHAN_VAT_LINH_THU.FLD_LEVEL]) - Convert.ToInt64(World.lever[base.NHAN_VAT_LINH_THU.FLD_LEVEL - 1]);
                  double num2 = base.NHAN_VAT_LINH_THU.FLD_EXP - Convert.ToInt64(World.lever[base.NHAN_VAT_LINH_THU.FLD_LEVEL - 1]);
                  if (num2 < 1.0)
                  {
                        base.NHAN_VAT_LINH_THU.FLD_EXP = Convert.ToInt64(World.lever[base.NHAN_VAT_LINH_THU.FLD_LEVEL - 1]);
                        num2 = 0.0;
                  }
                  PacketData data = new PacketData();
                  data.method_8((long)num2);
                  data.method_8((long)num);
                  base.Client.method_5(data, 0x6a00, base.NHAN_VAT_LINH_THU_TOAN_BO_TRANG_PHUC_ID, 0);
            }

            public void Method_SpPetHungry()
            {
                  using (PacketData data = new PacketData())
                  {
                        data.Write4(base.NHAN_VAT_LINH_THU.FLD_ZCD);
                        data.Write4(base.NHAN_VAT_LINH_THU.FLD_HP);
                        base.Client.method_5(data, 0x6900, base.NHAN_VAT_LINH_THU_TOAN_BO_TRANG_PHUC_ID, 0);
                  }
            }

            public void Method_SpPetMsg(int int_128)
            {
                  using (PacketData data = new PacketData())
                  {
                        data.Write4(int_128);
                        data.Write4(0);
                        base.Client.method_5(data, 0x5710, base.UserSessionID, 1);
                  }
            }

            public void Method_SpPetMsgOpen(int int_128, int int_129)
            {
                  PacketData data = new PacketData();
                  data.Write4(int_128);
                  data.Write4(int_129);
                  base.Client.method_5(data, 0x5110, base.UserSessionID, 0);
            }

            public void Method_SpPetQuickInfo(Players class15_0)
            {
                  PacketData data = new PacketData();
                  data.Write4(1);
                  data.Write4(class15_0.NHAN_VAT_LINH_THU_TOAN_BO_TRANG_PHUC_ID);
                  data.method_16(class15_0.NHAN_VAT_LINH_THU.Name);
                  data.method_2(0);
                  data.Write4(0);
                  data.Write2(class15_0.NHAN_VAT_LINH_THU.FLD_LEVEL);
                  data.method_2(class15_0.NHAN_VAT_LINH_THU.FLD_JOB_LEVEL);
                  data.method_2(class15_0.NHAN_VAT_LINH_THU.FLD_JOB);
                  data.Write2(0);
                  for (int i = 0; i < 5; i++)
                  {
                        if (BitConverter.ToInt32(base.NHAN_VAT_LINH_THU.class23_1[i].VAT_PHAM_SO_LUONG, 0) == 0)
                        {
                              base.NHAN_VAT_LINH_THU.class23_1[i].Item_byte = new byte[0x49];
                        }
                        data.method_10(base.NHAN_VAT_LINH_THU.class23_1[i].method_0(), 0, World.int_5);
                  }
                  base.Client.method_5(data, 0xa000, class15_0.NHAN_VAT_LINH_THU_TOAN_BO_TRANG_PHUC_ID, 0);
            }

            public void MO_CUA_HANG(byte[] byte_5, int int_128)
            {
                  try
                  {
                        byte[] buffer;
                        byte[] buffer2;
                        byte[] buffer3;
                        if (base.Exiting)
                        {
                              DBA.smethod_7($"UPDATE TBL_ACCOUNT SET FLD_ZT=1 WHERE FLD_ID='{base.Userid}'", "rxjhaccount");
                              Form1.WriteLine(6, "退出复制BUG11 [" + base.Userid + "][" + base.UserName + "][" + base.Client.ToString() + "] ");
                              if (base.Client != null)
                              {
                                    base.Client.Dispose();
                              }
                        }
                        else
                        {
                              this.Packet_Modify(byte_5, int_128);
                              byte[] buffer13 = new byte[4];
                              Buffer.BlockCopy(byte_5, 11, buffer13, 0, 1);
                              switch (BitConverter.ToInt32(buffer13, 0))
                              {
                                    case 1:
                                          if (base.OpenWarehouse)
                                          {
                                                break;
                                          }
                                          goto Label_01DC;

                                    case 2:
                                          {
                                                byte[] buffer14 = new byte[4];
                                                byte[] buffer15 = new byte[8];
                                                buffer = new byte[8];
                                                buffer2 = new byte[4];
                                                buffer3 = new byte[4];
                                                Buffer.BlockCopy(byte_5, 12, buffer14, 0, 4);
                                                Buffer.BlockCopy(byte_5, 20, buffer15, 0, 8);
                                                Buffer.BlockCopy(byte_5, 0x1c, buffer2, 0, 2);
                                                Buffer.BlockCopy(byte_5, 30, buffer3, 0, 2);
                                                Buffer.BlockCopy(byte_5, 0x20, buffer, 0, 8);
                                                if (!World.smethod_18(BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[BitConverter.ToInt32(buffer3, 0)].VAT_PHAM_ID, 0)))
                                                {
                                                      goto Label_02EC;
                                                }
                                                byte[] buffer16 = Converter.hexStringToByte("AA55120001AE04CD000300021B000000000000009BE255AA");
                                                Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, buffer16, 5, 2);
                                                if (base.Client != null)
                                                {
                                                      base.Client.Send(buffer16, buffer16.Length);
                                                }
                                                break;
                                          }
                                    case 3:
                                          if (base.PlayerShop.CUA_HANG_TEN.Length <= 0x20)
                                          {
                                                goto Label_0998;
                                          }
                                          base.GameMessage("Please re-enter the store name is too long", 10, "system hint");
                                          this.DONG_CUA_HANG();
                                          break;

                                    case 4:
                                          this.DONG_CUA_HANG();
                                          break;
                              }
                        }
                        return;
                        Label_01DC:
                        base.OpenWarehouse = true;
                        base.PlayerShop = new PersonalShopClass();
                        base.PlayerShop.int_0 = 1;
                        int num = byte_5[12];
                        string str = "000000000000000055AA";
                        byte[] src = Converter.hexStringToByte("AA551800000000CD00090001010500");
                        byte[] buffer5 = Converter.hexStringToByte(str);
                        byte[] buffer6 = new byte[num];
                        for (int i = 0; i < num; i++)
                        {
                              buffer6[i] = byte_5[14 + i];
                        }
                        byte[] dst = new byte[(src.Length + buffer5.Length) + buffer6.Length];
                        Buffer.BlockCopy(src, 0, dst, 0, src.Length);
                        Buffer.BlockCopy(buffer6, 0, dst, 15, buffer6.Length);
                        Buffer.BlockCopy(buffer5, 0, dst, dst.Length - buffer5.Length, buffer5.Length);
                        dst[2] = (byte)(0x13 + buffer6.Length);
                        dst[9] = (byte)(4 + buffer6.Length);
                        dst[13] = (byte)buffer6.Length;
                        base.PlayerShop.CUA_HANG_TEN = buffer6;
                        Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, dst, 5, 2);
                        if (base.Client != null)
                        {
                              base.Client.Send(dst, dst.Length);
                        }
                        return;
                        Label_02EC:
                        if ((BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[BitConverter.ToInt32(buffer3, 0)].VAT_PHAM_SO_LUONG, 0) >= BitConverter.ToInt32(buffer2, 0)) && (BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[BitConverter.ToInt32(buffer3, 0)].VAT_PHAM_SO_LUONG, 0) >= 0))
                        {
                              if (BitConverter.ToInt32(buffer2, 0) > 0x270f)
                              {
                                    byte[] buffer17 = Converter.hexStringToByte("AA55120001AE04CD000300021B000000000000009BE255AA");
                                    Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, buffer17, 5, 2);
                                    if (base.Client != null)
                                    {
                                          base.Client.Send(buffer17, buffer17.Length);
                                    }
                                    return;
                              }
                              if (BitConverter.ToInt32(buffer, 0) <= 0)
                              {
                                    byte[] buffer18 = Converter.hexStringToByte("AA55120001AE04CD000300021B000000000000009BE255AA");
                                    Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, buffer18, 5, 2);
                                    if (base.Client != null)
                                    {
                                          base.Client.Send(buffer18, buffer18.Length);
                                    }
                                    return;
                              }
                              if (base.TRANG_BI_LAN_BAO_VAY[BitConverter.ToInt32(buffer3, 0)].Item_troi_chat)
                              {
                                    byte[] buffer19 = Converter.hexStringToByte("AA55120001AE04CD000300021B000000000000009BE255AA");
                                    Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, buffer19, 5, 2);
                                    if (base.Client != null)
                                    {
                                          base.Client.Send(buffer19, buffer19.Length);
                                    }
                                    return;
                              }
                              if (base.PlayerShop.CUA_HANG_ITEM_DANH_SACH.Count >= 8)
                              {
                                    byte[] buffer20 = Converter.hexStringToByte("AA55120001AE04CD000300021B000000000000009BE255AA");
                                    Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, buffer20, 5, 2);
                                    if (base.Client != null)
                                    {
                                          base.Client.Send(buffer20, buffer20.Length);
                                    }
                                    return;
                              }
                              if (BitConverter.ToInt32(buffer2, 0) <= 0)
                              {
                                    byte[] buffer21 = Converter.hexStringToByte("AA55120001AE04CD000300021B000000000000009BE255AA");
                                    Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, buffer21, 5, 2);
                                    if (base.Client != null)
                                    {
                                          base.Client.Send(buffer21, buffer21.Length);
                                    }
                                    return;
                              }
                              if (World.Co_hay_khong_mo_ra_cua_hang_CASH == 1)
                              {
                                    if (BitConverter.ToInt32(buffer, 0) > World.Cho_phep_item_ban_ra_lon_nhat_CASH_so_luong)
                                    {
                                          byte[] buffer22 = Converter.hexStringToByte("AA55120001AE04CD000300021B000000000000009BE255AA");
                                          Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, buffer22, 5, 2);
                                          if (base.Client != null)
                                          {
                                                base.Client.Send(buffer22, buffer22.Length);
                                          }
                                          return;
                                    }
                              }
                              else if (BitConverter.ToInt32(buffer, 0) > 0x3b9aca00)
                              {
                                    byte[] buffer23 = Converter.hexStringToByte("AA55120001AE04CD000300021B000000000000009BE255AA");
                                    Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, buffer23, 5, 2);
                                    if (base.Client != null)
                                    {
                                          base.Client.Send(buffer23, buffer23.Length);
                                    }
                                    return;
                              }
                              if (BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[BitConverter.ToInt32(buffer3, 0)].VAT_PHAM_ID, 0) == 0)
                              {
                                    byte[] buffer24 = Converter.hexStringToByte("AA55120001AE04CD000300021B000000000000009BE255AA");
                                    Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, buffer24, 5, 2);
                                    if (base.Client != null)
                                    {
                                          base.Client.Send(buffer24, buffer24.Length);
                                    }
                              }
                              else if (World.smethod_18(BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[BitConverter.ToInt32(buffer3, 0)].VAT_PHAM_ID, 0)))
                              {
                                    byte[] buffer25 = Converter.hexStringToByte("AA55120001AE04CD000300021B000000000000009BE255AA");
                                    Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, buffer25, 5, 2);
                                    if (base.Client != null)
                                    {
                                          base.Client.Send(buffer25, buffer25.Length);
                                    }
                              }
                              else if (base.PlayerShop.CUA_HANG_ITEM_DANH_SACH.ContainsKey(BitConverter.ToInt64(base.TRANG_BI_LAN_BAO_VAY[BitConverter.ToInt32(buffer3, 0)].Item_toan_bo_ID, 0)))
                              {
                                    byte[] buffer26 = Converter.hexStringToByte("AA55120001AE04CD000300021B000000000000009BE255AA");
                                    Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, buffer26, 5, 2);
                                    if (base.Client != null)
                                    {
                                          base.Client.Send(buffer26, buffer26.Length);
                                    }
                              }
                              else
                              {
                                    base.TRANG_BI_LAN_BAO_VAY[BitConverter.ToInt32(buffer3, 0)].bool_0 = true;
                                    CA_NHAN_CUA_HANG_ITEM_LOAI ca_nhan_cua_hang_item_loai = new CA_NHAN_CUA_HANG_ITEM_LOAI
                                    {
                                          int_0 = BitConverter.ToInt32(buffer2, 0),
                                          long_0 = BitConverter.ToInt64(buffer, 0),
                                          int_1 = BitConverter.ToInt32(buffer3, 0),
                                          class23_0 = base.TRANG_BI_LAN_BAO_VAY[BitConverter.ToInt32(buffer3, 0)]
                                    };
                                    base.PlayerShop.CUA_HANG_ITEM_DANH_SACH.Add(BitConverter.ToInt64(base.TRANG_BI_LAN_BAO_VAY[BitConverter.ToInt32(buffer3, 0)].Item_toan_bo_ID, 0), ca_nhan_cua_hang_item_loai);
                                    PacketData data = new PacketData();
                                    data.method_2(2);
                                    data.method_2(2);
                                    data.method_8(ca_nhan_cua_hang_item_loai.class23_0.GetItem_ID);
                                    data.method_8(ca_nhan_cua_hang_item_loai.class23_0.GetItem_toan_bo_ID);
                                    data.Write2(ca_nhan_cua_hang_item_loai.int_0);
                                    data.Write2(ca_nhan_cua_hang_item_loai.int_1);
                                    data.method_8(ca_nhan_cua_hang_item_loai.long_0);
                                    data.Write4(ca_nhan_cua_hang_item_loai.class23_0.FLD_MAGIC0);
                                    data.Write4(ca_nhan_cua_hang_item_loai.class23_0.FLD_MAGIC1);
                                    data.Write4(ca_nhan_cua_hang_item_loai.class23_0.FLD_MAGIC2);
                                    data.Write4(ca_nhan_cua_hang_item_loai.class23_0.FLD_MAGIC3);
                                    data.Write4(ca_nhan_cua_hang_item_loai.class23_0.FLD_MAGIC4);
                                    data.Write2(ca_nhan_cua_hang_item_loai.class23_0.FLD_FJ_MAGIC0);
                                    data.Write2(ca_nhan_cua_hang_item_loai.class23_0.FLD_FJ_MAGIC1);
                                    data.Write2(ca_nhan_cua_hang_item_loai.class23_0.FLD_FJ_trung_cap_phu_hon);
                                    data.Write2(ca_nhan_cua_hang_item_loai.class23_0.FLD_FJ_MAGIC2);
                                    data.Write2(ca_nhan_cua_hang_item_loai.class23_0.FLD_FJ_MAGIC3);
                                    data.Write2(ca_nhan_cua_hang_item_loai.class23_0.FLD_FJ_MAGIC4);
                                    data.Write2(ca_nhan_cua_hang_item_loai.class23_0.FLD_FJ_MAGIC5);
                                    data.Write2(0);
                                    data.Write4(ca_nhan_cua_hang_item_loai.class23_0.FLD_FJ_KSSJ);
                                    data.Write4(ca_nhan_cua_hang_item_loai.class23_0.FLD_FJ_JSSJ);
                                    if (ca_nhan_cua_hang_item_loai.class23_0.FLD_keo_dai_suc_manh != 0)
                                    {
                                          data.Write2(ca_nhan_cua_hang_item_loai.class23_0.FLD_keo_dai_suc_manh);
                                    }
                                    else
                                    {
                                          data.Write2(0);
                                    }
                                    data.Write4(ca_nhan_cua_hang_item_loai.class23_0.FLD_FJ_thuc_tinh);
                                    data.Write2(0);
                                    data.Write2(ca_nhan_cua_hang_item_loai.class23_0.FLD_FJ_tien_hoa);
                                    data.Write2(0);
                                    data.Write4(0);
                                    data.Write4(0);
                                    data.Write4(0);
                                    if (base.Client != null)
                                    {
                                          base.Client.method_5(data, 0xcd00, base.UserSessionID, 1);
                                    }
                              }
                              return;
                        }
                        base.GameMessage("Please enter the correct number[" + BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[BitConverter.ToInt32(buffer3, 0)].VAT_PHAM_SO_LUONG, 0) + "]A!", 9, "system hint");
                        byte[] buffer8 = Converter.hexStringToByte("AA55120001AE04CD000300021B000000000000009BE255AA");
                        Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, buffer8, 5, 2);
                        if (base.Client != null)
                        {
                              base.Client.Send(buffer8, buffer8.Length);
                        }
                        return;
                        Label_0998:
                        base.PlayerShop.PersonStore_Open = true;
                        byte[] buffer9 = Converter.hexStringToByte("AA551100000000CD0002000303000000000000000055AA");
                        Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, buffer9, 5, 2);
                        if (base.Client != null)
                        {
                              base.Client.Send(buffer9, buffer9.Length);
                        }
                        string str2 = "000000000000000055AA";
                        byte[] buffer10 = Converter.hexStringToByte("AA552300000000CA0014000100000000000000000000000600");
                        byte[] buffer11 = Converter.hexStringToByte(str2);
                        byte[] buffer12 = new byte[(buffer10.Length + buffer11.Length) + base.PlayerShop.CUA_HANG_TEN.Length];
                        Buffer.BlockCopy(buffer10, 0, buffer12, 0, buffer10.Length);
                        Buffer.BlockCopy(base.PlayerShop.CUA_HANG_TEN, 0, buffer12, 0x19, base.PlayerShop.CUA_HANG_TEN.Length);
                        Buffer.BlockCopy(buffer11, 0, buffer12, buffer12.Length - buffer11.Length, buffer11.Length);
                        buffer12[2] = (byte)(0x1d + base.PlayerShop.CUA_HANG_TEN.Length);
                        buffer12[9] = (byte)(14 + base.PlayerShop.CUA_HANG_TEN.Length);
                        buffer12[0x17] = (byte)base.PlayerShop.CUA_HANG_TEN.Length;
                        Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, buffer12, 15, 4);
                        Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, buffer12, 0x13, 4);
                        Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, buffer12, 5, 2);
                        base.PlayerShop.PersonStore_Open = true;
                        if (base.Client != null)
                        {
                              base.Client.Send(buffer12, buffer12.Length);
                        }
                        this.vmethod_0(buffer12, buffer12.Length);
                  }
                  catch (Exception exception)
                  {
                        Form1.WriteLine(1, "个人商店开店出错![" + base.Userid + "]-[" + base.UserName + "]" + exception.Message);
                  }
            }

            //퀘스트 맵이동 스크립트
            public void MoveQuestMapScript(int int_9, int MapID)
            {
                  try
                  {
                        LuaFunction function = World.scriptClass_0.pLuaVM.GetFunction("MoveQuestMap");
                        if (function != null)
                        {
                              object[] args = new object[] { int_9, MapID};
                              function.Call(args);
                        }
                        else
                        {
                              World.scriptClass_0.pLuaVM.DoString(string.Concat(new object[] { "MoveQuestMap(", int_9, ",", MapID, ")" }));
                        }
                  }
                  catch (Exception exception)
                  {
                        Form1.WriteLine(2, string.Concat(new object[] { "MoveQuestMap(", int_9, ",", MapID , ")" }));
                        Form1.WriteLine(2, "MoveQuestMapScript Error, Pleas Fix-" + exception.Message);
                  }

            }

            //NPC 대화 이벤트
            public void MO_RA_CUA_HANG(byte[] byte_5, int int_128)
            {
                  try
                  {
                        short num;
                        if ((base.NHAN_VAT_HP <= 0L) || base.PlayerIsDead)
                        {
                              return;
                        }
                        if (base.Exiting)
                        {
                              DBA.smethod_7($"UPDATE TBL_ACCOUNT SET FLD_ZT=1 WHERE FLD_ID='{base.Userid}'", "rxjhaccount");
                              Form1.WriteLine(6, "退出复制BUG11 [" + base.Userid + "][" + base.UserName + "][" + base.Client.ToString() + "] ");
                              if (base.Client != null)
                              {
                                    base.Client.Dispose();
                              }
                              return;
                        }
                        this.Packet_Modify(byte_5, int_128);
                        byte[] dst = Converter.hexStringToByte("AA551F000000009100100001000000010000000100000000000000000000000000000055AA");
                        byte[] buffer2 = new byte[2];
                        byte[] buffer3 = new byte[2];
                        byte[] buffer4 = new byte[2];
                        Buffer.BlockCopy(byte_5, 0x13, buffer2, 0, 2);
                        Buffer.BlockCopy(byte_5, 11, buffer3, 0, 2);
                        Buffer.BlockCopy(byte_5, 15, buffer4, 0, 2);
                        int num2 = BitConverter.ToInt16(buffer2, 0);
                        int num3 = BitConverter.ToInt16(buffer3, 0);
                        BitConverter.ToInt16(buffer4, 0);
                        int num4 = num3;
                        // byte[] buffer2 = new byte[2];
                        //Buffer.BlockCopy(byte_5, 11, buffer3, 0, 2);
                        //int num3 = BitConverter.ToInt16(buffer3, 0);
                        //AA552700012C0190001800C0000000000000006A000000000000000100000079690000000000000000000055AA
                        Form1.WriteLine(0, "Players ManagePacket MO_RA_CUA_HANG NO: [" + string.Format("0x{0:X}", num4) + "] (" + BitConverter.ToString(byte_5).Replace("-", "") + ")");

                        int numPacket = BitConverter.ToInt16(byte_5, 7);
                        
                        if (numPacket == 0x152)
                        {
                              Form1.WriteLine(0, "Players ManagePacket MO_RA_CUA_HANG numPacket: [" + string.Format("0x{0:X}", numPacket) + "] (" + BitConverter.ToString(byte_5).Replace("-", "") + ")");
                              goto Label_1A63;
                        }
                        if (num4 > 0x6f)
                        {
                              goto Label_101F;
                        }
                        if (num4 > 0x17)
                        {
                              goto Label_06F5;
                        }
                        if (num4 > 12)
                        {
                              goto Label_05A4;
                        }
                        switch (num4)
                        {
                              case 1:
                                    base.OpenWarehouse = true;
                                    Buffer.BlockCopy(buffer2, 0, dst, 0x13, 2);
                                    Buffer.BlockCopy(buffer3, 0, dst, 11, 2);
                                    Buffer.BlockCopy(buffer3, 0, dst, 15, 2);
                                    this.HOP_THANH_VAT_PHAM_BIEU_MAU.Clear();
                                    goto Label_1A84;

                              case 2:
                                    base.OpenWarehouse = false;
                                    this.HOP_THANH_HE_THONG_TACH_RA_SAI();
                                    Buffer.BlockCopy(buffer2, 0, dst, 0x13, 2);
                                    Buffer.BlockCopy(buffer3, 0, dst, 11, 2);
                                    Buffer.BlockCopy(buffer3, 0, dst, 15, 2);
                                    goto Label_1A84;

                              case 3:
                                    {
                                          List<TBL_XWWL_SELL> list = TBL_XWWL_SELL.smethod_0(num2);
                                          PacketData data = new PacketData();
                                          data.Write4(num3);
                                          data.Write4(num3);
                                          data.Write4(num2);
                                          data.Write4(list.Count);
                                          data.Write4(0);
                                          data.method_8(0L);
                                          foreach (TBL_XWWL_SELL tbl_xwwl_sell in list)
                                          {
                                                data.method_8((long)tbl_xwwl_sell.FLD_PID);
                                                if (tbl_xwwl_sell.FLD_MAGICZh > 0)
                                                {
                                                      data.method_8((long)tbl_xwwl_sell.FLD_MAGICZh);
                                                      if (tbl_xwwl_sell.FLD_MAGIC1 > 0)
                                                      {
                                                            data.method_8((long)tbl_xwwl_sell.FLD_MAGIC1);
                                                      }
                                                      if (tbl_xwwl_sell.FLD_MAGIC2 > 0)
                                                      {
                                                            data.method_8((long)tbl_xwwl_sell.FLD_MAGIC2);
                                                      }
                                                      if (tbl_xwwl_sell.FLD_MAGIC3 > 0)
                                                      {
                                                            data.method_8((long)tbl_xwwl_sell.FLD_MAGIC3);
                                                      }
                                                      if (tbl_xwwl_sell.FLD_MAGIC4 > 0)
                                                      {
                                                            data.method_8((long)tbl_xwwl_sell.FLD_MAGIC4);
                                                      }
                                                }
                                                else
                                                {
                                                      data.method_8(0L);
                                                }
                                                data.method_8(-1L);
                                          }
                                          if (base.Client != null)
                                          {
                                                base.Client.method_5(data, 0x9100, base.UserSessionID, 0);
                                          }
                                          return;
                                    }
                              case 4:
                                    {
                                          //퀘스트 불러오기
                                          Form1.WriteLine(0, "Players ManagePacket MO_RA_CUA_HANG QUEST: [" + string.Format("0x{0:X}", num4) + "] (" + BitConverter.ToString(byte_5).Replace("-", "") + ")");
                                          //CAP_NHAT_NHAN_VAT_NHIEM_VU();
                                          //this.NHIEM_VU_NHAC_NHO_SO_LIEU_GUI_DI(195, 2, 0);
                                          goto Label_1A63;
                                    }
                              case 5:
                                    Buffer.BlockCopy(buffer2, 0, dst, 0x13, 2);
                                    Buffer.BlockCopy(buffer3, 0, dst, 11, 2);
                                    Buffer.BlockCopy(buffer3, 0, dst, 15, 2);
                                    base.OpenWarehouse = true;
                                    this.MO_RA_NHA_KHO();
                                    this.MO_RA_TONG_HOP_NHA_KHO();
                                    goto Label_1A84;

                              case 9:
                                    num = BitConverter.ToInt16(buffer2, 0);
                                    if (num > 0x1c)
                                    {
                                          goto Label_0487;
                                    }
                                    switch (num)
                                    {
                                          case 15:
                                                goto Label_03F3;

                                          case 0x10:
                                                goto Label_043D;
                                    }
                                    goto Label_1A84;

                              case 12:
                                    Buffer.BlockCopy(buffer2, 0, dst, 0x13, 2);
                                    Buffer.BlockCopy(BitConverter.GetBytes(12), 0, dst, 11, 2);
                                    Buffer.BlockCopy(BitConverter.GetBytes(12), 0, dst, 15, 2);
                                    goto Label_1A84;

                              default:
                                    goto Label_1A63;
                        }
                        Buffer.BlockCopy(buffer2, 0, dst, 0x13, 2);
                        Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 11, 2);
                        Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 15, 2);
                        this.Move(-850f, -800f, 15f, 0x2bd);
                        goto Label_1A84;
                        Label_03F3:
                        Buffer.BlockCopy(buffer2, 0, dst, 0x13, 2);
                        Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 11, 2);
                        Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 15, 2);
                        this.Move(0f, -600f, 15f, 0x191);
                        goto Label_1A84;
                        Label_043D:
                        Buffer.BlockCopy(buffer2, 0, dst, 0x13, 1);
                        Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 11, 2);
                        Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 15, 2);
                        this.Move(0f, -600f, 15f, 0x1f5);
                        goto Label_1A84;
                        Label_0487:
                        if (num != 0x21)
                        {
                              if (num == 0x22)
                              {
                                    goto Label_04E8;
                              }
                              if (num == 0x4a)
                              {
                                    goto Label_0532;
                              }
                        }
                        else
                        {
                              Buffer.BlockCopy(buffer2, 0, dst, 0x13, 2);
                              Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 11, 2);
                              Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 15, 2);
                              this.Move(1630f, -1578f, 15f, 0x6a5);
                        }
                        goto Label_1A84;
                        Label_04E8:
                        Buffer.BlockCopy(buffer2, 0, dst, 0x13, 2);
                        Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 11, 2);
                        Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 15, 2);
                        this.Move(-1624f, 1561f, 15f, 0x579);
                        goto Label_1A84;
                        Label_0532:
                        Buffer.BlockCopy(buffer2, 0, dst, 0x13, 2);
                        Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 11, 2);
                        Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 15, 2);
                        if (base.Player_Zx == 1)
                        {
                              this.Move(1308f, 1167f, 15f, 0x7d1);
                        }
                        else
                        {
                              this.Move(1308f, 1167f, 15f, 0x7d1);
                        }
                        goto Label_1A84;
                        Label_05A4:
                        switch (num4)
                        {
                              case 15:
                                    Buffer.BlockCopy(buffer2, 0, dst, 0x13, 2);
                                    Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 11, 2);
                                    Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 15, 2);
                                    this.Move(10f, 10f, 15f, 0x4b1);
                                    goto Label_1A84;

                              case 0x10:
                                    goto Label_1A63;

                              case 0x11:
                                    Buffer.BlockCopy(buffer2, 0, dst, 0x13, 2);
                                    Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 11, 2);
                                    Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 15, 2);
                                    this.Move(500f, 1575f, 15f, 0x65);
                                    goto Label_1A84;

                              default:
                                    switch (num4)
                                    {
                                          case 0x16:
                                                Buffer.BlockCopy(buffer2, 0, dst, 0x13, 2);
                                                Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 11, 2);
                                                Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 15, 2);
                                                this.Move(-302f, 288f, 15f, 0x8fd);
                                                goto Label_1A84;

                                          case 0x17:
                                                Buffer.BlockCopy(buffer2, 0, dst, 0x13, 2);
                                                Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 11, 2);
                                                Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 15, 2);
                                                this.Move(-302f, 288f, 15f, 0x925);
                                                goto Label_1A84;
                                    }
                                    goto Label_1A63;
                        }
                        Label_06F5:
                        if (num4 <= 0x52)
                        {
                              switch (num4)
                              {
                                    case 0x2d:
                                          Buffer.BlockCopy(buffer2, 0, dst, 0x13, 2);
                                          Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 11, 2);
                                          Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 15, 2);
                                          this.Move(-272f, -261f, 15f, 0x4e21);
                                          goto Label_1A84;

                                    case 0x3e:
                                          Buffer.BlockCopy(buffer2, 0, dst, 0x13, 2);
                                          Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 11, 2);
                                          Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 15, 2);
                                          this.Move(-1f, -221f, 15f, 0x59d9);
                                          goto Label_1A84;

                                    case 0x3f:
                                          Buffer.BlockCopy(buffer2, 0, dst, 0x13, 2);
                                          Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 11, 2);
                                          Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 15, 2);
                                          this.Move(500f, 1575f, 15f, 0x65);
                                          goto Label_1A84;

                                    case 0x41:
                                          Buffer.BlockCopy(buffer2, 0, dst, 0x13, 2);
                                          Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 11, 2);
                                          Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 15, 2);
                                          this.Move(0f, -10f, 15f, 0x5a3c);
                                          goto Label_1A84;

                                    case 0x42:
                                          Buffer.BlockCopy(buffer2, 0, dst, 0x13, 2);
                                          Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 11, 2);
                                          Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 15, 2);
                                          this.Move(0f, -10f, 15f, 0x59d9);
                                          goto Label_1A84;

                                    case 0x43:
                                          Buffer.BlockCopy(buffer2, 0, dst, 0x13, 2);
                                          Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 11, 2);
                                          Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 15, 2);
                                          this.Move(0f, -10f, 15f, 0x5aa0);
                                          goto Label_1A84;

                                    case 0x44:
                                          Buffer.BlockCopy(buffer2, 0, dst, 0x13, 2);
                                          Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 11, 2);
                                          Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 15, 2);
                                          this.Move(0f, -10f, 15f, 0x5a3c);
                                          goto Label_1A84;

                                    case 0x45:
                                          Buffer.BlockCopy(buffer2, 0, dst, 0x13, 2);
                                          Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 11, 2);
                                          Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 15, 2);
                                          this.Move(0f, -10f, 15f, 0x5b04);
                                          goto Label_1A84;

                                    case 0x46:
                                          Buffer.BlockCopy(buffer2, 0, dst, 0x13, 2);
                                          Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 11, 2);
                                          Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 15, 2);
                                          this.Move(0f, -10f, 15f, 0x5aa0);
                                          goto Label_1A84;

                                    case 0x47:
                                          Buffer.BlockCopy(buffer2, 0, dst, 0x13, 2);
                                          Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 11, 2);
                                          Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 15, 2);
                                          this.Move(0f, -10f, 15f, 0x5b68);
                                          goto Label_1A84;

                                    case 0x48:
                                          Buffer.BlockCopy(buffer2, 0, dst, 0x13, 2);
                                          Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 11, 2);
                                          Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 15, 2);
                                          this.Move(0f, -10f, 15f, 0x5b04);
                                          goto Label_1A84;

                                    case 0x49:
                                          Buffer.BlockCopy(buffer2, 0, dst, 0x13, 2);
                                          Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 11, 2);
                                          Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 15, 2);
                                          this.Move(0f, -10f, 15f, 0x5bcc);
                                          goto Label_1A84;

                                    case 0x4a:
                                          Buffer.BlockCopy(buffer2, 0, dst, 0x13, 2);
                                          Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 11, 2);
                                          Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 15, 2);
                                          this.Move(0f, -10f, 15f, 0x5b68);
                                          goto Label_1A84;

                                    case 0x4b:
                                          Buffer.BlockCopy(buffer2, 0, dst, 0x13, 2);
                                          Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 11, 2);
                                          Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 15, 2);
                                          this.Move(0f, -10f, 15f, 0x5c30);
                                          goto Label_1A84;

                                    case 0x4c:
                                          Buffer.BlockCopy(buffer2, 0, dst, 0x13, 2);
                                          Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 11, 2);
                                          Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 15, 2);
                                          this.Move(0f, -10f, 15f, 0x5bcc);
                                          goto Label_1A84;

                                    case 0x4d:
                                          Buffer.BlockCopy(buffer2, 0, dst, 0x13, 2);
                                          Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 11, 2);
                                          Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 15, 2);
                                          this.Move(0f, -10f, 15f, 0x5c94);
                                          goto Label_1A84;

                                    case 0x4e:
                                          Buffer.BlockCopy(buffer2, 0, dst, 0x13, 2);
                                          Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 11, 2);
                                          Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 15, 2);
                                          this.Move(0f, -10f, 15f, 0x5c30);
                                          goto Label_1A84;

                                    case 0x4f:
                                          Buffer.BlockCopy(buffer2, 0, dst, 0x13, 2);
                                          Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 11, 2);
                                          Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 15, 2);
                                          this.Move(0f, -10f, 15f, 0x5cf8);
                                          goto Label_1A84;

                                    case 0x50:
                                          Buffer.BlockCopy(buffer2, 0, dst, 0x13, 2);
                                          Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 11, 2);
                                          Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 15, 2);
                                          this.Move(0f, -10f, 15f, 0x5c94);
                                          goto Label_1A84;

                                    case 0x51:
                                          Buffer.BlockCopy(buffer2, 0, dst, 0x13, 2);
                                          Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 11, 2);
                                          Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 15, 2);
                                          this.Move(0f, -10f, 15f, 0x5d5c);
                                          goto Label_1A84;

                                    case 0x52:
                                          Buffer.BlockCopy(buffer2, 0, dst, 0x13, 2);
                                          Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 11, 2);
                                          Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 15, 2);
                                          this.Move(0f, -10f, 15f, 0x5cf8);
                                          goto Label_1A84;

                                    case 0x26:
                                          Buffer.BlockCopy(buffer2, 0, dst, 0x13, 2);
                                          Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 11, 2);
                                          Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 15, 2);
                                          this.Move(1900f, -820f, 15f, 0x1389);
                                          goto Label_1A84;
                              }
                              goto Label_1A63;
                        }
                        if (num4 != 0x5c)
                        {
                              switch (num4)
                              {
                                    case 0x65:
                                          base.OpenWarehouse = true;
                                          Buffer.BlockCopy(buffer2, 0, dst, 0x13, 2);
                                          Buffer.BlockCopy(buffer3, 0, dst, 11, 2);
                                          Buffer.BlockCopy(buffer3, 0, dst, 15, 2);
                                          this.HOP_THANH_VAT_PHAM_BIEU_MAU.Clear();
                                          goto Label_1A84;

                                    case 0x66:
                                          base.OpenWarehouse = true;
                                          Buffer.BlockCopy(buffer2, 0, dst, 0x13, 2);
                                          Buffer.BlockCopy(buffer3, 0, dst, 11, 2);
                                          Buffer.BlockCopy(buffer3, 0, dst, 15, 2);
                                          this.HOP_THANH_VAT_PHAM_BIEU_MAU.Clear();
                                          goto Label_1A84;

                                    case 0x67:
                                          base.OpenWarehouse = true;
                                          Buffer.BlockCopy(buffer2, 0, dst, 0x13, 2);
                                          Buffer.BlockCopy(buffer3, 0, dst, 11, 2);
                                          Buffer.BlockCopy(buffer3, 0, dst, 15, 2);
                                          this.HOP_THANH_VAT_PHAM_BIEU_MAU.Clear();
                                          goto Label_1A84;

                                    case 0x69:
                                          base.OpenWarehouse = true;
                                          Buffer.BlockCopy(buffer2, 0, dst, 0x13, 2);
                                          Buffer.BlockCopy(buffer3, 0, dst, 11, 2);
                                          Buffer.BlockCopy(buffer3, 0, dst, 15, 2);
                                          this.HOP_THANH_VAT_PHAM_BIEU_MAU.Clear();
                                          goto Label_1A84;

                                    case 0x6e:
                                          base.OpenWarehouse = true;
                                          Buffer.BlockCopy(buffer2, 0, dst, 0x13, 2);
                                          Buffer.BlockCopy(buffer3, 0, dst, 11, 2);
                                          Buffer.BlockCopy(buffer3, 0, dst, 15, 2);
                                          goto Label_1A84;

                                    case 0x6f:
                                          base.OpenWarehouse = false;
                                          Buffer.BlockCopy(buffer2, 0, dst, 0x13, 2);
                                          Buffer.BlockCopy(buffer3, 0, dst, 11, 2);
                                          Buffer.BlockCopy(buffer3, 0, dst, 15, 2);
                                          goto Label_1A84;

                                    case 0x5e:
                                          goto Label_0E9B;
                              }
                              goto Label_1A63;
                        }
                        Buffer.BlockCopy(buffer2, 0, dst, 0x13, 2);
                        Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 11, 2);
                        Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 15, 2);
                        this.Move(0f, -10f, 15f, 0x5a0a);
                        goto Label_1A84;
                        Label_0E9B:
                        Buffer.BlockCopy(buffer2, 0, dst, 0x13, 2);
                        Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 11, 2);
                        Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 15, 2);
                        this.Move(-900f, 145f, 15f, 0x1771);
                        goto Label_1A84;
                        Label_101F:
                        if (num4 <= 0x8a)
                        {
                              if (num4 <= 0x7a)
                              {
                                    if (num4 != 0x75)
                                    {
                                          if (num4 != 0x7a)
                                          {
                                                goto Label_1A63;
                                          }
                                          base.OpenWarehouse = true;
                                          Buffer.BlockCopy(buffer2, 0, dst, 0x13, 2);
                                          Buffer.BlockCopy(buffer3, 0, dst, 11, 2);
                                          Buffer.BlockCopy(buffer3, 0, dst, 15, 2);
                                          this.HOP_THANH_VAT_PHAM_BIEU_MAU.Clear();
                                    }
                                    else
                                    {
                                          char[] separator = new char[] { ';' };
                                          string[] strArray = World.Application_help_combat_several_gold_bullions.Split(separator);
                                          this.KIEM_TRA_BACH_BAO_CAC_NGUYEN_BAO_SO_LUONG();
                                          if ((base.FLD_RXPIONT >= int.Parse(strArray[0])) && (base.Player_Money >= int.Parse(strArray[1])))
                                          {
                                                Buffer.BlockCopy(buffer2, 0, dst, 0x13, 2);
                                                Buffer.BlockCopy(buffer3, 0, dst, 11, 2);
                                                Buffer.BlockCopy(buffer3, 0, dst, 15, 2);
                                          }
                                          else
                                          {
                                                base.GameMessage("Your gold is not enough money or can not apply for gang warfare, gang warfare apply for a minimum of 50 gold and 50 million game coins", 9, "system hint");
                                                Buffer.BlockCopy(buffer2, 0, dst, 0x13, 2);
                                                Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 11, 2);
                                                Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 15, 2);
                                          }
                                    }
                              }
                              else if (num4 != 0x85)
                              {
                                    if (num4 != 0x8a)
                                    {
                                          goto Label_1A63;
                                    }
                                    base.OpenWarehouse = true;
                                    Buffer.BlockCopy(buffer2, 0, dst, 0x13, 2);
                                    Buffer.BlockCopy(buffer3, 0, dst, 11, 2);
                                    Buffer.BlockCopy(buffer3, 0, dst, 15, 2);
                                    this.HOP_THANH_VAT_PHAM_BIEU_MAU.Clear();
                              }
                              else
                              {
                                    base.OpenWarehouse = true;
                                    Buffer.BlockCopy(buffer2, 0, dst, 0x13, 2);
                                    Buffer.BlockCopy(buffer3, 0, dst, 11, 2);
                                    Buffer.BlockCopy(buffer3, 0, dst, 15, 2);
                              }
                        }
                        else
                        {
                              if (num4 > 0x9e)
                              {
                                    goto Label_1936;
                              }
                              switch (num4)
                              {
                                    case 0x96:
                                          if (base.Player_FLD_JOB_LEVEL >= 6)
                                          {
                                                break;
                                          }
                                          base.GameMessage("Only later can enter heaven", 9, "system hint");
                                          Buffer.BlockCopy(buffer2, 0, dst, 0x13, 2);
                                          Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 11, 2);
                                          Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 15, 2);
                                          goto Label_1A84;

                                    case 0x99:
                                          if (base.Player_FLD_JOB_LEVEL >= 6)
                                          {
                                                goto Label_13E6;
                                          }
                                          base.GameMessage("Only later can enter heaven", 9, "system hint");
                                          Buffer.BlockCopy(buffer2, 0, dst, 0x13, 2);
                                          Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 11, 2);
                                          Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 15, 2);
                                          goto Label_1A84;

                                    case 0x9a:
                                          if (base.Player_FLD_JOB_LEVEL >= 6)
                                          {
                                                goto Label_1430;
                                          }
                                          base.GameMessage("Only later can enter heaven", 9, "system hint");
                                          Buffer.BlockCopy(buffer2, 0, dst, 0x13, 2);
                                          Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 11, 2);
                                          Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 15, 2);
                                          goto Label_1A84;

                                    case 0x9d:
                                          switch (BitConverter.ToInt16(buffer2, 0))
                                          {
                                                case 0xcc:
                                                      goto Label_147A;

                                                case 0xcd:
                                                      goto Label_14F0;

                                                case 0xce:
                                                      goto Label_153A;

                                                case 0xd1:
                                                      goto Label_1584;

                                                case 210:
                                                      goto Label_15CE;

                                                case 0xd3:
                                                      goto Label_1644;

                                                case 0xc3:
                                                      goto Label_168E;
                                          }
                                          goto Label_1A84;

                                    case 0x9e:
                                          switch (BitConverter.ToInt16(buffer2, 0))
                                          {
                                                case 0xcc:
                                                      goto Label_16D8;

                                                case 0xcd:
                                                      goto Label_174E;

                                                case 0xce:
                                                      goto Label_1798;

                                                case 0xd1:
                                                      goto Label_17E2;

                                                case 210:
                                                      goto Label_182C;

                                                case 0xd3:
                                                      goto Label_18A2;

                                                case 0xc3:
                                                      goto Label_18EC;
                                          }
                                          goto Label_1A84;

                                    case 0x92:
                                          base.OpenWarehouse = true;
                                          Buffer.BlockCopy(buffer2, 0, dst, 0x13, 2);
                                          Buffer.BlockCopy(buffer3, 0, dst, 11, 2);
                                          Buffer.BlockCopy(buffer3, 0, dst, 15, 2);
                                          this.HOP_THANH_VAT_PHAM_BIEU_MAU.Clear();
                                          goto Label_1A84;

                                    default:
                                          goto Label_1A63;
                              }
                              Buffer.BlockCopy(buffer2, 0, dst, 0x13, 2);
                              Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 11, 2);
                              Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 15, 2);
                              this.Move(1884f, -1635f, 15f, 0x620c);
                        }
                        goto Label_1A84;
                        Label_13E6:
                        Buffer.BlockCopy(buffer2, 0, dst, 0x13, 2);
                        Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 11, 2);
                        Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 15, 2);
                        this.Move(-360f, -363f, 15f, 0x6271);
                        goto Label_1A84;
                        Label_1430:
                        Buffer.BlockCopy(buffer2, 0, dst, 0x13, 2);
                        Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 11, 2);
                        Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 15, 2);
                        this.Move(117f, -267f, 15f, 0x6272);
                        goto Label_1A84;
                        Label_147A:
                        Buffer.BlockCopy(buffer2, 0, dst, 0x13, 2);
                        Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 11, 2);
                        Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 15, 2);
                        if (base.CharacterCoords_Map == 0x627a)
                        {
                              this.Move(117f, -267f, 15f, 0x6272);
                        }
                        else
                        {
                              this.Move(158f, -312f, 15f, 0x6278);
                        }
                        goto Label_1A84;
                        Label_14F0:
                        Buffer.BlockCopy(buffer2, 0, dst, 0x13, 2);
                        Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 11, 2);
                        Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 15, 2);
                        this.Move(138f, -271f, 15f, 0x6275);
                        goto Label_1A84;
                        Label_153A:
                        Buffer.BlockCopy(buffer2, 0, dst, 0x13, 2);
                        Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 11, 2);
                        Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 15, 2);
                        this.Move(32f, 92f, 15f, 0x6279);
                        goto Label_1A84;
                        Label_1584:
                        Buffer.BlockCopy(buffer2, 0, dst, 0x13, 2);
                        Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 11, 2);
                        Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 15, 2);
                        this.Move(158f, 256f, 15f, 0x6276);
                        goto Label_1A84;
                        Label_15CE:
                        Buffer.BlockCopy(buffer2, 0, dst, 0x13, 2);
                        Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 11, 2);
                        Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 15, 2);
                        if (base.CharacterCoords_Map == 0x6279)
                        {
                              this.Move(154f, 30f, 15f, 0x627a);
                        }
                        else
                        {
                              this.Move(300f, 92f, 15f, 0x6277);
                        }
                        goto Label_1A84;
                        Label_1644:
                        Buffer.BlockCopy(buffer2, 0, dst, 0x13, 2);
                        Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 11, 2);
                        Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 15, 2);
                        this.Move(125f, -329f, 15f, 0x6273);
                        goto Label_1A84;
                        Label_168E:
                        Buffer.BlockCopy(buffer2, 0, dst, 0x13, 2);
                        Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 11, 2);
                        Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 15, 2);
                        this.Move(124f, -244f, 15f, 0x6274);
                        goto Label_1A84;
                        Label_16D8:
                        Buffer.BlockCopy(buffer2, 0, dst, 0x13, 2);
                        Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 11, 2);
                        Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 15, 2);
                        if (base.CharacterCoords_Map == 0x627a)
                        {
                              this.Move(154f, 30f, 15f, 0x627a);
                        }
                        else
                        {
                              this.Move(300f, 92f, 15f, 0x6277);
                        }
                        goto Label_1A84;
                        Label_174E:
                        Buffer.BlockCopy(buffer2, 0, dst, 0x13, 2);
                        Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 11, 2);
                        Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 15, 2);
                        this.Move(124f, -244f, 15f, 0x6274);
                        goto Label_1A84;
                        Label_1798:
                        Buffer.BlockCopy(buffer2, 0, dst, 0x13, 2);
                        Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 11, 2);
                        Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 15, 2);
                        this.Move(158f, -312f, 15f, 0x6278);
                        goto Label_1A84;
                        Label_17E2:
                        Buffer.BlockCopy(buffer2, 0, dst, 0x13, 2);
                        Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 11, 2);
                        Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 15, 2);
                        this.Move(138f, -271f, 15f, 0x6275);
                        goto Label_1A84;
                        Label_182C:
                        Buffer.BlockCopy(buffer2, 0, dst, 0x13, 2);
                        Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 11, 2);
                        Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 15, 2);
                        if (base.CharacterCoords_Map == 0x6279)
                        {
                              this.Move(32f, 92f, 15f, 0x6279);
                        }
                        else
                        {
                              this.Move(158f, 256f, 15f, 0x6276);
                        }
                        goto Label_1A84;
                        Label_18A2:
                        Buffer.BlockCopy(buffer2, 0, dst, 0x13, 2);
                        Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 11, 2);
                        Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 15, 2);
                        this.Move(117f, -267f, 15f, 0x6272);
                        goto Label_1A84;
                        Label_18EC:
                        Buffer.BlockCopy(buffer2, 0, dst, 0x13, 2);
                        Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 11, 2);
                        Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 15, 2);
                        this.Move(125f, -329f, 15f, 0x6273);
                        goto Label_1A84;
                        Label_1936:
                        if (num4 != 170)
                        {
                              if (num4 == 0xad)
                              {
                                    goto Label_199B;
                              }
                              if (num4 == 0xb0)
                              {
                                    goto Label_1A2E;
                              }
                              if (num4 == 0x152)
                              {
                                    Form1.WriteLine(1, "Players ManagePacket MO_RA_CUA_HANG [Unkown Packet]");
                              }
                              if (num4 == 0xc0 || num4 == 0xc9)
                              {
                                    byte[] buffer_map = new byte[4];
                                    Buffer.BlockCopy(byte_5, 31, buffer_map, 0, 4);
                                    //Array.Reverse(buffer_map);
                                    int MapID = BitConverter.ToInt16(buffer_map, 0);
                                    //int ConMapID = (int)Reverse(MapID);
                                    //시공의문 이동
                                    //AA55 2700 012C 0190 0018 00C0 0000 0000 0000 006A 0000 0000 0000 0000 0000 0000 0000 0000 0000000000000055AA
                                    //AA55 2700 012C 0190 0018 00C0 0000 0000 0000 006A 0000 0000 0000 0001 0000 007969 0000000000000000000055AA
                                    //AA55 2700 012C 0190 0018 00C0 0000 0000 0000 006A 0000 0000 0000 0001 0000 00416A 0000000000000000000055AA
                                    Form1.WriteLine(1, "Players ManagePacket MO_RA_CUA_HANG MapID : [" + string.Format("0x{0:X}", MapID) + "] (" + BitConverter.ToString(byte_5).Replace("-", "") + ")");
                                    if (MapID > 0)
                                    {
                                          
                                          Buffer.BlockCopy(buffer2, 0, dst, 0x13, 2);
                                          Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 11, 2);
                                          Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 15, 2);
                                          //MoveQuestMapScript(base.UserSessionID, MapID);
                                          goto Label_1A84;
                                          /*
                                          if (MapID == 0x6979)
                                          {
                                                //황량한 협곡                                                
                                                Buffer.BlockCopy(buffer2, 0, dst, 0x13, 2);
                                                Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 11, 2);
                                                Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 15, 2);
                                                this.Move(2f, -1f, 15f, 0x6979);
                                                goto Label_1A84;
                                          }
                                          else if(MapID == 0x6a41)
                                          {
                                                //현발파 대련장
                                                Form1.WriteLine(1, "Players ManagePacket MO_RA_CUA_HANG 2 MapID : [" + string.Format("0x{0:X}", MapID) + "] (" + BitConverter.ToString(byte_5).Replace("-", "") + ")");
                                                Buffer.BlockCopy(buffer2, 0, dst, 0x13, 2);
                                                Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 11, 2);
                                                Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 15, 2);
                                                this.Move(-7f, 5f, 15f, 0x6a41);
                                                goto Label_1A84;

                                          }
                                          */
                                    }
                                    else
                                    {
                                          //goto Label_1A84;
                                    }                                    
                              }
                              goto Label_1A63;
                        }
                        byte[] buffer5 = Converter.hexStringToByte("AA551B0001050022010C000A000000010000002C650000000000000000610555AA");
                        Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, buffer5, 5, 2);
                        if (base.Client != null)
                        {
                              base.Client.Send(buffer5, buffer5.Length);
                        }
                        goto Label_1A84;
                        Label_199B:
                        if (base.Player_FLD_LEVEL < 120)
                        {
                              base.GameMessage("You can only enter the Level 120 above", 9, "system hint");
                              Buffer.BlockCopy(buffer2, 0, dst, 0x13, 2);
                              Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 11, 2);
                              Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 15, 2);
                        }
                        else
                        {
                              Buffer.BlockCopy(buffer2, 0, dst, 0x13, 2);
                              Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 11, 2);
                              Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 15, 2);
                              this.Move(1987f, -2030f, 15f, 0x6590);
                        }
                        goto Label_1A84;
                        Label_1A2E:
                        base.OpenWarehouse = true;
                        Buffer.BlockCopy(buffer2, 0, dst, 0x13, 2);
                        Buffer.BlockCopy(buffer3, 0, dst, 11, 2);
                        Buffer.BlockCopy(buffer3, 0, dst, 15, 2);
                        this.HOP_THANH_VAT_PHAM_BIEU_MAU.Clear();
                        goto Label_1A84;
                        Label_1A63:
                        Buffer.BlockCopy(buffer2, 0, dst, 0x13, 2);
                        Buffer.BlockCopy(buffer3, 0, dst, 11, 2);
                        Buffer.BlockCopy(buffer3, 0, dst, 15, 2);
                        Label_1A84:
                        Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, dst, 5, 2);
                        if (base.Client != null)
                        {
                              base.Client.Send(dst, dst.Length);
                        }
                  }
                  catch (Exception exception)
                  {
                        Form1.WriteLine(1, "打开商店 出错 [" + base.Userid + "][" + base.UserName + "] " + exception.Message);
                  }
            }

            //리틀엔디언
            static uint Reverse(uint x)
            {
                  uint y = 0;
                  for (int i = 0; i < 32; ++i)
                  {
                        y <<= 1;
                        y |= (x & 1);
                        x >>= 1;
                  }
                  return y;
            }
            private int ReverseBytes(int val)
            {
                  byte[] intAsBytes = BitConverter.GetBytes(val);
                  Array.Reverse(intAsBytes);
                  return BitConverter.ToInt32(intAsBytes, 0);
            }

            public void MO_RA_ITEM_PHAT_DONG_CONG_CU(byte[] byte_5)
            {
                  try
                  {
                        if (!base.PlayerIsDead && (base.NHAN_VAT_HP > 0L))
                        {
                              TBL_XWWL_ITEM tbl_xwwl_item;
                              int index = byte_5[12];
                              byte[] dst = new byte[4];
                              byte[] buffer2 = new byte[4];
                              Buffer.BlockCopy(byte_5, 15, dst, 0, 4);
                              Buffer.BlockCopy(byte_5, 0x17, buffer2, 0, 4);
                              int key = BitConverter.ToInt32(dst, 0);
                              BitConverter.ToInt32(buffer2, 0);
                              if (((BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_ID, 0) == key) && World.Itme.TryGetValue(key, out tbl_xwwl_item)) && (BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_ID, 0) != 0))
                              {
                                    try
                                    {
                                          if (World.scriptClass_0.MO_RA_VAT_PHAM_SU_KIEM != null)
                                          {
                                                object[] args = new object[] { base.UserSessionID, key, index, BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_SO_LUONG, 0) };
                                                World.scriptClass_0.MO_RA_VAT_PHAM_SU_KIEM.Call(args);
                                          }
                                    }
                                    catch (Exception exception)
                                    {
                                          Form1.WriteLine(2, string.Concat(new object[] { "OpenItmeTrigGer(", base.UserSessionID, ",", key, ",", index, ",", BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_SO_LUONG, 0), ")" }));
                                          Form1.WriteLine(2, "打开VAT_PHAM触发器1出错--" + exception.Message);
                                    }
                              }
                        }
                  }
                  catch (Exception exception2)
                  {
                        Form1.WriteLine(2, "打开VAT_PHAM触发器2出错--" + exception2.Message);
                  }
            }

            public void MO_RA_NHA_KHO()
            {
                  try
                  {
                        PacketData data = new PacketData();
                        data.Write4(5);
                        data.Write4(5);
                        data.Write4(8);
                        for (int i = 0; i < 60; i++)
                        {
                              if (BitConverter.ToInt32(base.class23_0[i].VAT_PHAM_SO_LUONG, 0) == 0)
                              {
                                    base.class23_0[i].Item_byte = new byte[0x49];
                              }
                              else
                              {
                                    base.method_12("个人仓库", ref base.class23_0[i]);
                              }
                              if (((base.class23_0[i].FLD_FJ_trung_cap_phu_hon <= 0x16) && (base.class23_0[i].FLD_FJ_trung_cap_phu_hon >= 0x15)) && (base.class23_0[i].FLD_FJ_thuc_tinh > 0))
                              {
                                    base.class23_0[i].Item_trung_cap_phu_hon_them_vao_thuc_tinh = base.class23_0[i].FLD_FJ_trung_cap_phu_hon - 20;
                              }
                              data.method_10(base.class23_0[i].method_0(), 0, World.int_5);
                        }
                        data.method_8(base.CA_NHAN_NHA_KHO_TIEN_SO_LUONG);
                        if (base.Client != null)
                        {
                              base.Client.method_4(data, 0x9600, base.UserSessionID);
                        }
                  }
                  catch (Exception exception)
                  {
                        Form1.WriteLine(1, "打开个人仓库出错 [" + base.Userid + "][" + base.UserName + "] " + exception.Message);
                  }
            }

            public void MO_RA_PHU(byte[] byte_5, int int_128)
            {
                  try
                  {
                        if (base.dictionary_3.Count >= 1)
                        {
                              return;
                        }
                        this.Packet_Modify(byte_5, int_128);
                        int index = byte_5[0x15];
                        byte[] dst = new byte[4];
                        Buffer.BlockCopy(byte_5, 13, dst, 0, 4);
                        int num2 = Converter.smethod_31(Converter.smethod_24(dst));
                        int num3 = num2;
                        if (num3 > 0x3c14dc3f)
                        {
                              goto Label_04F4;
                        }
                        switch (num3)
                        {
                              case 0x3c14dc1b:
                                    if (BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_ID, 0) == 0x3c14dc1b)
                                    {
                                          goto Label_01DB;
                                    }
                                    return;

                              case 0x3c14dc1c:
                                    if (BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_ID, 0) == 0x3c14dc1c)
                                    {
                                          goto Label_02F2;
                                    }
                                    return;

                              case 0x3c14dc1d:
                                    if (BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_ID, 0) == 0x3c14dc1d)
                                    {
                                          goto Label_0409;
                                    }
                                    return;

                              case 0x3c14dc3f:
                                    if ((((BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_ID, 0) == 0x3c14dc3f) && !base.dictionary_3.ContainsKey(0x3c14dc8d)) && (!base.dictionary_3.ContainsKey(0x3c14dd38) && !base.dictionary_3.ContainsKey(0x3c14dc3f))) && ((!base.dictionary_3.ContainsKey(0x3c14dc1b) && !base.dictionary_3.ContainsKey(0x3c14dc1c)) && !base.dictionary_3.ContainsKey(0x3c14dc1d)))
                                    {
                                          break;
                                    }
                                    return;

                              default:
                                    goto Label_070F;
                        }
                        DateTime time4 = new DateTime(0x7b2, 1, 1, 8, 0, 0);
                        TimeSpan span4 = DateTime.Now.AddDays(2.0).Subtract(time4);
                        PUBLIC_DUOC_PHAM_LOAI public_duoc_pham_loai4 = new PUBLIC_DUOC_PHAM_LOAI
                        {
                              DUOC_PHAM_ID = num2,
                              THOI_GIAN = (int)span4.TotalSeconds
                        };
                        base.dictionary_3.Add(public_duoc_pham_loai4.DUOC_PHAM_ID, public_duoc_pham_loai4);
                        this.SET_PUBLIC_ITEM(public_duoc_pham_loai4);
                        this.LAM_GIAM_DI_VAT_PHAM(index, 1);
                        goto Label_070F;
                        Label_01DB:
                        if (((base.dictionary_3.ContainsKey(0x3c14dc8d) || base.dictionary_3.ContainsKey(0x3c14dd38)) || (base.dictionary_3.ContainsKey(0x3c14dc3f) || base.dictionary_3.ContainsKey(0x3c14dc1b))) || (base.dictionary_3.ContainsKey(0x3c14dc1c) || base.dictionary_3.ContainsKey(0x3c14dc1d)))
                        {
                              return;
                        }
                        DateTime time = new DateTime(0x7b2, 1, 1, 8, 0, 0);
                        TimeSpan span = DateTime.Now.AddDays(30.0).Subtract(time);
                        PUBLIC_DUOC_PHAM_LOAI public_duoc_pham_loai = new PUBLIC_DUOC_PHAM_LOAI
                        {
                              DUOC_PHAM_ID = num2,
                              THOI_GIAN = (int)span.TotalSeconds
                        };
                        base.dictionary_3.Add(public_duoc_pham_loai.DUOC_PHAM_ID, public_duoc_pham_loai);
                        this.SET_PUBLIC_ITEM(public_duoc_pham_loai);
                        this.LAM_GIAM_DI_VAT_PHAM(index, 1);
                        byte[] bytes = BitConverter.GetBytes(RxjhClass.GetDBItmeId());
                        this.TANG_CUONG_VAT_PHAM(bytes, BitConverter.GetBytes(0x2faf0805), index, BitConverter.GetBytes(1), new byte[20]);
                        goto Label_070F;
                        Label_02F2:
                        if (((base.dictionary_3.ContainsKey(0x3c14dc8d) || base.dictionary_3.ContainsKey(0x3c14dd38)) || (base.dictionary_3.ContainsKey(0x3c14dc3f) || base.dictionary_3.ContainsKey(0x3c14dc1b))) || (base.dictionary_3.ContainsKey(0x3c14dc1c) || base.dictionary_3.ContainsKey(0x3c14dc1d)))
                        {
                              return;
                        }
                        DateTime time2 = new DateTime(0x7b2, 1, 1, 8, 0, 0);
                        TimeSpan span2 = DateTime.Now.AddDays(30.0).Subtract(time2);
                        PUBLIC_DUOC_PHAM_LOAI public_duoc_pham_loai2 = new PUBLIC_DUOC_PHAM_LOAI
                        {
                              DUOC_PHAM_ID = num2,
                              THOI_GIAN = (int)span2.TotalSeconds
                        };
                        base.dictionary_3.Add(public_duoc_pham_loai2.DUOC_PHAM_ID, public_duoc_pham_loai2);
                        this.SET_PUBLIC_ITEM(public_duoc_pham_loai2);
                        this.LAM_GIAM_DI_VAT_PHAM(index, 1);
                        byte[] buffer3 = BitConverter.GetBytes(RxjhClass.GetDBItmeId());
                        this.TANG_CUONG_VAT_PHAM(buffer3, BitConverter.GetBytes(0x2faf0805), index, BitConverter.GetBytes(1), new byte[20]);
                        goto Label_070F;
                        Label_0409:
                        if (((base.dictionary_3.ContainsKey(0x3c14dc8d) || base.dictionary_3.ContainsKey(0x3c14dd38)) || (base.dictionary_3.ContainsKey(0x3c14dc3f) || base.dictionary_3.ContainsKey(0x3c14dc1b))) || (base.dictionary_3.ContainsKey(0x3c14dc1c) || base.dictionary_3.ContainsKey(0x3c14dc1d)))
                        {
                              return;
                        }
                        DateTime time3 = new DateTime(0x7b2, 1, 1, 8, 0, 0);
                        TimeSpan span3 = DateTime.Now.AddDays(30.0).Subtract(time3);
                        PUBLIC_DUOC_PHAM_LOAI public_duoc_pham_loai3 = new PUBLIC_DUOC_PHAM_LOAI
                        {
                              DUOC_PHAM_ID = num2,
                              THOI_GIAN = (int)span3.TotalSeconds
                        };
                        base.dictionary_3.Add(public_duoc_pham_loai3.DUOC_PHAM_ID, public_duoc_pham_loai3);
                        this.SET_PUBLIC_ITEM(public_duoc_pham_loai3);
                        this.LAM_GIAM_DI_VAT_PHAM(index, 1);
                        goto Label_070F;
                        Label_04F4:
                        if (num3 != 0x3c14dc8d)
                        {
                              if (num3 == 0x3c14dd38)
                              {
                                    if ((((BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_ID, 0) != 0x3c14dd38) || base.dictionary_3.ContainsKey(0x3c14dc8d)) || (base.dictionary_3.ContainsKey(0x3c14dd38) || base.dictionary_3.ContainsKey(0x3c14dc3f))) || ((base.dictionary_3.ContainsKey(0x3c14dc1b) || base.dictionary_3.ContainsKey(0x3c14dc1c)) || base.dictionary_3.ContainsKey(0x3c14dc1d)))
                                    {
                                          return;
                                    }
                                    DateTime time6 = new DateTime(0x7b2, 1, 1, 8, 0, 0);
                                    TimeSpan span5 = DateTime.Now.AddDays(30.0).Subtract(time6);
                                    PUBLIC_DUOC_PHAM_LOAI public_duoc_pham_loai5 = new PUBLIC_DUOC_PHAM_LOAI
                                    {
                                          DUOC_PHAM_ID = num2,
                                          THOI_GIAN = (int)span5.TotalSeconds
                                    };
                                    base.dictionary_3.Add(public_duoc_pham_loai5.DUOC_PHAM_ID, public_duoc_pham_loai5);
                                    this.SET_PUBLIC_ITEM(public_duoc_pham_loai5);
                                    this.LAM_GIAM_DI_VAT_PHAM(index, 1);
                              }
                        }
                        else
                        {
                              if ((((BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_ID, 0) != 0x3c14dc8d) || base.dictionary_3.ContainsKey(0x3c14dc8d)) || (base.dictionary_3.ContainsKey(0x3c14dd38) || base.dictionary_3.ContainsKey(0x3c14dc3f))) || ((base.dictionary_3.ContainsKey(0x3c14dc1b) || base.dictionary_3.ContainsKey(0x3c14dc1c)) || base.dictionary_3.ContainsKey(0x3c14dc1d)))
                              {
                                    return;
                              }
                              DateTime time7 = new DateTime(0x7b2, 1, 1, 8, 0, 0);
                              TimeSpan span6 = DateTime.Now.AddDays(10.0).Subtract(time7);
                              PUBLIC_DUOC_PHAM_LOAI public_duoc_pham_loai6 = new PUBLIC_DUOC_PHAM_LOAI
                              {
                                    DUOC_PHAM_ID = num2,
                                    THOI_GIAN = (int)span6.TotalSeconds
                              };
                              base.dictionary_3.Add(public_duoc_pham_loai6.DUOC_PHAM_ID, public_duoc_pham_loai6);
                              this.SET_PUBLIC_ITEM(public_duoc_pham_loai6);
                              this.LAM_GIAM_DI_VAT_PHAM(index, 1);
                        }
                        Label_070F:
                        base.UpdateMoneyAndWeight();
                  }
                  catch (Exception exception)
                  {
                        Form1.WriteLine(1, "Open the symbol error![" + base.Userid + "]-[" + base.UserName + "]" + exception.Message);
                  }
            }

            public void MO_RA_PHU_DOI_TEN(byte[] byte_5, int int_128)
            {
                  int num = BitConverter.ToInt32(byte_5, 15);
                  if (num == 0x3c14dc7e)
                  {
                        PacketData data = new PacketData();
                        data.Write4(0);
                        data.method_8((long)num);
                        data.Write4(0);
                        data.Write4(0);
                        data.Write4(0);
                        data.Write4(0);
                        data.Write4(1);
                        if (base.Client != null)
                        {
                              base.Client.method_4(data, 0x7430, base.UserSessionID);
                        }
                  }
            }

            public void MO_RA_TONG_HOP_NHA_KHO()
            {
                  try
                  {
                        PacketData data = new PacketData();
                        data.Write4(5);
                        data.Write4(5);
                        data.Write4(9);
                        for (int i = 0; i < 60; i++)
                        {
                              if (BitConverter.ToInt32(base.class23_1[i].VAT_PHAM_SO_LUONG, 0) == 0)
                              {
                                    base.class23_1[i].Item_byte = new byte[0x49];
                              }
                              else
                              {
                                    base.method_12("公共仓库", ref base.class23_1[i]);
                              }
                              if (((base.class23_1[i].FLD_FJ_trung_cap_phu_hon <= 0x16) && (base.class23_1[i].FLD_FJ_trung_cap_phu_hon >= 0x15)) && (base.class23_1[i].FLD_FJ_thuc_tinh > 0))
                              {
                                    base.class23_1[i].Item_trung_cap_phu_hon_them_vao_thuc_tinh = base.class23_1[i].FLD_FJ_trung_cap_phu_hon - 20;
                              }
                              data.method_10(base.class23_1[i].method_0(), 0, World.int_5);
                        }
                        data.method_8(base.TONG_HOP_NHA_KHO_TIEN_SO);
                        if (base.Client != null)
                        {
                              base.Client.method_4(data, 0x9600, base.UserSessionID);
                        }
                  }
                  catch (Exception exception)
                  {
                        Form1.WriteLine(1, "打开综合仓库出错 [" + base.Userid + "][" + base.UserName + "] " + exception.Message);
                  }
            }

            public void Move(float float_4, float float_5, float float_6, int map)
            {
                  char[] separator = new char[] { ',' };
                  string[] strArray = World.Nguc_giam_ban_do.Trim().Split(separator);
                  if (World.jlMsg == 1)
                  {
                        Form1.WriteLine(0, "Players_移动");
                  }
                  if (base.PlayerShop == null)
                  {
                        if ((base.CharacterCoords_Map == int.Parse(strArray[0])) && (base.NHAN_VAT_THIEN_AC < 0))
                        {
                              base.GameMessage("TEST11", 10, "Flower lady");
                        }
                        else if (World.Khieu_chien_ban_do_so_hieu == map)
                        {
                              base.GameMessage("TEST12", 10, "Flower lady");
                        }
                        else if (base.CharacterCoords_Map == World.Khieu_chien_ban_do_so_hieu)
                        {
                              base.GameMessage("TEST13", 10, "Flower lady");
                        }
                        else if (((this.VIP_BAN_DO(map) != 0) && (this.NGAY_ROI_BAN_DO(map) != 0)) && (this.CHUYEN_DEN_BAN_DO_NHA_TU(map) != 0))
                        {
                              try
                              {
                                    if (base.CharacterCoords_Map == 0x321)
                                    {
                                          if (base.Player_Zx == 1)
                                          {
                                                World.THE_LUC_CHIEN_2_CHINH_PHAI_SO_NGUOI--;
                                          }
                                          else
                                          {
                                                World.THE_LUC_CHIEN_TA_PHAI_SO_NGUOI--;
                                          }
                                          base.Evil_mode = 0;
                                          base.Update_Figure_Data(this);
                                          base.Update_Data_Boardcast();
                                          base.SendCountdown(14, 2, 0);
                                          base.GUI_DI_THE_LUC_CHIEN_DONG_CUA_TIN_TUC();
                                          if (World.list_0.Contains(this))
                                          {
                                                World.list_0.Remove(this);
                                          }
                                    }
                                    else if (((base.CharacterCoords_Map == 0x321) & (map != 0x321)) && (World.THE_LUC_CHIEN_2_TIEN_TRINH >= 5))
                                    {
                                          base.Evil_mode = 0;
                                          base.Update_Figure_Data(this);
                                          base.Update_Data_Boardcast();
                                          base.SendCountdown(14, 2, 0);
                                          base.GUI_DI_THE_LUC_CHIEN_DONG_CUA_TIN_TUC();
                                          if (World.list_0.Contains(this))
                                          {
                                                World.list_0.Remove(this);
                                          }
                                    }
                                    this.DI_CHUYEN_KHOANG_CACH_TRUOC_BAN_DO(map);
                                    byte[] dst = Converter.hexStringToByte("AA551F00000000790010000020D7C500007041000040422D010000000000000000000055AA");
                                    base.CharacterCoords_X = float_4;
                                    base.CharacterCoords_Y = float_5;
                                    base.CharacterCoords_Z = float_6;
                                    base.CharacterCoords_Map = map;
                                    Buffer.BlockCopy(BitConverter.GetBytes(base.CharacterCoords_X), 0, dst, 11, 4);
                                    Buffer.BlockCopy(BitConverter.GetBytes(base.CharacterCoords_Y), 0, dst, 0x13, 4);
                                    Buffer.BlockCopy(BitConverter.GetBytes(base.CharacterCoords_Z), 0, dst, 15, 4);
                                    Buffer.BlockCopy(BitConverter.GetBytes(base.CharacterCoords_Map), 0, dst, 0x17, 4);
                                    Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, dst, 5, 2);
                                    if (base.Client != null)
                                    {
                                          base.Client.Send(dst, dst.Length);
                                    }
                                    this.BAT_GIU_KIEM_TRA_LAI_PHAM_VI_NGUOI_CHOI();
                                    this.BAT_GIU_KIEM_TRA_LAI_NPC();
                                    this.BAT_GIU_KIEM_TRA_LAI_PHAM_VI_MAT_DAT_VAT_PHAM();
                                    this.ServerTime();
                                    base.OpenWarehouse = false;
                                    if ((map == 0x321) && (World.THE_LUC_CHIEN_2_TIEN_TRINH == 3))
                                    {
                                          base.GUI_DI_THE_LUC_CHIEN_TIN_TUC_2();
                                          base.GUI_DI_THE_LUC_CHIEN_TIN_TUC();
                                    }
                              }
                              catch (Exception exception)
                              {
                                    Form1.WriteLine(1, "移动 出错 [" + base.Userid + "][" + base.UserName + "] " + exception.Message);
                              }
                        }
                  }
            }

            public void MOVE_NEW(float float_4, float float_5, float float_6, int int_128)
            {
                  char[] separator = new char[] { ',' };
                  string[] strArray = World.Nguc_giam_ban_do.Trim().Split(separator);
                  if (World.jlMsg == 1)
                  {
                        Form1.WriteLine(0, "Players_移动");
                  }
                  if (base.PlayerShop == null)
                  {
                        if ((base.CharacterCoords_Map == int.Parse(strArray[0])) && (base.NHAN_VAT_THIEN_AC < 0))
                        {
                              base.GameMessage("Oh you want to escape the flies are flying here do not go out and secure bubble point of it", 10, "Flower lady");
                        }
                        else if (((this.VIP_BAN_DO(int_128) != 0) && (this.NGAY_ROI_BAN_DO(int_128) != 0)) && (this.CHUYEN_DEN_BAN_DO_NHA_TU(int_128) != 0))
                        {
                              try
                              {
                                    if (base.CharacterCoords_Map == 0x321)
                                    {
                                          base.GUI_DI_THE_LUC_CHIEN_DONG_CUA_TIN_TUC();
                                    }
                                    this.DI_CHUYEN_KHOANG_CACH_TRUOC_BAN_DO(int_128);
                                    byte[] dst = Converter.hexStringToByte("AA551F00000000790010000020D7C500007041000040422D010000000000000000000055AA");
                                    base.CharacterCoords_X = float_4;
                                    base.CharacterCoords_Y = float_5;
                                    base.CharacterCoords_Z = float_6;
                                    base.CharacterCoords_Map = int_128;
                                    Buffer.BlockCopy(BitConverter.GetBytes(base.CharacterCoords_X), 0, dst, 11, 4);
                                    Buffer.BlockCopy(BitConverter.GetBytes(base.CharacterCoords_Y), 0, dst, 0x13, 4);
                                    Buffer.BlockCopy(BitConverter.GetBytes(base.CharacterCoords_Z), 0, dst, 15, 4);
                                    Buffer.BlockCopy(BitConverter.GetBytes(base.CharacterCoords_Map), 0, dst, 0x17, 4);
                                    Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, dst, 5, 2);
                                    if (base.Client != null)
                                    {
                                          base.Client.Send(dst, dst.Length);
                                    }
                                    this.BAT_GIU_KIEM_TRA_LAI_PHAM_VI_NGUOI_CHOI();
                                    this.BAT_GIU_KIEM_TRA_LAI_NPC();
                                    this.BAT_GIU_KIEM_TRA_LAI_PHAM_VI_MAT_DAT_VAT_PHAM();
                                    this.ServerTime();
                                    base.OpenWarehouse = false;
                              }
                              catch (Exception exception)
                              {
                                    Form1.WriteLine(1, "移动 出错 [" + base.Userid + "][" + base.UserName + "] " + exception.Message);
                              }
                        }
                  }
            }

            public void MoveAll(object sender, ElapsedEventArgs e)
            {
                  if (World.jlMsg == 1)
                  {
                        Form1.WriteLine(0, "Players_MoveAll");
                  }
                  try
                  {
                        Players players = World.smethod_1(base.UserSessionID);
                        if (players != null)
                        {
                              char[] separator = new char[] { ',' };
                              string[] strArray = World.Thang_cap_thanh_vien_can_Thuoc_tinh.Split(separator);
                              char[] chArray2 = new char[] { ',' };
                              string[] strArray2 = World.Treo_thiet_bi_khen_thuong.Trim().Split(chArray2);
                              char[] chArray3 = new char[] { ',' };
                              string[] strArray3 = World.VIP_Treo_thiet_bi_khen_thuong.Trim().Split(chArray3);
                              char[] chArray4 = new char[] { ',' };
                              string[] strArray4 = World.Cach_Tuyen_Treo_thiet_bi_khen_thuong.Trim().Split(chArray4);
                              char[] chArray5 = new char[] { ',' };
                              string[] strArray5 = World.Cach_Tuyen_VIP_Treo_thiet_bi_khen_thuong.Trim().Split(chArray5);
                              char[] chArray6 = new char[] { ',' };
                              string[] strArray6 = World.Nguc_giam_ban_do.Trim().Split(chArray6);
                              char[] chArray7 = new char[] { ',' };
                              string[] strArray7 = World.Ngoi_tu_tro_ve_thanh_toa_do.Trim().Split(chArray7);
                              if ((World.Co_hay_khong_mo_ra_o_tuyen_thoi_gian_khen_thuong != 0) && !base.Client.offLineStatus)
                              {
                                    int totalMinutes = (int)DateTime.Now.Subtract(base.dateTime_3).TotalMinutes;
                                    if (totalMinutes >= 1)
                                    {
                                          base.TONG_QUAT_TUYEN_THOI_GIAN += totalMinutes;
                                          foreach (ns2.TRUC_TUYEN_THOI_GIAN_KHEN_THUONG truc_tuyen_thoi_gian_khen_thuong in World.dictionary_18.Values)
                                          {
                                                if (base.TONG_QUAT_TUYEN_THOI_GIAN == truc_tuyen_thoi_gian_khen_thuong.THOI_GIAN_PHUT)
                                                {
                                                      players.TRUC_TUYEN_THOI_GIAN_KHEN_THUONG();
                                                }
                                          }
                                          base.dateTime_3 = DateTime.Now;
                                    }
                              }
                              if (World.Ngoi_tu_he_thong_co_hay_khong_mo_ra != 0)
                              {
                                    if ((base.NHAN_VAT_THIEN_AC <= World.Ngoi_tu_thien_ac) && (base.CharacterCoords_Map != int.Parse(strArray6[0])))
                                    {
                                          World.SendMsg(string.Format(World.Ngoi_tu_giet_nguoi_thong_cao, base.UserName));
                                          this.Move((float)int.Parse(strArray6[1]), (float)int.Parse(strArray6[2]), 15f, int.Parse(strArray6[0]));
                                          base.GameMessage("Ban bi dua vao nha lao vi diem PK dat" + base.NHAN_VAT_THIEN_AC, 10, "Nha Tu");
                                          base.GameMessage("Neu ban cam thay bi oan uc hay the luat su, su dung lenh [!aichotaoluongthien]", 10, "Nha Tu");
                                          base.GameMessage("Cho den khi diem PK khoi phuc tro ve 0, ban se duoc tha ra", 10, "Nha Tu");
                                    }
                                    if (base.CharacterCoords_Map == int.Parse(strArray6[0]))
                                    {
                                          if (((int)DateTime.Now.Subtract(base.dateTime_2).TotalMinutes) >= World.Ngoi_tu_thien_ac_khoi_phuc_thoi_gian)
                                          {
                                                base.NHAN_VAT_THIEN_AC += World.Ngoi_tu_khoi_phuc_thien_ac_diem_so;
                                                base.UpdatePowersAndStatus();
                                                base.dateTime_2 = DateTime.Now;
                                          }
                                          if (base.NHAN_VAT_THIEN_AC >= 0)
                                          {
                                                World.SendMsg(string.Format(World.Ngoi_tu_tha_ra_thong_cao, base.UserName));
                                                this.Move((float)int.Parse(strArray7[1]), (float)int.Parse(strArray7[2]), 15f, int.Parse(strArray7[0]));
                                                base.GameMessage("Want to go out after rehabilitation, expect the next meeting O (∩_∩) O ~", 20, "Guards prompt");
                                          }
                                    }
                              }
                              if ((((base.CharacterCoords_Map != int.Parse(strArray6[0])) && base.Client.offLineStatus) && ((World.Cach_Tuyen_Treo_thiet_bi_khen_thuong_co_hay_khong_mo_ra == 1) && (base.Player_FLD_LEVEL >= World.Cach_Tuyen_Treo_thiet_bi_khen_thuong_han_che_thap_nhat_Dang_cap))) && (((int)DateTime.Now.Subtract(base.dateTime_1).TotalMinutes) >= World.Cach_Tuyen_Treo_thiet_bi_khen_thuong_gui_di_Thoi_gian_khoang_cach))
                              {
                                    if (base.NHAN_VAT_THIEN_AC < 0)
                                    {
                                          base.NHAN_VAT_THIEN_AC += 200;
                                    }
                                    if ((int.Parse(strArray4[0]) != 0) || (int.Parse(strArray4[0]) != 0))
                                    {
                                          if (base.FLD_VIP == 1)
                                          {
                                                base.Player_WuXun += int.Parse(strArray5[0]);
                                          }
                                          else
                                          {
                                                base.Player_WuXun += int.Parse(strArray4[0]);
                                          }
                                    }
                                    if (((int.Parse(strArray5[1]) != 0) || (int.Parse(strArray4[1]) != 0)) && (base.FLD_RXPIONT != World.Nhan_vat_lon_nhat_CASH_so_luong))
                                    {
                                          if (base.FLD_VIP == 1)
                                          {
                                                this.KIEM_TRA_BACH_BAO_CAC_NGUYEN_BAO_SO_LUONG();
                                                base.KIEM_SOAT_CASH_SO_LIEU(int.Parse(strArray5[1]), 2);
                                                base.UPDATE_RXPIONT();
                                          }
                                          else
                                          {
                                                this.KIEM_TRA_BACH_BAO_CAC_NGUYEN_BAO_SO_LUONG();
                                                base.KIEM_SOAT_CASH_SO_LIEU(int.Parse(strArray4[1]), 2);
                                                base.UPDATE_RXPIONT();
                                          }
                                    }
                                    if ((int.Parse(strArray5[2]) != 0) || (int.Parse(strArray4[2]) != 0))
                                    {
                                          if (base.FLD_VIP == 1)
                                          {
                                                if (base.Khen_thuong_them_vao_cong_kich < long.Parse(strArray[0]))
                                                {
                                                      base.Khen_thuong_them_vao_cong_kich += long.Parse(strArray5[2]);
                                                }
                                          }
                                          else if (base.Khen_thuong_them_vao_cong_kich < long.Parse(strArray[0]))
                                          {
                                                base.Khen_thuong_them_vao_cong_kich += long.Parse(strArray4[2]);
                                          }
                                    }
                                    if ((int.Parse(strArray5[3]) != 0) || (int.Parse(strArray4[3]) != 0))
                                    {
                                          if (base.FLD_VIP == 1)
                                          {
                                                if (base.Khen_thuong_them_vao_phong_ngu < long.Parse(strArray[1]))
                                                {
                                                      base.Khen_thuong_them_vao_phong_ngu += long.Parse(strArray5[3]);
                                                }
                                          }
                                          else if (base.Khen_thuong_them_vao_phong_ngu < long.Parse(strArray[1]))
                                          {
                                                base.Khen_thuong_them_vao_phong_ngu += long.Parse(strArray4[3]);
                                          }
                                    }
                                    if ((long.Parse(strArray5[4]) != 0) || (long.Parse(strArray4[4]) != 0))
                                    {
                                          if (base.FLD_VIP == 1)
                                          {
                                                base.Khen_thuong_them_vao_sinh_menh += long.Parse(strArray5[4]);
                                          }
                                          else
                                          {
                                                base.Khen_thuong_them_vao_sinh_menh += long.Parse(strArray4[4]);
                                          }
                                    }
                                    if ((int.Parse(strArray5[5]) != 0) || (int.Parse(strArray4[5]) != 0))
                                    {
                                          if (base.FLD_VIP == 1)
                                          {
                                                base.Khen_thuong_them_vao_noi_cong += int.Parse(strArray5[5]);
                                          }
                                          else
                                          {
                                                base.Khen_thuong_them_vao_noi_cong += int.Parse(strArray4[5]);
                                          }
                                    }
                                    base.UpdatePowersAndStatus();
                                    base.dateTime_1 = DateTime.Now;
                              }
                              if ((((base.CharacterCoords_Map != int.Parse(strArray6[0])) && !base.Client.offLineStatus) && ((World.Treo_thiet_bi_khen_thuong_co_hay_khong_mo_ra == 1) && (base.Player_FLD_LEVEL >= World.Treo_thiet_bi_khen_thuong_han_che_thap_nhat_Dang_cap))) && (((int)DateTime.Now.Subtract(base.dateTime_0).TotalMinutes) >= World.Treo_thiet_bi_khen_thuong_gui_di_Thoi_gian_khoang_cach))
                              {
                                    if (base.NHAN_VAT_THIEN_AC < 0)
                                    {
                                          base.NHAN_VAT_THIEN_AC += 200;
                                    }
                                    if ((int.Parse(strArray3[0]) != 0) || (int.Parse(strArray2[0]) != 0))
                                    {
                                          if (base.FLD_VIP == 1)
                                          {
                                                base.Player_WuXun += int.Parse(strArray3[0]);
                                                base.GameMessage(string.Concat(new object[] { "Online", World.Treo_thiet_bi_khen_thuong_gui_di_Thoi_gian_khoang_cach, "Minutes to give", strArray3[0], "Wu Xun points" }), 20, World.ServerName);
                                          }
                                          else
                                          {
                                                base.Player_WuXun += int.Parse(strArray2[0]);
                                                base.GameMessage(string.Concat(new object[] { "Online", World.Treo_thiet_bi_khen_thuong_gui_di_Thoi_gian_khoang_cach, "Minutes to give", strArray2[0], "Wu Xun points" }), 20, World.ServerName);
                                          }
                                    }
                                    if ((int.Parse(strArray3[1]) != 0) || (int.Parse(strArray2[1]) != 0))
                                    {
                                          if (base.FLD_VIP == 1)
                                          {
                                                this.KIEM_TRA_BACH_BAO_CAC_NGUYEN_BAO_SO_LUONG();
                                                base.KIEM_SOAT_CASH_SO_LIEU(int.Parse(strArray3[1]), 2);
                                                base.GameMessage(string.Concat(new object[] { "Tunguangouxi coal ", World.Treo_thiet_bi_khen_thuong_gui_di_Thoi_gian_khoang_cach, " Hanging Fenwushuoya ", strArray3[1], " Juan spit" }), 20, World.ServerName);
                                                base.UPDATE_RXPIONT();
                                          }
                                          else
                                          {
                                                this.KIEM_TRA_BACH_BAO_CAC_NGUYEN_BAO_SO_LUONG();
                                                base.KIEM_SOAT_CASH_SO_LIEU(int.Parse(strArray2[1]), 2);
                                                base.GameMessage(string.Concat(new object[] { "Tunguangouxi coal ", World.Treo_thiet_bi_khen_thuong_gui_di_Thoi_gian_khoang_cach, " Hanging Fenwushuoya ", strArray2[1], " Juan spit" }), 20, World.ServerName);
                                                base.UPDATE_RXPIONT();
                                          }
                                    }
                                    if ((int.Parse(strArray3[2]) != 0) || (int.Parse(strArray2[2]) != 0))
                                    {
                                          if (base.FLD_VIP == 1)
                                          {
                                                if (base.Khen_thuong_them_vao_cong_kich < long.Parse(strArray[0]))
                                                {
                                                      base.Khen_thuong_them_vao_cong_kich += long.Parse(strArray3[2]);
                                                      base.GameMessage(string.Concat(new object[] { "Online", World.Treo_thiet_bi_khen_thuong_gui_di_Thoi_gian_khoang_cach, "Minutes to give", long.Parse(strArray3[2]), "Point of Attack" }), 20, World.ServerName);
                                                }
                                          }
                                          else if (base.Khen_thuong_them_vao_cong_kich < long.Parse(strArray[0]))
                                          {
                                                base.Khen_thuong_them_vao_cong_kich += long.Parse(strArray2[2]);
                                                base.GameMessage(string.Concat(new object[] { "Online", World.Treo_thiet_bi_khen_thuong_gui_di_Thoi_gian_khoang_cach, "Minutes to give", long.Parse(strArray2[2]), "Point of Attack" }), 20, World.ServerName);
                                          }
                                    }
                                    if ((int.Parse(strArray3[3]) != 0) || (int.Parse(strArray2[3]) != 0))
                                    {
                                          if (base.FLD_VIP == 1)
                                          {
                                                if (base.Khen_thuong_them_vao_phong_ngu < long.Parse(strArray[1]))
                                                {
                                                      base.Khen_thuong_them_vao_phong_ngu += long.Parse(strArray3[3]);
                                                      base.GameMessage(string.Concat(new object[] { "Online", World.Treo_thiet_bi_khen_thuong_gui_di_Thoi_gian_khoang_cach, "Minutes to give", long.Parse(strArray3[3]), "Point defense" }), 20, World.ServerName);
                                                }
                                          }
                                          else if (base.Khen_thuong_them_vao_phong_ngu < long.Parse(strArray[1]))
                                          {
                                                base.Khen_thuong_them_vao_phong_ngu += long.Parse(strArray2[3]);
                                                base.GameMessage(string.Concat(new object[] { "Online", World.Treo_thiet_bi_khen_thuong_gui_di_Thoi_gian_khoang_cach, "Minutes to give", long.Parse(strArray2[3]), "Point defense" }), 20, World.ServerName);
                                          }
                                    }
                                    if ((long.Parse(strArray3[4]) != 0) || (long.Parse(strArray2[4]) != 0))
                                    {
                                          if (base.FLD_VIP == 1)
                                          {
                                                base.Khen_thuong_them_vao_sinh_menh += long.Parse(strArray3[4]);
                                                base.GameMessage(string.Concat(new object[] { "Online", World.Treo_thiet_bi_khen_thuong_gui_di_Thoi_gian_khoang_cach, "Minutes to give", long.Parse(strArray3[4]), "Point of Life" }), 20, World.ServerName);
                                          }
                                          else
                                          {
                                                base.Khen_thuong_them_vao_sinh_menh += long.Parse(strArray2[4]);
                                                base.GameMessage(string.Concat(new object[] { "Online", World.Treo_thiet_bi_khen_thuong_gui_di_Thoi_gian_khoang_cach, "Minutes to give", long.Parse(strArray2[4]), "Point of Life" }), 20, World.ServerName);
                                          }
                                    }
                                    if ((int.Parse(strArray3[5]) != 0) || (int.Parse(strArray2[5]) != 0))
                                    {
                                          if (base.FLD_VIP == 1)
                                          {
                                                base.Khen_thuong_them_vao_noi_cong += int.Parse(strArray3[5]);
                                                base.GameMessage(string.Concat(new object[] { "Online", World.Treo_thiet_bi_khen_thuong_gui_di_Thoi_gian_khoang_cach, "Minutes to give", strArray3[5], "Mana" }), 20, World.ServerName);
                                          }
                                          else
                                          {
                                                base.Khen_thuong_them_vao_noi_cong += int.Parse(strArray2[5]);
                                                base.GameMessage(string.Concat(new object[] { "Online", World.Treo_thiet_bi_khen_thuong_gui_di_Thoi_gian_khoang_cach, "Minutes to give", strArray2[5], "Mana" }), 20, World.ServerName);
                                          }
                                    }
                                    base.UpdatePowersAndStatus();
                                    base.dateTime_0 = DateTime.Now;
                              }
                              if (base.Client == null)
                              {
                                    if (base.timer_0 != null)
                                    {
                                          base.timer_0.Close();
                                          base.timer_0.Dispose();
                                          base.timer_0 = null;
                                    }
                              }
                              else if (!base.Client.Running)
                              {
                                    if (base.timer_0 != null)
                                    {
                                          base.timer_0.Close();
                                          base.timer_0.Dispose();
                                          base.timer_0 = null;
                                    }
                              }
                              else if (!World.threadSafeDictionary_0.ContainsKey(base.Client.int_3))
                              {
                                    base.Client.Dispose();
                                    this.Players_Logout();
                                    this.Dispose();
                              }
                              else if (!this.MoveAllto(70, base.class31_0))
                              {
                                    this.BAT_GIU_KIEM_TRA_LAI_PHAM_VI_NGUOI_CHOI();
                                    this.BAT_GIU_KIEM_TRA_LAI_NPC();
                                    this.BAT_GIU_KIEM_TRA_LAI_PHAM_VI_MAT_DAT_VAT_PHAM();
                                    this.PHAT_DONG_TU_DONG_CONG_KICH();
                                    base.class31_0.Rxjh_X = base.CharacterCoords_X;
                                    base.class31_0.Rxjh_Y = base.CharacterCoords_Y;
                                    base.class31_0.Rxjh_Map = base.CharacterCoords_Map;
                              }
                        }
                  }
                  catch (Exception exception)
                  {
                        Form1.WriteLine(1, string.Concat(new object[] { "MoveAll出错[", base.Userid, "]-[", base.UserName, "]", exception }));
                  }
            }

            public bool MoveAllto(int int_128, TBL_XWWL_MAP class31_1)
            {
                  if (World.jlMsg == 1)
                  {
                        Form1.WriteLine(0, "Players_MoveAllto");
                  }
                  if (class31_1.Rxjh_Map != base.CharacterCoords_Map)
                  {
                        return false;
                  }
                  float num = class31_1.Rxjh_Y - base.CharacterCoords_Y;
                  float single1 = class31_1.Rxjh_X - base.CharacterCoords_X;
                  return (((int)Math.Sqrt((double)((single1 * single1) + (num * num)))) <= int_128);
            }

            public int NGAY_ROI_BAN_DO(int int_128)
            {
                  if (World.dictionary_2.Count > 0)
                  {
                        VUOT_AI_BAN_DO vuot_ai_ban_do;
                        int num = 0;
                        if (World.dictionary_2.TryGetValue(TBL_XWWL_MAP.smethod_0(int_128), out vuot_ai_ban_do))
                        {
                              bool flag = false;
                              for (int i = 0; i < 0x42; i++)
                              {
                                    if (BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[i].VAT_PHAM_ID, 0) == vuot_ai_ban_do.ItmeID)
                                    {
                                          num = i;
                                          flag = true;
                                          break;
                                    }
                              }
                              if (!flag && (TBL_XWWL_MAP.smethod_0(base.CharacterCoords_Map) != vuot_ai_ban_do.TEN_BAN_DO))
                              {
                                    base.GameMessage("Local Pictured days off map, you must carry goods " + TBL_XWWL_ITEM.smethod_1(vuot_ai_ban_do.ItmeID) + " ,Otherwise, can not enter" + vuot_ai_ban_do.TEN_BAN_DO, 9, "system hint");
                                    return 0;
                              }
                              if (flag && (TBL_XWWL_MAP.smethod_0(base.CharacterCoords_Map) != vuot_ai_ban_do.TEN_BAN_DO))
                              {
                                    this.LAM_GIAM_DI_VAT_PHAM(num, 1);
                                    return 1;
                              }
                        }
                  }
                  return 1;
            }

            private void NGUYEN_BAO_CA_NHAN_CUA_HANG(byte[] byte_5, int int_128)
            {
                  if (World.Co_hay_khong_mo_ra_CASH_cua_hang == 0)
                  {
                        base.GameMessage("Gold Store feature is not yet open, please contact the administrator!", 10, "system hint");
                  }
                  else
                  {
                        switch (byte_5[11])
                        {
                              case 1:
                                    {
                                          byte[] dst = new byte[BitConverter.ToUInt16(byte_5, 12)];
                                          Buffer.BlockCopy(byte_5, 14, dst, 0, dst.Length);
                                          string str = Encoding.Default.GetString(dst);
                                          if (base.OpenWarehouse)
                                          {
                                                this.NGUYEN_BAO_CA_NHAN_CUA_HANG_TAC_DUNG_BAO_GOM(1, 11, str, null);
                                                return;
                                          }
                                          if ((str.Length < 2) || (str.Length > 0x10))
                                          {
                                                this.NGUYEN_BAO_CA_NHAN_CUA_HANG_TAC_DUNG_BAO_GOM(1, 12, str, null);
                                                return;
                                          }
                                          if (base.Player_FLD_LEVEL > 20)
                                          {
                                                this.NGUYEN_BAO_CA_NHAN_CUA_HANG_TAC_DUNG_BAO_GOM(1, 1, str, null);
                                                base.OpenWarehouse = true;
                                                base.PlayerShop = new PersonalShopClass();
                                                base.PlayerShop.CUA_HANG_TEN = dst;
                                                base.PlayerShop.int_0 = 2;
                                                return;
                                          }
                                          this.NGUYEN_BAO_CA_NHAN_CUA_HANG_TAC_DUNG_BAO_GOM(1, 13, str, null);
                                          return;
                                    }
                              case 2:
                                    {
                                          byte[] buffer2 = new byte[4];
                                          byte[] buffer3 = new byte[8];
                                          byte[] buffer4 = new byte[8];
                                          byte[] buffer5 = new byte[4];
                                          Buffer.BlockCopy(byte_5, 12, buffer2, 0, 4);
                                          Buffer.BlockCopy(byte_5, 20, buffer3, 0, 8);
                                          Buffer.BlockCopy(byte_5, 0x1c, buffer5, 0, 2);
                                          Buffer.BlockCopy(byte_5, 0x20, buffer4, 0, 8);
                                          int index = BitConverter.ToInt16(byte_5, 30);
                                          if (World.smethod_18(BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_ID, 0)))
                                          {
                                                this.NGUYEN_BAO_CA_NHAN_CUA_HANG_TAC_DUNG_BAO_GOM(2, 0x1b, null, null);
                                                return;
                                          }
                                          if (BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_ID, 0) != 0)
                                          {
                                                if (BitConverter.ToInt32(buffer5, 0) <= 0)
                                                {
                                                      this.NGUYEN_BAO_CA_NHAN_CUA_HANG_TAC_DUNG_BAO_GOM(2, 0x16, null, null);
                                                      return;
                                                }
                                                if (BitConverter.ToInt32(buffer5, 0) > 0x270f)
                                                {
                                                      this.NGUYEN_BAO_CA_NHAN_CUA_HANG_TAC_DUNG_BAO_GOM(2, 0x17, null, null);
                                                      return;
                                                }
                                                if (BitConverter.ToInt32(buffer4, 0) <= 0)
                                                {
                                                      this.NGUYEN_BAO_CA_NHAN_CUA_HANG_TAC_DUNG_BAO_GOM(2, 0x18, null, null);
                                                      return;
                                                }
                                                if (BitConverter.ToInt32(buffer4, 0) > 0x186a0)
                                                {
                                                      this.NGUYEN_BAO_CA_NHAN_CUA_HANG_TAC_DUNG_BAO_GOM(2, 0x19, null, null);
                                                      return;
                                                }
                                                if (base.PlayerShop.CUA_HANG_ITEM_DANH_SACH.Count >= 8)
                                                {
                                                      this.NGUYEN_BAO_CA_NHAN_CUA_HANG_TAC_DUNG_BAO_GOM(2, 0x1a, null, null);
                                                      return;
                                                }
                                                if (((BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_SO_LUONG, 0) >= BitConverter.ToInt32(buffer5, 0)) && (BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_SO_LUONG, 0) >= 0)) && (BitConverter.ToInt32(buffer5, 0) >= 0))
                                                {
                                                      if (base.TRANG_BI_LAN_BAO_VAY[index].Item_troi_chat)
                                                      {
                                                            this.NGUYEN_BAO_CA_NHAN_CUA_HANG_TAC_DUNG_BAO_GOM(2, 0x1b, null, null);
                                                            return;
                                                      }
                                                      if (base.PlayerShop.CUA_HANG_ITEM_DANH_SACH.ContainsKey(BitConverter.ToInt64(base.TRANG_BI_LAN_BAO_VAY[index].Item_toan_bo_ID, 0)))
                                                      {
                                                            this.NGUYEN_BAO_CA_NHAN_CUA_HANG_TAC_DUNG_BAO_GOM(2, 0x1b, null, null);
                                                            return;
                                                      }
                                                      CA_NHAN_CUA_HANG_ITEM_LOAI ca_nhan_cua_hang_item_loai = new CA_NHAN_CUA_HANG_ITEM_LOAI
                                                      {
                                                            int_0 = BitConverter.ToInt32(buffer5, 0),
                                                            long_0 = BitConverter.ToInt32(buffer4, 0),
                                                            int_1 = index,
                                                            class23_0 = base.TRANG_BI_LAN_BAO_VAY[index]
                                                      };
                                                      base.PlayerShop.CUA_HANG_ITEM_DANH_SACH.Add(BitConverter.ToInt64(base.TRANG_BI_LAN_BAO_VAY[index].Item_toan_bo_ID, 0), ca_nhan_cua_hang_item_loai);
                                                      this.NGUYEN_BAO_CA_NHAN_CUA_HANG_TAC_DUNG_BAO_GOM(2, 2, null, ca_nhan_cua_hang_item_loai);
                                                      return;
                                                }
                                                base.GameMessage("Please enter the correct number[" + BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_SO_LUONG, 0) + "]A!", 9, "system hint");
                                                this.NGUYEN_BAO_CA_NHAN_CUA_HANG_TAC_DUNG_BAO_GOM(2, 0x1b, null, null);
                                                return;
                                          }
                                          this.NGUYEN_BAO_CA_NHAN_CUA_HANG_TAC_DUNG_BAO_GOM(2, 0x15, null, null);
                                          return;
                                    }
                              case 3:
                                    this.NGUYEN_BAO_CA_NHAN_CUA_HANG_TAC_DUNG_BAO_GOM(3, 3, null, null);
                                    this.CA_NHAN_CUA_HANG_HIEN_THI_GOI(3, base.UserSessionID, base.PlayerShop.CUA_HANG_TEN);
                                    base.PlayerShop.PersonStore_Open = true;
                                    return;

                              case 4:
                                    this.NGUYEN_BAO_CA_NHAN_CUA_HANG_DONG_CUA();
                                    return;

                              case 5:
                                    if (this.int_118 == 0)
                                    {
                                          this.NGUYEN_BAO_CA_NHAN_CUA_HANG_TUAN_TRA_CO_HAY_KHONG_TONG_QUAT_BAO_GOM(0);
                                          return;
                                    }
                                    if (this.int_118 == 1)
                                    {
                                          this.NGUYEN_BAO_CA_NHAN_CUA_HANG_TUAN_TRA_CO_HAY_KHONG_TONG_QUAT_BAO_GOM(1);
                                    }
                                    return;
                        }
                  }
            }

            private void NGUYEN_BAO_CA_NHAN_CUA_HANG_DONG_CUA()
            {
                  if (base.PlayerShop != null)
                  {
                        base.OpenWarehouse = false;
                        this.NGUYEN_BAO_CA_NHAN_CUA_HANG_TAC_DUNG_BAO_GOM(4, 4, null, null);
                        this.CA_NHAN_CUA_HANG_HIEN_THI_GOI(4, base.UserSessionID, null);
                        if (base.PlayerShop.class15_0 != null)
                        {
                              base.PlayerShop.class15_0.bool_5 = false;
                              base.PlayerShop.class15_0.OpenWarehouse = false;
                              base.PlayerShop.class15_0.int_0 = 0;
                              base.PlayerShop.class15_0.TIEN_VAO_CUA_HANG_TAC_DUNG_GOI(3, 3, base.UserSessionID, base.PlayerShop.class15_0.UserSessionID, null, null);
                        }
                        base.PlayerShop.PersonStore_Open = false;
                        base.PlayerShop.CUA_HANG_ITEM_DANH_SACH.Clear();
                        base.PlayerShop.Dispose();
                        base.PlayerShop.class15_0 = null;
                        base.PlayerShop = null;
                  }
                  else if (base.bool_5 && (base.int_0 != 0))
                  {
                        Players players = base.Get_char_data(base.int_0);
                        if ((players != null) && (players.PlayerShop != null))
                        {
                              if (players.PlayerShop.int_0 == 1)
                              {
                                    this.ROI_KHOI_SHOP(base.int_0);
                              }
                              else if (players.PlayerShop.int_0 == 2)
                              {
                                    this.NGUYEN_BAO_CA_NHAN_CUA_HANG_XUAT_CUA_HANG(base.int_0);
                              }
                        }
                  }
            }

            private void NGUYEN_BAO_CA_NHAN_CUA_HANG_TAC_DUNG_BAO_GOM(int int_128, int int_129, string string_10, CA_NHAN_CUA_HANG_ITEM_LOAI class81_0)
            {
                  PacketData data = new PacketData();
                  data.method_2(int_128);
                  data.method_2(int_129);
                  if (string_10 != null)
                  {
                        data.method_11(string_10);
                  }
                  if (class81_0 != null)
                  {
                        data.method_8(class81_0.class23_0.GetItem_ID);
                        data.method_8(class81_0.class23_0.GetItem_toan_bo_ID);
                        data.Write2(class81_0.int_0);
                        data.Write2(class81_0.int_1);
                        data.method_8(class81_0.long_0);
                        data.Write4(class81_0.class23_0.FLD_MAGIC0);
                        data.Write4(class81_0.class23_0.FLD_MAGIC1);
                        data.Write4(class81_0.class23_0.FLD_MAGIC2);
                        data.Write4(class81_0.class23_0.FLD_MAGIC3);
                        data.Write4(class81_0.class23_0.FLD_MAGIC4);
                        data.Write2(class81_0.class23_0.FLD_FJ_MAGIC0);
                        data.Write2(class81_0.class23_0.FLD_FJ_MAGIC1);
                        data.Write2(class81_0.class23_0.FLD_FJ_trung_cap_phu_hon);
                        data.Write2(class81_0.class23_0.FLD_FJ_MAGIC2);
                        data.Write2(class81_0.class23_0.FLD_FJ_MAGIC3);
                        data.Write2(class81_0.class23_0.FLD_FJ_MAGIC4);
                        data.Write2(class81_0.class23_0.FLD_FJ_MAGIC5);
                        data.Write2(0);
                        data.Write4(class81_0.class23_0.FLD_FJ_KSSJ);
                        data.Write4(class81_0.class23_0.FLD_FJ_JSSJ);
                        if (class81_0.class23_0.FLD_keo_dai_suc_manh != 0)
                        {
                              data.Write2(class81_0.class23_0.FLD_keo_dai_suc_manh);
                        }
                        else
                        {
                              data.Write2(0);
                        }
                        data.Write4(class81_0.class23_0.FLD_FJ_thuc_tinh + class81_0.class23_0.Item_trung_cap_phu_hon_them_vao_thuc_tinh);
                        data.Write2(0);
                        data.Write2(class81_0.class23_0.FLD_FJ_tien_hoa);
                        data.Write2(0);
                        data.Write4(0);
                        data.Write4(0);
                        data.Write4(0);
                  }
                  if (base.Client != null)
                  {
                        base.Client.method_5(data, 0xc1c, base.UserSessionID, 0);
                  }
            }

            private void NGUYEN_BAO_CA_NHAN_CUA_HANG_THOA_THUAN_BAO_GOM(int int_128)
            {
                  this.NGUYEN_BAO_CA_NHAN_CUA_HANG_TUAN_TRA_BAO_GOM(1);
                  this.KIEM_TRA_BACH_BAO_CAC_NGUYEN_BAO_SO_LUONG();
                  this.NGUYEN_BAO_CA_NHAN_CUA_HANG_TUAN_TRA_BAO_GOM(0);
                  PacketData data = new PacketData();
                  data.Write4(int_128);
                  data.Write4((int)base.FLD_RXPIONT);
                  if (base.Client != null)
                  {
                        base.Client.method_4(data, 0x161c, base.UserSessionID);
                  }
            }

            private void NGUYEN_BAO_CA_NHAN_CUA_HANG_TUAN_TRA_BAO_GOM(int int_128)
            {
                  PacketData data = new PacketData();
                  data.Write4(int_128);
                  if (base.Client != null)
                  {
                        base.Client.method_4(data, 0xc418, base.UserSessionID);
                  }
            }

            private void NGUYEN_BAO_CA_NHAN_CUA_HANG_TUAN_TRA_CO_HAY_KHONG_TONG_QUAT_BAO_GOM(int int_128)
            {
                  PacketData data = new PacketData();
                  data.Write4(int_128);
                  if (base.Client != null)
                  {
                        base.Client.method_4(data, 0x301c, base.UserSessionID);
                  }
            }

            private void NGUYEN_BAO_CA_NHAN_CUA_HANG_XUAT_CUA_HANG(int int_128)
            {
                  base.bool_5 = false;
                  base.OpenWarehouse = false;
                  base.int_0 = 0;
                  this.TIEN_VAO_CUA_HANG_TAC_DUNG_GOI(3, 3, int_128, base.UserSessionID, null, null);
                  Players players = base.Get_char_data(int_128);
                  if ((players != null) && (players.PlayerShop != null))
                  {
                        players.PlayerShop.CA_NHAN_CUA_HANG_CO_HAY_KHONG_SU_DUNG_BEN_TRONG = false;
                        players.PlayerShop.class15_0 = null;
                        players.TIEN_VAO_CUA_HANG_TAC_DUNG_GOI(3, 3, players.UserSessionID, base.UserSessionID, null, null);
                  }
            }

            public void NHA_KHO_GOI_ITEM_THAO_TAC(int int_128, int int_129, int int_130, long long_17, VAT_PHAM_LOAI class23_6, int int_131)
            {
                  PacketData data = new PacketData();
                  data.Write4(int_129);
                  data.Write4(int_129);
                  data.method_8((long)int_130);
                  data.method_8(long_17);
                  data.method_8(0L);
                  data.method_9(class23_6.GetItem_toan_bo_ID);
                  data.method_9(class23_6.GetItem_ID);
                  data.method_8((long)class23_6.Get_VAT_PHAM_SO_LUONG);
                  data.method_2(1);
                  data.method_2(int_131);
                  data.method_2(0);
                  data.method_2(3);
                  data.Write4(1);
                  data.Write4(class23_6.FLD_MAGIC0);
                  data.Write4(class23_6.FLD_MAGIC1);
                  data.Write4(class23_6.FLD_MAGIC2);
                  data.Write4(class23_6.FLD_MAGIC3);
                  data.Write4(class23_6.FLD_MAGIC4);
                  data.Write2(class23_6.FLD_FJ_MAGIC0);
                  data.Write2(class23_6.FLD_FJ_MAGIC1);
                  data.Write2(class23_6.FLD_FJ_trung_cap_phu_hon);
                  data.Write2(class23_6.FLD_FJ_MAGIC2);
                  data.Write2(class23_6.FLD_FJ_MAGIC3);
                  data.Write2(class23_6.FLD_FJ_MAGIC4);
                  data.Write2(class23_6.FLD_FJ_MAGIC5);
                  data.Write4(0);
                  data.Write4(0);
                  if (class23_6.FLD_keo_dai_suc_manh != 0)
                  {
                        data.Write2(0);
                        data.Write2(class23_6.FLD_keo_dai_suc_manh);
                  }
                  else
                  {
                        data.Write4(0);
                  }
                  data.Write4(class23_6.FLD_FJ_thuc_tinh);
                  data.Write2(0);
                  data.Write2(class23_6.FLD_FJ_tien_hoa);
                  data.Write2(0);
                  data.Write4(0);
                  data.Write4(0);
                  if (base.Client != null)
                  {
                        base.Client.method_5(data, int_128, base.UserSessionID, 0);
                  }
            }

            public void NHAN_DUOC_MON_HUY(byte[] byte_5, int int_128)
            {
                  PacketReader reader1 = new PacketReader(byte_5, int_128, false);
                  reader1.method_1(11, SeekOrigin.Begin);
                  int num = reader1.method_2();
                  Console.WriteLine(base.UserName + "Get door emblem " + num);
                  byte[] buffer = RxjhClass.Select_Mon_Huy(num);
                  if (buffer != null)
                  {
                        base.GUI_DI_MON_HUY_2(buffer, num);
                  }
            }

            public int NHAN_DUOC_NHA_KHO_VI_TRI_RONG(int int_128)
            {
                  for (int i = 0; i < 60; i++)
                  {
                        if (int_128 == 3)
                        {
                              if (BitConverter.ToInt32(base.class23_0[i].VAT_PHAM_ID, 0) == 0)
                              {
                                    return i;
                              }
                        }
                        else if (BitConverter.ToInt32(base.class23_1[i].VAT_PHAM_ID, 0) == 0)
                        {
                              return i;
                        }
                  }
                  return -1;
            }

            public void NHAN_ITEM_NHIEM_VU(int int_128, int int_129, int int_130)
            {
                  using (PacketData data = new PacketData())
                  {
                        data.Write4(int_128);
                        data.Write4(0);
                        data.Write4(int_129);
                        data.Write4(0);
                        data.Write4(int_130);
                        if (base.Client != null)
                        {
                              base.Client.method_4(data, 0x8200, base.UserSessionID);
                        }
                  }
            }

            public byte[] NHAN_VAT_CHET_ROI_ITEM(int int_128, int int_129, int int_130, int int_131, int int_132, int int_133, string string_10, Players class15_0, Players class15_1)
            {
                  if (World.jlMsg == 1)
                  {
                        Form1.WriteLine(0, "玩家PK_掉出VAT_PHAM");
                  }
                  try
                  {
                        TBL_XWWL_ITEM tbl_xwwl_item;
                        long dBItmeId = RxjhClass.GetDBItmeId();
                        byte[] dst = new byte[0x49];
                        byte[] bytes = BitConverter.GetBytes(dBItmeId);
                        byte[] buffer3 = new byte[0x38];
                        if (World.Itme.TryGetValue(int_128, out tbl_xwwl_item))
                        {
                              MAT_DAT_ITEM_LOAI mat_dat_item_loai;
                              if (tbl_xwwl_item.FLD_QUESTITEM == 1)
                              {
                                    if (class15_0 != null)
                                    {
                                          int num2 = class15_0.DUOC_KIEN_HANG_RONG(class15_0);
                                          if (num2 != -1)
                                          {
                                                class15_0.TANG_CUONG_VAT_PHAM(bytes, BitConverter.GetBytes(int_128), num2, BitConverter.GetBytes(1), new byte[0x38]);
                                          }
                                    }
                                    return null;
                              }
                              try
                              {
                                    Buffer.BlockCopy(BitConverter.GetBytes(int_129), 0, buffer3, 0, 4);
                                    Buffer.BlockCopy(BitConverter.GetBytes(int_130), 0, buffer3, 4, 4);
                                    Buffer.BlockCopy(BitConverter.GetBytes(int_131), 0, buffer3, 8, 4);
                                    Buffer.BlockCopy(BitConverter.GetBytes(int_132), 0, buffer3, 12, 4);
                                    Buffer.BlockCopy(BitConverter.GetBytes(int_133), 0, buffer3, 0x10, 4);
                                    Buffer.BlockCopy(bytes, 0, dst, 0, 4);
                                    Buffer.BlockCopy(buffer3, 0, dst, 0x10, 20);
                                    Buffer.BlockCopy(BitConverter.GetBytes(int_128), 0, dst, 8, 4);
                                    Buffer.BlockCopy(BitConverter.GetBytes(1), 0, dst, 12, 4);
                              }
                              catch (Exception exception)
                              {
                                    Form1.WriteLine(1, string.Concat(new object[] { "PK掉出VAT_PHAM1 出错 ", class15_1.UserSessionID, "|", class15_1.UserName, " ", exception.Message }));
                                    return null;
                              }
                              try
                              {
                                    mat_dat_item_loai = new MAT_DAT_ITEM_LOAI(dst, class15_1.CharacterCoords_X, class15_1.CharacterCoords_Y, class15_1.CharacterCoords_Z, class15_1.CharacterCoords_Map, class15_0, 0);
                                    if (mat_dat_item_loai == null)
                                    {
                                          Form1.WriteLine(1, string.Concat(new object[] { "PK掉出VAT_PHAM2 出错 ", class15_1.UserSessionID, "|", class15_1.UserName }));
                                          return null;
                                    }
                                    if (!World.threadSafeDictionary_3.ContainsKey(dBItmeId))
                                    {
                                          World.threadSafeDictionary_3.Add(dBItmeId, mat_dat_item_loai);
                                    }
                              }
                              catch (Exception exception2)
                              {
                                    Form1.WriteLine(1, string.Concat(new object[] { "PK掉出VAT_PHAM3 出错 ", class15_1.UserSessionID, "|", class15_1.UserName, " ", exception2.Message }));
                                    return null;
                              }
                              try
                              {
                                    if (World.threadSafeDictionary_3.ContainsKey(dBItmeId))
                                    {
                                          mat_dat_item_loai.method_1();
                                    }
                                    return dst;
                              }
                              catch (Exception exception3)
                              {
                                    Form1.WriteLine(1, string.Concat(new object[] { "PK掉出VAT_PHAM4 出错 ", class15_1.UserSessionID, "|", class15_1.UserName, " ", exception3.Message }));
                                    return null;
                              }
                        }
                        return null;
                  }
                  catch (Exception exception4)
                  {
                        Form1.WriteLine(1, string.Concat(new object[] { "PK掉出VAT_PHAM5 出错 ", class15_1.UserSessionID, "|", class15_1.UserName, " ", exception4.Message }));
                        return null;
                  }
            }

            public void NHAN_VAT_CHUYEN_NGHE_NGHIEP(int int_128, int int_129)
            {
                  base.Player_Zx = int_128;
                  base.Player_FLD_JOB_LEVEL = int_129;
                  PacketData data = new PacketData();
                  data.method_2(int_129);
                  data.method_2(int_128);
                  if (base.Client != null)
                  {
                        base.Client.method_4(data, 0x7e00, base.UserSessionID);
                  }
                  this.vmethod_1(data, 0x7e00, base.UserSessionID);
            }

            public void NHAN_VAT_DI_CHUYEN(byte[] byte_5, int int_128)
            {
                  try
                  {
                        if (((base.Client.int_3 == base.UserSessionID) && (((int)DateTime.Now.Subtract(this.dateTime_13).TotalMilliseconds) >= 0x3e8)) && (base.NHAN_VAT_HP > 0L))
                        {
                              if (base.PlayerShop != null)
                              {
                                    base.GameMessage("Do not move the card store ~ Please login again thank you", 9, "system hint");
                                    if (base.Client != null)
                                    {
                                          base.Client.Dispose();
                                    }
                              }
                              else
                              {
                                    byte[] dst = new byte[4];
                                    byte[] buffer2 = new byte[4];
                                    byte[] buffer3 = new byte[4];
                                    byte[] buffer4 = new byte[4];
                                    byte[] buffer5 = new byte[4];
                                    byte[] buffer6 = new byte[4];
                                    byte[] buffer7 = new byte[4];
                                    byte[] buffer8 = new byte[4];
                                    byte[] buffer9 = new byte[4];
                                    Buffer.BlockCopy(byte_5, 5, buffer9, 0, 2);
                                    Buffer.BlockCopy(byte_5, 15, dst, 0, 4);
                                    Buffer.BlockCopy(byte_5, 0x13, buffer3, 0, 4);
                                    Buffer.BlockCopy(byte_5, 0x17, buffer2, 0, 4);
                                    Buffer.BlockCopy(byte_5, 0x1b, buffer4, 0, 4);
                                    Buffer.BlockCopy(byte_5, 0x1f, buffer6, 0, 4);
                                    Buffer.BlockCopy(byte_5, 0x23, buffer5, 0, 4);
                                    Buffer.BlockCopy(byte_5, 0x2b, buffer7, 0, 4);
                                    Buffer.BlockCopy(byte_5, 0x2f, buffer8, 0, 4);
                                    if (BitConverter.ToInt32(buffer9, 0) == base.UserSessionID)
                                    {
                                          if (this.timer_1 != null)
                                          {
                                                this.timer_1.Enabled = false;
                                                this.timer_1.Close();
                                                this.timer_1.Dispose();
                                                this.timer_1 = null;
                                          }
                                          if (this.timer_3 != null)
                                          {
                                                this.timer_3.Enabled = false;
                                                this.timer_3.Close();
                                                this.timer_3.Dispose();
                                                this.timer_3 = null;
                                          }
                                          base.CharacterCoords_X = BitConverter.ToSingle(dst, 0);
                                          base.CharacterCoords_Y = BitConverter.ToSingle(buffer2, 0);
                                          byte[] buffer10 = new byte[int_128];
                                          Buffer.BlockCopy(byte_5, 0, buffer10, 0, int_128);
                                          if (base.int_10 < 5)
                                          {
                                                Buffer.BlockCopy(BitConverter.GetBytes((int)(base.int_10 - 1)), 0, buffer10, 40, 1);
                                          }
                                          else
                                          {
                                                Buffer.BlockCopy(BitConverter.GetBytes(base.int_10), 0, buffer10, 40, 1);
                                          }
                                          Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, buffer10, 5, 2);
                                          buffer10[7] = 0x65;
                                          Buffer.BlockCopy(BitConverter.GetBytes((float)15f), 0, buffer10, 0x13, 4);
                                          this.vmethod_0(buffer10, buffer10.Length);
                                          if (((base.CharacterCoords_Map == 0x1bbd) && (base.int_12 == 1)) && (World.class11_0 != null))
                                          {
                                                if (World.class11_0.class47_0.int_0 == base.Bang_phai_Id)
                                                {
                                                      if (World.class11_0.class47_0.dictionary_0.ContainsKey(base.UserSessionID))
                                                      {
                                                            TBL_XWWL_NPC tbl_xwwl_npc;
                                                            float num = -106f - base.CharacterCoords_Y;
                                                            float single1 = -106f - base.CharacterCoords_X;
                                                            if (((((int)Math.Sqrt((double)((single1 * single1) + (num * num)))) >= 30f) && MapClass.GetnpcTemplate(base.CharacterCoords_Map).TryGetValue(0x2711, out tbl_xwwl_npc)) && tbl_xwwl_npc.NPC_TU_VONG)
                                                            {
                                                                  World.class11_0.int_0++;
                                                                  base.int_12 = 0;
                                                            }
                                                      }
                                                }
                                                else if ((World.class11_0.class47_1.int_0 == base.Bang_phai_Id) && World.class11_0.class47_1.dictionary_0.ContainsKey(base.UserSessionID))
                                                {
                                                      TBL_XWWL_NPC tbl_xwwl_npc2;
                                                      float num2 = 106f - base.CharacterCoords_Y;
                                                      float single2 = 106f - base.CharacterCoords_X;
                                                      if (((((int)Math.Sqrt((double)((single2 * single2) + (num2 * num2)))) >= 30f) && MapClass.GetnpcTemplate(base.CharacterCoords_Map).TryGetValue(0x2710, out tbl_xwwl_npc2)) && tbl_xwwl_npc2.NPC_TU_VONG)
                                                      {
                                                            World.class11_0.int_1++;
                                                            base.int_12 = 0;
                                                      }
                                                }
                                          }
                                    }
                              }
                        }
                  }
                  catch (Exception exception)
                  {
                        string str = Converter.smethod_24(byte_5);
                        Form1.WriteLine(1, "人物移动出错[" + base.Userid + "]-[" + base.UserName + "]" + str + " " + exception.Message);
                  }
            }

            public void NHAN_VAT_PHAT_SANG()
            {
                  byte[] dst = Converter.hexStringToByte("AA5513000014047F000400A0CB0000000000000000000055AA");
                  Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, dst, 5, 2);
                  if (base.Client != null)
                  {
                        base.Client.Send(dst, dst.Length);
                  }
                  this.vmethod_0(dst, dst.Length);
            }

            public void NHAN_VAT_PHAT_SANG_2(int int_128)
            {
                  byte[] dst = Converter.hexStringToByte("AA5513000014047F000400A0CB0000000000000000000055AA");
                  Buffer.BlockCopy(BitConverter.GetBytes(int_128), 0, dst, 11, 4);
                  Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, dst, 5, 2);
                  if (base.Client != null)
                  {
                        base.Client.Send(dst, dst.Length);
                  }
                  this.vmethod_0(dst, dst.Length);
            }

            public void NHAN_VAT_TU_VONG_PHUC_SINH(byte[] byte_5, int int_128)
            {
                  this.KIEM_TRA_BACH_BAO_CAC_NGUYEN_BAO_SO_LUONG();
                  byte[] dst = new byte[4];
                  Buffer.BlockCopy(byte_5, 11, dst, 0, 4);
                  byte[] buffer2 = Converter.hexStringToByte("AA551F00014D0323171000010000000000000000000000000000000000000000006A4C55AA");
                  if ((BitConverter.ToInt32(dst, 0) == 0x3c14dc9f) && (base.FLD_RXPIONT >= World.int_86))
                  {
                        if (base.PlayerIsDead || (base.NHAN_VAT_HP <= 0L))
                        {
                              if (base.int_8 != 0)
                              {
                                    base.NHAN_VAT_SP = base.NHAN_VAT_LON_NHAT_SP + 1;
                                    double num = Convert.ToInt64(World.lever[base.Player_FLD_LEVEL]) - Convert.ToInt64(World.lever[base.Player_FLD_LEVEL - 1]);
                                    base.NHAN_VAT_KINH_NGHIEM += (long)((num * 0.01) * base.int_8);
                                    if (base.NHAN_VAT_KINH_NGHIEM <= 0L)
                                    {
                                          base.NHAN_VAT_KINH_NGHIEM = 0L;
                                    }
                                    base.int_8 = 0;
                                    base.Calculate_Basic_Char_Data_3();
                                    base.Update_Qigong();
                                    base.UpdatePowersAndStatus();
                                    base.UpdateExperience();
                                    base.UpdateMoneyAndWeight();
                                    base.KIEM_SOAT_CASH_SO_LIEU(World.int_86, 0);
                                    base.UPDATE_RXPIONT();
                                    RxjhClass.INSERT_BACH_BAO_GHI_CHEP(base.Userid, base.UserName, 0.0, "100% Hoi Sinh", 1, World.int_86);
                                    Buffer.BlockCopy(BitConverter.GetBytes(1), 0, buffer2, 11, 4);
                                    Buffer.BlockCopy(BitConverter.GetBytes(World.int_86), 0, buffer2, 0x17, 4);
                              }
                              else
                              {
                                    base.NHAN_VAT_SP = base.NHAN_VAT_LON_NHAT_SP + 1;
                                    double num2 = Convert.ToInt64(World.lever[base.Player_FLD_LEVEL]) - Convert.ToInt64(World.lever[base.Player_FLD_LEVEL - 1]);
                                    base.NHAN_VAT_KINH_NGHIEM += (long)(num2 * 0.01);
                                    if (base.NHAN_VAT_KINH_NGHIEM <= 0L)
                                    {
                                          base.NHAN_VAT_KINH_NGHIEM = 0L;
                                    }
                                    base.int_8 = 0;
                                    base.Calculate_Basic_Char_Data_3();
                                    base.Update_Qigong();
                                    base.UpdatePowersAndStatus();
                                    base.UpdateExperience();
                                    base.UpdateMoneyAndWeight();
                                    base.KIEM_SOAT_CASH_SO_LIEU(World.int_86, 0);
                                    base.UPDATE_RXPIONT();
                                    RxjhClass.INSERT_BACH_BAO_GHI_CHEP(base.Userid, base.UserName, 0.0, "100% Hoi Sinh", 1, World.int_86);
                                    Buffer.BlockCopy(BitConverter.GetBytes(1), 0, buffer2, 11, 4);
                                    Buffer.BlockCopy(BitConverter.GetBytes(World.int_86), 0, buffer2, 0x17, 4);
                              }
                        }
                  }
                  else if ((BitConverter.ToInt32(dst, 0) == 0x3c14dca1) && (base.FLD_RXPIONT >= World.CASH_hop_thanh))
                  {
                        this.NGUYEN_BAO_HOP_THANH_MO_RA = 1;
                        base.KIEM_SOAT_CASH_SO_LIEU(World.CASH_hop_thanh, 0);
                        base.UPDATE_RXPIONT();
                        RxjhClass.INSERT_BACH_BAO_GHI_CHEP(base.Userid, base.UserName, 0.0, "Cuong Hoa/ Hop Thanh", 1, World.CASH_hop_thanh);
                        Buffer.BlockCopy(BitConverter.GetBytes(1), 0, buffer2, 11, 4);
                        Buffer.BlockCopy(BitConverter.GetBytes(World.CASH_hop_thanh), 0, buffer2, 0x17, 4);
                  }
                  else if ((BitConverter.ToInt32(dst, 0) == 0x3c14dca0) && (base.FLD_RXPIONT >= World.int_87))
                  {
                        if ((base.PlayerIsDead || (base.NHAN_VAT_HP <= 0L)) && (base.int_8 != 0))
                        {
                              double num3 = Convert.ToInt64(World.lever[base.Player_FLD_LEVEL]) - Convert.ToInt64(World.lever[base.Player_FLD_LEVEL - 1]);
                              base.NHAN_VAT_KINH_NGHIEM += (long)((num3 * 0.01) * base.int_8);
                              if (base.NHAN_VAT_KINH_NGHIEM <= 0L)
                              {
                                    base.NHAN_VAT_KINH_NGHIEM = 0L;
                              }
                              base.int_8 = 0;
                              base.Calculate_Basic_Char_Data_3();
                              base.Update_Qigong();
                              base.UpdatePowersAndStatus();
                              base.UpdateExperience();
                              base.KIEM_SOAT_CASH_SO_LIEU(World.CASH_hop_thanh, 0);
                              base.UPDATE_RXPIONT();
                              RxjhClass.INSERT_BACH_BAO_GHI_CHEP(base.Userid, base.UserName, 0.0, "1% Hoi Sinh", 1, World.int_87);
                        }
                        Buffer.BlockCopy(BitConverter.GetBytes(1), 0, buffer2, 11, 4);
                        Buffer.BlockCopy(BitConverter.GetBytes(World.int_87), 0, buffer2, 0x17, 4);
                  }
                  else
                  {
                        Buffer.BlockCopy(BitConverter.GetBytes(4), 0, buffer2, 11, 4);
                        if ((BitConverter.ToInt32(dst, 0) == 0x3c14dc9f) && (base.FLD_RXPIONT >= World.int_86))
                        {
                              Buffer.BlockCopy(BitConverter.GetBytes(World.int_86), 0, buffer2, 0x17, 4);
                        }
                        else if ((BitConverter.ToInt32(dst, 0) == 0x3c14dca1) && (base.FLD_RXPIONT >= World.CASH_hop_thanh))
                        {
                              Buffer.BlockCopy(BitConverter.GetBytes(World.CASH_hop_thanh), 0, buffer2, 0x17, 4);
                        }
                        else if ((BitConverter.ToInt32(dst, 0) == 0x3c14dca0) && (base.FLD_RXPIONT >= World.int_87))
                        {
                              Buffer.BlockCopy(BitConverter.GetBytes(World.int_87), 0, buffer2, 0x17, 4);
                        }
                  }
                  Buffer.BlockCopy(dst, 0, buffer2, 15, 4);
                  Buffer.BlockCopy(BitConverter.GetBytes(0), 0, buffer2, 0x13, 4);
                  Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, buffer2, 5, 2);
                  if (base.Client != null)
                  {
                        base.Client.Send(buffer2, buffer2.Length);
                  }
            }

            public void NHAT_DUOC_ITEM(int int_128, byte[] byte_5, byte[] byte_6, byte[] byte_7, byte[] byte_8)
            {
                  byte[] dst = Converter.hexStringToByte("AA557A000147030D006B0001000000760849BF978FD0060608AF2F000000000200000000000000010C020F000200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000BDD6CDB7B4E5B7BA00000000000000000000000000998755AA");
                  Buffer.BlockCopy(byte_5, 0, dst, 0x1f, 4);
                  Buffer.BlockCopy(BitConverter.GetBytes(int_128), 0, dst, 40, 1);
                  Buffer.BlockCopy(byte_6, 0, dst, 15, 8);
                  Buffer.BlockCopy(byte_7, 0, dst, 0x17, 4);
                  Buffer.BlockCopy(byte_8, 0, dst, 0x2f, byte_8.Length);
                  byte[] buffer2 = new byte[0x49];
                  Buffer.BlockCopy(byte_6, 0, buffer2, 0, 8);
                  Buffer.BlockCopy(byte_7, 0, buffer2, 8, 4);
                  Buffer.BlockCopy(byte_5, 0, buffer2, 12, 4);
                  Buffer.BlockCopy(byte_8, 0, buffer2, 0x10, byte_8.Length);
                  base.TRANG_BI_LAN_BAO_VAY[int_128].Item_byte = buffer2;
                  Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, dst, 5, 2);
                  if (base.Client != null)
                  {
                        base.Client.Send(dst, dst.Length);
                  }
            }

            public void NHAT_ITEM(byte[] byte_5, int int_128)
            {
                  this.Packet_Modify(byte_5, int_128);
                  if ((((base.NHAN_VAT_HP > 0L) && !base.PlayerIsDead) && (!base.Exiting && !base.class66_0.bool_0)) && (!base.OpenWarehouse && !base.bool_5))
                  {
                        long num = BitConverter.ToInt64(byte_5, 11);
                        for (int i = 0; i < 0x24; i++)
                        {
                              long num3 = BitConverter.ToInt64(base.TRANG_BI_LAN_BAO_VAY[i].Item_toan_bo_ID, 0);
                              if ((num3 != 0) && (num3 == num))
                              {
                                    return;
                              }
                        }
                        try
                        {
                              TO_DOI_CLASS to_doi_class;
                              MAT_DAT_ITEM_LOAI mat_dat_item_loai = MAT_DAT_ITEM_LOAI.smethod_0(num);
                              if (mat_dat_item_loai == null)
                              {
                                    base.PickItem_Tip(5, num);
                                    return;
                              }
                              bool flag = false;
                              Players players = this;
                              if ((mat_dat_item_loai.VAT_PHAM_QUYEN_UU_TIEN != null) && (mat_dat_item_loai.VAT_PHAM_QUYEN_UU_TIEN != this))
                              {
                                    if (mat_dat_item_loai.VAT_PHAM_PHAT_SINH == 0)
                                    {
                                          TO_DOI_CLASS to_doi_class2;
                                          if (World.W_TO_DOI.TryGetValue(base.TO_DOI_ID, out to_doi_class2))
                                          {
                                                using (Dictionary<int, Players>.ValueCollection.Enumerator enumerator = to_doi_class2.dictionary_0.Values.GetEnumerator())
                                                {
                                                      while (enumerator.MoveNext())
                                                      {
                                                            if (enumerator.Current.UserSessionID == mat_dat_item_loai.VAT_PHAM_QUYEN_UU_TIEN.UserSessionID)
                                                            {
                                                                  flag = true;
                                                            }
                                                      }
                                                }
                                                if (flag)
                                                {
                                                      goto Label_0149;
                                                }
                                                base.PickItem_Tip(5, num);
                                          }
                                          else
                                          {
                                                base.PickItem_Tip(5, num);
                                          }
                                    }
                                    else
                                    {
                                          base.PickItem_Tip(5, num);
                                    }
                                    return;
                              }
                              Label_0149:
                              if (World.W_TO_DOI.TryGetValue(base.TO_DOI_ID, out to_doi_class))
                              {
                                    try
                                    {
                                          if (mat_dat_item_loai.VAT_PHAM_PHAT_SINH == 0)
                                          {
                                                if (to_doi_class.int_2 == 2)
                                                {
                                                      int num4 = new Random(World.smethod_15()).Next(0, to_doi_class.dictionary_0.Count);
                                                      if ((num4 == to_doi_class.dictionary_0.Count) && (num4 != 0))
                                                      {
                                                            num4--;
                                                      }
                                                      players = to_doi_class.list_1[num4];
                                                      if (!this.TRA_TIM_PHAM_VI_NGUOI_CHOI(300, players))
                                                      {
                                                            players = this;
                                                      }
                                                      if (players.DUOC_KIEN_HANG_RONG(players) == -1)
                                                      {
                                                            if (players != this)
                                                            {
                                                                  players.PickItem_Tip(7, num);
                                                            }
                                                            players = this;
                                                      }
                                                }
                                                else if (to_doi_class.int_2 == 1)
                                                {
                                                      if (to_doi_class.int_1 == to_doi_class.dictionary_0.Count)
                                                      {
                                                            to_doi_class.int_1 = 0;
                                                      }
                                                      players = to_doi_class.list_1[to_doi_class.int_1];
                                                      if (!this.TRA_TIM_PHAM_VI_NGUOI_CHOI(300, players))
                                                      {
                                                            players = this;
                                                      }
                                                      if (players.DUOC_KIEN_HANG_RONG(players) == -1)
                                                      {
                                                            if (players != this)
                                                            {
                                                                  players.PickItem_Tip(7, num);
                                                            }
                                                            players = this;
                                                      }
                                                      to_doi_class.int_1++;
                                                }
                                                else
                                                {
                                                      players = this;
                                                }
                                                players.UNKNOWN_NHAT_ITEM_6(players, mat_dat_item_loai, to_doi_class, num);
                                          }
                                          else
                                          {
                                                players = this;
                                                players.UNKNOWN_NHAT_ITEM_6(players, mat_dat_item_loai, to_doi_class, num);
                                          }
                                          return;
                                    }
                                    catch
                                    {
                                          players = this;
                                          players.UNKNOWN_NHAT_ITEM_6(players, mat_dat_item_loai, to_doi_class, num);
                                          return;
                                    }
                              }
                              players = this;
                              players.UNKNOWN_NHAT_ITEM_6(players, mat_dat_item_loai, to_doi_class, num);
                        }
                        catch (Exception exception)
                        {
                              Form1.WriteLine(1, "捡VAT_PHAM出错 [" + base.Userid + "][" + base.UserName + "] ID[" + num.ToString() + "] " + exception.Message);
                        }
                  }
            }

            public void NHIEM_VU_DUNG_BO_CAU_DUA_TIN()
            {
                  byte[] dst = Converter.hexStringToByte("AA555200010000B200000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000055AA");
                  Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, dst, 5, 2);
                  if (base.Client != null)
                  {
                        base.Client.Send(dst, dst.Length);
                  }
            }

            public void NHIEM_VU_NHAC_NHO_SO_LIEU_GUI_DI(int int_128, int int_129, int int_130)
            {
                  using (PacketData data = new PacketData())
                  {
                        data.Write2(int_128);
                        data.Write2(int_129);
                        data.Write2(int_130);
                        if (base.Client != null)
                        {
                              base.Client.method_4(data, 0x8400, base.UserSessionID);
                        }
                  }

                  //Save_Char_data_Stored();
            }

            public void NHUOM_TOC(byte[] byte_5, int int_128)
            {
                  try
                  {
                        this.Packet_Modify(byte_5, int_128);
                        byte[] dst = new byte[4];
                        byte[] buffer2 = new byte[4];
                        Buffer.BlockCopy(byte_5, 11, dst, 0, 1);
                        Buffer.BlockCopy(byte_5, 13, buffer2, 0, 2);
                        if (BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[BitConverter.ToInt32(dst, 0)].VAT_PHAM_ID, 0) == 0x3c14dc0f)
                        {
                              byte[] buffer3 = Converter.hexStringToByte("AA552800000A00111018000100030041440300000000000FDC143C000000000000D5EF00000000000000000055AA");
                              byte[] buffer4 = Converter.hexStringToByte("AA551300000000121004000000D5EF000000000000000055AA");
                              Buffer.BlockCopy(dst, 0, buffer3, 13, 1);
                              Buffer.BlockCopy(buffer2, 0, buffer3, 0x21, 2);
                              Buffer.BlockCopy(buffer2, 0, buffer4, 13, 2);
                              Buffer.BlockCopy(base.TRANG_BI_LAN_BAO_VAY[BitConverter.ToInt32(dst, 0)].Item_toan_bo_ID, 0, buffer3, 15, 8);
                              Buffer.BlockCopy(base.TRANG_BI_LAN_BAO_VAY[BitConverter.ToInt32(dst, 0)].VAT_PHAM_ID, 0, buffer3, 0x17, 4);
                              Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, buffer3, 5, 2);
                              Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, buffer4, 5, 2);
                              if (base.Client != null)
                              {
                                    base.Client.Send(buffer3, buffer3.Length);
                              }
                              if (base.Client != null)
                              {
                                    base.Client.Send(buffer4, buffer4.Length);
                              }
                              Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, buffer4, 11, 2);
                              this.vmethod_0(buffer4, buffer4.Length);
                              base.class84_0.MAU_TOC = BitConverter.ToInt16(buffer2, 0);
                              this.LAM_GIAM_DI_VAT_PHAM(BitConverter.ToInt32(dst, 0), 1);
                        }
                  }
                  catch (Exception exception)
                  {
                        Form1.WriteLine(1, "Hair error![" + base.Userid + "]-[" + base.UserName + "]" + exception.Message);
                  }
            }

            public void NOI_CHUYEN(byte[] byte_5, int int_128)
            {
                  if (base.Player_FLD_LEVEL < World.Phat_ngon_dang_cap)
                  {
                        base.GameMessage("To prevent malicious scraper, maintaining the game in order. To be met" + World.Phat_ngon_dang_cap + "Above the level in order to speak, thank you!", 10, "system hint");
                  }
                  else
                  {
                        int num = 0;
                        try
                        {
                              string message = string.Empty;
                              string str2 = string.Empty;
                              int num2 = byte_5[11];
                              int num3 = byte_5[0x22];
                              if (num3 > 0x63)
                              {
                                    num3 = 0x63;
                              }
                              byte[] dst = new byte[num3];
                              num = 1;
                              try
                              {
                                    Buffer.BlockCopy(byte_5, 0x23, dst, 0, dst.Length);
                                    message = Encoding.Default.GetString(dst).Replace("\0", "").Trim();
                              }
                              catch (Exception exception)
                              {
                                    Form1.WriteLine(1, string.Concat(new object[] { "说话出错1![", base.Userid, "]-[", base.UserName, "]", dst.Length, " ", exception.Message }));
                                    return;
                              }
                              num = 2;
                              byte[] buffer2 = new byte[15];
                              Buffer.BlockCopy(byte_5, 12, buffer2, 0, buffer2.Length);
                              str2 = Encoding.Default.GetString(buffer2).Replace("\0", "").Trim();
                              if ((message.Length <= 0) || (num2 == 100))
                              {
                                    return;
                              }
                              num = 3;
                              if (!message.ToString().Contains("!"))
                              {
                                    using (List<XWWL_kill>.Enumerator enumerator = World.list_6.GetEnumerator())
                                    {
                                          string[] textArray2;
                                          while (enumerator.MoveNext())
                                          {
                                                XWWL_kill current = enumerator.Current;
                                                if (message.Replace(" ", "").IndexOf(current.Txt) != -1)
                                                {
                                                      Form1.WriteLine(0, "发过滤文字：" + message + " 帐号" + base.Userid + " 人物" + base.UserName);
                                                      if (current.Sffh == 0)
                                                      {
                                                            message = message.Replace(" ", "").Replace(current.Txt, World.Replace_Text_Filter ?? "");
                                                      }
                                                      else
                                                      {
                                                            if (current.Sffh == 1)
                                                            {
                                                                  goto Label_023E;
                                                            }
                                                            if (current.Sffh == 2)
                                                            {
                                                                  goto Label_0256;
                                                            }
                                                            if (current.Sffh == 3)
                                                            {
                                                                  return;
                                                            }
                                                      }
                                                }
                                          }
                                          goto Label_02F7;
                                          Label_023E:
                                          if (base.Client != null)
                                          {
                                                base.Client.Dispose();
                                          }
                                          return;
                                          Label_0256:
                                          textArray2 = new string[] { "发过滤文字：", message, " 帐号", base.Userid, " 人物", base.UserName };
                                          Form1.WriteLine(100, string.Concat(textArray2));
                                          DBA.smethod_7($"UPDATE TBL_ACCOUNT SET FLD_ZT=1 WHERE FLD_ID='{base.Userid}'", "rxjhaccount");
                                          DBA.smethod_7($" Insert into TBL_BANED values ( '{base.Client.ToString()}')", "rxjhaccount");
                                          if (base.Client != null)
                                          {
                                                base.Client.Dispose();
                                          }
                                          return;
                                    }
                              }
                              Label_02F7:
                              num = 4;
                              if ((message.Length <= 0x62) && !this.ParseCommand(message))
                              {
                                    if ((base.FLD_WCVIP == 1) && (DateTime.Now < base.FLD_WCVIPTIM))
                                    {
                                          foreach (Players players in World.allConnectedChars.Values)
                                          {
                                                if (this.TRA_TIM_PHAM_VI_NGUOI_CHOI(World.Multicolored_speak_Range, players))
                                                {
                                                      players.GameMessage(message ?? "", 20, "Players[" + base.UserName + "]");
                                                      players.GameMessage(message ?? "", 0x15, "Players[" + base.UserName + "]");
                                                      players.GameMessage(message ?? "", 0x16, "Players[" + base.UserName + "]");
                                                      players.GameMessage(message ?? "", 0x17, "Players[" + base.UserName + "]");
                                                      players.GameMessage(message ?? "", 0x18, "Players[" + base.UserName + "]");
                                                }
                                          }
                                    }
                                    this.GUI_DI_TIN_TUC(message, num2, str2);
                              }
                        }
                        catch (Exception exception2)
                        {
                              string str3 = Converter.smethod_24(byte_5);
                              Form1.WriteLine(1, string.Concat(new object[] { "说话出错![", base.Userid, "]-[", base.UserName, "] [", num, "]  [", str3, "]", exception2.Message }));
                        }
                  }
            }

            public void NPC_TRUYEN_TONG(byte[] byte_5, int int_128)
            {
                  this.Packet_Modify(byte_5, int_128);
                  byte[] dst = Converter.hexStringToByte("AA551300010A003310040003000100000000000000000055AA");
                  Buffer.BlockCopy(byte_5, 0, dst, 0, int_128);
                  Buffer.BlockCopy(BitConverter.GetBytes(0), 0, dst, 4, 1);
                  Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, dst, 5, 2);
                  if (base.Client != null)
                  {
                        base.Client.Send(dst, dst.Length);
                  }
                  byte[] buffer2 = new byte[2];
                  Buffer.BlockCopy(byte_5, 11, buffer2, 0, 2);
                  if (BitConverter.ToInt16(buffer2, 0) == 0x321)
                  {
                        if ((World.THE_LUC_CHIEN_2_TIEN_TRINH < 4) && (World.THE_LUC_CHIEN_2_TIEN_TRINH > 0))
                        {
                              if (base.Player_Zx == 1)
                              {
                                    this.Move(0f, -232f, 15f, 0x321);
                              }
                              else
                              {
                                    this.Move(0f, 228f, 15f, 0x321);
                              }
                        }
                        byte[] buffer3 = Converter.hexStringToByte("AA551F000171009100100002000000020000000900000000000000000000000000569A55AA");
                        Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, buffer3, 5, 2);
                        if (base.Client != null)
                        {
                              base.Client.Send(buffer3, buffer3.Length);
                        }
                  }
            }

            public void OpenItem(byte[] data, int length)
            {
                  if (base.NHAN_VAT_HP > 0L)
                  {
                        this.Packet_Modify(data, length);
                        if (!base.OpenWarehouse && ((base.PlayerShop == null) || !base.PlayerShop.PersonStore_Open))
                        {
                              try
                              {
                                    byte[] dst = new byte[4];
                                    Buffer.BlockCopy(data, 15, dst, 0, 4);
                                    int num = data[11];
                                    int index = data[12];
                                    switch (num)
                                    {
                                          case 0:
                                                if ((index == 14) && (base.NHAN_VAT_LINH_THU != null))
                                                {
                                                      return;
                                                }
                                                for (int i = 0; i < 0x24; i++)
                                                {
                                                      if (BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[i].VAT_PHAM_ID, 0) == 0)
                                                      {
                                                            base.TRANG_BI_LAN_BAO_VAY[i].Item_byte = base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[index].Item_byte;
                                                            base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[index].Item_byte = new byte[0x49];
                                                            base.THAY_DOI_TRANG_BI_VI_TRI(num, index, 1, i, base.TRANG_BI_LAN_BAO_VAY[i].Item_byte, 1);
                                                            this.Update_Equipment_Effectiveness();
                                                            base.TINH_TOAN_NHAN_VAT_TRANG_BI_SO_LIEU();
                                                            base.UpdatePowersAndStatus();
                                                            base.UpdateMoneyAndWeight();
                                                            this.UpdateHP_MP_SP();
                                                            return;
                                                      }
                                                }
                                                break;

                                          case 1:
                                                if (BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_ID, 0) != 0)
                                                {
                                                      goto Label_02BD;
                                                }
                                                return;

                                          case 60:
                                                if ((index != 14) || (base.NHAN_VAT_LINH_THU == null))
                                                {
                                                      TBL_XWWL_ITEM tbl_xwwl_item = World.Itme[BitConverter.ToInt32(base.NHAN_VAT_LINH_THU.class23_0[index].VAT_PHAM_ID, 0)];
                                                      if (BitConverter.ToInt32(base.NHAN_VAT_LINH_THU.class23_1[4].VAT_PHAM_ID, 0) == 0)
                                                      {
                                                            base.NHAN_VAT_LINH_THU.class23_1[tbl_xwwl_item.FLD_RESIDE2 - 1].Item_byte = base.NHAN_VAT_LINH_THU.class23_0[index].Item_byte;
                                                            base.NHAN_VAT_LINH_THU.class23_0[index].Item_byte = new byte[0x49];
                                                            base.THAY_DOI_TRANG_BI_VI_TRI(num, index, num - 1, tbl_xwwl_item.FLD_RESIDE2 - 1, base.NHAN_VAT_LINH_THU.class23_1[tbl_xwwl_item.FLD_RESIDE2 - 1].Item_byte, 1);
                                                            this.Method_Linh_Thu_Mang_Nang();
                                                            this.Method_SpPetExp();
                                                            base.NHAN_VAT_LINH_THU.method_0();
                                                            this.Method_SpPetHungry();
                                                            this.Method_Cap_Nhat_Linh_Thu_Vo_Cong_Trang_Thai();
                                                            base.Update_Figure_Data(this);
                                                      }
                                                }
                                                return;

                                          default:
                                                return;
                                    }
                                    int num3 = 0;
                                    while (num3 < 0x24)
                                    {
                                          if (BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[num3].VAT_PHAM_ID, 0) == 0)
                                          {
                                                goto Label_0254;
                                          }
                                          num3++;
                                    }
                                    return;
                                    Label_0254:
                                    base.TRANG_BI_LAN_BAO_VAY[num3].Item_byte = base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[index].Item_byte;
                                    base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[index].Item_byte = new byte[0x49];
                                    base.THAY_DOI_TRANG_BI_VI_TRI(num, index, 1, num3, base.TRANG_BI_LAN_BAO_VAY[num3].Item_byte, 1);
                                    this.Update_Equipment_Effectiveness();
                                    base.TINH_TOAN_NHAN_VAT_TRANG_BI_SO_LIEU();
                                    base.UpdatePowersAndStatus();
                                    base.UpdateMoneyAndWeight();
                                    this.UpdateHP_MP_SP();
                                    return;
                                    Label_02BD:
                                    if (!base.TRANG_BI_LAN_BAO_VAY[index].bool_0)
                                    {
                                          TBL_XWWL_ITEM tbl_xwwl_item2 = World.Itme[BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_ID, 0)];
                                          if ((tbl_xwwl_item2.FLD_RESIDE2 >= 1) && (tbl_xwwl_item2.FLD_RESIDE2 <= 15))
                                          {
                                                if (((((tbl_xwwl_item2.FLD_LEVEL <= base.Player_FLD_LEVEL) && ((tbl_xwwl_item2.FLD_ZX == 0) || (tbl_xwwl_item2.FLD_ZX == base.Player_Zx))) && ((tbl_xwwl_item2.FLD_RESIDE1 == 0) || (tbl_xwwl_item2.FLD_RESIDE1 == base.Player_Job))) && (((tbl_xwwl_item2.FLD_JOB_LEVEL == 0) || (tbl_xwwl_item2.FLD_JOB_LEVEL <= base.Player_FLD_JOB_LEVEL)) && ((tbl_xwwl_item2.FLD_SEX == 0) || (tbl_xwwl_item2.FLD_SEX == base.Player_Sex)))) && ((tbl_xwwl_item2.FLD_XWJD < 1) || (tbl_xwwl_item2.FLD_XWJD <= base.NHAN_VAT_VO_HUAN_GIAI_DOAN)))
                                                {
                                                      TBL_XWWL_ITEM tbl_xwwl_item3 = World.Itme[BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_ID, 0)];
                                                      if (BitConverter.ToInt32(base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[tbl_xwwl_item3.FLD_RESIDE2 - 1].VAT_PHAM_ID, 0) == 0)
                                                      {
                                                            base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[tbl_xwwl_item3.FLD_RESIDE2 - 1].Item_byte = base.TRANG_BI_LAN_BAO_VAY[index].Item_byte;
                                                            base.TRANG_BI_LAN_BAO_VAY[index].Item_byte = new byte[0x49];
                                                            base.THAY_DOI_TRANG_BI_VI_TRI(num, index, 0, tbl_xwwl_item3.FLD_RESIDE2 - 1, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[tbl_xwwl_item3.FLD_RESIDE2 - 1].Item_byte, 1);
                                                            base.TINH_TOAN_NHAN_VAT_TRANG_BI_SO_LIEU();
                                                            this.Update_Equipment_Effectiveness();
                                                            base.UpdatePowersAndStatus();
                                                            base.UpdateMoneyAndWeight();
                                                            this.UpdateHP_MP_SP();
                                                      }
                                                }
                                          }
                                          else if (tbl_xwwl_item2.FLD_RESIDE2 == 0x11)
                                          {
                                                this.Unpacking(data);
                                          }
                                          else if (tbl_xwwl_item2.FLD_RESIDE2 == 0x13)
                                          {
                                                this.Qigong_Book(data);
                                          }
                                          else if (tbl_xwwl_item2.FLD_RESIDE2 == 20)
                                          {
                                                this.MO_RA_ITEM_PHAT_DONG_CONG_CU(data);
                                          }
                                          else
                                          {
                                                this.Right_Click(data);
                                          }
                                    }
                              }
                              catch (Exception exception)
                              {
                                    Form1.WriteLine(1, "打开VAT_PHAM出错 [" + base.Userid + "][" + base.UserName + "] " + exception.Message);
                              }
                        }
                  }
            }

            public void PACKET_DO_VO_HUAN_DAI_LOAI(int int_128, int int_129, int int_130)
            {
                  byte[] dst = Converter.hexStringToByte("AA556B0001000025315C00FFFFFFFF0C000000FFFFFFFF0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000D2D455AA");
                  Buffer.BlockCopy(BitConverter.GetBytes(int_128), 0, dst, 15, 2);
                  Buffer.BlockCopy(BitConverter.GetBytes(int_129), 0, dst, 0x13, 1);
                  Buffer.BlockCopy(BitConverter.GetBytes(int_130), 0, dst, 0x2b, 4);
                  Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, dst, 5, 2);
                  if (base.Client != null)
                  {
                        base.Client.method_8(dst, dst.Length);
                  }
            }

            public void Packet_Modify(byte[] byte_5, int int_128)
            {
                  try
                  {
                        if (base.UserSessionID != 0)
                        {
                              byte[] dst = new byte[4];
                              Buffer.BlockCopy(byte_5, 5, dst, 0, 2);
                              int num = BitConverter.ToInt32(dst, 0);
                              if ((num != base.UserSessionID) && (num != base.NHAN_VAT_LINH_THU_TOAN_BO_TRANG_PHUC_ID))
                              {
                                    if (World.Packet_title == 1)
                                    {
                                          DBA.smethod_7($"UPDATE TBL_ACCOUNT SET FLD_ZT=1 WHERE FLD_ID='{base.Userid}'", "rxjhaccount");
                                    }
                                    string str = Converter.smethod_24(byte_5);
                                    Form1.WriteLine(0x4d, string.Concat(new object[] { "Packet illegally modified title[", base.Userid, "][", base.UserName, "] ID=[", num, "] People full serviceID=[", base.UserSessionID, "] [", base.Client.ToString(), "] packageID[", $"{byte_5[8]:X2}{byte_5[7]:X2}", "] [", str, "]" }));
                                    if (base.Client != null)
                                    {
                                          base.Client.Dispose();
                                    }
                              }
                        }
                  }
                  catch (Exception exception)
                  {
                        Form1.WriteLine(1, "Packet modifications! Error[" + base.Userid + "]-[" + base.Client.ToString() + "]" + exception.Message);
                  }
            }

            public void PACKET_NHAN_TINH_NHAN(int int_128, string string_10, string string_11)
            {
                  byte[] dst = Converter.hexStringToByte("AA5547000186017A17380054000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000089F755AA");
                  Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, dst, 5, 2);
                  Buffer.BlockCopy(BitConverter.GetBytes(int_128), 0, dst, 11, 2);
                  byte[] bytes = Encoding.Default.GetBytes(string_10);
                  byte[] src = Encoding.Default.GetBytes(string_11);
                  Buffer.BlockCopy(bytes, 0, dst, 0x13, bytes.Length);
                  Buffer.BlockCopy(src, 0, dst, 0x22, src.Length);
                  if (base.Client != null)
                  {
                        base.Client.method_8(dst, dst.Length);
                  }
            }

            public void PACKET_VE_KY_NANG_CHE_TAO()
            {
                  byte[] dst = Converter.hexStringToByte("AA55000E00AA0243170800F7FFFFFF0000000055AA");
                  Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, dst, 5, 2);
                  if (base.Client != null)
                  {
                        base.Client.method_8(dst, dst.Length);
                  }
            }

            private void PAK_0x8910(byte[] byte_5, int int_128)
            {
                  try
                  {
                        using (PacketData data = new PacketData())
                        {
                              data.Write4(BitConverter.ToInt16(byte_5, 11));
                              data.Write4(0);
                              if (base.Client != null)
                              {
                                    base.Client.method_5(data, 0x8910, base.UserSessionID, 1);
                              }
                        }
                  }
                  catch (Exception)
                  {
                  }
            }

            public void PAK_SUA_CHUA_DO_VO_HUAN(int int_128)
            {
                  byte[] dst = Converter.hexStringToByte("AA551700018A02D218080013000000F0D8FFFF000000000000DA1F55AA");
                  Buffer.BlockCopy(BitConverter.GetBytes(int_128), 0, dst, 15, 4);
                  Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, dst, 5, 2);
                  if (base.Client != null)
                  {
                        base.Client.method_8(dst, dst.Length);
                  }
            }

            public void PAKET_VO_HUAN_269(int int_128, int int_129, int int_130, VAT_PHAM_LOAI class23_6)
            {
                  byte[] dst = Converter.hexStringToByte("AA556B0001000025315C00020000000C00000000000000000000006CD0EE0B0000000000000000000000000F0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000E80300000000000000000000000000000000228055AA");
                  Buffer.BlockCopy(BitConverter.GetBytes(int_128), 0, dst, 15, 2);
                  Buffer.BlockCopy(BitConverter.GetBytes(class23_6.VAT_PHAM_VI_TRI), 0, dst, 0x17, 4);
                  Buffer.BlockCopy(class23_6.VAT_PHAM_ID, 0, dst, 0x1b, 4);
                  Buffer.BlockCopy(BitConverter.GetBytes(int_130), 0, dst, 0x2b, 4);
                  Buffer.BlockCopy(BitConverter.GetBytes(class23_6.FLD_keo_dai_suc_manh), 0, dst, 0x5b, 2);
                  Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, dst, 5, 2);
                  if (base.Client != null)
                  {
                        base.Client.method_8(dst, dst.Length);
                  }
            }

            #region 명령어            
            public bool ParseCommand(string Message)
            {
                  bool flag;
                  IEnumerator<Players> enumerator2;
                  if (World.jlMsg == 1)
                  {
                        Form1.WriteLine(0, "Players_ParseCommand");
                  }
                  if (Message[0] != '!')
                  {
                        if (Message[0] != '@')
                        {
                              return false;
                        }
                        char[] chArray1 = new char[] { ' ' };
                        string[] strArray2 = Message.Split(chArray1);
                        strArray2[0] = strArray2[0];
                        if ((strArray2.Length >= 1) && (World.Item_Exchange_LUA_script_is_open == 1))
                        {
                              try
                              {
                                    if (World.scriptClass_0.VAT_PHAM_TRAO_DOI_SU_KIEN != null)
                                    {
                                          if (DateTime.Now.Subtract(this.dateTime_12).TotalSeconds < 10.0)
                                          {
                                                base.GameMessage("You can redeem every 10 seconds once, thank you", 9, "system hint");
                                                return true;
                                          }
                                          this.dateTime_12 = DateTime.Now;
                                          object[] args = new object[] { base.UserSessionID, strArray2[0] };
                                          World.scriptClass_0.VAT_PHAM_TRAO_DOI_SU_KIEN.Call(args);
                                    }
                              }
                              catch (Exception exception)
                              {
                                    Form1.WriteLine(2, "Items exchange LUA script error --" + exception.Message);
                              }
                        }
                        return true;
                  }
                  char[] separator = new char[] { ' ' };
                  string[] strArray = Message.Split(separator);
                  strArray[0] = strArray[0];
                  if ((strArray.Length >= 1) && (strArray[0] == "!help"))
                  {
                        this.CAP_NHAT_KY_NANG_MOI_THANG_THIEN_LAM_DONG_BANG();
                        base.GameMessage("To create a martial art players, there are one million, you can go to the willow are being held, the three evil off to find NPC to create a martial art", 9, "system hint");
                        base.GameMessage("All sects server commands to press robes production.", 9, "system hint");
                        base.GameMessage("Players can use this command to move the movable each map", 9, "[" + World.Di_dong_menh_lenh + " Map name]");
                        if (World.PK_out_equipment == 1)
                        {
                              base.GameMessage("Good and evil reaches" + World.PK_out_equipment_good_and_evil.ToString() + "，After the death of the body may randomly drop items", 9, "[The line for the PK line]");
                        }
                        base.GameMessage("Players reach" + World.Chuyen_sinh_can_level + "Level can use this command reincarnation rewarded", 9, "[" + World.Chuyen_sinh_menh_lenh + "]");
                        base.GameMessage("Players can use this command to check their own property", 9, "[" + World.Kiem_tra_tin_tuc_menh_lenh + "]");
                        base.GameMessage("Players can use this command to kneel to marry him", 9, "[" + World.Cau_hon_menh_lenh + "]");
                        base.GameMessage("Players can use this command to help themselves Card", 9, "[" + World.Self_help_command_card + "]");
                        base.GameMessage("Jin Xiangyu NPC lock unlock service charge portion of ingot", 9, "[Equipment lock function]");
                        base.GameMessage("This command works on goods bound attached to the soul, when attached to the soul of the items on the first cell, attached to the soul in the second grid", 9, "[" + World.Phu_hon_menh_lenh + "]");
                        base.GameMessage("Players can use this command to clean up the backpack unbound items, please put valuables warehouse.", 9, "[" + World.Thanh_ly_ba_lo_menh_lenh + "]");
                        base.GameMessage("Players can use this command to clean up the backpack bound items, please put valuables warehouse.", 9, "[" + World.Thanh_ly_troi_chat_ba_lo_menh_lenh + "]");
                        base.GameMessage("Players can use this command to divorce", 9, "[" + World.Ly_hon_menh_lenh + "]");
                        if (World.Co_hay_khong_mo_ra_o_tuyen_thoi_gian_khen_thuong != 0)
                        {
                              base.GameMessage("Players can use this command to query the online time to accept the award, offline time does not count", 9, "[" + World.Kiem_tra_thoi_gian_menh_lenh + "]");
                        }
                  }
                  if ((strArray.Length >= 1) && (strArray[0] == World.CH))
                  {
                        base.GameMessage("Suitingfenwen Pinggupingguang Ouyanlunju Chengguaiguozi " + World.Server_Name_2, 10, "Message");
                  }
                  if ((strArray.Length >= 1) && (strArray[0] == World.POINT))
                  {
                        base.GameMessage("Your point = " + base.FLD_RXPIONT, 10, "Message");
                  }
                  if ((strArray.Length >= 1) && (strArray[0] == World.ATUM))
                  {
                        if (((BitConverter.ToInt32(base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[0].VAT_PHAM_ID, 0) != 0) || (BitConverter.ToInt32(base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[1].VAT_PHAM_ID, 0) != 0)) || (((BitConverter.ToInt32(base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].VAT_PHAM_ID, 0) != 0) || (BitConverter.ToInt32(base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[4].VAT_PHAM_ID, 0) != 0)) || (BitConverter.ToInt32(base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[11].VAT_PHAM_ID, 0) != 0)))
                        {
                              base.GameMessage("Cannot to do this command", 10, "Message");
                        }
                        else if (base.Player_Zx == 1)
                        {
                              if (base.FLD_RXPIONT > 150L)
                              {
                                    base.Player_Zx = 2;
                                    base.FLD_RXPIONT -= 150L;
                                    this.UpdateHP_MP_SP();
                                    base.UPDATE_RXPIONT();
                                    base.Save_Char_data_Stored();
                                    base.GameMessage("Mi Han Wu Yi beech India search [Fai Road chessboard filling Ow yo crook axillary crutch aluminum carry 150 Juan sister spit xiao titanite", 10, "Message");
                                    base.GameMessage("Mihanwuju India Yiaopangmiao Gupingluosui crazy night Tubaojieyi Toumeilingpeng:? Yao Yi Ting ah Zi> Asia sentenced っ", 10, "Message");
                              }
                              else
                              {
                                    base.GameMessage("Songfangyiyi more panic Zhenlujieyi Wuyouguannai Ж shake understands Shen Hui Luzhulongqing station 150!", 10, "Message");
                              }
                        }
                  }
                  if ((strArray.Length >= 1) && (strArray[0] == World.TUMMA))
                  {
                        if (((BitConverter.ToInt32(base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[0].VAT_PHAM_ID, 0) != 0) || (BitConverter.ToInt32(base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[1].VAT_PHAM_ID, 0) != 0)) || (((BitConverter.ToInt32(base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].VAT_PHAM_ID, 0) != 0) || (BitConverter.ToInt32(base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[4].VAT_PHAM_ID, 0) != 0)) || (BitConverter.ToInt32(base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[11].VAT_PHAM_ID, 0) != 0)))
                        {
                              base.GameMessage("Cannot to do this command", 10, "Message");
                        }
                        else if (base.Player_Zx == 2)
                        {
                              if (base.FLD_RXPIONT > 150L)
                              {
                                    base.Player_Zx = 1;
                                    base.FLD_RXPIONT -= 150L;
                                    base.Save_Char_data_Stored();
                                    this.UpdateHP_MP_SP();
                                    base.UPDATE_RXPIONT();
                                    base.GameMessage("Mi Han Wu Yi beech India search [Fai Road chessboard filling Ow yo crook axillary crutch aluminum carry 150 Juan sister spit xiao titanite", 10, "Message");
                                    base.GameMessage("Mihanwuju Yinyiaopang Miaogupingluo Suifengyetu Baojieyigai Meiliexiaoxie: Yao Yi Ting ah Zi> Asia sentenced っ", 10, "Message");
                              }
                              else
                              {
                                    base.GameMessage("Songfangyiyi more panic Zhenlujieyi Wuyouguannai Ж shake understands Shen Hui Luzhulongqing station 150!", 10, "Message");
                              }
                        }
                  }
                  if (((strArray.Length >= 1) && (strArray[0] == World.DELBAD)) && (base.NHAN_VAT_THIEN_AC < 0))
                  {
                        if (base.FLD_RXPIONT > 200L)
                        {
                              base.NHAN_VAT_THIEN_AC = 0;
                              base.FLD_RXPIONT -= 200L;
                              base.Save_Char_data_Stored();
                              base.UPDATE_RXPIONT();
                              base.GameMessage("Admin da hieu thau noi long cua dai hiep, diem PK cua dai hiep da ve 0", 10, "Message");
                              base.GameMessage("Phi thue luat su la 200@CASH", 10, "Message");
                        }
                        else
                        {
                              base.GameMessage("Ac gia ac bao, chi co 200@CASH moi co the giup dai hiep luc nay!", 10, "Messgage");
                        }
                  }
                  if ((strArray.Length >= 1) && (strArray[0] == World.BACK))
                  {
                        this.Move(485f, 2155f, 15f, 0x65);
                  }
                  if ((strArray.Length >= 1) && (strArray[0] == World.DEL1))
                  {
                        for (int j = 0; j < 0x24; j++)
                        {
                              if (!base.TRANG_BI_LAN_BAO_VAY[0].Item_troi_chat)
                              {
                                    base.TRANG_BI_LAN_BAO_VAY[0].Item_byte = new byte[0x49];
                              }
                        }
                        base.EquipmentBasket_Wrapped();
                        base.UpdateMoneyAndWeight();
                        base.GameMessage("Non-bound items to clean up is completed, cleaning bind command Use[" + World.Thanh_ly_troi_chat_ba_lo_menh_lenh + "]", 9, "system hint");
                        return true;
                  }
                  if ((strArray.Length >= 1) && (strArray[0] == World.REPRAN))
                  {
                        for (int k = 0; k < 15; k++)
                        {
                              if (base.Qigong[k].气功量 != 0xff)
                              {
                                    int num3 = base.Qigong[k].气功量;
                                    base.Qigong[k].气功量 = 0;
                                    base.Player_Qigong_point += num3;
                              }
                        }
                        base.Update_Qigong();
                        base.UpdatePowersAndStatus();
                        this.UpdateHP_MP_SP();
                        base.GameMessage("Mi Han Wujuyinyi mystery Huanyexiaoxie!!", 10, "Message");
                  }
                  if ((strArray.Length >= 1) && (strArray[0] == World.REZIAN))
                  {
                        BitConverter.ToUInt16(new byte[2], 0);
                        foreach (THANG_THIEN_KHI_CONG_LOAI local1 in base.THANG_THIEN_KHI_CONG.Values)
                        {
                              int num4 = local1.KHI_CONG_SO_LUONG;
                              local1.KHI_CONG_SO_LUONG = 0;
                              base.Player_Qigong_point += num4;
                        }
                        base.Update_Qigong();
                        base.UpdatePowersAndStatus();
                        this.UpdateHP_MP_SP();
                        base.GameMessage("Mihanwuju Yinyimihuan night Nanzhangguanpeng?!!", 10, "Message");
                        base.GameMessage("Non-bound items to clean up is completed, cleaning bind command Use[" + World.Thanh_ly_troi_chat_ba_lo_menh_lenh + "]", 9, "Message");
                  }
                  if ((strArray.Length >= 1) && (strArray[0] == "!xoapill"))
                  {
                        if (base.dictionary_3.ContainsKey(0x3c14dc3f))
                        {
                              base.dictionary_3.Remove(0x3c14dc3f);
                              DateTime time2 = new DateTime(0x7b2, 1, 1, 8, 0, 0);
                              TimeSpan span2 = DateTime.Now.Subtract(time2);
                              PUBLIC_DUOC_PHAM_LOAI public_duoc_pham_loai = new PUBLIC_DUOC_PHAM_LOAI
                              {
                                    DUOC_PHAM_ID = 0x3c14dc3f,
                                    THOI_GIAN = (int)span2.TotalSeconds
                              };
                              base.dictionary_3.Add(public_duoc_pham_loai.DUOC_PHAM_ID, public_duoc_pham_loai);
                              if (base.Add_Status_List.ContainsKey(public_duoc_pham_loai.DUOC_PHAM_ID))
                              {
                                    base.Add_Status_List[public_duoc_pham_loai.DUOC_PHAM_ID].THOI_GIAN_KET_THUC_SU_KIEN();
                              }
                        }
                        base.GameMessage("Cleanup basaltic character is completed, a small back and re-login to open the other characters again.", 9, "system hint");
                  }
                  if ((strArray.Length < 1) || (strArray[0] != World.Ly_hon_menh_lenh))
                  {
                        if ((strArray.Length >= 1) && (strArray[0] == "!safeon"))
                        {
                              if (World.Co_hay_khong_mo_ra_an_toan_hinh_thuc != 0)
                              {
                                    if ((DateTime.Now.Hour >= World.Thoi_gian_an_toan_bat_dau) && (DateTime.Now.Hour <= World.Thoi_gian_an_toan_ket_thuc))
                                    {
                                          if (base.int_16 == 1)
                                          {
                                                base.GameMessage("You are currently in safe mode, please rest assured that hang up.", 9, "system hint");
                                          }
                                          if (base.FLD_RXPIONT >= World.An_toan_hinh_thuc_tieu_hao_CASH)
                                          {
                                                Additional_Sate_Class class2 = new Additional_Sate_Class(this, 0x4e20, 0x3c14dca0, 0);
                                                base.Add_Status_List.Add(0x3c14dca0, class2);
                                                this.Status_Effect(BitConverter.GetBytes(0x3c14dca0), 1, 0xbb8);
                                                base.KIEM_SOAT_CASH_SO_LIEU(World.An_toan_hinh_thuc_tieu_hao_CASH, 0);
                                                base.int_16 = 1;
                                                base.GameMessage("Congratulations on your successful security mode is enabled, please rest assured that hang up.", 9, "system hint");
                                                base.UPDATE_RXPIONT();
                                          }
                                          else
                                          {
                                                base.GameMessage("Ingot insufficient, ON security mode requires payment" + World.An_toan_hinh_thuc_tieu_hao_CASH + "Ingots!", 9, "system hint");
                                          }
                                    }
                                    else
                                    {
                                          base.GameMessage("Safe Mode is open daily from 0:00 to 8:00 in the morning!", 9, "system hint");
                                    }
                              }
                              return true;
                        }
                        if ((strArray.Length >= 1) && (strArray[0] == "!safeoff"))
                        {
                              if (base.Add_Status_List.ContainsKey(0x3c14dd41))
                              {
                                    base.Add_Status_List.imethod_1(0x3c14dd41);
                                    this.Status_Effect(BitConverter.GetBytes(0x3c14dd41), 0, 0);
                                    base.UpdatePowersAndStatus();
                              }
                              else if (base.Add_Status_List.ContainsKey(0x3c14dd42))
                              {
                                    base.Add_Status_List.imethod_1(0x3c14dd42);
                                    this.Status_Effect(BitConverter.GetBytes(0x3c14dd42), 0, 0);
                                    base.UpdatePowersAndStatus();
                              }
                              else if (base.Add_Status_List.ContainsKey(0x3c14dca0))
                              {
                                    base.Add_Status_List.imethod_1(0x3c14dca0);
                                    this.Status_Effect(BitConverter.GetBytes(0x3c14dca0), 0, 0);
                                    base.UpdatePowersAndStatus();
                              }
                              if (base.int_16 == 0)
                              {
                                    base.GameMessage("Safe Mode has been lifted, to be careful walking dead!", 9, "system hint");
                                    return true;
                              }
                              base.int_16 = 0;
                              base.GameMessage("Safe Mode has been lifted, to be careful walking dead!", 9, "system hint");
                              return true;
                        }
                        if ((strArray.Length >= 1) && (strArray[0] == "!safeoff2"))
                        {
                              if (base.Add_Status_List.ContainsKey(0x3c14dd41))
                              {
                                    base.Add_Status_List.imethod_1(0x3c14dd41);
                                    this.Status_Effect(BitConverter.GetBytes(0x3c14dd41), 0, 0);
                                    base.UpdatePowersAndStatus();
                              }
                              else if (base.Add_Status_List.ContainsKey(0x3c14dd42))
                              {
                                    base.Add_Status_List.imethod_1(0x3c14dd42);
                                    this.Status_Effect(BitConverter.GetBytes(0x3c14dd42), 0, 0);
                                    base.UpdatePowersAndStatus();
                              }
                              else if (base.Add_Status_List.ContainsKey(0x3c14dca0))
                              {
                                    base.Add_Status_List.imethod_1(0x3c14dca0);
                                    this.Status_Effect(BitConverter.GetBytes(0x3c14dca0), 0, 0);
                                    base.UpdatePowersAndStatus();
                              }
                              if (base.int_16 == 0)
                              {
                                    base.GameMessage("Safe Mode has been lifted, to be careful walking dead!", 9, "system hint");
                                    return true;
                              }
                              base.int_16 = 0;
                              base.GameMessage("Safe Mode has been lifted, to be careful walking dead!", 9, "system hint");
                              return true;
                        }
                        if ((strArray.Length >= 1) && (strArray[0] == "!safeon2"))
                        {
                              base.GameMessage("Enters protected mode at night to collect gold" + World.An_toan_hinh_thuc_tieu_hao_CASH + ". Please enter the fight !Into safe mode Please quit playing !exit safe mode", 9, "system hint");
                              return true;
                        }
                        if ((strArray.Length >= 1) && (strArray[0] == World.Thanh_ly_ba_lo_menh_lenh))
                        {
                              for (int m = 0; m < 0x24; m++)
                              {
                                    if ((!base.TRANG_BI_LAN_BAO_VAY[m].Item_troi_chat && (base.TRANG_BI_LAN_BAO_VAY[m].GetItem_ID != 0x3b9acb9fL)) && (!base.TRANG_BI_LAN_BAO_VAY[m].GetItem_ID.ToString().Contains("1002040") && !base.TRANG_BI_LAN_BAO_VAY[m].GetItem_ID.ToString().Contains("2002040")))
                                    {
                                          base.TRANG_BI_LAN_BAO_VAY[m].Item_byte = new byte[0x49];
                                    }
                              }
                              base.EquipmentBasket_Wrapped();
                              base.UpdateMoneyAndWeight();
                              base.GameMessage("Non-bound items to clean up is completed, cleaning bind command Use[" + World.Thanh_ly_troi_chat_ba_lo_menh_lenh + "]", 9, "system hint");
                              return true;
                        }
                        if ((strArray.Length >= 1) && (strArray[0] == "!清理火龙刀"))
                        {
                              for (int n = 0; n < 0x24; n++)
                              {
                                    if (base.TRANG_BI_LAN_BAO_VAY[n].method_13().Contains("火龙刀") && (base.TRANG_BI_LAN_BAO_VAY[n].GetItem_ID != 0x3b9acb9fL))
                                    {
                                          base.TRANG_BI_LAN_BAO_VAY[n].Item_byte = new byte[0x49];
                                    }
                              }
                              base.EquipmentBasket_Wrapped();
                              base.UpdateMoneyAndWeight();
                        }
                        if ((strArray.Length >= 1) && (strArray[0] == World.Thanh_ly_troi_chat_ba_lo_menh_lenh))
                        {
                              for (int num8 = 0x24; num8 < 0x42; num8++)
                              {
                                    if (!base.TRANG_BI_LAN_BAO_VAY[num8].Item_troi_chat)
                                    {
                                          base.TRANG_BI_LAN_BAO_VAY[num8].Item_byte = new byte[0x49];
                                    }
                              }
                              base.EquipmentBasket_Wrapped();
                              base.UpdateMoneyAndWeight();
                              base.GameMessage("Non-bound items to clean up is completed, cleaning bind command Use[" + World.Thanh_ly_troi_chat_ba_lo_menh_lenh + "]", 9, "system hint");
                              return true;
                        }
                        if ((strArray.Length >= 1) && (strArray[0] == World.Self_help_command_card))
                        {
                              this.THE_TU_GIUP_DO();
                        }
                        if ((strArray.Length >= 1) && (strArray[0] == World.Cach_tuyen_Treo_thiet_bi_menh_lenh))
                        {
                              this.TREO_CUA_HANG_OFFLINE();
                        }
                        if ((strArray.Length >= 1) && (strArray[0] == World.Gui_di_khieu_chien_thu_tuc_menh_lenh))
                        {
                              int num9 = 0;
                              using (enumerator2 = World.allConnectedChars.Values.GetEnumerator())
                              {
                                    while (enumerator2.MoveNext())
                                    {
                                          if (enumerator2.Current.CharacterCoords_Map == World.Khieu_chien_ban_do_so_hieu)
                                          {
                                                num9++;
                                          }
                                    }
                              }
                              if ((base.CharacterCoords_Map == World.Khieu_chien_ban_do_so_hieu) && (num9 == 1))
                              {
                                    if (base.FLD_RXPIONT >= World.Gui_di_khieu_chien_thu_tuc_menh_lenh_can_CASH)
                                    {
                                          base.method_47((long)World.Gui_di_khieu_chien_thu_tuc_menh_lenh_can_CASH, 0);
                                          base.UPDATE_RXPIONT();
                                          foreach (Players players in World.allConnectedChars.Values)
                                          {
                                                int num10 = new Random(World.smethod_15()).Next(1, 4);
                                                string str = string.Format(World.Khieu_chien_la_to_noi_dung_1, base.UserName);
                                                string str2 = string.Format(World.Khieu_chien_la_to_noi_dung_2, base.UserName);
                                                string str3 = string.Format(World.Khieu_chien_la_to_noi_dung_3, base.UserName);
                                                switch (num10)
                                                {
                                                      case 1:
                                                            players.GameMessage(str ?? "", 0x17, "The challenge full-service");
                                                            break;

                                                      case 2:
                                                            players.GameMessage(str2 ?? "", 0x18, "The challenge full-service");
                                                            break;

                                                      case 3:
                                                            players.GameMessage(str3 ?? "", 0x1a, "The challenge full-service");
                                                            break;

                                                      default:
                                                            players.GameMessage(str3 ?? "", 0x1a, "The challenge full-service");
                                                            break;
                                                }
                                                players.GameMessage("Tham gia khi\x00eau chiến lệnh[" + World.Khieu_chien_tham_gia_menh_lenh + "]", 0x16, "Th\x00e1ch thức");
                                                players.GameMessage("Đặt cược cash[" + World.Khieu_chien_xin_can_thiet_CASH_So_luong + "],nhận gấp đ\x00f4i khi thắng", 0x16, "Th\x00e1ch thức");
                                                players.GameMessage("Th\x00e1ch thức kh\x00f4ng t\x00ednh th\x00e0nh vi\x00ean bản đồ, thuộc t\x00ednh, h\x00e3y cẩn thận", 0x16, "Th\x00e1ch thức");
                                                if (World.Khieu_chien_he_thong_thu_ve_CASH_So_luong != 0)
                                                {
                                                      players.GameMessage("The system will automatically deduct[" + World.Khieu_chien_he_thong_thu_ve_CASH_So_luong + "]Ingots", 0x16, "Rules Challenge");
                                                }
                                          }
                                    }
                                    else
                                    {
                                          base.GameMessage("Send challenge information needs[" + World.Gui_di_khieu_chien_thu_tuc_menh_lenh_can_CASH + "]Ingot can send", 0x16, "Rules Challenge");
                                    }
                              }
                        }
                        if ((strArray.Length >= 1) && (strArray[0] == World.Mot_minh_dau_mo_ra_menh_lenh))
                        {
                              this.KHIEU_CHIEN_HE_THONG();
                        }
                        if ((strArray.Length >= 1) && (strArray[0] == World.Khieu_chien_tham_gia_menh_lenh))
                        {
                              this.KHIEU_CHIEN_THIET_LAP();
                        }
                        if (((strArray.Length >= 1) && (strArray[0] == World.Kiem_tra_thoi_gian_menh_lenh)) && (World.Co_hay_khong_mo_ra_o_tuyen_thoi_gian_khen_thuong != 0))
                        {
                              base.GameMessage("[" + base.TONG_QUAT_TUYEN_THOI_GIAN + "]Minute, the system will send a certain time to reach the mysterious reward", 9, "online time");
                        }
                        if ((strArray.Length < 2) || (strArray[0] != World.Di_dong_menh_lenh))
                        {
                              goto Label_12A2;
                        }
                        if (base.OpenWarehouse)
                        {
                              return true;
                        }
                        flag = false;
                        using (List<TBL_XWWL_MAP>.Enumerator enumerator3 = World.list_15.GetEnumerator())
                        {
                              TBL_XWWL_MAP current;
                              while (enumerator3.MoveNext())
                              {
                                    current = enumerator3.Current;
                                    if ((current.Rxjh_name == strArray[1]) && (TBL_XWWL_MAP.smethod_0(World.Khieu_chien_ban_do_so_hieu) != strArray[1]))
                                    {
                                          goto Label_11A7;
                                    }
                              }
                              goto Label_1279;
                              Label_11A7:
                              this.Move(current.Rxjh_X, current.Rxjh_Y, current.Rxjh_Z, current.Rxjh_Map);
                              flag = true;
                              goto Label_1279;
                        }
                  }
                  base.FLD_TINH_NHAN = "";
                  base.FLD_TINH_NHAN_CAP_DO_YEU = 0;
                  base.class79_0[2, 0x10] = null;
                  base.class79_0[2, 0x11] = null;
                  bool flag3 = false;
                  int num11 = 0;
                  for (int i = 0; i < 0x42; i++)
                  {
                        if (BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[i].VAT_PHAM_ID, 0) == 0x3b9acb9f)
                        {
                              num11 = i;
                              flag3 = true;
                              break;
                        }
                  }
                  if (flag3)
                  {
                        this.LAM_GIAM_DI_VAT_PHAM(num11, 1);
                  }
                  base.GameMessage("Divorce is complete, offline and then on", 9, "[" + World.Ly_hon_menh_lenh + "]");
                  return true;
                  Label_1279:
                  if (!flag)
                  {
                        base.GameMessage("Mobile wrong, map name does not exist", 9, "system hint");
                  }
                  else
                  {
                        this.BAT_GIU_KIEM_TRA_LAI_PHAM_VI_NGUOI_CHOI();
                        this.BAT_GIU_KIEM_TRA_LAI_NPC();
                        this.BAT_GIU_KIEM_TRA_LAI_PHAM_VI_MAT_DAT_VAT_PHAM();
                  }
                  Label_12A2:
                  if ((strArray.Length >= 1) && (strArray[0] == World.Thang_cap_thanh_vien_menh_lenh))
                  {
                        if (World.Co_hay_khong_bat_dau_dung_thanh_vien_thang_cap != 0)
                        {
                              char[] chArray3 = new char[] { ',' };
                              string[] strArray3 = World.Thang_cap_thanh_vien_can_Thuoc_tinh.Split(chArray3);
                              if ((base.FLD_BasicCharAttack >= long.Parse(strArray3[0])) && (base.FLD_BasicCharDefense >= long.Parse(strArray3[1])))
                              {
                                    if (base.Thanh_vien_thu_bac < World.Nhan_vat_level_cao_nhat)
                                    {
                                          if ((base.Thanh_vien_thu_bac + 1L) > World.Nhan_vat_level_cao_nhat)
                                          {
                                                base.Thanh_vien_thu_bac = World.Nhan_vat_level_cao_nhat;
                                          }
                                          else
                                          {
                                                base.Thanh_vien_thu_bac += 1L;
                                          }
                                          base.Khen_thuong_them_vao_cong_kich = 0L;
                                          base.Khen_thuong_them_vao_phong_ngu = 0L;
                                          base.LUU_NHAN_VAT_SO_LIEU();
                                          base.GameMessage("Current membership level is [" + base.Thanh_vien_thu_bac + "]", 10, "Membership Upgrade Success");
                                    }
                              }
                              else
                              {
                                    base.GameMessage("Attacking force must be equal" + long.Parse(strArray3[0]), 10, "Upgrade Requirements");
                                    base.GameMessage("Defense force must be equal" + long.Parse(strArray3[1]), 10, "Upgrade Requirements");
                              }
                        }
                        else
                        {
                              base.GameMessage("No open this feature", 10, "Upgrade prompt");
                        }
                  }
                  if ((strArray.Length >= 1) && (strArray[0] == World.Kiem_tra_tin_tuc_menh_lenh))
                  {
                        base.GameMessage(string.Concat(new object[] { "←Attack→", base.FLD_BasicCharAttack, "←Defense→", base.FLD_BasicCharDefense, "←" }), 10, "Own state");
                        base.GameMessage(string.Concat(new object[] { "life", base.NHAN_VAT_LON_NHAT_HP, "Neigong", base.NHAN_VAT_LON_NHAT_MP, " avoid", base.FLD_NHAN_VAT_CO_BAN_NE_TRANH, " Hit", base.FLD_NHAN_VAT_CO_BAN_TRUNG_MUC_TIEU, " Good and Evil", base.NHAN_VAT_THIEN_AC }), 10, "Own state");
                        if (World.Chuyen_sinh_khen_thuong_loai_hinh != 7)
                        {
                              base.GameMessage(string.Concat(new object[] { "[Reincarnation times]=", base.Chuyen_sinh_so_lan, "=[Wu Xun stage]=", base.NHAN_VAT_VO_HUAN_GIAI_DOAN, "=" }), 10, "Own state");
                        }
                        if (World.Co_hay_khong_bat_dau_dung_thanh_vien_thang_cap != 0)
                        {
                              base.GameMessage("[VIP grade]=" + base.Thanh_vien_thu_bac + "=", 10, "Own state");
                        }
                        base.GameMessage("[Number ingot]=" + base.FLD_RXPIONT + "Ingots=", 10, "Own state");
                        if (World.Co_hay_khong_mo_ra_o_tuyen_thoi_gian_khen_thuong != 0)
                        {
                              base.GameMessage("[online time]=" + base.TONG_QUAT_TUYEN_THOI_GIAN + "minute=", 10, "Own state");
                        }
                        base.GameMessage("[Registration number]=" + base.DANH_DAU_SO_LAN + "Secondary=", 10, "Own state");
                        base.GameMessage("Martial ★ ★ record: homicide=" + base.GIET_NGUOI_SO_LAN.ToString() + "=Times, killed=" + base.BI_GIET_SO_LAN.ToString() + "=Secondary", 10, "Own state");
                  }
                  if ((strArray.Length >= 2) && (strArray[0] == "!mua"))
                  {
                        int intmaso = -1;
                        try
                        {
                              intmaso = int.Parse(strArray[1]);
                        }
                        catch
                        {
                        }
                        TBL_XWWL_ITEM tbl_xwwl_item = new TBL_XWWL_ITEM();
                        if (intmaso == -1)
                        {
                              tbl_xwwl_item = TBL_XWWL_ITEM.BUY_COMMAND(strArray[1]);
                        }
                        else
                        {
                              tbl_xwwl_item = TBL_XWWL_ITEM.BUY_COMMAND2(intmaso);
                        }
                        if (tbl_xwwl_item != null)
                        {
                              int num14 = 1;
                              int num15 = -1;
                              if (strArray.Length >= 3)
                              {
                                    num14 = int.Parse(strArray[2]);
                              }
                              if (num14 < 1)
                              {
                                    num14 = 1;
                              }
                              if (num14 > 0x24)
                              {
                                    base.GameMessage("So luong mua khong duoc lon 36 !!", 10, "Msg");
                                    return true;
                              }
                              if (base.NHAN_TUI_TRONG_SO_LUONG() < num14)
                              {
                                    base.GameMessage("Tui do khong du cho trong", 10, "Shop1");
                                    return true;
                              }
                              if (base.FLD_RXPIONT < (tbl_xwwl_item.GIA_MUA * num14))
                              {
                                    base.GameMessage("Khong du @cash de thuc hien giao dich", 10, "Shop");
                                    return true;
                              }
                              for (int num16 = 1; num16 <= num14; num16++)
                              {
                                    num15 = base.DUOC_KIEN_HANG_RONG(this);
                                    if (num15 == -1)
                                    {
                                          break;
                                    }
                                    this.CHE_TAO_VAT_PHAM(num15, BitConverter.GetBytes(tbl_xwwl_item.FLD_PID));
                              }
                              base.KIEM_SOAT_CASH_SO_LIEU(tbl_xwwl_item.GIA_MUA * num14, 0);
                              base.GameMessage(string.Concat(new object[] { "Ban vua su dung ", tbl_xwwl_item.GIA_MUA * num14, " @cash, con lai ", base.FLD_RXPIONT, "@cash!!" }), 10, "Shop");
                              base.UPDATE_RXPIONT();
                              RxjhClass.INSERT_BACH_BAO_GHI_CHEP(base.Userid, base.UserName, (double)tbl_xwwl_item.FLD_PID, tbl_xwwl_item.MA_SO_MUA_ITME, num14, tbl_xwwl_item.GIA_MUA * num14);
                        }
                  }
                  if (strArray[0] == "!tc1")
                  {
                        this.THANG_CHUC1();
                  }
                  if (strArray[0] == "!tc2tp")
                  {
                        this.THANG_CHUC2_TA_PHAI();
                  }
                  if (strArray[0] == "!tc2cp")
                  {
                        this.THANG_CHUC2_CHINH_PHAI();
                  }
                  if (strArray[0] == "!tc3")
                  {
                        this.THANG_CHUC3();
                  }
                  if (strArray[0] == "!tc4")
                  {
                        this.THANG_CHUC4();
                  }
                  if (strArray[0] == "!tc5")
                  {
                        this.THANG_CHUC5();
                  }
                  if (strArray[0] == "!tc6")
                  {
                        this.THANG_CHUC6();
                  }
                  if (strArray[0] == "!tc7")
                  {
                        this.THANG_CHUC7();
                  }
                  if (strArray[0] == "!tc8")
                  {
                        this.THANG_CHUC8();
                  }
                  if (strArray[0] == "!tc9")
                  {
                        this.THANG_CHUC9();
                  }
                  if ((strArray.Length >= 1) && (strArray[0] == World.Chuyen_sinh_menh_lenh))
                  {
                        this.HE_THONG_CHUYEN_SINH();
                  }
                  if ((strArray.Length >= 1) && (strArray[0] == World.Cau_hon_menh_lenh))
                  {
                        this.Emotion(200);
                  }
                  if (((strArray.Length >= 2) && (strArray[0] == World.Player_lan_theo_menh_lenh)) && (World.Truy_sat_he_thong_co_hay_khong_mo_ra != 0))
                  {
                        Players players2 = World.smethod_2(strArray[1]);
                        if (players2 != null)
                        {
                              this.LAN_THEO_NGUOI_CHOI(players2);
                        }
                        else
                        {
                              base.GameMessage("The current players are not online, or the name is incorrect please re-enter!", 10, "GPS system");
                        }
                  }
                  if ((strArray.Length >= 1) && (strArray[0] == "!check"))
                  {
                        base.GameMessage("Ban con lai " + base.FLD_RXPIONT + " @cash", 10, "Msg");
                  }
                  if ((strArray.Length >= 1) && (strArray[0] == World.Phu_hon_menh_lenh))
                  {
                        try
                        {
                              TBL_XWWL_ITEM tbl_xwwl_item2;
                              if (BitConverter.ToInt64(base.TRANG_BI_LAN_BAO_VAY[0].Item_toan_bo_ID, 0) == 0)
                              {
                                    base.GameMessage("Please be attached to the soul of the items into the first cell", 9, "system hint");
                                    return true;
                              }
                              if (!base.TRANG_BI_LAN_BAO_VAY[0].Item_troi_chat)
                              {
                                    base.GameMessage("Only items bindings can only use this function attached to the soul", 9, "system hint");
                                    return true;
                              }
                              if (BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[1].VAT_PHAM_ID, 0) != 0x3b9acb6d)
                              {
                                    base.GameMessage("Please set the primary soul stone into the second grid", 9, "system hint");
                                    return true;
                              }
                              if (base.TRANG_BI_LAN_BAO_VAY[0].FLD_FJ_thuc_tinh >= World.Thu_cong_phu_hon_giai_doan_cao_nhat)
                              {
                                    base.GameMessage("Items up attached to the soul" + World.Thu_cong_phu_hon_giai_doan_cao_nhat + "Times, can no longer attached to the soul", 9, "system hint");
                                    return true;
                              }
                              if (!World.Itme.TryGetValue(BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[0].VAT_PHAM_ID, 0), out tbl_xwwl_item2))
                              {
                                    return true;
                              }
                              if ((tbl_xwwl_item2.FLD_RESIDE2 != 1) && (tbl_xwwl_item2.FLD_RESIDE2 != 4))
                              {
                                    base.GameMessage("Only the clothes can be attached to the soul of weapons, other items can not be attached to the soul", 9, "system hint");
                                    return true;
                              }
                              double num17 = new Random().Next(0, 150);
                              if (base.FLD_VIP == 1)
                              {
                                    num17 += 100.0 * World.VIP_Hop_thanh_xac_xuat;
                              }
                              if (World.Phu_hon_hop_thanh_xac_xuat_tang_cuong != 0.0)
                              {
                                    num17 += 100.0 * World.Phu_hon_hop_thanh_xac_xuat_tang_cuong;
                              }
                              this.LAM_GIAM_DI_VAT_PHAM(1, 1);
                              double num18 = base.TRANG_BI_LAN_BAO_VAY[0].FLD_FJ_thuc_tinh * 20;
                              if (num17 >= num18)
                              {
                                    byte[] buffer = base.TRANG_BI_LAN_BAO_VAY[0].Item_toan_bo_ID;
                                    byte[] buffer2 = base.TRANG_BI_LAN_BAO_VAY[0].VAT_PHAM_ID;
                                    byte[] buffer3 = base.TRANG_BI_LAN_BAO_VAY[0].VAT_PHAM_SO_LUONG;
                                    byte[] dst = base.TRANG_BI_LAN_BAO_VAY[0].Item_thuoc_tinh;
                                    int num19 = base.TRANG_BI_LAN_BAO_VAY[0].FLD_FJ_thuc_tinh + 1;
                                    if (num19 >= World.Thu_cong_phu_hon_giai_doan_cao_nhat)
                                    {
                                          num19 = World.Thu_cong_phu_hon_giai_doan_cao_nhat;
                                    }
                                    Buffer.BlockCopy(BitConverter.GetBytes(num19), 0, dst, 0x2e, 4);
                                    this.LAM_GIAM_DI_VAT_PHAM(0, 1);
                                    this.TANG_CUONG_VAT_PHAM_1(buffer, buffer2, 0, buffer3, dst, true);
                                    base.GameMessage("Congratulations, successfully attached to the soul", 9, "system hint");
                              }
                              else
                              {
                                    base.GameMessage("Attached to the soul failure", 9, "system hint");
                              }
                        }
                        catch (Exception exception2)
                        {
                              Form1.WriteLine(1, "手工附魂系统出错" + exception2.Message);
                        }
                  }
                  if ((strArray.Length >= 2) && (strArray[0] == "!getver"))
                  {
                        base.GameMessage(Assembly.GetExecutingAssembly().GetName().Version.ToString(), 10, "system hint");
                  }
                  if (base.int_4 == 6)
                  {
                        if ((strArray.Length >= 2) && (strArray[0] == World.Issued_notice))
                        {
                              try
                              {
                                    using (enumerator2 = World.allConnectedChars.Values.GetEnumerator())
                                    {
                                          while (enumerator2.MoveNext())
                                          {
                                                enumerator2.Current.GameMessage(strArray[1], 10, base.UserName);
                                          }
                                    }
                              }
                              catch
                              {
                              }
                              return true;
                        }
                  }
                  else if (base.int_4 == 8)
                  {
                        if ((strArray.Length >= 2) && (strArray[0] == World.Issued_notice))
                        {
                              try
                              {
                                    using (enumerator2 = World.allConnectedChars.Values.GetEnumerator())
                                    {
                                          while (enumerator2.MoveNext())
                                          {
                                                enumerator2.Current.GameMessage(strArray[1], 10, "system hint");
                                          }
                                    }
                              }
                              catch
                              {
                              }
                        }
                        if (((strArray.Length >= 2) && (strArray[0] == World.Mobile_Carrier)) && (strArray.Length >= 5))
                        {
                              this.Move(float.Parse(strArray[2]), float.Parse(strArray[3]), float.Parse(strArray[4]), int.Parse(strArray[1]));
                        }
                        if ((strArray.Length >= 2) && (strArray[0] == World.Kicking))
                        {
                              Players players3 = World.smethod_2(strArray[1]);
                              if (players3.Client != null)
                              {
                                    players3.Client.Dispose();
                              }
                        }
                        if (((strArray.Length >= 2) && (strArray[0] == World.Title)) && (World.smethod_2(strArray[1]) != null))
                        {
                              Players players4 = World.smethod_2(strArray[1]);
                              this.KHOA_TAI_KHOAN(players4, "游戏管理员停封帐号");
                        }
                        if ((strArray.Length >= 2) && (strArray[0] == "!guai"))
                        {
                              this.CAP_NHAT_NPC_SO_LIEU_CC(this.int_117, int.Parse(strArray[1]), this);
                              base.GameMessage(this.int_117.ToString(), 10, "system hint");
                              this.int_117++;
                        }
                        if ((strArray.Length >= 2) && (strArray[0] == "!serguai"))
                        {
                              World.smethod_22(int.Parse(strArray[1]), base.CharacterCoords_X, base.CharacterCoords_Y, base.CharacterCoords_Map);
                        }
                        if ((strArray.Length >= 2) && (strArray[0] == World.Brush_strange))
                        {
                              if (strArray.Length >= 3)
                              {
                                    int num20 = 1;
                                    try
                                    {
                                          num20 = int.Parse(strArray[2]);
                                    }
                                    catch
                                    {
                                    }
                                    Random random = new Random();
                                    for (int num21 = 0; num21 < num20; num21++)
                                    {
                                          int num22 = random.Next(0, 2);
                                          double num23 = random.NextDouble() * 100.0;
                                          double num24 = random.NextDouble() * 100.0;
                                          if (num22 == 0)
                                          {
                                                World.smethod_20(int.Parse(strArray[1]), base.CharacterCoords_X + ((float)num23), base.CharacterCoords_Y + ((float)num24), base.CharacterCoords_Map);
                                          }
                                          else
                                          {
                                                World.smethod_20(int.Parse(strArray[1]), base.CharacterCoords_X - ((float)num23), base.CharacterCoords_Y - ((float)num24), base.CharacterCoords_Map);
                                          }
                                    }
                              }
                              else
                              {
                                    World.smethod_20(int.Parse(strArray[1]), base.CharacterCoords_X, base.CharacterCoords_Y, base.CharacterCoords_Map);
                              }
                        }
                        if ((strArray.Length >= 2) && (strArray[0] == "!copyy"))
                        {
                              int num25 = -1;
                              try
                              {
                                    num25 = int.Parse(strArray[1]);
                              }
                              catch
                              {
                              }
                              this.CHE_TAO_VAT_PHAM(0, BitConverter.GetBytes(num25));
                        }
                        if ((strArray.Length >= 2) && (strArray[0] == World.Stealth))
                        {
                              if (base.int_11 == 0)
                              {
                                    base.int_11 = 1;
                                    base.LAN_DAU_DOI_THOAI_DA_TRANG_BI_VAT_PHAM();
                                    this.DI_CHUYEN_KHOANG_CACH_TRUOC_BAN_DO(base.CharacterCoords_Map);
                                    this.BAT_GIU_KIEM_TRA_LAI_PHAM_VI_NGUOI_CHOI();
                                    base.Update_Data_Boardcast();
                                    base.GameMessage("Enter stealth mode invincible", 10, "system hint");
                              }
                              else
                              {
                                    base.int_11 = 0;
                                    base.LAN_DAU_DOI_THOAI_DA_TRANG_BI_VAT_PHAM();
                                    this.DI_CHUYEN_KHOANG_CACH_TRUOC_BAN_DO(base.CharacterCoords_Map);
                                    this.BAT_GIU_KIEM_TRA_LAI_PHAM_VI_NGUOI_CHOI();
                                    base.Update_Data_Boardcast();
                                    base.GameMessage("Exit incognito mode invincible", 10, "system hint");
                              }
                        }
                        if ((strArray.Length >= 2) && (strArray[0] == World.Backpack_delete_items))
                        {
                              int num26 = -1;
                              try
                              {
                                    num26 = int.Parse(strArray[1]);
                              }
                              catch
                              {
                              }
                              this.CHE_TAO_GIAM_DI_ITEM(num26, 1);
                        }
                        if ((strArray.Length >= 2) && (strArray[0] == World.Brush_experience))
                        {
                              int num27 = 0;
                              try
                              {
                                    num27 = int.Parse(strArray[1]);
                              }
                              catch
                              {
                              }
                              base.Player_ExpErience += num27;
                              base.UpdateExperience();
                        }
                        if ((strArray.Length >= 2) && (strArray[0] == "!addlevel"))
                        {
                              int num28 = 0;
                              try
                              {
                                    num28 = int.Parse(strArray[1]);
                              }
                              catch
                              {
                              }
                              base.NHAN_VAT_KINH_NGHIEM = 0L;
                              base.Player_FLD_LEVEL = num28;
                              base.BasicCharacterData();
                              this.UpdateHP_MP_SP();
                              base.UpdatePowersAndStatus();
                              base.UpdateExperience();
                              base.UpdateMoneyAndWeight();
                              base.Update_Qigong();
                        }
                        if ((strArray.Length >= 2) && (strArray[0] == World.Brush_Wu_Xun))
                        {
                              int num29 = 0;
                              try
                              {
                                    num29 = int.Parse(strArray[1]);
                              }
                              catch
                              {
                              }
                              base.Player_WuXun = num29;
                              base.UpdatePowersAndStatus();
                        }
                        if ((strArray.Length >= 2) && (strArray[0] == World.Shuaqian))
                        {
                              int num30 = 0;
                              try
                              {
                                    num30 = int.Parse(strArray[1]);
                              }
                              catch
                              {
                              }
                              base.Player_Money += num30;
                              base.UpdateMoneyAndWeight();
                        }
                        if ((strArray.Length >= 5) && (strArray[0] == "!hcts"))
                        {
                              try
                              {
                                    this.HOP_THANH_NHAC_NHO(int.Parse(strArray[1]), int.Parse(strArray[2]), int.Parse(strArray[3]), base.TRANG_BI_LAN_BAO_VAY[int.Parse(strArray[4])]);
                                    int.Parse(strArray[1]);
                              }
                              catch
                              {
                              }
                        }
                        if ((strArray.Length >= 2) && (strArray[0] == World.Bat_dau_the_luc_chien))
                        {
                              if (World.eve == null)
                              {
                                    World.eve = new EventClass();
                                    base.GameMessage("The forces of war began", 10, "system hint");
                              }
                              else
                              {
                                    World.eve.Dispose();
                                    base.GameMessage("Stop fighting forces", 10, "system hint");
                              }
                        }
                        if ((strArray.Length >= 2) && (strArray[0] == World.Track))
                        {
                              Players players5 = World.smethod_2(strArray[1]);
                              this.Move(players5.CharacterCoords_X, players5.CharacterCoords_Y, players5.CharacterCoords_Z, players5.CharacterCoords_Map);
                        }
                        if ((strArray.Length >= 2) && (strArray[0] == "!bring"))
                        {
                              try
                              {
                                    foreach (Players players6 in World.allConnectedChars.Values)
                                    {
                                          if (players6.UserName.ToLower() == strArray[1].ToLower())
                                          {
                                                players6.Move(base.CharacterCoords_X, base.CharacterCoords_Y, base.CharacterCoords_Z, base.CharacterCoords_Map);
                                          }
                                    }
                              }
                              catch
                              {
                              }
                        }
                        if ((strArray.Length >= 2) && (strArray[0] == World.Additional_state))
                        {
                              this.SET_THEM_VAO_TRANG_THAI_VAT_PHAM(int.Parse(strArray[1]), int.Parse(strArray[2]), int.Parse(strArray[3]), int.Parse(strArray[4]));
                              base.TINH_TOAN_NHAN_VAT_TRANG_BI_SO_LIEU();
                              base.UpdatePowersAndStatus();
                              this.UpdateHP_MP_SP();
                        }
                        if ((strArray.Length >= 2) && (strArray[0] == "!msg"))
                        {
                              base.Decomposite_Tip(int.Parse(strArray[1]));
                        }
                        if ((strArray.Length >= 2) && (strArray[0] == World.Copy_Item))
                        {
                              int num31 = -1;
                              try
                              {
                                    num31 = int.Parse(strArray[1]);
                              }
                              catch
                              {
                              }
                              TBL_XWWL_ITEM tbl_xwwl_item3 = new TBL_XWWL_ITEM();
                              if (num31 == -1)
                              {
                                    tbl_xwwl_item3 = TBL_XWWL_ITEM.smethod_0(strArray[1]);
                              }
                              else
                              {
                                    tbl_xwwl_item3 = TBL_XWWL_ITEM.smethod_3(num31);
                              }
                              if (tbl_xwwl_item3 != null)
                              {
                                    int num32 = 1;
                                    int num33 = -1;
                                    if (strArray.Length >= 3)
                                    {
                                          num32 = int.Parse(strArray[2]);
                                    }
                                    if (num32 < 1)
                                    {
                                          num32 = 1;
                                    }
                                    for (int num34 = 1; num34 <= num32; num34++)
                                    {
                                          num33 = base.DUOC_KIEN_HANG_RONG(this);
                                          if (num33 == -1)
                                          {
                                                break;
                                          }
                                          this.CHE_TAO_VAT_PHAM(num33, BitConverter.GetBytes(tbl_xwwl_item3.FLD_PID));
                                    }
                                    base.GameMessage(string.Concat(new object[] { strArray[1], " Quantity ", num32, "Months carry out" }), 10, "Article of manufacture");
                              }
                        }
                  }
                  return true;
            }
            #endregion

            public void Pet_Magicattack(int int_128, int int_129)
            {
                  TBL_XWWL_NPC tbl_xwwl_npc;
                  if (World.jlMsg == 1)
                  {
                        Form1.WriteLine(0, "Players_魔法攻击灵兽");
                  }
                  if (((int_129 >= 0x2710) && MapClass.GetnpcTemplate(base.CharacterCoords_Map).TryGetValue(int_129, out tbl_xwwl_npc)) && (tbl_xwwl_npc.IsNpc != 1))
                  {
                        TBL_XWWL_KONGFU tbl_xwwl_kongfu;
                        int num = 0;
                        if (World.TBL_KONGFU.TryGetValue(int_128, out tbl_xwwl_kongfu))
                        {
                              double num2 = base.FLD_BasicCharAttack / ((long)World.Sung_vat_Cong_kich_suc_manh_boi_so);
                              this.method_427(this, int_129, int_128, (int)num2, num);
                              base.CONG_KICH_DANH_SACH.Clear();
                              using (new Lock(base.CONG_KICH_DANH_SACH, "CONG_KICH_DANH_SACH"))
                              {
                                    base.CONG_KICH_DANH_SACH.Add(new AttackClass(int_129, int_128, (long)num2, num));
                              }
                        }
                  }
            }

            public void PetActionPackage(byte[] byte_5, int int_128)
            {
                  byte[] dst = new byte[2];
                  Buffer.BlockCopy(byte_5, 11, dst, 0, 1);
                  int num = BitConverter.ToInt16(dst, 0);
                  this.Method_SpPetAction(num);
            }

            public void PHAO_HOA()
            {
                  byte[] dst = Converter.hexStringToByte("AA551300000A007F000400CD99053C000000000000000055AA");
                  Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, dst, 5, 2);
                  if (base.Client != null)
                  {
                        base.Client.Send(dst, dst.Length);
                  }
                  this.vmethod_0(dst, dst.Length);
            }

            public void PHAT_DONG_DI_DONG_TOA_DO()
            {
                  if (World.jlMsg == 1)
                  {
                        Form1.WriteLine(0, "Players_触发移动坐标");
                  }
                  foreach (TBL_XWWL_VOME tbl_xwwl_vome in World.list_13)
                  {
                        if (tbl_xwwl_vome.MAP == base.CharacterCoords_Map)
                        {
                              float num = tbl_xwwl_vome.Y - base.CharacterCoords_Y;
                              float single1 = tbl_xwwl_vome.X - base.CharacterCoords_X;
                              if (((int)Math.Sqrt((double)((single1 * single1) + (num * num)))) <= 20f)
                              {
                                    this.Move(tbl_xwwl_vome.ToX, tbl_xwwl_vome.ToY, tbl_xwwl_vome.ToZ, tbl_xwwl_vome.ToMAP);
                              }
                        }
                  }
            }

            public bool PHAT_DONG_KHU_AN_TOAN_TOA_DO(Players class15_0)
            {
                  if (class15_0.UserName == base.UserName)
                  {
                        return false;
                  }
                  if (World.Khu_an_toan_mo_ra == 1)
                  {
                        using (List<TBL_XWWL_MAP>.Enumerator enumerator = World.list_14.GetEnumerator())
                        {
                              while (enumerator.MoveNext())
                              {
                                    TBL_XWWL_MAP current = enumerator.Current;
                                    if (current.Rxjh_Map == class15_0.CharacterCoords_Map)
                                    {
                                          float num = current.Rxjh_Y - class15_0.CharacterCoords_Y;
                                          float single1 = current.Rxjh_X - class15_0.CharacterCoords_X;
                                          if (((int)Math.Sqrt((double)((single1 * single1) + (num * num)))) <= 80f)
                                          {
                                                goto Label_007E;
                                          }
                                    }
                              }
                              goto Label_00A2;
                              Label_007E:
                              base.GameMessage("Safety zone is prohibited PK! ! ! !", 9, "system hint");
                              return true;
                        }
                  }
                  Label_00A2:
                  return false;
            }

            public bool PHAT_DONG_KHU_AN_TOAN_TOA_DO_2(Players class15_0)
            {
                  if (World.Khu_an_toan_mo_ra == 1)
                  {
                        using (List<TBL_XWWL_MAP>.Enumerator enumerator = World.list_14.GetEnumerator())
                        {
                              while (enumerator.MoveNext())
                              {
                                    TBL_XWWL_MAP current = enumerator.Current;
                                    if (current.Rxjh_Map == class15_0.CharacterCoords_Map)
                                    {
                                          float num = current.Rxjh_Y - class15_0.CharacterCoords_Y;
                                          float single1 = current.Rxjh_X - class15_0.CharacterCoords_X;
                                          if (((int)Math.Sqrt((double)((single1 * single1) + (num * num)))) <= 80f)
                                          {
                                                goto Label_0069;
                                          }
                                    }
                              }
                              goto Label_008D;
                              Label_0069:
                              base.GameMessage("Safety zone is prohibited PK! ! ! !", 9, "system hint");
                              return true;
                        }
                  }
                  Label_008D:
                  return false;
            }

            public void PHAT_DONG_TU_DONG_CONG_KICH()
            {
                  if (World.jlMsg == 1)
                  {
                        Form1.WriteLine(0, "Players_触发自动攻击");
                  }
                  foreach (TBL_XWWL_NPC tbl_xwwl_npc in MapClass.GetnpcTemplate(base.CharacterCoords_Map).Values)
                  {
                        if ((((tbl_xwwl_npc.IsNpc == 0) && (tbl_xwwl_npc.FLD_AUTO == 1)) && ((tbl_xwwl_npc.Level >= (base.Player_FLD_LEVEL - 20)) && !tbl_xwwl_npc.NPC_TU_VONG)) && (!tbl_xwwl_npc.timer_1.Enabled && this.TRA_TIM_PHAM_VI_NPC(60, tbl_xwwl_npc)))
                        {
                              tbl_xwwl_npc.method_3(this);
                              tbl_xwwl_npc.timer_0.Enabled = false;
                              tbl_xwwl_npc.timer_1.Enabled = true;
                        }
                  }
            }

            public void PHEP_THUAT_SU_DUNG(double double_206)
            {
                  if (World.jlMsg == 1)
                  {
                        Form1.WriteLine(0, "Players_魔法使用");
                  }
                  try
                  {
                        switch (base.Player_Job)
                        {
                              case 5:
                                    {
                                          double num2 = BitConverter.ToInt16(base.Qigong[1].气功_byte, 0) * 0.01;
                                          double_206 -= double_206 * num2;
                                          base.NHAN_VAT_MP -= (int)double_206;
                                          break;
                                    }
                              case 7:
                                    double_206 -= (int)(double_206 * (base.Cam_su_Tam_khuc_hoa_minh * 0.015));
                                    base.NHAN_VAT_MP -= (int)double_206;
                                    break;

                              default:
                                    base.NHAN_VAT_MP -= (int)double_206;
                                    break;
                        }
                        this.UpdateHP_MP_SP();
                  }
                  catch (Exception exception)
                  {
                        Form1.WriteLine(1, string.Concat(new object[] { "魔法使用", base.UserSessionID, "|", this.ToString(), " ", exception.Message }));
                  }
            }

            public void PhysicalAttack(int int_128, int int_129)
            {
                  if (World.jlMsg == 1)
                  {
                        Form1.WriteLine(0, "Players_物理攻击");
                  }
                  try
                  {
                        Random random = new Random(World.smethod_15());
                        if (int_129 != base.UserSessionID)
                        {
                              int num23;
                              if (base.Player_Job == 7)
                              {
                                    base.Cam_su_Tam_hoa_huyen_phat_dong_xac_suat = 0.0;
                              }
                              if (int_129 >= 0x2710)
                              {
                                    TBL_XWWL_NPC tbl_xwwl_npc;
                                    if ((MapClass.GetnpcTemplate(base.CharacterCoords_Map).TryGetValue(int_129, out tbl_xwwl_npc) && (base.PlayerShop == null)) && (tbl_xwwl_npc.IsNpc != 1))
                                    {
                                          if (World.Danh_quai_khoang_cach_khong_che_co_hay_khong_mo_ra != 0)
                                          {
                                                if (((base.Player_Job != 4) && (base.Player_Job != 5)) && (base.Player_Job != 7))
                                                {
                                                      if (Math.Sqrt(Math.Pow((double)(base.CharacterCoords_X - tbl_xwwl_npc.Rxjh_X), 2.0) + Math.Pow((double)(base.CharacterCoords_Y - tbl_xwwl_npc.Rxjh_Y), 2.0)) >= World.Quai_vat_gan_nguoi_nghe_nghiep_Cong_kich_khoang_cach)
                                                      {
                                                            return;
                                                      }
                                                }
                                                else if (Math.Sqrt(Math.Pow((double)(base.CharacterCoords_X - tbl_xwwl_npc.Rxjh_X), 2.0) + Math.Pow((double)(base.CharacterCoords_Y - tbl_xwwl_npc.Rxjh_Y), 2.0)) >= World.Quai_vat_trinh_dien_nghe_nghiep_Cong_kich_khoang_cach)
                                                {
                                                      return;
                                                }
                                          }
                                          if (tbl_xwwl_npc.Rxjh_HP <= 0L)
                                          {
                                                tbl_xwwl_npc.method_17();
                                          }
                                          else
                                          {
                                                if (base.CharacterCoords_Map == 0x321)
                                                {
                                                      if ((tbl_xwwl_npc.FLD_PID == 0x3c84) || (tbl_xwwl_npc.FLD_PID == 0x3c83))
                                                      {
                                                            if (base.Player_Zx == 1)
                                                            {
                                                                  return;
                                                            }
                                                      }
                                                      else if (((tbl_xwwl_npc.FLD_PID == 0x3c86) || (tbl_xwwl_npc.FLD_PID == 0x3c85)) && (base.Player_Zx == 2))
                                                      {
                                                            return;
                                                      }
                                                }
                                                double num = base.FLD_BasicCharAttack;
                                                double num2 = tbl_xwwl_npc.FLD_DF;
                                                if (((base.Player_Job == 1) || (base.Player_Job == 8)) && ((base.Pha_giap_ty_le != 0.0) && (random.Next(0, 0x65) < base.Pha_giap_ty_le)))
                                                {
                                                      num2 *= 0.3;
                                                      base.Show_Char(int_129, 0x10);
                                                }
                                                if (base.Player_Job == 2)
                                                {
                                                      if ((base.Kiem_khach_Vo_kien_bat_toi != 0.0) && ((random.NextDouble() * 100.0) < base.Kiem_khach_Vo_kien_bat_toi))
                                                      {
                                                            base.Show_Char(int_129, 120);
                                                            num2 *= 0.5;
                                                      }
                                                      if ((base.Kiem_khach_thang_thien_1_khi_cong_Thua_thang_truy_kich != 0.0) && (random.Next(0, 120) < base.Kiem_khach_thang_thien_1_khi_cong_Thua_thang_truy_kich))
                                                      {
                                                            base.Show_Char(int_129, 120);
                                                            num2 -= (num2 * base.Kiem_khach_thang_thien_1_khi_cong_Thua_thang_truy_kich) * 0.01;
                                                      }
                                                }
                                                if (((base.Player_Job == 1) || (base.Player_Job == 8)) && (base.Toi_thieu_cong_kich != 0.0))
                                                {
                                                      num += num * base.Toi_thieu_cong_kich;
                                                }
                                                if (((base.Player_Job == 2) || (base.Player_Job == 9)) && (base.Toi_thieu_cong_kich != 0.0))
                                                {
                                                      num += num * base.Toi_thieu_cong_kich;
                                                }
                                                if ((base.Player_Job == 4) && (base.Cung_thu_Ngung_than_tu_khi != 0.0))
                                                {
                                                      num += num * base.Cung_thu_Ngung_than_tu_khi;
                                                }
                                                if ((base.Player_Job == 6) && (base.Toi_thieu_cong_kich != 0.0))
                                                {
                                                      num += num * base.Toi_thieu_cong_kich;
                                                }
                                                double num3 = ((num - (num2 * 0.7)) * 1.5) + (base.FLD_NHAN_VAT_CO_BAN_TRUNG_MUC_TIEU / 4);
                                                int num4 = 0x7e;
                                                int num5 = random.Next(0, 9);
                                                if (BitConverter.ToInt32(base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].VAT_PHAM_ID, 0) != 0)
                                                {
                                                      TO_DOI_CLASS to_doi_class;
                                                      if ((base.Dao_khach_Am_anh_tuyet_sat != 0.0) && (random.Next(0, 0x8d) < base.Dao_khach_Am_anh_tuyet_sat))
                                                      {
                                                            base.Show_Char(int_129, 0x12);
                                                            num3 *= 1.0 + base.Toi_thieu_cong_kich;
                                                      }
                                                      if ((base.Han_bao_quan_Hanh_phong_long_vu != 0.0) && (random.Next(0, 0x8d) < base.Han_bao_quan_Hanh_phong_long_vu))
                                                      {
                                                            base.Show_Char(int_129, 600);
                                                            num3 *= 1.25;
                                                      }
                                                      if ((base.Dao_khach_thang_thien_2_khi_cong_Cung_duong_mat_lo != 0.0) && (random.Next(0, 120) <= base.Dao_khach_thang_thien_2_khi_cong_Cung_duong_mat_lo))
                                                      {
                                                            base.Show_Char(int_129, 0x137);
                                                            num3 *= 2.0;
                                                      }
                                                      if ((base.Huyen_ti_chan_mach != 0.0) && (random.Next(0, 100) <= base.Huyen_ti_chan_mach))
                                                      {
                                                            base.Show_Char(int_129, 0x18a);
                                                            if (base.Add_Status_List.ContainsKey(0xdc17d))
                                                            {
                                                                  base.Add_Status_List[0xdc17d].THOI_GIAN_KET_THUC_SU_KIEN();
                                                            }
                                                            double num6 = 3000.0;
                                                            Additional_Sate_Class class2 = new Additional_Sate_Class(this, (int)num6, 0xdc17d, 0);
                                                            base.Add_Status_List.Add(0xdc17d, class2);
                                                            this.Status_Effect(BitConverter.GetBytes(0xdc17d), 1, (int)num6);
                                                            base.addFLD_DEF_Percentage(0.1M);
                                                            base.UpdatePowersAndStatus();
                                                      }
                                                      if ((base.Vong_mai_thiem_tan != 0.0) && (random.Next(0, 100) <= base.Vong_mai_thiem_tan))
                                                      {
                                                            base.Show_Char(int_129, 0x162);
                                                            if (base.Add_Status_List.ContainsKey(0x7a7c5))
                                                            {
                                                                  base.Add_Status_List[0x7a7c5].THOI_GIAN_KET_THUC_SU_KIEN();
                                                            }
                                                            double num7 = 3000.0;
                                                            Additional_Sate_Class class3 = new Additional_Sate_Class(this, (int)num7, 0x7a7c5, 0);
                                                            base.Add_Status_List.Add(0x7a7c5, class3);
                                                            this.Status_Effect(BitConverter.GetBytes(0x7a7c5), 1, (int)num7);
                                                            base.Nhan_vat_them_vao_lon_nhat_HP += 0x3e8;
                                                            this.UpdateHP_MP_SP();
                                                      }
                                                      if ((base.Liet_nhat_viem_viem != 0.0) && (random.Next(0, 100) <= base.Liet_nhat_viem_viem))
                                                      {
                                                            base.Show_Char(int_129, 0x158);
                                                      }
                                                      if (((base.Man_nguyet_cuong_phong != 0.0) && (random.Next(0, 100) <= base.Man_nguyet_cuong_phong)) && World.W_TO_DOI.TryGetValue(base.TO_DOI_ID, out to_doi_class))
                                                      {
                                                            foreach (Players players in to_doi_class.dictionary_0.Values)
                                                            {
                                                                  if (this.TRA_TIM_PHAM_VI_NGUOI_CHOI(300, players))
                                                                  {
                                                                        if (players.Add_Status_List.ContainsKey(0xaae6e))
                                                                        {
                                                                              return;
                                                                        }
                                                                        players.Show_Char(players.UserSessionID, 0x162);
                                                                        Additional_Sate_Class class4 = new Additional_Sate_Class(players, 0xbb8, 0xaae6e, 0);
                                                                        players.Add_Status_List.Add(0xaae6e, class4);
                                                                        if (players.Player_Job == 3)
                                                                        {
                                                                              players.addFLD_ATT_Percentage(0.29M);
                                                                              players.addFLD_DEF_Percentage(0.29M);
                                                                        }
                                                                        else
                                                                        {
                                                                              players.addFLD_ATT_Percentage(0.25M);
                                                                              players.addFLD_DEF_Percentage(0.25M);
                                                                        }
                                                                        players.Status_Effect(BitConverter.GetBytes(0xaae6e), 1, 0xbb8);
                                                                        players.UpdatePowersAndStatus();
                                                                  }
                                                            }
                                                      }
                                                      if ((base.Thang_thien_4_khi_cong_Hong_nguyet_cuong_phong != 0.0) && (random.Next(0, 120) <= base.Thang_thien_4_khi_cong_Hong_nguyet_cuong_phong))
                                                      {
                                                            foreach (Players players2 in World.allConnectedChars.Values)
                                                            {
                                                                  if ((this.TRA_TIM_PHAM_VI_NGUOI_CHOI(30, players2) && (players2.Player_Job == base.Player_Job)) && ((base.Player_Zx == players2.Player_Zx) && players2.Add_Status_List.ContainsKey(0xaae6e)))
                                                                  {
                                                                        players2.Show_Char(players2.UserSessionID, 0x139);
                                                                  }
                                                            }
                                                      }
                                                      if ((base.Thuong_khach_thang_thien_1_khi_cong_Pha_giap_thu_hon != 0.0) && (random.Next(0, 120) < base.Thuong_khach_thang_thien_1_khi_cong_Pha_giap_thu_hon))
                                                      {
                                                            base.Show_Char(int_129, 330);
                                                            num3 += base.FLD_trang_bi_them_vao_phong_ngu * 0.4;
                                                      }
                                                      if (base.Player_Job == 4)
                                                      {
                                                            num3 += base.Cung_thu_Due_loi_chi_tien + 1.0;
                                                            if ((base.Cung_thu_Vo_minh_am_thi != 0.0) && (random.Next(0, 0x6f) < (base.Cung_thu_Vo_minh_am_thi + World.CUNG_THU_VO_MINH_AM_THI_TY_LE)))
                                                            {
                                                                  base.Show_Char(int_129, 0x31);
                                                                  num3 *= 1.05 + (base.Cung_thu_Vo_minh_am_thi * 0.01);
                                                                  base.bool_7 = true;
                                                            }
                                                            if ((base.Cung_thu_Tri_menh_tuyet_sat != 0.0) && (random.Next(0, 0x8d) < (base.Cung_thu_Tri_menh_tuyet_sat + World.CUNG_THU_TRI_MENH_TUYET_SAT_TY_LE)))
                                                            {
                                                                  base.Show_Char(int_129, 140);
                                                                  num3 *= 1.5;
                                                                  base.bool_9 = true;
                                                            }
                                                      }
                                                      if (base.Danh_Lien_Hoan_ty_le != 0.0)
                                                      {
                                                            int num8 = random.Next(0, 0x83);
                                                            if (((base.Player_Job == 1) || (base.Player_Job == 3)) && (num8 < base.Danh_Lien_Hoan_ty_le))
                                                            {
                                                                  num4 = 0x81;
                                                                  num3 *= 1.1;
                                                            }
                                                            if ((base.Player_Job == 2) && (num8 < base.Danh_Lien_Hoan_ty_le))
                                                            {
                                                                  num4 = 0x80;
                                                                  num3 *= 1.1;
                                                            }
                                                      }
                                                      if (base.Player_Job == 4)
                                                      {
                                                            int num9 = random.Next(0, 100);
                                                            int num10 = random.Next(0, 0x6f);
                                                            int num11 = random.Next(0, 0x83);
                                                            int num12 = random.Next(0, 90);
                                                            if ((num10 < (base.Cung_thu_Luu_tinh_tam_thi + (base.Cung_thu_thang_thien_1_khi_cong_Tuyet_anh_xa_hon * 0.5))) && (num11 < base.Cung_thu_Tam_than_ngung_tu))
                                                            {
                                                                  if (num9 >= 50)
                                                                  {
                                                                        if ((base.Cung_thu_Luu_tinh_tam_thi != 0.0) && (num10 < (base.Cung_thu_Luu_tinh_tam_thi + (base.Cung_thu_thang_thien_1_khi_cong_Tuyet_anh_xa_hon * 0.5))))
                                                                        {
                                                                              base.Show_Char(int_129, 0x2f);
                                                                              if (base.Add_Status_List.ContainsKey(0xaae8f))
                                                                              {
                                                                                    base.Add_Status_List[0xaae8f].THOI_GIAN_KET_THUC_SU_KIEN();
                                                                              }
                                                                              Additional_Sate_Class class5 = new Additional_Sate_Class(this, 0x2af8, 0xaae8f, 1);
                                                                              base.Add_Status_List.Add(class5.FLD_PID, class5);
                                                                              this.Status_Effect(BitConverter.GetBytes(0xaae8f), 1, 0x2af8);
                                                                              base.UpdatePowersAndStatus();
                                                                        }
                                                                        if (base.Add_Status_List.ContainsKey(0xaae8f) && (num12 < (base.Cung_thu_Luu_tinh_tam_thi + (base.Cung_thu_thang_thien_1_khi_cong_Tuyet_anh_xa_hon * 0.5))))
                                                                        {
                                                                              num4 = 0x81;
                                                                              num3 *= 1.3;
                                                                        }
                                                                  }
                                                                  else if (num11 < base.Cung_thu_Tam_than_ngung_tu)
                                                                  {
                                                                        num4 = 0x88;
                                                                        num3 *= 1.4;
                                                                  }
                                                            }
                                                            else if (base.Cung_thu_Luu_tinh_tam_thi != 0.0)
                                                            {
                                                                  if (num10 < (base.Cung_thu_Luu_tinh_tam_thi + (base.Cung_thu_thang_thien_1_khi_cong_Tuyet_anh_xa_hon * 0.5)))
                                                                  {
                                                                        base.Show_Char(int_129, 0x2f);
                                                                        if (base.Add_Status_List.ContainsKey(0xaae8f))
                                                                        {
                                                                              base.Add_Status_List[0xaae8f].THOI_GIAN_KET_THUC_SU_KIEN();
                                                                        }
                                                                        Additional_Sate_Class class6 = new Additional_Sate_Class(this, 0x2af8, 0xaae8f, 1);
                                                                        base.Add_Status_List.Add(class6.FLD_PID, class6);
                                                                        this.Status_Effect(BitConverter.GetBytes(0xaae8f), 1, 0x2af8);
                                                                        base.UpdatePowersAndStatus();
                                                                  }
                                                                  if (base.Add_Status_List.ContainsKey(0xaae8f) && (num12 < (base.Cung_thu_Luu_tinh_tam_thi + (base.Cung_thu_thang_thien_1_khi_cong_Tuyet_anh_xa_hon * 0.5))))
                                                                  {
                                                                        num4 = 0x81;
                                                                        num3 *= 1.3;
                                                                  }
                                                            }
                                                            else if ((base.Cung_thu_Tam_than_ngung_tu != 0.0) && (num11 < base.Cung_thu_Tam_than_ngung_tu))
                                                            {
                                                                  num4 = 0x88;
                                                                  num3 *= 1.4;
                                                            }
                                                      }
                                                      if (base.Player_Job == 6)
                                                      {
                                                            if ((base.Thich_khach_Tam_than_ngung_tu != 0.0) && (random.Next(0, 200) < base.Thich_khach_Tam_than_ngung_tu))
                                                            {
                                                                  base.Show_Char(int_129, 0x51);
                                                                  num4 = 0x88;
                                                                  if (base.Thich_khach_Tri_thu_tuyet_menh != 0.0)
                                                                  {
                                                                        num3 *= World.THICH_KHACH_TAM_THAN_NGUNG_TU_UY_LUC;
                                                                        num3 += num3 * base.Thich_khach_Tri_thu_tuyet_menh;
                                                                  }
                                                                  else
                                                                  {
                                                                        num3 *= World.THICH_KHACH_TAM_THAN_NGUNG_TU_UY_LUC;
                                                                  }
                                                            }
                                                            if ((base.Thich_khach_Tat_sat_nhat_kich != 0.0) && (random.Next(0, 0x83) < base.Thich_khach_Tat_sat_nhat_kich))
                                                            {
                                                                  base.Show_Char(int_129, 80);
                                                                  num4 = 0x86;
                                                                  num3 *= World.THICH_KHACH_TAT_SAT_NHAT_KICH_UY_LUC;
                                                                  if (((base.Thich_khach_thang_thien_3_khi_cong_Di_no_hoan_no != 0.0) && (random.Next(0, 0x70) < base.Thich_khach_thang_thien_3_khi_cong_Di_no_hoan_no)) && (this.int_127 < 5))
                                                                  {
                                                                        this.int_127 += 2;
                                                                        if (this.int_127 > 5)
                                                                        {
                                                                              this.int_127 = 5;
                                                                        }
                                                                        this.UpdateHP_MP_SP();
                                                                  }
                                                            }
                                                            if ((base.Thich_khach_Lien_hoan_phi_vu != 0.0) && (random.Next(0, 0x83) < base.Thich_khach_Lien_hoan_phi_vu))
                                                            {
                                                                  switch (num5)
                                                                  {
                                                                        case 1:
                                                                              num4 = 0x81;
                                                                              break;

                                                                        case 2:
                                                                              num4 = 130;
                                                                              break;

                                                                        case 3:
                                                                              num4 = 0x83;
                                                                              break;

                                                                        case 4:
                                                                              num4 = 0x84;
                                                                              break;

                                                                        case 5:
                                                                              num4 = 0x85;
                                                                              break;

                                                                        case 10:
                                                                              num4 = 0x70;
                                                                              break;

                                                                        case 11:
                                                                              num4 = 0x71;
                                                                              break;

                                                                        default:
                                                                              num4 = 0x81;
                                                                              break;
                                                                  }
                                                                  num3 *= World.THICH_KHACH_LIEN_HOAN_PHI_VU_UY_LUC;
                                                            }
                                                      }
                                                      if (base.Player_Job == 7)
                                                      {
                                                            switch (num5)
                                                            {
                                                                  case 1:
                                                                        num4 = 0x7e;
                                                                        break;

                                                                  case 2:
                                                                        num4 = 0x81;
                                                                        break;

                                                                  case 3:
                                                                        num4 = 0x86;
                                                                        break;

                                                                  default:
                                                                        num4 = 0x7e;
                                                                        break;
                                                            }
                                                            if (base.Add_Status_List != null)
                                                            {
                                                                  if (!base.Add_Status_List.ContainsKey(0xdbd31))
                                                                  {
                                                                        int num13 = 0;
                                                                        int num14 = random.Next(0, 100);
                                                                        if (random.Next(0, 0x6f) <= (base.Cam_su_Nhat_am_xuat_kich * 100.0))
                                                                        {
                                                                              base.Show_Char(int_129, 0x57);
                                                                              if (num14 <= 0x21)
                                                                              {
                                                                                    num13 = 0xdbd31;
                                                                              }
                                                                              else if ((num14 >= 0x21) && (num14 <= 0x42))
                                                                              {
                                                                                    num13 = 0xdbd32;
                                                                              }
                                                                              else
                                                                              {
                                                                                    num13 = 0xdbd33;
                                                                              }
                                                                              if (!base.Add_Status_List.ContainsKey(0xdbd32) && !base.Add_Status_List.ContainsKey(0xdbd33))
                                                                              {
                                                                                    Additional_Sate_Class class7 = new Additional_Sate_Class(this, 0xea60, num13, 0);
                                                                                    base.Add_Status_List.Add(num13, class7);
                                                                                    this.Status_Effect(BitConverter.GetBytes(num13), 1, 0xea60);
                                                                                    base.Update_Figure_Data(this);
                                                                              }
                                                                        }
                                                                  }
                                                                  else
                                                                  {
                                                                        int num15 = random.Next(0, 11);
                                                                        int num16 = random.Next(0, 0x65);
                                                                        int num17 = random.Next(0, 0x65);
                                                                        int num18 = random.Next(0, 0x65);
                                                                        base.Cam_su_Tam_hoa_huyen_phat_dong_xac_suat = (base.Cam_su_Cam_thanh_qua_nguyet * 0.005) * 100.0;
                                                                        if (random.Next(0, 0x65) <= (((int)(base.Cam_su_Loan_phuong_hoa_minh * 100.0)) + ((int)(base.Cam_su_thang_thien_1_khi_cong_Phi_hoa_diem_thuy * 0.2))))
                                                                        {
                                                                              base.Cam_su_Tam_hoa_huyen_phat_dong_xac_suat *= 2.0;
                                                                        }
                                                                        if (num16 <= base.Cam_su_Tam_hoa_huyen_phat_dong_xac_suat)
                                                                        {
                                                                              if ((num17 <= base.Cam_su_Sat_am_cam_khuc) && !tbl_xwwl_npc.threadSafeDictionary_1.ContainsKey(11))
                                                                              {
                                                                                    double num19 = 10000.0;
                                                                                    num19 += base.Cam_su_Sat_am_cam_khuc * 1000.0;
                                                                                    DI_THUONG_TRANG_THAI_NEW di_thuong_trang_thai_new = new DI_THUONG_TRANG_THAI_NEW(tbl_xwwl_npc, base.UserSessionID, (int)num19, 11, 0);
                                                                                    tbl_xwwl_npc.threadSafeDictionary_1.Add(11, di_thuong_trang_thai_new);
                                                                              }
                                                                              if ((num18 <= base.Cam_su_Sat_menh_cam_thanh) && !tbl_xwwl_npc.threadSafeDictionary_1.ContainsKey(9))
                                                                              {
                                                                                    double num20 = 10000.0;
                                                                                    num20 += base.Cam_su_Sat_menh_cam_thanh * 1000.0;
                                                                                    DI_THUONG_TRANG_THAI_NEW di_thuong_trang_thai_new2 = new DI_THUONG_TRANG_THAI_NEW(tbl_xwwl_npc, base.UserSessionID, (int)num20, 9, 0);
                                                                                    tbl_xwwl_npc.threadSafeDictionary_1.Add(9, di_thuong_trang_thai_new2);
                                                                                    tbl_xwwl_npc.FLD_DF *= 0.9;
                                                                              }
                                                                              if ((num15 == 10) && !tbl_xwwl_npc.threadSafeDictionary_1.ContainsKey(10))
                                                                              {
                                                                                    DI_THUONG_TRANG_THAI_NEW di_thuong_trang_thai_new3 = new DI_THUONG_TRANG_THAI_NEW(tbl_xwwl_npc, base.UserSessionID, 0x2710, 10, (int)num3);
                                                                                    di_thuong_trang_thai_new3.method_0(num3);
                                                                                    tbl_xwwl_npc.threadSafeDictionary_1.Add(10, di_thuong_trang_thai_new3);
                                                                              }
                                                                              if (!tbl_xwwl_npc.threadSafeDictionary_1.ContainsKey(9) && !tbl_xwwl_npc.threadSafeDictionary_1.ContainsKey(11))
                                                                              {
                                                                                    if (num16 <= 50)
                                                                                    {
                                                                                          double num21 = 10000.0;
                                                                                          num21 += base.Cam_su_Sat_am_cam_khuc * 1000.0;
                                                                                          DI_THUONG_TRANG_THAI_NEW di_thuong_trang_thai_new4 = new DI_THUONG_TRANG_THAI_NEW(tbl_xwwl_npc, base.UserSessionID, (int)num21, 11, 0);
                                                                                          tbl_xwwl_npc.threadSafeDictionary_1.Add(11, di_thuong_trang_thai_new4);
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                          double num22 = 10000.0;
                                                                                          num22 += base.Cam_su_Sat_menh_cam_thanh * 1000.0;
                                                                                          DI_THUONG_TRANG_THAI_NEW di_thuong_trang_thai_new5 = new DI_THUONG_TRANG_THAI_NEW(tbl_xwwl_npc, base.UserSessionID, (int)num22, 9, 0);
                                                                                          tbl_xwwl_npc.threadSafeDictionary_1.Add(9, di_thuong_trang_thai_new5);
                                                                                          tbl_xwwl_npc.FLD_DF *= 0.9;
                                                                                    }
                                                                              }
                                                                        }
                                                                  }
                                                            }
                                                      }
                                                }
                                                else
                                                {
                                                      num23 = random.Next(10, 12);
                                                      switch (num23)
                                                      {
                                                            case 10:
                                                                  num4 = 0x70;
                                                                  break;

                                                            case 11:
                                                                  num4 = 0x71;
                                                                  break;

                                                            default:
                                                                  num4 = 0x71;
                                                                  break;
                                                      }
                                                }
                                                if (base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].ItemPropertyType == 5)
                                                {
                                                      num3 += base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].ItemPropertyNumber * 3;
                                                }
                                                if (World.Version_switch != 0)
                                                {
                                                      num3 = random.Next(((int)num3) - 15, ((int)num3) + 15);
                                                }
                                                if (base.Thanh_vien_thu_bac != 0)
                                                {
                                                      num3 = 10000000000;
                                                }
                                                if (num3 <= 0.0)
                                                {
                                                      num3 = 1.0;
                                                }
                                                this.CONG_KICH_TINH_TOAN_HOAN_THANH2(this, int_129, int_128, (long)num3, num4, tbl_xwwl_npc.Rxjh_HP);
                                          }
                                    }
                              }
                              else
                              {
                                    Players players3;
                                    if (World.allConnectedChars.TryGetValue(int_129, out players3))
                                    {
                                          char[] separator = new char[] { ';' };
                                          string[] strArray = World.Cam_PK_ban_do.Split(separator);
                                          if ((int.Parse(strArray[0]) == 0) || (((base.CharacterCoords_Map != int.Parse(strArray[0])) && (base.CharacterCoords_Map != int.Parse(strArray[1]))) && (base.CharacterCoords_Map != int.Parse(strArray[2]))))
                                          {
                                                char[] chArray2 = new char[] { ',' };
                                                string[] strArray2 = World.Nguc_giam_ban_do.Trim().Split(chArray2);
                                                if (base.CharacterCoords_Map != int.Parse(strArray2[0]))
                                                {
                                                      if ((base.int_16 != 1) && (players3.int_16 != 1))
                                                      {
                                                            if ((base.PlayerShop == null) && (players3.PlayerShop == null))
                                                            {
                                                                  if (players3.Client.offLineStatus)
                                                                  {
                                                                        if (World.Co_hay_khong_bat_dau_dung_cach_tuyen_Treo_thiet_bi_nhac_nho != 0)
                                                                        {
                                                                              base.GameMessage(World.Cach_tuyen_Treo_thiet_bi_Nhac_nho_noi_dung ?? "", 10, "Goodbye prompt");
                                                                        }
                                                                  }
                                                                  else if ((base.CharacterCoords_Map != 0x321) || (base.Player_Zx != players3.Player_Zx))
                                                                  {
                                                                        if (base.PlayerPKMode == 1)
                                                                        {
                                                                              if ((base.Evil_mode != 0) && (players3.Evil_mode != 0))
                                                                              {
                                                                                    if (base.Evil_mode == players3.Evil_mode)
                                                                                    {
                                                                                          return;
                                                                                    }
                                                                              }
                                                                              else if (base.Player_Zx == players3.Player_Zx)
                                                                              {
                                                                                    return;
                                                                              }
                                                                        }
                                                                        if ((base.PlayerPKMode != 1) || (base.Player_Zx != players3.Player_Zx))
                                                                        {
                                                                              if (((players3.Player_FLD_LEVEL < 0x23) && (base.CharacterCoords_Map != World.Khieu_chien_ban_do_so_hieu)) && (players3.CharacterCoords_Map != World.Khieu_chien_ban_do_so_hieu))
                                                                              {
                                                                                    base.GameMessage("This service enable new protected mode, can not attack the player 35 or less!", 9, "system hint");
                                                                              }
                                                                              else if (players3.int_4 != 8)
                                                                              {
                                                                                    if (((Math.Abs((int)(base.Player_FLD_LEVEL - players3.Player_FLD_LEVEL)) > World.PK_Dang_cap_chenh_lech) && (base.CharacterCoords_Map != World.Khieu_chien_ban_do_so_hieu)) && (players3.CharacterCoords_Map != World.Khieu_chien_ban_do_so_hieu))
                                                                                    {
                                                                                          base.GameMessage("The two sides can not rank much difference PK! ! ! ! Note: Level difference" + World.PK_Dang_cap_chenh_lech + "Level to less PK", 9, "system hint");
                                                                                    }
                                                                                    else if (!this.PHAT_DONG_KHU_AN_TOAN_TOA_DO(players3))
                                                                                    {
                                                                                          if (World.PK_khoang_cach_khong_che_co_hay_khong_mo_ra != 0)
                                                                                          {
                                                                                                if (((base.Player_Job != 4) && (base.Player_Job != 5)) && (base.Player_Job != 7))
                                                                                                {
                                                                                                      if (Math.Sqrt(Math.Pow((double)(base.CharacterCoords_X - players3.CharacterCoords_X), 2.0) + Math.Pow((double)(base.CharacterCoords_Y - players3.CharacterCoords_Y), 2.0)) >= World.Nhan_vat_gan_nguoi_nghe_nghiep_cong_kich_khoang_cach)
                                                                                                      {
                                                                                                            return;
                                                                                                      }
                                                                                                }
                                                                                                else if (Math.Sqrt(Math.Pow((double)(base.CharacterCoords_X - players3.CharacterCoords_X), 2.0) + Math.Pow((double)(base.CharacterCoords_Y - players3.CharacterCoords_Y), 2.0)) >= World.Nhan_vat_trinh_dien_nghe_nghiep_Cong_kich_khoang_cach)
                                                                                                {
                                                                                                      return;
                                                                                                }
                                                                                          }
                                                                                          if (players3.NHAN_VAT_HP > 0L)
                                                                                          {
                                                                                                double num24 = base.FLD_BasicCharAttack;
                                                                                                double num25 = players3.FLD_BasicCharDefense;
                                                                                                int num26 = random.Next(0, 6);
                                                                                                int num27 = 0x7e;
                                                                                                if ((base.Pha_giap_ty_le != 0.0) && (random.Next(0, 0x65) < base.Pha_giap_ty_le))
                                                                                                {
                                                                                                      num25 *= 0.3;
                                                                                                      base.Show_Char(int_129, 0x10);
                                                                                                }
                                                                                                if ((base.Kiem_khach_Vo_kien_bat_toi != 0.0) && ((random.NextDouble() * 100.0) < base.Kiem_khach_Vo_kien_bat_toi))
                                                                                                {
                                                                                                      base.Show_Char(int_129, 120);
                                                                                                      num25 *= 0.5;
                                                                                                }
                                                                                                if ((base.Kiem_khach_thang_thien_1_khi_cong_Thua_thang_truy_kich != 0.0) && (random.Next(0, 120) < base.Kiem_khach_thang_thien_1_khi_cong_Thua_thang_truy_kich))
                                                                                                {
                                                                                                      base.Show_Char(int_129, 120);
                                                                                                      num25 -= (num25 * base.Kiem_khach_thang_thien_1_khi_cong_Thua_thang_truy_kich) * 0.01;
                                                                                                }
                                                                                                if (((base.Player_Job == 1) || (base.Player_Job == 8)) && (base.Toi_thieu_cong_kich != 0.0))
                                                                                                {
                                                                                                      num24 += num24 * base.Toi_thieu_cong_kich;
                                                                                                }
                                                                                                if (((base.Player_Job == 2) || (base.Player_Job == 9)) && (base.Toi_thieu_cong_kich != 0.0))
                                                                                                {
                                                                                                      num24 += num24 * base.Toi_thieu_cong_kich;
                                                                                                }
                                                                                                if ((base.Player_Job == 3) && (base.Toi_thieu_cong_kich != 0.0))
                                                                                                {
                                                                                                      num24 += num24 * base.Toi_thieu_cong_kich;
                                                                                                }
                                                                                                if ((base.Player_Job == 4) && (base.Cung_thu_Ngung_than_tu_khi != 0.0))
                                                                                                {
                                                                                                      num24 += num24 * base.Cung_thu_Ngung_than_tu_khi;
                                                                                                }
                                                                                                if ((base.Player_Job == 5) && (base.Toi_thieu_cong_kich != 0.0))
                                                                                                {
                                                                                                      num24 += num24 * base.Toi_thieu_cong_kich;
                                                                                                }
                                                                                                if (base.Player_Job == 6)
                                                                                                {
                                                                                                      if (base.Toi_thieu_cong_kich != 0.0)
                                                                                                      {
                                                                                                            num24 += num24 * base.Toi_thieu_cong_kich;
                                                                                                      }
                                                                                                      if (base.double_114 != 0.0)
                                                                                                      {
                                                                                                            num24 += base.double_114 / 2.0;
                                                                                                            base.double_114 = 0.0;
                                                                                                      }
                                                                                                }
                                                                                                double num28 = ((num24 - num25) + (base.FLD_NHAN_VAT_CO_BAN_TRUNG_MUC_TIEU / 4)) - (players3.FLD_NHAN_VAT_CO_BAN_NE_TRANH / 4);
                                                                                                if (BitConverter.ToInt32(base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].VAT_PHAM_ID, 0) != 0)
                                                                                                {
                                                                                                      TO_DOI_CLASS to_doi_class2;
                                                                                                      if ((base.Dao_khach_Am_anh_tuyet_sat != 0.0) && (random.Next(0, 0x8d) < base.Dao_khach_Am_anh_tuyet_sat))
                                                                                                      {
                                                                                                            base.Show_Char(int_129, 0x12);
                                                                                                            num28 *= 1.0 + base.Toi_thieu_cong_kich;
                                                                                                      }
                                                                                                      if ((base.Huyen_ti_chan_mach != 0.0) && (random.Next(0, 100) <= base.Huyen_ti_chan_mach))
                                                                                                      {
                                                                                                            base.Show_Char(int_129, 0x18a);
                                                                                                            if (base.Add_Status_List.ContainsKey(0xdc17d))
                                                                                                            {
                                                                                                                  base.Add_Status_List[0xdc17d].THOI_GIAN_KET_THUC_SU_KIEN();
                                                                                                            }
                                                                                                            double num29 = 3000.0;
                                                                                                            Additional_Sate_Class class8 = new Additional_Sate_Class(this, (int)num29, 0xdc17d, 0);
                                                                                                            base.Add_Status_List.Add(0xdc17d, class8);
                                                                                                            this.Status_Effect(BitConverter.GetBytes(0xdc17d), 1, (int)num29);
                                                                                                            base.addFLD_DEF_Percentage(0.1M);
                                                                                                            base.UpdatePowersAndStatus();
                                                                                                      }
                                                                                                      if ((base.Vong_mai_thiem_tan != 0.0) && (random.Next(0, 100) <= base.Vong_mai_thiem_tan))
                                                                                                      {
                                                                                                            base.Show_Char(int_129, 0x162);
                                                                                                            if (base.Add_Status_List.ContainsKey(0x7a7c5))
                                                                                                            {
                                                                                                                  base.Add_Status_List[0x7a7c5].THOI_GIAN_KET_THUC_SU_KIEN();
                                                                                                            }
                                                                                                            double num30 = 3000.0;
                                                                                                            Additional_Sate_Class class9 = new Additional_Sate_Class(this, (int)num30, 0x7a7c5, 0);
                                                                                                            base.Add_Status_List.Add(0x7a7c5, class9);
                                                                                                            this.Status_Effect(BitConverter.GetBytes(0x7a7c5), 1, (int)num30);
                                                                                                            base.Nhan_vat_them_vao_lon_nhat_HP += 0x3e8;
                                                                                                            this.UpdateHP_MP_SP();
                                                                                                      }
                                                                                                      if ((base.Liet_nhat_viem_viem != 0.0) && (random.Next(0, 100) <= base.Liet_nhat_viem_viem))
                                                                                                      {
                                                                                                            base.Show_Char(int_129, 0x158);
                                                                                                      }
                                                                                                      if (((base.Man_nguyet_cuong_phong != 0.0) && (random.Next(0, 100) <= base.Man_nguyet_cuong_phong)) && World.W_TO_DOI.TryGetValue(base.TO_DOI_ID, out to_doi_class2))
                                                                                                      {
                                                                                                            foreach (Players players4 in to_doi_class2.dictionary_0.Values)
                                                                                                            {
                                                                                                                  if (this.TRA_TIM_PHAM_VI_NGUOI_CHOI(300, players4))
                                                                                                                  {
                                                                                                                        if (players4.Add_Status_List.ContainsKey(0xaae6e))
                                                                                                                        {
                                                                                                                              return;
                                                                                                                        }
                                                                                                                        players4.Show_Char(players4.UserSessionID, 0x162);
                                                                                                                        Additional_Sate_Class class10 = new Additional_Sate_Class(players4, 0xbb8, 0xaae6e, 0);
                                                                                                                        players4.Add_Status_List.Add(0xaae6e, class10);
                                                                                                                        if (players4.Player_Job == 3)
                                                                                                                        {
                                                                                                                              players4.addFLD_ATT_Percentage(0.29M);
                                                                                                                              players4.addFLD_DEF_Percentage(0.29M);
                                                                                                                        }
                                                                                                                        else
                                                                                                                        {
                                                                                                                              players4.addFLD_ATT_Percentage(0.25M);
                                                                                                                              players4.addFLD_DEF_Percentage(0.25M);
                                                                                                                        }
                                                                                                                        players4.Status_Effect(BitConverter.GetBytes(0xaae6e), 1, 0xbb8);
                                                                                                                        players4.UpdatePowersAndStatus();
                                                                                                                  }
                                                                                                            }
                                                                                                      }
                                                                                                      if ((base.Truong_hong_quan_thien != 0.0) && (random.Next(0, 100) <= base.Truong_hong_quan_thien))
                                                                                                      {
                                                                                                            foreach (Players players5 in World.allConnectedChars.Values)
                                                                                                            {
                                                                                                                  if (this.TRA_TIM_PHAM_VI_NGUOI_CHOI(30, players5) && (base.Player_Zx == players5.Player_Zx))
                                                                                                                  {
                                                                                                                        if (players5.Add_Status_List.ContainsKey(0xab0bb))
                                                                                                                        {
                                                                                                                              players5.Add_Status_List[0xab0bb].THOI_GIAN_KET_THUC_SU_KIEN();
                                                                                                                        }
                                                                                                                        Additional_Sate_Class class11 = new Additional_Sate_Class(players5, 0xbb8, 0xab0bb, 1);
                                                                                                                        players5.Add_Status_List.Add(0xab0bb, class11);
                                                                                                                        players5.FLD_nhan_vat_them_vao_cong_kich += 100;
                                                                                                                        players5.FLD_nhan_vat_them_vao_phong_ngu += 100;
                                                                                                                        players5.Nhan_vat_them_vao_lon_nhat_HP += 0x3e8;
                                                                                                                        players5.Nhan_vat_them_vao_lon_nhat_MP += 0x3e8;
                                                                                                                        players5.Status_Effect(BitConverter.GetBytes(0xab0bb), 1, 0xbb8);
                                                                                                                        players5.UpdatePowersAndStatus();
                                                                                                                        players5.UpdateHP_MP_SP();
                                                                                                                        players5.Show_Char(players5.UserSessionID, 0x25b);
                                                                                                                  }
                                                                                                            }
                                                                                                      }
                                                                                                      if ((base.Ai_hong_bien_da != 0.0) && (random.Next(0, 100) <= base.Ai_hong_bien_da))
                                                                                                      {
                                                                                                            base.Show_Char(int_129, 0x25c);
                                                                                                            foreach (Players players6 in World.allConnectedChars.Values)
                                                                                                            {
                                                                                                                  if ((this.TRA_TIM_PHAM_VI_NGUOI_CHOI(30, players6) && (base.Player_Zx != players6.Player_Zx)) && ((base.UserSessionID != players6.UserSessionID) && !players6.threadSafeDictionary_4.ContainsKey(6)))
                                                                                                                  {
                                                                                                                        DI_THUONG_TRANG_THAI_NEW di_thuong_trang_thai_new6 = new DI_THUONG_TRANG_THAI_NEW(players6, 0xbb8, 6, 0);
                                                                                                                        players6.threadSafeDictionary_4.Add(6, di_thuong_trang_thai_new6);
                                                                                                                        players6.FLD_them_vao_ti_le_phan_tram_HP_han_muc_toi_da -= 0.15;
                                                                                                                        if (players6.NHAN_VAT_HP > players6.NHAN_VAT_LON_NHAT_HP)
                                                                                                                        {
                                                                                                                              players6.NHAN_VAT_HP = players6.NHAN_VAT_LON_NHAT_HP;
                                                                                                                        }
                                                                                                                        players6.UpdateHP_MP_SP();
                                                                                                                        players6.Show_Char(players6.UserSessionID, 0x25c);
                                                                                                                  }
                                                                                                            }
                                                                                                      }
                                                                                                      if ((base.Thang_thien_4_khi_cong_Doc_xa_xuat_dong != 0.0) && (random.Next(0, 100) <= base.Thang_thien_4_khi_cong_Doc_xa_xuat_dong))
                                                                                                      {
                                                                                                            players3.Show_Char(players3.UserSessionID, 0x139);
                                                                                                      }
                                                                                                      if ((base.Thang_thien_4_khi_cong_Hong_nguyet_cuong_phong != 0.0) && (random.Next(0, 120) <= base.Thang_thien_4_khi_cong_Hong_nguyet_cuong_phong))
                                                                                                      {
                                                                                                            foreach (Players players7 in World.allConnectedChars.Values)
                                                                                                            {
                                                                                                                  if ((this.TRA_TIM_PHAM_VI_NGUOI_CHOI(30, players7) && (players7.Player_Job == base.Player_Job)) && ((base.Player_Zx == players7.Player_Zx) && players7.Add_Status_List.ContainsKey(0xaae6e)))
                                                                                                                  {
                                                                                                                        players7.Show_Char(players7.UserSessionID, 0x139);
                                                                                                                  }
                                                                                                            }
                                                                                                      }
                                                                                                      if ((base.Han_bao_quan_Hanh_phong_long_vu != 0.0) && (random.Next(0, 0x8d) < base.Han_bao_quan_Hanh_phong_long_vu))
                                                                                                      {
                                                                                                            base.Show_Char(int_129, 600);
                                                                                                            num28 *= 1.25;
                                                                                                      }
                                                                                                      if ((base.Dao_khach_thang_thien_2_khi_cong_Cung_duong_mat_lo != 0.0) && (random.Next(0, 120) <= base.Dao_khach_thang_thien_2_khi_cong_Cung_duong_mat_lo))
                                                                                                      {
                                                                                                            base.Show_Char(int_129, 0x137);
                                                                                                            num28 *= 2.0;
                                                                                                      }
                                                                                                      if ((base.Thuong_khach_thang_thien_1_khi_cong_Pha_giap_thu_hon != 0.0) && (random.Next(0, 120) < base.Thuong_khach_thang_thien_1_khi_cong_Pha_giap_thu_hon))
                                                                                                      {
                                                                                                            base.Show_Char(int_129, 330);
                                                                                                            num28 += base.FLD_trang_bi_them_vao_phong_ngu * 0.4;
                                                                                                      }
                                                                                                      if (base.Player_Job == 4)
                                                                                                      {
                                                                                                            num28 += base.Cung_thu_Due_loi_chi_tien + 1.0;
                                                                                                            if ((base.Cung_thu_Vo_minh_am_thi != 0.0) && (random.Next(0, 0x6f) < (base.Cung_thu_Vo_minh_am_thi + World.CUNG_THU_VO_MINH_AM_THI_TY_LE)))
                                                                                                            {
                                                                                                                  base.Show_Char(int_129, 0x31);
                                                                                                                  num28 *= 1.05 + (base.Cung_thu_Vo_minh_am_thi * 0.01);
                                                                                                                  base.bool_7 = true;
                                                                                                            }
                                                                                                            if ((base.Cung_thu_Tri_menh_tuyet_sat != 0.0) && (random.Next(0, 0x8d) < (base.Cung_thu_Tri_menh_tuyet_sat + World.CUNG_THU_TRI_MENH_TUYET_SAT_TY_LE)))
                                                                                                            {
                                                                                                                  base.Show_Char(int_129, 140);
                                                                                                                  num28 *= 1.5;
                                                                                                                  base.bool_9 = true;
                                                                                                            }
                                                                                                      }
                                                                                                      if (base.Danh_Lien_Hoan_ty_le != 0.0)
                                                                                                      {
                                                                                                            int num31 = random.Next(0, 0x83);
                                                                                                            if (((base.Player_Job == 1) || (base.Player_Job == 3)) && (num31 < base.Danh_Lien_Hoan_ty_le))
                                                                                                            {
                                                                                                                  num27 = 0x81;
                                                                                                                  num28 *= 1.1;
                                                                                                            }
                                                                                                            if ((base.Player_Job == 2) && (num31 < base.Danh_Lien_Hoan_ty_le))
                                                                                                            {
                                                                                                                  num27 = 0x80;
                                                                                                                  num28 *= 1.1;
                                                                                                            }
                                                                                                      }
                                                                                                      if (base.Player_Job == 4)
                                                                                                      {
                                                                                                            int num32 = random.Next(0, 100);
                                                                                                            int num33 = random.Next(0, 0x6f);
                                                                                                            int num34 = random.Next(0, 0x83);
                                                                                                            int num35 = random.Next(0, 90);
                                                                                                            if ((num33 < (base.Cung_thu_Luu_tinh_tam_thi + (base.Cung_thu_thang_thien_1_khi_cong_Tuyet_anh_xa_hon * 0.5))) && (num34 < base.Cung_thu_Tam_than_ngung_tu))
                                                                                                            {
                                                                                                                  if (num32 >= 50)
                                                                                                                  {
                                                                                                                        if ((base.Cung_thu_Luu_tinh_tam_thi != 0.0) && (num33 < (base.Cung_thu_Luu_tinh_tam_thi + (base.Cung_thu_thang_thien_1_khi_cong_Tuyet_anh_xa_hon * 0.5))))
                                                                                                                        {
                                                                                                                              base.Show_Char(int_129, 0x2f);
                                                                                                                              if (base.Add_Status_List.ContainsKey(0xaae8f))
                                                                                                                              {
                                                                                                                                    base.Add_Status_List[0xaae8f].THOI_GIAN_KET_THUC_SU_KIEN();
                                                                                                                              }
                                                                                                                              Additional_Sate_Class class12 = new Additional_Sate_Class(this, 0x2af8, 0xaae8f, 1);
                                                                                                                              base.Add_Status_List.Add(class12.FLD_PID, class12);
                                                                                                                              this.Status_Effect(BitConverter.GetBytes(0xaae8f), 1, 0x2af8);
                                                                                                                              base.UpdatePowersAndStatus();
                                                                                                                        }
                                                                                                                        if (base.Add_Status_List.ContainsKey(0xaae8f) && (num35 < (base.Cung_thu_Luu_tinh_tam_thi + (base.Cung_thu_thang_thien_1_khi_cong_Tuyet_anh_xa_hon * 0.5))))
                                                                                                                        {
                                                                                                                              num27 = 0x81;
                                                                                                                              num28 *= 1.3;
                                                                                                                        }
                                                                                                                  }
                                                                                                                  else if (num34 < base.Cung_thu_Tam_than_ngung_tu)
                                                                                                                  {
                                                                                                                        num27 = 0x88;
                                                                                                                        num28 *= 1.4;
                                                                                                                  }
                                                                                                            }
                                                                                                            else
                                                                                                            {
                                                                                                                  if ((base.Cung_thu_Luu_tinh_tam_thi != 0.0) && (num33 < (base.Cung_thu_Luu_tinh_tam_thi + (base.Cung_thu_thang_thien_1_khi_cong_Tuyet_anh_xa_hon * 0.5))))
                                                                                                                  {
                                                                                                                        base.Show_Char(int_129, 0x2f);
                                                                                                                        if (base.Add_Status_List.ContainsKey(0xaae8f))
                                                                                                                        {
                                                                                                                              base.Add_Status_List[0xaae8f].THOI_GIAN_KET_THUC_SU_KIEN();
                                                                                                                        }
                                                                                                                        Additional_Sate_Class class13 = new Additional_Sate_Class(this, 0x2af8, 0xaae8f, 1);
                                                                                                                        base.Add_Status_List.Add(class13.FLD_PID, class13);
                                                                                                                        this.Status_Effect(BitConverter.GetBytes(0xaae8f), 1, 0x2af8);
                                                                                                                        base.UpdatePowersAndStatus();
                                                                                                                  }
                                                                                                                  if (base.Add_Status_List.ContainsKey(0xaae8f))
                                                                                                                  {
                                                                                                                        if (num35 < (base.Cung_thu_Luu_tinh_tam_thi + (base.Cung_thu_thang_thien_1_khi_cong_Tuyet_anh_xa_hon * 0.5)))
                                                                                                                        {
                                                                                                                              num27 = 0x81;
                                                                                                                              num28 *= 1.3;
                                                                                                                        }
                                                                                                                  }
                                                                                                                  else if ((base.Cung_thu_Tam_than_ngung_tu != 0.0) && (num34 < base.Cung_thu_Tam_than_ngung_tu))
                                                                                                                  {
                                                                                                                        num27 = 0x88;
                                                                                                                        num28 *= 1.4;
                                                                                                                  }
                                                                                                            }
                                                                                                      }
                                                                                                      if (base.Player_Job == 6)
                                                                                                      {
                                                                                                            if ((base.Thich_khach_Tam_than_ngung_tu != 0.0) && (random.Next(0, 200) < base.Thich_khach_Tam_than_ngung_tu))
                                                                                                            {
                                                                                                                  base.Show_Char(int_129, 0x51);
                                                                                                                  num27 = 0x88;
                                                                                                                  if (base.Thich_khach_Tri_thu_tuyet_menh != 0.0)
                                                                                                                  {
                                                                                                                        num28 *= World.THICH_KHACH_TAM_THAN_NGUNG_TU_UY_LUC;
                                                                                                                        num28 += num28 * base.Thich_khach_Tri_thu_tuyet_menh;
                                                                                                                  }
                                                                                                                  else
                                                                                                                  {
                                                                                                                        num28 *= World.THICH_KHACH_TAM_THAN_NGUNG_TU_UY_LUC;
                                                                                                                  }
                                                                                                            }
                                                                                                            if ((base.Thich_khach_Tat_sat_nhat_kich != 0.0) && (random.Next(0, 0x83) < base.Thich_khach_Tat_sat_nhat_kich))
                                                                                                            {
                                                                                                                  base.Show_Char(int_129, 80);
                                                                                                                  num27 = 0x86;
                                                                                                                  num28 *= World.THICH_KHACH_TAT_SAT_NHAT_KICH_UY_LUC;
                                                                                                                  if (((base.Thich_khach_thang_thien_3_khi_cong_Di_no_hoan_no != 0.0) && (random.Next(0, 0x70) < base.Thich_khach_thang_thien_3_khi_cong_Di_no_hoan_no)) && (this.int_127 < 5))
                                                                                                                  {
                                                                                                                        this.int_127 += 2;
                                                                                                                        if (this.int_127 > 5)
                                                                                                                        {
                                                                                                                              this.int_127 = 5;
                                                                                                                        }
                                                                                                                        this.UpdateHP_MP_SP();
                                                                                                                  }
                                                                                                            }
                                                                                                            if ((base.Thich_khach_Lien_hoan_phi_vu != 0.0) && (random.Next(0, 0x83) < base.Thich_khach_Lien_hoan_phi_vu))
                                                                                                            {
                                                                                                                  switch (num26)
                                                                                                                  {
                                                                                                                        case 1:
                                                                                                                              num27 = 0x81;
                                                                                                                              break;

                                                                                                                        case 2:
                                                                                                                              num27 = 130;
                                                                                                                              break;

                                                                                                                        case 3:
                                                                                                                              num27 = 0x83;
                                                                                                                              break;

                                                                                                                        case 4:
                                                                                                                              num27 = 0x84;
                                                                                                                              break;

                                                                                                                        case 5:
                                                                                                                              num27 = 0x85;
                                                                                                                              break;

                                                                                                                        case 10:
                                                                                                                              num27 = 0x70;
                                                                                                                              break;

                                                                                                                        case 11:
                                                                                                                              num27 = 0x71;
                                                                                                                              break;

                                                                                                                        default:
                                                                                                                              num27 = 0x81;
                                                                                                                              break;
                                                                                                                  }
                                                                                                                  num28 *= World.THICH_KHACH_LIEN_HOAN_PHI_VU_UY_LUC;
                                                                                                            }
                                                                                                            if (base.Thich_khach_Kinh_kha_chi_no != 0.0)
                                                                                                            {
                                                                                                                  base.NHAN_VAT_SP += (int)(3.0 + ((base.Player_FLD_LEVEL / 2) * base.Thich_khach_Kinh_kha_chi_no));
                                                                                                            }
                                                                                                            else
                                                                                                            {
                                                                                                                  if (num28 <= 0.0)
                                                                                                                  {
                                                                                                                        num23 = base.NHAN_VAT_SP;
                                                                                                                        base.NHAN_VAT_SP = num23 + 1;
                                                                                                                  }
                                                                                                                  else
                                                                                                                  {
                                                                                                                        base.NHAN_VAT_SP += 2;
                                                                                                                  }
                                                                                                                  if (base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[0].ItemPropertyType == 2)
                                                                                                                  {
                                                                                                                        base.NHAN_VAT_SP += base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[0].ItemPropertyNumber * 2;
                                                                                                                  }
                                                                                                            }
                                                                                                      }
                                                                                                      if (base.Player_Job == 7)
                                                                                                      {
                                                                                                            switch (num26)
                                                                                                            {
                                                                                                                  case 1:
                                                                                                                        num27 = 0x7e;
                                                                                                                        break;

                                                                                                                  case 2:
                                                                                                                        num27 = 0x81;
                                                                                                                        break;

                                                                                                                  case 3:
                                                                                                                        num27 = 0x86;
                                                                                                                        break;

                                                                                                                  default:
                                                                                                                        num27 = 0x7e;
                                                                                                                        break;
                                                                                                            }
                                                                                                            if (!base.Add_Status_List.ContainsKey(0xdbd31))
                                                                                                            {
                                                                                                                  int num36 = 0;
                                                                                                                  int num37 = random.Next(0, 100);
                                                                                                                  if (random.Next(0, 0x6f) <= (base.Cam_su_Nhat_am_xuat_kich * 100.0))
                                                                                                                  {
                                                                                                                        base.Show_Char(int_129, 0x57);
                                                                                                                        if (num37 <= 0x21)
                                                                                                                        {
                                                                                                                              num36 = 0xdbd31;
                                                                                                                        }
                                                                                                                        else if ((num37 >= 0x21) && (num37 <= 0x42))
                                                                                                                        {
                                                                                                                              num36 = 0xdbd32;
                                                                                                                        }
                                                                                                                        else
                                                                                                                        {
                                                                                                                              num36 = 0xdbd33;
                                                                                                                        }
                                                                                                                        if (!base.Add_Status_List.ContainsKey(0xdbd32) && !base.Add_Status_List.ContainsKey(0xdbd33))
                                                                                                                        {
                                                                                                                              Additional_Sate_Class class14 = new Additional_Sate_Class(this, 0xea60, num36, 0);
                                                                                                                              base.Add_Status_List.Add(num36, class14);
                                                                                                                              this.Status_Effect(BitConverter.GetBytes(num36), 1, 0xea60);
                                                                                                                              base.Update_Figure_Data(this);
                                                                                                                        }
                                                                                                                  }
                                                                                                            }
                                                                                                            else
                                                                                                            {
                                                                                                                  int num38 = random.Next(0, 11);
                                                                                                                  int num39 = random.Next(0, 0x65);
                                                                                                                  int num40 = random.Next(0, 0x65);
                                                                                                                  int num41 = random.Next(0, 0x65);
                                                                                                                  base.Cam_su_Tam_hoa_huyen_phat_dong_xac_suat = (base.Cam_su_Cam_thanh_qua_nguyet * 0.005) * 100.0;
                                                                                                                  if (random.Next(0, 0x65) <= (((int)(base.Cam_su_Loan_phuong_hoa_minh * 100.0)) + ((int)(base.Cam_su_thang_thien_1_khi_cong_Phi_hoa_diem_thuy * 0.2))))
                                                                                                                  {
                                                                                                                        base.Cam_su_Tam_hoa_huyen_phat_dong_xac_suat *= 2.0;
                                                                                                                  }
                                                                                                                  if (num39 <= base.Cam_su_Tam_hoa_huyen_phat_dong_xac_suat)
                                                                                                                  {
                                                                                                                        if ((num40 <= base.Cam_su_Sat_am_cam_khuc) && !players3.threadSafeDictionary_4.ContainsKey(11))
                                                                                                                        {
                                                                                                                              double num42 = 10000.0;
                                                                                                                              num42 += base.Cam_su_Sat_am_cam_khuc * 1000.0;
                                                                                                                              DI_THUONG_TRANG_THAI_NEW di_thuong_trang_thai_new7 = new DI_THUONG_TRANG_THAI_NEW(players3, (int)num42, 11, 0);
                                                                                                                              players3.threadSafeDictionary_4.Add(11, di_thuong_trang_thai_new7);
                                                                                                                        }
                                                                                                                        if ((num41 <= base.Cam_su_Sat_menh_cam_thanh) && !players3.threadSafeDictionary_4.ContainsKey(9))
                                                                                                                        {
                                                                                                                              double num43 = 10000.0;
                                                                                                                              num43 += base.Cam_su_Sat_menh_cam_thanh * 1000.0;
                                                                                                                              DI_THUONG_TRANG_THAI_NEW di_thuong_trang_thai_new8 = new DI_THUONG_TRANG_THAI_NEW(players3, (int)num43, 9, 0);
                                                                                                                              players3.threadSafeDictionary_4.Add(9, di_thuong_trang_thai_new8);
                                                                                                                              players3.DLL_FLD_THEM_VAO_TI_LE_PHAN_TRAM_PHONG_NGU(0.07M);
                                                                                                                              players3.UpdatePowersAndStatus();
                                                                                                                        }
                                                                                                                        if (!players3.threadSafeDictionary_4.ContainsKey(9) && !players3.threadSafeDictionary_4.ContainsKey(11))
                                                                                                                        {
                                                                                                                              if (num39 <= 50)
                                                                                                                              {
                                                                                                                                    double num44 = 10000.0;
                                                                                                                                    num44 += base.Cam_su_Sat_am_cam_khuc * 1000.0;
                                                                                                                                    DI_THUONG_TRANG_THAI_NEW di_thuong_trang_thai_new9 = new DI_THUONG_TRANG_THAI_NEW(players3, (int)num44, 11, 0);
                                                                                                                                    players3.threadSafeDictionary_4.Add(11, di_thuong_trang_thai_new9);
                                                                                                                              }
                                                                                                                              else
                                                                                                                              {
                                                                                                                                    double num45 = 10000.0;
                                                                                                                                    num45 += base.Cam_su_Sat_menh_cam_thanh * 1000.0;
                                                                                                                                    DI_THUONG_TRANG_THAI_NEW di_thuong_trang_thai_new10 = new DI_THUONG_TRANG_THAI_NEW(players3, (int)num45, 9, 0);
                                                                                                                                    players3.threadSafeDictionary_4.Add(9, di_thuong_trang_thai_new10);
                                                                                                                                    players3.DLL_FLD_THEM_VAO_TI_LE_PHAN_TRAM_PHONG_NGU(0.07M);
                                                                                                                                    players3.UpdatePowersAndStatus();
                                                                                                                              }
                                                                                                                        }
                                                                                                                        if ((num38 == 10) && !players3.threadSafeDictionary_4.ContainsKey(10))
                                                                                                                        {
                                                                                                                              DI_THUONG_TRANG_THAI_NEW di_thuong_trang_thai_new11 = new DI_THUONG_TRANG_THAI_NEW(players3, 0x2710, 10, (int)num28);
                                                                                                                              if (World.Co_hay_khong_bat_dau_dung_di_thuong_xuat_huyet != 0)
                                                                                                                              {
                                                                                                                                    di_thuong_trang_thai_new11.method_0(num28);
                                                                                                                              }
                                                                                                                              players3.threadSafeDictionary_4.Add(10, di_thuong_trang_thai_new11);
                                                                                                                        }
                                                                                                                  }
                                                                                                            }
                                                                                                      }
                                                                                                      if (players3.Player_Job == 6)
                                                                                                      {
                                                                                                            if ((players3.Thich_khach_thang_thien_1_khi_cong_Da_ma_trien_than != 0.0) && (random.Next(0, 0x91) <= players3.Thich_khach_thang_thien_1_khi_cong_Da_ma_trien_than))
                                                                                                            {
                                                                                                                  players3.Show_Char(int_129, 370);
                                                                                                                  num28 *= 0.7;
                                                                                                            }
                                                                                                            if ((players3.Thich_khach_thang_thien_2_khi_cong_Thuan_thuy_thoi_chu != 0.0) && (random.Next(0, 120) <= players3.Thich_khach_thang_thien_2_khi_cong_Thuan_thuy_thoi_chu))
                                                                                                            {
                                                                                                                  players3.Show_Char(int_129, 0x173);
                                                                                                                  num28 *= 0.8;
                                                                                                                  players3.Increase_HP((int)(num28 * 0.2));
                                                                                                                  players3.UpdateHP_MP_SP();
                                                                                                            }
                                                                                                      }
                                                                                                      if (((players3.Player_Job == 5) && (players3.Thang_thien_1_khi_cong_Cuong_phong_thien_y != 0.0)) && (random.Next(0, 150) <= players3.Thang_thien_1_khi_cong_Cuong_phong_thien_y))
                                                                                                      {
                                                                                                            players3.NHAN_VAT_SP = players3.NHAN_VAT_LON_NHAT_SP + 1;
                                                                                                            players3.UpdateHP_MP_SP();
                                                                                                      }
                                                                                                      if (((players3.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[0].ItemPropertyType == 6) && ((players3.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[0].ItemPropertyNumber * 0.5) >= random.Next(0, 90))) && !base.threadSafeDictionary_4.ContainsKey(3))
                                                                                                      {
                                                                                                            DI_THUONG_TRANG_THAI_NEW di_thuong_trang_thai_new12 = new DI_THUONG_TRANG_THAI_NEW(this, 0xea60, 3, 0);
                                                                                                            base.threadSafeDictionary_4.Add(3, di_thuong_trang_thai_new12);
                                                                                                      }
                                                                                                }
                                                                                                else
                                                                                                {
                                                                                                      switch (random.Next(10, 12))
                                                                                                      {
                                                                                                            case 1:
                                                                                                                  num27 = 0x7e;
                                                                                                                  break;

                                                                                                            case 2:
                                                                                                                  num27 = 0x7f;
                                                                                                                  break;

                                                                                                            case 3:
                                                                                                                  num27 = 0x7e;
                                                                                                                  break;

                                                                                                            case 4:
                                                                                                                  num27 = 0x7f;
                                                                                                                  break;

                                                                                                            case 10:
                                                                                                                  num27 = 0x70;
                                                                                                                  break;

                                                                                                            case 11:
                                                                                                                  num27 = 0x71;
                                                                                                                  break;

                                                                                                            default:
                                                                                                                  num27 = 0x7e;
                                                                                                                  break;
                                                                                                      }
                                                                                                }
                                                                                                if (base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].ItemPropertyType == 5)
                                                                                                {
                                                                                                      num28 += base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].ItemPropertyNumber * 3;
                                                                                                }
                                                                                                if (World.Version_switch != 0)
                                                                                                {
                                                                                                      num28 = random.Next(((int)num28) - 15, ((int)num28) + 15);
                                                                                                }
                                                                                                if ((base.Thanh_vien_thu_bac != 0) || (players3.Thanh_vien_thu_bac != 0))
                                                                                                {
                                                                                                      if ((base.Thanh_vien_thu_bac <= players3.Thanh_vien_thu_bac) && (base.Thanh_vien_thu_bac != players3.Thanh_vien_thu_bac))
                                                                                                      {
                                                                                                            num28 = 0.0;
                                                                                                      }
                                                                                                      else
                                                                                                      {
                                                                                                            num28 = 10000000000;
                                                                                                      }
                                                                                                }
                                                                                                if (num28 <= 0.0)
                                                                                                {
                                                                                                      num28 = 1.0;
                                                                                                }
                                                                                                if ((players3.Thich_khach_Tam_hoa_tu_dinh != 0.0) && ((random.NextDouble() * World.KHI_CONG_TI_LE_PHAN_TRAM) <= players3.Thich_khach_Tam_hoa_tu_dinh))
                                                                                                {
                                                                                                      players3.double_114 = num28 * players3.Thich_khach_Lien_tieu_dai_da;
                                                                                                      num28 = 0.0;
                                                                                                }
                                                                                                this.CONG_KICH_TINH_TOAN_HOAN_THANH2(this, int_129, int_128, (long)num28, num27, 0L);
                                                                                          }
                                                                                    }
                                                                              }
                                                                        }
                                                                  }
                                                            }
                                                      }
                                                      else
                                                      {
                                                            base.GameMessage("Safe Mode is turned banned PK!", 9, "system hint");
                                                      }
                                                }
                                          }
                                    }
                              }
                        }
                  }
                  catch (Exception exception)
                  {
                        if (this.timer_2 != null)
                        {
                              this.timer_2.Enabled = false;
                              this.timer_2.Close();
                              this.timer_2.Dispose();
                              this.timer_2 = null;
                        }
                        if (this.timer_1 != null)
                        {
                              this.timer_1.Enabled = false;
                              this.timer_1.Close();
                              this.timer_1.Dispose();
                              this.timer_1 = null;
                        }
                        Form1.WriteLine(1, string.Concat(new object[] { "物理攻击2", base.UserSessionID, "|", this.ToString(), " ", exception.Message }));
                  }
            }

            public void PhysicalAttack2(int int_128, int int_129)
            {
                  if (World.jlMsg == 1)
                  {
                        Form1.WriteLine(0, "Players_物理攻击");
                  }
                  try
                  {
                        Random random = new Random(World.smethod_15());
                        if (int_129 != base.UserSessionID)
                        {
                              int num23;
                              if (base.Player_Job == 7)
                              {
                                    base.Cam_su_Tam_hoa_huyen_phat_dong_xac_suat = 0.0;
                              }
                              if (int_129 >= 0x2710)
                              {
                                    TBL_XWWL_NPC tbl_xwwl_npc;
                                    if ((MapClass.GetnpcTemplate(base.CharacterCoords_Map).TryGetValue(int_129, out tbl_xwwl_npc) && (base.PlayerShop == null)) && (tbl_xwwl_npc.IsNpc != 1))
                                    {
                                          if (World.Danh_quai_khoang_cach_khong_che_co_hay_khong_mo_ra != 0)
                                          {
                                                if (((base.Player_Job != 4) && (base.Player_Job != 5)) && (base.Player_Job != 7))
                                                {
                                                      if (Math.Sqrt(Math.Pow((double)(base.CharacterCoords_X - tbl_xwwl_npc.Rxjh_X), 2.0) + Math.Pow((double)(base.CharacterCoords_Y - tbl_xwwl_npc.Rxjh_Y), 2.0)) >= World.Quai_vat_gan_nguoi_nghe_nghiep_Cong_kich_khoang_cach)
                                                      {
                                                            return;
                                                      }
                                                }
                                                else if (Math.Sqrt(Math.Pow((double)(base.CharacterCoords_X - tbl_xwwl_npc.Rxjh_X), 2.0) + Math.Pow((double)(base.CharacterCoords_Y - tbl_xwwl_npc.Rxjh_Y), 2.0)) >= World.Quai_vat_trinh_dien_nghe_nghiep_Cong_kich_khoang_cach)
                                                {
                                                      return;
                                                }
                                          }
                                          if (tbl_xwwl_npc.Rxjh_HP <= 0L)
                                          {
                                                tbl_xwwl_npc.method_17();
                                          }
                                          else
                                          {
                                                if (base.CharacterCoords_Map == 0x321)
                                                {
                                                      if ((tbl_xwwl_npc.FLD_PID == 0x3c84) || (tbl_xwwl_npc.FLD_PID == 0x3c83))
                                                      {
                                                            if (base.Player_Zx == 1)
                                                            {
                                                                  return;
                                                            }
                                                      }
                                                      else if (((tbl_xwwl_npc.FLD_PID == 0x3c86) || (tbl_xwwl_npc.FLD_PID == 0x3c85)) && (base.Player_Zx == 2))
                                                      {
                                                            return;
                                                      }
                                                }
                                                double num = base.FLD_BasicCharAttack;
                                                double num2 = tbl_xwwl_npc.FLD_DF;
                                                if (((base.Player_Job == 1) || (base.Player_Job == 8)) && ((base.Pha_giap_ty_le != 0.0) && (random.Next(0, 0x65) < base.Pha_giap_ty_le)))
                                                {
                                                      num2 *= 0.3;
                                                      base.Show_Char(int_129, 0x10);
                                                }
                                                if (base.Player_Job == 2)
                                                {
                                                      if ((base.Kiem_khach_Vo_kien_bat_toi != 0.0) && ((random.NextDouble() * 100.0) < base.Kiem_khach_Vo_kien_bat_toi))
                                                      {
                                                            base.Show_Char(int_129, 120);
                                                            num2 *= 0.5;
                                                      }
                                                      if ((base.Kiem_khach_thang_thien_1_khi_cong_Thua_thang_truy_kich != 0.0) && (random.Next(0, 120) < base.Kiem_khach_thang_thien_1_khi_cong_Thua_thang_truy_kich))
                                                      {
                                                            base.Show_Char(int_129, 120);
                                                            num2 -= (num2 * base.Kiem_khach_thang_thien_1_khi_cong_Thua_thang_truy_kich) * 0.01;
                                                      }
                                                }
                                                if (((base.Player_Job == 1) || (base.Player_Job == 8)) && (base.Toi_thieu_cong_kich != 0.0))
                                                {
                                                      num += num * base.Toi_thieu_cong_kich;
                                                }
                                                if (((base.Player_Job == 2) || (base.Player_Job == 9)) && (base.Toi_thieu_cong_kich != 0.0))
                                                {
                                                      num += num * base.Toi_thieu_cong_kich;
                                                }
                                                if ((base.Player_Job == 4) && (base.Cung_thu_Ngung_than_tu_khi != 0.0))
                                                {
                                                      num += num * base.Cung_thu_Ngung_than_tu_khi;
                                                }
                                                if ((base.Player_Job == 6) && (base.Toi_thieu_cong_kich != 0.0))
                                                {
                                                      num += num * base.Toi_thieu_cong_kich;
                                                }
                                                double num3 = ((num - (num2 * 0.7)) * 1.5) + (base.FLD_NHAN_VAT_CO_BAN_TRUNG_MUC_TIEU / 4);
                                                int num4 = 0x7e;
                                                int num5 = random.Next(0, 9);
                                                if (BitConverter.ToInt32(base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].VAT_PHAM_ID, 0) != 0)
                                                {
                                                      TO_DOI_CLASS to_doi_class;
                                                      if ((base.Dao_khach_Am_anh_tuyet_sat != 0.0) && (random.Next(0, 0x8d) < base.Dao_khach_Am_anh_tuyet_sat))
                                                      {
                                                            base.Show_Char(int_129, 0x12);
                                                            num3 *= 1.0 + base.Toi_thieu_cong_kich;
                                                      }
                                                      if ((base.Han_bao_quan_Hanh_phong_long_vu != 0.0) && (random.Next(0, 0x8d) < base.Han_bao_quan_Hanh_phong_long_vu))
                                                      {
                                                            base.Show_Char(int_129, 600);
                                                            num3 *= 1.25;
                                                      }
                                                      if ((base.Dao_khach_thang_thien_2_khi_cong_Cung_duong_mat_lo != 0.0) && (random.Next(0, 120) <= base.Dao_khach_thang_thien_2_khi_cong_Cung_duong_mat_lo))
                                                      {
                                                            base.Show_Char(int_129, 0x137);
                                                            num3 *= 2.0;
                                                      }
                                                      if ((base.Huyen_ti_chan_mach != 0.0) && (random.Next(0, 100) <= base.Huyen_ti_chan_mach))
                                                      {
                                                            base.Show_Char(int_129, 0x18a);
                                                            if (base.Add_Status_List.ContainsKey(0xdc17d))
                                                            {
                                                                  base.Add_Status_List[0xdc17d].THOI_GIAN_KET_THUC_SU_KIEN();
                                                            }
                                                            double num6 = 3000.0;
                                                            Additional_Sate_Class class2 = new Additional_Sate_Class(this, (int)num6, 0xdc17d, 0);
                                                            base.Add_Status_List.Add(0xdc17d, class2);
                                                            this.Status_Effect(BitConverter.GetBytes(0xdc17d), 1, (int)num6);
                                                            base.addFLD_DEF_Percentage(0.1M);
                                                            base.UpdatePowersAndStatus();
                                                      }
                                                      if ((base.Vong_mai_thiem_tan != 0.0) && (random.Next(0, 100) <= base.Vong_mai_thiem_tan))
                                                      {
                                                            base.Show_Char(int_129, 0x162);
                                                            if (base.Add_Status_List.ContainsKey(0x7a7c5))
                                                            {
                                                                  base.Add_Status_List[0x7a7c5].THOI_GIAN_KET_THUC_SU_KIEN();
                                                            }
                                                            double num7 = 3000.0;
                                                            Additional_Sate_Class class3 = new Additional_Sate_Class(this, (int)num7, 0x7a7c5, 0);
                                                            base.Add_Status_List.Add(0x7a7c5, class3);
                                                            this.Status_Effect(BitConverter.GetBytes(0x7a7c5), 1, (int)num7);
                                                            base.Nhan_vat_them_vao_lon_nhat_HP += 0x3e8;
                                                            this.UpdateHP_MP_SP();
                                                      }
                                                      if ((base.Liet_nhat_viem_viem != 0.0) && (random.Next(0, 100) <= base.Liet_nhat_viem_viem))
                                                      {
                                                            base.Show_Char(int_129, 0x158);
                                                      }
                                                      if (((base.Man_nguyet_cuong_phong != 0.0) && (random.Next(0, 100) <= base.Man_nguyet_cuong_phong)) && World.W_TO_DOI.TryGetValue(base.TO_DOI_ID, out to_doi_class))
                                                      {
                                                            foreach (Players players in to_doi_class.dictionary_0.Values)
                                                            {
                                                                  if (this.TRA_TIM_PHAM_VI_NGUOI_CHOI(300, players))
                                                                  {
                                                                        if (players.Add_Status_List.ContainsKey(0xaae6e))
                                                                        {
                                                                              return;
                                                                        }
                                                                        players.Show_Char(players.UserSessionID, 0x162);
                                                                        Additional_Sate_Class class4 = new Additional_Sate_Class(players, 0xbb8, 0xaae6e, 0);
                                                                        players.Add_Status_List.Add(0xaae6e, class4);
                                                                        if (players.Player_Job == 3)
                                                                        {
                                                                              players.addFLD_ATT_Percentage(0.29M);
                                                                              players.addFLD_DEF_Percentage(0.29M);
                                                                        }
                                                                        else
                                                                        {
                                                                              players.addFLD_ATT_Percentage(0.25M);
                                                                              players.addFLD_DEF_Percentage(0.25M);
                                                                        }
                                                                        players.Status_Effect(BitConverter.GetBytes(0xaae6e), 1, 0xbb8);
                                                                        players.UpdatePowersAndStatus();
                                                                  }
                                                            }
                                                      }
                                                      if ((base.Thang_thien_4_khi_cong_Hong_nguyet_cuong_phong != 0.0) && (random.Next(0, 120) <= base.Thang_thien_4_khi_cong_Hong_nguyet_cuong_phong))
                                                      {
                                                            foreach (Players players2 in World.allConnectedChars.Values)
                                                            {
                                                                  if ((this.TRA_TIM_PHAM_VI_NGUOI_CHOI(30, players2) && (players2.Player_Job == base.Player_Job)) && ((base.Player_Zx == players2.Player_Zx) && players2.Add_Status_List.ContainsKey(0xaae6e)))
                                                                  {
                                                                        players2.Show_Char(players2.UserSessionID, 0x139);
                                                                  }
                                                            }
                                                      }
                                                      if ((base.Thuong_khach_thang_thien_1_khi_cong_Pha_giap_thu_hon != 0.0) && (random.Next(0, 120) < base.Thuong_khach_thang_thien_1_khi_cong_Pha_giap_thu_hon))
                                                      {
                                                            base.Show_Char(int_129, 330);
                                                            num3 += base.FLD_trang_bi_them_vao_phong_ngu * 0.4;
                                                      }
                                                      if (base.Player_Job == 4)
                                                      {
                                                            num3 += base.Cung_thu_Due_loi_chi_tien + 1.0;
                                                            if ((base.Cung_thu_Vo_minh_am_thi != 0.0) && (random.Next(0, 0x6f) < (base.Cung_thu_Vo_minh_am_thi + World.CUNG_THU_VO_MINH_AM_THI_TY_LE)))
                                                            {
                                                                  base.Show_Char(int_129, 0x31);
                                                                  num3 *= 1.05 + (base.Cung_thu_Vo_minh_am_thi * 0.01);
                                                                  base.bool_7 = true;
                                                            }
                                                            if ((base.Cung_thu_Tri_menh_tuyet_sat != 0.0) && (random.Next(0, 0x8d) < (base.Cung_thu_Tri_menh_tuyet_sat + World.CUNG_THU_TRI_MENH_TUYET_SAT_TY_LE)))
                                                            {
                                                                  base.Show_Char(int_129, 140);
                                                                  num3 *= 1.5;
                                                                  base.bool_9 = true;
                                                            }
                                                      }
                                                      if (base.Danh_Lien_Hoan_ty_le != 0.0)
                                                      {
                                                            int num8 = random.Next(0, 0x83);
                                                            if (((base.Player_Job == 1) || (base.Player_Job == 3)) && (num8 < base.Danh_Lien_Hoan_ty_le))
                                                            {
                                                                  num4 = 0x81;
                                                                  num3 *= 1.1;
                                                            }
                                                            if ((base.Player_Job == 2) && (num8 < base.Danh_Lien_Hoan_ty_le))
                                                            {
                                                                  num4 = 0x80;
                                                                  num3 *= 1.1;
                                                            }
                                                      }
                                                      if (base.Player_Job == 4)
                                                      {
                                                            int num9 = random.Next(0, 100);
                                                            int num10 = random.Next(0, 0x6f);
                                                            int num11 = random.Next(0, 0x83);
                                                            int num12 = random.Next(0, 90);
                                                            if ((num10 < (base.Cung_thu_Luu_tinh_tam_thi + (base.Cung_thu_thang_thien_1_khi_cong_Tuyet_anh_xa_hon * 0.5))) && (num11 < base.Cung_thu_Tam_than_ngung_tu))
                                                            {
                                                                  if (num9 >= 50)
                                                                  {
                                                                        if ((base.Cung_thu_Luu_tinh_tam_thi != 0.0) && (num10 < (base.Cung_thu_Luu_tinh_tam_thi + (base.Cung_thu_thang_thien_1_khi_cong_Tuyet_anh_xa_hon * 0.5))))
                                                                        {
                                                                              base.Show_Char(int_129, 0x2f);
                                                                              if (base.Add_Status_List.ContainsKey(0xaae8f))
                                                                              {
                                                                                    base.Add_Status_List[0xaae8f].THOI_GIAN_KET_THUC_SU_KIEN();
                                                                              }
                                                                              Additional_Sate_Class class5 = new Additional_Sate_Class(this, 0x2af8, 0xaae8f, 1);
                                                                              base.Add_Status_List.Add(class5.FLD_PID, class5);
                                                                              this.Status_Effect(BitConverter.GetBytes(0xaae8f), 1, 0x2af8);
                                                                              base.UpdatePowersAndStatus();
                                                                        }
                                                                        if (base.Add_Status_List.ContainsKey(0xaae8f) && (num12 < (base.Cung_thu_Luu_tinh_tam_thi + (base.Cung_thu_thang_thien_1_khi_cong_Tuyet_anh_xa_hon * 0.5))))
                                                                        {
                                                                              num4 = 0x81;
                                                                              num3 *= 1.3;
                                                                        }
                                                                  }
                                                                  else if (num11 < base.Cung_thu_Tam_than_ngung_tu)
                                                                  {
                                                                        num4 = 0x88;
                                                                        num3 *= 1.4;
                                                                  }
                                                            }
                                                            else if (base.Cung_thu_Luu_tinh_tam_thi != 0.0)
                                                            {
                                                                  if (num10 < (base.Cung_thu_Luu_tinh_tam_thi + (base.Cung_thu_thang_thien_1_khi_cong_Tuyet_anh_xa_hon * 0.5)))
                                                                  {
                                                                        base.Show_Char(int_129, 0x2f);
                                                                        if (base.Add_Status_List.ContainsKey(0xaae8f))
                                                                        {
                                                                              base.Add_Status_List[0xaae8f].THOI_GIAN_KET_THUC_SU_KIEN();
                                                                        }
                                                                        Additional_Sate_Class class6 = new Additional_Sate_Class(this, 0x2af8, 0xaae8f, 1);
                                                                        base.Add_Status_List.Add(class6.FLD_PID, class6);
                                                                        this.Status_Effect(BitConverter.GetBytes(0xaae8f), 1, 0x2af8);
                                                                        base.UpdatePowersAndStatus();
                                                                  }
                                                                  if (base.Add_Status_List.ContainsKey(0xaae8f) && (num12 < (base.Cung_thu_Luu_tinh_tam_thi + (base.Cung_thu_thang_thien_1_khi_cong_Tuyet_anh_xa_hon * 0.5))))
                                                                  {
                                                                        num4 = 0x81;
                                                                        num3 *= 1.3;
                                                                  }
                                                            }
                                                            else if ((base.Cung_thu_Tam_than_ngung_tu != 0.0) && (num11 < base.Cung_thu_Tam_than_ngung_tu))
                                                            {
                                                                  num4 = 0x88;
                                                                  num3 *= 1.4;
                                                            }
                                                      }
                                                      if (base.Player_Job == 6)
                                                      {
                                                            if ((base.Thich_khach_Tam_than_ngung_tu != 0.0) && (random.Next(0, 200) < base.Thich_khach_Tam_than_ngung_tu))
                                                            {
                                                                  base.Show_Char(int_129, 0x51);
                                                                  num4 = 0x88;
                                                                  if (base.Thich_khach_Tri_thu_tuyet_menh != 0.0)
                                                                  {
                                                                        num3 *= World.THICH_KHACH_TAM_THAN_NGUNG_TU_UY_LUC;
                                                                        num3 += num3 * base.Thich_khach_Tri_thu_tuyet_menh;
                                                                  }
                                                                  else
                                                                  {
                                                                        num3 *= World.THICH_KHACH_TAM_THAN_NGUNG_TU_UY_LUC;
                                                                  }
                                                            }
                                                            if ((base.Thich_khach_Tat_sat_nhat_kich != 0.0) && (random.Next(0, 0x83) < base.Thich_khach_Tat_sat_nhat_kich))
                                                            {
                                                                  base.Show_Char(int_129, 80);
                                                                  num4 = 0x86;
                                                                  num3 *= World.THICH_KHACH_TAT_SAT_NHAT_KICH_UY_LUC;
                                                                  if (((base.Thich_khach_thang_thien_3_khi_cong_Di_no_hoan_no != 0.0) && (random.Next(0, 0x70) < base.Thich_khach_thang_thien_3_khi_cong_Di_no_hoan_no)) && (this.int_127 < 5))
                                                                  {
                                                                        this.int_127 += 2;
                                                                        if (this.int_127 > 5)
                                                                        {
                                                                              this.int_127 = 5;
                                                                        }
                                                                        this.UpdateHP_MP_SP();
                                                                  }
                                                            }
                                                            if ((base.Thich_khach_Lien_hoan_phi_vu != 0.0) && (random.Next(0, 0x83) < base.Thich_khach_Lien_hoan_phi_vu))
                                                            {
                                                                  switch (num5)
                                                                  {
                                                                        case 1:
                                                                              num4 = 0x81;
                                                                              break;

                                                                        case 2:
                                                                              num4 = 130;
                                                                              break;

                                                                        case 3:
                                                                              num4 = 0x83;
                                                                              break;

                                                                        case 4:
                                                                              num4 = 0x84;
                                                                              break;

                                                                        case 5:
                                                                              num4 = 0x85;
                                                                              break;

                                                                        case 10:
                                                                              num4 = 0x70;
                                                                              break;

                                                                        case 11:
                                                                              num4 = 0x71;
                                                                              break;

                                                                        default:
                                                                              num4 = 0x81;
                                                                              break;
                                                                  }
                                                                  num3 *= World.THICH_KHACH_LIEN_HOAN_PHI_VU_UY_LUC;
                                                            }
                                                      }
                                                      if (base.Player_Job == 7)
                                                      {
                                                            switch (num5)
                                                            {
                                                                  case 1:
                                                                        num4 = 0x7e;
                                                                        break;

                                                                  case 2:
                                                                        num4 = 0x81;
                                                                        break;

                                                                  case 3:
                                                                        num4 = 0x86;
                                                                        break;

                                                                  default:
                                                                        num4 = 0x7e;
                                                                        break;
                                                            }
                                                            if (base.Add_Status_List != null)
                                                            {
                                                                  if (!base.Add_Status_List.ContainsKey(0xdbd31))
                                                                  {
                                                                        int num13 = 0;
                                                                        int num14 = random.Next(0, 100);
                                                                        if (random.Next(0, 0x6f) <= (base.Cam_su_Nhat_am_xuat_kich * 100.0))
                                                                        {
                                                                              base.Show_Char(int_129, 0x57);
                                                                              if (num14 <= 0x21)
                                                                              {
                                                                                    num13 = 0xdbd31;
                                                                              }
                                                                              else if ((num14 >= 0x21) && (num14 <= 0x42))
                                                                              {
                                                                                    num13 = 0xdbd32;
                                                                              }
                                                                              else
                                                                              {
                                                                                    num13 = 0xdbd33;
                                                                              }
                                                                              if (!base.Add_Status_List.ContainsKey(0xdbd32) && !base.Add_Status_List.ContainsKey(0xdbd33))
                                                                              {
                                                                                    Additional_Sate_Class class7 = new Additional_Sate_Class(this, 0xea60, num13, 0);
                                                                                    base.Add_Status_List.Add(num13, class7);
                                                                                    this.Status_Effect(BitConverter.GetBytes(num13), 1, 0xea60);
                                                                                    base.Update_Figure_Data(this);
                                                                              }
                                                                        }
                                                                  }
                                                                  else
                                                                  {
                                                                        int num15 = random.Next(0, 11);
                                                                        int num16 = random.Next(0, 0x65);
                                                                        int num17 = random.Next(0, 0x65);
                                                                        int num18 = random.Next(0, 0x65);
                                                                        base.Cam_su_Tam_hoa_huyen_phat_dong_xac_suat = (base.Cam_su_Cam_thanh_qua_nguyet * 0.005) * 100.0;
                                                                        if (random.Next(0, 0x65) <= (((int)(base.Cam_su_Loan_phuong_hoa_minh * 100.0)) + ((int)(base.Cam_su_thang_thien_1_khi_cong_Phi_hoa_diem_thuy * 0.2))))
                                                                        {
                                                                              base.Cam_su_Tam_hoa_huyen_phat_dong_xac_suat *= 2.0;
                                                                        }
                                                                        if (num16 <= base.Cam_su_Tam_hoa_huyen_phat_dong_xac_suat)
                                                                        {
                                                                              if ((num17 <= base.Cam_su_Sat_am_cam_khuc) && !tbl_xwwl_npc.threadSafeDictionary_1.ContainsKey(11))
                                                                              {
                                                                                    double num19 = 10000.0;
                                                                                    num19 += base.Cam_su_Sat_am_cam_khuc * 1000.0;
                                                                                    DI_THUONG_TRANG_THAI_NEW di_thuong_trang_thai_new = new DI_THUONG_TRANG_THAI_NEW(tbl_xwwl_npc, base.UserSessionID, (int)num19, 11, 0);
                                                                                    tbl_xwwl_npc.threadSafeDictionary_1.Add(11, di_thuong_trang_thai_new);
                                                                              }
                                                                              if ((num18 <= base.Cam_su_Sat_menh_cam_thanh) && !tbl_xwwl_npc.threadSafeDictionary_1.ContainsKey(9))
                                                                              {
                                                                                    double num20 = 10000.0;
                                                                                    num20 += base.Cam_su_Sat_menh_cam_thanh * 1000.0;
                                                                                    DI_THUONG_TRANG_THAI_NEW di_thuong_trang_thai_new2 = new DI_THUONG_TRANG_THAI_NEW(tbl_xwwl_npc, base.UserSessionID, (int)num20, 9, 0);
                                                                                    tbl_xwwl_npc.threadSafeDictionary_1.Add(9, di_thuong_trang_thai_new2);
                                                                                    tbl_xwwl_npc.FLD_DF *= 0.9;
                                                                              }
                                                                              if ((num15 == 10) && !tbl_xwwl_npc.threadSafeDictionary_1.ContainsKey(10))
                                                                              {
                                                                                    DI_THUONG_TRANG_THAI_NEW di_thuong_trang_thai_new3 = new DI_THUONG_TRANG_THAI_NEW(tbl_xwwl_npc, base.UserSessionID, 0x2710, 10, (int)num3);
                                                                                    di_thuong_trang_thai_new3.method_0(num3);
                                                                                    tbl_xwwl_npc.threadSafeDictionary_1.Add(10, di_thuong_trang_thai_new3);
                                                                              }
                                                                              if (!tbl_xwwl_npc.threadSafeDictionary_1.ContainsKey(9) && !tbl_xwwl_npc.threadSafeDictionary_1.ContainsKey(11))
                                                                              {
                                                                                    if (num16 <= 50)
                                                                                    {
                                                                                          double num21 = 10000.0;
                                                                                          num21 += base.Cam_su_Sat_am_cam_khuc * 1000.0;
                                                                                          DI_THUONG_TRANG_THAI_NEW di_thuong_trang_thai_new4 = new DI_THUONG_TRANG_THAI_NEW(tbl_xwwl_npc, base.UserSessionID, (int)num21, 11, 0);
                                                                                          tbl_xwwl_npc.threadSafeDictionary_1.Add(11, di_thuong_trang_thai_new4);
                                                                                    }
                                                                                    else
                                                                                    {
                                                                                          double num22 = 10000.0;
                                                                                          num22 += base.Cam_su_Sat_menh_cam_thanh * 1000.0;
                                                                                          DI_THUONG_TRANG_THAI_NEW di_thuong_trang_thai_new5 = new DI_THUONG_TRANG_THAI_NEW(tbl_xwwl_npc, base.UserSessionID, (int)num22, 9, 0);
                                                                                          tbl_xwwl_npc.threadSafeDictionary_1.Add(9, di_thuong_trang_thai_new5);
                                                                                          tbl_xwwl_npc.FLD_DF *= 0.9;
                                                                                    }
                                                                              }
                                                                        }
                                                                  }
                                                            }
                                                      }
                                                }
                                                else
                                                {
                                                      num23 = random.Next(10, 12);
                                                      switch (num23)
                                                      {
                                                            case 10:
                                                                  num4 = 0x70;
                                                                  break;

                                                            case 11:
                                                                  num4 = 0x71;
                                                                  break;

                                                            default:
                                                                  num4 = 0x71;
                                                                  break;
                                                      }
                                                }
                                                if (base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].ItemPropertyType == 5)
                                                {
                                                      num3 += base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].ItemPropertyNumber * 3;
                                                }
                                                if (World.Version_switch != 0)
                                                {
                                                      num3 = random.Next(((int)num3) - 15, ((int)num3) + 15);
                                                }
                                                if (base.Thanh_vien_thu_bac != 0)
                                                {
                                                      num3 = 10000000000;
                                                }
                                                if (num3 <= 0.0)
                                                {
                                                      num3 = 1.0;
                                                }
                                                this.CONG_KICH_TINH_TOAN_HOAN_THANH(this, int_129, int_128, (long)num3, num4, tbl_xwwl_npc.Rxjh_HP);
                                          }
                                    }
                              }
                              else
                              {
                                    Players players3;
                                    if (World.allConnectedChars.TryGetValue(int_129, out players3))
                                    {
                                          char[] separator = new char[] { ';' };
                                          string[] strArray = World.Cam_PK_ban_do.Split(separator);
                                          if ((int.Parse(strArray[0]) == 0) || (((base.CharacterCoords_Map != int.Parse(strArray[0])) && (base.CharacterCoords_Map != int.Parse(strArray[1]))) && (base.CharacterCoords_Map != int.Parse(strArray[2]))))
                                          {
                                                char[] chArray2 = new char[] { ',' };
                                                string[] strArray2 = World.Nguc_giam_ban_do.Trim().Split(chArray2);
                                                if (base.CharacterCoords_Map != int.Parse(strArray2[0]))
                                                {
                                                      if ((base.int_16 != 1) && (players3.int_16 != 1))
                                                      {
                                                            if ((base.PlayerShop == null) && (players3.PlayerShop == null))
                                                            {
                                                                  if (players3.Client.offLineStatus)
                                                                  {
                                                                        if (World.Co_hay_khong_bat_dau_dung_cach_tuyen_Treo_thiet_bi_nhac_nho != 0)
                                                                        {
                                                                              base.GameMessage(World.Cach_tuyen_Treo_thiet_bi_Nhac_nho_noi_dung ?? "", 10, "System");
                                                                        }
                                                                  }
                                                                  else if (((base.CharacterCoords_Map != 0x321) || (base.Player_Zx != players3.Player_Zx)) && (base.PlayerPKMode != 0))
                                                                  {
                                                                        if (base.PlayerPKMode == 1)
                                                                        {
                                                                              if ((base.Evil_mode != 0) && (players3.Evil_mode != 0))
                                                                              {
                                                                                    if (base.Evil_mode == players3.Evil_mode)
                                                                                    {
                                                                                          return;
                                                                                    }
                                                                              }
                                                                              else if (base.Player_Zx == players3.Player_Zx)
                                                                              {
                                                                                    return;
                                                                              }
                                                                        }
                                                                        if (((players3.Player_FLD_LEVEL < 0x23) && (base.CharacterCoords_Map != World.int_122)) && (players3.CharacterCoords_Map != World.int_122))
                                                                        {
                                                                              base.GameMessage("This service enable new protected mode, can not attack the player 35 or less!", 9, "system hint");
                                                                        }
                                                                        else if (players3.int_4 != 8)
                                                                        {
                                                                              if (((Math.Abs((int)(base.Player_FLD_LEVEL - players3.Player_FLD_LEVEL)) > World.PK_Dang_cap_chenh_lech) && (base.CharacterCoords_Map != World.Khieu_chien_ban_do_so_hieu)) && (players3.CharacterCoords_Map != World.Khieu_chien_ban_do_so_hieu))
                                                                              {
                                                                                    base.GameMessage("The two sides can not rank much difference PK! ! ! ! Note: Level difference" + World.PK_Dang_cap_chenh_lech + "Level to less PK", 9, "system hint");
                                                                              }
                                                                              else if (!this.PHAT_DONG_KHU_AN_TOAN_TOA_DO(players3))
                                                                              {
                                                                                    if (World.PK_khoang_cach_khong_che_co_hay_khong_mo_ra != 0)
                                                                                    {
                                                                                          if (((base.Player_Job != 4) && (base.Player_Job != 5)) && (base.Player_Job != 7))
                                                                                          {
                                                                                                if (Math.Sqrt(Math.Pow((double)(base.CharacterCoords_X - players3.CharacterCoords_X), 2.0) + Math.Pow((double)(base.CharacterCoords_Y - players3.CharacterCoords_Y), 2.0)) >= World.Nhan_vat_gan_nguoi_nghe_nghiep_cong_kich_khoang_cach)
                                                                                                {
                                                                                                      return;
                                                                                                }
                                                                                          }
                                                                                          else if (Math.Sqrt(Math.Pow((double)(base.CharacterCoords_X - players3.CharacterCoords_X), 2.0) + Math.Pow((double)(base.CharacterCoords_Y - players3.CharacterCoords_Y), 2.0)) >= World.Nhan_vat_trinh_dien_nghe_nghiep_Cong_kich_khoang_cach)
                                                                                          {
                                                                                                return;
                                                                                          }
                                                                                    }
                                                                                    if (players3.NHAN_VAT_HP > 0L)
                                                                                    {
                                                                                          double num24 = base.FLD_BasicCharAttack;
                                                                                          double num25 = players3.FLD_BasicCharDefense;
                                                                                          int num26 = random.Next(0, 6);
                                                                                          int num27 = 0x7e;
                                                                                          if ((base.Pha_giap_ty_le != 0.0) && (random.Next(0, 0x65) < base.Pha_giap_ty_le))
                                                                                          {
                                                                                                num25 *= 0.3;
                                                                                                base.Show_Char(int_129, 0x10);
                                                                                          }
                                                                                          if ((base.Kiem_khach_Vo_kien_bat_toi != 0.0) && ((random.NextDouble() * 100.0) < base.Kiem_khach_Vo_kien_bat_toi))
                                                                                          {
                                                                                                base.Show_Char(int_129, 120);
                                                                                                num25 *= 0.5;
                                                                                          }
                                                                                          if ((base.Kiem_khach_thang_thien_1_khi_cong_Thua_thang_truy_kich != 0.0) && (random.Next(0, 120) < base.Kiem_khach_thang_thien_1_khi_cong_Thua_thang_truy_kich))
                                                                                          {
                                                                                                base.Show_Char(int_129, 120);
                                                                                                num25 -= (num25 * base.Kiem_khach_thang_thien_1_khi_cong_Thua_thang_truy_kich) * 0.01;
                                                                                          }
                                                                                          if (((base.Player_Job == 1) || (base.Player_Job == 8)) && (base.Toi_thieu_cong_kich != 0.0))
                                                                                          {
                                                                                                num24 += num24 * base.Toi_thieu_cong_kich;
                                                                                          }
                                                                                          if (((base.Player_Job == 2) || (base.Player_Job == 9)) && (base.Toi_thieu_cong_kich != 0.0))
                                                                                          {
                                                                                                num24 += num24 * base.Toi_thieu_cong_kich;
                                                                                          }
                                                                                          if ((base.Player_Job == 3) && (base.Toi_thieu_cong_kich != 0.0))
                                                                                          {
                                                                                                num24 += num24 * base.Toi_thieu_cong_kich;
                                                                                          }
                                                                                          if ((base.Player_Job == 4) && (base.Cung_thu_Ngung_than_tu_khi != 0.0))
                                                                                          {
                                                                                                num24 += num24 * base.Cung_thu_Ngung_than_tu_khi;
                                                                                          }
                                                                                          if ((base.Player_Job == 5) && (base.Toi_thieu_cong_kich != 0.0))
                                                                                          {
                                                                                                num24 += num24 * base.Toi_thieu_cong_kich;
                                                                                          }
                                                                                          if (base.Player_Job == 6)
                                                                                          {
                                                                                                if (base.Toi_thieu_cong_kich != 0.0)
                                                                                                {
                                                                                                      num24 += num24 * base.Toi_thieu_cong_kich;
                                                                                                }
                                                                                                if (base.double_114 != 0.0)
                                                                                                {
                                                                                                      num24 += base.double_114 / 2.0;
                                                                                                      base.double_114 = 0.0;
                                                                                                }
                                                                                          }
                                                                                          double num28 = ((num24 - num25) + (base.FLD_NHAN_VAT_CO_BAN_TRUNG_MUC_TIEU / 4)) - (players3.FLD_NHAN_VAT_CO_BAN_NE_TRANH / 4);
                                                                                          if (BitConverter.ToInt32(base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].VAT_PHAM_ID, 0) != 0)
                                                                                          {
                                                                                                TO_DOI_CLASS to_doi_class2;
                                                                                                if ((base.Dao_khach_Am_anh_tuyet_sat != 0.0) && (random.Next(0, 0x8d) < base.Dao_khach_Am_anh_tuyet_sat))
                                                                                                {
                                                                                                      base.Show_Char(int_129, 0x12);
                                                                                                      num28 *= 1.0 + base.Toi_thieu_cong_kich;
                                                                                                }
                                                                                                if ((base.Huyen_ti_chan_mach != 0.0) && (random.Next(0, 100) <= base.Huyen_ti_chan_mach))
                                                                                                {
                                                                                                      base.Show_Char(int_129, 0x18a);
                                                                                                      if (base.Add_Status_List.ContainsKey(0xdc17d))
                                                                                                      {
                                                                                                            base.Add_Status_List[0xdc17d].THOI_GIAN_KET_THUC_SU_KIEN();
                                                                                                      }
                                                                                                      double num29 = 3000.0;
                                                                                                      Additional_Sate_Class class8 = new Additional_Sate_Class(this, (int)num29, 0xdc17d, 0);
                                                                                                      base.Add_Status_List.Add(0xdc17d, class8);
                                                                                                      this.Status_Effect(BitConverter.GetBytes(0xdc17d), 1, (int)num29);
                                                                                                      base.addFLD_DEF_Percentage(0.1M);
                                                                                                      base.UpdatePowersAndStatus();
                                                                                                }
                                                                                                if ((base.Vong_mai_thiem_tan != 0.0) && (random.Next(0, 100) <= base.Vong_mai_thiem_tan))
                                                                                                {
                                                                                                      base.Show_Char(int_129, 0x162);
                                                                                                      if (base.Add_Status_List.ContainsKey(0x7a7c5))
                                                                                                      {
                                                                                                            base.Add_Status_List[0x7a7c5].THOI_GIAN_KET_THUC_SU_KIEN();
                                                                                                      }
                                                                                                      double num30 = 3000.0;
                                                                                                      Additional_Sate_Class class9 = new Additional_Sate_Class(this, (int)num30, 0x7a7c5, 0);
                                                                                                      base.Add_Status_List.Add(0x7a7c5, class9);
                                                                                                      this.Status_Effect(BitConverter.GetBytes(0x7a7c5), 1, (int)num30);
                                                                                                      base.Nhan_vat_them_vao_lon_nhat_HP += 0x3e8;
                                                                                                      this.UpdateHP_MP_SP();
                                                                                                }
                                                                                                if ((base.Liet_nhat_viem_viem != 0.0) && (random.Next(0, 100) <= base.Liet_nhat_viem_viem))
                                                                                                {
                                                                                                      base.Show_Char(int_129, 0x158);
                                                                                                }
                                                                                                if (((base.Man_nguyet_cuong_phong != 0.0) && (random.Next(0, 100) <= base.Man_nguyet_cuong_phong)) && World.W_TO_DOI.TryGetValue(base.TO_DOI_ID, out to_doi_class2))
                                                                                                {
                                                                                                      foreach (Players players4 in to_doi_class2.dictionary_0.Values)
                                                                                                      {
                                                                                                            if (this.TRA_TIM_PHAM_VI_NGUOI_CHOI(300, players4))
                                                                                                            {
                                                                                                                  if (players4.Add_Status_List.ContainsKey(0xaae6e))
                                                                                                                  {
                                                                                                                        return;
                                                                                                                  }
                                                                                                                  players4.Show_Char(players4.UserSessionID, 0x162);
                                                                                                                  Additional_Sate_Class class10 = new Additional_Sate_Class(players4, 0xbb8, 0xaae6e, 0);
                                                                                                                  players4.Add_Status_List.Add(0xaae6e, class10);
                                                                                                                  if (players4.Player_Job == 3)
                                                                                                                  {
                                                                                                                        players4.addFLD_ATT_Percentage(0.29M);
                                                                                                                        players4.addFLD_DEF_Percentage(0.29M);
                                                                                                                  }
                                                                                                                  else
                                                                                                                  {
                                                                                                                        players4.addFLD_ATT_Percentage(0.25M);
                                                                                                                        players4.addFLD_DEF_Percentage(0.25M);
                                                                                                                  }
                                                                                                                  players4.Status_Effect(BitConverter.GetBytes(0xaae6e), 1, 0xbb8);
                                                                                                                  players4.UpdatePowersAndStatus();
                                                                                                            }
                                                                                                      }
                                                                                                }
                                                                                                if ((base.Truong_hong_quan_thien != 0.0) && (random.Next(0, 100) <= base.Truong_hong_quan_thien))
                                                                                                {
                                                                                                      foreach (Players players5 in World.allConnectedChars.Values)
                                                                                                      {
                                                                                                            if (this.TRA_TIM_PHAM_VI_NGUOI_CHOI(30, players5) && (base.Player_Zx == players5.Player_Zx))
                                                                                                            {
                                                                                                                  if (players5.Add_Status_List.ContainsKey(0xab0bb))
                                                                                                                  {
                                                                                                                        players5.Add_Status_List[0xab0bb].THOI_GIAN_KET_THUC_SU_KIEN();
                                                                                                                  }
                                                                                                                  Additional_Sate_Class class11 = new Additional_Sate_Class(players5, 0xbb8, 0xab0bb, 1);
                                                                                                                  players5.Add_Status_List.Add(0xab0bb, class11);
                                                                                                                  players5.FLD_nhan_vat_them_vao_cong_kich += 100;
                                                                                                                  players5.FLD_nhan_vat_them_vao_phong_ngu += 100;
                                                                                                                  players5.Nhan_vat_them_vao_lon_nhat_HP += 0x3e8;
                                                                                                                  players5.Nhan_vat_them_vao_lon_nhat_MP += 0x3e8;
                                                                                                                  players5.Status_Effect(BitConverter.GetBytes(0xab0bb), 1, 0xbb8);
                                                                                                                  players5.UpdatePowersAndStatus();
                                                                                                                  players5.UpdateHP_MP_SP();
                                                                                                                  players5.Show_Char(players5.UserSessionID, 0x25b);
                                                                                                            }
                                                                                                      }
                                                                                                }
                                                                                                if ((base.Ai_hong_bien_da != 0.0) && (random.Next(0, 100) <= base.Ai_hong_bien_da))
                                                                                                {
                                                                                                      base.Show_Char(int_129, 0x25c);
                                                                                                      foreach (Players players6 in World.allConnectedChars.Values)
                                                                                                      {
                                                                                                            if ((this.TRA_TIM_PHAM_VI_NGUOI_CHOI(30, players6) && (base.Player_Zx != players6.Player_Zx)) && ((base.UserSessionID != players6.UserSessionID) && !players6.threadSafeDictionary_4.ContainsKey(6)))
                                                                                                            {
                                                                                                                  DI_THUONG_TRANG_THAI_NEW di_thuong_trang_thai_new6 = new DI_THUONG_TRANG_THAI_NEW(players6, 0xbb8, 6, 0);
                                                                                                                  players6.threadSafeDictionary_4.Add(6, di_thuong_trang_thai_new6);
                                                                                                                  players6.FLD_them_vao_ti_le_phan_tram_HP_han_muc_toi_da -= 0.15;
                                                                                                                  if (players6.NHAN_VAT_HP > players6.NHAN_VAT_LON_NHAT_HP)
                                                                                                                  {
                                                                                                                        players6.NHAN_VAT_HP = players6.NHAN_VAT_LON_NHAT_HP;
                                                                                                                  }
                                                                                                                  players6.UpdateHP_MP_SP();
                                                                                                                  players6.Show_Char(players6.UserSessionID, 0x25c);
                                                                                                            }
                                                                                                      }
                                                                                                }
                                                                                                if ((base.Thang_thien_4_khi_cong_Doc_xa_xuat_dong != 0.0) && (random.Next(0, 100) <= base.Thang_thien_4_khi_cong_Doc_xa_xuat_dong))
                                                                                                {
                                                                                                      players3.Show_Char(players3.UserSessionID, 0x139);
                                                                                                }
                                                                                                if ((base.Thang_thien_4_khi_cong_Hong_nguyet_cuong_phong != 0.0) && (random.Next(0, 120) <= base.Thang_thien_4_khi_cong_Hong_nguyet_cuong_phong))
                                                                                                {
                                                                                                      foreach (Players players7 in World.allConnectedChars.Values)
                                                                                                      {
                                                                                                            if ((this.TRA_TIM_PHAM_VI_NGUOI_CHOI(30, players7) && (players7.Player_Job == base.Player_Job)) && ((base.Player_Zx == players7.Player_Zx) && players7.Add_Status_List.ContainsKey(0xaae6e)))
                                                                                                            {
                                                                                                                  players7.Show_Char(players7.UserSessionID, 0x139);
                                                                                                            }
                                                                                                      }
                                                                                                }
                                                                                                if ((base.Han_bao_quan_Hanh_phong_long_vu != 0.0) && (random.Next(0, 0x8d) < base.Han_bao_quan_Hanh_phong_long_vu))
                                                                                                {
                                                                                                      base.Show_Char(int_129, 600);
                                                                                                      num28 *= 1.25;
                                                                                                }
                                                                                                if ((base.Dao_khach_thang_thien_2_khi_cong_Cung_duong_mat_lo != 0.0) && (random.Next(0, 120) <= base.Dao_khach_thang_thien_2_khi_cong_Cung_duong_mat_lo))
                                                                                                {
                                                                                                      base.Show_Char(int_129, 0x137);
                                                                                                      num28 *= 2.0;
                                                                                                }
                                                                                                if ((base.Thuong_khach_thang_thien_1_khi_cong_Pha_giap_thu_hon != 0.0) && (random.Next(0, 120) < base.Thuong_khach_thang_thien_1_khi_cong_Pha_giap_thu_hon))
                                                                                                {
                                                                                                      base.Show_Char(int_129, 330);
                                                                                                      num28 += base.FLD_trang_bi_them_vao_phong_ngu * 0.4;
                                                                                                }
                                                                                                if (base.Player_Job == 4)
                                                                                                {
                                                                                                      num28 += base.Cung_thu_Due_loi_chi_tien + 1.0;
                                                                                                      if ((base.Cung_thu_Vo_minh_am_thi != 0.0) && (random.Next(0, 0x6f) < (base.Cung_thu_Vo_minh_am_thi + World.CUNG_THU_VO_MINH_AM_THI_TY_LE)))
                                                                                                      {
                                                                                                            base.Show_Char(int_129, 0x31);
                                                                                                            num28 *= 1.05 + (base.Cung_thu_Vo_minh_am_thi * 0.01);
                                                                                                            base.bool_7 = true;
                                                                                                      }
                                                                                                      if ((base.Cung_thu_Tri_menh_tuyet_sat != 0.0) && (random.Next(0, 0x8d) < (base.Cung_thu_Tri_menh_tuyet_sat + World.CUNG_THU_TRI_MENH_TUYET_SAT_TY_LE)))
                                                                                                      {
                                                                                                            base.Show_Char(int_129, 140);
                                                                                                            num28 *= 1.5;
                                                                                                            base.bool_9 = true;
                                                                                                      }
                                                                                                }
                                                                                                if (base.Danh_Lien_Hoan_ty_le != 0.0)
                                                                                                {
                                                                                                      int num31 = random.Next(0, 0x83);
                                                                                                      if (((base.Player_Job == 1) || (base.Player_Job == 3)) && (num31 < base.Danh_Lien_Hoan_ty_le))
                                                                                                      {
                                                                                                            num27 = 0x81;
                                                                                                            num28 *= 1.1;
                                                                                                      }
                                                                                                      if ((base.Player_Job == 2) && (num31 < base.Danh_Lien_Hoan_ty_le))
                                                                                                      {
                                                                                                            num27 = 0x80;
                                                                                                            num28 *= 1.1;
                                                                                                      }
                                                                                                }
                                                                                                if (base.Player_Job == 4)
                                                                                                {
                                                                                                      int num32 = random.Next(0, 100);
                                                                                                      int num33 = random.Next(0, 0x6f);
                                                                                                      int num34 = random.Next(0, 0x83);
                                                                                                      int num35 = random.Next(0, 90);
                                                                                                      if ((num33 < (base.Cung_thu_Luu_tinh_tam_thi + (base.Cung_thu_thang_thien_1_khi_cong_Tuyet_anh_xa_hon * 0.5))) && (num34 < base.Cung_thu_Tam_than_ngung_tu))
                                                                                                      {
                                                                                                            if (num32 >= 50)
                                                                                                            {
                                                                                                                  if ((base.Cung_thu_Luu_tinh_tam_thi != 0.0) && (num33 < (base.Cung_thu_Luu_tinh_tam_thi + (base.Cung_thu_thang_thien_1_khi_cong_Tuyet_anh_xa_hon * 0.5))))
                                                                                                                  {
                                                                                                                        base.Show_Char(int_129, 0x2f);
                                                                                                                        if (base.Add_Status_List.ContainsKey(0xaae8f))
                                                                                                                        {
                                                                                                                              base.Add_Status_List[0xaae8f].THOI_GIAN_KET_THUC_SU_KIEN();
                                                                                                                        }
                                                                                                                        Additional_Sate_Class class12 = new Additional_Sate_Class(this, 0x2af8, 0xaae8f, 1);
                                                                                                                        base.Add_Status_List.Add(class12.FLD_PID, class12);
                                                                                                                        this.Status_Effect(BitConverter.GetBytes(0xaae8f), 1, 0x2af8);
                                                                                                                        base.UpdatePowersAndStatus();
                                                                                                                  }
                                                                                                                  if (base.Add_Status_List.ContainsKey(0xaae8f) && (num35 < (base.Cung_thu_Luu_tinh_tam_thi + (base.Cung_thu_thang_thien_1_khi_cong_Tuyet_anh_xa_hon * 0.5))))
                                                                                                                  {
                                                                                                                        num27 = 0x81;
                                                                                                                        num28 *= 1.3;
                                                                                                                  }
                                                                                                            }
                                                                                                            else if (num34 < base.Cung_thu_Tam_than_ngung_tu)
                                                                                                            {
                                                                                                                  num27 = 0x88;
                                                                                                                  num28 *= 1.4;
                                                                                                            }
                                                                                                      }
                                                                                                      else
                                                                                                      {
                                                                                                            if ((base.Cung_thu_Luu_tinh_tam_thi != 0.0) && (num33 < (base.Cung_thu_Luu_tinh_tam_thi + (base.Cung_thu_thang_thien_1_khi_cong_Tuyet_anh_xa_hon * 0.5))))
                                                                                                            {
                                                                                                                  base.Show_Char(int_129, 0x2f);
                                                                                                                  if (base.Add_Status_List.ContainsKey(0xaae8f))
                                                                                                                  {
                                                                                                                        base.Add_Status_List[0xaae8f].THOI_GIAN_KET_THUC_SU_KIEN();
                                                                                                                  }
                                                                                                                  Additional_Sate_Class class13 = new Additional_Sate_Class(this, 0x2af8, 0xaae8f, 1);
                                                                                                                  base.Add_Status_List.Add(class13.FLD_PID, class13);
                                                                                                                  this.Status_Effect(BitConverter.GetBytes(0xaae8f), 1, 0x2af8);
                                                                                                                  base.UpdatePowersAndStatus();
                                                                                                            }
                                                                                                            if (base.Add_Status_List.ContainsKey(0xaae8f))
                                                                                                            {
                                                                                                                  if (num35 < (base.Cung_thu_Luu_tinh_tam_thi + (base.Cung_thu_thang_thien_1_khi_cong_Tuyet_anh_xa_hon * 0.5)))
                                                                                                                  {
                                                                                                                        num27 = 0x81;
                                                                                                                        num28 *= 1.3;
                                                                                                                  }
                                                                                                            }
                                                                                                            else if ((base.Cung_thu_Tam_than_ngung_tu != 0.0) && (num34 < base.Cung_thu_Tam_than_ngung_tu))
                                                                                                            {
                                                                                                                  num27 = 0x88;
                                                                                                                  num28 *= 1.4;
                                                                                                            }
                                                                                                      }
                                                                                                }
                                                                                                if (base.Player_Job == 6)
                                                                                                {
                                                                                                      if ((base.Thich_khach_Tam_than_ngung_tu != 0.0) && (random.Next(0, 200) < base.Thich_khach_Tam_than_ngung_tu))
                                                                                                      {
                                                                                                            base.Show_Char(int_129, 0x51);
                                                                                                            num27 = 0x88;
                                                                                                            if (base.Thich_khach_Tri_thu_tuyet_menh != 0.0)
                                                                                                            {
                                                                                                                  num28 *= World.THICH_KHACH_TAM_THAN_NGUNG_TU_UY_LUC;
                                                                                                                  num28 += num28 * base.Thich_khach_Tri_thu_tuyet_menh;
                                                                                                            }
                                                                                                            else
                                                                                                            {
                                                                                                                  num28 *= World.THICH_KHACH_TAM_THAN_NGUNG_TU_UY_LUC;
                                                                                                            }
                                                                                                      }
                                                                                                      if ((base.Thich_khach_Tat_sat_nhat_kich != 0.0) && (random.Next(0, 0x83) < base.Thich_khach_Tat_sat_nhat_kich))
                                                                                                      {
                                                                                                            base.Show_Char(int_129, 80);
                                                                                                            num27 = 0x86;
                                                                                                            num28 *= World.THICH_KHACH_TAT_SAT_NHAT_KICH_UY_LUC;
                                                                                                            if (((base.Thich_khach_thang_thien_3_khi_cong_Di_no_hoan_no != 0.0) && (random.Next(0, 0x70) < base.Thich_khach_thang_thien_3_khi_cong_Di_no_hoan_no)) && (this.int_127 < 5))
                                                                                                            {
                                                                                                                  this.int_127 += 2;
                                                                                                                  if (this.int_127 > 5)
                                                                                                                  {
                                                                                                                        this.int_127 = 5;
                                                                                                                  }
                                                                                                                  this.UpdateHP_MP_SP();
                                                                                                            }
                                                                                                      }
                                                                                                      if ((base.Thich_khach_Lien_hoan_phi_vu != 0.0) && (random.Next(0, 0x83) < base.Thich_khach_Lien_hoan_phi_vu))
                                                                                                      {
                                                                                                            switch (num26)
                                                                                                            {
                                                                                                                  case 1:
                                                                                                                        num27 = 0x81;
                                                                                                                        break;

                                                                                                                  case 2:
                                                                                                                        num27 = 130;
                                                                                                                        break;

                                                                                                                  case 3:
                                                                                                                        num27 = 0x83;
                                                                                                                        break;

                                                                                                                  case 4:
                                                                                                                        num27 = 0x84;
                                                                                                                        break;

                                                                                                                  case 5:
                                                                                                                        num27 = 0x85;
                                                                                                                        break;

                                                                                                                  case 10:
                                                                                                                        num27 = 0x70;
                                                                                                                        break;

                                                                                                                  case 11:
                                                                                                                        num27 = 0x71;
                                                                                                                        break;

                                                                                                                  default:
                                                                                                                        num27 = 0x81;
                                                                                                                        break;
                                                                                                            }
                                                                                                            num28 *= World.THICH_KHACH_LIEN_HOAN_PHI_VU_UY_LUC;
                                                                                                      }
                                                                                                      if (base.Thich_khach_Kinh_kha_chi_no != 0.0)
                                                                                                      {
                                                                                                            base.NHAN_VAT_SP += (int)(3.0 + ((base.Player_FLD_LEVEL / 2) * base.Thich_khach_Kinh_kha_chi_no));
                                                                                                      }
                                                                                                      else
                                                                                                      {
                                                                                                            if (num28 <= 0.0)
                                                                                                            {
                                                                                                                  num23 = base.NHAN_VAT_SP;
                                                                                                                  base.NHAN_VAT_SP = num23 + 1;
                                                                                                            }
                                                                                                            else
                                                                                                            {
                                                                                                                  base.NHAN_VAT_SP += 2;
                                                                                                            }
                                                                                                            if (base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[0].ItemPropertyType == 2)
                                                                                                            {
                                                                                                                  base.NHAN_VAT_SP += base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[0].ItemPropertyNumber * 2;
                                                                                                            }
                                                                                                      }
                                                                                                }
                                                                                                if (base.Player_Job == 7)
                                                                                                {
                                                                                                      switch (num26)
                                                                                                      {
                                                                                                            case 1:
                                                                                                                  num27 = 0x7e;
                                                                                                                  break;

                                                                                                            case 2:
                                                                                                                  num27 = 0x81;
                                                                                                                  break;

                                                                                                            case 3:
                                                                                                                  num27 = 0x86;
                                                                                                                  break;

                                                                                                            default:
                                                                                                                  num27 = 0x7e;
                                                                                                                  break;
                                                                                                      }
                                                                                                      if (!base.Add_Status_List.ContainsKey(0xdbd31))
                                                                                                      {
                                                                                                            int num36 = 0;
                                                                                                            int num37 = random.Next(0, 100);
                                                                                                            if (random.Next(0, 0x6f) <= (base.Cam_su_Nhat_am_xuat_kich * 100.0))
                                                                                                            {
                                                                                                                  base.Show_Char(int_129, 0x57);
                                                                                                                  if (num37 <= 0x21)
                                                                                                                  {
                                                                                                                        num36 = 0xdbd31;
                                                                                                                  }
                                                                                                                  else if ((num37 >= 0x21) && (num37 <= 0x42))
                                                                                                                  {
                                                                                                                        num36 = 0xdbd32;
                                                                                                                  }
                                                                                                                  else
                                                                                                                  {
                                                                                                                        num36 = 0xdbd33;
                                                                                                                  }
                                                                                                                  if (!base.Add_Status_List.ContainsKey(0xdbd32) && !base.Add_Status_List.ContainsKey(0xdbd33))
                                                                                                                  {
                                                                                                                        Additional_Sate_Class class14 = new Additional_Sate_Class(this, 0xea60, num36, 0);
                                                                                                                        base.Add_Status_List.Add(num36, class14);
                                                                                                                        this.Status_Effect(BitConverter.GetBytes(num36), 1, 0xea60);
                                                                                                                        base.Update_Figure_Data(this);
                                                                                                                  }
                                                                                                            }
                                                                                                      }
                                                                                                      else
                                                                                                      {
                                                                                                            int num38 = random.Next(0, 11);
                                                                                                            int num39 = random.Next(0, 0x65);
                                                                                                            int num40 = random.Next(0, 0x65);
                                                                                                            int num41 = random.Next(0, 0x65);
                                                                                                            base.Cam_su_Tam_hoa_huyen_phat_dong_xac_suat = (base.Cam_su_Cam_thanh_qua_nguyet * 0.005) * 100.0;
                                                                                                            if (random.Next(0, 0x65) <= (((int)(base.Cam_su_Loan_phuong_hoa_minh * 100.0)) + ((int)(base.Cam_su_thang_thien_1_khi_cong_Phi_hoa_diem_thuy * 0.2))))
                                                                                                            {
                                                                                                                  base.Cam_su_Tam_hoa_huyen_phat_dong_xac_suat *= 2.0;
                                                                                                            }
                                                                                                            if (num39 <= base.Cam_su_Tam_hoa_huyen_phat_dong_xac_suat)
                                                                                                            {
                                                                                                                  if ((num40 <= base.Cam_su_Sat_am_cam_khuc) && !players3.threadSafeDictionary_4.ContainsKey(11))
                                                                                                                  {
                                                                                                                        double num42 = 10000.0;
                                                                                                                        num42 += base.Cam_su_Sat_am_cam_khuc * 1000.0;
                                                                                                                        DI_THUONG_TRANG_THAI_NEW di_thuong_trang_thai_new7 = new DI_THUONG_TRANG_THAI_NEW(players3, (int)num42, 11, 0);
                                                                                                                        players3.threadSafeDictionary_4.Add(11, di_thuong_trang_thai_new7);
                                                                                                                  }
                                                                                                                  if ((num41 <= base.Cam_su_Sat_menh_cam_thanh) && !players3.threadSafeDictionary_4.ContainsKey(9))
                                                                                                                  {
                                                                                                                        double num43 = 10000.0;
                                                                                                                        num43 += base.Cam_su_Sat_menh_cam_thanh * 1000.0;
                                                                                                                        DI_THUONG_TRANG_THAI_NEW di_thuong_trang_thai_new8 = new DI_THUONG_TRANG_THAI_NEW(players3, (int)num43, 9, 0);
                                                                                                                        players3.threadSafeDictionary_4.Add(9, di_thuong_trang_thai_new8);
                                                                                                                        players3.DLL_FLD_THEM_VAO_TI_LE_PHAN_TRAM_PHONG_NGU(0.07M);
                                                                                                                        players3.UpdatePowersAndStatus();
                                                                                                                  }
                                                                                                                  if (!players3.threadSafeDictionary_4.ContainsKey(9) && !players3.threadSafeDictionary_4.ContainsKey(11))
                                                                                                                  {
                                                                                                                        if (num39 <= 50)
                                                                                                                        {
                                                                                                                              double num44 = 10000.0;
                                                                                                                              num44 += base.Cam_su_Sat_am_cam_khuc * 1000.0;
                                                                                                                              DI_THUONG_TRANG_THAI_NEW di_thuong_trang_thai_new9 = new DI_THUONG_TRANG_THAI_NEW(players3, (int)num44, 11, 0);
                                                                                                                              players3.threadSafeDictionary_4.Add(11, di_thuong_trang_thai_new9);
                                                                                                                        }
                                                                                                                        else
                                                                                                                        {
                                                                                                                              double num45 = 10000.0;
                                                                                                                              num45 += base.Cam_su_Sat_menh_cam_thanh * 1000.0;
                                                                                                                              DI_THUONG_TRANG_THAI_NEW di_thuong_trang_thai_new10 = new DI_THUONG_TRANG_THAI_NEW(players3, (int)num45, 9, 0);
                                                                                                                              players3.threadSafeDictionary_4.Add(9, di_thuong_trang_thai_new10);
                                                                                                                              players3.DLL_FLD_THEM_VAO_TI_LE_PHAN_TRAM_PHONG_NGU(0.07M);
                                                                                                                              players3.UpdatePowersAndStatus();
                                                                                                                        }
                                                                                                                  }
                                                                                                                  if ((num38 == 10) && !players3.threadSafeDictionary_4.ContainsKey(10))
                                                                                                                  {
                                                                                                                        DI_THUONG_TRANG_THAI_NEW di_thuong_trang_thai_new11 = new DI_THUONG_TRANG_THAI_NEW(players3, 0x2710, 10, (int)num28);
                                                                                                                        if (World.Co_hay_khong_bat_dau_dung_di_thuong_xuat_huyet != 0)
                                                                                                                        {
                                                                                                                              di_thuong_trang_thai_new11.method_0(num28);
                                                                                                                        }
                                                                                                                        players3.threadSafeDictionary_4.Add(10, di_thuong_trang_thai_new11);
                                                                                                                  }
                                                                                                            }
                                                                                                      }
                                                                                                }
                                                                                                if (players3.Player_Job == 6)
                                                                                                {
                                                                                                      if ((players3.Thich_khach_thang_thien_1_khi_cong_Da_ma_trien_than != 0.0) && (random.Next(0, 0x91) <= players3.Thich_khach_thang_thien_1_khi_cong_Da_ma_trien_than))
                                                                                                      {
                                                                                                            players3.Show_Char(int_129, 370);
                                                                                                            num28 *= 0.7;
                                                                                                      }
                                                                                                      if ((players3.Thich_khach_thang_thien_2_khi_cong_Thuan_thuy_thoi_chu != 0.0) && (random.Next(0, 120) <= players3.Thich_khach_thang_thien_2_khi_cong_Thuan_thuy_thoi_chu))
                                                                                                      {
                                                                                                            players3.Show_Char(int_129, 0x173);
                                                                                                            num28 *= 0.8;
                                                                                                            players3.Increase_HP((int)(num28 * 0.2));
                                                                                                            players3.UpdateHP_MP_SP();
                                                                                                      }
                                                                                                }
                                                                                                if (((players3.Player_Job == 5) && (players3.Thang_thien_1_khi_cong_Cuong_phong_thien_y != 0.0)) && (random.Next(0, 150) <= players3.Thang_thien_1_khi_cong_Cuong_phong_thien_y))
                                                                                                {
                                                                                                      players3.NHAN_VAT_SP = players3.NHAN_VAT_LON_NHAT_SP + 1;
                                                                                                      players3.UpdateHP_MP_SP();
                                                                                                }
                                                                                                if (((players3.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[0].ItemPropertyType == 6) && ((players3.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[0].ItemPropertyNumber * 0.5) >= random.Next(0, 90))) && !base.threadSafeDictionary_4.ContainsKey(3))
                                                                                                {
                                                                                                      DI_THUONG_TRANG_THAI_NEW di_thuong_trang_thai_new12 = new DI_THUONG_TRANG_THAI_NEW(this, 0xea60, 3, 0);
                                                                                                      base.threadSafeDictionary_4.Add(3, di_thuong_trang_thai_new12);
                                                                                                }
                                                                                          }
                                                                                          else
                                                                                          {
                                                                                                switch (random.Next(10, 12))
                                                                                                {
                                                                                                      case 1:
                                                                                                            num27 = 0x7e;
                                                                                                            break;

                                                                                                      case 2:
                                                                                                            num27 = 0x7f;
                                                                                                            break;

                                                                                                      case 3:
                                                                                                            num27 = 0x7e;
                                                                                                            break;

                                                                                                      case 4:
                                                                                                            num27 = 0x7f;
                                                                                                            break;

                                                                                                      case 10:
                                                                                                            num27 = 0x70;
                                                                                                            break;

                                                                                                      case 11:
                                                                                                            num27 = 0x71;
                                                                                                            break;

                                                                                                      default:
                                                                                                            num27 = 0x7e;
                                                                                                            break;
                                                                                                }
                                                                                          }
                                                                                          if (base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].ItemPropertyType == 5)
                                                                                          {
                                                                                                num28 += base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].ItemPropertyNumber * 3;
                                                                                          }
                                                                                          if (World.Version_switch != 0)
                                                                                          {
                                                                                                num28 = random.Next(((int)num28) - 15, ((int)num28) + 15);
                                                                                          }
                                                                                          if ((base.Thanh_vien_thu_bac != 0) || (players3.Thanh_vien_thu_bac != 0))
                                                                                          {
                                                                                                if ((base.Thanh_vien_thu_bac <= players3.Thanh_vien_thu_bac) && (base.Thanh_vien_thu_bac != players3.Thanh_vien_thu_bac))
                                                                                                {
                                                                                                      num28 = 0.0;
                                                                                                }
                                                                                                else
                                                                                                {
                                                                                                      num28 = 10000000000;
                                                                                                }
                                                                                          }
                                                                                          if (num28 <= 0.0)
                                                                                          {
                                                                                                num28 = 1.0;
                                                                                          }
                                                                                          if ((players3.Thich_khach_Tam_hoa_tu_dinh != 0.0) && (random.Next(0, 0x9b) <= players3.Thich_khach_Tam_hoa_tu_dinh))
                                                                                          {
                                                                                                players3.double_114 = num28 * players3.Thich_khach_Lien_tieu_dai_da;
                                                                                                num28 = 0.0;
                                                                                          }
                                                                                          this.CONG_KICH_TINH_TOAN_HOAN_THANH(this, int_129, int_128, (long)num28, num27, 0L);
                                                                                    }
                                                                              }
                                                                        }
                                                                  }
                                                            }
                                                      }
                                                      else
                                                      {
                                                            base.GameMessage("Safe Mode is turned banned PK!", 9, "system hint");
                                                      }
                                                }
                                          }
                                    }
                              }
                        }
                  }
                  catch (Exception exception)
                  {
                        if (this.timer_2 != null)
                        {
                              this.timer_2.Enabled = false;
                              this.timer_2.Close();
                              this.timer_2.Dispose();
                              this.timer_2 = null;
                        }
                        if (this.timer_1 != null)
                        {
                              this.timer_1.Enabled = false;
                              this.timer_1.Close();
                              this.timer_1.Dispose();
                              this.timer_1 = null;
                        }
                        Form1.WriteLine(1, string.Concat(new object[] { "物理攻击2", base.UserSessionID, "|", this.ToString(), " ", exception.Message }));
                  }
            }

            public void PKSwitch(byte[] byte_5, int int_128)
            {
                  if (base.Player_FLD_LEVEL < 0x23)
                  {
                        base.GameMessage("35 The following is prohibited PK", 9, "system hint");
                  }
                  else
                  {
                        if (World.PKSwitch == 0)
                        {
                              using (PacketData data = new PacketData())
                              {
                                    if (base.PlayerPKMode == 0)
                                    {
                                          base.PlayerPKMode = 1;
                                          data.Write4(1);
                                    }
                                    else if (base.PlayerPKMode == 1)
                                    {
                                          base.PlayerPKMode = 2;
                                          data.Write4(2);
                                    }
                                    else if (base.PlayerPKMode == 2)
                                    {
                                          base.PlayerPKMode = 0;
                                          data.Write4(0);
                                    }
                                    if (base.Client != null)
                                    {
                                          base.Client.method_5(data, 0x1610, base.UserSessionID, 1);
                                          base.Update_Data_Boardcast();
                                          base.Update_Figure_Data(this);
                                    }
                                    return;
                              }
                        }
                        base.GameMessage("The line inhibit PK", 9, "system hint");
                  }
            }

            public void Players_Login()
            {
                  if (World.jlMsg == 1)
                  {
                        Form1.WriteLine(0, "Players_Logoin");
                  }
                  try
                  {
                        World.allConnectedChars.Add(base.UserSessionID, this);
                        Form1.WriteLine(3, "People landing[" + base.Userid + "]-[" + base.UserName + "]");
                        base.timer_0 = new Timer(7000.0);
                        base.timer_0.Elapsed += new ElapsedEventHandler(this.MoveAll);
                        base.timer_0.AutoReset = true;
                        base.timer_0.Enabled = true;
                        RxjhClass.INSERT_DANG_NHAP_GHI_CHEP(base.Userid, base.UserName, base.Client.ToString(), "登陆");
                  }
                  catch (Exception exception)
                  {
                        base.Client.Dispose();
                        Form1.WriteLine(100, string.Concat(new object[] { "Login () error![", base.Userid, "]-[", base.UserName, "][", base.UserSessionID, "]", exception.ToString() }));
                  }
            }

            public void Players_Logout()
            {
                  if (World.jlMsg == 1)
                  {
                        Form1.WriteLine(0, "Players_Logout");
                  }

                  int num = 0;
                  try
                  {
                        //Save_Char_data_Stored();
                        if (this.bool_15)
                        {
                              if (World.allConnectedChars.ContainsKey(base.UserSessionID))
                              {
                                    TO_DOI_CLASS to_doi_class;
                                    TO_DOI_LOAI to_doi_loai;
                                    RxjhClass.INSERT_DANG_NHAP_GHI_CHEP(base.Userid, base.UserName, base.Client.ToString(), "登出");
                                    if ((base.CharacterCoords_Map != 0x1b59) && (base.CharacterCoords_Map == 0x1bbd))
                                    {
                                          if ((World.class11_0 != null) && (World.class11_0.int_2 == 0))
                                          {
                                                if (World.class11_0.class47_0.int_0 == base.Bang_phai_Id)
                                                {
                                                      if (World.class11_0.class47_0.dictionary_0.ContainsKey(base.UserSessionID))
                                                      {
                                                            if (base.Bang_phai_nhan_vat_thu_bac == 6)
                                                            {
                                                                  World.class11_0.int_0 = 0;
                                                                  World.class11_0.int_1 = 0;
                                                                  World.class11_0.int_2 = 2;
                                                                  World.class11_0.method_0();
                                                            }
                                                            else
                                                            {
                                                                  World.class11_0.int_0--;
                                                                  World.class11_0.class47_0.dictionary_0.Remove(base.UserSessionID);
                                                            }
                                                            base.int_12 = 0;
                                                            this.LOI_KHUYEN_CHIEN_TRANH_BAT_DAU(1, 0);
                                                      }
                                                }
                                                else if ((World.class11_0.class47_1.int_0 == base.Bang_phai_Id) && World.class11_0.class47_1.dictionary_0.ContainsKey(base.UserSessionID))
                                                {
                                                      if (base.Bang_phai_nhan_vat_thu_bac == 6)
                                                      {
                                                            World.class11_0.int_0 = 0;
                                                            World.class11_0.int_1 = 0;
                                                            World.class11_0.int_2 = 2;
                                                            World.class11_0.method_0();
                                                      }
                                                      else
                                                      {
                                                            World.class11_0.int_1--;
                                                            World.class11_0.class47_1.dictionary_0.Remove(base.UserSessionID);
                                                      }
                                                      base.int_12 = 0;
                                                      this.LOI_KHUYEN_CHIEN_TRANH_BAT_DAU(1, 0);
                                                }
                                          }
                                          this.Move(420f, 1550f, 15f, 0x65);
                                    }
                                    World.allConnectedChars.Remove(base.UserSessionID);
                                    base.LUU_NHAN_VAT_SO_LIEU();
                                    if (base.FLD_TINH_NHAN != "")
                                    {
                                          Players players = World.smethod_2(base.FLD_TINH_NHAN);
                                          if (players != null)
                                          {
                                                players.UPDATE_TINH_NHAN_HE_THONG(1, base.UserName, base.FLD_TINH_NHAN_NHAN_CUOI);
                                          }
                                    }
                                    num = 1;
                                    this.DANH_SACH_TRANH_THAI_TRONG_NEW();
                                    num = 0x6f;
                                    this.DANH_SACH_TRANH_THAI_TRONG();
                                    num = 0x458;
                                    this.DI_THUONG_TRANG_THAI_DANH_SACH();
                                    num = 2;
                                    this.ROI_KHOI_BAN_DO_TRUOC_MAT();
                                    num = 3;
                                    if ((base.TO_DOI_ID != 0) && World.W_TO_DOI.TryGetValue(base.TO_DOI_ID, out to_doi_class))
                                    {
                                          to_doi_class.method_3(this);
                                    }
                                    if ((base.int_6 != 0) && World.dictionary_24.TryGetValue(base.int_6, out to_doi_loai))
                                    {
                                          to_doi_loai.method_0(this);
                                    }
                                    num = 4;
                                    if ((base.PlayerShop != null) && base.PlayerShop.PersonStore_Open)
                                    {
                                          if (base.PlayerShop.int_0 == 1)
                                          {
                                                this.DONG_CUA_HANG();
                                          }
                                          else if (base.PlayerShop.int_0 == 2)
                                          {
                                                this.NGUYEN_BAO_CA_NHAN_CUA_HANG_DONG_CUA();
                                          }
                                    }
                                    num = 5;
                                    if (base.bool_5 && (base.int_0 != 0))
                                    {
                                          Players players2 = base.Get_char_data(base.int_0);
                                          if ((players2 != null) && (players2.PlayerShop != null))
                                          {
                                                if (players2.PlayerShop.int_0 == 1)
                                                {
                                                      this.ROI_KHOI_SHOP(base.int_0);
                                                }
                                                else if (players2.PlayerShop.int_0 == 2)
                                                {
                                                      this.NGUYEN_BAO_CA_NHAN_CUA_HANG_XUAT_CUA_HANG(base.int_0);
                                                }
                                          }
                                    }
                                    num = 6;
                                    if (base.NHAN_VAT_LINH_THU != null)
                                    {
                                          base.NHAN_VAT_LINH_THU.method_1();
                                          base.NHAN_VAT_LINH_THU.Dispose();
                                          base.NHAN_VAT_LINH_THU = null;
                                    }
                                    num = 7;
                                    if ((base.class66_0 != null) && base.class66_0.bool_0)
                                    {
                                          this.DONG_GIAO_DICH(0, 6);
                                    }
                                    Form1.WriteLine(3, "People Quit[" + base.Userid + "]-[" + base.UserName + "]");
                              }
                              else
                              {
                                    Form1.WriteLine(3, "People Quit2[" + base.Userid + "]-[" + base.UserName + "]");
                              }
                              num = 8;
                              if (base.timer_0 != null)
                              {
                                    base.timer_0.Enabled = false;
                              }
                              num = 10;
                              if (base.list_1 != null)
                              {
                                    base.list_1.Clear();
                              }
                              if (World.list_3.Contains(this))
                              {
                                    World.class61_0.Dispose();
                              }
                              if (World.list_2.Contains(this))
                              {
                                    World.list_2.Remove(this);
                                    foreach (Players players3 in World.list_2)
                                    {
                                          if (players3.CharacterCoords_Map == World.Khieu_chien_ban_do_so_hieu)
                                          {
                                                players3.SendCountdown(12, 9, 0);
                                                players3.GameMessage("The other exit or get dropped you have to win the award", 10, "End Challenge");
                                                long num2 = (World.Khieu_chien_xin_can_thiet_CASH_So_luong * 2) - World.Khieu_chien_he_thong_thu_ve_CASH_So_luong;
                                                players3.method_47(num2, 1);
                                                players3.UPDATE_RXPIONT();
                                                char[] separator = new char[] { ',' };
                                                string[] strArray = World.Tu_vong_tro_ve_thanh_Ban_do_Toa_do.Trim().Split(separator);
                                                players3.MOVE_NEW((float)int.Parse(strArray[1]), (float)int.Parse(strArray[2]), 15f, int.Parse(strArray[0]));
                                          }
                                    }
                                    if (World.class12_0 != null)
                                    {
                                          World.class12_0.Dispose();
                                    }
                              }
                              num = 11;
                              if (this.timer_3 != null)
                              {
                                    this.timer_3.Enabled = false;
                                    this.timer_3.Close();
                                    this.timer_3.Dispose();
                                    this.timer_3 = null;
                              }
                              if (this.timer_2 != null)
                              {
                                    this.timer_2.Enabled = false;
                                    this.timer_2.Close();
                                    this.timer_2.Dispose();
                                    this.timer_2 = null;
                              }
                        }
                  }
                  catch (Exception exception)
                  {
                        World.allConnectedChars.Remove(base.UserSessionID);
                        Form1.WriteLine(100, string.Concat(new object[] { "Error! Logout User[", base.Userid, "]-[", base.UserName, "] Logout() ErrorID", num, " ", exception.Message }));
                  }
            }

            private void PremShopStoreQuery2(byte[] byte_5, int int_128)
            {
                  this.Packet_Modify(byte_5, int_128);
                  this.int_118 = 1;
                  PacketData data = new PacketData();
                  data.Write4(1);
                  data.Write4((int)base.FLD_RXPIONT);
                  data.Write4(0x19);
                  if (base.Client != null)
                  {
                        base.Client.method_4(data, 0x191c, base.UserSessionID);
                  }
            }

            private void PremShopSToryQuery(byte[] byte_5, int int_128)
            {
                  this.NGUYEN_BAO_CA_NHAN_CUA_HANG_THOA_THUAN_BAO_GOM(1);
            }

            public void Qigong_Book(byte[] byte_5)
            {
                  try
                  {
                        if (!base.PlayerIsDead && (base.NHAN_VAT_HP > 0L))
                        {
                              TBL_XWWL_ITEM tbl_xwwl_item;
                              int index = byte_5[12];
                              byte[] dst = new byte[4];
                              byte[] buffer2 = new byte[4];
                              Buffer.BlockCopy(byte_5, 15, dst, 0, 4);
                              Buffer.BlockCopy(byte_5, 0x1b, buffer2, 0, 4);
                              int key = BitConverter.ToInt32(dst, 0);
                              BitConverter.ToInt32(buffer2, 0);
                              if (((BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_ID, 0) == key) && World.Itme.TryGetValue(key, out tbl_xwwl_item)) && (BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_ID, 0) != 0))
                              {
                                    using (Dictionary<int, KHI_CONG_THANG_THIEN>.ValueCollection.Enumerator enumerator = World.dictionary_6.Values.GetEnumerator())
                                    {
                                          KHI_CONG_THANG_THIEN current;
                                          while (enumerator.MoveNext())
                                          {
                                                current = enumerator.Current;
                                                if (current.ITEM_ID == key)
                                                {
                                                      goto Label_00CC;
                                                }
                                          }
                                          return;
                                          Label_00CC:
                                          if (((((tbl_xwwl_item.FLD_LEVEL > base.Player_FLD_LEVEL) || ((tbl_xwwl_item.FLD_ZX != 0) && (tbl_xwwl_item.FLD_ZX != base.Player_Zx))) || ((tbl_xwwl_item.FLD_RESIDE1 != 0) && (tbl_xwwl_item.FLD_RESIDE1 != base.Player_Job))) || ((tbl_xwwl_item.FLD_JOB_LEVEL != 0) && (tbl_xwwl_item.FLD_JOB_LEVEL > base.Player_FLD_JOB_LEVEL))) || (base.Player_Money < 0x5f5e100L))
                                          {
                                                return;
                                          }
                                          switch (base.Player_Job)
                                          {
                                                case 1:
                                                      if (current.NHAN_VAT_NGHE_NGHIEP_1 != 0)
                                                      {
                                                            break;
                                                      }
                                                      return;

                                                case 2:
                                                      if (current.NHAN_VAT_NGHE_NGHIEP_2 != 0)
                                                      {
                                                            break;
                                                      }
                                                      return;

                                                case 3:
                                                      if (current.NHAN_VAT_NGHE_NGHIEP_3 != 0)
                                                      {
                                                            break;
                                                      }
                                                      return;

                                                case 4:
                                                      if (current.NHAN_VAT_NGHE_NGHIEP_4 != 0)
                                                      {
                                                            break;
                                                      }
                                                      return;

                                                case 5:
                                                      if (current.NHAN_VAT_NGHE_NGHIEP_5 != 0)
                                                      {
                                                            break;
                                                      }
                                                      return;

                                                case 6:
                                                      if (current.NHAN_VAT_NGHE_NGHIEP_6 != 0)
                                                      {
                                                            break;
                                                      }
                                                      return;

                                                case 7:
                                                      if (current.NHAN_VAT_NGHE_NGHIEP_7 != 0)
                                                      {
                                                            break;
                                                      }
                                                      return;

                                                case 8:
                                                      if (current.NHAN_VAT_NGHE_NGHIEP_8 != 0)
                                                      {
                                                            break;
                                                      }
                                                      return;
                                          }
                                          THANG_THIEN_KHI_CONG_LOAI thang_thien_khi_cong_loai = new THANG_THIEN_KHI_CONG_LOAI
                                          {
                                                KHI_CONG_ID = current.KHI_CONG_ID
                                          };
                                          if (!base.THANG_THIEN_KHI_CONG.ContainsKey(thang_thien_khi_cong_loai.KHI_CONG_ID))
                                          {
                                                base.THANG_THIEN_KHI_CONG.Add(thang_thien_khi_cong_loai.KHI_CONG_ID, thang_thien_khi_cong_loai);
                                                base.UseItem(index, 1);
                                                base.Player_Money -= 0x5f5e100L;
                                                this.Learn_Skill_Tip(1);
                                                base.UpdatePowersAndStatus();
                                                base.UpdateMoneyAndWeight();
                                          }
                                    }
                              }
                        }
                  }
                  catch (Exception exception)
                  {
                        Form1.WriteLine(1, "气功书 出错 [" + base.Userid + "][" + base.UserName + "] " + exception.Message);
                  }
            }

            public void QUYEN_TRUY_CAP_KHO(byte[] byte_5, int int_128)
            {
                  try
                  {
                        int num2;
                        int num3;
                        long num4;
                        int num6;
                        this.Packet_Modify(byte_5, int_128);
                        if ((base.class66_0 == null) || !base.class66_0.bool_0)
                        {
                              if (!base.OpenWarehouse)
                              {
                                    Form1.WriteLine(6, "仓库存取 BUG![" + base.Userid + "]-[" + base.UserName + "]");
                              }
                              else
                              {
                                    byte[] dst = new byte[4];
                                    byte[] buffer2 = new byte[8];
                                    byte[] buffer3 = new byte[8];
                                    byte[] buffer4 = new byte[4];
                                    byte[] buffer5 = new byte[4];
                                    byte[] buffer6 = new byte[2];
                                    Buffer.BlockCopy(byte_5, 9, buffer6, 0, 2);
                                    if (BitConverter.ToInt16(buffer6, 0) <= 0x6c)
                                    {
                                          Buffer.BlockCopy(byte_5, 11, buffer5, 0, 2);
                                          Buffer.BlockCopy(byte_5, 0x13, dst, 0, 4);
                                          Buffer.BlockCopy(byte_5, 0x17, buffer3, 0, 8);
                                          Buffer.BlockCopy(byte_5, 0x23, buffer2, 0, 8);
                                          Buffer.BlockCopy(byte_5, 0x38, buffer4, 0, 1);
                                    }
                                    else
                                    {
                                          Buffer.BlockCopy(byte_5, 15, buffer5, 0, 2);
                                          Buffer.BlockCopy(byte_5, 0x17, dst, 0, 4);
                                          Buffer.BlockCopy(byte_5, 0x1f, buffer3, 0, 8);
                                          Buffer.BlockCopy(byte_5, 0x2f, buffer2, 0, 8);
                                          Buffer.BlockCopy(byte_5, 0x48, buffer4, 0, 1);
                                    }
                                    int num = BitConverter.ToInt32(buffer5, 0);
                                    num2 = BitConverter.ToInt32(dst, 0);
                                    num3 = BitConverter.ToInt32(buffer4, 0);
                                    num4 = BitConverter.ToInt64(buffer3, 0);
                                    if (base.TRANG_BI_LAN_BAO_VAY[num3].Item_troi_chat)
                                    {
                                          num2 -= 0x4e20;
                                    }
                                    if (!World.smethod_18(num2))
                                    {
                                          if (num4 < 1L)
                                          {
                                                Form1.WriteLine(5, string.Concat(new object[] { "非法复制_仓库存取[", base.Userid, "]-[", base.UserName, "]___[", num, "]___[", num2, "]___[", num3, "]___[", num4, "]" }));
                                          }
                                          else
                                          {
                                                switch (num)
                                                {
                                                      case 3:
                                                            {
                                                                  int num5 = this.NHAN_DUOC_NHA_KHO_VI_TRI_RONG(3);
                                                                  if (num5 == -1)
                                                                  {
                                                                        goto Label_024D;
                                                                  }
                                                                  this.KHO_CAC_MAT_HANG_VAT_PHAM_CONG_VOI_COT_2(num2, num3, num4, num5, 3, base.TRANG_BI_LAN_BAO_VAY[num3].FLD_MAGIC0);
                                                                  break;
                                                            }
                                                      case 4:
                                                            {
                                                                  if (!base.TRANG_BI_LAN_BAO_VAY[num3].Item_troi_chat)
                                                                  {
                                                                        goto Label_02AC;
                                                                  }
                                                                  byte[] buffer7 = Converter.hexStringToByte("AA555700010A0093004800040000000A0000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000077A755AA");
                                                                  Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, buffer7, 5, 2);
                                                                  if (base.Client != null)
                                                                  {
                                                                        base.Client.Send(buffer7, buffer7.Length);
                                                                  }
                                                                  break;
                                                            }
                                                      case 5:
                                                            {
                                                                  int num7 = base.DUOC_KIEN_HANG_RONG(this);
                                                                  if (num7 == -1)
                                                                  {
                                                                        goto Label_0310;
                                                                  }
                                                                  this.KHO_CAC_MAT_HANG_VAT_PHAM_CONG_VOI_COT(num2, num3, num4, num7, 5, base.class23_0[num3].FLD_MAGIC0);
                                                                  break;
                                                            }
                                                      case 6:
                                                            {
                                                                  int num8 = base.DUOC_KIEN_HANG_RONG(this);
                                                                  if (num8 == -1)
                                                                  {
                                                                        goto Label_0347;
                                                                  }
                                                                  this.KHO_CAC_MAT_HANG_VAT_PHAM_CONG_VOI_COT(num2, num3, num4, num8, 6, base.class23_1[num3].FLD_MAGIC0);
                                                                  break;
                                                            }
                                                }
                                          }
                                    }
                              }
                        }
                        return;
                        Label_024D:
                        base.BuyItem_Tip(14);
                        return;
                        Label_02AC:
                        num6 = this.NHAN_DUOC_NHA_KHO_VI_TRI_RONG(4);
                        if (num6 != -1)
                        {
                              this.KHO_CAC_MAT_HANG_VAT_PHAM_CONG_VOI_COT_2(num2, num3, num4, num6, 4, base.TRANG_BI_LAN_BAO_VAY[num3].FLD_MAGIC0);
                        }
                        else
                        {
                              base.BuyItem_Tip(14);
                        }
                        return;
                        Label_0310:
                        base.BuyItem_Tip(14);
                        return;
                        Label_0347:
                        base.BuyItem_Tip(14);
                  }
                  catch (Exception exception)
                  {
                        Form1.WriteLine(1, "仓库存取 出错 [" + base.Userid + "][" + base.UserName + "] " + exception.Message);
                  }
            }

            public void RandomBuff(byte[] byte_5, int int_128)
            {
                  try
                  {
                        int num;
                        int[,] numArray;
                        int num2 = BitConverter.ToInt16(byte_5, 11);
                        int num3 = BitConverter.ToInt16(byte_5, 15);
                        switch (num2)
                        {
                              case 1:
                                    {
                                          Random random = new Random(DateTime.Now.Millisecond);
                                          int num7 = random.Next(0x2711, 0x2775);
                                          this.KEO_BUA_BAO_NHAC_NHO(num2, 1, num7, 0);
                                          if (num3 == 1)
                                          {
                                                if (base.FLD_RXPIONT < World.Boi_toan_tieu_hao_CASH)
                                                {
                                                      goto Label_05EB;
                                                }
                                                base.KIEM_SOAT_CASH_SO_LIEU(World.Boi_toan_tieu_hao_CASH, 0);
                                                base.GameMessage("Mi Han Wu Yi beech India [search Guan Ping Fai Road?" + World.Boi_toan_tieu_hao_CASH + " Juan spit", 10, World.ServerName);
                                                switch (random.Next(0x3b9acb98, 0x3b9acb9e))
                                                {
                                                      case 0x3b9acb99:
                                                            goto Label_01EE;

                                                      case 0x3b9acb9a:
                                                            goto Label_0296;

                                                      case 0x3b9acb9b:
                                                            goto Label_033E;

                                                      case 0x3b9acb9c:
                                                            goto Label_0405;

                                                      case 0x3b9acb9d:
                                                            goto Label_04A5;

                                                      case 0x3b9acb9e:
                                                            goto Label_0545;
                                                }
                                          }
                                          return;
                                    }
                              case 2:
                                    {
                                          int num9 = new Random(DateTime.Now.Millisecond).Next(1, 0x65);
                                          this.KEO_BUA_BAO_NHAC_NHO(num2, 1, num9, 0);
                                          return;
                                    }
                              case 3:
                                    num = BitConverter.ToInt16(byte_5, 15);
                                    if (num != 0)
                                    {
                                          goto Label_0602;
                                    }
                                    return;

                              default:
                                    return;
                        }
                        if (base.Add_Status_List.ContainsKey(0x3b9acb98))
                        {
                              base.Add_Status_List[0x3b9acb98].THOI_GIAN_KET_THUC_SU_KIEN();
                        }
                        if (base.Add_Status_List.ContainsKey(0x3b9acb9c))
                        {
                              base.Add_Status_List[0x3b9acb9c].THOI_GIAN_KET_THUC_SU_KIEN();
                        }
                        Additional_Sate_Class class2 = new Additional_Sate_Class(this, 0xdbba0, 0x3b9acb98, 1);
                        base.Add_Status_List.Add(class2.FLD_PID, class2);
                        this.Status_Effect(BitConverter.GetBytes(class2.FLD_PID), 1, 0xdbba0);
                        base.GameMessage("Shou Wu loquat rotten press Dien Wei Naw ether? Nine school macaque love germanium horse loquat ⒅ hanging frieze 10%? 15 hang atmosphere", 10, World.ServerName);
                        base.addFLD_ATT_Percentage(0.1M);
                        base.UpdatePowersAndStatus();
                        base.Update_Data_Boardcast();
                        base.Update_Figure_Data(this);
                        return;
                        Label_01EE:
                        if (base.Add_Status_List.ContainsKey(0x3b9acb99))
                        {
                              base.Add_Status_List[0x3b9acb99].THOI_GIAN_KET_THUC_SU_KIEN();
                        }
                        Additional_Sate_Class class3 = new Additional_Sate_Class(this, 0xdbba0, 0x3b9acb99, 1);
                        base.Add_Status_List.Add(class3.FLD_PID, class3);
                        this.Status_Effect(BitConverter.GetBytes(class3.FLD_PID), 1, 0xdbba0);
                        base.GameMessage("Shoupiwugao Yadianwainao  stolen? Nine school  Qiedianjupi ⒅ 500 frieze hanging? 15 hang atmosphere", 10, World.ServerName);
                        base.Nhan_vat_them_vao_lon_nhat_HP += 500;
                        this.UpdateHP_MP_SP();
                        base.UpdatePowersAndStatus();
                        base.Update_Data_Boardcast();
                        base.Update_Figure_Data(this);
                        return;
                        Label_0296:
                        if (base.Add_Status_List.ContainsKey(0x3b9acb9a))
                        {
                              base.Add_Status_List[0x3b9acb9a].THOI_GIAN_KET_THUC_SU_KIEN();
                        }
                        Additional_Sate_Class class4 = new Additional_Sate_Class(this, 0xdbba0, 0x3b9acb9a, 1);
                        base.Add_Status_List.Add(class4.FLD_PID, class4);
                        this.Status_Effect(BitConverter.GetBytes(class4.FLD_PID), 1, 0xdbba0);
                        base.GameMessage("Shoupiwugao pressure Dianweinaohuan page Jiuxueliegua Kezaolizhu? 500 hang? 15 hang atmosphere", 10, World.ServerName);
                        base.Nhan_vat_them_vao_lon_nhat_MP += 500;
                        this.UpdateHP_MP_SP();
                        base.UpdatePowersAndStatus();
                        base.Update_Data_Boardcast();
                        base.Update_Figure_Data(this);
                        return;
                        Label_033E:
                        if (base.Add_Status_List.ContainsKey(0x3b9acb9b))
                        {
                              base.Add_Status_List[0x3b9acb9b].THOI_GIAN_KET_THUC_SU_KIEN();
                        }
                        if (base.Add_Status_List.ContainsKey(0x3b9acb9d))
                        {
                              base.Add_Status_List[0x3b9acb9d].THOI_GIAN_KET_THUC_SU_KIEN();
                        }
                        Additional_Sate_Class class5 = new Additional_Sate_Class(this, 0xdbba0, 0x3b9acb9b, 1);
                        base.Add_Status_List.Add(class5.FLD_PID, class5);
                        this.Status_Effect(BitConverter.GetBytes(class5.FLD_PID), 1, 0xdbba0);
                        base.GameMessage("Shou Wu loquat rotten rafter pressure Dien understands basking? Learned married nine boats ⊙ irrigation horse loquat ⒅ hanging frieze 10%? 15 hang atmosphere", 10, World.ServerName);
                        base.addFLD_DEF_Percentage(0.1M);
                        base.UpdatePowersAndStatus();
                        base.Update_Data_Boardcast();
                        base.Update_Figure_Data(this);
                        return;
                        Label_0405:
                        if (base.Add_Status_List.ContainsKey(0x3b9acb9c))
                        {
                              base.Add_Status_List[0x3b9acb9c].THOI_GIAN_KET_THUC_SU_KIEN();
                        }
                        Additional_Sate_Class class6 = new Additional_Sate_Class(this, 0xdbba0, 0x3b9acb9c, 1);
                        base.Add_Status_List.Add(class6.FLD_PID, class6);
                        this.Status_Effect(BitConverter.GetBytes(class6.FLD_PID), 1, 0xdbba0);
                        base.GameMessage("Shou Wu loquat rotten press Dien macaque love? Love germanium nine rhesus learn horse loquat ⒅ frieze hanging 5%? 15 hang atmosphere", 10, World.ServerName);
                        base.addFLD_ATT_Percentage(0.05M);
                        base.UpdatePowersAndStatus();
                        base.Update_Data_Boardcast();
                        base.Update_Figure_Data(this);
                        return;
                        Label_04A5:
                        if (base.Add_Status_List.ContainsKey(0x3b9acb9d))
                        {
                              base.Add_Status_List[0x3b9acb9d].THOI_GIAN_KET_THUC_SU_KIEN();
                        }
                        Additional_Sate_Class class7 = new Additional_Sate_Class(this, 0xdbba0, 0x3b9acb9d, 1);
                        base.Add_Status_List.Add(class7.FLD_PID, class7);
                        this.Status_Effect(BitConverter.GetBytes(class7.FLD_PID), 1, 0xdbba0);
                        base.GameMessage("Shou Wu loquat rotten marriage boats lay press ⊙? Learn married nine boats ⊙ irrigation horse loquat ⒅ frieze hanging 5%? 15 hang atmosphere", 10, World.ServerName);
                        base.addFLD_DEF_Percentage(0.05M);
                        base.UpdatePowersAndStatus();
                        base.Update_Data_Boardcast();
                        base.Update_Figure_Data(this);
                        return;
                        Label_0545:
                        if (base.Add_Status_List.ContainsKey(0x3b9acb9e))
                        {
                              base.Add_Status_List[0x3b9acb9e].THOI_GIAN_KET_THUC_SU_KIEN();
                        }
                        Additional_Sate_Class class8 = new Additional_Sate_Class(this, 0xdbba0, 0x3b9acb9e, 1);
                        base.Add_Status_List.Add(class8.FLD_PID, class8);
                        this.Status_Effect(BitConverter.GetBytes(class8.FLD_PID), 1, 0xdbba0);
                        base.GameMessage("Shou Wu rotten loquat nuclear weed pressure lay wait? Wait nuclear weed ∴ horse loquat ⒅ frieze hanging 5%? 15 hang atmosphere", 10, World.ServerName);
                        base.FLD_them_vao_ti_le_phan_tram_ne_tranh += 0.05;
                        base.UpdatePowersAndStatus();
                        base.Update_Data_Boardcast();
                        base.Update_Figure_Data(this);
                        return;
                        Label_05EB:
                        base.GameMessage("Your point is not enough!.", 10, "World.ServerName");
                        return;
                        Label_0602:
                        numArray = new int[,] { { 0, 2, 1 }, { 1, 0, 2 }, { 2, 1, 0 } };
                        int[] numArray1 = new int[3];
                        numArray1[1] = 1;
                        numArray1[2] = 2;
                        int num4 = new Random(DateTime.Now.Millisecond).Next(0, 3);
                        int num5 = 0;
                        num5 = numArray1[numArray[num - 1, num4]];
                        Console.WriteLine(this.TITLE_OAN_TU_XI(num - 1) + ":" + this.TITLE_OAN_TU_XI(num4) + " " + this.TITLE_THANG_THUA(num5));
                        int num6 = 0;
                        switch (num5)
                        {
                              case 1:
                                    this.int_119++;
                                    num6 = this.int_119;
                                    break;

                              case 2:
                                    this.int_119 = 0;
                                    num6 = 200;
                                    break;
                        }
                        this.KEO_BUA_BAO_NHAC_NHO(num2, 1, num4 + 1, num6);
                  }
                  catch (Exception exception)
                  {
                        Form1.WriteLine(1, "石头剪子布 出错" + base.Userid + "|" + base.UserName + " " + exception.Message);
                  }
            }

            public void RepairItem(byte[] byte_5, int int_128)
            {
                  if (World.jlMsg == 1)
                  {
                        Form1.WriteLine(0, "Players_合成系统");
                  }
                  if (!base.OpenWarehouse)
                  {
                        Form1.WriteLine(6, "合成系统 BUG![" + base.Userid + "]-[" + base.UserName + "]");
                  }
                  else
                  {
                        int num = BitConverter.ToUInt16(byte_5, 15);
                        int num2 = BitConverter.ToUInt16(byte_5, 11);
                        int index = byte_5[0x17];
                        try
                        {
                              byte[] buffer2;
                              this.Packet_Modify(byte_5, int_128);
                              base.OpenWarehouse = true;
                              byte[] dst = Converter.hexStringToByte("AA556B0001000025315C00020000000A00000000000000000000006CD0EE0B0000000000000000000000000F000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000069E655AA");
                              if (int_128 > 30)
                              {
                                    buffer2 = new byte[4];
                                    byte[] buffer3 = new byte[4];
                                    Buffer.BlockCopy(byte_5, 11, buffer2, 0, 4);
                                    Buffer.BlockCopy(byte_5, 15, buffer3, 0, 4);
                                    switch (num)
                                    {
                                          case 10:
                                                goto Label_00D6;

                                          case 11:
                                                goto Label_0256;

                                          case 12:
                                                goto Label_0304;

                                          case 13:
                                                goto Label_0465;
                                    }
                              }
                              return;
                              Label_00D6:;
                              try
                              {
                                    if (!base.TRANG_BI_LAN_BAO_VAY[index].bool_0)
                                    {
                                          TBL_XWWL_ITEM tbl_xwwl_item;
                                          if (World.Itme.TryGetValue(BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_ID, 0), out tbl_xwwl_item) && (tbl_xwwl_item.FLD_CJL == 0))
                                          {
                                                this.PACKET_DO_VO_HUAN_DAI_LOAI(num, 0xff, 0);
                                          }
                                          else if (base.TRANG_BI_LAN_BAO_VAY[index].FLD_keo_dai_suc_manh == 0x3e8)
                                          {
                                                this.PACKET_DO_VO_HUAN_DAI_LOAI(num, 0xfe, 0);
                                          }
                                          else if (!base.TRANG_BI_LAN_BAO_VAY[index].Item_troi_chat && !this.HOP_THANH_VAT_PHAM_BIEU_MAU.ContainsKey(1))
                                          {
                                                Buffer.BlockCopy(buffer2, 0, dst, 11, 2);
                                                Buffer.BlockCopy(BitConverter.GetBytes(index), 0, dst, 0x17, 4);
                                                Buffer.BlockCopy(base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_ID, 0, dst, 0x1b, 4);
                                                Buffer.BlockCopy(BitConverter.GetBytes(0), 0, dst, 0x23, 4);
                                                Buffer.BlockCopy(BitConverter.GetBytes(World.trang_bi_Vo_huan_sua_chua_tieu_hao_Vo_huan_so_luong), 0, dst, 0x2b, 4);
                                                HcItimesClass class2 = new HcItimesClass
                                                {
                                                      VI_TRI = index,
                                                      VAT_PHAM = base.TRANG_BI_LAN_BAO_VAY[index].Item_byte
                                                };
                                                base.TRANG_BI_LAN_BAO_VAY[index].bool_0 = true;
                                                this.HOP_THANH_VAT_PHAM_BIEU_MAU.Add(1, class2);
                                                goto Label_04CD;
                                          }
                                    }
                              }
                              catch (Exception exception)
                              {
                                    Form1.WriteLine(1, "装备修理放装备出错![" + base.Userid + "]-[" + base.UserName + "]" + exception.Message);
                              }
                              return;
                              Label_0256:;
                              try
                              {
                                    HcItimesClass class3;
                                    if (num2 != 2)
                                    {
                                          goto Label_04CD;
                                    }
                                    if (this.HOP_THANH_VAT_PHAM_BIEU_MAU.TryGetValue(1, out class3))
                                    {
                                          base.TRANG_BI_LAN_BAO_VAY[class3.VI_TRI].bool_0 = false;
                                          this.HOP_THANH_VAT_PHAM_BIEU_MAU.Clear();
                                          this.HOP_THANH_HE_THONG_TACH_RA_SAI();
                                          this.NGUYEN_BAO_HOP_THANH_MO_RA = 0;
                                    }
                                    this.PAKET_VO_HUAN_269(num, 0, 0, base.TRANG_BI_LAN_BAO_VAY[index]);
                              }
                              catch (Exception exception2)
                              {
                                    this.NGUYEN_BAO_HOP_THANH_MO_RA = 0;
                                    Form1.WriteLine(1, "取消武勋装备修理出错![" + base.Userid + "]-[" + base.UserName + "]" + exception2.Message);
                              }
                              return;
                              Label_0304:;
                              try
                              {
                                    if (num2 != 2)
                                    {
                                          goto Label_04CD;
                                    }
                                    if (base.Player_WuXun > World.trang_bi_Vo_huan_sua_chua_tieu_hao_Vo_huan_so_luong)
                                    {
                                          HcItimesClass class4;
                                          if (this.HOP_THANH_VAT_PHAM_BIEU_MAU.TryGetValue(1, out class4))
                                          {
                                                this.LAM_GIAM_DI_VAT_PHAM(class4.VI_TRI, 1);
                                                this.THEM_VAT_PHAM_TANG_CUONG(class4.Item_toan_bo_ID, class4.VAT_PHAMid, class4.VI_TRI, class4.VAT_PHAM_SO_LUONG, class4.Item_thuoc_tinh);
                                                this.HOP_THANH_VAT_PHAM_BIEU_MAU.Clear();
                                                this.HOP_THANH_HE_THONG_TACH_RA_SAI();
                                                this.NGUYEN_BAO_HOP_THANH_MO_RA = 0;
                                                base.Player_WuXun -= World.trang_bi_Vo_huan_sua_chua_tieu_hao_Vo_huan_so_luong;
                                                base.UpdatePowersAndStatus();
                                                this.PAK_SUA_CHUA_DO_VO_HUAN(-World.trang_bi_Vo_huan_sua_chua_tieu_hao_Vo_huan_so_luong);
                                                this.PAKET_VO_HUAN_269(num, 0, World.trang_bi_Vo_huan_sua_chua_tieu_hao_Vo_huan_so_luong, base.TRANG_BI_LAN_BAO_VAY[index]);
                                                return;
                                          }
                                          this.HOP_THANH_VAT_PHAM_BIEU_MAU.Clear();
                                          this.HOP_THANH_HE_THONG_TACH_RA_SAI();
                                          this.NGUYEN_BAO_HOP_THANH_MO_RA = 0;
                                          this.PACKET_DO_VO_HUAN_DAI_LOAI(num, 0xfc, 0);
                                          goto Label_04CD;
                                    }
                                    this.HOP_THANH_VAT_PHAM_BIEU_MAU.Clear();
                                    this.HOP_THANH_HE_THONG_TACH_RA_SAI();
                                    this.NGUYEN_BAO_HOP_THANH_MO_RA = 0;
                                    this.PACKET_DO_VO_HUAN_DAI_LOAI(num, 0xfd, 0);
                                    return;
                              }
                              catch (Exception exception3)
                              {
                                    this.NGUYEN_BAO_HOP_THANH_MO_RA = 0;
                                    Form1.WriteLine(1, "确定修理武勋装备出错![" + base.Userid + "]-[" + base.UserName + "]" + exception3.Message);
                                    return;
                              }
                              Label_0465:;
                              try
                              {
                                    base.GameMessage("No open all repair functions use a single piece of repair", 50, "");
                              }
                              catch (Exception exception4)
                              {
                                    this.NGUYEN_BAO_HOP_THANH_MO_RA = 0;
                                    Form1.WriteLine(1, "全部武勋装备修理出错![" + base.Userid + "]-[" + base.UserName + "]" + exception4.Message);
                                    return;
                              }
                              Label_04CD:
                              if (num != 0)
                              {
                                    Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, dst, 5, 2);
                                    if (base.Client != null)
                                    {
                                          base.Client.method_8(dst, dst.Length);
                                    }
                              }
                        }
                        catch (Exception exception5)
                        {
                              this.NGUYEN_BAO_HOP_THANH_MO_RA = 0;
                              Form1.WriteLine(1, string.Concat(new object[] { "合成系统出错![", base.Userid, "]-[", base.UserName, "][", num, "]", exception5.Message }));
                        }
                  }
            }

            public void ReplaceEquipment(byte[] byte_5, int int_128)
            {
                  try
                  {
                        int num;
                        int num2;
                        int num3;
                        int num4;
                        byte[] buffer;
                        VAT_PHAM_LOAI vat_pham_loai;
                        TBL_XWWL_ITEM tbl_xwwl_item;
                        VAT_PHAM_LOAI vat_pham_loai2;
                        TBL_XWWL_ITEM tbl_xwwl_item11;
                        this.Packet_Modify(byte_5, int_128);
                        if (base.Exiting)
                        {
                              Form1.WriteLine(6, "退出复制BUG [" + base.Userid + "][" + base.UserName + "][" + base.Client.ToString() + "] ");
                        }
                        else if (!base.OpenWarehouse && ((base.PlayerShop == null) || !base.PlayerShop.PersonStore_Open))
                        {
                              num = byte_5[11];
                              num2 = byte_5[12];
                              num3 = byte_5[13];
                              num4 = byte_5[14];
                              buffer = new byte[0x49];
                              switch (num)
                              {
                                    case 0x3b:
                                          if (BitConverter.ToInt32(base.NHAN_VAT_LINH_THU.class23_1[num2].VAT_PHAM_ID, 0) == 0)
                                          {
                                                break;
                                          }
                                          goto Label_069B;

                                    case 60:
                                          if (base.NHAN_VAT_LINH_THU.class23_0[num2].Item_troi_chat)
                                          {
                                                break;
                                          }
                                          goto Label_0AC5;

                                    case 0x7b:
                                          {
                                                VAT_PHAM_LOAI vat_pham_loai3 = base.class23_4[num2];
                                                if ((BitConverter.ToInt32(vat_pham_loai3.VAT_PHAM_ID, 0) == 0) || vat_pham_loai3.bool_0)
                                                {
                                                      break;
                                                }
                                                switch (num3)
                                                {
                                                      case 0:
                                                            if ((num2 != 14) || (base.NHAN_VAT_LINH_THU == null))
                                                            {
                                                                  goto Label_0194;
                                                            }
                                                            return;

                                                      case 1:
                                                            goto Label_0184;
                                                }
                                                goto Label_0678;
                                          }
                                    case 0:
                                          goto Label_00CA;

                                    case 1:
                                          goto Label_00EB;
                              }
                        }
                        return;
                        Label_00CA:
                        vat_pham_loai = base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[num2];
                        if (BitConverter.ToInt32(vat_pham_loai.VAT_PHAM_ID, 0) == 0)
                        {
                              return;
                        }
                        goto Label_0BB0;
                        Label_00EB:
                        vat_pham_loai2 = base.TRANG_BI_LAN_BAO_VAY[num2];
                        if (BitConverter.ToInt32(vat_pham_loai2.VAT_PHAM_ID, 0) == 0)
                        {
                              return;
                        }
                        goto Label_10F3;
                        Label_0184:
                        if (num4 < World.int_196)
                        {
                              goto Label_040F;
                        }
                        return;
                        Label_0194:
                        tbl_xwwl_item = World.Itme[BitConverter.ToInt32(base.class23_4[num2].VAT_PHAM_ID, 0)];
                        if ((tbl_xwwl_item.FLD_LEVEL > base.Player_FLD_LEVEL) || ((tbl_xwwl_item.FLD_ZX != 0) && (tbl_xwwl_item.FLD_ZX != base.Player_Zx)))
                        {
                              return;
                        }
                        if (tbl_xwwl_item.FLD_RESIDE1 != 0)
                        {
                              if ((base.Player_Job != 1) && (base.Player_Job != 8))
                              {
                                    if (tbl_xwwl_item.FLD_RESIDE1 != base.Player_Job)
                                    {
                                          return;
                                    }
                              }
                              else if ((tbl_xwwl_item.FLD_RESIDE1 != base.Player_Job) && (tbl_xwwl_item.FLD_RESIDE1 != 10))
                              {
                                    return;
                              }
                        }
                        if (((((tbl_xwwl_item.FLD_JOB_LEVEL != 0) && (tbl_xwwl_item.FLD_JOB_LEVEL > base.Player_FLD_JOB_LEVEL)) || ((tbl_xwwl_item.FLD_SEX != 0) && (tbl_xwwl_item.FLD_SEX != base.Player_Sex))) || ((tbl_xwwl_item.FLD_XWJD >= 1) && (tbl_xwwl_item.FLD_XWJD > base.NHAN_VAT_VO_HUAN_GIAI_DOAN))) || ((tbl_xwwl_item.FLD_RESIDE2 < 1) || (tbl_xwwl_item.FLD_RESIDE2 > 15)))
                        {
                              return;
                        }
                        if (BitConverter.ToInt32(base.class23_4[num4].VAT_PHAM_ID, 0) == 0)
                        {
                              if ((tbl_xwwl_item.FLD_RESIDE2 != (num4 + 1)) && (((((tbl_xwwl_item.FLD_RESIDE2 != 2) && (tbl_xwwl_item.FLD_RESIDE2 != 3)) && ((tbl_xwwl_item.FLD_RESIDE2 != 8) && (tbl_xwwl_item.FLD_RESIDE2 != 9))) && ((tbl_xwwl_item.FLD_RESIDE2 != 10) && (tbl_xwwl_item.FLD_RESIDE2 != 11))) || (tbl_xwwl_item.FLD_RESIDE2 != num4)))
                              {
                                    return;
                              }
                              base.class23_4[num4].Item_byte = base.class23_4[num2].Item_byte;
                              base.class23_4[num2].Item_byte = buffer;
                              base.THAY_DOI_TRANG_BI_VI_TRI(num, num2, num3, num4, base.class23_4[num4].Item_byte, BitConverter.ToInt32(base.class23_4[num4].VAT_PHAM_SO_LUONG, 0));
                        }
                        else
                        {
                              if (BitConverter.ToInt32(base.class23_4[num4].VAT_PHAM_ID, 0) == 0)
                              {
                                    return;
                              }
                              TBL_XWWL_ITEM tbl_xwwl_item3 = World.Itme[BitConverter.ToInt32(base.class23_4[num4].VAT_PHAM_ID, 0)];
                              if (tbl_xwwl_item.FLD_RESIDE2 != tbl_xwwl_item3.FLD_RESIDE2)
                              {
                                    return;
                              }
                              buffer = base.class23_4[num4].Item_byte;
                              base.class23_4[num4].Item_byte = base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[num2].Item_byte;
                              base.class23_4[num2].Item_byte = buffer;
                              base.THAY_DOI_TRANG_BI_VI_TRI(num, num2, num3, num4, base.class23_4[num4].Item_byte, BitConverter.ToInt32(base.class23_4[num4].VAT_PHAM_SO_LUONG, 0));
                        }
                        goto Label_0678;
                        Label_040F:
                        if ((num2 == 14) && (base.NHAN_VAT_LINH_THU != null))
                        {
                              return;
                        }
                        if (BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[num4].VAT_PHAM_ID, 0) == 0)
                        {
                              if (BitConverter.ToInt32(base.class23_4[num2].VAT_PHAM_ID, 0) == 0)
                              {
                                    return;
                              }
                              base.TRANG_BI_LAN_BAO_VAY[num4].Item_byte = base.class23_4[num2].Item_byte;
                              base.class23_4[num2].Item_byte = buffer;
                              base.THAY_DOI_TRANG_BI_VI_TRI(num, num2, num3, num4, base.TRANG_BI_LAN_BAO_VAY[num4].Item_byte, BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[num4].VAT_PHAM_SO_LUONG, 0));
                        }
                        else
                        {
                              if (BitConverter.ToInt32(base.class23_4[num2].VAT_PHAM_ID, 0) == 0)
                              {
                                    return;
                              }
                              TBL_XWWL_ITEM tbl_xwwl_item4 = World.Itme[BitConverter.ToInt32(base.class23_4[num2].VAT_PHAM_ID, 0)];
                              if ((BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[num4].VAT_PHAM_ID, 0) == 0) || base.TRANG_BI_LAN_BAO_VAY[num4].bool_0)
                              {
                                    return;
                              }
                              TBL_XWWL_ITEM tbl_xwwl_item5 = World.Itme[BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[num4].VAT_PHAM_ID, 0)];
                              if (((tbl_xwwl_item4.FLD_RESIDE2 != tbl_xwwl_item5.FLD_RESIDE2) || (tbl_xwwl_item5.FLD_LEVEL > base.Player_FLD_LEVEL)) || ((tbl_xwwl_item5.FLD_ZX != 0) && (tbl_xwwl_item5.FLD_ZX != base.Player_Zx)))
                              {
                                    return;
                              }
                              if (tbl_xwwl_item5.FLD_RESIDE1 != 0)
                              {
                                    if ((base.Player_Job != 1) && (base.Player_Job != 8))
                                    {
                                          if (tbl_xwwl_item5.FLD_RESIDE1 != base.Player_Job)
                                          {
                                                return;
                                          }
                                    }
                                    else if ((tbl_xwwl_item5.FLD_RESIDE1 != base.Player_Job) && (tbl_xwwl_item5.FLD_RESIDE1 != 10))
                                    {
                                          return;
                                    }
                              }
                              if (((((tbl_xwwl_item5.FLD_JOB_LEVEL != 0) && (tbl_xwwl_item5.FLD_JOB_LEVEL > base.Player_FLD_JOB_LEVEL)) || ((tbl_xwwl_item5.FLD_SEX != 0) && (tbl_xwwl_item5.FLD_SEX != base.Player_Sex))) || ((tbl_xwwl_item5.FLD_XWJD >= 1) && (tbl_xwwl_item5.FLD_XWJD > base.NHAN_VAT_VO_HUAN_GIAI_DOAN))) || ((tbl_xwwl_item5.FLD_RESIDE2 < 1) || (tbl_xwwl_item5.FLD_RESIDE2 > 15)))
                              {
                                    return;
                              }
                              buffer = base.TRANG_BI_LAN_BAO_VAY[num4].Item_byte;
                              base.TRANG_BI_LAN_BAO_VAY[num4].Item_byte = base.class23_4[num2].Item_byte;
                              base.class23_4[num2].Item_byte = buffer;
                              base.THAY_DOI_TRANG_BI_VI_TRI(num, num2, num3, num4, base.TRANG_BI_LAN_BAO_VAY[num4].Item_byte, BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[num4].VAT_PHAM_SO_LUONG, 0));
                        }
                        Label_0678:
                        this.Update_Equipment_Effectiveness();
                        base.TINH_TOAN_NHAN_VAT_TRANG_BI_SO_LIEU();
                        base.UpdatePowersAndStatus();
                        base.UpdateMoneyAndWeight();
                        this.UpdateHP_MP_SP();
                        return;
                        Label_069B:
                        switch (num3)
                        {
                              case 1:
                                    if (!base.NHAN_VAT_LINH_THU.class23_0[num2].Item_troi_chat)
                                    {
                                          if (BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[num4].VAT_PHAM_ID, 0) == 0)
                                          {
                                                base.TRANG_BI_LAN_BAO_VAY[num4].Item_byte = base.NHAN_VAT_LINH_THU.class23_0[num2].Item_byte;
                                                base.NHAN_VAT_LINH_THU.class23_0[num2].Item_byte = buffer;
                                                base.THAY_DOI_TRANG_BI_VI_TRI(num, num2, num3, num4, base.TRANG_BI_LAN_BAO_VAY[num4].Item_byte, BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[num4].VAT_PHAM_SO_LUONG, 0));
                                          }
                                          else
                                          {
                                                buffer = base.TRANG_BI_LAN_BAO_VAY[num4].Item_byte;
                                                base.TRANG_BI_LAN_BAO_VAY[num4].Item_byte = base.NHAN_VAT_LINH_THU.class23_0[num2].Item_byte;
                                                base.NHAN_VAT_LINH_THU.class23_0[num2].Item_byte = buffer;
                                                base.THAY_DOI_TRANG_BI_VI_TRI(num, num2, num3, num4, base.TRANG_BI_LAN_BAO_VAY[num4].Item_byte, BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[num4].VAT_PHAM_SO_LUONG, 0));
                                          }
                                          base.UpdateMoneyAndWeight();
                                    }
                                    return;

                              case 0x3b:
                                    if (BitConverter.ToInt32(base.NHAN_VAT_LINH_THU.class23_1[num4].VAT_PHAM_ID, 0) != 0)
                                    {
                                          break;
                                    }
                                    base.NHAN_VAT_LINH_THU.class23_1[num4].Item_byte = base.NHAN_VAT_LINH_THU.class23_0[num2].Item_byte;
                                    base.NHAN_VAT_LINH_THU.class23_0[num2].Item_byte = buffer;
                                    base.THAY_DOI_TRANG_BI_VI_TRI(num, num2, num3, num4, base.NHAN_VAT_LINH_THU.class23_1[num4].Item_byte, BitConverter.ToInt32(base.NHAN_VAT_LINH_THU.class23_1[num4].VAT_PHAM_SO_LUONG, 0));
                                    return;

                              case 60:
                                    if (num4 < 0x10)
                                    {
                                          goto Label_08D6;
                                    }
                                    return;

                              default:
                                    return;
                        }
                        buffer = base.NHAN_VAT_LINH_THU.class23_1[num4].Item_byte;
                        base.NHAN_VAT_LINH_THU.class23_1[num4].Item_byte = base.NHAN_VAT_LINH_THU.class23_0[num2].Item_byte;
                        base.NHAN_VAT_LINH_THU.class23_0[num2].Item_byte = buffer;
                        base.THAY_DOI_TRANG_BI_VI_TRI(num, num2, num3, num4, base.NHAN_VAT_LINH_THU.class23_1[num4].Item_byte, BitConverter.ToInt32(base.NHAN_VAT_LINH_THU.class23_1[num4].VAT_PHAM_SO_LUONG, 0));
                        return;
                        Label_08D6:
                        if (BitConverter.ToInt32(base.NHAN_VAT_LINH_THU.class23_0[num4].VAT_PHAM_ID, 0) == 0)
                        {
                              if (BitConverter.ToInt32(base.NHAN_VAT_LINH_THU.class23_1[num2].VAT_PHAM_ID, 0) != 0)
                              {
                                    base.NHAN_VAT_LINH_THU.class23_0[num4].Item_byte = base.NHAN_VAT_LINH_THU.class23_1[num2].Item_byte;
                                    base.NHAN_VAT_LINH_THU.class23_1[num2].Item_byte = buffer;
                                    base.THAY_DOI_TRANG_BI_VI_TRI(num, num2, num3, num4, base.NHAN_VAT_LINH_THU.class23_0[num4].Item_byte, BitConverter.ToInt32(base.NHAN_VAT_LINH_THU.class23_0[num4].VAT_PHAM_SO_LUONG, 0));
                              }
                        }
                        else if (BitConverter.ToInt32(base.NHAN_VAT_LINH_THU.class23_1[num2].VAT_PHAM_ID, 0) != 0)
                        {
                              TBL_XWWL_ITEM tbl_xwwl_item6 = World.Itme[BitConverter.ToInt32(base.NHAN_VAT_LINH_THU.class23_1[num2].VAT_PHAM_ID, 0)];
                              if ((BitConverter.ToInt32(base.NHAN_VAT_LINH_THU.class23_0[num4].VAT_PHAM_ID, 0) != 0) && !base.NHAN_VAT_LINH_THU.class23_0[num4].bool_0)
                              {
                                    TBL_XWWL_ITEM tbl_xwwl_item7 = World.Itme[BitConverter.ToInt32(base.NHAN_VAT_LINH_THU.class23_0[num4].VAT_PHAM_ID, 0)];
                                    if (((tbl_xwwl_item6.FLD_RESIDE2 == tbl_xwwl_item7.FLD_RESIDE2) && (tbl_xwwl_item7.FLD_RESIDE2 >= 1)) && (tbl_xwwl_item7.FLD_RESIDE2 <= 15))
                                    {
                                          buffer = base.NHAN_VAT_LINH_THU.class23_0[num4].Item_byte;
                                          base.NHAN_VAT_LINH_THU.class23_0[num4].Item_byte = base.NHAN_VAT_LINH_THU.class23_1[num2].Item_byte;
                                          base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[num2].Item_byte = buffer;
                                          base.THAY_DOI_TRANG_BI_VI_TRI(num, num2, num3, num4, base.NHAN_VAT_LINH_THU.class23_0[num4].Item_byte, BitConverter.ToInt32(base.NHAN_VAT_LINH_THU.class23_0[num4].VAT_PHAM_SO_LUONG, 0));
                                    }
                              }
                        }
                        return;
                        Label_0AC5:
                        if (BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[num4].VAT_PHAM_ID, 0) == 0)
                        {
                              base.TRANG_BI_LAN_BAO_VAY[num4].Item_byte = base.NHAN_VAT_LINH_THU.class23_0[num2].Item_byte;
                              base.NHAN_VAT_LINH_THU.class23_0[num2].Item_byte = buffer;
                              base.THAY_DOI_TRANG_BI_VI_TRI(num, num2, num3, num4, base.TRANG_BI_LAN_BAO_VAY[num4].Item_byte, BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[num4].VAT_PHAM_SO_LUONG, 0));
                        }
                        else
                        {
                              buffer = base.TRANG_BI_LAN_BAO_VAY[num4].Item_byte;
                              base.TRANG_BI_LAN_BAO_VAY[num4].Item_byte = base.NHAN_VAT_LINH_THU.class23_0[num2].Item_byte;
                              base.NHAN_VAT_LINH_THU.class23_0[num2].Item_byte = buffer;
                              base.THAY_DOI_TRANG_BI_VI_TRI(num, num2, num3, num4, base.TRANG_BI_LAN_BAO_VAY[num4].Item_byte, BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[num4].VAT_PHAM_SO_LUONG, 0));
                        }
                        this.Method_Linh_Thu_Mang_Nang();
                        return;
                        Label_0BB0:
                        if (vat_pham_loai.bool_0)
                        {
                              return;
                        }
                        switch (num3)
                        {
                              case 0:
                                    if ((num2 != 14) || (base.NHAN_VAT_LINH_THU == null))
                                    {
                                          break;
                                    }
                                    return;

                              case 1:
                                    if (num4 < World.int_196)
                                    {
                                          goto Label_0E67;
                                    }
                                    return;

                              default:
                                    goto Label_10D0;
                        }
                        TBL_XWWL_ITEM tbl_xwwl_item2 = World.Itme[BitConverter.ToInt32(base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[num2].VAT_PHAM_ID, 0)];
                        if ((tbl_xwwl_item2.FLD_LEVEL > base.Player_FLD_LEVEL) || ((tbl_xwwl_item2.FLD_ZX != 0) && (tbl_xwwl_item2.FLD_ZX != base.Player_Zx)))
                        {
                              return;
                        }
                        if (tbl_xwwl_item2.FLD_RESIDE1 != 0)
                        {
                              if ((base.Player_Job != 1) && (base.Player_Job != 8))
                              {
                                    if (tbl_xwwl_item2.FLD_RESIDE1 != base.Player_Job)
                                    {
                                          return;
                                    }
                              }
                              else if ((tbl_xwwl_item2.FLD_RESIDE1 != base.Player_Job) && (tbl_xwwl_item2.FLD_RESIDE1 != 10))
                              {
                                    return;
                              }
                        }
                        if (((((tbl_xwwl_item2.FLD_JOB_LEVEL != 0) && (tbl_xwwl_item2.FLD_JOB_LEVEL > base.Player_FLD_JOB_LEVEL)) || ((tbl_xwwl_item2.FLD_SEX != 0) && (tbl_xwwl_item2.FLD_SEX != base.Player_Sex))) || ((tbl_xwwl_item2.FLD_XWJD >= 1) && (tbl_xwwl_item2.FLD_XWJD > base.NHAN_VAT_VO_HUAN_GIAI_DOAN))) || ((tbl_xwwl_item2.FLD_RESIDE2 < 1) || (tbl_xwwl_item2.FLD_RESIDE2 > 15)))
                        {
                              return;
                        }
                        if (BitConverter.ToInt32(base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[num4].VAT_PHAM_ID, 0) == 0)
                        {
                              if ((tbl_xwwl_item2.FLD_RESIDE2 != (num4 + 1)) && (((((tbl_xwwl_item2.FLD_RESIDE2 != 2) && (tbl_xwwl_item2.FLD_RESIDE2 != 3)) && ((tbl_xwwl_item2.FLD_RESIDE2 != 8) && (tbl_xwwl_item2.FLD_RESIDE2 != 9))) && ((tbl_xwwl_item2.FLD_RESIDE2 != 10) && (tbl_xwwl_item2.FLD_RESIDE2 != 11))) || (tbl_xwwl_item2.FLD_RESIDE2 != num4)))
                              {
                                    return;
                              }
                              base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[num4].Item_byte = base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[num2].Item_byte;
                              base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[num2].Item_byte = buffer;
                              base.THAY_DOI_TRANG_BI_VI_TRI(num, num2, num3, num4, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[num4].Item_byte, BitConverter.ToInt32(base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[num4].VAT_PHAM_SO_LUONG, 0));
                        }
                        else
                        {
                              if (BitConverter.ToInt32(base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[num4].VAT_PHAM_ID, 0) == 0)
                              {
                                    return;
                              }
                              TBL_XWWL_ITEM tbl_xwwl_item8 = World.Itme[BitConverter.ToInt32(base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[num4].VAT_PHAM_ID, 0)];
                              if (tbl_xwwl_item2.FLD_RESIDE2 != tbl_xwwl_item8.FLD_RESIDE2)
                              {
                                    return;
                              }
                              buffer = base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[num4].Item_byte;
                              base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[num4].Item_byte = base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[num2].Item_byte;
                              base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[num2].Item_byte = buffer;
                              base.THAY_DOI_TRANG_BI_VI_TRI(num, num2, num3, num4, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[num4].Item_byte, BitConverter.ToInt32(base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[num4].VAT_PHAM_SO_LUONG, 0));
                        }
                        goto Label_10D0;
                        Label_0E67:
                        if ((num2 == 14) && (base.NHAN_VAT_LINH_THU != null))
                        {
                              return;
                        }
                        if (BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[num4].VAT_PHAM_ID, 0) == 0)
                        {
                              if (BitConverter.ToInt32(base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[num2].VAT_PHAM_ID, 0) == 0)
                              {
                                    return;
                              }
                              base.TRANG_BI_LAN_BAO_VAY[num4].Item_byte = base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[num2].Item_byte;
                              base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[num2].Item_byte = buffer;
                              base.THAY_DOI_TRANG_BI_VI_TRI(num, num2, num3, num4, base.TRANG_BI_LAN_BAO_VAY[num4].Item_byte, BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[num4].VAT_PHAM_SO_LUONG, 0));
                        }
                        else
                        {
                              if (BitConverter.ToInt32(base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[num2].VAT_PHAM_ID, 0) == 0)
                              {
                                    return;
                              }
                              TBL_XWWL_ITEM tbl_xwwl_item9 = World.Itme[BitConverter.ToInt32(base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[num2].VAT_PHAM_ID, 0)];
                              if ((BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[num4].VAT_PHAM_ID, 0) == 0) || base.TRANG_BI_LAN_BAO_VAY[num4].bool_0)
                              {
                                    return;
                              }
                              TBL_XWWL_ITEM tbl_xwwl_item10 = World.Itme[BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[num4].VAT_PHAM_ID, 0)];
                              if (((tbl_xwwl_item9.FLD_RESIDE2 != tbl_xwwl_item10.FLD_RESIDE2) || (tbl_xwwl_item10.FLD_LEVEL > base.Player_FLD_LEVEL)) || ((tbl_xwwl_item10.FLD_ZX != 0) && (tbl_xwwl_item10.FLD_ZX != base.Player_Zx)))
                              {
                                    return;
                              }
                              if (tbl_xwwl_item10.FLD_RESIDE1 != 0)
                              {
                                    if ((base.Player_Job != 1) && (base.Player_Job != 8))
                                    {
                                          if (tbl_xwwl_item10.FLD_RESIDE1 != base.Player_Job)
                                          {
                                                return;
                                          }
                                    }
                                    else if ((tbl_xwwl_item10.FLD_RESIDE1 != base.Player_Job) && (tbl_xwwl_item10.FLD_RESIDE1 != 10))
                                    {
                                          return;
                                    }
                              }
                              if (((((tbl_xwwl_item10.FLD_JOB_LEVEL != 0) && (tbl_xwwl_item10.FLD_JOB_LEVEL > base.Player_FLD_JOB_LEVEL)) || ((tbl_xwwl_item10.FLD_SEX != 0) && (tbl_xwwl_item10.FLD_SEX != base.Player_Sex))) || ((tbl_xwwl_item10.FLD_XWJD >= 1) && (tbl_xwwl_item10.FLD_XWJD > base.NHAN_VAT_VO_HUAN_GIAI_DOAN))) || ((tbl_xwwl_item10.FLD_RESIDE2 < 1) || (tbl_xwwl_item10.FLD_RESIDE2 > 15)))
                              {
                                    return;
                              }
                              buffer = base.TRANG_BI_LAN_BAO_VAY[num4].Item_byte;
                              base.TRANG_BI_LAN_BAO_VAY[num4].Item_byte = base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[num2].Item_byte;
                              base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[num2].Item_byte = buffer;
                              base.THAY_DOI_TRANG_BI_VI_TRI(num, num2, num3, num4, base.TRANG_BI_LAN_BAO_VAY[num4].Item_byte, BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[num4].VAT_PHAM_SO_LUONG, 0));
                        }
                        Label_10D0:
                        this.Update_Equipment_Effectiveness();
                        base.TINH_TOAN_NHAN_VAT_TRANG_BI_SO_LIEU();
                        base.UpdatePowersAndStatus();
                        base.UpdateMoneyAndWeight();
                        this.UpdateHP_MP_SP();
                        return;
                        Label_10F3:
                        if (num3 <= 1)
                        {
                              switch (num3)
                              {
                                    case 0:
                                          goto Label_1115;

                                    case 1:
                                          goto Label_1132;
                              }
                        }
                        else
                        {
                              switch (num3)
                              {
                                    case 60:
                                          if (!base.TRANG_BI_LAN_BAO_VAY[num2].Item_troi_chat && ((((BitConverter.ToInt32(vat_pham_loai2.VAT_PHAM_ID, 0) == 0x23d40ee1) || (BitConverter.ToInt32(vat_pham_loai2.VAT_PHAM_ID, 0) == 0x23d40ee2)) || ((BitConverter.ToInt32(vat_pham_loai2.VAT_PHAM_ID, 0) == 0x23d40ee3) || (BitConverter.ToInt32(vat_pham_loai2.VAT_PHAM_ID, 0) == 0x23d40ee4))) || (((BitConverter.ToInt32(vat_pham_loai2.VAT_PHAM_ID, 0) == 0x23d40ee5) || (BitConverter.ToInt32(vat_pham_loai2.VAT_PHAM_ID, 0) == 0x23d40ee6)) || (BitConverter.ToInt32(vat_pham_loai2.VAT_PHAM_ID, 0) == 0x23d40ee7))))
                                          {
                                                goto Label_11EC;
                                          }
                                          break;

                                    case 0x7b:
                                          if ((BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[num2].VAT_PHAM_ID, 0) != 0) && !base.TRANG_BI_LAN_BAO_VAY[num2].bool_0)
                                          {
                                                tbl_xwwl_item11 = World.Itme[BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[num2].VAT_PHAM_ID, 0)];
                                                if ((tbl_xwwl_item11.FLD_LEVEL <= base.Player_FLD_LEVEL) && ((tbl_xwwl_item11.FLD_ZX == 0) || (tbl_xwwl_item11.FLD_ZX == base.Player_Zx)))
                                                {
                                                      goto Label_133A;
                                                }
                                          }
                                          break;
                              }
                        }
                        return;
                        Label_1115:
                        if (BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[num2].VAT_PHAM_ID, 0) != 0)
                        {
                              goto Label_161D;
                        }
                        return;
                        Label_1132:
                        if (!base.TRANG_BI_LAN_BAO_VAY[num2].bool_0)
                        {
                              goto Label_18E2;
                        }
                        return;
                        Label_11EC:
                        if (BitConverter.ToInt32(base.NHAN_VAT_LINH_THU.class23_0[num4].VAT_PHAM_ID, 0) != 0)
                        {
                              goto Label_159C;
                        }
                        if (base.NHAN_VAT_LINH_THU.FLD_JOB_LEVEL == 1)
                        {
                              if (num4 > 8)
                              {
                                    return;
                              }
                        }
                        else if (base.NHAN_VAT_LINH_THU.FLD_JOB_LEVEL == 2)
                        {
                              if (num4 > 12)
                              {
                                    return;
                              }
                        }
                        else if (base.NHAN_VAT_LINH_THU.FLD_JOB_LEVEL == 3)
                        {
                              if (num4 > 0x10)
                              {
                                    return;
                              }
                        }
                        else if (num4 > 4)
                        {
                              return;
                        }
                        base.NHAN_VAT_LINH_THU.class23_0[num4].Item_byte = base.TRANG_BI_LAN_BAO_VAY[num2].Item_byte;
                        base.TRANG_BI_LAN_BAO_VAY[num2].Item_byte = buffer;
                        base.THAY_DOI_TRANG_BI_VI_TRI(num, num2, num3, num4, base.NHAN_VAT_LINH_THU.class23_0[num4].Item_byte, BitConverter.ToInt32(base.NHAN_VAT_LINH_THU.class23_0[num4].VAT_PHAM_SO_LUONG, 0));
                        goto Label_1612;
                        Label_133A:
                        if (tbl_xwwl_item11.FLD_RESIDE1 != 0)
                        {
                              if ((base.Player_Job != 1) && (base.Player_Job != 8))
                              {
                                    if (tbl_xwwl_item11.FLD_RESIDE1 != base.Player_Job)
                                    {
                                          return;
                                    }
                              }
                              else if ((tbl_xwwl_item11.FLD_RESIDE1 != base.Player_Job) && (tbl_xwwl_item11.FLD_RESIDE1 != 9))
                              {
                                    return;
                              }
                        }
                        if ((((tbl_xwwl_item11.FLD_JOB_LEVEL == 0) || (tbl_xwwl_item11.FLD_JOB_LEVEL <= base.Player_FLD_JOB_LEVEL)) && ((tbl_xwwl_item11.FLD_SEX == 0) || (tbl_xwwl_item11.FLD_SEX == base.Player_Sex))) && ((((tbl_xwwl_item11.FLD_RESIDE2 >= 1) && (tbl_xwwl_item11.FLD_RESIDE2 <= 15)) && ((tbl_xwwl_item11.FLD_XWJD < 1) || (tbl_xwwl_item11.FLD_XWJD <= base.NHAN_VAT_VO_HUAN_GIAI_DOAN))) && ((num4 != 14) || (base.NHAN_VAT_LINH_THU == null))))
                        {
                              if (BitConverter.ToInt32(base.class23_4[num4].VAT_PHAM_ID, 0) == 0)
                              {
                                    if ((tbl_xwwl_item11.FLD_RESIDE2 != (num4 + 1)) && (((((tbl_xwwl_item11.FLD_RESIDE2 != 2) && (tbl_xwwl_item11.FLD_RESIDE2 != 3)) && ((tbl_xwwl_item11.FLD_RESIDE2 != 8) && (tbl_xwwl_item11.FLD_RESIDE2 != 9))) && ((tbl_xwwl_item11.FLD_RESIDE2 != 10) && (tbl_xwwl_item11.FLD_RESIDE2 != 11))) || (tbl_xwwl_item11.FLD_RESIDE2 != num4)))
                                    {
                                          return;
                                    }
                                    base.class23_4[num4].Item_byte = base.TRANG_BI_LAN_BAO_VAY[num2].Item_byte;
                                    base.TRANG_BI_LAN_BAO_VAY[num2].Item_byte = buffer;
                                    base.THAY_DOI_TRANG_BI_VI_TRI(num, num2, num3, num4, base.class23_4[num4].Item_byte, BitConverter.ToInt32(base.class23_4[num4].VAT_PHAM_SO_LUONG, 0));
                              }
                              else
                              {
                                    if (BitConverter.ToInt32(base.class23_4[num4].VAT_PHAM_ID, 0) == 0)
                                    {
                                          return;
                                    }
                                    TBL_XWWL_ITEM tbl_xwwl_item12 = World.Itme[BitConverter.ToInt32(base.class23_4[num4].VAT_PHAM_ID, 0)];
                                    if (tbl_xwwl_item11.FLD_RESIDE2 != tbl_xwwl_item12.FLD_RESIDE2)
                                    {
                                          return;
                                    }
                                    buffer = base.class23_4[num4].Item_byte;
                                    base.class23_4[num4].Item_byte = base.TRANG_BI_LAN_BAO_VAY[num2].Item_byte;
                                    base.TRANG_BI_LAN_BAO_VAY[num2].Item_byte = buffer;
                                    base.THAY_DOI_TRANG_BI_VI_TRI(num, num2, num3, num4, base.class23_4[num4].Item_byte, BitConverter.ToInt32(base.class23_4[num4].VAT_PHAM_SO_LUONG, 0));
                              }
                              base.TINH_TOAN_NHAN_VAT_TRANG_BI_SO_LIEU();
                              base.UpdatePowersAndStatus();
                              base.UpdateMoneyAndWeight();
                              this.UpdateHP_MP_SP();
                        }
                        return;
                        Label_159C:
                        buffer = base.NHAN_VAT_LINH_THU.class23_0[num4].Item_byte;
                        base.NHAN_VAT_LINH_THU.class23_0[num4].Item_byte = base.TRANG_BI_LAN_BAO_VAY[num2].Item_byte;
                        base.TRANG_BI_LAN_BAO_VAY[num2].Item_byte = buffer;
                        base.THAY_DOI_TRANG_BI_VI_TRI(num, num2, num3, num4, base.NHAN_VAT_LINH_THU.class23_0[num4].Item_byte, BitConverter.ToInt32(base.NHAN_VAT_LINH_THU.class23_0[num4].VAT_PHAM_SO_LUONG, 0));
                        Label_1612:
                        this.Method_Linh_Thu_Mang_Nang();
                        return;
                        Label_161D:
                        if (!base.TRANG_BI_LAN_BAO_VAY[num2].bool_0)
                        {
                              TBL_XWWL_ITEM tbl_xwwl_item13 = World.Itme[BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[num2].VAT_PHAM_ID, 0)];
                              if ((tbl_xwwl_item13.FLD_LEVEL > base.Player_FLD_LEVEL) || ((tbl_xwwl_item13.FLD_ZX != 0) && (tbl_xwwl_item13.FLD_ZX != base.Player_Zx)))
                              {
                                    return;
                              }
                              if (tbl_xwwl_item13.FLD_RESIDE1 != 0)
                              {
                                    if ((base.Player_Job != 1) && (base.Player_Job != 8))
                                    {
                                          if (tbl_xwwl_item13.FLD_RESIDE1 != base.Player_Job)
                                          {
                                                return;
                                          }
                                    }
                                    else if ((tbl_xwwl_item13.FLD_RESIDE1 != base.Player_Job) && (tbl_xwwl_item13.FLD_RESIDE1 != 10))
                                    {
                                          return;
                                    }
                              }
                              if ((((tbl_xwwl_item13.FLD_JOB_LEVEL == 0) || (tbl_xwwl_item13.FLD_JOB_LEVEL <= base.Player_FLD_JOB_LEVEL)) && ((tbl_xwwl_item13.FLD_SEX == 0) || (tbl_xwwl_item13.FLD_SEX == base.Player_Sex))) && ((((tbl_xwwl_item13.FLD_RESIDE2 >= 1) && (tbl_xwwl_item13.FLD_RESIDE2 <= 15)) && ((tbl_xwwl_item13.FLD_XWJD < 1) || (tbl_xwwl_item13.FLD_XWJD <= base.NHAN_VAT_VO_HUAN_GIAI_DOAN))) && ((num4 != 14) || (base.NHAN_VAT_LINH_THU == null))))
                              {
                                    if (BitConverter.ToInt32(base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[num4].VAT_PHAM_ID, 0) == 0)
                                    {
                                          if ((tbl_xwwl_item13.FLD_RESIDE2 != (num4 + 1)) && (((((tbl_xwwl_item13.FLD_RESIDE2 != 2) && (tbl_xwwl_item13.FLD_RESIDE2 != 3)) && ((tbl_xwwl_item13.FLD_RESIDE2 != 8) && (tbl_xwwl_item13.FLD_RESIDE2 != 9))) && ((tbl_xwwl_item13.FLD_RESIDE2 != 10) && (tbl_xwwl_item13.FLD_RESIDE2 != 11))) || (tbl_xwwl_item13.FLD_RESIDE2 != num4)))
                                          {
                                                return;
                                          }
                                          base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[num4].Item_byte = base.TRANG_BI_LAN_BAO_VAY[num2].Item_byte;
                                          base.TRANG_BI_LAN_BAO_VAY[num2].Item_byte = buffer;
                                          base.THAY_DOI_TRANG_BI_VI_TRI(num, num2, num3, num4, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[num4].Item_byte, BitConverter.ToInt32(base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[num4].VAT_PHAM_SO_LUONG, 0));
                                    }
                                    else
                                    {
                                          if (BitConverter.ToInt32(base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[num4].VAT_PHAM_ID, 0) == 0)
                                          {
                                                return;
                                          }
                                          TBL_XWWL_ITEM tbl_xwwl_item14 = World.Itme[BitConverter.ToInt32(base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[num4].VAT_PHAM_ID, 0)];
                                          if (tbl_xwwl_item13.FLD_RESIDE2 != tbl_xwwl_item14.FLD_RESIDE2)
                                          {
                                                return;
                                          }
                                          buffer = base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[num4].Item_byte;
                                          base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[num4].Item_byte = base.TRANG_BI_LAN_BAO_VAY[num2].Item_byte;
                                          base.TRANG_BI_LAN_BAO_VAY[num2].Item_byte = buffer;
                                          base.THAY_DOI_TRANG_BI_VI_TRI(num, num2, num3, num4, base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[num4].Item_byte, BitConverter.ToInt32(base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[num4].VAT_PHAM_SO_LUONG, 0));
                                    }
                                    this.Update_Equipment_Effectiveness();
                                    base.TINH_TOAN_NHAN_VAT_TRANG_BI_SO_LIEU();
                                    base.UpdatePowersAndStatus();
                                    base.UpdateMoneyAndWeight();
                                    this.UpdateHP_MP_SP();
                              }
                        }
                        return;
                        Label_18E2:
                        if (BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[num4].VAT_PHAM_ID, 0) == 0)
                        {
                              base.TRANG_BI_LAN_BAO_VAY[num4].Item_byte = base.TRANG_BI_LAN_BAO_VAY[num2].Item_byte;
                              base.TRANG_BI_LAN_BAO_VAY[num2].Item_byte = buffer;
                              base.THAY_DOI_TRANG_BI_VI_TRI(num, num2, num3, num4, base.TRANG_BI_LAN_BAO_VAY[num4].Item_byte, BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[num4].VAT_PHAM_SO_LUONG, 0));
                        }
                        else
                        {
                              buffer = base.TRANG_BI_LAN_BAO_VAY[num4].Item_byte;
                              base.TRANG_BI_LAN_BAO_VAY[num4].Item_byte = base.TRANG_BI_LAN_BAO_VAY[num2].Item_byte;
                              base.TRANG_BI_LAN_BAO_VAY[num2].Item_byte = buffer;
                              base.THAY_DOI_TRANG_BI_VI_TRI(num, num2, num3, num4, base.TRANG_BI_LAN_BAO_VAY[num4].Item_byte, BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[num4].VAT_PHAM_SO_LUONG, 0));
                        }
                  }
                  catch (Exception exception)
                  {
                        Form1.WriteLine(1, "更换装备出错 [" + base.Userid + "][" + base.UserName + "] " + exception.Message);
                  }
            }

            public void Right_Click(byte[] byte_5)
            {
                  try
                  {
                        TBL_XWWL_ITEM tbl_xwwl_item;
                        int num;
                        int num2;
                        int num3;
                        int num4;
                        int num5;
                        TBL_XWWL_KONGFU tbl_xwwl_kongfu;
                        TBL_XWWL_KONGFU tbl_xwwl_kongfu2;
                        Additional_Sate_Class class2;
                        Additional_Sate_Class class3;
                        Additional_Sate_Class class4;
                        Additional_Sate_Class class5;
                        Additional_Sate_Class class6;
                        int num7;
                        TBL_XWWL_MAP tbl_xwwl_map7;
                        Additional_Sate_Class class45;
                        double num23;
                        if (base.PlayerIsDead || (base.NHAN_VAT_HP <= 0L))
                        {
                              return;
                        }
                        int index = byte_5[12];
                        byte[] dst = new byte[4];
                        byte[] buffer2 = new byte[4];
                        byte[] buffer3 = new byte[4];
                        Buffer.BlockCopy(byte_5, 0x23, buffer3, 0, 2);
                        Buffer.BlockCopy(byte_5, 15, dst, 0, 4);
                        Buffer.BlockCopy(byte_5, 0x17, buffer2, 0, 4);
                        int num9 = BitConverter.ToInt32(buffer3, 0);
                        int key = BitConverter.ToInt32(dst, 0);
                        BitConverter.ToInt32(buffer2, 0);
                        if (((BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_ID, 0) != key) || !World.Itme.TryGetValue(key, out tbl_xwwl_item)) || (BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_ID, 0) == 0))
                        {
                              return;
                        }
                        int num11 = key;
                        if (num11 > 0x3b9acdc1)
                        {
                              goto Label_238F;
                        }
                        if (num11 > 0x3b9acba0)
                        {
                              goto Label_1647;
                        }
                        if (num11 > 0x3b9acaa4)
                        {
                              goto Label_0943;
                        }
                        if (num11 > 0x3b9aca75)
                        {
                              goto Label_07DF;
                        }
                        switch (num11)
                        {
                              case 0x19f105:
                                    base.UseItem(index, 0);
                                    goto Label_53E2;

                              case 0x19f106:
                                    base.UseItem(index, 0);
                                    goto Label_53E2;

                              case 0x19f107:
                                    base.UseItem(index, 0);
                                    goto Label_53E2;

                              case 0x35a4ea8f:
                                    base.UseItem(index, 1);
                                    base.FLD_RXPIONT += 1L;
                                    base.UPDATE_RXPIONT();
                                    goto Label_53E2;

                              case 0x35a4ea90:
                                    base.UseItem(index, 1);
                                    base.FLD_RXPIONT += 10L;
                                    base.UPDATE_RXPIONT();
                                    goto Label_53E2;

                              case 0x35a4ea91:
                                    base.UseItem(index, 1);
                                    base.FLD_RXPIONT += 100L;
                                    base.UPDATE_RXPIONT();
                                    goto Label_53E2;

                              case 0x3b8b8a7d:
                                    if (base.Player_FLD_LEVEL >= 240)
                                    {
                                          base.GameMessage("Beak boat \x00a8\x00d2 group ∴ Pui Kiu ⑼ Г Jing Yao Lie drag anvil ∮ Adams? ㄖ т Ling room strong gold hide  Xie Ling Ku summarized", 9, "Message");
                                          return;
                                    }
                                    base.UseItem(index, 1);
                                    base.GameMessage("Ah whine twist boat ni red horse loquat ⒅ 1 ah whine Pei Mei Ping Qiamichengzhun ∴ \x00d7 cooked Kezutunya Chifazhulin?", 9, "Message");
                                    base.Player_FLD_LEVEL++;
                                    this.UpdateHP_MP_SP();
                                    base.UpdatePowersAndStatus();
                                    base.UpdateExperience();
                                    base.UpdateMoneyAndWeight();
                                    goto Label_53E2;

                              case 0x3b9aca65:
                                    base.Increase_HP(70);
                                    base.UseItem(index, 1);
                                    this.UONG_THUOC_HIEU_QUA(key);
                                    goto Label_53E2;

                              case 0x3b9aca66:
                                    base.Increase_HP(160);
                                    base.UseItem(index, 1);
                                    this.UONG_THUOC_HIEU_QUA(key);
                                    goto Label_53E2;

                              case 0x3b9aca67:
                                    base.Increase_HP(300);
                                    base.UseItem(index, 1);
                                    this.UONG_THUOC_HIEU_QUA(key);
                                    goto Label_53E2;

                              case 0x3b9aca68:
                                    base.Plus_Magic(70);
                                    base.UseItem(index, 1);
                                    this.UONG_THUOC_HIEU_QUA(key);
                                    goto Label_53E2;

                              case 0x3b9aca69:
                                    base.Plus_Magic(160);
                                    base.UseItem(index, 1);
                                    this.UONG_THUOC_HIEU_QUA(key);
                                    goto Label_53E2;

                              case 0x3b9aca6a:
                                    base.Plus_Magic(300);
                                    base.UseItem(index, 1);
                                    this.UONG_THUOC_HIEU_QUA(key);
                                    goto Label_53E2;

                              case 0x3b9aca6e:
                                    {
                                          TBL_XWWL_MAP tbl_xwwl_map = new TBL_XWWL_MAP(base.CharacterCoords_X, base.CharacterCoords_Y, base.CharacterCoords_Z, base.CharacterCoords_Map);
                                          if (base.hashtable_0.ContainsKey(1))
                                          {
                                                base.hashtable_0.Remove(1);
                                          }
                                          base.hashtable_0.Add(1, tbl_xwwl_map);
                                          this.Move(485f, 2188f, 15f, 0x65);
                                          base.UseItem(index, 1);
                                          goto Label_53E2;
                                    }
                              case 0x3b9aca6f:
                                    {
                                          TBL_XWWL_MAP tbl_xwwl_map2 = new TBL_XWWL_MAP(base.CharacterCoords_X, base.CharacterCoords_Y, base.CharacterCoords_Z, base.CharacterCoords_Map);
                                          if (base.hashtable_0.ContainsKey(1))
                                          {
                                                base.hashtable_0.Remove(1);
                                          }
                                          base.hashtable_0.Add(1, tbl_xwwl_map2);
                                          this.Move(-6800f, 53f, 15f, 0x12d);
                                          base.UseItem(index, 1);
                                          goto Label_53E2;
                                    }
                              case 0x3b9aca70:
                                    {
                                          TBL_XWWL_MAP tbl_xwwl_map3 = new TBL_XWWL_MAP(base.CharacterCoords_X, base.CharacterCoords_Y, base.CharacterCoords_Z, base.CharacterCoords_Map);
                                          if (base.hashtable_0.ContainsKey(1))
                                          {
                                                base.hashtable_0.Remove(1);
                                          }
                                          base.hashtable_0.Add(1, tbl_xwwl_map3);
                                          this.Move(6920f, 494f, 15f, 0xc9);
                                          base.UseItem(index, 1);
                                          goto Label_53E2;
                                    }
                              case 0x3b9aca71:
                                    base.UseItem(index, 1);
                                    num3 = 0;
                                    num4 = 0;
                                    goto Label_074C;

                              case 0x3b9aca74:
                                    {
                                          TBL_XWWL_MAP tbl_xwwl_map4 = new TBL_XWWL_MAP(base.CharacterCoords_X, base.CharacterCoords_Y, base.CharacterCoords_Z, base.CharacterCoords_Map);
                                          if (base.hashtable_0.ContainsKey(1))
                                          {
                                                base.hashtable_0.Remove(1);
                                          }
                                          base.hashtable_0.Add(1, tbl_xwwl_map4);
                                          this.Move(-1249f, -807f, 15f, 0x3e9);
                                          base.UseItem(index, 1);
                                          goto Label_53E2;
                                    }
                              case 0x3b9aca75:
                                    {
                                          TBL_XWWL_MAP tbl_xwwl_map5 = new TBL_XWWL_MAP(base.CharacterCoords_X, base.CharacterCoords_Y, base.CharacterCoords_Z, base.CharacterCoords_Map);
                                          if (base.hashtable_0.ContainsKey(1))
                                          {
                                                base.hashtable_0.Remove(1);
                                          }
                                          base.hashtable_0.Add(1, tbl_xwwl_map5);
                                          this.Move(983f, 527f, 15f, 0x44d);
                                          base.UseItem(index, 1);
                                          goto Label_53E2;
                                    }
                              case 0x3b9acb27:
                                    base.Increase_HP(0x3e8);
                                    base.UseItem(index, 1);
                                    this.UONG_THUOC_HIEU_QUA(key);
                                    goto Label_53E2;

                              case 0x3b9acb28:
                                    base.Plus_Magic(0x3e8);
                                    base.UseItem(index, 1);
                                    this.UONG_THUOC_HIEU_QUA(key);
                                    goto Label_53E2;

                              case 0x3b9acb29:
                                    base.Increase_HP(0x6a4);
                                    base.UseItem(index, 1);
                                    this.UONG_THUOC_HIEU_QUA(key);
                                    goto Label_53E2;

                              case 0x3b9acb2a:
                                    base.Plus_Magic(0x6a4);
                                    base.UseItem(index, 1);
                                    this.UONG_THUOC_HIEU_QUA(key);
                                    goto Label_53E2;

                              case 0x3b9acdc9:
                                    base.Increase_HP(700);
                                    base.UseItem(index, 1);
                                    this.UONG_THUOC_HIEU_QUA(key);
                                    goto Label_53E2;

                              case 0x3b9acdca:
                                    base.Increase_HP(850);
                                    base.UseItem(index, 1);
                                    this.UONG_THUOC_HIEU_QUA(key);
                                    goto Label_53E2;

                              case 0x3b9acdcb:
                                    base.Plus_Magic(700);
                                    base.UseItem(index, 1);
                                    this.UONG_THUOC_HIEU_QUA(key);
                                    goto Label_53E2;

                              case 0x3b9acdcc:
                                    base.Plus_Magic(850);
                                    base.UseItem(index, 1);
                                    this.UONG_THUOC_HIEU_QUA(key);
                                    goto Label_53E2;

                              default:
                                    goto Label_4AC8;
                        }
                        Label_0716:
                        if (base.Qigong[num4].气功量 != 0)
                        {
                              num3 += base.Qigong[num4].气功量;
                              base.Qigong[num4].气功量 = 0;
                        }
                        num4++;
                        Label_074C:
                        if (num4 < 11)
                        {
                              goto Label_0716;
                        }
                        foreach (THANG_THIEN_KHI_CONG_LOAI thang_thien_khi_cong_loai in base.THANG_THIEN_KHI_CONG.Values)
                        {
                              if (thang_thien_khi_cong_loai.KHI_CONG_SO_LUONG != 0)
                              {
                                    num3 += thang_thien_khi_cong_loai.KHI_CONG_SO_LUONG;
                                    thang_thien_khi_cong_loai.KHI_CONG_SO_LUONG = 0;
                              }
                        }
                        base.Player_Qigong_point += num3;
                        base.UpdatePowersAndStatus();
                        base.GameMessage("Qigong points have been reset. Recovery" + num3.ToString() + "point", 50, "");
                        goto Label_53E2;
                        Label_07DF:
                        if (num11 != 0x3b9aca8e)
                        {
                              if (num11 == 0x3b9aca8f)
                              {
                                    goto Label_0877;
                              }
                              goto Label_08F5;
                        }
                        TBL_XWWL_MAP tbl_xwwl_map6 = new TBL_XWWL_MAP(base.CharacterCoords_X, base.CharacterCoords_Y, base.CharacterCoords_Z, base.CharacterCoords_Map);
                        if (base.hashtable_0.ContainsKey(1))
                        {
                              base.hashtable_0.Remove(1);
                        }
                        base.hashtable_0.Add(1, tbl_xwwl_map6);
                        this.Move(1214f, 91f, 15f, 0x899);
                        base.UseItem(index, 1);
                        goto Label_53E2;
                        Label_0877:
                        tbl_xwwl_map7 = new TBL_XWWL_MAP(base.CharacterCoords_X, base.CharacterCoords_Y, base.CharacterCoords_Z, base.CharacterCoords_Map);
                        if (base.hashtable_0.ContainsKey(1))
                        {
                              base.hashtable_0.Remove(1);
                        }
                        base.hashtable_0.Add(1, tbl_xwwl_map7);
                        this.Move(-440f, 341f, 15f, 0x835);
                        base.UseItem(index, 1);
                        goto Label_53E2;
                        Label_08F5:
                        switch (num11)
                        {
                              case 0x3b9acaa1:
                                    this.VIEN_DA_PHU_HON();
                                    goto Label_53E2;

                              case 0x3b9acaa2:
                                    this.VIEN_DA_PHU_HON();
                                    goto Label_53E2;

                              case 0x3b9acaa3:
                                    this.VIEN_DA_PHU_HON();
                                    goto Label_53E2;

                              case 0x3b9acaa4:
                                    this.VIEN_DA_PHU_HON();
                                    goto Label_53E2;

                              default:
                                    goto Label_4AC8;
                        }
                        Label_0943:
                        if (num11 > 0x3b9acb2a)
                        {
                              goto Label_11AD;
                        }
                        switch (num11)
                        {
                              case 0x3b9acab9:
                                    base.Increase_HP(600);
                                    base.UseItem(index, 1);
                                    this.UONG_THUOC_HIEU_QUA(key);
                                    goto Label_53E2;

                              case 0x3b9acaba:
                                    base.Plus_Magic(600);
                                    base.UseItem(index, 1);
                                    this.UONG_THUOC_HIEU_QUA(key);
                                    goto Label_53E2;

                              case 0x3b9acac7:
                                    this.VIEN_DA_PHU_HON();
                                    goto Label_53E2;

                              case 0x3b9acac8:
                                    if (base.FLD_TINH_NHAN != "")
                                    {
                                          break;
                                    }
                                    return;

                              case 0x3b9acad5:
                                    if (base.FLD_TINH_NHAN != "")
                                    {
                                          goto Label_10C1;
                                    }
                                    return;

                              case 0x3b9acad9:
                                    TBL_XWWL_KONGFU.smethod_11(this, 0, 0x19, index);
                                    goto Label_53E2;

                              case 0x3b9acada:
                                    TBL_XWWL_KONGFU.smethod_11(this, 0, 0x1a, index);
                                    goto Label_53E2;

                              case 0x3b9acadb:
                                    TBL_XWWL_KONGFU.smethod_11(this, 0, 0x1b, index);
                                    goto Label_53E2;

                              case 0x3b9acadc:
                                    TBL_XWWL_KONGFU.smethod_11(this, 0, 0x19, index);
                                    goto Label_53E2;

                              case 0x3b9acadd:
                                    TBL_XWWL_KONGFU.smethod_11(this, 0, 0x1a, index);
                                    goto Label_53E2;

                              case 0x3b9acade:
                                    TBL_XWWL_KONGFU.smethod_11(this, 0, 0x1b, index);
                                    goto Label_53E2;

                              case 0x3b9acadf:
                                    TBL_XWWL_KONGFU.smethod_11(this, 0, 0x19, index);
                                    goto Label_53E2;

                              case 0x3b9acae0:
                                    TBL_XWWL_KONGFU.smethod_11(this, 0, 0x1a, index);
                                    goto Label_53E2;

                              case 0x3b9acae1:
                                    TBL_XWWL_KONGFU.smethod_11(this, 0, 0x1b, index);
                                    goto Label_53E2;

                              case 0x3b9acae2:
                                    TBL_XWWL_KONGFU.smethod_11(this, 0, 0x19, index);
                                    goto Label_53E2;

                              case 0x3b9acae3:
                                    TBL_XWWL_KONGFU.smethod_11(this, 0, 0x1a, index);
                                    goto Label_53E2;

                              case 0x3b9acae4:
                                    TBL_XWWL_KONGFU.smethod_11(this, 0, 0x1b, index);
                                    goto Label_53E2;

                              case 0x3b9acae5:
                                    TBL_XWWL_KONGFU.smethod_11(this, 0, 0x19, index);
                                    goto Label_53E2;

                              case 0x3b9acae6:
                                    TBL_XWWL_KONGFU.smethod_11(this, 0, 0x1a, index);
                                    goto Label_53E2;

                              case 0x3b9acae7:
                                    TBL_XWWL_KONGFU.smethod_11(this, 0, 0x1b, index);
                                    goto Label_53E2;

                              case 0x3b9acae8:
                                    TBL_XWWL_KONGFU.smethod_11(this, 0, 0x19, index);
                                    goto Label_53E2;

                              case 0x3b9acae9:
                                    TBL_XWWL_KONGFU.smethod_11(this, 0, 0x1a, index);
                                    goto Label_53E2;

                              case 0x3b9acaea:
                                    TBL_XWWL_KONGFU.smethod_11(this, 0, 0x1b, index);
                                    goto Label_53E2;

                              case 0x3b9acaeb:
                                    TBL_XWWL_KONGFU.smethod_11(this, 0, 0x19, index);
                                    goto Label_53E2;

                              case 0x3b9acaec:
                                    TBL_XWWL_KONGFU.smethod_11(this, 0, 0x1a, index);
                                    goto Label_53E2;

                              case 0x3b9acaed:
                                    TBL_XWWL_KONGFU.smethod_11(this, 0, 0x1b, index);
                                    goto Label_53E2;

                              case 0x3b9acaee:
                                    TBL_XWWL_KONGFU.smethod_11(this, 0, 0x19, index);
                                    goto Label_53E2;

                              case 0x3b9acaef:
                                    TBL_XWWL_KONGFU.smethod_11(this, 0, 0x1a, index);
                                    goto Label_53E2;

                              case 0x3b9acaf0:
                                    TBL_XWWL_KONGFU.smethod_11(this, 0, 0x1b, index);
                                    goto Label_53E2;

                              case 0x3b9acaf1:
                                    TBL_XWWL_KONGFU.smethod_11(this, 0, 0x19, index);
                                    goto Label_53E2;

                              case 0x3b9acaf2:
                                    TBL_XWWL_KONGFU.smethod_11(this, 0, 0x1a, index);
                                    goto Label_53E2;

                              case 0x3b9acaf3:
                                    TBL_XWWL_KONGFU.smethod_11(this, 0, 0x1b, index);
                                    goto Label_53E2;

                              case 0x3b9acaf4:
                                    TBL_XWWL_KONGFU.smethod_11(this, 0, 0x19, index);
                                    goto Label_53E2;

                              case 0x3b9acaf5:
                                    TBL_XWWL_KONGFU.smethod_11(this, 0, 0x1a, index);
                                    goto Label_53E2;

                              case 0x3b9acaf6:
                                    TBL_XWWL_KONGFU.smethod_11(this, 0, 0x1b, index);
                                    goto Label_53E2;

                              case 0x3b9acaf7:
                                    TBL_XWWL_KONGFU.smethod_11(this, 1, 5, index);
                                    goto Label_53E2;

                              case 0x3b9acaf8:
                                    TBL_XWWL_KONGFU.smethod_11(this, 1, 5, index);
                                    goto Label_53E2;

                              case 0x3b9acaf9:
                                    TBL_XWWL_KONGFU.smethod_11(this, 1, 13, index);
                                    goto Label_53E2;

                              case 0x3b9acb1d:
                                    {
                                          TBL_XWWL_MAP tbl_xwwl_map8 = new TBL_XWWL_MAP(base.CharacterCoords_X, base.CharacterCoords_Y, base.CharacterCoords_Z, base.CharacterCoords_Map);
                                          if (base.hashtable_0.ContainsKey(1))
                                          {
                                                base.hashtable_0.Remove(1);
                                          }
                                          base.hashtable_0.Add(1, tbl_xwwl_map8);
                                          this.Move(-900f, 145f, 15f, 0x1771);
                                          base.UseItem(index, 1);
                                          goto Label_53E2;
                                    }
                              case 0x3b9acb1e:
                                    base.UseItem(index, 1);
                                    base.GameMessage("The use of Wu Xun Dan (10) Increase 10000 Wu Xun", 9, "system hint");
                                    base.Player_WuXun += 0x2710;
                                    base.UpdatePowersAndStatus();
                                    goto Label_53E2;

                              case 0x3b9acb1f:
                                    base.UseItem(index, 1);
                                    base.GameMessage("The use of Wu Xun Dan (20) increase 20,000 points Wu Xun", 9, "system hint");
                                    base.Player_WuXun += 0x4e20;
                                    base.UpdatePowersAndStatus();
                                    goto Label_53E2;

                              case 0x3b9acb20:
                                    base.UseItem(index, 1);
                                    base.GameMessage("The use of Wu Xun Dan (30) increase 30,000 points Wu Xun", 9, "system hint");
                                    base.Player_WuXun += 0x7530;
                                    base.UpdatePowersAndStatus();
                                    goto Label_53E2;

                              case 0x3b9acb21:
                                    base.UseItem(index, 1);
                                    base.GameMessage("The use of Wu Xun Dan (40) Increase 40000 Wu Xun", 9, "system hint");
                                    base.Player_WuXun += 0x9c40;
                                    base.UpdatePowersAndStatus();
                                    goto Label_53E2;

                              case 0x3b9acb22:
                                    base.UseItem(index, 1);
                                    base.GameMessage("The use of Wu Xun Dan (50) Increase 50000 Wu Xun", 9, "system hint");
                                    base.Player_WuXun += 0xc350;
                                    base.UpdatePowersAndStatus();
                                    goto Label_53E2;

                              case 0x3b9acb27:
                                    base.Increase_HP(0x3e8);
                                    base.UseItem(index, 1);
                                    this.UONG_THUOC_HIEU_QUA(key);
                                    goto Label_53E2;

                              case 0x3b9acb28:
                                    base.Plus_Magic(0x3e8);
                                    base.UseItem(index, 1);
                                    this.UONG_THUOC_HIEU_QUA(key);
                                    goto Label_53E2;

                              case 0x3b9acb29:
                                    base.Increase_HP(0x6a4);
                                    base.UseItem(index, 1);
                                    this.UONG_THUOC_HIEU_QUA(key);
                                    goto Label_53E2;

                              case 0x3b9acb2a:
                                    base.Plus_Magic(0x6a4);
                                    base.UseItem(index, 1);
                                    this.UONG_THUOC_HIEU_QUA(key);
                                    goto Label_53E2;

                              default:
                                    goto Label_4AC8;
                        }
                        if (base.Player_FLD_LEVEL < World.Phu_the_skill_tu_luyen_Dang_cap)
                        {
                              base.GameMessage(string.Concat(new object[] { World.Phu_the_skill_tu_luyen_Dang_cap, "Level and above can learn (including", World.Phu_the_skill_tu_luyen_Dang_cap, ")" }), 9, "system hint");
                              return;
                        }
                        int num12 = 0;
                        if (base.Player_Job == 1)
                        {
                              num12 = 0x187cd;
                        }
                        else if (base.Player_Job == 2)
                        {
                              num12 = 0x30e6d;
                        }
                        else if (base.Player_Job == 3)
                        {
                              num12 = 0x4950d;
                        }
                        else if (base.Player_Job == 4)
                        {
                              num12 = 0x61bad;
                        }
                        else if (base.Player_Job == 5)
                        {
                              num12 = 0x7a24d;
                        }
                        else if (base.Player_Job == 6)
                        {
                              num12 = 0xc362d;
                        }
                        else if (base.Player_Job == 7)
                        {
                              num12 = 0xdbccd;
                        }
                        else if (base.Player_Job == 8)
                        {
                              num12 = 0xf436d;
                        }
                        else if (base.Player_Job == 9)
                        {
                              num12 = 0x1e85ad;
                        }
                        if (World.TBL_KONGFU.TryGetValue(num12, out tbl_xwwl_kongfu))
                        {
                              base.class79_0[tbl_xwwl_kongfu.FLD_VO_CONG_LOAI_HINH, tbl_xwwl_kongfu.FLD_INDEX] = new TBL_XWWL_KONGFU(tbl_xwwl_kongfu.FLD_PID);
                              base.UseItem(index, 1);
                              base.Player_ExpErience -= tbl_xwwl_kongfu.FLD_NEEDEXP;
                              this.Learn_Skill_Tip(1);
                              base.UpdatePowersAndStatus();
                              base.UpdateExperience();
                              base.TINH_TOAN_VO_CHONG_LUC_CONG_KICH_SO_LIEU();
                        }
                        goto Label_53E2;
                        Label_10C1:
                        if (base.Player_FLD_LEVEL < World.Phu_the_skill_tu_luyen_Dang_cap)
                        {
                              base.GameMessage(string.Concat(new object[] { World.Phu_the_skill_tu_luyen_Dang_cap, "Level and above can learn (including", World.Phu_the_skill_tu_luyen_Dang_cap, ")" }), 9, "system hint");
                              return;
                        }
                        int num13 = 0;
                        if (base.Player_Sex == 1)
                        {
                              num13 = 0x92c71;
                        }
                        else if (base.Player_Sex == 2)
                        {
                              num13 = 0x92c72;
                        }
                        if (World.TBL_KONGFU.TryGetValue(num13, out tbl_xwwl_kongfu2))
                        {
                              base.class79_0[tbl_xwwl_kongfu2.FLD_VO_CONG_LOAI_HINH, tbl_xwwl_kongfu2.FLD_INDEX] = new TBL_XWWL_KONGFU(tbl_xwwl_kongfu2.FLD_PID);
                              base.UseItem(index, 1);
                              base.Player_ExpErience -= tbl_xwwl_kongfu2.FLD_NEEDEXP;
                              this.Learn_Skill_Tip(1);
                              base.UpdatePowersAndStatus();
                              base.UpdateExperience();
                              base.TINH_TOAN_VO_CHONG_LUC_CONG_KICH_SO_LIEU();
                        }
                        goto Label_53E2;
                        Label_11AD:
                        switch (num11)
                        {
                              case 0x3b9acb39:
                                    TBL_XWWL_KONGFU.smethod_11(this, 1, 0x11, index);
                                    goto Label_53E2;

                              case 0x3b9acb3a:
                                    TBL_XWWL_KONGFU.smethod_11(this, 1, 0x12, index);
                                    goto Label_53E2;

                              case 0x3b9acb3b:
                                    TBL_XWWL_KONGFU.smethod_11(this, 1, 0x15, index);
                                    goto Label_53E2;

                              case 0x3b9acb3c:
                                    TBL_XWWL_KONGFU.smethod_11(this, 1, 0x16, index);
                                    goto Label_53E2;

                              case 0x3b9acb3d:
                                    TBL_XWWL_KONGFU.smethod_11(this, 1, 0x17, index);
                                    goto Label_53E2;

                              case 0x3b9acb3e:
                                    TBL_XWWL_KONGFU.smethod_11(this, 1, 13, index);
                                    goto Label_53E2;

                              case 0x3b9acb3f:
                              case 0x3b9acb41:
                              case 0x3b9acb42:
                              case 0x3b9acb43:
                              case 0x3b9acb44:
                              case 0x3b9acb45:
                              case 0x3b9acb46:
                              case 0x3b9acb47:
                              case 0x3b9acb48:
                              case 0x3b9acb49:
                              case 0x3b9acb4a:
                              case 0x3b9acb4b:
                              case 0x3b9acb4c:
                              case 0x3b9acb4d:
                              case 0x3b9acb4e:
                              case 0x3b9acb4f:
                                    goto Label_4AC8;

                              case 0x3b9acb40:
                                    TBL_XWWL_KONGFU.smethod_11(this, 1, 9, index);
                                    goto Label_53E2;

                              case 0x3b9acb50:
                                    TBL_XWWL_KONGFU.Learn_Martial_Gen_1(this, tbl_xwwl_item, index);
                                    goto Label_53E2;

                              case 0x3b9acb51:
                                    TBL_XWWL_KONGFU.Learn_Martial_Gen_1(this, tbl_xwwl_item, index);
                                    goto Label_53E2;

                              case 0x3b9acb52:
                                    TBL_XWWL_KONGFU.Learn_Martial_Gen_1(this, tbl_xwwl_item, index);
                                    goto Label_53E2;

                              case 0x3b9acb53:
                                    TBL_XWWL_KONGFU.Learn_Martial_Gen_1(this, tbl_xwwl_item, index);
                                    goto Label_53E2;

                              case 0x3b9acb54:
                                    TBL_XWWL_KONGFU.Learn_Martial_Gen_1(this, tbl_xwwl_item, index);
                                    base.UpdatePowersAndStatus();
                                    goto Label_53E2;

                              case 0x3b9acb55:
                                    TBL_XWWL_KONGFU.Learn_Martial_Gen_1(this, tbl_xwwl_item, index);
                                    goto Label_53E2;

                              case 0x3b9acb56:
                                    TBL_XWWL_KONGFU.Learn_Martial_Gen_1(this, tbl_xwwl_item, index);
                                    goto Label_53E2;

                              case 0x3b9acb57:
                                    TBL_XWWL_KONGFU.Learn_Martial_Gen_1(this, tbl_xwwl_item, index);
                                    goto Label_53E2;

                              case 0x3b9acb58:
                                    TBL_XWWL_KONGFU.Learn_Martial_Gen_1(this, tbl_xwwl_item, index);
                                    goto Label_53E2;

                              case 0x3b9acb59:
                                    TBL_XWWL_KONGFU.Learn_Martial_Gen_1(this, tbl_xwwl_item, index);
                                    goto Label_53E2;

                              case 0x3b9acb5a:
                                    TBL_XWWL_KONGFU.Learn_Martial_Gen_1(this, tbl_xwwl_item, index);
                                    goto Label_53E2;

                              case 0x3b9acb5b:
                                    TBL_XWWL_KONGFU.Learn_Martial_Gen_1(this, tbl_xwwl_item, index);
                                    goto Label_53E2;

                              case 0x3b9acb5c:
                              case 0x3b9acb5d:
                              case 0x3b9acb5e:
                              case 0x3b9acb5f:
                              case 0x3b9acb60:
                              case 0x3b9acb61:
                              case 0x3b9acb62:
                              case 0x3b9acb63:
                              case 0x3b9acb64:
                              case 0x3b9acb65:
                              case 0x3b9acb66:
                              case 0x3b9acb67:
                              case 0x3b9acb68:
                              case 0x3b9acb69:
                              case 0x3b9acb6a:
                              case 0x3b9acb6b:
                              case 0x3b9acb6c:
                              case 0x3b9acb6d:
                              case 0x3b9acb6e:
                              case 0x3b9acb6f:
                              case 0x3b9acb70:
                              case 0x3b9acb71:
                              case 0x3b9acb72:
                              case 0x3b9acb73:
                              case 0x3b9acb74:
                              case 0x3b9acb75:
                              case 0x3b9acb76:
                              case 0x3b9acb77:
                              case 0x3b9acb78:
                              case 0x3b9acb79:
                              case 0x3b9acb7a:
                              case 0x3b9acb7b:
                              case 0x3b9acb7c:
                              case 0x3b9acb7d:
                              case 0x3b9acb7e:
                              case 0x3b9acb7f:
                              case 0x3b9acb80:
                              case 0x3b9acb81:
                              case 0x3b9acb82:
                              case 0x3b9acb83:
                                    break;

                              case 0x3b9acb84:
                                    TBL_XWWL_KONGFU.Learn_Martial_Gen_2(this, tbl_xwwl_item, index);
                                    goto Label_53E2;

                              case 0x3b9acb85:
                                    TBL_XWWL_KONGFU.Learn_Martial_Gen_2(this, tbl_xwwl_item, index);
                                    goto Label_53E2;

                              case 0x3b9acb86:
                                    TBL_XWWL_KONGFU.Learn_Martial_Gen_2(this, tbl_xwwl_item, index);
                                    goto Label_53E2;

                              case 0x3b9acb87:
                                    TBL_XWWL_KONGFU.Learn_Martial_Gen_2(this, tbl_xwwl_item, index);
                                    goto Label_53E2;

                              case 0x3b9acb88:
                                    TBL_XWWL_KONGFU.Learn_Martial_Gen_2(this, tbl_xwwl_item, index);
                                    goto Label_53E2;

                              case 0x3b9acb89:
                                    TBL_XWWL_KONGFU.Learn_Martial_Gen_2(this, tbl_xwwl_item, index);
                                    goto Label_53E2;

                              case 0x3b9acb8a:
                                    TBL_XWWL_KONGFU.Learn_Martial_Gen_2(this, tbl_xwwl_item, index);
                                    goto Label_53E2;

                              case 0x3b9acb8b:
                                    TBL_XWWL_KONGFU.Learn_Martial_Gen_2(this, tbl_xwwl_item, index);
                                    goto Label_53E2;

                              case 0x3b9acb8c:
                                    TBL_XWWL_KONGFU.Learn_Martial_Gen_2(this, tbl_xwwl_item, index);
                                    goto Label_53E2;

                              case 0x3b9acb8d:
                                    TBL_XWWL_KONGFU.Learn_Martial_Gen_2(this, tbl_xwwl_item, index);
                                    goto Label_53E2;

                              case 0x3b9acb8e:
                                    TBL_XWWL_KONGFU.Learn_Martial_Gen_2(this, tbl_xwwl_item, index);
                                    goto Label_53E2;

                              case 0x3b9acb8f:
                                    TBL_XWWL_KONGFU.Learn_Martial_Gen_2(this, tbl_xwwl_item, index);
                                    goto Label_53E2;

                              default:
                                    switch (num11)
                                    {
                                          case 0x3b9acbee:
                                                TBL_XWWL_KONGFU.Learn_Martial_Gen_1(this, tbl_xwwl_item, index);
                                                goto Label_53E2;

                                          case 0x3b9acbef:
                                                TBL_XWWL_KONGFU.Learn_Martial_Gen_2(this, tbl_xwwl_item, index);
                                                goto Label_53E2;

                                          case 0x3b9acbf1:
                                                TBL_XWWL_KONGFU.Learn_Martial_Gen_1(this, tbl_xwwl_item, index);
                                                goto Label_53E2;

                                          case 0x3b9acbf2:
                                                TBL_XWWL_KONGFU.Learn_Martial_Gen_2(this, tbl_xwwl_item, index);
                                                goto Label_53E2;
                                    }
                                    break;
                        }
                        if (num11 == 0x3b9acb9f)
                        {
                              if (base.FLD_TINH_NHAN == "")
                              {
                                    goto Label_161A;
                              }
                              Players players = World.smethod_2(base.FLD_TINH_NHAN);
                              if (players == null)
                              {
                                    goto Label_160B;
                              }
                              base.ITEM_SU_DUNG_NHAN(index, 1, 1);
                              this.Move(players.CharacterCoords_X, players.CharacterCoords_Y, players.CharacterCoords_Z, players.CharacterCoords_Map);
                              this.NHAN_VAT_PHAT_SANG();
                        }
                        else
                        {
                              if (num11 != 0x3b9acba0)
                              {
                                    goto Label_4AC8;
                              }
                              if (base.FLD_TINH_NHAN == "")
                              {
                                    goto Label_1638;
                              }
                              Players players2 = World.smethod_2(base.FLD_TINH_NHAN);
                              if (players2 == null)
                              {
                                    goto Label_1629;
                              }
                              base.ITEM_SU_DUNG_NHAN(index, 1, 1);
                              this.Move(players2.CharacterCoords_X, players2.CharacterCoords_Y, players2.CharacterCoords_Z, players2.CharacterCoords_Map);
                              this.NHAN_VAT_PHAT_SANG();
                        }
                        goto Label_53E2;
                        Label_160B:
                        base.ITEM_SU_DUNG_NHAN(index, 1, 3);
                        goto Label_53E2;
                        Label_161A:
                        base.ITEM_SU_DUNG_NHAN(index, 1, 7);
                        goto Label_53E2;
                        Label_1629:
                        base.ITEM_SU_DUNG_NHAN(index, 1, 3);
                        goto Label_53E2;
                        Label_1638:
                        base.ITEM_SU_DUNG_NHAN(index, 1, 7);
                        goto Label_53E2;
                        Label_1647:
                        if (num11 > 0x3b9accd0)
                        {
                              goto Label_1DF3;
                        }
                        switch (num11)
                        {
                              case 0x3b9acc34:
                                    TBL_XWWL_KONGFU.smethod_11(this, 0, 0x13, index);
                                    goto Label_53E2;

                              case 0x3b9acc35:
                                    TBL_XWWL_KONGFU.smethod_11(this, 0, 0x15, index);
                                    goto Label_53E2;

                              case 0x3b9acc36:
                                    TBL_XWWL_KONGFU.smethod_11(this, 0, 0x15, index);
                                    goto Label_53E2;

                              case 0x3b9acc37:
                                    TBL_XWWL_KONGFU.Learn_Skill_Hankwang1(this, tbl_xwwl_item, index);
                                    goto Label_53E2;

                              case 0x3b9acc38:
                                    TBL_XWWL_KONGFU.Learn_Skill_Hankwang2(this, tbl_xwwl_item, index);
                                    goto Label_53E2;

                              case 0x3b9acc39:
                                    TBL_XWWL_KONGFU.Learn_Skill_Hankwang3(this, tbl_xwwl_item, index);
                                    goto Label_53E2;

                              case 0x3b9acc3a:
                                    TBL_XWWL_KONGFU.smethod_11(this, 0, 0x1f, index);
                                    goto Label_53E2;

                              case 0x3b9acbf3:
                                    TBL_XWWL_KONGFU.Learn_Martial_Gen_3(this, tbl_xwwl_item, index);
                                    goto Label_53E2;

                              case 0x3b9acbd0:
                                    TBL_XWWL_KONGFU.Learn_Martial_Gen_3(this, tbl_xwwl_item, index);
                                    goto Label_53E2;

                              case 0x3b9acbd1:
                                    TBL_XWWL_KONGFU.Learn_Martial_Gen_3(this, tbl_xwwl_item, index);
                                    goto Label_53E2;

                              case 0x3b9acbd2:
                                    TBL_XWWL_KONGFU.Learn_Martial_Gen_3(this, tbl_xwwl_item, index);
                                    goto Label_53E2;

                              case 0x3b9acbd3:
                                    TBL_XWWL_KONGFU.Learn_Martial_Gen_3(this, tbl_xwwl_item, index);
                                    goto Label_53E2;

                              case 0x3b9acbd4:
                                    TBL_XWWL_KONGFU.Learn_Martial_Gen_3(this, tbl_xwwl_item, index);
                                    goto Label_53E2;

                              case 0x3b9acbd5:
                                    TBL_XWWL_KONGFU.Learn_Martial_Gen_3(this, tbl_xwwl_item, index);
                                    goto Label_53E2;

                              case 0x3b9acbd6:
                                    TBL_XWWL_KONGFU.Learn_Martial_Gen_3(this, tbl_xwwl_item, index);
                                    goto Label_53E2;

                              case 0x3b9acbd7:
                                    TBL_XWWL_KONGFU.Learn_Martial_Gen_3(this, tbl_xwwl_item, index);
                                    goto Label_53E2;

                              case 0x3b9acbd8:
                                    TBL_XWWL_KONGFU.Learn_Martial_Gen_3(this, tbl_xwwl_item, index);
                                    goto Label_53E2;

                              case 0x3b9acbd9:
                                    TBL_XWWL_KONGFU.Learn_Martial_Gen_3(this, tbl_xwwl_item, index);
                                    goto Label_53E2;

                              case 0x3b9acbda:
                                    TBL_XWWL_KONGFU.Learn_Martial_Gen_3(this, tbl_xwwl_item, index);
                                    goto Label_53E2;

                              case 0x3b9acbdb:
                                    TBL_XWWL_KONGFU.Learn_Martial_Gen_3(this, tbl_xwwl_item, index);
                                    goto Label_53E2;

                              case 0x3b9acbf0:
                                    TBL_XWWL_KONGFU.Learn_Martial_Gen_3(this, tbl_xwwl_item, index);
                                    goto Label_53E2;

                              case 0x3b9acc69:
                                    {
                                          TBL_XWWL_MAP tbl_xwwl_map11 = new TBL_XWWL_MAP(base.CharacterCoords_X, base.CharacterCoords_Y, base.CharacterCoords_Z, base.CharacterCoords_Map);
                                          if (base.hashtable_0.ContainsKey(1))
                                          {
                                                base.hashtable_0.Remove(1);
                                          }
                                          base.hashtable_0.Add(1, tbl_xwwl_map11);
                                          this.Move(1900f, -820f, 15f, 0x1389);
                                          base.UseItem(index, 1);
                                          goto Label_53E2;
                                    }
                              case 0x3b9acc83:
                                    if (base.Player_FLD_JOB_LEVEL < 6)
                                    {
                                          base.GameMessage("Only later can enter heaven", 9, "system hint");
                                    }
                                    else
                                    {
                                          TBL_XWWL_MAP tbl_xwwl_map10 = new TBL_XWWL_MAP(base.CharacterCoords_X, base.CharacterCoords_Y, base.CharacterCoords_Z, base.CharacterCoords_Map);
                                          if (base.hashtable_0.ContainsKey(1))
                                          {
                                                base.hashtable_0.Remove(1);
                                          }
                                          base.hashtable_0.Add(1, tbl_xwwl_map10);
                                          this.Move(-1900f, 2000f, 15f, 0x620c);
                                          base.UseItem(index, 1);
                                    }
                                    goto Label_53E2;

                              case 0x3b9accca:
                                    base.int_15++;
                                    base.UseItem(index, 1);
                                    base.UpdatePowersAndStatus();
                                    goto Label_53E2;

                              case 0x3b9acccd:
                                    if (base.Player_FLD_JOB_LEVEL < 2)
                                    {
                                          goto Label_53E2;
                                    }
                                    if (!base.Add_Status_List.ContainsKey(0x3b9acdc1))
                                    {
                                          break;
                                    }
                                    return;

                              case 0x3b9accce:
                                    if (base.Player_FLD_JOB_LEVEL < 3)
                                    {
                                          goto Label_53E2;
                                    }
                                    if (!base.Add_Status_List.ContainsKey(0x3b9acdc1))
                                    {
                                          goto Label_1BB2;
                                    }
                                    return;

                              case 0x3b9acccf:
                                    if (base.Player_FLD_JOB_LEVEL < 4)
                                    {
                                          goto Label_53E2;
                                    }
                                    if (!base.Add_Status_List.ContainsKey(0x3b9acdc1))
                                    {
                                          goto Label_1C72;
                                    }
                                    return;

                              case 0x3b9accd0:
                                    if (base.Player_FLD_JOB_LEVEL < 5)
                                    {
                                          goto Label_53E2;
                                    }
                                    if (!base.Add_Status_List.ContainsKey(0x3b9acdc1))
                                    {
                                          goto Label_1D32;
                                    }
                                    return;

                              case 0x3b9acc94:
                                    if (base.Player_FLD_JOB_LEVEL < 6)
                                    {
                                          base.GameMessage("Only later can enter heaven", 9, "system hint");
                                    }
                                    else
                                    {
                                          TBL_XWWL_MAP tbl_xwwl_map9 = new TBL_XWWL_MAP(base.CharacterCoords_X, base.CharacterCoords_Y, base.CharacterCoords_Z, base.CharacterCoords_Map);
                                          if (base.hashtable_0.ContainsKey(1))
                                          {
                                                base.hashtable_0.Remove(1);
                                          }
                                          base.hashtable_0.Add(1, tbl_xwwl_map9);
                                          this.Move(1987f, -2030f, 15f, 0x6590);
                                          base.UseItem(index, 1);
                                    }
                                    goto Label_53E2;

                              default:
                                    goto Label_4AC8;
                        }
                        if (((base.Add_Status_List.ContainsKey(0x3b9acdc0) || base.Add_Status_List.ContainsKey(0x3b9acdbf)) || (base.Add_Status_List.ContainsKey(0x3b9acccd) || base.Add_Status_List.ContainsKey(0x3b9accce))) || (base.Add_Status_List.ContainsKey(0x3b9acccf) || base.Add_Status_List.ContainsKey(0x3b9accd0)))
                        {
                              return;
                        }
                        Additional_Sate_Class class7 = new Additional_Sate_Class(this, 0x493e0, key, 1);
                        base.Add_Status_List.Add(class7.FLD_PID, class7);
                        base.FLD_nhan_vat_vo_cong_luc_cong_kich_tang_cuong_ti_le_phan_tram += 0.1;
                        base.UseItem2(index, 1);
                        this.method_436(6);
                        goto Label_53E2;
                        Label_1BB2:
                        if (((base.Add_Status_List.ContainsKey(0x3b9acdc0) || base.Add_Status_List.ContainsKey(0x3b9acdbf)) || (base.Add_Status_List.ContainsKey(0x3b9acccd) || base.Add_Status_List.ContainsKey(0x3b9accce))) || (base.Add_Status_List.ContainsKey(0x3b9acccf) || base.Add_Status_List.ContainsKey(0x3b9accd0)))
                        {
                              return;
                        }
                        Additional_Sate_Class class8 = new Additional_Sate_Class(this, 0x493e0, key, 1);
                        base.Add_Status_List.Add(class8.FLD_PID, class8);
                        base.FLD_nhan_vat_vo_cong_luc_cong_kich_tang_cuong_ti_le_phan_tram += 0.12;
                        base.UseItem2(index, 1);
                        this.method_436(7);
                        goto Label_53E2;
                        Label_1C72:
                        if (((base.Add_Status_List.ContainsKey(0x3b9acdc0) || base.Add_Status_List.ContainsKey(0x3b9acdbf)) || (base.Add_Status_List.ContainsKey(0x3b9acccd) || base.Add_Status_List.ContainsKey(0x3b9accce))) || (base.Add_Status_List.ContainsKey(0x3b9acccf) || base.Add_Status_List.ContainsKey(0x3b9accd0)))
                        {
                              return;
                        }
                        Additional_Sate_Class class9 = new Additional_Sate_Class(this, 0x493e0, key, 1);
                        base.Add_Status_List.Add(class9.FLD_PID, class9);
                        base.FLD_nhan_vat_vo_cong_luc_cong_kich_tang_cuong_ti_le_phan_tram += 0.14;
                        base.UseItem2(index, 1);
                        this.method_436(8);
                        goto Label_53E2;
                        Label_1D32:
                        if (((base.Add_Status_List.ContainsKey(0x3b9acdc0) || base.Add_Status_List.ContainsKey(0x3b9acdbf)) || (base.Add_Status_List.ContainsKey(0x3b9acccd) || base.Add_Status_List.ContainsKey(0x3b9accce))) || (base.Add_Status_List.ContainsKey(0x3b9acccf) || base.Add_Status_List.ContainsKey(0x3b9accd0)))
                        {
                              return;
                        }
                        Additional_Sate_Class class10 = new Additional_Sate_Class(this, 0x493e0, key, 1);
                        base.Add_Status_List.Add(class10.FLD_PID, class10);
                        base.FLD_nhan_vat_vo_cong_luc_cong_kich_tang_cuong_ti_le_phan_tram += 0.16;
                        base.UseItem2(index, 1);
                        this.method_436(9);
                        goto Label_53E2;
                        Label_1DF3:
                        if (num11 > 0x3b9acd3e)
                        {
                              goto Label_1F9F;
                        }
                        switch (num11)
                        {
                              case 0x3b9acd2f:
                                    if (!base.Add_Status_List.ContainsKey(0x3b9acd2f))
                                    {
                                          break;
                                    }
                                    return;

                              case 0x3b9acd30:
                                    if (!base.Add_Status_List.ContainsKey(0x3b9acd30))
                                    {
                                          goto Label_1F38;
                                    }
                                    return;

                              case 0x3b9acd3e:
                                    {
                                          if (base.Add_Status_List.ContainsKey(0x3b9acd3e))
                                          {
                                                return;
                                          }
                                          int num18 = int.Parse(World.Tang_cuong_sinh_menh_duoc_pham[2]);
                                          Additional_Sate_Class class42 = new Additional_Sate_Class(this, num18, key, 1);
                                          base.Add_Status_List.Add(class42.FLD_PID, class42);
                                          base.Nhan_vat_them_vao_lon_nhat_HP += int.Parse(World.Tang_cuong_sinh_menh_duoc_pham[1]);
                                          this.Status_Effect(dst, 1, num18);
                                          this.VAT_PHAM_GIAM_DI_THUOC_TINH_SO_LUONG(index, 1);
                                          base.UpdatePowersAndStatus();
                                          goto Label_53E2;
                                    }
                              default:
                                    goto Label_4AC8;
                        }
                        int num14 = int.Parse(World.Tang_cuong_cong_kich_duoc_pham[2]);
                        Additional_Sate_Class class11 = new Additional_Sate_Class(this, num14, key, 1);
                        base.Add_Status_List.Add(class11.FLD_PID, class11);
                        base.FLD_nhan_vat_them_vao_cong_kich += int.Parse(World.Tang_cuong_cong_kich_duoc_pham[1]);
                        this.Status_Effect(dst, 1, num14);
                        this.VAT_PHAM_GIAM_DI_THUOC_TINH_SO_LUONG(index, 1);
                        base.UpdatePowersAndStatus();
                        goto Label_53E2;
                        Label_1F38:
                        num7 = int.Parse(World.Tang_cuong_phong_ngu_duoc_pham[2]);
                        Additional_Sate_Class class12 = new Additional_Sate_Class(this, num7, key, 1);
                        base.Add_Status_List.Add(class12.FLD_PID, class12);
                        base.FLD_nhan_vat_them_vao_phong_ngu += int.Parse(World.Tang_cuong_phong_ngu_duoc_pham[1]);
                        this.Status_Effect(dst, 1, num7);
                        this.VAT_PHAM_GIAM_DI_THUOC_TINH_SO_LUONG(index, 1);
                        base.UpdatePowersAndStatus();
                        goto Label_53E2;
                        Label_1F9F:
                        switch (num11)
                        {
                              case 0x3b9acd8e:
                                    {
                                          Players players3 = World.smethod_1(num9);
                                          if (players3 != null)
                                          {
                                                base.UseItem(index, 1);
                                                players3.NHAN_VAT_PHAT_SANG_2(key);
                                          }
                                          goto Label_53E2;
                                    }
                              case 0x3b9acd8f:
                                    {
                                          Players players4 = World.smethod_1(num9);
                                          if (players4 != null)
                                          {
                                                base.UseItem(index, 1);
                                                players4.NHAN_VAT_PHAT_SANG_2(key);
                                          }
                                          goto Label_53E2;
                                    }
                              case 0x3b9acd90:
                                    {
                                          Players players5 = World.smethod_1(num9);
                                          if (players5 != null)
                                          {
                                                base.UseItem(index, 1);
                                                players5.NHAN_VAT_PHAT_SANG_2(key);
                                          }
                                          goto Label_53E2;
                                    }
                              case 0x3b9acd91:
                                    {
                                          Players players6 = World.smethod_1(num9);
                                          if (players6 != null)
                                          {
                                                base.UseItem(index, 1);
                                                players6.NHAN_VAT_PHAT_SANG_2(key);
                                          }
                                          goto Label_53E2;
                                    }
                              case 0x3b9acd92:
                                    {
                                          Players players7 = World.smethod_1(num9);
                                          if (players7 != null)
                                          {
                                                base.UseItem(index, 1);
                                                players7.NHAN_VAT_PHAT_SANG_2(key);
                                          }
                                          goto Label_53E2;
                                    }
                              case 0x3b9acd93:
                                    {
                                          Players players8 = World.smethod_1(num9);
                                          if (players8 != null)
                                          {
                                                base.UseItem(index, 1);
                                                players8.NHAN_VAT_PHAT_SANG_2(key);
                                          }
                                          goto Label_53E2;
                                    }
                              case 0x3b9acd83:
                                    goto Label_42CA;

                              default:
                                    switch (num11)
                                    {
                                          case 0x3b9acdbf:
                                                if (base.Player_FLD_JOB_LEVEL < 6)
                                                {
                                                      goto Label_53E2;
                                                }
                                                if (!base.Add_Status_List.ContainsKey(0x3b9acdc1))
                                                {
                                                      goto Label_214C;
                                                }
                                                return;

                                          case 0x3b9acdc0:
                                                if (base.Player_FLD_JOB_LEVEL < 7)
                                                {
                                                      goto Label_53E2;
                                                }
                                                if (!base.Add_Status_List.ContainsKey(0x3b9acdc1))
                                                {
                                                      goto Label_220D;
                                                }
                                                return;

                                          case 0x3b9acdc1:
                                                if (base.Player_FLD_JOB_LEVEL < 6)
                                                {
                                                      goto Label_53E2;
                                                }
                                                if (!base.Add_Status_List.ContainsKey(0x3b9acdc1))
                                                {
                                                      goto Label_22CE;
                                                }
                                                return;
                                    }
                                    goto Label_4AC8;
                        }
                        Label_214C:
                        if (((base.Add_Status_List.ContainsKey(0x3b9acdc0) || base.Add_Status_List.ContainsKey(0x3b9acdbf)) || (base.Add_Status_List.ContainsKey(0x3b9acccd) || base.Add_Status_List.ContainsKey(0x3b9accce))) || (base.Add_Status_List.ContainsKey(0x3b9acccf) || base.Add_Status_List.ContainsKey(0x3b9accd0)))
                        {
                              return;
                        }
                        Additional_Sate_Class class13 = new Additional_Sate_Class(this, 0x493e0, key, 1);
                        base.Add_Status_List.Add(class13.FLD_PID, class13);
                        base.FLD_nhan_vat_vo_cong_luc_cong_kich_tang_cuong_ti_le_phan_tram += 0.19;
                        base.UseItem2(index, 1);
                        this.method_436(9);
                        goto Label_53E2;
                        Label_220D:
                        if (((base.Add_Status_List.ContainsKey(0x3b9acdc0) || base.Add_Status_List.ContainsKey(0x3b9acdbf)) || (base.Add_Status_List.ContainsKey(0x3b9acccd) || base.Add_Status_List.ContainsKey(0x3b9accce))) || (base.Add_Status_List.ContainsKey(0x3b9acccf) || base.Add_Status_List.ContainsKey(0x3b9accd0)))
                        {
                              return;
                        }
                        Additional_Sate_Class class14 = new Additional_Sate_Class(this, 0x493e0, key, 1);
                        base.Add_Status_List.Add(class14.FLD_PID, class14);
                        base.FLD_nhan_vat_vo_cong_luc_cong_kich_tang_cuong_ti_le_phan_tram += 0.22;
                        base.UseItem2(index, 1);
                        this.method_436(9);
                        goto Label_53E2;
                        Label_22CE:
                        if (((base.Add_Status_List.ContainsKey(0x3b9acdc0) || base.Add_Status_List.ContainsKey(0x3b9acdbf)) || (base.Add_Status_List.ContainsKey(0x3b9acccd) || base.Add_Status_List.ContainsKey(0x3b9accce))) || (base.Add_Status_List.ContainsKey(0x3b9acccf) || base.Add_Status_List.ContainsKey(0x3b9accd0)))
                        {
                              return;
                        }
                        Additional_Sate_Class class15 = new Additional_Sate_Class(this, 0x493e0, key, 1);
                        base.Add_Status_List.Add(class15.FLD_PID, class15);
                        base.FLD_nhan_vat_vo_cong_luc_cong_kich_tang_cuong_ti_le_phan_tram += 0.25;
                        base.UseItem2(index, 1);
                        this.method_436(9);
                        goto Label_53E2;
                        Label_238F:
                        if (num11 > 0x3c14dc6e)
                        {
                              goto Label_2E81;
                        }
                        if (num11 > 0x3c0599c7)
                        {
                              goto Label_286D;
                        }
                        switch (num11)
                        {
                              case 0x3b9acdc9:
                                    base.Increase_HP(700);
                                    base.UseItem(index, 1);
                                    this.UONG_THUOC_HIEU_QUA(key);
                                    goto Label_53E2;

                              case 0x3b9acdca:
                                    base.Increase_HP(850);
                                    base.UseItem(index, 1);
                                    this.UONG_THUOC_HIEU_QUA(key);
                                    goto Label_53E2;

                              case 0x3b9acdcb:
                                    base.Plus_Magic(700);
                                    base.UseItem(index, 1);
                                    this.UONG_THUOC_HIEU_QUA(key);
                                    goto Label_53E2;

                              case 0x3b9acdcc:
                                    base.Plus_Magic(850);
                                    base.UseItem(index, 1);
                                    this.UONG_THUOC_HIEU_QUA(key);
                                    goto Label_53E2;

                              case 0x3b9acdf1:
                                    TBL_XWWL_KONGFU.smethod_11(this, 1, 5, index);
                                    goto Label_53E2;

                              case 0x3b9acdf5:
                                    TBL_XWWL_KONGFU.Learn_Skill_Harin3(this, tbl_xwwl_item, index);
                                    goto Label_53E2;

                              case 0x3b9ace08:
                                    TBL_XWWL_KONGFU.Learn_Martial_Gen_4(this, tbl_xwwl_item, index);
                                    goto Label_53E2;

                              case 0x3b9ace09:
                                    TBL_XWWL_KONGFU.Learn_Martial_Gen_4(this, tbl_xwwl_item, index);
                                    goto Label_53E2;

                              case 0x3b9ace0a:
                                    TBL_XWWL_KONGFU.Learn_Martial_Gen_4(this, tbl_xwwl_item, index);
                                    goto Label_53E2;

                              case 0x3b9ace0b:
                                    TBL_XWWL_KONGFU.Learn_Martial_Gen_4(this, tbl_xwwl_item, index);
                                    goto Label_53E2;

                              case 0x3b9ace0c:
                                    TBL_XWWL_KONGFU.Learn_Martial_Gen_4(this, tbl_xwwl_item, index);
                                    goto Label_53E2;

                              case 0x3b9ace0d:
                                    TBL_XWWL_KONGFU.Learn_Martial_Gen_4(this, tbl_xwwl_item, index);
                                    goto Label_53E2;

                              case 0x3b9ace0e:
                                    TBL_XWWL_KONGFU.Learn_Martial_Gen_4(this, tbl_xwwl_item, index);
                                    goto Label_53E2;

                              case 0x3b9ace0f:
                                    TBL_XWWL_KONGFU.Learn_Martial_Gen_4(this, tbl_xwwl_item, index);
                                    goto Label_53E2;

                              case 0x3b9ace10:
                                    TBL_XWWL_KONGFU.Learn_Martial_Gen_4(this, tbl_xwwl_item, index);
                                    goto Label_53E2;

                              case 0x3b9ace11:
                                    TBL_XWWL_KONGFU.Learn_Martial_Gen_4(this, tbl_xwwl_item, index);
                                    goto Label_53E2;

                              case 0x3b9ace12:
                                    TBL_XWWL_KONGFU.Learn_Martial_Gen_4(this, tbl_xwwl_item, index);
                                    goto Label_53E2;

                              case 0x3b9ace13:
                                    TBL_XWWL_KONGFU.Learn_Martial_Gen_4(this, tbl_xwwl_item, index);
                                    goto Label_53E2;

                              case 0x3b9ace14:
                                    TBL_XWWL_KONGFU.Learn_Martial_Gen_4(this, tbl_xwwl_item, index);
                                    goto Label_53E2;

                              case 0x3b9ace15:
                                    TBL_XWWL_KONGFU.Learn_Martial_Gen_4(this, tbl_xwwl_item, index);
                                    goto Label_53E2;

                              case 0x3b9ace16:
                                    TBL_XWWL_KONGFU.Learn_Skill_Hankwang4(this, tbl_xwwl_item, index);
                                    goto Label_53E2;

                              case 0x3b9ace17:
                                    TBL_XWWL_KONGFU.Learn_Skill_Harin4(this, tbl_xwwl_item, index);
                                    goto Label_53E2;

                              case 0x3b9ace19:
                                    TBL_XWWL_KONGFU.smethod_11(this, 1, 0x19, index);
                                    goto Label_53E2;

                              case 0x3b9ace1a:
                                    TBL_XWWL_KONGFU.smethod_11(this, 1, 13, index);
                                    goto Label_53E2;

                              case 0x3b9ace52:
                                    TBL_XWWL_KONGFU.Learn_Martial_Gen_1(this, tbl_xwwl_item, index);
                                    goto Label_53E2;

                              case 0x3b9ace53:
                                    TBL_XWWL_KONGFU.Learn_Martial_Gen_1(this, tbl_xwwl_item, index);
                                    goto Label_53E2;

                              case 0x3b9ace54:
                                    TBL_XWWL_KONGFU.Learn_Martial_Gen_2(this, tbl_xwwl_item, index);
                                    goto Label_53E2;

                              case 0x3b9ace55:
                                    TBL_XWWL_KONGFU.Learn_Martial_Gen_2(this, tbl_xwwl_item, index);
                                    goto Label_53E2;

                              case 0x3b9ace56:
                                    TBL_XWWL_KONGFU.Learn_Martial_Gen_3(this, tbl_xwwl_item, index);
                                    goto Label_53E2;

                              case 0x3b9ace57:
                                    TBL_XWWL_KONGFU.Learn_Martial_Gen_3(this, tbl_xwwl_item, index);
                                    goto Label_53E2;

                              case 0x3b9ace58:
                                    TBL_XWWL_KONGFU.Learn_Martial_Gen_4(this, tbl_xwwl_item, index);
                                    goto Label_53E2;

                              case 0x3b9ace59:
                                    TBL_XWWL_KONGFU.Learn_Martial_Gen_4(this, tbl_xwwl_item, index);
                                    goto Label_53E2;

                              case 0x3c0599c5:
                                    if (!base.Add_Status_List.ContainsKey(0x3c0599c5))
                                    {
                                          break;
                                    }
                                    return;

                              case 0x3c0599c6:
                                    if (!base.Add_Status_List.ContainsKey(0x3c0599c5))
                                    {
                                          goto Label_276B;
                                    }
                                    return;

                              case 0x3c0599c7:
                                    if (!base.Add_Status_List.ContainsKey(0x3c0599c5))
                                    {
                                          goto Label_27EC;
                                    }
                                    return;

                              default:
                                    goto Label_4AC8;
                        }
                        if (base.Add_Status_List.ContainsKey(0x3c0599c7) || base.Add_Status_List.ContainsKey(0x3c0599c6))
                        {
                              return;
                        }
                        this.VAT_PHAM_GIAM_DI_THUOC_TINH_SO_LUONG(index, 1);
                        Additional_Sate_Class class16 = new Additional_Sate_Class(this, 0x36ee80, key, 1);
                        base.Add_Status_List.Add(class16.FLD_PID, class16);
                        base.Nhan_vat_them_vao_lon_nhat_HP += 300;
                        this.Status_Effect(dst, 1, 0x36ee80);
                        base.UpdatePowersAndStatus();
                        goto Label_53E2;
                        Label_276B:
                        if (base.Add_Status_List.ContainsKey(0x3c0599c7) || base.Add_Status_List.ContainsKey(0x3c0599c6))
                        {
                              return;
                        }
                        this.VAT_PHAM_GIAM_DI_THUOC_TINH_SO_LUONG(index, 1);
                        Additional_Sate_Class class17 = new Additional_Sate_Class(this, 0x36ee80, key, 1);
                        base.Add_Status_List.Add(class17.FLD_PID, class17);
                        base.Nhan_vat_them_vao_lon_nhat_HP += 500;
                        this.Status_Effect(dst, 1, 0x36ee80);
                        base.UpdatePowersAndStatus();
                        goto Label_53E2;
                        Label_27EC:
                        if (base.Add_Status_List.ContainsKey(0x3c0599c7) || base.Add_Status_List.ContainsKey(0x3c0599c6))
                        {
                              return;
                        }
                        this.VAT_PHAM_GIAM_DI_THUOC_TINH_SO_LUONG(index, 1);
                        Additional_Sate_Class class18 = new Additional_Sate_Class(this, 0x1b77400, key, 1);
                        base.Add_Status_List.Add(class18.FLD_PID, class18);
                        base.Nhan_vat_them_vao_lon_nhat_HP += 700;
                        this.Status_Effect(dst, 1, 0x1b77400);
                        base.UpdatePowersAndStatus();
                        goto Label_53E2;
                        Label_286D:
                        if (num11 > 0x3c14dc2d)
                        {
                              goto Label_297C;
                        }
                        switch (num11)
                        {
                              case 0x3c14dc06:
                                    if (base.NHAN_VAT_MP < base.NHAN_VAT_LON_NHAT_MP)
                                    {
                                          goto Label_294B;
                                    }
                                    return;

                              case 0x3c14dc2c:
                                    if (base.NHAN_VAT_HP < base.NHAN_VAT_LON_NHAT_HP)
                                    {
                                          break;
                                    }
                                    return;

                              case 0x3c14dc2d:
                                    if (base.NHAN_VAT_MP < base.NHAN_VAT_LON_NHAT_MP)
                                    {
                                          goto Label_294B;
                                    }
                                    return;

                              case 0x3c0599cd:
                                    this.VAT_PHAM_GIAM_DI_THUOC_TINH_SO_LUONG(index, 1);
                                    this.PHAO_HOA();
                                    goto Label_53E2;

                              case 0x3c14dc03:
                                    if (base.NHAN_VAT_HP < base.NHAN_VAT_LON_NHAT_HP)
                                    {
                                          break;
                                    }
                                    return;

                              default:
                                    goto Label_4AC8;
                        }
                        int hP = (int)(base.NHAN_VAT_LON_NHAT_HP - base.NHAN_VAT_HP);
                        base.Increase_HP(hP);
                        base.ITEM_SU_DUNG_NGAN_NAM_TUYEN_NHAN_SAM(index, hP);
                        this.UONG_THUOC_HIEU_QUA(0x3b9aca65);
                        goto Label_53E2;
                        Label_294B:
                        num5 = base.NHAN_VAT_LON_NHAT_MP - base.NHAN_VAT_MP;
                        base.Plus_Magic(num5);
                        base.ITEM_SU_DUNG_NGAN_NAM_TUYEN_NHAN_SAM(index, num5);
                        this.UONG_THUOC_HIEU_QUA(0x3b9aca68);
                        goto Label_53E2;
                        Label_297C:
                        switch (num11)
                        {
                              case 0x3c14dc35:
                                    if (!base.Add_Status_List.ContainsKey(0x3c14dc35))
                                    {
                                          goto Label_2DC9;
                                    }
                                    return;

                              case 0x3c14dc36:
                                    if (!base.Add_Status_List.ContainsKey(0x3c14dc36))
                                    {
                                          goto Label_2E25;
                                    }
                                    return;

                              case 0x3c14dc37:
                                    {
                                          int num19 = 0x36ee80;
                                          base.UseItem(index, 1);
                                          if (base.Add_Status_List.ContainsKey(0x3c0599c5))
                                          {
                                                base.Add_Status_List[0x3c0599c5].THOI_GIAN_KET_THUC_SU_KIEN();
                                          }
                                          this.Status_Effect(BitConverter.GetBytes(0x3c0599c5), 1, num19);
                                          Additional_Sate_Class class43 = new Additional_Sate_Class(this, num19, 0x3c0599c5, 1);
                                          base.Add_Status_List.Add(class43.FLD_PID, class43);
                                          base.Nhan_vat_them_vao_lon_nhat_HP += 300;
                                          if (base.Add_Status_List.ContainsKey(0x3c14dc10))
                                          {
                                                base.Add_Status_List[0x3c14dc10].THOI_GIAN_KET_THUC_SU_KIEN();
                                          }
                                          this.Status_Effect(BitConverter.GetBytes(0x3c14dc10), 1, num19);
                                          class43 = new Additional_Sate_Class(this, num19, 0x3c14dc10, 1);
                                          base.Add_Status_List.Add(class43.FLD_PID, class43);
                                          base.addFLD_ATT_Percentage(0.1M);
                                          if (base.Add_Status_List.ContainsKey(0x3c14dc11))
                                          {
                                                base.Add_Status_List[0x3c14dc11].THOI_GIAN_KET_THUC_SU_KIEN();
                                          }
                                          this.Status_Effect(BitConverter.GetBytes(0x3c14dc11), 1, num19 += 0xbb8);
                                          class43 = new Additional_Sate_Class(this, num19, 0x3c14dc11, 1);
                                          base.Add_Status_List.Add(class43.FLD_PID, class43);
                                          base.addFLD_DEF_Percentage(0.1M);
                                          if (base.Add_Status_List.ContainsKey(0x3c14dc12))
                                          {
                                                base.Add_Status_List[0x3c14dc12].THOI_GIAN_KET_THUC_SU_KIEN();
                                          }
                                          this.Status_Effect(BitConverter.GetBytes(0x3c14dc12), 1, num19 += 0xbb8);
                                          class43 = new Additional_Sate_Class(this, num19, 0x3c14dc12, 1);
                                          base.Add_Status_List.Add(class43.FLD_PID, class43);
                                          base.ADD_FLD_trang_bi_them_vao_vu_khi_cuong_hoa(2);
                                          if (base.Add_Status_List.ContainsKey(0x3c14dc13))
                                          {
                                                base.Add_Status_List[0x3c14dc13].THOI_GIAN_KET_THUC_SU_KIEN();
                                          }
                                          this.Status_Effect(BitConverter.GetBytes(0x3c14dc13), 1, num19 += 0xbb8);
                                          class43 = new Additional_Sate_Class(this, num19, 0x3c14dc13, 1);
                                          base.Add_Status_List.Add(class43.FLD_PID, class43);
                                          base.ADD_FLD_trang_bi_them_vao_Phong_cu_Cuong_hoa(1);
                                          base.TINH_TOAN_NHAN_VAT_TRANG_BI_SO_LIEU();
                                          base.UpdatePowersAndStatus();
                                          goto Label_53E2;
                                    }
                              default:
                                    switch (num11)
                                    {
                                          case 0x3c14dc4d:
                                                if (base.NHAN_VAT_HP < base.NHAN_VAT_LON_NHAT_HP)
                                                {
                                                      break;
                                                }
                                                return;

                                          case 0x3c14dc4e:
                                                if (base.NHAN_VAT_MP < base.NHAN_VAT_LON_NHAT_MP)
                                                {
                                                      break;
                                                }
                                                return;

                                          case 0x3c14dc6e:
                                                {
                                                      List<TBL_XWWL_MONSTER> list = new List<TBL_XWWL_MONSTER>();
                                                      foreach (TBL_XWWL_MONSTER tbl_xwwl_monster in World.dictionary_13.Values)
                                                      {
                                                            if (tbl_xwwl_monster.FLD_BOSS == 1)
                                                            {
                                                                  list.Add(tbl_xwwl_monster);
                                                            }
                                                      }
                                                      int num20 = new Random().Next(0, list.Count);
                                                      World.smethod_20(list[num20].FLD_PID, base.CharacterCoords_X, base.CharacterCoords_Y, base.CharacterCoords_Map);
                                                      this.VAT_PHAM_GIAM_DI_THUOC_TINH_SO_LUONG(index, 1);
                                                      goto Label_53E2;
                                                }
                                    }
                                    goto Label_4AC8;
                        }
                        int mANA = base.NHAN_VAT_LON_NHAT_MP - base.NHAN_VAT_MP;
                        base.Plus_Magic(mANA);
                        base.ITEM_SU_DUNG_VO_SONG_NGAN_NAM_TUYEN_NHAN_SAM(index, mANA);
                        this.UONG_THUOC_HIEU_QUA(0x3b9aca68);
                        if (base.Add_Status_List.ContainsKey(0x3b9acd08))
                        {
                              base.Add_Status_List[0x3b9acd08].THOI_GIAN_KET_THUC_SU_KIEN();
                        }
                        this.Status_Effect(BitConverter.GetBytes(0x3b9acd08), 1, 0x2710);
                        Additional_Sate_Class class20 = new Additional_Sate_Class(this, 0x2710, 0x3b9acd08, 0);
                        base.Add_Status_List.Add(class20.FLD_PID, class20);
                        base.FLD_nhan_vat_vo_cong_luc_cong_kich_tang_cuong_ti_le_phan_tram += 0.05;
                        base.FLD_nhan_vat_vo_cong_suc_phong_ngu_tang_cuong_ti_le_phan_tram += 0.1;
                        base.UpdatePowersAndStatus();
                        goto Label_53E2;
                        Label_2DC9:
                        class2 = new Additional_Sate_Class(this, 0x36ee80, key, 1);
                        base.Add_Status_List.Add(class2.FLD_PID, class2);
                        base.FLD_nhan_vat_vo_cong_luc_cong_kich_tang_cuong_ti_le_phan_tram += 0.05;
                        this.Status_Effect(dst, 1, 0x36ee80);
                        this.VAT_PHAM_GIAM_DI_THUOC_TINH_SO_LUONG(index, 1);
                        base.UpdatePowersAndStatus();
                        goto Label_53E2;
                        Label_2E25:
                        class3 = new Additional_Sate_Class(this, 0x36ee80, key, 1);
                        base.Add_Status_List.Add(class3.FLD_PID, class3);
                        base.FLD_nhan_vat_vo_cong_suc_phong_ngu_tang_cuong_ti_le_phan_tram += 0.1;
                        this.Status_Effect(dst, 1, 0x36ee80);
                        this.VAT_PHAM_GIAM_DI_THUOC_TINH_SO_LUONG(index, 1);
                        base.UpdatePowersAndStatus();
                        goto Label_53E2;
                        Label_2E81:
                        if (num11 > 0x3c14dcc5)
                        {
                              goto Label_381D;
                        }
                        if (num11 <= 0x3c14dc9c)
                        {
                              if (num11 != 0x3c14dc7f)
                              {
                                    if (num11 != 0x3c14dc9c)
                                    {
                                          goto Label_4AC8;
                                    }
                                    if (base.Add_Status_List.ContainsKey(0x3c14dc9c))
                                    {
                                          return;
                                    }
                                    if (base.Add_Status_List.ContainsKey(0x3c14dcbb))
                                    {
                                          base.GameMessage("You can not use and uprightness", 50, "");
                                          return;
                                    }
                                    if (base.Add_Status_List.ContainsKey(0x3c14dcb7))
                                    {
                                          base.GameMessage("You can not use and quack Haoyue", 50, "");
                                          return;
                                    }
                                    if (base.Add_Status_List.ContainsKey(0x3c14dcc3))
                                    {
                                          base.GameMessage("You can not use and party days Linden", 50, "");
                                          return;
                                    }
                                    Additional_Sate_Class class44 = new Additional_Sate_Class(this, 0x337f9800, key, 1);
                                    base.Add_Status_List.Add(class44.FLD_PID, class44);
                                    base.Nhan_vat_them_vao_lon_nhat_HP += 300;
                                    this.Status_Effect(dst, 1, 0x337f9800);
                                    this.VAT_PHAM_GIAM_DI_THUOC_TINH_SO_LUONG(index, 1);
                                    base.UpdatePowersAndStatus();
                                    base.Update_Data_Boardcast();
                                    base.Update_Figure_Data(this);
                              }
                              else if (base.CharacterCoords_Map != 0x65)
                              {
                                    List<TBL_XWWL_MONSTER> list2 = new List<TBL_XWWL_MONSTER>();
                                    foreach (TBL_XWWL_MONSTER tbl_xwwl_monster2 in World.dictionary_13.Values)
                                    {
                                          if (tbl_xwwl_monster2.FLD_BOSS == 1)
                                          {
                                                list2.Add(tbl_xwwl_monster2);
                                          }
                                    }
                                    int num21 = new Random().Next(0, list2.Count);
                                    World.smethod_20(list2[num21].FLD_PID, base.CharacterCoords_X, base.CharacterCoords_Y, base.CharacterCoords_Map);
                                    this.VAT_PHAM_GIAM_DI_THUOC_TINH_SO_LUONG(index, 1);
                              }
                              else
                              {
                                    base.GameMessage("Hyun Bo faction can not use myrtle branches", 9, "system hint");
                              }
                        }
                        else
                        {
                              switch (num11)
                              {
                                    case 0x3c14dcb7:
                                          if (!base.Add_Status_List.ContainsKey(0x3c14dc9c))
                                          {
                                                goto Label_34B0;
                                          }
                                          base.GameMessage("You can not use and blood loyalty", 50, "");
                                          return;

                                    case 0x3c14dcb9:
                                          if (!base.Add_Status_List.ContainsKey(0x3c14dcb9))
                                          {
                                                goto Label_358E;
                                          }
                                          return;

                                    case 0x3c14dcbb:
                                          if (!base.Add_Status_List.ContainsKey(0x3c14dc9c))
                                          {
                                                goto Label_3636;
                                          }
                                          base.GameMessage("You can not use and blood loyalty", 50, "");
                                          return;

                                    case 0x3c14dcbc:
                                          if (!base.Add_Status_List.ContainsKey(0x3c14dcbc))
                                          {
                                                goto Label_3716;
                                          }
                                          return;

                                    case 0x3c14dca0:
                                          if ((!base.Add_Status_List.ContainsKey(0x3c14dd41) && !base.Add_Status_List.ContainsKey(0x3c14dd42)) && !base.Add_Status_List.ContainsKey(0x3c14dca0))
                                          {
                                                break;
                                          }
                                          return;

                                    case 0x3c14dcc2:
                                          if (!base.Add_Status_List.ContainsKey(0x3c14dcc2))
                                          {
                                                goto Label_3238;
                                          }
                                          return;

                                    case 0x3c14dcc3:
                                          if (!base.Add_Status_List.ContainsKey(0x3c14dc9c))
                                          {
                                                goto Label_32FB;
                                          }
                                          base.GameMessage("You can not use and blood loyalty", 50, "");
                                          return;

                                    case 0x3c14dcc5:
                                          if (!base.Add_Status_List.ContainsKey(0x3c14dcc5))
                                          {
                                                goto Label_33EB;
                                          }
                                          return;

                                    default:
                                          goto Label_4AC8;
                              }
                              Additional_Sate_Class class46 = new Additional_Sate_Class(this, 0x5265c00, key, 1);
                              base.Add_Status_List.Add(class46.FLD_PID, class46);
                              this.Status_Effect(dst, 1, 0x5265c00);
                              this.VAT_PHAM_GIAM_DI_THUOC_TINH_SO_LUONG(index, 1);
                              base.UpdatePowersAndStatus();
                              base.int_16 = 1;
                              base.GameMessage("You have not entered the protected mode PK others, others you can not PK！", 9, "system hint");
                        }
                        goto Label_53E2;
                        Label_3238:
                        class45 = new Additional_Sate_Class(this, 0x6ddd00, key, 1);
                        base.Add_Status_List.Add(class45.FLD_PID, class45);
                        base.Nhan_vat_them_vao_lon_nhat_HP += 0x3e8;
                        base.addFLD_ATT_Percentage(0.15M);
                        base.addFLD_DEF_Percentage(0.15M);
                        base.FLD_Nhan_vat_them_vao_kinh_nghiem_ti_le_phan_tram += 0.4;
                        base.FLD_nhan_vat_vo_cong_luc_cong_kich_tang_cuong_ti_le_phan_tram += 0.1;
                        base.FLD_nhan_vat_vo_cong_suc_phong_ngu_tang_cuong_ti_le_phan_tram += 0.1;
                        this.Status_Effect(dst, 1, 0x6ddd00);
                        this.VAT_PHAM_GIAM_DI_THUOC_TINH_SO_LUONG(index, 1);
                        base.Update_Figure_Data(this);
                        base.UpdatePowersAndStatus();
                        goto Label_53E2;
                        Label_32FB:
                        if (base.Add_Status_List.ContainsKey(0x3c14dcbb))
                        {
                              base.GameMessage("You can not use and uprightness", 50, "");
                              return;
                        }
                        if (base.Add_Status_List.ContainsKey(0x3c14dcb7))
                        {
                              base.GameMessage("You can not use and quack Haoyue", 50, "");
                              return;
                        }
                        if (base.Add_Status_List.ContainsKey(0x3c14dcc3))
                        {
                              return;
                        }
                        Additional_Sate_Class class21 = new Additional_Sate_Class(this, 0x337f9800, key, 1);
                        base.Add_Status_List.Add(class21.FLD_PID, class21);
                        base.Nhan_vat_them_vao_lon_nhat_HP += 300;
                        int num22 = base.FLD_nhan_vat_them_vao_khi_cong;
                        base.FLD_nhan_vat_them_vao_khi_cong = num22 + 1;
                        base.addFLD_DEF_Percentage(0.05M);
                        this.Status_Effect(dst, 1, 0x337f9800);
                        this.VAT_PHAM_GIAM_DI_THUOC_TINH_SO_LUONG(index, 1);
                        base.Update_Figure_Data(this);
                        base.UpdatePowersAndStatus();
                        base.Update_Data_Boardcast();
                        goto Label_53E2;
                        Label_33EB:
                        class5 = new Additional_Sate_Class(this, 0x36ee80, key, 1);
                        base.Add_Status_List.Add(class5.FLD_PID, class5);
                        base.Nhan_vat_them_vao_lon_nhat_HP += 700;
                        base.addFLD_DEF_Percentage(0.1M);
                        base.addFLD_ATT_Percentage(0.1M);
                        base.FLD_nhan_vat_vo_cong_luc_cong_kich_tang_cuong_ti_le_phan_tram += 0.05;
                        base.FLD_nhan_vat_vo_cong_suc_phong_ngu_tang_cuong_ti_le_phan_tram += 0.1;
                        base.ADD_FLD_trang_bi_them_vao_Phong_cu_Cuong_hoa(1);
                        base.ADD_FLD_trang_bi_them_vao_vu_khi_cuong_hoa(2);
                        this.Status_Effect(dst, 1, 0x36ee80);
                        this.VAT_PHAM_GIAM_DI_THUOC_TINH_SO_LUONG(index, 1);
                        base.Update_Figure_Data(this);
                        base.TINH_TOAN_NHAN_VAT_TRANG_BI_SO_LIEU();
                        base.UpdatePowersAndStatus();
                        base.Update_Data_Boardcast();
                        goto Label_53E2;
                        Label_34B0:
                        if (base.Add_Status_List.ContainsKey(0x3c14dcbb))
                        {
                              base.GameMessage("You can not use and uprightness", 50, "");
                              return;
                        }
                        if (base.Add_Status_List.ContainsKey(0x3c14dcb7))
                        {
                              return;
                        }
                        if (base.Add_Status_List.ContainsKey(0x3c14dcc3))
                        {
                              base.GameMessage("You can not use and party days Linden", 50, "");
                              return;
                        }
                        Additional_Sate_Class class22 = new Additional_Sate_Class(this, 0x337f9800, key, 1);
                        base.Add_Status_List.Add(class22.FLD_PID, class22);
                        base.Nhan_vat_them_vao_lon_nhat_HP += 300;
                        base.addFLD_DEF_Percentage(0.05M);
                        this.Status_Effect(dst, 1, 0x337f9800);
                        this.VAT_PHAM_GIAM_DI_THUOC_TINH_SO_LUONG(index, 1);
                        base.UpdatePowersAndStatus();
                        base.Update_Figure_Data(this);
                        base.Update_Data_Boardcast();
                        goto Label_53E2;
                        Label_358E:
                        class6 = new Additional_Sate_Class(this, 0x36ee80, key, 1);
                        base.Add_Status_List.Add(class6.FLD_PID, class6);
                        base.Nhan_vat_them_vao_lon_nhat_HP += 700;
                        base.FLD_Nhan_vat_them_vao_kinh_nghiem_ti_le_phan_tram += 0.4;
                        base.FLD_nhan_vat_them_vao_kinh_nghiem_hoc_vo_cong_ti_le_phan_tram += 2.0;
                        base.addFLD_DEF_Percentage(0.1M);
                        base.ADD_FLD_trang_bi_them_vao_Phong_cu_Cuong_hoa(1);
                        base.ADD_FLD_trang_bi_them_vao_vu_khi_cuong_hoa(2);
                        this.Status_Effect(dst, 1, 0x36ee80);
                        this.VAT_PHAM_GIAM_DI_THUOC_TINH_SO_LUONG(index, 1);
                        base.TINH_TOAN_NHAN_VAT_TRANG_BI_SO_LIEU();
                        base.UpdatePowersAndStatus();
                        goto Label_53E2;
                        Label_3636:
                        if (base.Add_Status_List.ContainsKey(0x3c14dcbb))
                        {
                              return;
                        }
                        if (base.Add_Status_List.ContainsKey(0x3c14dcb7))
                        {
                              base.GameMessage("You can not use and quack Haoyue", 50, "");
                              return;
                        }
                        if (base.Add_Status_List.ContainsKey(0x3c14dcc3))
                        {
                              base.GameMessage("You can not use and party days Linden", 50, "");
                              return;
                        }
                        Additional_Sate_Class class23 = new Additional_Sate_Class(this, 0x337f9800, key, 1);
                        base.Add_Status_List.Add(class23.FLD_PID, class23);
                        base.Nhan_vat_them_vao_lon_nhat_HP += 300;
                        num22 = base.FLD_nhan_vat_them_vao_khi_cong;
                        base.FLD_nhan_vat_them_vao_khi_cong = num22 + 1;
                        this.Status_Effect(dst, 1, 0x337f9800);
                        this.VAT_PHAM_GIAM_DI_THUOC_TINH_SO_LUONG(index, 1);
                        base.UpdatePowersAndStatus();
                        base.Update_Data_Boardcast();
                        base.Update_Figure_Data(this);
                        goto Label_53E2;
                        Label_3716:
                        if (base.Add_Status_List.ContainsKey(0x3c14dcfc))
                        {
                              base.GameMessage("Unable and despise you use", 50, "");
                              return;
                        }
                        if (base.Add_Status_List.ContainsKey(0x3c14dcf5))
                        {
                              base.GameMessage("You can not use and death breath", 50, "");
                              return;
                        }
                        Additional_Sate_Class class24 = new Additional_Sate_Class(this, 0x1b77400, key, 1);
                        base.Add_Status_List.Add(class24.FLD_PID, class24);
                        this.Status_Effect(dst, 1, 0xdbba00);
                        base.addFLD_ATT_Percentage(0.15M);
                        base.addFLD_DEF_Percentage(0.15M);
                        base.Nhan_vat_them_vao_lon_nhat_HP += 300;
                        base.Nhan_vat_them_vao_lon_nhat_MP += 300;
                        base.FLD_Nhan_vat_them_vao_kinh_nghiem_ti_le_phan_tram += 0.1;
                        base.TINH_TOAN_NHAN_VAT_TRANG_BI_SO_LIEU();
                        base.UpdatePowersAndStatus();
                        base.Update_Figure_Data(this);
                        base.Update_Data_Boardcast();
                        base.UseItem(index, 1);
                        goto Label_53E2;
                        Label_381D:
                        if (num11 > 0x3c14dcfc)
                        {
                              goto Label_4654;
                        }
                        switch (num11)
                        {
                              case 0x3c14dcd4:
                                    if (base.threadSafeDictionary_3.Count <= 0)
                                    {
                                          goto Label_41ED;
                                    }
                                    base.New_Medicine_Tip();
                                    return;

                              case 0x3c14dcd5:
                                    if (base.threadSafeDictionary_3.Count <= 0)
                                    {
                                          goto Label_4252;
                                    }
                                    base.New_Medicine_Tip();
                                    return;

                              case 0x3c14dcd8:
                                    goto Label_42CA;

                              case 0x3c14dce8:
                                    if (!base.Add_Status_List.ContainsKey(0x3c14dce8))
                                    {
                                          break;
                                    }
                                    return;

                              case 0x3c14dcef:
                                    {
                                          if (((base.Add_Status_List.ContainsKey(0x3c14dcef) || base.Add_Status_List.ContainsKey(0x3c14dd43)) || (base.Add_Status_List.ContainsKey(0x3c14dd44) || base.Add_Status_List.ContainsKey(0x3c14dd6b))) || base.Add_Status_List.ContainsKey(0x3c14dd6a))
                                          {
                                                goto Label_3B44;
                                          }
                                          Additional_Sate_Class class47 = new Additional_Sate_Class(this, 0x6ddd00, key, 1);
                                          base.Add_Status_List.Add(class47.FLD_PID, class47);
                                          num23 = base.FLD_Nhan_vat_them_vao_kinh_nghiem_ti_le_phan_tram;
                                          base.FLD_Nhan_vat_them_vao_kinh_nghiem_ti_le_phan_tram = num23 + 1.0;
                                          this.Status_Effect(dst, 1, 0x6ddd00);
                                          this.VAT_PHAM_GIAM_DI_THUOC_TINH_SO_LUONG(index, 1);
                                          base.UpdatePowersAndStatus();
                                          goto Label_53E2;
                                    }
                              case 0x3c14dcf0:
                                    if (!base.bool_6)
                                    {
                                          goto Label_3B4F;
                                    }
                                    return;

                              case 0x3c14dcf1:
                                    if (!base.bool_6)
                                    {
                                          goto Label_3BEA;
                                    }
                                    return;

                              case 0x3c14dcf2:
                                    if (!base.bool_6)
                                    {
                                          goto Label_3C85;
                                    }
                                    return;

                              case 0x3c14dcf3:
                                    if (!base.Add_Status_List.ContainsKey(0x3c14dcf3))
                                    {
                                          goto Label_3D20;
                                    }
                                    return;

                              case 0x3c14dcf5:
                                    if (!base.Add_Status_List.ContainsKey(0x3c14dcbc))
                                    {
                                          goto Label_3DC4;
                                    }
                                    base.GameMessage("You can not use and tai chi Shendan", 50, "");
                                    return;

                              case 0x3c14dcf8:
                                    if (!base.Add_Status_List.ContainsKey(0x3c14dcf8))
                                    {
                                          goto Label_3EA0;
                                    }
                                    base.New_Medicine_Tip();
                                    return;

                              case 0x3c14dcfa:
                                    if (!base.bool_6)
                                    {
                                          goto Label_3FC2;
                                    }
                                    return;

                              case 0x3c14dcfb:
                                    if (!base.bool_6)
                                    {
                                          goto Label_405D;
                                    }
                                    return;

                              case 0x3c14dcfc:
                                    if (!base.Add_Status_List.ContainsKey(0x3c14dcbc))
                                    {
                                          goto Label_40F8;
                                    }
                                    base.GameMessage("You can not use and tai chi Shendan", 50, "");
                                    return;

                              default:
                                    goto Label_4AC8;
                        }
                        Additional_Sate_Class class25 = new Additional_Sate_Class(this, 0x6ddd00, key, 1);
                        base.Add_Status_List.Add(class25.FLD_PID, class25);
                        base.Nhan_vat_them_vao_lon_nhat_HP += 100;
                        base.FLD_Nhan_vat_them_vao_kinh_nghiem_ti_le_phan_tram += 0.2;
                        base.FLD_nhan_vat_them_vao_gold_ti_le_phan_tram += 0.4;
                        base.FLD_nhan_vat_them_vao_item_roi_xuong_xac_suat_ti_le_phan_tram += 0.2;
                        this.Status_Effect(dst, 1, 0x6ddd00);
                        this.VAT_PHAM_GIAM_DI_THUOC_TINH_SO_LUONG(index, 1);
                        base.UpdatePowersAndStatus();
                        goto Label_53E2;
                        Label_3B44:
                        base.New_Medicine_Tip();
                        return;
                        Label_3B4F:
                        base.bool_6 = true;
                        Additional_Sate_Class class26 = new Additional_Sate_Class(this, 0x6ddd00, key, 1);
                        base.Add_Status_List.Add(class26.FLD_PID, class26);
                        base.FLD_Nhan_vat_them_vao_kinh_nghiem_ti_le_phan_tram += 0.05;
                        base.FLD_nhan_vat_them_vao_cong_kich += 30;
                        base.FLD_nhan_vat_vo_cong_luc_cong_kich_tang_cuong_ti_le_phan_tram += 0.03;
                        this.Status_Effect(dst, 1, 0x6ddd00);
                        this.VAT_PHAM_GIAM_DI_THUOC_TINH_SO_LUONG(index, 1);
                        base.UpdatePowersAndStatus();
                        base.Update_Data_Boardcast();
                        base.Update_Figure_Data(this);
                        this.Update_Equipment_Effectiveness();
                        goto Label_53E2;
                        Label_3BEA:
                        base.bool_6 = true;
                        Additional_Sate_Class class27 = new Additional_Sate_Class(this, 0x6ddd00, key, 1);
                        base.Add_Status_List.Add(class27.FLD_PID, class27);
                        base.FLD_Nhan_vat_them_vao_kinh_nghiem_ti_le_phan_tram += 0.05;
                        base.FLD_nhan_vat_them_vao_cong_kich += 30;
                        base.FLD_nhan_vat_vo_cong_luc_cong_kich_tang_cuong_ti_le_phan_tram += 0.03;
                        this.Status_Effect(dst, 1, 0x6ddd00);
                        this.VAT_PHAM_GIAM_DI_THUOC_TINH_SO_LUONG(index, 1);
                        base.UpdatePowersAndStatus();
                        base.Update_Data_Boardcast();
                        base.Update_Figure_Data(this);
                        this.Update_Equipment_Effectiveness();
                        goto Label_53E2;
                        Label_3C85:
                        base.bool_6 = true;
                        Additional_Sate_Class class28 = new Additional_Sate_Class(this, 0x6ddd00, key, 1);
                        base.Add_Status_List.Add(class28.FLD_PID, class28);
                        base.FLD_Nhan_vat_them_vao_kinh_nghiem_ti_le_phan_tram += 0.05;
                        base.FLD_nhan_vat_them_vao_cong_kich += 30;
                        base.FLD_nhan_vat_vo_cong_luc_cong_kich_tang_cuong_ti_le_phan_tram += 0.03;
                        this.Status_Effect(dst, 1, 0x6ddd00);
                        this.VAT_PHAM_GIAM_DI_THUOC_TINH_SO_LUONG(index, 1);
                        base.UpdatePowersAndStatus();
                        base.Update_Data_Boardcast();
                        base.Update_Figure_Data(this);
                        this.Update_Equipment_Effectiveness();
                        goto Label_53E2;
                        Label_3D20:
                        class4 = new Additional_Sate_Class(this, 0x2255100, key, 1);
                        base.Add_Status_List.Add(class4.FLD_PID, class4);
                        base.addFLD_ATT_Percentage(0.2M);
                        base.addFLD_DEF_Percentage(0.2M);
                        base.Nhan_vat_them_vao_lon_nhat_HP += 200;
                        base.FLD_Nhan_vat_them_vao_kinh_nghiem_ti_le_phan_tram += 0.15;
                        base.FLD_nhan_vat_vo_cong_luc_cong_kich_tang_cuong_ti_le_phan_tram += 0.05;
                        this.Status_Effect(dst, 1, 0x2255100);
                        this.VAT_PHAM_GIAM_DI_THUOC_TINH_SO_LUONG(index, 1);
                        base.UpdatePowersAndStatus();
                        goto Label_53E2;
                        Label_3DC4:
                        if (base.Add_Status_List.ContainsKey(0x3c14dcfc))
                        {
                              base.GameMessage("Unable and despise you use", 50, "");
                              return;
                        }
                        if (base.Add_Status_List.ContainsKey(0x3c14dcf5))
                        {
                              return;
                        }
                        Additional_Sate_Class class29 = new Additional_Sate_Class(this, 0x6ddd00, key, 1);
                        base.Add_Status_List.Add(class29.FLD_PID, class29);
                        base.FLD_nhan_vat_vo_cong_luc_cong_kich_tang_cuong_ti_le_phan_tram += 0.1;
                        base.FLD_them_vao_ti_le_phan_tram_ne_tranh += 0.05;
                        base.Nhan_vat_them_vao_lon_nhat_HP += 100;
                        base.FLD_nhan_vat_them_vao_khi_cong += 2;
                        this.Status_Effect(dst, 1, 0x6ddd00);
                        this.VAT_PHAM_GIAM_DI_THUOC_TINH_SO_LUONG(index, 1);
                        base.UpdatePowersAndStatus();
                        base.Update_Data_Boardcast();
                        base.Update_Figure_Data(this);
                        goto Label_53E2;
                        Label_3EA0:
                        if (base.Add_Status_List.ContainsKey(0x3c14dcef))
                        {
                              base.New_Medicine_Tip();
                              return;
                        }
                        if (base.Add_Status_List.ContainsKey(0x3c14dd43))
                        {
                              base.New_Medicine_Tip();
                              return;
                        }
                        if (base.Add_Status_List.ContainsKey(0x3c14dd44))
                        {
                              base.New_Medicine_Tip();
                              return;
                        }
                        if (base.Add_Status_List.ContainsKey(0x3c14dd6b))
                        {
                              base.New_Medicine_Tip();
                              return;
                        }
                        Additional_Sate_Class class30 = new Additional_Sate_Class(this, 0xdbba00, key, 1);
                        base.Add_Status_List.Add(class30.FLD_PID, class30);
                        num23 = base.FLD_Nhan_vat_them_vao_kinh_nghiem_ti_le_phan_tram;
                        base.FLD_Nhan_vat_them_vao_kinh_nghiem_ti_le_phan_tram = num23 + 1.0;
                        num23 = base.FLD_nhan_vat_them_vao_kinh_nghiem_hoc_vo_cong_ti_le_phan_tram;
                        base.FLD_nhan_vat_them_vao_kinh_nghiem_hoc_vo_cong_ti_le_phan_tram = num23 + 1.0;
                        num23 = base.FLD_nhan_vat_them_vao_gold_ti_le_phan_tram;
                        base.FLD_nhan_vat_them_vao_gold_ti_le_phan_tram = num23 + 1.0;
                        num23 = base.FLD_nhan_vat_them_vao_item_roi_xuong_xac_suat_ti_le_phan_tram;
                        base.FLD_nhan_vat_them_vao_item_roi_xuong_xac_suat_ti_le_phan_tram = num23 + 1.0;
                        this.Status_Effect(dst, 1, 0xdbba00);
                        this.VAT_PHAM_GIAM_DI_THUOC_TINH_SO_LUONG(index, 1);
                        base.UpdatePowersAndStatus();
                        goto Label_53E2;
                        Label_3FC2:
                        base.bool_6 = true;
                        Additional_Sate_Class class31 = new Additional_Sate_Class(this, 0x6ddd00, key, 1);
                        base.Add_Status_List.Add(class31.FLD_PID, class31);
                        base.FLD_Nhan_vat_them_vao_kinh_nghiem_ti_le_phan_tram += 0.05;
                        base.FLD_nhan_vat_them_vao_cong_kich += 30;
                        base.FLD_nhan_vat_vo_cong_luc_cong_kich_tang_cuong_ti_le_phan_tram += 0.03;
                        this.Status_Effect(dst, 1, 0x6ddd00);
                        this.VAT_PHAM_GIAM_DI_THUOC_TINH_SO_LUONG(index, 1);
                        base.UpdatePowersAndStatus();
                        base.Update_Data_Boardcast();
                        base.Update_Figure_Data(this);
                        this.Update_Equipment_Effectiveness();
                        goto Label_53E2;
                        Label_405D:
                        base.bool_6 = true;
                        Additional_Sate_Class class32 = new Additional_Sate_Class(this, 0x5265c00, key, 1);
                        base.Add_Status_List.Add(class32.FLD_PID, class32);
                        base.FLD_Nhan_vat_them_vao_kinh_nghiem_ti_le_phan_tram += 0.05;
                        base.FLD_nhan_vat_them_vao_cong_kich += 30;
                        base.FLD_nhan_vat_vo_cong_luc_cong_kich_tang_cuong_ti_le_phan_tram += 0.03;
                        this.Status_Effect(dst, 1, 0x5265c00);
                        this.VAT_PHAM_GIAM_DI_THUOC_TINH_SO_LUONG(index, 1);
                        base.UpdatePowersAndStatus();
                        base.Update_Data_Boardcast();
                        base.Update_Figure_Data(this);
                        this.Update_Equipment_Effectiveness();
                        goto Label_53E2;
                        Label_40F8:
                        if (base.Add_Status_List.ContainsKey(0x3c14dcfc))
                        {
                              return;
                        }
                        if (base.Add_Status_List.ContainsKey(0x3c14dcf5))
                        {
                              base.GameMessage("You can not use and death breath", 50, "");
                              return;
                        }
                        Additional_Sate_Class class33 = new Additional_Sate_Class(this, 0x36ee80, key, 1);
                        base.Add_Status_List.Add(class33.FLD_PID, class33);
                        base.FLD_nhan_vat_vo_cong_luc_cong_kich_tang_cuong_ti_le_phan_tram += 0.2;
                        num22 = base.FLD_nhan_vat_them_vao_phong_ngu;
                        base.FLD_nhan_vat_them_vao_phong_ngu = num22 + 1;
                        base.FLD_nhan_vat_vo_cong_suc_phong_ngu_tang_cuong_ti_le_phan_tram += 0.01;
                        num22 = base.FLD_nhan_vat_them_vao_ne_tranh;
                        base.FLD_nhan_vat_them_vao_ne_tranh = num22 + 1;
                        num22 = base.Nhan_vat_them_vao_lon_nhat_HP;
                        base.Nhan_vat_them_vao_lon_nhat_HP = num22 + 1;
                        this.Status_Effect(dst, 1, 0x36ee80);
                        this.VAT_PHAM_GIAM_DI_THUOC_TINH_SO_LUONG(index, 1);
                        base.UpdatePowersAndStatus();
                        base.Update_Data_Boardcast();
                        base.Update_Figure_Data(this);
                        goto Label_53E2;
                        Label_41ED:
                        this.SET_THEM_VAO_TRANG_THAI_VAT_PHAM(1, 0x6ddd00, 20, 2);
                        this.SET_THEM_VAO_TRANG_THAI_VAT_PHAM(7, 0x6ddd00, 15, 2);
                        this.SET_THEM_VAO_TRANG_THAI_VAT_PHAM(5, 0x6ddd00, 20, 1);
                        this.SET_THEM_VAO_TRANG_THAI_VAT_PHAM(6, 0x6ddd00, 20, 1);
                        this.SET_THEM_VAO_TRANG_THAI_VAT_PHAM(14, 0x6ddd00, 2, 1);
                        base.TINH_TOAN_NHAN_VAT_TRANG_BI_SO_LIEU();
                        base.UpdatePowersAndStatus();
                        this.VAT_PHAM_GIAM_DI_THUOC_TINH_SO_LUONG(index, 1);
                        goto Label_53E2;
                        Label_4252:
                        this.SET_THEM_VAO_TRANG_THAI_VAT_PHAM(2, 0x6ddd00, 20, 2);
                        this.SET_THEM_VAO_TRANG_THAI_VAT_PHAM(8, 0x6ddd00, 10, 2);
                        this.SET_THEM_VAO_TRANG_THAI_VAT_PHAM(5, 0x6ddd00, 20, 1);
                        this.SET_THEM_VAO_TRANG_THAI_VAT_PHAM(6, 0x6ddd00, 20, 1);
                        this.SET_THEM_VAO_TRANG_THAI_VAT_PHAM(3, 0x6ddd00, 500, 1);
                        this.SET_THEM_VAO_TRANG_THAI_VAT_PHAM(9, 0x6ddd00, 20, 2);
                        base.TINH_TOAN_NHAN_VAT_TRANG_BI_SO_LIEU();
                        base.UpdatePowersAndStatus();
                        this.VAT_PHAM_GIAM_DI_THUOC_TINH_SO_LUONG(index, 1);
                        goto Label_53E2;
                        Label_42CA:
                        num = 0;
                        int num17 = 0;
                        while (num17 < 0x42)
                        {
                              if (BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[num17].VAT_PHAM_ID, 0) == 0x3b9acbaa)
                              {
                                    goto Label_42FA;
                              }
                              num17++;
                        }
                        goto Label_42FD;
                        Label_42FA:
                        num = num17;
                        Label_42FD:
                        num2 = base.DUOC_KIEN_HANG_RONG(this);
                        if ((BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[num].VAT_PHAM_ID, 0) != 0x3b9acbaa) || (num2 == -1))
                        {
                              return;
                        }
                        TBL_XWWL_OPEN open = TBL_XWWL_OPEN.GetOpen(0x3b9acbaa);
                        if (open != null)
                        {
                              TBL_XWWL_ITEM tbl_xwwl_item2;
                              if (World.Itme.TryGetValue(open.FLD_PIDX, out tbl_xwwl_item2))
                              {
                                    num11 = tbl_xwwl_item2.FLD_PID;
                                    switch (num11)
                                    {
                                          case 0x2faf0801:
                                          case 0x2faf0802:
                                          case 0x2faf080d:
                                          case 0x2faf083d:
                                          case 0x2faf083e:
                                          case 0x2faf0817:
                                          case 0x2faf0818:
                                          case 0x2faf0819:
                                          case 0x2faf081a:
                                          case 0x2faf081c:
                                                if (open.FLD_MAGIC0 != 0)
                                                {
                                                      open.FLD_PIDX = World.smethod_14(tbl_xwwl_item2.FLD_PID);
                                                }
                                                else
                                                {
                                                      open.FLD_MAGIC0 = World.smethod_16(tbl_xwwl_item2.FLD_PID, 6);
                                                      open.FLD_PIDX = World.smethod_14(tbl_xwwl_item2.FLD_PID);
                                                }
                                                break;

                                          case 0x2faf082e:
                                                {
                                                      int num24 = new Random().Next(1, 0x17);
                                                      open.FLD_MAGIC0 = num24;
                                                      break;
                                                }
                                          case 0x2faf082f:
                                                {
                                                      int num25 = new Random().Next(0x17, 0x34);
                                                      open.FLD_MAGIC0 = num25;
                                                      break;
                                                }
                                          case 0x2faf0830:
                                                {
                                                      int num26 = new Random().Next(70, 0x51);
                                                      open.FLD_MAGIC0 = num26;
                                                      break;
                                                }
                                    }
                                    base.method_82(index, 1, 1);
                                    this.LAM_GIAM_DI_VAT_PHAM(num, 1);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(open.FLD_PIDX, num2, 1, open.FLD_MAGIC0, open.FLD_MAGIC1, open.FLD_MAGIC2, open.FLD_MAGIC3, open.FLD_MAGIC4, open.FLD_SO_CAP_PHU_HON, open.FLD_TRUNG_CAP_PHU_HON, open.FLD_TIEN_HOA, open.FLD_CO_HAY_KHONG_TROI_CHAT, open.SU_DUNG_THANG_THIEN);
                                    if (open.CO_HAY_KHONG_MO_RA_THONG_BAO == 1)
                                    {
                                          foreach (Players players9 in World.allConnectedChars.Values)
                                          {
                                                char[] separator = new char[] { ';' };
                                                string[] strArray = World.Openbox_nhac_nho_noi_dung.Split(separator);
                                                string str = string.Format(strArray[0], new object[] { base.UserName, TBL_XWWL_MAP.smethod_0(base.CharacterCoords_Map), open.FLD_NAME, open.FLD_NAMEX });
                                                players9.GameMessage(str ?? "", int.Parse(strArray[2]), strArray[1] ?? "");
                                          }
                                    }
                              }
                              else
                              {
                                    Form1.WriteLine(1, string.Concat(new object[] { "开箱 出错1 VAT_PHAM [", open.FLD_PID, "][", open.FLD_NAME, "]开[", open.FLD_PIDX, "][", open.FLD_NAMEX, "] [", base.Userid, "][", base.UserName, "] " }));
                              }
                        }
                        else
                        {
                              base.method_82(index, 1, 0);
                              this.LAM_GIAM_DI_VAT_PHAM(num, 1);
                        }
                        goto Label_53E2;
                        Label_4654:
                        switch (num11)
                        {
                              case 0x3c14dd30:
                                    if (!base.bool_6)
                                    {
                                          goto Label_513F;
                                    }
                                    return;

                              case 0x3c14dd31:
                                    if (!base.bool_6)
                                    {
                                          goto Label_51E9;
                                    }
                                    return;

                              case 0x3c14dd32:
                                    if (!base.bool_6)
                                    {
                                          goto Label_5293;
                                    }
                                    return;

                              case 0x3c14dd33:
                                    if (!base.bool_6)
                                    {
                                          goto Label_533D;
                                    }
                                    return;

                              case 0x3c14e0b0:
                                    if (!base.Add_Status_List.ContainsKey(0x3c14e12d) && !base.Add_Status_List.ContainsKey(0x3c14e0b0))
                                    {
                                          int num27 = 0x337f9800;
                                          Additional_Sate_Class class48 = new Additional_Sate_Class(this, num27, key, 1);
                                          base.Add_Status_List.Add(class48.FLD_PID, class48);
                                          this.Status_Effect(dst, 1, num27);
                                          this.VAT_PHAM_GIAM_DI_THUOC_TINH_SO_LUONG(index, 1);
                                          base.Update_Figure_Data(this);
                                          base.TINH_TOAN_NHAN_VAT_TRANG_BI_SO_LIEU();
                                          base.UpdatePowersAndStatus();
                                          base.Update_Data_Boardcast();
                                    }
                                    return;

                              case 0x3c14e12d:
                                    if (!base.Add_Status_List.ContainsKey(0x3c14e12d) && !base.Add_Status_List.ContainsKey(0x3c14e0b0))
                                    {
                                          int num28 = 0x337f9800;
                                          Additional_Sate_Class class49 = new Additional_Sate_Class(this, num28, key, 1);
                                          base.Add_Status_List.Add(class49.FLD_PID, class49);
                                          this.Status_Effect(dst, 1, num28);
                                          this.VAT_PHAM_GIAM_DI_THUOC_TINH_SO_LUONG(index, 1);
                                          base.Update_Figure_Data(this);
                                          base.TINH_TOAN_NHAN_VAT_TRANG_BI_SO_LIEU();
                                          base.UpdatePowersAndStatus();
                                          base.Update_Data_Boardcast();
                                    }
                                    return;

                              default:
                                    switch (num11)
                                    {
                                          case 0x3c14dd41:
                                                if (!base.Add_Status_List.ContainsKey(0x3c14dd41))
                                                {
                                                      goto Label_4EA1;
                                                }
                                                return;

                                          case 0x3c14dd42:
                                                if (!base.Add_Status_List.ContainsKey(0x3c14dd41))
                                                {
                                                      goto Label_4F29;
                                                }
                                                return;

                                          case 0x3c14dd43:
                                                {
                                                      if (((base.Add_Status_List.ContainsKey(0x3c14dcef) || base.Add_Status_List.ContainsKey(0x3c14dd43)) || (base.Add_Status_List.ContainsKey(0x3c14dd44) || base.Add_Status_List.ContainsKey(0x3c14dd6b))) || base.Add_Status_List.ContainsKey(0x3c14dd6a))
                                                      {
                                                            goto Label_4FB1;
                                                      }
                                                      Additional_Sate_Class class50 = new Additional_Sate_Class(this, 0x6ddd00, key, 1);
                                                      base.Add_Status_List.Add(class50.FLD_PID, class50);
                                                      num23 = base.FLD_Nhan_vat_them_vao_kinh_nghiem_ti_le_phan_tram;
                                                      base.FLD_Nhan_vat_them_vao_kinh_nghiem_ti_le_phan_tram = num23 + 1.0;
                                                      this.Status_Effect(dst, 1, 0x6ddd00);
                                                      this.VAT_PHAM_GIAM_DI_THUOC_TINH_SO_LUONG(index, 1);
                                                      base.UpdatePowersAndStatus();
                                                      goto Label_53E2;
                                                }
                                          case 0x3c14dd44:
                                                {
                                                      if (((base.Add_Status_List.ContainsKey(0x3c14dcef) || base.Add_Status_List.ContainsKey(0x3c14dd43)) || (base.Add_Status_List.ContainsKey(0x3c14dd44) || base.Add_Status_List.ContainsKey(0x3c14dd6b))) || base.Add_Status_List.ContainsKey(0x3c14dd6a))
                                                      {
                                                            goto Label_4FBC;
                                                      }
                                                      Additional_Sate_Class class51 = new Additional_Sate_Class(this, 0x5265c00, key, 1);
                                                      base.Add_Status_List.Add(class51.FLD_PID, class51);
                                                      num23 = base.FLD_Nhan_vat_them_vao_kinh_nghiem_ti_le_phan_tram;
                                                      base.FLD_Nhan_vat_them_vao_kinh_nghiem_ti_le_phan_tram = num23 + 1.0;
                                                      this.Status_Effect(dst, 1, 0x5265c00);
                                                      this.VAT_PHAM_GIAM_DI_THUOC_TINH_SO_LUONG(index, 1);
                                                      base.UpdatePowersAndStatus();
                                                      goto Label_53E2;
                                                }
                                          case 0x3c14dd45:
                                                if (!base.bool_6)
                                                {
                                                      goto Label_4FC7;
                                                }
                                                return;

                                          case 0x3c14dd46:
                                                if (!base.bool_6)
                                                {
                                                      goto Label_5083;
                                                }
                                                return;

                                          case 0x3c14dd6a:
                                                goto Label_4DCC;

                                          case 0x3c14dd6b:
                                                {
                                                      if (((base.Add_Status_List.ContainsKey(0x3c14dcef) || base.Add_Status_List.ContainsKey(0x3c14dd43)) || (base.Add_Status_List.ContainsKey(0x3c14dd44) || base.Add_Status_List.ContainsKey(0x3c14dd6b))) || base.Add_Status_List.ContainsKey(0x3c14dd6a))
                                                      {
                                                            goto Label_4E96;
                                                      }
                                                      Additional_Sate_Class class52 = new Additional_Sate_Class(this, 0x5265c00, key, 1);
                                                      base.Add_Status_List.Add(class52.FLD_PID, class52);
                                                      base.FLD_Nhan_vat_them_vao_kinh_nghiem_ti_le_phan_tram += 1.5;
                                                      this.Status_Effect(dst, 1, 0x5265c00);
                                                      this.VAT_PHAM_GIAM_DI_THUOC_TINH_SO_LUONG(index, 1);
                                                      base.UpdatePowersAndStatus();
                                                      goto Label_53E2;
                                                }
                                    }
                                    break;
                        }
                        Label_4AC8:
                        if (World.Trang_phuc_gui_di_mo_ra == 1)
                        {
                              try
                              {
                                    if (World.dictionary_26.ContainsKey(key))
                                    {
                                          this.TRANG_PHUC_GUI_DI(key, index);
                                          return;
                                    }
                              }
                              catch (Exception exception)
                              {
                                    Form1.WriteLine(2, "打开套装出错--" + exception.Message);
                              }
                        }
                        if ((World.Thoi_gian_Duoc_pham_mo_ra == 1) && World.dictionary_27.ContainsKey(key))
                        {
                              Class67 class53 = new Class67();
                              if (World.dictionary_27.TryGetValue(key, out class53))
                              {
                                    this.LAM_GIAM_DI_VAT_PHAM(index, 1);
                                    int num29 = class53.int_1;
                                    int num30 = class53.int_2;
                                    int num31 = class53.int_3;
                                    int num32 = class53.int_4;
                                    this.SET_THEM_VAO_TRANG_THAI_VAT_PHAM(num29, num30, num31, num32);
                                    base.TINH_TOAN_NHAN_VAT_TRANG_BI_SO_LIEU();
                                    base.UpdatePowersAndStatus();
                                    this.UpdateHP_MP_SP();
                                    return;
                              }
                        }
                        using (Dictionary<int, BoxtoGoldClass>.ValueCollection.Enumerator enumerator4 = World.dictionary_3.Values.GetEnumerator())
                        {
                              BoxtoGoldClass current;
                              while (enumerator4.MoveNext())
                              {
                                    current = enumerator4.Current;
                                    if (current.ItmeID == key)
                                    {
                                          goto Label_4BBB;
                                    }
                              }
                              goto Label_4C1B;
                              Label_4BBB:
                              if (base.FLD_RXPIONT != World.Nhan_vat_lon_nhat_CASH_so_luong)
                              {
                                    base.KIEM_SOAT_CASH_SO_LIEU(current.NGUYEN_BAO, 1);
                                    this.LAM_GIAM_DI_VAT_PHAM(index, 1);
                                    base.UPDATE_RXPIONT();
                                    base.GameMessage("Get gold" + current.NGUYEN_BAO, 9, "system hint");
                              }
                              return;
                        }
                        Label_4C1B:;
                        try
                        {
                              using (Dictionary<int, ITEM_TRAO_DOI>.ValueCollection.Enumerator enumerator5 = World.dictionary_20.Values.GetEnumerator())
                              {
                                    ITEM_TRAO_DOI item_trao_doi;
                                    while (enumerator5.MoveNext())
                                    {
                                          item_trao_doi = enumerator5.Current;
                                          char[] chArray2 = new char[] { ';' };
                                          string[] strArray2 = item_trao_doi.CAN_ITEM.Split(chArray2);
                                          for (int i = 0; i < strArray2.Length; i++)
                                          {
                                                if (strArray2[i] != null)
                                                {
                                                      char[] chArray3 = new char[] { ',' };
                                                      if (int.Parse(strArray2[i].Split(chArray3)[0]) == key)
                                                      {
                                                            goto Label_4C96;
                                                      }
                                                }
                                          }
                                    }
                                    goto Label_4CCC;
                                    Label_4C96:
                                    this.ITEM_TRAO_DOI_HE_THONG(item_trao_doi);
                                    return;
                              }
                        }
                        catch (Exception exception2)
                        {
                              Form1.WriteLine(2, "数据库VAT_PHAM兑换出错--" + exception2.Message);
                        }
                        Label_4CCC:;
                        try
                        {
                              if (World.scriptClass_0.MO_RA_VAT_PHAM_SU_KIEM != null)
                              {
                                    object[] args = new object[] { base.UserSessionID, key, index, BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_SO_LUONG, 0) };
                                    World.scriptClass_0.MO_RA_VAT_PHAM_SU_KIEM.Call(args);
                              }
                              goto Label_53E2;
                        }
                        catch (Exception exception3)
                        {
                              Form1.WriteLine(2, string.Concat(new object[] { "OpenItmeTrigGer(", base.UserSessionID, ",", key, ",", index, ",", BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_SO_LUONG, 0), ")" }));
                              Form1.WriteLine(2, "打开VAT_PHAM触发器3出错--" + exception3.Message);
                              goto Label_53E2;
                        }
                        Label_4DCC:
                        if (((!base.Add_Status_List.ContainsKey(0x3c14dcef) && !base.Add_Status_List.ContainsKey(0x3c14dd43)) && (!base.Add_Status_List.ContainsKey(0x3c14dd44) && !base.Add_Status_List.ContainsKey(0x3c14dd6b))) && !base.Add_Status_List.ContainsKey(0x3c14dd6a))
                        {
                              Additional_Sate_Class class55 = new Additional_Sate_Class(this, 0x6ddd00, key, 1);
                              base.Add_Status_List.Add(class55.FLD_PID, class55);
                              base.FLD_Nhan_vat_them_vao_kinh_nghiem_ti_le_phan_tram += 1.5;
                              this.Status_Effect(dst, 1, 0x6ddd00);
                              this.VAT_PHAM_GIAM_DI_THUOC_TINH_SO_LUONG(index, 1);
                              base.UpdatePowersAndStatus();
                              goto Label_53E2;
                        }
                        base.New_Medicine_Tip();
                        return;
                        Label_4E96:
                        base.New_Medicine_Tip();
                        return;
                        Label_4EA1:
                        if (base.Add_Status_List.ContainsKey(0x3c14dd42) || base.Add_Status_List.ContainsKey(0x3c14dca0))
                        {
                              return;
                        }
                        Additional_Sate_Class class34 = new Additional_Sate_Class(this, 0x6ddd00, key, 1);
                        base.Add_Status_List.Add(class34.FLD_PID, class34);
                        this.Status_Effect(dst, 1, 0x6ddd00);
                        this.VAT_PHAM_GIAM_DI_THUOC_TINH_SO_LUONG(index, 1);
                        base.UpdatePowersAndStatus();
                        base.int_16 = 1;
                        base.GameMessage("You have not entered the protected mode PK others, you can not PK you!", 9, "system hint");
                        goto Label_53E2;
                        Label_4F29:
                        if (base.Add_Status_List.ContainsKey(0x3c14dd42) || base.Add_Status_List.ContainsKey(0x3c14dca0))
                        {
                              return;
                        }
                        Additional_Sate_Class class35 = new Additional_Sate_Class(this, 0x2932e00, key, 1);
                        base.Add_Status_List.Add(class35.FLD_PID, class35);
                        this.Status_Effect(dst, 1, 0x2932e00);
                        this.VAT_PHAM_GIAM_DI_THUOC_TINH_SO_LUONG(index, 1);
                        base.UpdatePowersAndStatus();
                        base.int_16 = 1;
                        base.GameMessage("You have not entered the protected mode PK others, you can not PK you!", 9, "system hint");
                        goto Label_53E2;
                        Label_4FB1:
                        base.New_Medicine_Tip();
                        return;
                        Label_4FBC:
                        base.New_Medicine_Tip();
                        return;
                        Label_4FC7:
                        base.bool_6 = true;
                        Additional_Sate_Class class36 = new Additional_Sate_Class(this, 0x6ddd00, key, 1);
                        base.Add_Status_List.Add(class36.FLD_PID, class36);
                        base.FLD_Nhan_vat_them_vao_kinh_nghiem_ti_le_phan_tram += 0.1;
                        base.FLD_nhan_vat_them_vao_cong_kich += 40;
                        base.FLD_nhan_vat_them_vao_phong_ngu += 40;
                        base.FLD_nhan_vat_vo_cong_luc_cong_kich_tang_cuong_ti_le_phan_tram += 0.05;
                        base.Nhan_vat_them_vao_lon_nhat_HP += 300;
                        this.Status_Effect(dst, 1, 0x6ddd00);
                        this.VAT_PHAM_GIAM_DI_THUOC_TINH_SO_LUONG(index, 1);
                        base.UpdatePowersAndStatus();
                        base.Update_Data_Boardcast();
                        base.Update_Figure_Data(this);
                        this.Update_Equipment_Effectiveness();
                        goto Label_53E2;
                        Label_5083:
                        base.bool_6 = true;
                        Additional_Sate_Class class37 = new Additional_Sate_Class(this, 0x5265c00, key, 1);
                        base.Add_Status_List.Add(class37.FLD_PID, class37);
                        base.FLD_Nhan_vat_them_vao_kinh_nghiem_ti_le_phan_tram += 0.1;
                        base.FLD_nhan_vat_them_vao_cong_kich += 40;
                        base.FLD_nhan_vat_them_vao_phong_ngu += 40;
                        base.FLD_nhan_vat_vo_cong_luc_cong_kich_tang_cuong_ti_le_phan_tram += 0.05;
                        base.Nhan_vat_them_vao_lon_nhat_HP += 300;
                        this.Status_Effect(dst, 1, 0x5265c00);
                        this.VAT_PHAM_GIAM_DI_THUOC_TINH_SO_LUONG(index, 1);
                        base.UpdatePowersAndStatus();
                        base.Update_Data_Boardcast();
                        base.Update_Figure_Data(this);
                        this.Update_Equipment_Effectiveness();
                        goto Label_53E2;
                        Label_513F:
                        base.bool_6 = true;
                        Additional_Sate_Class class38 = new Additional_Sate_Class(this, 0x5265c00, key, 1);
                        base.Add_Status_List.Add(class38.FLD_PID, class38);
                        base.FLD_Nhan_vat_them_vao_kinh_nghiem_ti_le_phan_tram += 0.05;
                        base.FLD_nhan_vat_them_vao_cong_kich += 30;
                        base.FLD_nhan_vat_them_vao_phong_ngu += 30;
                        base.FLD_nhan_vat_vo_cong_luc_cong_kich_tang_cuong_ti_le_phan_tram += 0.03;
                        this.Status_Effect(dst, 1, 0x5265c00);
                        this.VAT_PHAM_GIAM_DI_THUOC_TINH_SO_LUONG(index, 1);
                        base.UpdatePowersAndStatus();
                        base.Update_Data_Boardcast();
                        base.Update_Figure_Data(this);
                        this.Update_Equipment_Effectiveness();
                        goto Label_53E2;
                        Label_51E9:
                        base.bool_6 = true;
                        Additional_Sate_Class class39 = new Additional_Sate_Class(this, 0x5265c00, key, 1);
                        base.Add_Status_List.Add(class39.FLD_PID, class39);
                        base.FLD_Nhan_vat_them_vao_kinh_nghiem_ti_le_phan_tram += 0.05;
                        base.FLD_nhan_vat_them_vao_cong_kich += 30;
                        base.FLD_nhan_vat_them_vao_phong_ngu += 30;
                        base.FLD_nhan_vat_vo_cong_luc_cong_kich_tang_cuong_ti_le_phan_tram += 0.03;
                        this.Status_Effect(dst, 1, 0x5265c00);
                        this.VAT_PHAM_GIAM_DI_THUOC_TINH_SO_LUONG(index, 1);
                        base.UpdatePowersAndStatus();
                        base.Update_Data_Boardcast();
                        base.Update_Figure_Data(this);
                        this.Update_Equipment_Effectiveness();
                        goto Label_53E2;
                        Label_5293:
                        base.bool_6 = true;
                        Additional_Sate_Class class40 = new Additional_Sate_Class(this, 0x6ddd00, key, 1);
                        base.Add_Status_List.Add(class40.FLD_PID, class40);
                        base.FLD_Nhan_vat_them_vao_kinh_nghiem_ti_le_phan_tram += 0.1;
                        base.FLD_nhan_vat_them_vao_cong_kich += 40;
                        base.FLD_nhan_vat_them_vao_phong_ngu += 40;
                        base.FLD_nhan_vat_vo_cong_luc_cong_kich_tang_cuong_ti_le_phan_tram += 0.05;
                        this.Status_Effect(dst, 1, 0x6ddd00);
                        this.VAT_PHAM_GIAM_DI_THUOC_TINH_SO_LUONG(index, 1);
                        base.UpdatePowersAndStatus();
                        base.Update_Data_Boardcast();
                        base.Update_Figure_Data(this);
                        this.Update_Equipment_Effectiveness();
                        goto Label_53E2;
                        Label_533D:
                        base.bool_6 = true;
                        Additional_Sate_Class class41 = new Additional_Sate_Class(this, 0x5265c00, key, 1);
                        base.Add_Status_List.Add(class41.FLD_PID, class41);
                        base.FLD_Nhan_vat_them_vao_kinh_nghiem_ti_le_phan_tram += 0.1;
                        base.FLD_nhan_vat_them_vao_cong_kich += 40;
                        base.FLD_nhan_vat_them_vao_phong_ngu += 40;
                        base.FLD_nhan_vat_vo_cong_luc_cong_kich_tang_cuong_ti_le_phan_tram += 0.05;
                        this.Status_Effect(dst, 1, 0x5265c00);
                        this.VAT_PHAM_GIAM_DI_THUOC_TINH_SO_LUONG(index, 1);
                        base.UpdatePowersAndStatus();
                        base.Update_Data_Boardcast();
                        base.Update_Figure_Data(this);
                        this.Update_Equipment_Effectiveness();
                        Label_53E2:
                        this.UpdateHP_MP_SP();
                  }
                  catch (Exception exception4)
                  {
                        Form1.WriteLine(1, "吃药 出错 [" + base.Userid + "][" + base.UserName + "] " + exception4.Message);
                  }
            }

            public void ROI_KHOI_BAN_DO_TRUOC_MAT()
            {
                  if (World.jlMsg == 1)
                  {
                        Form1.WriteLine(0, "Players_离开当前地图");
                  }
                  try
                  {
                        try
                        {
                              if (this.threadSafeDictionary_5 != null)
                              {
                                    Queue queue = Queue.Synchronized(new Queue());
                                    foreach (Players players in this.threadSafeDictionary_5.Values)
                                    {
                                          queue.Enqueue(players);
                                    }
                                    while (queue.Count > 0)
                                    {
                                          if (World.jlMsg == 1)
                                          {
                                                Form1.WriteLine(2, "离开当前地图");
                                          }
                                          Players players2 = (Players)queue.Dequeue();
                                          base.method_93(players2, this);
                                          if (players2.threadSafeDictionary_5 != null)
                                          {
                                                players2.threadSafeDictionary_5.Remove(base.UserSessionID);
                                          }
                                    }
                              }
                        }
                        catch (Exception exception)
                        {
                              Form1.WriteLine(1, string.Concat(new object[] { "离开当前地图()人物离开出错出错[", base.Userid, "]-[", base.UserName, "]", exception }));
                        }
                        try
                        {
                              if (base.threadSafeDictionary_0 != null)
                              {
                                    Queue queue2 = Queue.Synchronized(new Queue());
                                    foreach (TBL_XWWL_NPC tbl_xwwl_npc in base.threadSafeDictionary_0.Values)
                                    {
                                          queue2.Enqueue(tbl_xwwl_npc);
                                    }
                                    while (queue2.Count > 0)
                                    {
                                          if (World.jlMsg == 1)
                                          {
                                                Form1.WriteLine(2, "离开当前地图2");
                                          }
                                        ((TBL_XWWL_NPC)queue2.Dequeue()).method_1(this);
                                    }
                              }
                        }
                        catch (Exception exception2)
                        {
                              Form1.WriteLine(1, "离开当前地图()NPC离开出错[" + base.Userid + "]-[" + base.UserName + "]" + exception2.Message);
                        }
                        try
                        {
                              if (base.threadSafeDictionary_1 != null)
                              {
                                    using (IEnumerator<MAT_DAT_ITEM_LOAI> enumerator3 = base.threadSafeDictionary_1.Values.GetEnumerator())
                                    {
                                          while (enumerator3.MoveNext())
                                          {
                                                enumerator3.Current.threadSafeDictionary_0.Remove(base.UserSessionID);
                                          }
                                    }
                              }
                        }
                        catch (Exception exception3)
                        {
                              Form1.WriteLine(1, "离开当前地图()地面VAT_PHAM列表 离开出错[" + base.Userid + "]-[" + base.UserName + "]" + exception3.Message);
                        }
                  }
                  catch (Exception exception4)
                  {
                        Form1.WriteLine(1, "离开当前地图()出错!用户[" + base.Userid + "]-[" + base.UserName + "]" + exception4.Message);
                  }
                  finally
                  {
                        if (this.threadSafeDictionary_5.Count > 0)
                        {
                              this.threadSafeDictionary_5.Clear();
                        }
                        if (base.threadSafeDictionary_0.Count > 0)
                        {
                              base.threadSafeDictionary_0.Clear();
                        }
                        if (base.threadSafeDictionary_1.Count > 0)
                        {
                              base.threadSafeDictionary_1.Clear();
                        }
                  }
            }

            public void ROI_KHOI_SHOP(int int_128)
            {
                  if (World.jlMsg == 1)
                  {
                        Form1.WriteLine(0, "Players_出店");
                  }
                  byte[] dst = Converter.hexStringToByte("AA551500000000CF000600030319000000000000000000000055AA");
                  Buffer.BlockCopy(BitConverter.GetBytes(int_128), 0, dst, 13, 4);
                  Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, dst, 5, 2);
                  if (base.Client != null)
                  {
                        base.Client.Send(dst, dst.Length);
                  }
                  base.bool_5 = false;
                  base.OpenWarehouse = false;
                  base.int_0 = 0;
                  Players players = base.Get_char_data(int_128);
                  if (players != null)
                  {
                        players.PlayerShop.CA_NHAN_CUA_HANG_CO_HAY_KHONG_SU_DUNG_BEN_TRONG = false;
                        players.PlayerShop.class15_0 = null;
                        byte[] buffer2 = Converter.hexStringToByte("AA551900000000CF000A0003030000000001000000000000000000000055AA");
                        Buffer.BlockCopy(BitConverter.GetBytes(players.UserSessionID), 0, buffer2, 13, 2);
                        Buffer.BlockCopy(BitConverter.GetBytes(players.UserSessionID), 0, buffer2, 5, 2);
                        if (players.Client != null)
                        {
                              players.Client.Send(buffer2, buffer2.Length);
                        }
                  }
            }

            public void ROI_KHOI_TO_DOI(byte[] byte_5, int int_128)
            {
                  TO_DOI_CLASS to_doi_class;
                  if (World.W_TO_DOI.TryGetValue(base.TO_DOI_ID, out to_doi_class))
                  {
                        to_doi_class.method_3(this);
                  }
            }

            
            public void RONG13_CONG_KICH_XAC_NHAN(int int_128, int Skill_ID, int int_130)
            {
                  int num = 0;
                  try
                  {
                        Players players;
                        //Lock @lock;
                        num = 1;
                        AttackClass class2 = null;
                        using (Lock @lock = new Lock(base.CONG_KICH_DANH_SACH, "CONG_KICH_DANH_SACH"))
                        {
                              if (base.CONG_KICH_DANH_SACH.Count < 1)
                              {
                                    return;
                              }
                              if (base.CONG_KICH_DANH_SACH.Count > 1)
                              {
                                    using (List<AttackClass>.Enumerator enumerator = base.CONG_KICH_DANH_SACH.GetEnumerator())
                                    {
                                          AttackClass current;
                                          while (enumerator.MoveNext())
                                          {
                                                current = enumerator.Current;
                                                if (current.NHAN_VAT_ID == int_128)
                                                {
                                                      goto Label_0066;
                                                }
                                          }
                                          goto Label_0094;
                                          Label_0066:
                                          class2 = current;
                                          goto Label_0094;
                                    }
                              }
                              class2 = base.CONG_KICH_DANH_SACH[0];
                        }
                        Label_0094:
                        if (class2 == null)
                        {
                              return;
                        }
                        if (int_128 >= 0x2710)
                        {
                              num = 2;
                              if (class2.VO_CONG_ID != 0)
                              {
                                    TBL_XWWL_KONGFU tbl_xwwl_kongfu;
                                    Random random2 = new Random();
                                    if (World.TBL_KONGFU.TryGetValue(class2.VO_CONG_ID, out tbl_xwwl_kongfu))
                                    {
                                          if (base.NHAN_VAT_LINH_THU != null)
                                          {
                                                if (base.NHAN_VAT_LINH_THU.FLD_JOB_LEVEL == 1)
                                                {
                                                      int num1 = base.NHAN_VAT_LINH_THU.FLD_CONG_KICH;
                                                      int num39 = base.NHAN_VAT_LINH_THU.FLD_TRUNG_MUC_TIEU;
                                                      int num40 = base.NHAN_VAT_LINH_THU.class79_0[1].FLD_AT;
                                                }
                                                else if (base.NHAN_VAT_LINH_THU.FLD_JOB_LEVEL == 2)
                                                {
                                                      int num41 = base.NHAN_VAT_LINH_THU.FLD_CONG_KICH;
                                                      int num42 = base.NHAN_VAT_LINH_THU.FLD_TRUNG_MUC_TIEU;
                                                      int num43 = base.NHAN_VAT_LINH_THU.class79_0[2].FLD_AT;
                                                }
                                                else if (base.NHAN_VAT_LINH_THU.FLD_JOB_LEVEL == 3)
                                                {
                                                      int num44 = base.NHAN_VAT_LINH_THU.FLD_CONG_KICH;
                                                      int num45 = base.NHAN_VAT_LINH_THU.FLD_TRUNG_MUC_TIEU;
                                                      int num46 = base.NHAN_VAT_LINH_THU.class79_0[2].FLD_AT;
                                                }
                                                else
                                                {
                                                      int num47 = base.NHAN_VAT_LINH_THU.FLD_CONG_KICH;
                                                      int num48 = base.NHAN_VAT_LINH_THU.FLD_TRUNG_MUC_TIEU;
                                                }
                                          }
                                          if ((base.Player_Job == 6) && (tbl_xwwl_kongfu.FLD_PID == 0xc3a17))
                                          {
                                                this.UpdateHP_MP_SP();
                                          }
                                          else
                                          {
                                                TBL_XWWL_NPC tbl_xwwl_npc;
                                                num = 3;
                                                if (MapClass.GetnpcTemplate(base.CharacterCoords_Map).TryGetValue(class2.NHAN_VAT_ID, out tbl_xwwl_npc))
                                                {
                                                      /*
                                                      if(tbl_xwwl_npc.Rxjh_HP >= 0L)
                                                      {
                                                            if(DestroyMonsterCall)
                                                            {
                                                                  DestroyMonsterCall = false;
                                                                  Form1.WriteLine(1, "DestroyMonsterScript Players DestroyMonsterCall FALSE");
                                                            }
                                                      }
                                                      */
                                                      if (tbl_xwwl_kongfu.FLD_TYPE == 4)
                                                      {
                                                            tbl_xwwl_npc.method_3(this);
                                                            tbl_xwwl_npc.Rxjh_HP -= class2.LUC_CONG_KICH;
                                                            if ((tbl_xwwl_npc.Rxjh_HP <= 0L) && !tbl_xwwl_npc.NPC_TU_VONG)
                                                            {
                                                                  Form1.WriteLine(1, "DestroyMonsterScript Players RONG13_CONG_KICH_XAC_NHAN");
                                                                  tbl_xwwl_npc.DestroyMonsterScript(base.UserSessionID);
                                                                  double num4 = tbl_xwwl_npc.method_9();
                                                                  double num5 = tbl_xwwl_npc.method_8();
                                                                  double num6 = tbl_xwwl_npc.method_10();
                                                                  double num7 = tbl_xwwl_npc.method_11();
                                                                  if (tbl_xwwl_npc.Level >= 0x3d)
                                                                  {
                                                                        this.HAP_HON(int_128);
                                                                  }
                                                                  if ((base.int_111 != 0) && (random2.Next(0, 80) <= base.int_111))
                                                                  {
                                                                        num5 *= 2.0;
                                                                        base.Show_Char(int_128, 0x193);
                                                                  }
                                                                  if (base.FLD_VIP == 1)
                                                                  {
                                                                        num5 += num5 * 0.3;
                                                                        num6 += num6 * 0.3;
                                                                        num7 += num7 * 0.3;
                                                                        num4 += num4 * 0.3;
                                                                  }
                                                                  if (((base.TO_DOI_ID != 0) && (base.int_7 == 1)) && (base.Player_FLD_LEVEL < World.Nhan_vat_dang_cap_cao_nhat))
                                                                  {
                                                                        TO_DOI_CLASS to_doi_class;
                                                                        if (World.W_TO_DOI.TryGetValue(base.TO_DOI_ID, out to_doi_class))
                                                                        {
                                                                              double num8 = (num5 * (1.0 + (to_doi_class.dictionary_0.Count * 0.1))) / ((double)to_doi_class.dictionary_0.Count);
                                                                              double num9 = (num6 * (1.0 + (to_doi_class.dictionary_0.Count * 0.1))) / ((double)to_doi_class.dictionary_0.Count);
                                                                              double num10 = (num7 * (1.0 + (to_doi_class.dictionary_0.Count * 0.1))) / ((double)to_doi_class.dictionary_0.Count);
                                                                              double num11 = (num4 * (1.0 + (to_doi_class.dictionary_0.Count * 0.1))) / ((double)to_doi_class.dictionary_0.Count);
                                                                              foreach (Players players2 in to_doi_class.dictionary_0.Values)
                                                                              {
                                                                                    if ((this.TRA_TIM_PHAM_VI_NGUOI_CHOI(700, players2) && ((players2.Player_FLD_LEVEL - tbl_xwwl_npc.Level) < World.Gain_experience_level_difference)) && (base.Player_FLD_LEVEL < World.Nhan_vat_dang_cap_cao_nhat))
                                                                                    {
                                                                                          if (players2.NHAN_VAT_LINH_THU != null)
                                                                                          {
                                                                                                this.e1(players2, num8);
                                                                                                num8 *= 1 - (players2.Config.Pet_Exp / 100);
                                                                                          }
                                                                                          players2.NHAN_VAT_KINH_NGHIEM += (long)(num8 * (1.0 + players2.NHAN_VAT_THEM_VAO_KINH_NGHIEM_TI_LE_PHAN_TRAM));
                                                                                          players2.Player_ExpErience += (int)(num9 * (1.0 + players2.FLD_nhan_vat_them_vao_kinh_nghiem_hoc_vo_cong_ti_le_phan_tram));
                                                                                          players2.Player_Money += (uint)(num11 * ((1.0 + players2.FLD_nhan_vat_them_vao_gold_ti_le_phan_tram) + players2.FLD_trang_bi_them_vao_thu_duoc_tro_choi_te_ti_le_phan_tram));
                                                                                          players2.Get_Money_Tip((uint)(num11 * ((1.0 + players2.FLD_nhan_vat_them_vao_gold_ti_le_phan_tram) + players2.FLD_trang_bi_them_vao_thu_duoc_tro_choi_te_ti_le_phan_tram)));
                                                                                          players2.int_13 += (int)num10;
                                                                                          players2.Calculate_Basic_Char_Data_3();
                                                                                          players2.UpdateHP_MP_SP();
                                                                                          players2.UpdatePowersAndStatus();
                                                                                          players2.UpdateExperience();
                                                                                          players2.UpdateMoneyAndWeight();
                                                                                    }
                                                                              }
                                                                        }
                                                                  }
                                                                  else if (((base.Player_FLD_LEVEL - tbl_xwwl_npc.Level) < World.Gain_experience_level_difference) && (base.Player_FLD_LEVEL < World.Nhan_vat_dang_cap_cao_nhat))
                                                                  {
                                                                        if (base.NHAN_VAT_LINH_THU != null)
                                                                        {
                                                                              this.e1(this, num5);
                                                                              num5 *= 1 - (base.Config.Pet_Exp / 100);
                                                                        }
                                                                        base.NHAN_VAT_KINH_NGHIEM += (long)(num5 * (base.NHAN_VAT_THEM_VAO_KINH_NGHIEM_TI_LE_PHAN_TRAM + 1.0));
                                                                        base.Player_ExpErience += (int)(num6 * (base.FLD_nhan_vat_them_vao_kinh_nghiem_hoc_vo_cong_ti_le_phan_tram + 1.0));
                                                                        base.Player_Money += (uint)(num4 * ((1.0 + base.FLD_nhan_vat_them_vao_gold_ti_le_phan_tram) + base.FLD_trang_bi_them_vao_thu_duoc_tro_choi_te_ti_le_phan_tram));
                                                                        base.Get_Money_Tip((uint)(num4 * ((base.FLD_nhan_vat_them_vao_gold_ti_le_phan_tram + 1.0) + base.FLD_trang_bi_them_vao_thu_duoc_tro_choi_te_ti_le_phan_tram)));
                                                                        base.int_13 += (int)num7;
                                                                        base.Calculate_Basic_Char_Data_3();
                                                                        this.UpdateHP_MP_SP();
                                                                        base.UpdatePowersAndStatus();
                                                                        base.UpdateExperience();
                                                                        base.UpdateMoneyAndWeight();
                                                                  }
                                                            }
                                                            else
                                                            {
                                                                  if (!tbl_xwwl_npc.timer_1.Enabled)
                                                                  {
                                                                        tbl_xwwl_npc.timer_0.Enabled = false;
                                                                        tbl_xwwl_npc.timer_1.Enabled = true;
                                                                  }
                                                                  if (base.int_1 > 0)
                                                                  {
                                                                        this.MagicAttack(class2.VO_CONG_ID, int_128);
                                                                  }
                                                                  else
                                                                  {
                                                                        base.CONG_KICH_DANH_SACH.Clear();
                                                                  }
                                                            }
                                                            num = 8;
                                                            foreach (NHAN_VAT_CONG_KICH nhan_vat_cong_kich in class2.list_0)
                                                            {
                                                                  TBL_XWWL_NPC tbl_xwwl_npc2;
                                                                  if (MapClass.GetnpcTemplate(base.CharacterCoords_Map).TryGetValue(nhan_vat_cong_kich.NHAN_VAT_ID, out tbl_xwwl_npc2))
                                                                  {
                                                                        tbl_xwwl_npc.method_3(this);
                                                                        tbl_xwwl_npc2.Rxjh_HP -= nhan_vat_cong_kich.LUC_CONG_KICH;
                                                                        if ((tbl_xwwl_npc2.Rxjh_HP <= 0L) && !tbl_xwwl_npc2.NPC_TU_VONG)
                                                                        {
                                                                              Form1.WriteLine(1, "DestroyMonsterScript Players RONG13_CONG_KICH_XAC_NHAN 2");
                                                                              tbl_xwwl_npc2.DestroyMonsterScript(base.UserSessionID);
                                                                              double num12 = tbl_xwwl_npc.method_9();
                                                                              double num13 = tbl_xwwl_npc.method_8();
                                                                              double num14 = tbl_xwwl_npc.method_10();
                                                                              if (tbl_xwwl_npc.Level >= 0x3d)
                                                                              {
                                                                                    this.HAP_HON(int_128);
                                                                              }
                                                                              double num15 = tbl_xwwl_npc2.method_11();
                                                                              if ((base.int_111 != 0) && (random2.Next(0, 80) <= base.int_111))
                                                                              {
                                                                                    num13 *= 2.0;
                                                                                    base.Show_Char(int_128, 0x193);
                                                                              }
                                                                              if (base.FLD_VIP == 1)
                                                                              {
                                                                                    num13 += num13 * 0.3;
                                                                                    num14 += num14 * 0.3;
                                                                                    num15 += num15 * 0.3;
                                                                                    num12 += num12 * 0.3;
                                                                              }
                                                                              if (((base.TO_DOI_ID != 0) && (base.int_7 == 1)) && (base.Player_FLD_LEVEL < World.Nhan_vat_dang_cap_cao_nhat))
                                                                              {
                                                                                    TO_DOI_CLASS to_doi_class2;
                                                                                    if (World.W_TO_DOI.TryGetValue(base.TO_DOI_ID, out to_doi_class2))
                                                                                    {
                                                                                          double num16 = (num13 * (1.0 + (to_doi_class2.dictionary_0.Count * 0.1))) / ((double)to_doi_class2.dictionary_0.Count);
                                                                                          double num17 = (num14 * (1.0 + (to_doi_class2.dictionary_0.Count * 0.1))) / ((double)to_doi_class2.dictionary_0.Count);
                                                                                          double num18 = (num12 * (1.0 + (to_doi_class2.dictionary_0.Count * 0.1))) / ((double)to_doi_class2.dictionary_0.Count);
                                                                                          double num19 = (num15 * (1.0 + (to_doi_class2.dictionary_0.Count * 0.1))) / ((double)to_doi_class2.dictionary_0.Count);
                                                                                          foreach (Players players3 in to_doi_class2.dictionary_0.Values)
                                                                                          {
                                                                                                if ((this.TRA_TIM_PHAM_VI_NGUOI_CHOI(700, players3) && ((players3.Player_FLD_LEVEL - tbl_xwwl_npc2.Level) < World.Gain_experience_level_difference)) && (base.Player_FLD_LEVEL < World.Nhan_vat_dang_cap_cao_nhat))
                                                                                                {
                                                                                                      if (players3.NHAN_VAT_LINH_THU != null)
                                                                                                      {
                                                                                                            this.e1(players3, num16);
                                                                                                            num16 *= 1 - (players3.Config.Pet_Exp / 100);
                                                                                                      }
                                                                                                      players3.NHAN_VAT_KINH_NGHIEM += (long)(num16 * (1.0 + players3.NHAN_VAT_THEM_VAO_KINH_NGHIEM_TI_LE_PHAN_TRAM));
                                                                                                      players3.Player_ExpErience += (int)(num17 * (1.0 + players3.FLD_nhan_vat_them_vao_kinh_nghiem_hoc_vo_cong_ti_le_phan_tram));
                                                                                                      players3.Player_Money += (uint)(num18 * ((1.0 + players3.FLD_nhan_vat_them_vao_gold_ti_le_phan_tram) + players3.FLD_trang_bi_them_vao_thu_duoc_tro_choi_te_ti_le_phan_tram));
                                                                                                      players3.Get_Money_Tip((uint)(num18 * ((1.0 + players3.FLD_nhan_vat_them_vao_gold_ti_le_phan_tram) + players3.FLD_trang_bi_them_vao_thu_duoc_tro_choi_te_ti_le_phan_tram)));
                                                                                                      players3.int_13 += (int)num19;
                                                                                                      players3.Calculate_Basic_Char_Data_3();
                                                                                                      players3.UpdateHP_MP_SP();
                                                                                                      players3.UpdatePowersAndStatus();
                                                                                                      players3.UpdateExperience();
                                                                                                      players3.UpdateMoneyAndWeight();
                                                                                                }
                                                                                          }
                                                                                    }
                                                                              }
                                                                              else if (((base.Player_FLD_LEVEL - tbl_xwwl_npc2.Level) < World.Gain_experience_level_difference) && (base.Player_FLD_LEVEL < World.Nhan_vat_dang_cap_cao_nhat))
                                                                              {
                                                                                    if (base.NHAN_VAT_LINH_THU != null)
                                                                                    {
                                                                                          this.e1(this, num13);
                                                                                          num13 *= 1 - (base.Config.Pet_Exp / 100);
                                                                                    }
                                                                                    base.NHAN_VAT_KINH_NGHIEM += (long)(num13 * (1.0 + base.NHAN_VAT_THEM_VAO_KINH_NGHIEM_TI_LE_PHAN_TRAM));
                                                                                    base.Player_ExpErience += (int)(num14 * (1.0 + base.FLD_nhan_vat_them_vao_kinh_nghiem_hoc_vo_cong_ti_le_phan_tram));
                                                                                    base.Player_Money += (uint)(num12 * ((1.0 + base.FLD_nhan_vat_them_vao_gold_ti_le_phan_tram) + base.FLD_trang_bi_them_vao_thu_duoc_tro_choi_te_ti_le_phan_tram));
                                                                                    base.Get_Money_Tip((uint)(num12 * ((1.0 + base.FLD_nhan_vat_them_vao_gold_ti_le_phan_tram) + base.FLD_trang_bi_them_vao_thu_duoc_tro_choi_te_ti_le_phan_tram)));
                                                                                    base.int_13 += (int)num15;
                                                                                    base.Calculate_Basic_Char_Data_3();
                                                                                    this.UpdateHP_MP_SP();
                                                                                    base.UpdatePowersAndStatus();
                                                                                    base.UpdateExperience();
                                                                                    base.UpdateMoneyAndWeight();
                                                                              }
                                                                              base.CONG_KICH_DANH_SACH.Clear();
                                                                        }
                                                                        else
                                                                        {
                                                                              if (!tbl_xwwl_npc2.timer_1.Enabled)
                                                                              {
                                                                                    tbl_xwwl_npc2.timer_0.Enabled = false;
                                                                                    tbl_xwwl_npc2.timer_1.Enabled = true;
                                                                              }
                                                                              if (base.int_1 > 0)
                                                                              {
                                                                                    this.MagicAttack(class2.VO_CONG_ID, int_128);
                                                                              }
                                                                              else
                                                                              {
                                                                                    base.CONG_KICH_DANH_SACH.Clear();
                                                                              }
                                                                        }
                                                                  }
                                                            }
                                                      }
                                                      else
                                                      {
                                                            num = 4;
                                                            if (Skill_ID == base.UserSessionID)
                                                            {
                                                                  tbl_xwwl_npc.method_3(this);
                                                            }
                                                            tbl_xwwl_npc.Rxjh_HP -= class2.LUC_CONG_KICH;
                                                            if (((base.Player_Job == 2) || (base.Player_Job == 9)) && ((random2.NextDouble() * 100.0) < base.Kiem_khach_Di_hoa_tiep_moc))
                                                            {
                                                                  base.Increase_HP(((int)class2.LUC_CONG_KICH) / 2);
                                                                  base.Show_Char(int_128, 0x1a);
                                                            }
                                                            if ((tbl_xwwl_npc.Rxjh_HP <= 0L) && !tbl_xwwl_npc.NPC_TU_VONG)
                                                            {
                                                                  Form1.WriteLine(1, "DestroyMonsterScript Players RONG13_CONG_KICH_XAC_NHAN 3");
                                                                  tbl_xwwl_npc.DestroyMonsterScript(base.UserSessionID);
                                                                  double num20 = tbl_xwwl_npc.method_9();
                                                                  double num21 = tbl_xwwl_npc.method_8();
                                                                  double num22 = tbl_xwwl_npc.method_10();
                                                                  double num23 = tbl_xwwl_npc.method_11();
                                                                  if (tbl_xwwl_npc.Level >= 0x3d)
                                                                  {
                                                                        this.HAP_HON(int_128);
                                                                  }
                                                                  if ((base.int_111 != 0) && (random2.Next(0, 80) <= base.int_111))
                                                                  {
                                                                        num21 *= 2.0;
                                                                        base.Show_Char(int_128, 0x193);
                                                                  }
                                                                  if (base.FLD_VIP == 1)
                                                                  {
                                                                        num21 += num21 * 0.3;
                                                                        num22 += num22 * 0.3;
                                                                        num23 += num23 * 0.3;
                                                                        num20 += num20 * 0.3;
                                                                  }
                                                                  if (((base.TO_DOI_ID != 0) && (base.int_7 == 1)) && (base.Player_FLD_LEVEL < World.Nhan_vat_dang_cap_cao_nhat))
                                                                  {
                                                                        TO_DOI_CLASS to_doi_class3;
                                                                        if (World.W_TO_DOI.TryGetValue(base.TO_DOI_ID, out to_doi_class3))
                                                                        {
                                                                              double num24 = (num21 * (1.0 + (to_doi_class3.dictionary_0.Count * 0.1))) / ((double)to_doi_class3.dictionary_0.Count);
                                                                              double num25 = (num22 * (1.0 + (to_doi_class3.dictionary_0.Count * 0.1))) / ((double)to_doi_class3.dictionary_0.Count);
                                                                              double num26 = (num20 * (1.0 + (to_doi_class3.dictionary_0.Count * 0.1))) / ((double)to_doi_class3.dictionary_0.Count);
                                                                              double num27 = (num23 * (1.0 + (to_doi_class3.dictionary_0.Count * 0.1))) / ((double)to_doi_class3.dictionary_0.Count);
                                                                              foreach (Players players4 in to_doi_class3.dictionary_0.Values)
                                                                              {
                                                                                    if ((this.TRA_TIM_PHAM_VI_NGUOI_CHOI(700, players4) && ((players4.Player_FLD_LEVEL - tbl_xwwl_npc.Level) < World.Gain_experience_level_difference)) && (base.Player_FLD_LEVEL < World.Nhan_vat_dang_cap_cao_nhat))
                                                                                    {
                                                                                          if (players4.NHAN_VAT_LINH_THU != null)
                                                                                          {
                                                                                                this.e1(players4, num24);
                                                                                                num24 *= 1 - (players4.Config.Pet_Exp / 100);
                                                                                          }
                                                                                          players4.NHAN_VAT_KINH_NGHIEM += (int)(num24 * (1.0 + players4.NHAN_VAT_THEM_VAO_KINH_NGHIEM_TI_LE_PHAN_TRAM));
                                                                                          players4.Player_ExpErience += (int)(num25 * (1.0 + players4.FLD_nhan_vat_them_vao_kinh_nghiem_hoc_vo_cong_ti_le_phan_tram));
                                                                                          players4.Player_Money += (uint)(num26 * ((1.0 + players4.FLD_nhan_vat_them_vao_gold_ti_le_phan_tram) + players4.FLD_trang_bi_them_vao_thu_duoc_tro_choi_te_ti_le_phan_tram));
                                                                                          players4.Get_Money_Tip((uint)(num26 * ((1.0 + players4.FLD_nhan_vat_them_vao_gold_ti_le_phan_tram) + players4.FLD_trang_bi_them_vao_thu_duoc_tro_choi_te_ti_le_phan_tram)));
                                                                                          players4.int_13 += (int)num27;
                                                                                          players4.Calculate_Basic_Char_Data_3();
                                                                                          players4.UpdateHP_MP_SP();
                                                                                          players4.UpdatePowersAndStatus();
                                                                                          players4.UpdateExperience();
                                                                                          players4.UpdateMoneyAndWeight();
                                                                                    }
                                                                              }
                                                                        }
                                                                  }
                                                                  else if (((base.Player_FLD_LEVEL - tbl_xwwl_npc.Level) < World.Gain_experience_level_difference) && (base.Player_FLD_LEVEL < World.Nhan_vat_dang_cap_cao_nhat))
                                                                  {
                                                                        if (base.NHAN_VAT_LINH_THU != null)
                                                                        {
                                                                              this.e1(this, num21);
                                                                              num21 *= 1 - (base.Config.Pet_Exp / 100);
                                                                        }
                                                                        base.NHAN_VAT_KINH_NGHIEM += (long)(num21 * (base.NHAN_VAT_THEM_VAO_KINH_NGHIEM_TI_LE_PHAN_TRAM + 1.0));
                                                                        base.Player_ExpErience += (int)(num22 * (base.FLD_nhan_vat_them_vao_kinh_nghiem_hoc_vo_cong_ti_le_phan_tram + 1.0));
                                                                        base.Player_Money += (uint)(num20 * ((1.0 + base.FLD_nhan_vat_them_vao_gold_ti_le_phan_tram) + base.FLD_trang_bi_them_vao_thu_duoc_tro_choi_te_ti_le_phan_tram));
                                                                        base.Get_Money_Tip((uint)(num20 * ((base.FLD_nhan_vat_them_vao_gold_ti_le_phan_tram + 1.0) + base.FLD_trang_bi_them_vao_thu_duoc_tro_choi_te_ti_le_phan_tram)));
                                                                        base.int_13 += (int)num23;
                                                                        base.Calculate_Basic_Char_Data_3();
                                                                        this.UpdateHP_MP_SP();
                                                                        base.UpdatePowersAndStatus();
                                                                        base.UpdateExperience();
                                                                        base.UpdateMoneyAndWeight();
                                                                  }
                                                                  base.CONG_KICH_DANH_SACH.Clear();
                                                            }
                                                            else
                                                            {
                                                                  if (!tbl_xwwl_npc.timer_1.Enabled)
                                                                  {
                                                                        tbl_xwwl_npc.timer_0.Enabled = false;
                                                                        tbl_xwwl_npc.timer_1.Enabled = true;
                                                                  }
                                                                  if (base.int_1 > 0)
                                                                  {
                                                                        this.MagicAttack(class2.VO_CONG_ID, int_128);
                                                                  }
                                                                  else
                                                                  {
                                                                        base.CONG_KICH_DANH_SACH.Clear();
                                                                  }
                                                            }
                                                      }
                                                }
                                          }
                                    }
                              }
                              else
                              {
                                    TBL_XWWL_NPC tbl_xwwl_npc3;
                                    num = 5;
                                    Random random3 = new Random();
                                    if (MapClass.GetnpcTemplate(base.CharacterCoords_Map).TryGetValue(class2.NHAN_VAT_ID, out tbl_xwwl_npc3))
                                    {
                                          num = 0x97;
                                          if (base.NHAN_VAT_LINH_THU != null)
                                          {
                                                int num49 = base.NHAN_VAT_LINH_THU.FLD_CONG_KICH;
                                                int num50 = base.NHAN_VAT_LINH_THU.FLD_TRUNG_MUC_TIEU;
                                          }
                                          num = 0x98;
                                          if (Skill_ID == base.UserSessionID)
                                          {
                                                tbl_xwwl_npc3.method_3(this);
                                          }
                                          num = 0x99;
                                          tbl_xwwl_npc3.Rxjh_HP -= class2.LUC_CONG_KICH;
                                          num = 0x9a;
                                          if (((base.Player_Job == 2) || (base.Player_Job == 9)) && ((random3.NextDouble() * 100.0) < base.Kiem_khach_Di_hoa_tiep_moc))
                                          {
                                                base.Increase_HP(((int)class2.LUC_CONG_KICH) / 2);
                                                base.Show_Char(int_128, 0x1a);
                                          }
                                          num = 0x9a;
                                          if ((tbl_xwwl_npc3.Rxjh_HP <= 0L) && !tbl_xwwl_npc3.NPC_TU_VONG)
                                          {
                                                base.CONG_KICH_DANH_SACH.Clear();
                                                Form1.WriteLine(1, "DestroyMonsterScript Players RONG13_CONG_KICH_XAC_NHAN 4");
                                                
                                                tbl_xwwl_npc3.DestroyMonsterScript(base.UserSessionID);
                                                
                                                double num28 = tbl_xwwl_npc3.method_9();
                                                double num29 = tbl_xwwl_npc3.method_8();
                                                double num30 = tbl_xwwl_npc3.method_10();
                                                double num31 = tbl_xwwl_npc3.method_11();
                                                if (tbl_xwwl_npc3.Level >= 0x3d)
                                                {
                                                      this.HAP_HON(int_128);
                                                }
                                                if ((base.int_111 != 0) && (random3.Next(0, 80) <= base.int_111))
                                                {
                                                      num29 *= 2.0;
                                                      base.Show_Char(int_128, 0x193);
                                                }
                                                if (base.FLD_VIP == 1)
                                                {
                                                      num29 += num29 * 0.3;
                                                      num30 += num30 * 0.3;
                                                      num31 += num31 * 0.3;
                                                      num28 += num28 * 0.3;
                                                }
                                                if (((base.TO_DOI_ID != 0) && (base.int_7 == 1)) && (base.Player_FLD_LEVEL < World.Nhan_vat_dang_cap_cao_nhat))
                                                {
                                                      TO_DOI_CLASS to_doi_class4;
                                                      if (World.W_TO_DOI.TryGetValue(base.TO_DOI_ID, out to_doi_class4))
                                                      {
                                                            double num32 = (num29 * (1.0 + (to_doi_class4.dictionary_0.Count * 0.1))) / ((double)to_doi_class4.dictionary_0.Count);
                                                            double num33 = (num30 * (1.0 + (to_doi_class4.dictionary_0.Count * 0.1))) / ((double)to_doi_class4.dictionary_0.Count);
                                                            double num34 = (num28 * (1.0 + (to_doi_class4.dictionary_0.Count * 0.1))) / ((double)to_doi_class4.dictionary_0.Count);
                                                            double num35 = (num31 * (1.0 + (to_doi_class4.dictionary_0.Count * 0.1))) / ((double)to_doi_class4.dictionary_0.Count);
                                                            foreach (Players players5 in to_doi_class4.dictionary_0.Values)
                                                            {
                                                                  if (this.TRA_TIM_PHAM_VI_NGUOI_CHOI(700, players5) && ((players5.Player_FLD_LEVEL - tbl_xwwl_npc3.Level) < World.Gain_experience_level_difference))
                                                                  {
                                                                        if (players5.NHAN_VAT_LINH_THU != null)
                                                                        {
                                                                              this.e1(players5, num32);
                                                                              num32 *= 1 - (players5.Config.Pet_Exp / 100);
                                                                        }
                                                                        players5.NHAN_VAT_KINH_NGHIEM += (long)(num32 * (1.0 + players5.NHAN_VAT_THEM_VAO_KINH_NGHIEM_TI_LE_PHAN_TRAM));
                                                                        players5.Player_ExpErience += (int)(num33 * (1.0 + players5.FLD_nhan_vat_them_vao_kinh_nghiem_hoc_vo_cong_ti_le_phan_tram));
                                                                        players5.Player_Money += (uint)(num34 * ((1.0 + players5.FLD_nhan_vat_them_vao_gold_ti_le_phan_tram) + players5.FLD_trang_bi_them_vao_thu_duoc_tro_choi_te_ti_le_phan_tram));
                                                                        players5.Get_Money_Tip((uint)(num34 * ((1.0 + players5.FLD_nhan_vat_them_vao_gold_ti_le_phan_tram) + players5.FLD_trang_bi_them_vao_thu_duoc_tro_choi_te_ti_le_phan_tram)));
                                                                        players5.int_13 += (int)num35;
                                                                        players5.Calculate_Basic_Char_Data_3();
                                                                        players5.UpdateHP_MP_SP();
                                                                        players5.UpdatePowersAndStatus();
                                                                        players5.UpdateExperience();
                                                                        players5.UpdateMoneyAndWeight();
                                                                  }
                                                            }
                                                      }
                                                }
                                                else if (((base.Player_FLD_LEVEL - tbl_xwwl_npc3.Level) < World.Gain_experience_level_difference) && (base.Player_FLD_LEVEL < World.Nhan_vat_dang_cap_cao_nhat))
                                                {
                                                      if (base.NHAN_VAT_LINH_THU != null)
                                                      {
                                                            this.e1(this, num29);
                                                            num29 *= 1 - (base.Config.Pet_Exp / 100);
                                                      }
                                                      base.NHAN_VAT_KINH_NGHIEM += (long)(num29 * (base.NHAN_VAT_THEM_VAO_KINH_NGHIEM_TI_LE_PHAN_TRAM + 1.0));
                                                      base.Player_ExpErience += (int)(num30 * (base.FLD_nhan_vat_them_vao_kinh_nghiem_hoc_vo_cong_ti_le_phan_tram + 1.0));
                                                      base.Player_Money += (uint)(num28 * ((1.0 + base.FLD_nhan_vat_them_vao_gold_ti_le_phan_tram) + base.FLD_trang_bi_them_vao_thu_duoc_tro_choi_te_ti_le_phan_tram));
                                                      base.Get_Money_Tip((uint)(num28 * ((base.FLD_nhan_vat_them_vao_gold_ti_le_phan_tram + 1.0) + base.FLD_trang_bi_them_vao_thu_duoc_tro_choi_te_ti_le_phan_tram)));
                                                      base.int_13 += (int)num31;
                                                      base.Calculate_Basic_Char_Data_3();
                                                      this.UpdateHP_MP_SP();
                                                      base.UpdatePowersAndStatus();
                                                      base.UpdateExperience();
                                                      base.UpdateMoneyAndWeight();
                                                }
                                                base.CONG_KICH_DANH_SACH.Clear();
                                          }
                                          else
                                          {
                                                num = 0x9f;
                                                if (!tbl_xwwl_npc3.timer_1.Enabled)
                                                {
                                                      tbl_xwwl_npc3.timer_0.Enabled = false;
                                                      tbl_xwwl_npc3.timer_1.Enabled = true;
                                                }
                                                num = 160;
                                                if (int_130 != 0)
                                                {
                                                      this.int_123 = int_128;
                                                      if (this.timer_1 != null)
                                                      {
                                                            this.timer_1.Enabled = false;
                                                            this.timer_1.Close();
                                                            this.timer_1.Dispose();
                                                            this.timer_1 = null;
                                                      }
                                                      this.timer_1 = new Timer(1000.0);
                                                      this.timer_1.Elapsed += new ElapsedEventHandler(this.e6);
                                                      this.timer_1.Enabled = true;
                                                      this.timer_1.AutoReset = false;
                                                }
                                                else
                                                {
                                                      base.CONG_KICH_DANH_SACH.Clear();
                                                }
                                          }
                                    }
                              }
                              return;
                        }
                        num = 6;
                        Random random = new Random();
                        if (!World.allConnectedChars.TryGetValue(class2.NHAN_VAT_ID, out players))
                        {
                              return;
                        }
                        long num2 = 0L;
                        long num3 = 0L;
                        try
                        {
                              using (Lock @lock = new Lock(base.CONG_KICH_DANH_SACH, "CONG_KICH_DANH_SACH"))
                              {
                                    foreach (AttackClass class4 in base.CONG_KICH_DANH_SACH)
                                    {
                                          if (num3 > 4L)
                                          {
                                                goto Label_182F;
                                          }
                                          if (class4.NHAN_VAT_ID == int_128)
                                          {
                                                num2 += class4.LUC_CONG_KICH;
                                                num3 += 1L;
                                          }
                                    }
                              }
                        }
                        catch (Exception exception)
                        {
                              Form1.WriteLine(1, "出错!CONG_KICH_DANH_SACH[" + base.Userid + "]-[" + base.UserName + "]" + exception.Message);
                        }
                        Label_182F:
                        if (((base.Player_Job == 2) || (base.Player_Job == 9)) && ((random.NextDouble() * 100.0) < base.Kiem_khach_Di_hoa_tiep_moc))
                        {
                              base.Increase_HP(((int)num2) / 2);
                        }
                        if (players.Player_Job == 3)
                        {
                              players.NHAN_VAT_SP += (int)((players.Player_FLD_LEVEL * 4) * players.Thuong_khach_Cuong_than_hang_the);
                        }
                        if (players.Player_Job == 6)
                        {
                              if (players.Thich_khach_Kinh_kha_chi_no != 0.0)
                              {
                                    players.NHAN_VAT_SP += (int)(3.0 + ((players.Player_FLD_LEVEL / 2) * players.Thich_khach_Kinh_kha_chi_no));
                              }
                              else if (num2 <= 0L)
                              {
                                    players.NHAN_VAT_SP++;
                              }
                              else
                              {
                                    players.NHAN_VAT_SP += 2;
                              }
                        }
                        if (players.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[0].ItemPropertyType == 2)
                        {
                              players.NHAN_VAT_SP += players.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[0].ItemPropertyNumber * 2;
                        }
                        players.NHAN_VAT_HP -= num2;
                        if (((players.Player_Job == 2) || (players.Player_Job == 9)) && (((players.Kiem_khach_thang_thien_3_khi_cong_Hoa_phuong_lam_trieu != 0.0) && (new Random().Next(0, 140) <= players.Kiem_khach_thang_thien_3_khi_cong_Hoa_phuong_lam_trieu)) && (players.NHAN_VAT_HP <= 0L)))
                        {
                              players.NHAN_VAT_HP = 10L;
                              players.Show_Char(int_128, 0x142);
                        }
                        if (((players.Player_Job == 1) && (players.Phan_sat_thuong_ty_le != 0.0)) && (random.Next(0, 300) <= players.Phan_sat_thuong_ty_le))
                        {
                              this.GUI_DI_PHAN_KHANG_LAM_TON_THUONG_CONG_KICH_SO_LIEU(num2, players.UserSessionID);
                              base.NHAN_VAT_HP -= num2;
                              this.CHAR_SENT_DATA_ATTACK(this, base.UserSessionID, class2.VO_CONG_ID, (int)num2, int_130, 0, -1);
                              this.UpdateHP_MP_SP();
                        }
                        num = 9;
                        base.CONG_KICH_DANH_SACH.Clear();
                        if (players.NHAN_VAT_HP <= 0L)
                        {
                              this.UNKNOWN_300(1, 10);
                              if (base.CharacterCoords_Map == World.Khieu_chien_ban_do_so_hieu)
                              {
                                    if (players.CharacterCoords_Map == World.Khieu_chien_ban_do_so_hieu)
                                    {
                                          char[] separator = new char[] { ',' };
                                          string[] strArray = World.Tu_vong_tro_ve_thanh_Ban_do_Toa_do.Trim().Split(separator);
                                          this.MOVE_NEW((float)int.Parse(strArray[1]), (float)int.Parse(strArray[2]), 15f, int.Parse(strArray[0]));
                                          players.MOVE_NEW((float)int.Parse(strArray[1]), (float)int.Parse(strArray[2]), 15f, int.Parse(strArray[0]));
                                          players.NHAN_VAT_HP = players.NHAN_VAT_LON_NHAT_HP;
                                          players.UpdateHP_MP_SP();
                                          base.PlayerIsDead = false;
                                          if (World.class12_0 != null)
                                          {
                                                World.class12_0.Dispose();
                                          }
                                    }
                                    long num37 = (World.Khieu_chien_xin_can_thiet_CASH_So_luong * 2) - World.Khieu_chien_he_thong_thu_ve_CASH_So_luong;
                                    base.method_47(num37, 1);
                                    base.UPDATE_RXPIONT();
                                    base.GameMessage("Congratulations, you get[" + num37 + "]Ingots", 20, "The challenge Wang born");
                                    players.GameMessage("Unfortunately, you lose[" + World.Khieu_chien_xin_can_thiet_CASH_So_luong + "]Ingots", 20, "Born loser");
                                    foreach (Players local1 in World.allConnectedChars.Values)
                                    {
                                          local1.GameMessage("Players[" + base.UserName + "]Personal Challenge won", 20, "The challenge Wang born");
                                          local1.GameMessage("Players[" + players.UserName + "]Personal Challenge people out of the water", 0x15, "Born loser");
                                    }
                                    World.list_2.Clear();
                                    World.list_3.Clear();
                                    return;
                              }
                              players.NHAN_VAT_HP = 0L;
                              players.Dead();
                              base.GIET_NGUOI_SO_LAN += 1L;
                              players.BI_GIET_SO_LAN += 1L;
                              if ((base.CharacterCoords_Map != 0x1b59) && (base.CharacterCoords_Map != 0x1bbd))
                              {
                                    if ((base.CharacterCoords_Map == 0x321) && (World.THE_LUC_CHIEN_2_TIEN_TRINH == 3))
                                    {
                                          EventTopClass class5;
                                          EventTopClass class6;
                                          if (World.EventTop.TryGetValue(base.UserName, out class5))
                                          {
                                                class5.Kills++;
                                          }
                                          else
                                          {
                                                class5 = new EventTopClass
                                                {
                                                      string_0 = base.UserName,
                                                      int_0 = base.Player_FLD_LEVEL
                                                };
                                                if (base.Player_Zx == 1)
                                                {
                                                      class5.THE_LUC = "TUMMA";
                                                }
                                                else
                                                {
                                                      class5.THE_LUC = "ATUM";
                                                }
                                                class5.string_1 = base.GuildName;
                                                class5.Kills = 1;
                                                class5.Dead = 0;
                                                World.EventTop.Add(base.UserName, class5);
                                          }
                                          if (World.EventTop.TryGetValue(players.UserName, out class6))
                                          {
                                                class6.Dead++;
                                          }
                                          else
                                          {
                                                class6 = new EventTopClass
                                                {
                                                      string_0 = players.UserName,
                                                      int_0 = players.Player_FLD_LEVEL
                                                };
                                                if (players.Player_Zx == 1)
                                                {
                                                      class5.THE_LUC = "TUMMA";
                                                }
                                                else
                                                {
                                                      class5.THE_LUC = "ATUM";
                                                }
                                                class6.string_1 = players.GuildName;
                                                class6.Kills = 0;
                                                class6.Dead = 1;
                                                World.EventTop.Add(players.UserName, class6);
                                          }
                                          if (base.Player_Zx == 1)
                                          {
                                                World.THE_LUC_CHIEN_2_CHINH_PHAI_DIEM_SO += players.Player_FLD_LEVEL;
                                          }
                                          else
                                          {
                                                World.THE_LUC_CHIEN_2_TA_PHAI_DIEM_SO += players.Player_FLD_LEVEL;
                                          }
                                    }
                                    else
                                    {
                                          if (base.Player_MaxWx < World.Vo_huan_gioi_han_nhan_duoc)
                                          {
                                                if (players.NHAN_VAT_THIEN_AC < 0)
                                                {
                                                      if (base.NHAN_VAT_THIEN_AC < 0)
                                                      {
                                                            if (players.Player_WuXun <= 0)
                                                            {
                                                                  players.NHAN_VAT_THIEN_AC += 100;
                                                                  players.UpdatePowersAndStatus();
                                                                  base.NHAN_VAT_THIEN_AC += 100;
                                                                  base.UpdatePowersAndStatus();
                                                                  base.GameMessage("Nhan vat khong co diem vo huan nen khong the nhan duoc", 9, "Msg");
                                                            }
                                                            else
                                                            {
                                                                  players.NHAN_VAT_THIEN_AC += 100;
                                                                  players.UpdatePowersAndStatus();
                                                                  base.NHAN_VAT_THIEN_AC += 100;
                                                                  base.GameMessage(string.Concat(new object[] { "Gioi han con lai ", base.Player_MaxWx, "/", World.Vo_huan_gioi_han_nhan_duoc, " diem vo huan trong ngay!" }), 9, "Msg");
                                                            }
                                                            return;
                                                      }
                                                      if (players.Player_WuXun <= 0)
                                                      {
                                                            players.NHAN_VAT_THIEN_AC += 100;
                                                            players.UpdatePowersAndStatus();
                                                            base.GameMessage("Nhan vat khong co diem vo huan nen khong the nhan duoc", 9, "Msg");
                                                            return;
                                                      }
                                                      if (base.Player_MaxWx >= World.Vo_huan_gioi_han_nhan_duoc)
                                                      {
                                                            players.NHAN_VAT_THIEN_AC += 100;
                                                            players.UpdatePowersAndStatus();
                                                            base.UpdatePowersAndStatus();
                                                            base.GameMessage(string.Concat(new object[] { "Gioi han con lai ", base.Player_MaxWx, "/", World.Vo_huan_gioi_han_nhan_duoc, " diem vo huan trong ngay!" }), 9, "Msg");
                                                            return;
                                                      }
                                                      players.NHAN_VAT_THIEN_AC += 100;
                                                      players.UpdatePowersAndStatus();
                                                      players.Player_WuXun -= 200;
                                                      base.Player_WuXun += 100;
                                                      base.Player_MaxWx += 100;
                                                      base.UpdatePowersAndStatus();
                                                      base.GameMessage(string.Concat(new object[] { "Gioi han con lai ", base.Player_MaxWx, "/", World.Vo_huan_gioi_han_nhan_duoc, " diem vo huan trong ngay!" }), 9, "Msg");
                                                }
                                                else if (base.Player_Zx == players.Player_Zx)
                                                {
                                                      if ((base.CharacterCoords_Map != 0xc9) && (base.CharacterCoords_Map != 0x12d))
                                                      {
                                                            base.NHAN_VAT_THIEN_AC -= 0x3e8;
                                                            base.UpdatePowersAndStatus();
                                                      }
                                                }
                                                else if (base.Player_Zx != players.Player_Zx)
                                                {
                                                      if (players.Player_WuXun <= 0)
                                                      {
                                                            base.GameMessage("Nhan vat khong co diem vo huan nen khong the nhan duoc", 9, "Msg");
                                                            return;
                                                      }
                                                      if ((base.CharacterCoords_Map != 0xc9) && (base.CharacterCoords_Map != 0x12d))
                                                      {
                                                            base.NHAN_VAT_THIEN_AC -= 650;
                                                            players.UpdatePowersAndStatus();
                                                      }
                                                      if (base.Player_MaxWx >= World.Vo_huan_gioi_han_nhan_duoc)
                                                      {
                                                            base.GameMessage(string.Concat(new object[] { "Gioi han con lai ", base.Player_MaxWx, "/", World.Vo_huan_gioi_han_nhan_duoc, " diem vo huan trong ngay!" }), 9, "Msg");
                                                            return;
                                                      }
                                                      base.Player_MaxWx += 100;
                                                      base.Player_WuXun += 100;
                                                      players.Player_WuXun -= 200;
                                                      base.UpdatePowersAndStatus();
                                                      players.UpdatePowersAndStatus();
                                                      base.GameMessage(string.Concat(new object[] { "Gioi han con lai ", base.Player_MaxWx, "/", World.Vo_huan_gioi_han_nhan_duoc, " diem vo huan trong ngay!" }), 9, "Msg");
                                                }
                                          }
                                          if (World.Co_hay_khong_mo_ra_Vo_huan_he_thong == 1)
                                          {
                                                this.VO_HUAN_HE_THONG(this, players);
                                          }
                                          if ((World.PK_out_equipment == 1) && (base.NHAN_VAT_THIEN_AC <= World.PK_out_equipment_good_and_evil))
                                          {
                                                int index = new Random().Next(0, 14);
                                                if (((new Random().Next(1, 100) <= World.PK_out_equipment_chance) && (BitConverter.ToInt32(players.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[index].VAT_PHAM_ID, 0) != 0)) && !players.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[index].Item_troi_chat)
                                                {
                                                      this.NHAN_VAT_CHET_ROI_ITEM(BitConverter.ToInt32(players.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[index].VAT_PHAM_ID, 0), players.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[index].FLD_MAGIC0, players.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[index].FLD_MAGIC1, players.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[index].FLD_MAGIC2, players.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[index].FLD_MAGIC3, players.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[index].FLD_MAGIC4, players.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[index].method_13(), this, players);
                                                      players.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[index].Item_byte = new byte[0x49];
                                                      players.TINH_TOAN_NHAN_VAT_TRANG_BI_SO_LIEU();
                                                      players.LAN_DAU_DOI_THOAI_DA_TRANG_BI_VAT_PHAM();
                                                      players.UpdatePowersAndStatus();
                                                }
                                          }
                                          if (((players.CharacterCoords_Map == int.Parse(World.PK_he_thong_han_che_ban_do[0])) || (players.CharacterCoords_Map == int.Parse(World.PK_he_thong_han_che_ban_do[1]))) || (((players.CharacterCoords_Map == int.Parse(World.PK_he_thong_han_che_ban_do[2])) || (players.CharacterCoords_Map == int.Parse(World.PK_he_thong_han_che_ban_do[3]))) || (players.CharacterCoords_Map == int.Parse(World.PK_he_thong_han_che_ban_do[4]))))
                                          {
                                                if ((World.PK_mat_level != 0) && (players.Player_FLD_LEVEL > World.PK_mat_level))
                                                {
                                                      players.Player_FLD_LEVEL -= World.PK_mat_level;
                                                      players.NHAN_VAT_KINH_NGHIEM = 0L;
                                                      players.UpdateHP_MP_SP();
                                                      players.UpdatePowersAndStatus();
                                                      players.UpdateExperience();
                                                      players.LUU_NHAN_VAT_SO_LIEU();
                                                      players.GameMessage("Death Drop" + World.PK_mat_level + "level!", 50, "");
                                                }
                                                if ((World.PK_mat_CASH != 0) && (players.FLD_RXPIONT > World.PK_mat_CASH))
                                                {
                                                      players.KIEM_TRA_BACH_BAO_CAC_NGUYEN_BAO_SO_LUONG();
                                                      players.KIEM_SOAT_CASH_SO_LIEU(World.PK_mat_CASH, 0);
                                                      players.UPDATE_RXPIONT();
                                                      players.GameMessage("Death Drop" + World.PK_mat_CASH + "Ingot!", 50, "");
                                                      this.KIEM_TRA_BACH_BAO_CAC_NGUYEN_BAO_SO_LUONG();
                                                      if (World.PK_mat_CASH_he_thong_thu_ve_so_luong != 0)
                                                      {
                                                            base.KIEM_SOAT_CASH_SO_LIEU(World.PK_mat_CASH - World.PK_mat_CASH_he_thong_thu_ve_so_luong, 1);
                                                      }
                                                      else
                                                      {
                                                            base.KIEM_SOAT_CASH_SO_LIEU(World.PK_mat_CASH, 1);
                                                      }
                                                      base.UPDATE_RXPIONT();
                                                      base.GameMessage("You get the other side of death" + (World.PK_mat_CASH - World.PK_mat_CASH_he_thong_thu_ve_so_luong) + "Ingot!", 50, "");
                                                      base.GameMessage("System recovery" + World.PK_mat_CASH_he_thong_thu_ve_so_luong + "Ingot", 50, "");
                                                }
                                          }
                                    }
                              }
                        }
                        else
                        {
                              num = 7;
                              if (int_130 != 0)
                              {
                                    this.int_123 = int_128;
                                    if (this.timer_1 != null)
                                    {
                                          this.timer_1.Enabled = false;
                                          this.timer_1.Close();
                                          this.timer_1.Dispose();
                                          this.timer_1 = null;
                                    }
                                    this.timer_1 = new Timer(1000.0);
                                    this.timer_1.Elapsed += new ElapsedEventHandler(this.e6);
                                    this.timer_1.Enabled = true;
                                    this.timer_1.AutoReset = false;
                              }
                        }
                        players.UpdateHP_MP_SP();
                  }
                  catch (Exception exception2)
                  {
                        base.CONG_KICH_DANH_SACH.Clear();
                        Form1.WriteLine(1, "攻击确认 错误" + num.ToString() + base.Userid + exception2.Message);
                  }
            }

            public void SellAndBuyItems(byte[] data, int length)
            {
                  int num = 0;
                  try
                  {
                        object[] objArray5;
                        object[] objArray4;
                        int num2;
                        int num3;
                        if ((base.NHAN_VAT_HP > 0L) && !base.PlayerIsDead)
                        {
                              TBL_XWWL_ITEM tbl_xwwl_item;
                              if (base.Exiting)
                              {
                                    DBA.smethod_7($"UPDATE TBL_ACCOUNT SET FLD_ZT=1 WHERE FLD_ID='{base.Userid}'", "rxjhaccount");
                                    Form1.WriteLine(6, "退出复制BUG11 [" + base.Userid + "][" + base.UserName + "][" + base.Client.ToString() + "] ");
                                    if (base.Client != null)
                                    {
                                          base.Client.Dispose();
                                    }
                                    return;
                              }
                              this.Packet_Modify(data, length);
                              int num4 = data[11];
                              int index = data[0x44];
                              num2 = BitConverter.ToInt32(data, 0x13);
                              num3 = BitConverter.ToInt32(data, 0x1b);
                              int num6 = 0;
                              num = 1;
                              if (base.Exiting)
                              {
                                    Form1.WriteLine(6, "退出复制BUG [" + base.Userid + "][" + base.UserName + "][" + base.Client.ToString() + "] ");
                                    return;
                              }
                              byte[] dst = new byte[0x38];
                              if (!World.Itme.TryGetValue(num2, out tbl_xwwl_item))
                              {
                                    goto Label_08E3;
                              }
                              if (num4 == 1)
                              {
                                    if (num3 < 1)
                                    {
                                          return;
                                    }
                                    if (TBL_XWWL_SELL.Getwp(num2) == null)
                                    {
                                          Form1.WriteLine(6, string.Concat(new object[] { "买卖东西BUG [", num2, "][", base.Userid, "][", base.UserName, "][", base.Client.ToString(), "] " }));
                                          return;
                                    }
                                    TBL_XWWL_SELL wp = TBL_XWWL_SELL.Getwp(num2);
                                    if (wp.CAN_VO_HUAN != 0)
                                    {
                                          if (base.Player_WuXun < wp.CAN_VO_HUAN)
                                          {
                                                base.GameMessage("Your lack of Wu Xun" + wp.CAN_VO_HUAN + ",Unable to buy this item", 50, "");
                                                return;
                                          }
                                    }
                                    else if (base.Player_Money < (tbl_xwwl_item.FLD_MONEY * num3))
                                    {
                                          base.BuyItem_Tip(13);
                                          return;
                                    }
                                    if (((tbl_xwwl_item.FLD_WEIGHT * num3) + base.NHAN_VAT_MANG_NANG) >= base.NHAN_VAT_MANG_NANG_TONG_TRONG_LUONG)
                                    {
                                          base.BuyItem_Tip(11);
                                          return;
                                    }
                                    num = 2;
                                    int num7 = base.DUOC_KIEN_HANG_RONG(this);
                                    if (num7 == -1)
                                    {
                                          base.BuyItem_Tip(14);
                                          return;
                                    }
                                    if (num3 < 0)
                                    {
                                          Form1.WriteLine(6, string.Concat(new object[] { "非法复制VAT_PHAM[", base.Userid, "]-[", base.UserName, "] VAT_PHAM_ID[", num2, "] 数量[", num3, "]" }));
                                          return;
                                    }
                                    num = 3;
                                    switch (num2)
                                    {
                                          case 0x2faf0801:
                                          case 0x2faf0802:
                                          case 0x2faf080b:
                                          case 0x2faf080c:
                                          case 0x2faf080d:
                                          case 0x2faf0817:
                                          case 0x2faf0818:
                                          case 0x2faf0819:
                                          case 0x2faf081a:
                                          case 0x2faf081b:
                                          case 0x2faf083d:
                                          case 0x2faf083e:
                                                wp.FLD_MAGIC0 = World.smethod_16(num2, 1);
                                                num2 = World.smethod_14(num2);
                                                num6 = wp.FLD_MAGIC0;
                                                break;

                                          case 0x2faf082e:
                                                {
                                                      int num9 = new Random().Next(1, 0x17);
                                                      wp.FLD_MAGIC0 = num9;
                                                      break;
                                                }
                                          case 0x2faf082f:
                                                {
                                                      int num10 = new Random().Next(0x17, 0x34);
                                                      wp.FLD_MAGIC0 = num10;
                                                      break;
                                                }
                                          case 0x2faf0830:
                                                {
                                                      int num11 = new Random().Next(0x17, 0x34);
                                                      wp.FLD_MAGIC0 = num11;
                                                      break;
                                                }
                                          case 0x3b9acb41:
                                                {
                                                      Random random = new Random();
                                                      wp.FLD_MAGIC0 = random.Next(0x3e9, 0xbb8);
                                                      wp.FLD_MAGIC1 = random.Next(10, 0x33);
                                                      break;
                                                }
                                          case 0x3b9acb43:
                                                {
                                                      Random random2 = new Random();
                                                      wp.FLD_MAGIC0 = random2.Next(0x3e9, 0xbb8);
                                                      wp.FLD_MAGIC1 = random2.Next(100, 0x97);
                                                      break;
                                                }
                                          case 0x3b9acb45:
                                                {
                                                      Random random3 = new Random();
                                                      wp.FLD_MAGIC0 = random3.Next(0x3e9, 0xbb8);
                                                      wp.FLD_MAGIC1 = random3.Next(400, 700);
                                                      break;
                                                }
                                          case 0x3b9acb47:
                                                {
                                                      Random random4 = new Random();
                                                      wp.FLD_MAGIC0 = random4.Next(0x3e9, 0xbb8);
                                                      wp.FLD_MAGIC1 = random4.Next(0x7d0, 0x9c4);
                                                      break;
                                                }
                                    }
                                    num = 4;
                                    byte[] bytes = BitConverter.GetBytes(RxjhClass.GetDBItmeId());
                                    Buffer.BlockCopy(BitConverter.GetBytes(wp.FLD_MAGIC0), 0, dst, 0, 4);
                                    Buffer.BlockCopy(BitConverter.GetBytes(wp.FLD_MAGIC1), 0, dst, 4, 4);
                                    Buffer.BlockCopy(BitConverter.GetBytes(wp.FLD_MAGIC2), 0, dst, 8, 4);
                                    Buffer.BlockCopy(BitConverter.GetBytes(wp.FLD_MAGIC3), 0, dst, 12, 4);
                                    Buffer.BlockCopy(BitConverter.GetBytes(wp.FLD_MAGIC4), 0, dst, 0x10, 4);
                                    if ((wp.FLD_CJL != 0) && (wp.FLD_CJL > 0x3e8))
                                    {
                                          wp.FLD_CJL = 0x3e8;
                                    }
                                    num = 5;
                                    int num8 = 0;
                                    if (num2 == 0x29b92702)
                                    {
                                          if (base.Player_Money < 0x5f8ee40L)
                                          {
                                                base.BuyItem_Tip(13);
                                                return;
                                          }
                                          num8 = 0x5f8ee40;
                                          base.Player_Money -= 0x5f8ee40L;
                                          base.NHAN_VAT_MANG_NANG += tbl_xwwl_item.FLD_WEIGHT * num3;
                                    }
                                    else if (wp.CAN_VO_HUAN != 0)
                                    {
                                          base.Player_WuXun -= wp.CAN_VO_HUAN;
                                          base.UpdatePowersAndStatus();
                                          this.PAK_SUA_CHUA_DO_VO_HUAN(-wp.CAN_VO_HUAN);
                                    }
                                    else
                                    {
                                          num8 = tbl_xwwl_item.FLD_MONEY * num3;
                                          base.Player_Money -= num8;
                                          base.NHAN_VAT_MANG_NANG += tbl_xwwl_item.FLD_WEIGHT * num3;
                                    }
                                    byte[] buffer3 = BitConverter.GetBytes((uint)num8);
                                    this.BUON_BAN_ITEM(num7, num4, buffer3, BitConverter.GetBytes(num3), bytes, BitConverter.GetBytes(num2), dst, BitConverter.GetBytes(wp.FLD_CJL), num6);
                                    num = 6;
                              }
                              else
                              {
                                    double num12;
                                    num = 7;
                                    VAT_PHAM_LOAI vat_pham_loai = base.TRANG_BI_LAN_BAO_VAY[index];
                                    if (((BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_SO_LUONG, 0) < 0) || (num3 < 0)) || (BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_SO_LUONG, 0) < num3))
                                    {
                                          goto Label_0880;
                                    }
                                    if (base.TRANG_BI_LAN_BAO_VAY[index].Item_troi_chat)
                                    {
                                          return;
                                    }
                                    if (BitConverter.ToInt32(vat_pham_loai.VAT_PHAM_ID, 0) == 0)
                                    {
                                          this.Dispose();
                                          base.Client.Dispose();
                                          return;
                                    }
                                    if (BitConverter.ToInt32(vat_pham_loai.VAT_PHAM_SO_LUONG, 0) == 0)
                                    {
                                          this.Dispose();
                                          base.Client.Dispose();
                                          return;
                                    }
                                    if (BitConverter.ToInt32(vat_pham_loai.VAT_PHAM_ID, 0) != num2)
                                    {
                                          this.Dispose();
                                          Form1.WriteLine(6, string.Concat(new object[] { "买卖东西BUG22 [", num2, "][", base.Userid, "][", base.UserName, "][", base.Client.ToString(), "] " }));
                                          base.Client.Dispose();
                                          return;
                                    }
                                    num = 8;
                                    if (num2 == 0x29b92702)
                                    {
                                          num12 = 100000000.0;
                                          base.Player_Money += (uint)num12;
                                          base.NHAN_VAT_MANG_NANG -= tbl_xwwl_item.FLD_WEIGHT * num3;
                                    }
                                    else
                                    {
                                          num12 = (tbl_xwwl_item.FLD_MONEY * num3) * 0.3;
                                          base.Player_Money += (uint)num12;
                                          base.NHAN_VAT_MANG_NANG -= tbl_xwwl_item.FLD_WEIGHT * num3;
                                    }
                                    num = 9;
                                    byte[] buffer4 = BitConverter.GetBytes((uint)num12);
                                    this.BUON_BAN_ITEM(index, num4, buffer4, BitConverter.GetBytes(num3), null, BitConverter.GetBytes(num2), dst, BitConverter.GetBytes(0), 0);
                                    num = 10;
                              }
                              base.UpdateMoneyAndWeight();
                        }
                        return;
                        Label_0880:
                        objArray4 = new object[] { "非法复制VAT_PHAM[", base.Userid, "]-[", base.UserName, "] VAT_PHAM_ID[", num2, "]数量[", num3, "]" };
                        Form1.WriteLine(6, string.Concat(objArray4));
                        return;
                        Label_08E3:
                        objArray5 = new object[] { "买卖东西 出错  没有这个VAT_PHAM [", num2, "][", num3, "]" };
                        Form1.WriteLine(1, string.Concat(objArray5));
                  }
                  catch (Exception exception)
                  {
                        Form1.WriteLine(1, string.Concat(new object[] { "买卖东西 出错 [", base.Userid, "][", base.UserName, "] [", BitConverter.ToInt32(data, 0x13), "] [", num, "] ", exception.Message }));
                  }
            }

            public void Send_Email(byte[] byte_5, int int_128)
            {
                  byte[] dst = new byte[4];
                  byte[] buffer2 = new byte[4];
                  byte[] bytes = new byte[15];
                  Buffer.BlockCopy(byte_5, 0x1c, dst, 0, 1);
                  Buffer.BlockCopy(byte_5, 0x1d, buffer2, 0, 4);
                  int num = BitConverter.ToInt32(dst, 0);
                  int num2 = BitConverter.ToInt32(buffer2, 0);
                  for (int i = 0; i < 15; i++)
                  {
                        if (byte_5[13 + i] == 0)
                        {
                              break;
                        }
                        bytes[i] = byte_5[13 + i];
                  }
                  Players players = World.smethod_2(Encoding.Default.GetString(bytes).Replace("\0", "").Trim());
                  if (players != null)
                  {
                        if (!this.TRA_TIM_PHAM_VI_NGUOI_CHOI(50, players))
                        {
                              this.SU_DO_DAI_LOAI(0x63, 1, 3);
                        }
                        else
                        {
                              this.SU_DO_DAI_LOAI(1, num2, num);
                              players.SU_DO_DAI_LOAI(1, num2, num);
                        }
                  }
            }

            public void SendPack(int Target_ID, int UserID, int AttackType, int SkillID, int times)
            {
                  if ((base.Client != null) && base.Client.Running)
                  {
                        byte[] dst = Converter.hexStringToByte("AA55270001000025001800000000000000000000000000000000000000000000000000000000000000000055AA");
                        byte[] bytes = Encoding.Default.GetBytes(base.Userid);
                        Buffer.BlockCopy(BitConverter.GetBytes(Target_ID), 0, dst, 5, 2);
                        Buffer.BlockCopy(BitConverter.GetBytes(UserID), 0, dst, 11, 2);
                        Buffer.BlockCopy(BitConverter.GetBytes(AttackType), 0, dst, 15, 4);
                        Buffer.BlockCopy(BitConverter.GetBytes(times), 0, dst, 0x13, 2);
                        Buffer.BlockCopy(bytes, 0, dst, 0x17, bytes.Length);
                        if (SkillID == 0)
                        {
                              if ((SkillID == 300) && (SkillID < 0x2710))
                              {
                                    Buffer.BlockCopy(BitConverter.GetBytes(0), 0, dst, 0x15, 1);
                              }
                              else
                              {
                                    Buffer.BlockCopy(BitConverter.GetBytes(1), 0, dst, 0x15, 1);
                              }
                        }
                        else if ((SkillID >= 300) && (SkillID < 0x2710))
                        {
                              Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 0x15, 1);
                        }
                        else
                        {
                              Buffer.BlockCopy(BitConverter.GetBytes(3), 0, dst, 0x15, 1);
                        }
                        if ((base.Client != null) && (World.class20_0 != null))
                        {
                              World.class20_0.method_6(dst, 0x2d);
                        }
                  }
            }

            public void SendRangeOfPackets(byte[] byte_5, int int_128)
            {
                  if (World.jlMsg == 1)
                  {
                        Form1.WriteLine(0, "Players_Send the current multi-range broadcast data packets");
                  }
                  try
                  {
                        if (this.threadSafeDictionary_5 != null)
                        {
                              Queue queue = Queue.Synchronized(new Queue());
                              foreach (Players players in this.threadSafeDictionary_5.Values)
                              {
                                    queue.Enqueue(players);
                              }
                              while (queue.Count > 0)
                              {
                                    if (World.jlMsg == 1)
                                    {
                                          Form1.WriteLine(0, "Send the current multi-range broadcast data packets");
                                    }
                                    Players players2 = (Players)queue.Dequeue();
                                    if ((players2.Client != null) && players2.Client.Running)
                                    {
                                          players2.Client.method_8(byte_5, int_128);
                                    }
                              }
                        }
                  }
                  catch (Exception exception)
                  {
                        Form1.WriteLine(1, string.Concat(new object[] { "Send the current range of multi-packet broadcast data error![", base.Userid, "]-[", base.UserName, "]", exception }));
                  }
            }

            public void ServerTime()
            {
                  if (World.TimeSystemSwitch != 0)
                  {
                        if (DateTime.Now.Hour == 1)
                        {
                              World.WorldTime = 0x3a98;
                        }
                        else if (DateTime.Now.Hour == 2)
                        {
                              World.WorldTime = 0x3c8c;
                        }
                        else if (DateTime.Now.Hour == 3)
                        {
                              World.WorldTime = 0x445c;
                        }
                        else if (DateTime.Now.Hour == 4)
                        {
                              World.WorldTime = 0x45ec;
                        }
                        else if (DateTime.Now.Hour == 5)
                        {
                              World.WorldTime = 0x48a8;
                        }
                        else if (DateTime.Now.Hour == 6)
                        {
                              World.WorldTime = 0x49d4;
                        }
                        else if (DateTime.Now.Hour == 7)
                        {
                              World.WorldTime = 0x4ace;
                        }
                        else if (DateTime.Now.Hour == 8)
                        {
                              World.WorldTime = 0x2710;
                        }
                        else if (DateTime.Now.Hour == 9)
                        {
                              World.WorldTime = 0x283c;
                        }
                        else if (DateTime.Now.Hour == 10)
                        {
                              World.WorldTime = 0x2968;
                        }
                        else if (DateTime.Now.Hour == 11)
                        {
                              World.WorldTime = 0x29cc;
                        }
                        else if (DateTime.Now.Hour == 12)
                        {
                              World.WorldTime = 0x2a30;
                        }
                        else if (DateTime.Now.Hour == 13)
                        {
                              World.WorldTime = 0x2a94;
                        }
                        else if (DateTime.Now.Hour == 14)
                        {
                              World.WorldTime = 0x2af8;
                        }
                        else if (DateTime.Now.Hour == 15)
                        {
                              World.WorldTime = 0x2b5c;
                        }
                        else if (DateTime.Now.Hour == 0x10)
                        {
                              World.WorldTime = 0x2c88;
                        }
                        else if (DateTime.Now.Hour == 0x11)
                        {
                              World.WorldTime = 0x2db4;
                        }
                        else if (DateTime.Now.Hour == 0x12)
                        {
                              World.WorldTime = 0x2e7c;
                        }
                        else if (DateTime.Now.Hour == 0x13)
                        {
                              World.WorldTime = 0x2fa8;
                        }
                        else if (DateTime.Now.Hour == 20)
                        {
                              World.WorldTime = 0x3138;
                        }
                        else if (DateTime.Now.Hour == 0x15)
                        {
                              World.WorldTime = 0x3264;
                        }
                        else if (DateTime.Now.Hour == 0x16)
                        {
                              World.WorldTime = 0x3afc;
                        }
                        else if (DateTime.Now.Hour == 0x17)
                        {
                              World.WorldTime = 0x3bc4;
                        }
                        else if (DateTime.Now.Hour == 0)
                        {
                              World.WorldTime = 0x3c8c;
                        }
                  }
                  else
                  {
                        World.WorldTime = 0x2710;
                  }
                  int worldTime = World.WorldTime;
                  using (PacketData data = new PacketData())
                  {
                        data.Write4(worldTime);
                        if (base.Client != null)
                        {
                              base.Client.method_5(data, 0x8000, 0, 0);
                        }
                  }
                  using (PacketData data2 = new PacketData())
                  {
                        data2.Write4(worldTime++);
                        if (base.Client != null)
                        {
                              base.Client.method_5(data2, 0x8000, 0, 0);
                        }
                  }
            }

            public void SET_CA_NHAN_DUOC_PHAM()
            {
                  try
                  {
                        if (World.jlMsg == 1)
                        {
                              Form1.WriteLine(0, "Players_Set个人药品");
                        }
                        if ((base.byte_0 != null) && (base.byte_0.Length != 1))
                        {
                              for (int i = 0; i < 40; i++)
                              {
                                    int num4;
                                    double num5;
                                    if (base.byte_0.Length < ((i + 1) * 8))
                                    {
                                          return;
                                    }
                                    byte[] dst = new byte[4];
                                    byte[] buffer2 = new byte[4];
                                    Buffer.BlockCopy(base.byte_0, i * 8, dst, 0, 4);
                                    Buffer.BlockCopy(base.byte_0, (i * 8) + 4, buffer2, 0, 4);
                                    if ((BitConverter.ToInt32(dst, 0) <= 0) || (BitConverter.ToInt32(buffer2, 0) <= 0))
                                    {
                                          return;
                                    }
                                    int key = BitConverter.ToInt32(dst, 0);
                                    int num3 = BitConverter.ToInt32(buffer2, 0);
                                    switch (key)
                                    {
                                          case 0x3b9acd2f:
                                                {
                                                      if (base.Add_Status_List.ContainsKey(key))
                                                      {
                                                            base.Add_Status_List[key].THOI_GIAN_KET_THUC_SU_KIEN();
                                                      }
                                                      this.Status_Effect(BitConverter.GetBytes(key), 1, num3);
                                                      Additional_Sate_Class class10 = new Additional_Sate_Class(this, num3, key, 1);
                                                      base.Add_Status_List.Add(class10.FLD_PID, class10);
                                                      base.FLD_nhan_vat_them_vao_cong_kich += int.Parse(World.Tang_cuong_cong_kich_duoc_pham[1]);
                                                      break;
                                                }
                                          case 0x3b9acd30:
                                                {
                                                      if (base.Add_Status_List.ContainsKey(key))
                                                      {
                                                            base.Add_Status_List[key].THOI_GIAN_KET_THUC_SU_KIEN();
                                                      }
                                                      this.Status_Effect(BitConverter.GetBytes(key), 1, num3);
                                                      Additional_Sate_Class class11 = new Additional_Sate_Class(this, num3, key, 1);
                                                      base.Add_Status_List.Add(class11.FLD_PID, class11);
                                                      base.FLD_nhan_vat_them_vao_phong_ngu += int.Parse(World.Tang_cuong_phong_ngu_duoc_pham[1]);
                                                      break;
                                                }
                                          case 0x3b9acd3e:
                                                {
                                                      if (base.Add_Status_List.ContainsKey(key))
                                                      {
                                                            base.Add_Status_List[key].THOI_GIAN_KET_THUC_SU_KIEN();
                                                      }
                                                      this.Status_Effect(BitConverter.GetBytes(key), 1, num3);
                                                      Additional_Sate_Class class15 = new Additional_Sate_Class(this, num3, key, 1);
                                                      base.Add_Status_List.Add(class15.FLD_PID, class15);
                                                      base.Nhan_vat_them_vao_lon_nhat_HP += int.Parse(World.Tang_cuong_sinh_menh_duoc_pham[1]);
                                                      break;
                                                }
                                          case 0x3b9acb98:
                                                {
                                                      if (base.Add_Status_List.ContainsKey(key))
                                                      {
                                                            base.Add_Status_List[key].THOI_GIAN_KET_THUC_SU_KIEN();
                                                      }
                                                      Additional_Sate_Class class2 = new Additional_Sate_Class(this, num3, key, 1);
                                                      base.Add_Status_List.Add(class2.FLD_PID, class2);
                                                      this.Status_Effect(BitConverter.GetBytes(key), 1, num3);
                                                      base.addFLD_ATT_Percentage(0.1M);
                                                      break;
                                                }
                                          case 0x3b9acb99:
                                                {
                                                      if (base.Add_Status_List.ContainsKey(key))
                                                      {
                                                            base.Add_Status_List[key].THOI_GIAN_KET_THUC_SU_KIEN();
                                                      }
                                                      Additional_Sate_Class class3 = new Additional_Sate_Class(this, num3, key, 1);
                                                      base.Add_Status_List.Add(class3.FLD_PID, class3);
                                                      this.Status_Effect(BitConverter.GetBytes(key), 1, num3);
                                                      base.Nhan_vat_them_vao_lon_nhat_HP += 500;
                                                      break;
                                                }
                                          case 0x3b9acb9a:
                                                {
                                                      if (base.Add_Status_List.ContainsKey(key))
                                                      {
                                                            base.Add_Status_List[key].THOI_GIAN_KET_THUC_SU_KIEN();
                                                      }
                                                      Additional_Sate_Class class4 = new Additional_Sate_Class(this, num3, key, 1);
                                                      base.Add_Status_List.Add(class4.FLD_PID, class4);
                                                      this.Status_Effect(BitConverter.GetBytes(key), 1, num3);
                                                      base.Nhan_vat_them_vao_lon_nhat_MP += 500;
                                                      break;
                                                }
                                          case 0x3b9acb9b:
                                                {
                                                      if (base.Add_Status_List.ContainsKey(key))
                                                      {
                                                            base.Add_Status_List[key].THOI_GIAN_KET_THUC_SU_KIEN();
                                                      }
                                                      Additional_Sate_Class class5 = new Additional_Sate_Class(this, num3, key, 1);
                                                      base.Add_Status_List.Add(class5.FLD_PID, class5);
                                                      this.Status_Effect(BitConverter.GetBytes(key), 1, num3);
                                                      base.addFLD_DEF_Percentage(0.1M);
                                                      break;
                                                }
                                          case 0x3b9acb9c:
                                                {
                                                      if (base.Add_Status_List.ContainsKey(key))
                                                      {
                                                            base.Add_Status_List[key].THOI_GIAN_KET_THUC_SU_KIEN();
                                                      }
                                                      Additional_Sate_Class class6 = new Additional_Sate_Class(this, num3, key, 1);
                                                      base.Add_Status_List.Add(class6.FLD_PID, class6);
                                                      this.Status_Effect(BitConverter.GetBytes(key), 1, num3);
                                                      base.addFLD_ATT_Percentage(0.05M);
                                                      break;
                                                }
                                          case 0x3b9acb9d:
                                                {
                                                      if (base.Add_Status_List.ContainsKey(key))
                                                      {
                                                            base.Add_Status_List[key].THOI_GIAN_KET_THUC_SU_KIEN();
                                                      }
                                                      Additional_Sate_Class class7 = new Additional_Sate_Class(this, num3, key, 1);
                                                      base.Add_Status_List.Add(class7.FLD_PID, class7);
                                                      this.Status_Effect(BitConverter.GetBytes(key), 1, num3);
                                                      base.addFLD_DEF_Percentage(0.05M);
                                                      break;
                                                }
                                          case 0x3b9acb9e:
                                                {
                                                      if (base.Add_Status_List.ContainsKey(key))
                                                      {
                                                            base.Add_Status_List[key].THOI_GIAN_KET_THUC_SU_KIEN();
                                                      }
                                                      Additional_Sate_Class class8 = new Additional_Sate_Class(this, num3, key, 1);
                                                      base.Add_Status_List.Add(class8.FLD_PID, class8);
                                                      this.Status_Effect(BitConverter.GetBytes(key), 1, num3);
                                                      base.FLD_them_vao_ti_le_phan_tram_ne_tranh += 0.05;
                                                      break;
                                                }
                                          case 0xaaf28:
                                                {
                                                      if (base.Add_Status_List.ContainsKey(key))
                                                      {
                                                            base.Add_Status_List[key].THOI_GIAN_KET_THUC_SU_KIEN();
                                                      }
                                                      Additional_Sate_Class class9 = new Additional_Sate_Class(this, num3, key, 1);
                                                      base.Add_Status_List.Add(class9.FLD_PID, class9);
                                                      this.Status_Effect(BitConverter.GetBytes(key), 1, num3);
                                                      base.addFLD_ATT_Percentage(0.2M);
                                                      base.addFLD_DEF_Percentage(0.2M);
                                                      break;
                                                }
                                          case 0x3c0599c5:
                                                {
                                                      if (base.Add_Status_List.ContainsKey(key))
                                                      {
                                                            base.Add_Status_List[key].THOI_GIAN_KET_THUC_SU_KIEN();
                                                      }
                                                      Additional_Sate_Class class12 = new Additional_Sate_Class(this, num3, key, 1);
                                                      base.Add_Status_List.Add(class12.FLD_PID, class12);
                                                      this.Status_Effect(BitConverter.GetBytes(key), 1, num3);
                                                      base.Nhan_vat_them_vao_lon_nhat_HP += 300;
                                                      break;
                                                }
                                          case 0x3c0599c6:
                                                {
                                                      if (base.Add_Status_List.ContainsKey(key))
                                                      {
                                                            base.Add_Status_List[key].THOI_GIAN_KET_THUC_SU_KIEN();
                                                      }
                                                      Additional_Sate_Class class13 = new Additional_Sate_Class(this, num3, key, 1);
                                                      base.Add_Status_List.Add(class13.FLD_PID, class13);
                                                      this.Status_Effect(BitConverter.GetBytes(key), 1, num3);
                                                      base.Nhan_vat_them_vao_lon_nhat_HP += 500;
                                                      break;
                                                }
                                          case 0x3c0599c7:
                                                {
                                                      if (base.Add_Status_List.ContainsKey(key))
                                                      {
                                                            base.Add_Status_List[key].THOI_GIAN_KET_THUC_SU_KIEN();
                                                      }
                                                      Additional_Sate_Class class14 = new Additional_Sate_Class(this, num3, key, 1);
                                                      base.Add_Status_List.Add(class14.FLD_PID, class14);
                                                      this.Status_Effect(BitConverter.GetBytes(key), 1, num3);
                                                      base.Nhan_vat_them_vao_lon_nhat_HP += 700;
                                                      break;
                                                }
                                          case 0x3c14dc10:
                                                {
                                                      if (base.Add_Status_List.ContainsKey(key))
                                                      {
                                                            base.Add_Status_List[key].THOI_GIAN_KET_THUC_SU_KIEN();
                                                      }
                                                      Additional_Sate_Class class16 = new Additional_Sate_Class(this, num3, key, 1);
                                                      base.Add_Status_List.Add(class16.FLD_PID, class16);
                                                      this.Status_Effect(BitConverter.GetBytes(key), 1, num3);
                                                      base.addFLD_ATT_Percentage(0.1M);
                                                      break;
                                                }
                                          case 0x3c14dc11:
                                                {
                                                      if (base.Add_Status_List.ContainsKey(key))
                                                      {
                                                            base.Add_Status_List[key].THOI_GIAN_KET_THUC_SU_KIEN();
                                                      }
                                                      Additional_Sate_Class class17 = new Additional_Sate_Class(this, num3, key, 1);
                                                      base.Add_Status_List.Add(class17.FLD_PID, class17);
                                                      this.Status_Effect(BitConverter.GetBytes(key), 1, num3);
                                                      base.addFLD_DEF_Percentage(0.1M);
                                                      break;
                                                }
                                          case 0x3c14dc12:
                                                {
                                                      if (base.Add_Status_List.ContainsKey(key))
                                                      {
                                                            base.Add_Status_List[key].THOI_GIAN_KET_THUC_SU_KIEN();
                                                      }
                                                      Additional_Sate_Class class18 = new Additional_Sate_Class(this, num3, key, 1);
                                                      base.Add_Status_List.Add(class18.FLD_PID, class18);
                                                      this.Status_Effect(BitConverter.GetBytes(key), 1, num3);
                                                      base.ADD_FLD_trang_bi_them_vao_vu_khi_cuong_hoa(1);
                                                      break;
                                                }
                                          case 0x3c14dc13:
                                                {
                                                      if (base.Add_Status_List.ContainsKey(key))
                                                      {
                                                            base.Add_Status_List[key].THOI_GIAN_KET_THUC_SU_KIEN();
                                                      }
                                                      Additional_Sate_Class class19 = new Additional_Sate_Class(this, num3, key, 1);
                                                      base.Add_Status_List.Add(class19.FLD_PID, class19);
                                                      this.Status_Effect(BitConverter.GetBytes(key), 1, num3);
                                                      base.ADD_FLD_trang_bi_them_vao_Phong_cu_Cuong_hoa(1);
                                                      break;
                                                }
                                          case 0x3c14dc35:
                                                {
                                                      if (base.Add_Status_List.ContainsKey(key))
                                                      {
                                                            base.Add_Status_List[key].THOI_GIAN_KET_THUC_SU_KIEN();
                                                      }
                                                      Additional_Sate_Class class20 = new Additional_Sate_Class(this, num3, key, 1);
                                                      base.Add_Status_List.Add(class20.FLD_PID, class20);
                                                      base.FLD_nhan_vat_vo_cong_luc_cong_kich_tang_cuong_ti_le_phan_tram += 0.05;
                                                      this.Status_Effect(BitConverter.GetBytes(key), 1, num3);
                                                      break;
                                                }
                                          case 0x3c14dc36:
                                                {
                                                      if (base.Add_Status_List.ContainsKey(key))
                                                      {
                                                            base.Add_Status_List[key].THOI_GIAN_KET_THUC_SU_KIEN();
                                                      }
                                                      Additional_Sate_Class class21 = new Additional_Sate_Class(this, num3, key, 1);
                                                      base.Add_Status_List.Add(class21.FLD_PID, class21);
                                                      base.FLD_nhan_vat_vo_cong_suc_phong_ngu_tang_cuong_ti_le_phan_tram += 0.1;
                                                      this.Status_Effect(BitConverter.GetBytes(key), 1, num3);
                                                      break;
                                                }
                                          case 0x3c14dc9c:
                                                {
                                                      if (base.Add_Status_List.ContainsKey(key))
                                                      {
                                                            base.Add_Status_List[key].THOI_GIAN_KET_THUC_SU_KIEN();
                                                      }
                                                      this.Status_Effect(BitConverter.GetBytes(key), 1, num3);
                                                      Additional_Sate_Class class22 = new Additional_Sate_Class(this, num3, key, 1);
                                                      base.Add_Status_List.Add(class22.FLD_PID, class22);
                                                      base.Nhan_vat_them_vao_lon_nhat_HP += 300;
                                                      break;
                                                }
                                          case 0x3c14dcb7:
                                                {
                                                      if (base.Add_Status_List.ContainsKey(key))
                                                      {
                                                            base.Add_Status_List[key].THOI_GIAN_KET_THUC_SU_KIEN();
                                                      }
                                                      this.Status_Effect(BitConverter.GetBytes(key), 1, num3);
                                                      Additional_Sate_Class class24 = new Additional_Sate_Class(this, num3, key, 1);
                                                      base.Add_Status_List.Add(class24.FLD_PID, class24);
                                                      base.Nhan_vat_them_vao_lon_nhat_HP += 300;
                                                      base.addFLD_DEF_Percentage(0.05M);
                                                      break;
                                                }
                                          case 0x3c14dcb9:
                                                {
                                                      if (base.Add_Status_List.ContainsKey(key))
                                                      {
                                                            base.Add_Status_List[key].THOI_GIAN_KET_THUC_SU_KIEN();
                                                      }
                                                      this.Status_Effect(BitConverter.GetBytes(key), 1, num3);
                                                      Additional_Sate_Class class25 = new Additional_Sate_Class(this, num3, key, 1);
                                                      base.Add_Status_List.Add(class25.FLD_PID, class25);
                                                      base.Nhan_vat_them_vao_lon_nhat_HP += 700;
                                                      base.FLD_Nhan_vat_them_vao_kinh_nghiem_ti_le_phan_tram += 0.4;
                                                      base.FLD_nhan_vat_them_vao_kinh_nghiem_hoc_vo_cong_ti_le_phan_tram += 2.0;
                                                      base.addFLD_DEF_Percentage(0.1M);
                                                      base.ADD_FLD_trang_bi_them_vao_Phong_cu_Cuong_hoa(1);
                                                      base.ADD_FLD_trang_bi_them_vao_vu_khi_cuong_hoa(2);
                                                      break;
                                                }
                                          case 0x3c14dcbb:
                                                {
                                                      if (base.Add_Status_List.ContainsKey(key))
                                                      {
                                                            base.Add_Status_List[key].THOI_GIAN_KET_THUC_SU_KIEN();
                                                      }
                                                      this.Status_Effect(BitConverter.GetBytes(key), 1, num3);
                                                      Additional_Sate_Class class26 = new Additional_Sate_Class(this, num3, key, 1);
                                                      base.Add_Status_List.Add(class26.FLD_PID, class26);
                                                      base.Nhan_vat_them_vao_lon_nhat_HP += 300;
                                                      num4 = base.FLD_nhan_vat_them_vao_khi_cong;
                                                      base.FLD_nhan_vat_them_vao_khi_cong = num4 + 1;
                                                      break;
                                                }
                                          case 0x3c14dcbc:
                                                {
                                                      if (base.Add_Status_List.ContainsKey(key))
                                                      {
                                                            base.Add_Status_List[key].THOI_GIAN_KET_THUC_SU_KIEN();
                                                      }
                                                      this.Status_Effect(BitConverter.GetBytes(key), 1, num3);
                                                      Additional_Sate_Class class27 = new Additional_Sate_Class(this, num3, key, 1);
                                                      base.Add_Status_List.Add(class27.FLD_PID, class27);
                                                      base.addFLD_ATT_Percentage(0.15M);
                                                      base.addFLD_DEF_Percentage(0.15M);
                                                      base.Nhan_vat_them_vao_lon_nhat_HP += 300;
                                                      base.Nhan_vat_them_vao_lon_nhat_MP += 300;
                                                      base.FLD_Nhan_vat_them_vao_kinh_nghiem_ti_le_phan_tram += 0.1;
                                                      break;
                                                }
                                          case 0x3c14dca0:
                                                {
                                                      if (base.Add_Status_List.ContainsKey(key))
                                                      {
                                                            base.Add_Status_List[key].THOI_GIAN_KET_THUC_SU_KIEN();
                                                      }
                                                      Additional_Sate_Class class23 = new Additional_Sate_Class(this, num3, key, 1);
                                                      base.Add_Status_List.Add(class23.FLD_PID, class23);
                                                      this.Status_Effect(BitConverter.GetBytes(key), 1, num3);
                                                      base.int_16 = 1;
                                                      break;
                                                }
                                          case 0x3c14dcc2:
                                                {
                                                      if (base.Add_Status_List.ContainsKey(key))
                                                      {
                                                            base.Add_Status_List[key].THOI_GIAN_KET_THUC_SU_KIEN();
                                                      }
                                                      this.Status_Effect(BitConverter.GetBytes(key), 1, num3);
                                                      Additional_Sate_Class class28 = new Additional_Sate_Class(this, num3, key, 1);
                                                      base.Add_Status_List.Add(class28.FLD_PID, class28);
                                                      base.Nhan_vat_them_vao_lon_nhat_HP += 0x3e8;
                                                      base.addFLD_ATT_Percentage(0.15M);
                                                      base.addFLD_DEF_Percentage(0.15M);
                                                      base.FLD_Nhan_vat_them_vao_kinh_nghiem_ti_le_phan_tram += 0.4;
                                                      base.FLD_nhan_vat_vo_cong_luc_cong_kich_tang_cuong_ti_le_phan_tram += 0.1;
                                                      base.FLD_nhan_vat_vo_cong_suc_phong_ngu_tang_cuong_ti_le_phan_tram += 0.1;
                                                      break;
                                                }
                                          case 0x3c14dcc3:
                                                {
                                                      if (base.Add_Status_List.ContainsKey(key))
                                                      {
                                                            base.Add_Status_List[key].THOI_GIAN_KET_THUC_SU_KIEN();
                                                      }
                                                      this.Status_Effect(BitConverter.GetBytes(key), 1, num3);
                                                      Additional_Sate_Class class29 = new Additional_Sate_Class(this, num3, key, 1);
                                                      base.Add_Status_List.Add(class29.FLD_PID, class29);
                                                      base.Nhan_vat_them_vao_lon_nhat_HP += 300;
                                                      num4 = base.FLD_nhan_vat_them_vao_khi_cong;
                                                      base.FLD_nhan_vat_them_vao_khi_cong = num4 + 1;
                                                      base.addFLD_DEF_Percentage(0.05M);
                                                      break;
                                                }
                                          case 0x3c14dcc5:
                                                {
                                                      if (base.Add_Status_List.ContainsKey(key))
                                                      {
                                                            base.Add_Status_List[key].THOI_GIAN_KET_THUC_SU_KIEN();
                                                      }
                                                      this.Status_Effect(BitConverter.GetBytes(key), 1, num3);
                                                      Additional_Sate_Class class30 = new Additional_Sate_Class(this, num3, key, 1);
                                                      base.Add_Status_List.Add(class30.FLD_PID, class30);
                                                      base.Nhan_vat_them_vao_lon_nhat_HP += 700;
                                                      base.addFLD_DEF_Percentage(0.1M);
                                                      base.addFLD_ATT_Percentage(0.1M);
                                                      base.FLD_nhan_vat_vo_cong_luc_cong_kich_tang_cuong_ti_le_phan_tram += 0.05;
                                                      base.FLD_nhan_vat_vo_cong_suc_phong_ngu_tang_cuong_ti_le_phan_tram += 0.1;
                                                      base.ADD_FLD_trang_bi_them_vao_Phong_cu_Cuong_hoa(1);
                                                      base.ADD_FLD_trang_bi_them_vao_vu_khi_cuong_hoa(2);
                                                      break;
                                                }
                                          case 0x3c14dce8:
                                                {
                                                      if (base.Add_Status_List.ContainsKey(key))
                                                      {
                                                            base.Add_Status_List[key].THOI_GIAN_KET_THUC_SU_KIEN();
                                                      }
                                                      this.Status_Effect(BitConverter.GetBytes(key), 1, num3);
                                                      Additional_Sate_Class class31 = new Additional_Sate_Class(this, num3, key, 1);
                                                      base.Add_Status_List.Add(class31.FLD_PID, class31);
                                                      base.Nhan_vat_them_vao_lon_nhat_HP += 100;
                                                      base.FLD_Nhan_vat_them_vao_kinh_nghiem_ti_le_phan_tram += 0.2;
                                                      base.FLD_nhan_vat_them_vao_gold_ti_le_phan_tram += 0.4;
                                                      base.FLD_nhan_vat_them_vao_item_roi_xuong_xac_suat_ti_le_phan_tram += 0.2;
                                                      break;
                                                }
                                          case 0x3c14dcef:
                                                {
                                                      if (base.Add_Status_List.ContainsKey(key))
                                                      {
                                                            base.Add_Status_List[key].THOI_GIAN_KET_THUC_SU_KIEN();
                                                      }
                                                      this.Status_Effect(BitConverter.GetBytes(key), 1, num3);
                                                      Additional_Sate_Class class32 = new Additional_Sate_Class(this, num3, key, 1);
                                                      base.Add_Status_List.Add(class32.FLD_PID, class32);
                                                      num5 = base.FLD_Nhan_vat_them_vao_kinh_nghiem_ti_le_phan_tram;
                                                      base.FLD_Nhan_vat_them_vao_kinh_nghiem_ti_le_phan_tram = num5 + 1.0;
                                                      break;
                                                }
                                          case 0x3c14dcf0:
                                                {
                                                      if (base.Add_Status_List.ContainsKey(key))
                                                      {
                                                            base.Add_Status_List[key].THOI_GIAN_KET_THUC_SU_KIEN();
                                                      }
                                                      base.bool_6 = true;
                                                      this.Status_Effect(BitConverter.GetBytes(key), 1, num3);
                                                      Additional_Sate_Class class33 = new Additional_Sate_Class(this, num3, key, 1);
                                                      base.Add_Status_List.Add(class33.FLD_PID, class33);
                                                      base.FLD_Nhan_vat_them_vao_kinh_nghiem_ti_le_phan_tram += 0.05;
                                                      base.FLD_nhan_vat_them_vao_cong_kich += 30;
                                                      base.FLD_nhan_vat_vo_cong_luc_cong_kich_tang_cuong_ti_le_phan_tram += 0.03;
                                                      break;
                                                }
                                          case 0x3c14dcf1:
                                                {
                                                      if (base.Add_Status_List.ContainsKey(key))
                                                      {
                                                            base.Add_Status_List[key].THOI_GIAN_KET_THUC_SU_KIEN();
                                                      }
                                                      base.bool_6 = true;
                                                      this.Status_Effect(BitConverter.GetBytes(key), 1, num3);
                                                      Additional_Sate_Class class34 = new Additional_Sate_Class(this, num3, key, 1);
                                                      base.Add_Status_List.Add(class34.FLD_PID, class34);
                                                      base.FLD_Nhan_vat_them_vao_kinh_nghiem_ti_le_phan_tram += 0.05;
                                                      base.FLD_nhan_vat_them_vao_cong_kich += 30;
                                                      base.FLD_nhan_vat_vo_cong_luc_cong_kich_tang_cuong_ti_le_phan_tram += 0.03;
                                                      break;
                                                }
                                          case 0x3c14dcf2:
                                                {
                                                      if (base.Add_Status_List.ContainsKey(key))
                                                      {
                                                            base.Add_Status_List[key].THOI_GIAN_KET_THUC_SU_KIEN();
                                                      }
                                                      base.bool_6 = true;
                                                      this.Status_Effect(BitConverter.GetBytes(key), 1, num3);
                                                      Additional_Sate_Class class35 = new Additional_Sate_Class(this, num3, key, 1);
                                                      base.Add_Status_List.Add(class35.FLD_PID, class35);
                                                      base.FLD_Nhan_vat_them_vao_kinh_nghiem_ti_le_phan_tram += 0.05;
                                                      base.FLD_nhan_vat_them_vao_cong_kich += 30;
                                                      base.FLD_nhan_vat_vo_cong_luc_cong_kich_tang_cuong_ti_le_phan_tram += 0.03;
                                                      break;
                                                }
                                          case 0x3c14dcf3:
                                                {
                                                      if (base.Add_Status_List.ContainsKey(key))
                                                      {
                                                            base.Add_Status_List[key].THOI_GIAN_KET_THUC_SU_KIEN();
                                                      }
                                                      this.Status_Effect(BitConverter.GetBytes(key), 1, num3);
                                                      Additional_Sate_Class class36 = new Additional_Sate_Class(this, num3, key, 1);
                                                      base.Add_Status_List.Add(class36.FLD_PID, class36);
                                                      base.addFLD_ATT_Percentage(0.2M);
                                                      base.addFLD_DEF_Percentage(0.2M);
                                                      base.Nhan_vat_them_vao_lon_nhat_HP += 200;
                                                      base.FLD_Nhan_vat_them_vao_kinh_nghiem_ti_le_phan_tram += 0.15;
                                                      base.FLD_nhan_vat_vo_cong_luc_cong_kich_tang_cuong_ti_le_phan_tram += 0.05;
                                                      break;
                                                }
                                          case 0x3c14dcf5:
                                                {
                                                      if (base.Add_Status_List.ContainsKey(key))
                                                      {
                                                            base.Add_Status_List[key].THOI_GIAN_KET_THUC_SU_KIEN();
                                                      }
                                                      this.Status_Effect(BitConverter.GetBytes(key), 1, num3);
                                                      Additional_Sate_Class class37 = new Additional_Sate_Class(this, num3, key, 1);
                                                      base.Add_Status_List.Add(class37.FLD_PID, class37);
                                                      base.FLD_nhan_vat_vo_cong_luc_cong_kich_tang_cuong_ti_le_phan_tram += 0.1;
                                                      base.FLD_them_vao_ti_le_phan_tram_ne_tranh += 0.05;
                                                      base.Nhan_vat_them_vao_lon_nhat_HP += 100;
                                                      base.FLD_nhan_vat_them_vao_khi_cong += 2;
                                                      break;
                                                }
                                          case 0x3c14dcf8:
                                                {
                                                      if (base.Add_Status_List.ContainsKey(key))
                                                      {
                                                            base.Add_Status_List[key].THOI_GIAN_KET_THUC_SU_KIEN();
                                                      }
                                                      this.Status_Effect(BitConverter.GetBytes(key), 1, num3);
                                                      Additional_Sate_Class class38 = new Additional_Sate_Class(this, num3, key, 1);
                                                      base.Add_Status_List.Add(class38.FLD_PID, class38);
                                                      num5 = base.FLD_Nhan_vat_them_vao_kinh_nghiem_ti_le_phan_tram;
                                                      base.FLD_Nhan_vat_them_vao_kinh_nghiem_ti_le_phan_tram = num5 + 1.0;
                                                      num5 = base.FLD_nhan_vat_them_vao_kinh_nghiem_hoc_vo_cong_ti_le_phan_tram;
                                                      base.FLD_nhan_vat_them_vao_kinh_nghiem_hoc_vo_cong_ti_le_phan_tram = num5 + 1.0;
                                                      num5 = base.FLD_nhan_vat_them_vao_gold_ti_le_phan_tram;
                                                      base.FLD_nhan_vat_them_vao_gold_ti_le_phan_tram = num5 + 1.0;
                                                      num5 = base.FLD_nhan_vat_them_vao_item_roi_xuong_xac_suat_ti_le_phan_tram;
                                                      base.FLD_nhan_vat_them_vao_item_roi_xuong_xac_suat_ti_le_phan_tram = num5 + 1.0;
                                                      break;
                                                }
                                          case 0x3c14dcfa:
                                                {
                                                      if (base.Add_Status_List.ContainsKey(key))
                                                      {
                                                            base.Add_Status_List[key].THOI_GIAN_KET_THUC_SU_KIEN();
                                                      }
                                                      base.bool_6 = true;
                                                      this.Status_Effect(BitConverter.GetBytes(key), 1, num3);
                                                      Additional_Sate_Class class39 = new Additional_Sate_Class(this, num3, key, 1);
                                                      base.Add_Status_List.Add(class39.FLD_PID, class39);
                                                      base.FLD_Nhan_vat_them_vao_kinh_nghiem_ti_le_phan_tram += 0.05;
                                                      base.FLD_nhan_vat_them_vao_cong_kich += 30;
                                                      base.FLD_nhan_vat_vo_cong_luc_cong_kich_tang_cuong_ti_le_phan_tram += 0.03;
                                                      break;
                                                }
                                          case 0x3c14dcfb:
                                                {
                                                      if (base.Add_Status_List.ContainsKey(key))
                                                      {
                                                            base.Add_Status_List[key].THOI_GIAN_KET_THUC_SU_KIEN();
                                                      }
                                                      base.bool_6 = true;
                                                      this.Status_Effect(BitConverter.GetBytes(key), 1, num3);
                                                      Additional_Sate_Class class40 = new Additional_Sate_Class(this, num3, key, 1);
                                                      base.Add_Status_List.Add(class40.FLD_PID, class40);
                                                      base.FLD_Nhan_vat_them_vao_kinh_nghiem_ti_le_phan_tram += 0.05;
                                                      base.FLD_nhan_vat_them_vao_cong_kich += 30;
                                                      base.FLD_nhan_vat_vo_cong_luc_cong_kich_tang_cuong_ti_le_phan_tram += 0.03;
                                                      break;
                                                }
                                          case 0x3c14dcfc:
                                                {
                                                      if (base.Add_Status_List.ContainsKey(key))
                                                      {
                                                            base.Add_Status_List[key].THOI_GIAN_KET_THUC_SU_KIEN();
                                                      }
                                                      Additional_Sate_Class class41 = new Additional_Sate_Class(this, num3, key, 1);
                                                      base.Add_Status_List.Add(class41.FLD_PID, class41);
                                                      this.Status_Effect(BitConverter.GetBytes(key), 1, num3);
                                                      base.FLD_nhan_vat_vo_cong_luc_cong_kich_tang_cuong_ti_le_phan_tram += 0.2;
                                                      num4 = base.FLD_nhan_vat_them_vao_phong_ngu;
                                                      base.FLD_nhan_vat_them_vao_phong_ngu = num4 + 1;
                                                      base.FLD_nhan_vat_vo_cong_suc_phong_ngu_tang_cuong_ti_le_phan_tram += 0.01;
                                                      num4 = base.FLD_nhan_vat_them_vao_ne_tranh;
                                                      base.FLD_nhan_vat_them_vao_ne_tranh = num4 + 1;
                                                      num4 = base.Nhan_vat_them_vao_lon_nhat_HP;
                                                      base.Nhan_vat_them_vao_lon_nhat_HP = num4 + 1;
                                                      break;
                                                }
                                          case 0x3c14dd30:
                                                {
                                                      if (base.Add_Status_List.ContainsKey(key))
                                                      {
                                                            base.Add_Status_List[key].THOI_GIAN_KET_THUC_SU_KIEN();
                                                      }
                                                      base.bool_6 = true;
                                                      this.Status_Effect(BitConverter.GetBytes(key), 1, num3);
                                                      Additional_Sate_Class class42 = new Additional_Sate_Class(this, num3, key, 1);
                                                      base.Add_Status_List.Add(class42.FLD_PID, class42);
                                                      base.FLD_Nhan_vat_them_vao_kinh_nghiem_ti_le_phan_tram += 0.05;
                                                      base.FLD_nhan_vat_them_vao_cong_kich += 30;
                                                      base.FLD_nhan_vat_them_vao_phong_ngu += 30;
                                                      base.FLD_nhan_vat_vo_cong_luc_cong_kich_tang_cuong_ti_le_phan_tram += 0.03;
                                                      break;
                                                }
                                          case 0x3c14dd31:
                                                {
                                                      if (base.Add_Status_List.ContainsKey(key))
                                                      {
                                                            base.Add_Status_List[key].THOI_GIAN_KET_THUC_SU_KIEN();
                                                      }
                                                      base.bool_6 = true;
                                                      this.Status_Effect(BitConverter.GetBytes(key), 1, num3);
                                                      Additional_Sate_Class class43 = new Additional_Sate_Class(this, num3, key, 1);
                                                      base.Add_Status_List.Add(class43.FLD_PID, class43);
                                                      base.FLD_Nhan_vat_them_vao_kinh_nghiem_ti_le_phan_tram += 0.05;
                                                      base.FLD_nhan_vat_them_vao_cong_kich += 30;
                                                      base.FLD_nhan_vat_them_vao_phong_ngu += 30;
                                                      base.FLD_nhan_vat_vo_cong_luc_cong_kich_tang_cuong_ti_le_phan_tram += 0.03;
                                                      break;
                                                }
                                          case 0x3c14dd32:
                                                {
                                                      if (base.Add_Status_List.ContainsKey(key))
                                                      {
                                                            base.Add_Status_List[key].THOI_GIAN_KET_THUC_SU_KIEN();
                                                      }
                                                      base.bool_6 = true;
                                                      this.Status_Effect(BitConverter.GetBytes(key), 1, num3);
                                                      Additional_Sate_Class class44 = new Additional_Sate_Class(this, num3, key, 1);
                                                      base.Add_Status_List.Add(class44.FLD_PID, class44);
                                                      base.FLD_Nhan_vat_them_vao_kinh_nghiem_ti_le_phan_tram += 0.1;
                                                      base.FLD_nhan_vat_them_vao_cong_kich += 40;
                                                      base.FLD_nhan_vat_them_vao_phong_ngu += 40;
                                                      base.FLD_nhan_vat_vo_cong_luc_cong_kich_tang_cuong_ti_le_phan_tram += 0.05;
                                                      break;
                                                }
                                          case 0x3c14dd33:
                                                {
                                                      if (base.Add_Status_List.ContainsKey(key))
                                                      {
                                                            base.Add_Status_List[key].THOI_GIAN_KET_THUC_SU_KIEN();
                                                      }
                                                      base.bool_6 = true;
                                                      this.Status_Effect(BitConverter.GetBytes(key), 1, num3);
                                                      Additional_Sate_Class class45 = new Additional_Sate_Class(this, num3, key, 1);
                                                      base.Add_Status_List.Add(class45.FLD_PID, class45);
                                                      base.FLD_Nhan_vat_them_vao_kinh_nghiem_ti_le_phan_tram += 0.1;
                                                      base.FLD_nhan_vat_them_vao_cong_kich += 40;
                                                      base.FLD_nhan_vat_them_vao_phong_ngu += 40;
                                                      base.FLD_nhan_vat_vo_cong_luc_cong_kich_tang_cuong_ti_le_phan_tram += 0.05;
                                                      break;
                                                }
                                          case 0x3c14dd41:
                                                {
                                                      if (base.Add_Status_List.ContainsKey(key))
                                                      {
                                                            base.Add_Status_List[key].THOI_GIAN_KET_THUC_SU_KIEN();
                                                      }
                                                      Additional_Sate_Class class46 = new Additional_Sate_Class(this, num3, key, 1);
                                                      base.Add_Status_List.Add(class46.FLD_PID, class46);
                                                      this.Status_Effect(BitConverter.GetBytes(key), 1, num3);
                                                      base.int_16 = 1;
                                                      break;
                                                }
                                          case 0x3c14dd42:
                                                {
                                                      if (base.Add_Status_List.ContainsKey(key))
                                                      {
                                                            base.Add_Status_List[key].THOI_GIAN_KET_THUC_SU_KIEN();
                                                      }
                                                      Additional_Sate_Class class47 = new Additional_Sate_Class(this, num3, key, 1);
                                                      base.Add_Status_List.Add(class47.FLD_PID, class47);
                                                      this.Status_Effect(BitConverter.GetBytes(key), 1, num3);
                                                      base.int_16 = 1;
                                                      break;
                                                }
                                          case 0x3c14dd43:
                                                {
                                                      if (base.Add_Status_List.ContainsKey(key))
                                                      {
                                                            base.Add_Status_List[key].THOI_GIAN_KET_THUC_SU_KIEN();
                                                      }
                                                      this.Status_Effect(BitConverter.GetBytes(key), 1, num3);
                                                      Additional_Sate_Class class48 = new Additional_Sate_Class(this, num3, key, 1);
                                                      base.Add_Status_List.Add(class48.FLD_PID, class48);
                                                      num5 = base.FLD_Nhan_vat_them_vao_kinh_nghiem_ti_le_phan_tram;
                                                      base.FLD_Nhan_vat_them_vao_kinh_nghiem_ti_le_phan_tram = num5 + 1.0;
                                                      break;
                                                }
                                          case 0x3c14dd44:
                                                {
                                                      if (base.Add_Status_List.ContainsKey(key))
                                                      {
                                                            base.Add_Status_List[key].THOI_GIAN_KET_THUC_SU_KIEN();
                                                      }
                                                      this.Status_Effect(BitConverter.GetBytes(key), 1, num3);
                                                      Additional_Sate_Class class49 = new Additional_Sate_Class(this, num3, key, 1);
                                                      base.Add_Status_List.Add(class49.FLD_PID, class49);
                                                      num5 = base.FLD_Nhan_vat_them_vao_kinh_nghiem_ti_le_phan_tram;
                                                      base.FLD_Nhan_vat_them_vao_kinh_nghiem_ti_le_phan_tram = num5 + 1.0;
                                                      break;
                                                }
                                          case 0x3c14dd45:
                                                {
                                                      if (base.Add_Status_List.ContainsKey(key))
                                                      {
                                                            base.Add_Status_List[key].THOI_GIAN_KET_THUC_SU_KIEN();
                                                      }
                                                      base.bool_6 = true;
                                                      this.Status_Effect(BitConverter.GetBytes(key), 1, num3);
                                                      Additional_Sate_Class class50 = new Additional_Sate_Class(this, num3, key, 1);
                                                      base.Add_Status_List.Add(class50.FLD_PID, class50);
                                                      base.FLD_Nhan_vat_them_vao_kinh_nghiem_ti_le_phan_tram += 0.1;
                                                      base.FLD_nhan_vat_them_vao_cong_kich += 40;
                                                      base.FLD_nhan_vat_them_vao_phong_ngu += 40;
                                                      base.FLD_nhan_vat_vo_cong_luc_cong_kich_tang_cuong_ti_le_phan_tram += 0.05;
                                                      base.Nhan_vat_them_vao_lon_nhat_HP += 300;
                                                      break;
                                                }
                                          case 0x3c14dd46:
                                                {
                                                      if (base.Add_Status_List.ContainsKey(key))
                                                      {
                                                            base.Add_Status_List[key].THOI_GIAN_KET_THUC_SU_KIEN();
                                                      }
                                                      base.bool_6 = true;
                                                      this.Status_Effect(BitConverter.GetBytes(key), 1, num3);
                                                      Additional_Sate_Class class51 = new Additional_Sate_Class(this, num3, key, 1);
                                                      base.Add_Status_List.Add(class51.FLD_PID, class51);
                                                      base.FLD_Nhan_vat_them_vao_kinh_nghiem_ti_le_phan_tram += 0.1;
                                                      base.FLD_nhan_vat_them_vao_cong_kich += 40;
                                                      base.FLD_nhan_vat_them_vao_phong_ngu += 40;
                                                      base.FLD_nhan_vat_vo_cong_luc_cong_kich_tang_cuong_ti_le_phan_tram += 0.05;
                                                      base.Nhan_vat_them_vao_lon_nhat_HP += 300;
                                                      break;
                                                }
                                          case 0x3c14dd6a:
                                                {
                                                      if (base.Add_Status_List.ContainsKey(key))
                                                      {
                                                            base.Add_Status_List[key].THOI_GIAN_KET_THUC_SU_KIEN();
                                                      }
                                                      this.Status_Effect(BitConverter.GetBytes(key), 1, num3);
                                                      Additional_Sate_Class class52 = new Additional_Sate_Class(this, num3, key, 1);
                                                      base.Add_Status_List.Add(class52.FLD_PID, class52);
                                                      base.FLD_Nhan_vat_them_vao_kinh_nghiem_ti_le_phan_tram += 1.5;
                                                      break;
                                                }
                                          case 0x3c14dd6b:
                                                {
                                                      if (base.Add_Status_List.ContainsKey(key))
                                                      {
                                                            base.Add_Status_List[key].THOI_GIAN_KET_THUC_SU_KIEN();
                                                      }
                                                      this.Status_Effect(BitConverter.GetBytes(key), 1, num3);
                                                      Additional_Sate_Class class53 = new Additional_Sate_Class(this, num3, key, 1);
                                                      base.Add_Status_List.Add(class53.FLD_PID, class53);
                                                      base.FLD_Nhan_vat_them_vao_kinh_nghiem_ti_le_phan_tram += 1.5;
                                                      break;
                                                }
                                          case 0x3c14e0b0:
                                                {
                                                      if (base.Add_Status_List.ContainsKey(key))
                                                      {
                                                            base.Add_Status_List[key].THOI_GIAN_KET_THUC_SU_KIEN();
                                                      }
                                                      this.Status_Effect(BitConverter.GetBytes(key), 1, num3);
                                                      Additional_Sate_Class class54 = new Additional_Sate_Class(this, num3, key, 1);
                                                      base.Add_Status_List.Add(class54.FLD_PID, class54);
                                                      break;
                                                }
                                          case 0x3c14e12d:
                                                {
                                                      if (base.Add_Status_List.ContainsKey(key))
                                                      {
                                                            base.Add_Status_List[key].THOI_GIAN_KET_THUC_SU_KIEN();
                                                      }
                                                      this.Status_Effect(BitConverter.GetBytes(key), 1, num3);
                                                      Additional_Sate_Class class55 = new Additional_Sate_Class(this, num3, key, 1);
                                                      base.Add_Status_List.Add(class55.FLD_PID, class55);
                                                      break;
                                                }
                                    }
                                    this.UpdateHP_MP_SP();
                              }
                        }
                  }
                  catch (Exception exception)
                  {
                        Form1.WriteLine(1, "SET_CA_NHAN_DUOC_PHAM ERROR![" + base.Userid + "]-[" + base.UserName + "]" + exception.Message);
                  }
            }

            public void SET_PUBLIC_DANH_SACH_ITEM()
            {
                  foreach (PUBLIC_DUOC_PHAM_LOAI public_duoc_pham_loai in base.dictionary_3.Values)
                  {
                        this.SET_PUBLIC_ITEM(public_duoc_pham_loai);
                  }
            }

            public void SET_PUBLIC_ITEM(PUBLIC_DUOC_PHAM_LOAI class103_0)
            {
                  try
                  {
                        byte[] dst = Converter.hexStringToByte("AA55190001F801F9000A0000FFFFFFFF00FFFFFFFF000000000000F12F55AA");
                        DateTime time = new DateTime(0x7b2, 1, 1, 8, 0, 0);
                        if (time.AddSeconds((double)class103_0.THOI_GIAN) <= DateTime.Now)
                        {
                              return;
                        }
                        int num = class103_0.DUOC_PHAM_ID;
                        if (num <= 0x3c14dc3f)
                        {
                              switch (num)
                              {
                                    case 0x3c14dc1b:
                                          Buffer.BlockCopy(BitConverter.GetBytes(3), 0, dst, 11, 1);
                                          goto Label_012D;

                                    case 0x3c14dc1c:
                                          Buffer.BlockCopy(BitConverter.GetBytes(2), 0, dst, 11, 1);
                                          goto Label_012D;

                                    case 0x3c14dc1d:
                                          Buffer.BlockCopy(BitConverter.GetBytes(1), 0, dst, 11, 1);
                                          goto Label_012D;
                              }
                              if (num != 0x3c14dc3f)
                              {
                                    goto Label_011D;
                              }
                              Buffer.BlockCopy(BitConverter.GetBytes(1), 0, dst, 11, 1);
                              goto Label_012D;
                        }
                        switch (num)
                        {
                              case 0x3c14dc8d:
                                    Buffer.BlockCopy(BitConverter.GetBytes(70), 0, dst, 11, 1);
                                    goto Label_012D;

                              case 0x3c14dd38:
                                    if (base.dictionary_3.ContainsKey(0x3c14dd38))
                                    {
                                          base.Nhiet_huyet_phu_them_vao_kinh_nghiem_ti_le_phan_tram += 0.3;
                                    }
                                    Buffer.BlockCopy(BitConverter.GetBytes(70), 0, dst, 11, 1);
                                    goto Label_012D;
                        }
                        Label_011D:
                        Buffer.BlockCopy(BitConverter.GetBytes(4), 0, dst, 11, 1);
                        Label_012D:
                        Buffer.BlockCopy(BitConverter.GetBytes(class103_0.THOI_GIAN), 0, dst, 12, 4);
                        Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, dst, 5, 2);
                        if (base.Client != null)
                        {
                              base.Client.Send(dst, dst.Length);
                        }
                  }
                  catch (Exception exception)
                  {
                        Form1.WriteLine(1, "set公有VAT_PHAM出错![" + base.Userid + "]-[" + base.UserName + "]" + exception.Message);
                  }
            }

            public void SET_THEM_VAO_TRANG_THAI_ITEM()
            {
                  if ((base.byte_1 != null) && (base.byte_1.Length != 1))
                  {
                        try
                        {
                              int num = base.byte_1.Length / 0x10;
                              for (int i = 0; i < num; i++)
                              {
                                    if (base.byte_1.Length < ((i + 1) * 0x10))
                                    {
                                          break;
                                    }
                                    byte[] dst = new byte[4];
                                    byte[] buffer2 = new byte[4];
                                    byte[] buffer3 = new byte[4];
                                    byte[] buffer4 = new byte[4];
                                    Buffer.BlockCopy(base.byte_1, i * 0x10, dst, 0, 4);
                                    if (BitConverter.ToInt32(dst, 0) <= 0)
                                    {
                                          break;
                                    }
                                    Buffer.BlockCopy(base.byte_1, (i * 0x10) + 4, buffer2, 0, 4);
                                    if (BitConverter.ToInt32(dst, 0) <= 0)
                                    {
                                          break;
                                    }
                                    Buffer.BlockCopy(base.byte_1, (i * 0x10) + 8, buffer3, 0, 4);
                                    if (BitConverter.ToInt32(dst, 0) <= 0)
                                    {
                                          break;
                                    }
                                    Buffer.BlockCopy(base.byte_1, (i * 0x10) + 12, buffer4, 0, 4);
                                    int num3 = BitConverter.ToInt32(dst, 0);
                                    int num4 = BitConverter.ToInt32(buffer2, 0);
                                    int num5 = BitConverter.ToInt32(buffer3, 0);
                                    int num6 = BitConverter.ToInt32(buffer4, 0);
                                    if ((BitConverter.ToInt32(dst, 0) <= 0) || (BitConverter.ToInt32(buffer2, 0) <= 0))
                                    {
                                          break;
                                    }
                                    this.SET_THEM_VAO_TRANG_THAI_VAT_PHAM(num3, num4, num5, num6);
                              }
                              this.UpdateHP_MP_SP();
                        }
                        catch (Exception exception)
                        {
                              Form1.WriteLine(1, "Set追加状态VAT_PHAM出错![" + base.Userid + "]-[" + base.UserName + "]" + exception.Message);
                        }
                  }
            }

            public void SET_THEM_VAO_TRANG_THAI_VAT_PHAM(int int_128, int int_129, int int_130, int int_131)
            {
                  try
                  {
                        if (World.jlMsg == 1)
                        {
                              Form1.WriteLine(0, "Players_Set追加状态VAT_PHAM");
                        }
                        switch (int_128)
                        {
                              case 1:
                                    {
                                          if (base.threadSafeDictionary_3.ContainsKey(int_128))
                                          {
                                                base.threadSafeDictionary_3[int_128].method_1();
                                          }
                                          THEM_VAO_TRANG_THAI_NEW them_vao_trang_thai_new = new THEM_VAO_TRANG_THAI_NEW(this, int_128, int_129, int_130, int_131);
                                          base.threadSafeDictionary_3.Add(int_128, them_vao_trang_thai_new);
                                          if (int_131 == 2)
                                          {
                                                base.FLD_them_vao_ti_le_phan_tram_cong_kich += 0.01M * int_130;
                                          }
                                          else if (int_131 == 1)
                                          {
                                                base.FLD_nhan_vat_them_vao_cong_kich += int_130;
                                          }
                                          break;
                                    }
                              case 2:
                                    {
                                          if (base.threadSafeDictionary_3.ContainsKey(int_128))
                                          {
                                                base.threadSafeDictionary_3[int_128].method_1();
                                          }
                                          THEM_VAO_TRANG_THAI_NEW them_vao_trang_thai_new2 = new THEM_VAO_TRANG_THAI_NEW(this, int_128, int_129, int_130, int_131);
                                          base.threadSafeDictionary_3.Add(int_128, them_vao_trang_thai_new2);
                                          if (int_131 == 2)
                                          {
                                                base.FLD_them_vao_ti_le_phan_tram_phong_ngu += 0.01M * int_130;
                                          }
                                          else if (int_131 == 1)
                                          {
                                                base.FLD_nhan_vat_them_vao_phong_ngu += int_130;
                                          }
                                          break;
                                    }
                              case 3:
                                    {
                                          if (base.threadSafeDictionary_3.ContainsKey(int_128))
                                          {
                                                base.threadSafeDictionary_3[int_128].method_1();
                                          }
                                          THEM_VAO_TRANG_THAI_NEW them_vao_trang_thai_new3 = new THEM_VAO_TRANG_THAI_NEW(this, int_128, int_129, int_130, int_131);
                                          base.threadSafeDictionary_3.Add(int_128, them_vao_trang_thai_new3);
                                          if (int_131 == 2)
                                          {
                                                base.FLD_them_vao_ti_le_phan_tram_HP_han_muc_toi_da += 0.01 * int_130;
                                          }
                                          else if (int_131 == 1)
                                          {
                                                base.Nhan_vat_them_vao_lon_nhat_HP += int_130;
                                          }
                                          break;
                                    }
                              case 4:
                                    {
                                          if (base.threadSafeDictionary_3.ContainsKey(int_128))
                                          {
                                                base.threadSafeDictionary_3[int_128].method_1();
                                          }
                                          THEM_VAO_TRANG_THAI_NEW them_vao_trang_thai_new4 = new THEM_VAO_TRANG_THAI_NEW(this, int_128, int_129, int_130, int_131);
                                          base.threadSafeDictionary_3.Add(int_128, them_vao_trang_thai_new4);
                                          if (int_131 == 2)
                                          {
                                                base.FLD_them_vao_ti_le_phan_tram_MP_han_muc_toi_da += 0.01 * int_130;
                                          }
                                          else if (int_131 == 1)
                                          {
                                                base.Nhan_vat_them_vao_lon_nhat_MP += int_130;
                                          }
                                          break;
                                    }
                              case 5:
                                    {
                                          if (base.threadSafeDictionary_3.ContainsKey(int_128))
                                          {
                                                base.threadSafeDictionary_3[int_128].method_1();
                                          }
                                          THEM_VAO_TRANG_THAI_NEW them_vao_trang_thai_new5 = new THEM_VAO_TRANG_THAI_NEW(this, int_128, int_129, int_130, int_131);
                                          base.threadSafeDictionary_3.Add(int_128, them_vao_trang_thai_new5);
                                          if (int_131 == 2)
                                          {
                                                base.FLD_them_vao_ti_le_phan_tram_sinh_menh += 0.01 * int_130;
                                          }
                                          else if (int_131 == 1)
                                          {
                                                base.FLD_nhan_vat_them_vao_sinh_menh += int_130;
                                          }
                                          break;
                                    }
                              case 6:
                                    {
                                          if (base.threadSafeDictionary_3.ContainsKey(int_128))
                                          {
                                                base.threadSafeDictionary_3[int_128].method_1();
                                          }
                                          THEM_VAO_TRANG_THAI_NEW them_vao_trang_thai_new6 = new THEM_VAO_TRANG_THAI_NEW(this, int_128, int_129, int_130, int_131);
                                          base.threadSafeDictionary_3.Add(int_128, them_vao_trang_thai_new6);
                                          if (int_131 == 2)
                                          {
                                                base.FLD_them_vao_ti_le_phan_tram_ne_tranh += 0.01 * int_130;
                                          }
                                          else if (int_131 == 1)
                                          {
                                                base.FLD_nhan_vat_them_vao_ne_tranh += int_130;
                                          }
                                          break;
                                    }
                              case 7:
                                    {
                                          if (base.threadSafeDictionary_3.ContainsKey(int_128))
                                          {
                                                base.threadSafeDictionary_3[int_128].method_1();
                                          }
                                          THEM_VAO_TRANG_THAI_NEW them_vao_trang_thai_new7 = new THEM_VAO_TRANG_THAI_NEW(this, int_128, int_129, int_130, int_131);
                                          base.threadSafeDictionary_3.Add(int_128, them_vao_trang_thai_new7);
                                          if (int_131 == 2)
                                          {
                                                base.FLD_nhan_vat_vo_cong_luc_cong_kich_tang_cuong_ti_le_phan_tram += 0.01 * int_130;
                                          }
                                          break;
                                    }
                              case 8:
                                    {
                                          if (base.threadSafeDictionary_3.ContainsKey(int_128))
                                          {
                                                base.threadSafeDictionary_3[int_128].method_1();
                                          }
                                          THEM_VAO_TRANG_THAI_NEW them_vao_trang_thai_new8 = new THEM_VAO_TRANG_THAI_NEW(this, int_128, int_129, int_130, int_131);
                                          base.threadSafeDictionary_3.Add(int_128, them_vao_trang_thai_new8);
                                          if (int_131 == 2)
                                          {
                                                base.FLD_nhan_vat_vo_cong_suc_phong_ngu_tang_cuong_ti_le_phan_tram += 0.01 * int_130;
                                          }
                                          else if (int_131 == 1)
                                          {
                                                base.FLD_nhan_vat_them_vao_ne_tranh += int_130;
                                          }
                                          break;
                                    }
                              case 9:
                                    {
                                          if (base.threadSafeDictionary_3.ContainsKey(int_128))
                                          {
                                                base.threadSafeDictionary_3[int_128].method_1();
                                          }
                                          THEM_VAO_TRANG_THAI_NEW them_vao_trang_thai_new9 = new THEM_VAO_TRANG_THAI_NEW(this, int_128, int_129, int_130, int_131);
                                          base.threadSafeDictionary_3.Add(int_128, them_vao_trang_thai_new9);
                                          if (int_131 == 2)
                                          {
                                                base.FLD_Nhan_vat_them_vao_kinh_nghiem_ti_le_phan_tram += 0.01 * int_130;
                                          }
                                          break;
                                    }
                              case 10:
                                    {
                                          if (base.threadSafeDictionary_3.ContainsKey(int_128))
                                          {
                                                base.threadSafeDictionary_3[int_128].method_1();
                                          }
                                          THEM_VAO_TRANG_THAI_NEW them_vao_trang_thai_new10 = new THEM_VAO_TRANG_THAI_NEW(this, int_128, int_129, int_130, int_131);
                                          base.threadSafeDictionary_3.Add(int_128, them_vao_trang_thai_new10);
                                          if (int_131 == 2)
                                          {
                                                base.FLD_nhan_vat_them_vao_hop_thanh_ty_le_thanh_cong_ti_le_phan_tram += 0.01 * int_130;
                                          }
                                          break;
                                    }
                              case 11:
                                    {
                                          if (base.threadSafeDictionary_3.ContainsKey(int_128))
                                          {
                                                base.threadSafeDictionary_3[int_128].method_1();
                                          }
                                          THEM_VAO_TRANG_THAI_NEW them_vao_trang_thai_new11 = new THEM_VAO_TRANG_THAI_NEW(this, int_128, int_129, int_130, int_131);
                                          base.threadSafeDictionary_3.Add(int_128, them_vao_trang_thai_new11);
                                          break;
                                    }
                              case 12:
                                    {
                                          if (base.threadSafeDictionary_3.ContainsKey(int_128))
                                          {
                                                base.threadSafeDictionary_3[int_128].method_1();
                                          }
                                          THEM_VAO_TRANG_THAI_NEW them_vao_trang_thai_new12 = new THEM_VAO_TRANG_THAI_NEW(this, int_128, int_129, int_130, int_131);
                                          base.threadSafeDictionary_3.Add(int_128, them_vao_trang_thai_new12);
                                          if (int_131 == 2)
                                          {
                                                base.FLD_nhan_vat_them_vao_gold_ti_le_phan_tram += 0.01 * int_130;
                                          }
                                          break;
                                    }
                              case 13:
                                    {
                                          if (base.threadSafeDictionary_3.ContainsKey(int_128))
                                          {
                                                base.threadSafeDictionary_3[int_128].method_1();
                                          }
                                          THEM_VAO_TRANG_THAI_NEW them_vao_trang_thai_new13 = new THEM_VAO_TRANG_THAI_NEW(this, int_128, int_129, int_130, int_131);
                                          base.threadSafeDictionary_3.Add(int_128, them_vao_trang_thai_new13);
                                          if (int_131 == 2)
                                          {
                                                base.FLD_nhan_vat_them_vao_item_roi_xuong_xac_suat_ti_le_phan_tram += 0.01 * int_130;
                                          }
                                          break;
                                    }
                              case 14:
                                    {
                                          if (base.threadSafeDictionary_3.ContainsKey(int_128))
                                          {
                                                base.threadSafeDictionary_3[int_128].method_1();
                                          }
                                          THEM_VAO_TRANG_THAI_NEW them_vao_trang_thai_new14 = new THEM_VAO_TRANG_THAI_NEW(this, int_128, int_129, int_130, int_131);
                                          base.threadSafeDictionary_3.Add(int_128, them_vao_trang_thai_new14);
                                          base.FLD_nhan_vat_them_vao_khi_cong += int_130;
                                          break;
                                    }
                              case 15:
                                    {
                                          if (base.threadSafeDictionary_3.ContainsKey(int_128))
                                          {
                                                base.threadSafeDictionary_3[int_128].method_1();
                                          }
                                          THEM_VAO_TRANG_THAI_NEW them_vao_trang_thai_new15 = new THEM_VAO_TRANG_THAI_NEW(this, int_128, int_129, int_130, int_131);
                                          base.threadSafeDictionary_3.Add(int_128, them_vao_trang_thai_new15);
                                          base.FLD_nhan_vat_them_vao_kinh_nghiem_hoc_vo_cong_ti_le_phan_tram += int_130;
                                          break;
                                    }
                        }
                        this.UNKNOWN_441(int_128, 1, int_129, int_130, int_131);
                  }
                  catch (Exception exception)
                  {
                        Form1.WriteLine(1, string.Concat(new object[] { "Set追加状态VAT_PHAM2 出错：[", int_128, "]", exception }));
                  }
            }

            public static List<ClassXY> smethod_0(ClassXY class109_0, ClassXY class109_1, int int_128, double double_206)
            {
                  List<ClassXY> list = new List<ClassXY>();
                  int x = class109_0.x;
                  int y = class109_0.y;
                  int num3 = class109_1.x;
                  int num4 = class109_1.y;
                  if (double_206 == 0.0)
                  {
                        for (int i = 0; i < (int_128 - 2); i++)
                        {
                              list.Add(class109_0);
                        }
                        return list;
                  }
                  double num5 = num4 - y;
                  double a = Math.Atan(((double)(num3 - x)) / num5);
                  if ((((num3 - x) <= 0) || ((num4 - y) <= 0)) && (((num3 - x) >= 0) || ((num4 - y) <= 0)))
                  {
                        if (((num3 - x) < 0) && ((num4 - y) < 0))
                        {
                              a = 3.1415926535897931 + a;
                        }
                        else if (((num3 - x) > 0) && ((num4 - y) < 0))
                        {
                              a = 3.1415926535897931 + a;
                        }
                        else if ((num4 != y) || (num3 <= x))
                        {
                              if ((num4 == y) && (num3 < x))
                              {
                                    a = 4.71238898038469;
                              }
                              else if (((x != num3) || (num4 <= y)) && ((x == num3) && (num4 < y)))
                              {
                                    a = 3.1415926535897931;
                              }
                        }
                  }
                  double num7 = x + (int_128 * Math.Sin(a));
                  double num8 = y + (int_128 * Math.Cos(a));
                  list.Add(new ClassXY((int)num7, (int)num8));
                  return list;
            }

            public void Status_Effect(byte[] byte_5, int int_128, int int_129)
            {
                  PacketData data = new PacketData();
                  data.method_8((long)BitConverter.ToInt32(byte_5, 0));
                  data.Write4(0);
                  data.Write4(int_128);
                  data.Write4(int_129);
                  data.Write4(0);
                  if (base.Client != null)
                  {
                        base.Client.method_4(data, 0x8700, base.UserSessionID);
                  }
                  this.vmethod_1(data, 0x8700, base.UserSessionID);
            }

            public void SU_DO_DAI_LOAI(int int_128, int int_129, int int_130)
            {
                  byte[] dst = Converter.hexStringToByte("AA551300009D0549100D000000000000000000000000000055AA");
                  Buffer.BlockCopy(BitConverter.GetBytes(int_128), 0, dst, 11, 1);
                  if (int_130 == 0)
                  {
                        if ((base.SU_DO_VO_CONG_DONG_NHAT[1] == int_129.ToString()) || (base.SU_DO_VO_CONG_DONG_NHAT[2] == int_129.ToString()))
                        {
                              return;
                        }
                        base.SU_DO_VO_CONG_DONG_NHAT[0] = int_129.ToString();
                        Buffer.BlockCopy(BitConverter.GetBytes(int_129), 0, dst, 12, 4);
                  }
                  else if (int_130 == 1)
                  {
                        if ((base.SU_DO_VO_CONG_DONG_NHAT[0] == int_129.ToString()) || (base.SU_DO_VO_CONG_DONG_NHAT[2] == int_129.ToString()))
                        {
                              return;
                        }
                        base.SU_DO_VO_CONG_DONG_NHAT[1] = int_129.ToString();
                        Buffer.BlockCopy(BitConverter.GetBytes(int_129), 0, dst, 0x10, 4);
                  }
                  else if (int_130 == 2)
                  {
                        if ((base.SU_DO_VO_CONG_DONG_NHAT[0] == int_129.ToString()) || (base.SU_DO_VO_CONG_DONG_NHAT[1] == int_129.ToString()))
                        {
                              return;
                        }
                        base.SU_DO_VO_CONG_DONG_NHAT[2] = int_129.ToString();
                        Buffer.BlockCopy(BitConverter.GetBytes(int_129), 0, dst, 20, 4);
                  }
                  Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, dst, 5, 2);
                  if (base.Client != null)
                  {
                        base.Client.method_8(dst, dst.Length);
                  }
            }

            public void SU_DUNG_THO_LINH_PHU(byte[] byte_5, int int_128)
            {
                  try
                  {
                        if ((!base.PlayerIsDead && (base.NHAN_VAT_HP > 0L)) && !base.OpenWarehouse)
                        {
                              this.Packet_Modify(byte_5, int_128);
                              byte[] dst = new byte[4];
                              byte[] buffer2 = new byte[4];
                              Buffer.BlockCopy(byte_5, 11, dst, 0, 2);
                              Buffer.BlockCopy(byte_5, 13, buffer2, 0, 2);
                              byte[] buffer3 = Converter.hexStringToByte("AA552C00002C0108101C0001000A003E44030000000000C399053C00000000010018943577010000000000000000000055AA");
                              byte[] buffer4 = new byte[4];
                              byte[] buffer5 = new byte[8];
                              byte[] buffer6 = new byte[4];
                              int index = BitConverter.ToInt32(dst, 0);
                              if (BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_ID, 0) != 0)
                              {
                                    Buffer.BlockCopy(base.TRANG_BI_LAN_BAO_VAY[index].Item_byte, 0x10, buffer4, 0, 4);
                                    Buffer.BlockCopy(base.TRANG_BI_LAN_BAO_VAY[index].Item_byte, 8, buffer6, 0, 4);
                                    Buffer.BlockCopy(base.TRANG_BI_LAN_BAO_VAY[index].Item_byte, 0, buffer5, 0, 8);
                                    int num2 = BitConverter.ToInt32(buffer4, 0) - 0x77359400;
                                    if (!base.dictionary_3.ContainsKey(0x3c14dc8d) && !base.dictionary_3.ContainsKey(0x3c14dd38))
                                    {
                                          num2 = (BitConverter.ToInt32(buffer4, 0) - 0x77359400) - 1;
                                    }
                                    if (num2 <= 0)
                                    {
                                          Buffer.BlockCopy(BitConverter.GetBytes(0x77359400), 0, buffer3, 0x21, 4);
                                    }
                                    else
                                    {
                                          Buffer.BlockCopy(BitConverter.GetBytes((int)(num2 + 0x77359400)), 0, buffer3, 0x21, 4);
                                          Buffer.BlockCopy(BitConverter.GetBytes((int)(num2 + 0x77359400)), 0, base.TRANG_BI_LAN_BAO_VAY[index].Item_byte, 0x10, 4);
                                    }
                                    Buffer.BlockCopy(buffer5, 0, buffer3, 15, 8);
                                    Buffer.BlockCopy(dst, 0, buffer3, 13, 2);
                                    Buffer.BlockCopy(base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_ID, 0, buffer3, 0x17, 4);
                                    Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, buffer3, 5, 2);
                                    if (base.Client != null)
                                    {
                                          base.Client.Send(buffer3, buffer3.Length);
                                    }
                                    if (num2 <= 0)
                                    {
                                          this.LAM_GIAM_DI_VAT_PHAM(index, 1);
                                    }
                                    TBL_XWWL_MAP tbl_xwwl_map = (TBL_XWWL_MAP)base.hashtable_0[BitConverter.ToInt32(buffer2, 0)];
                                    if (tbl_xwwl_map != null)
                                    {
                                          this.Move(tbl_xwwl_map.Rxjh_X, tbl_xwwl_map.Rxjh_Y, tbl_xwwl_map.Rxjh_Z, tbl_xwwl_map.Rxjh_Map);
                                    }
                                    this.BAT_GIU_KIEM_TRA_LAI_PHAM_VI_NGUOI_CHOI();
                                    this.BAT_GIU_KIEM_TRA_LAI_NPC();
                                    this.BAT_GIU_KIEM_TRA_LAI_PHAM_VI_MAT_DAT_VAT_PHAM();
                              }
                        }
                  }
                  catch (Exception exception)
                  {
                        Form1.WriteLine(1, "Use magic soil Error![" + base.Userid + "]-[" + base.UserName + "]" + exception.Message);
                  }
            }

            public void SwitchToCharSelection(byte[] byte_5, int int_128)
            {
                  this.Packet_Modify(byte_5, int_128);
                  this.bool_14 = false;
                  base.Exiting = true;
                  this.Players_Logout();
                  string str = "AA551700000000630008000100000000000001000000000000000055AA";
                  byte[] dst = Converter.hexStringToByte("AA5513000000005700040004000000000000000000000055AA");
                  byte[] buffer2 = Converter.hexStringToByte(str);
                  Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, dst, 5, 2);
                  Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, buffer2, 5, 2);
                  if (base.Client != null)
                  {
                        base.Client.Send(dst, dst.Length);
                  }
                  if (base.Client != null)
                  {
                        base.Client.Send(buffer2, buffer2.Length);
                  }
            }

            public void TANG_CUONG_ITEM_SCRIPT(int int_128, int int_129, int int_130)
            {
                  TBL_XWWL_ITEM tbl_xwwl_item;
                  byte[] dst = new byte[0x38];
                  if (World.Itme.TryGetValue(int_128, out tbl_xwwl_item))
                  {
                        Buffer.BlockCopy(BitConverter.GetBytes(tbl_xwwl_item.FLD_MAGIC0), 0, dst, 0, 4);
                        Buffer.BlockCopy(BitConverter.GetBytes(tbl_xwwl_item.FLD_MAGIC1), 0, dst, 4, 4);
                        Buffer.BlockCopy(BitConverter.GetBytes(tbl_xwwl_item.FLD_MAGIC2), 0, dst, 8, 4);
                        Buffer.BlockCopy(BitConverter.GetBytes(tbl_xwwl_item.FLD_MAGIC3), 0, dst, 12, 4);
                        Buffer.BlockCopy(BitConverter.GetBytes(tbl_xwwl_item.FLD_MAGIC4), 0, dst, 0x10, 4);
                        byte[] bytes = BitConverter.GetBytes(RxjhClass.GetDBItmeId());
                        this.TANG_CUONG_VAT_PHAM_2(bytes, BitConverter.GetBytes(int_128), int_129, BitConverter.GetBytes(int_130), dst);
                  }
            }

            public void TANG_CUONG_VAT_PHAM(byte[] byte_5, byte[] byte_6, int int_128, byte[] byte_7, byte[] byte_8)
            {
                  try
                  {
                        TBL_XWWL_ITEM tbl_xwwl_item;
                        if (World.Itme.TryGetValue(BitConverter.ToInt32(byte_6, 0), out tbl_xwwl_item))
                        {
                              byte[] dst = Converter.hexStringToByte("AA556B0001940223005C00010000008716E567818320060208AF2F000000000100000000000000010F020F00020000470D030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000C3E755AA");
                              byte[] buffer2 = new byte[0x49];
                              if (tbl_xwwl_item.FLD_SIDE != 0)
                              {
                                    VAT_PHAM_LOAI vat_pham_loai = base.NHAN_NHAN_VAT_ITEM_LOAI_HINH(BitConverter.ToInt32(byte_6, 0));
                                    if (vat_pham_loai != null)
                                    {
                                          int_128 = vat_pham_loai.VAT_PHAM_VI_TRI;
                                          byte_5 = vat_pham_loai.Item_toan_bo_ID;
                                          byte_7 = BitConverter.GetBytes((int)(BitConverter.ToInt32(vat_pham_loai.VAT_PHAM_SO_LUONG, 0) + BitConverter.ToInt32(byte_7, 0)));
                                    }
                              }
                              else
                              {
                                    byte_7 = BitConverter.GetBytes(1);
                              }
                              Buffer.BlockCopy(byte_5, 0, buffer2, 0, 8);
                              Buffer.BlockCopy(byte_6, 0, buffer2, 8, 4);
                              Buffer.BlockCopy(byte_7, 0, buffer2, 12, 4);
                              Buffer.BlockCopy(byte_8, 0, buffer2, 0x10, byte_8.Length);
                              Buffer.BlockCopy(BitConverter.GetBytes(int_128), 0, dst, 40, 2);
                              Buffer.BlockCopy(buffer2, 0, dst, 15, 12);
                              Buffer.BlockCopy(buffer2, 12, dst, 0x1f, 4);
                              Buffer.BlockCopy(buffer2, 0x10, dst, 0x2f, byte_8.Length);
                              if ((tbl_xwwl_item.FLD_CJL != 0) && (tbl_xwwl_item.FLD_CJL == 0x3e8))
                              {
                                    Buffer.BlockCopy(BitConverter.GetBytes(0), 0, buffer2, 60, 2);
                                    Buffer.BlockCopy(BitConverter.GetBytes(0), 0, dst, 0x5b, 2);
                              }
                              base.TRANG_BI_LAN_BAO_VAY[int_128].Item_byte = buffer2;
                              Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, dst, 5, 2);
                              if (base.Client != null)
                              {
                                    base.Client.Send(dst, dst.Length);
                              }
                        }
                  }
                  catch (Exception exception)
                  {
                        Form1.WriteLine(1, string.Concat(new object[] { "TANG_CUONG_VAT_PHAM出错 [", base.Userid, "][", base.UserName, "] VI_TRI[", int_128, "] 数量[", BitConverter.ToInt32(byte_7, 0), "]", exception.Message }));
                  }
            }

            public void TANG_CUONG_VAT_PHAM(byte[] byte_5, byte[] byte_6, int int_128, byte[] byte_7, byte[] byte_8, int int_129)
            {
                  try
                  {
                        TBL_XWWL_ITEM tbl_xwwl_item;
                        VAT_PHAM_LOAI vat_pham_loai;
                        if (!World.Itme.TryGetValue(BitConverter.ToInt32(byte_6, 0), out tbl_xwwl_item))
                        {
                              return;
                        }
                        byte[] dst = Converter.hexStringToByte("AA556B0001940223005C00010000008716E567818320060208AF2F000000000100000000000000010F020F00020000470D030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000C3E755AA");
                        byte[] buffer2 = new byte[0x49];
                        if (tbl_xwwl_item.FLD_SIDE == 0)
                        {
                              goto Label_00FF;
                        }
                        switch (BitConverter.ToInt32(byte_6, 0))
                        {
                              case 0x2faf080b:
                              case 0x2faf080c:
                              case 0x2faf080d:
                              case 0x2faf0802:
                              case 0x2faf0801:
                              case 0x2faf0817:
                              case 0x2faf0818:
                              case 0x2faf0819:
                              case 0x2faf081a:
                              case 0x2faf081b:
                              case 0x2faf081c:
                              case 0x2faf083d:
                              case 0x2faf083e:
                                    break;

                              default:
                                    vat_pham_loai = base.NHAN_NHAN_VAT_ITEM_LOAI_HINH(BitConverter.ToInt32(byte_6, 0));
                                    goto Label_00CE;
                        }
                        vat_pham_loai = base.method_108(BitConverter.ToInt32(byte_6, 0), int_129);
                        Label_00CE:
                        if (vat_pham_loai != null)
                        {
                              int_128 = vat_pham_loai.VAT_PHAM_VI_TRI;
                              byte_5 = vat_pham_loai.Item_toan_bo_ID;
                              byte_7 = BitConverter.GetBytes((int)(BitConverter.ToInt32(vat_pham_loai.VAT_PHAM_SO_LUONG, 0) + BitConverter.ToInt32(byte_7, 0)));
                        }
                        goto Label_0107;
                        Label_00FF:
                        byte_7 = BitConverter.GetBytes(1);
                        Label_0107:
                        Buffer.BlockCopy(byte_5, 0, buffer2, 0, 8);
                        Buffer.BlockCopy(byte_6, 0, buffer2, 8, 4);
                        Buffer.BlockCopy(byte_7, 0, buffer2, 12, 4);
                        Buffer.BlockCopy(byte_8, 0, buffer2, 0x10, byte_8.Length);
                        Buffer.BlockCopy(BitConverter.GetBytes(int_128), 0, dst, 40, 2);
                        Buffer.BlockCopy(buffer2, 0, dst, 15, 12);
                        Buffer.BlockCopy(buffer2, 12, dst, 0x1f, 4);
                        Buffer.BlockCopy(buffer2, 0x10, dst, 0x2f, byte_8.Length);
                        if ((tbl_xwwl_item.FLD_CJL != 0) && (tbl_xwwl_item.FLD_CJL == 0x3e8))
                        {
                              Buffer.BlockCopy(BitConverter.GetBytes(0), 0, buffer2, 60, 2);
                              Buffer.BlockCopy(BitConverter.GetBytes(0), 0, dst, 0x5b, 2);
                        }
                        base.TRANG_BI_LAN_BAO_VAY[int_128].Item_byte = buffer2;
                        Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, dst, 5, 2);
                        if (base.Client != null)
                        {
                              base.Client.Send(dst, dst.Length);
                        }
                  }
                  catch (Exception exception)
                  {
                        Form1.WriteLine(1, string.Concat(new object[] { "TANG_CUONG_VAT_PHAM出错 [", base.Userid, "][", base.UserName, "] VI_TRI[", int_128, "] 数量[", BitConverter.ToInt32(byte_7, 0), "]", exception.Message }));
                  }
            }

            public void TANG_CUONG_VAT_PHAM_1(byte[] byte_5, byte[] byte_6, int int_128, byte[] byte_7, byte[] byte_8, bool bool_16)
            {
                  try
                  {
                        TBL_XWWL_ITEM tbl_xwwl_item;
                        if (World.Itme.TryGetValue(BitConverter.ToInt32(byte_6, 0), out tbl_xwwl_item))
                        {
                              byte[] dst = Converter.hexStringToByte("AA556B0001940223005C00010000008716E567818320060208AF2F000000000100000000000000010F020F00020000470D030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000C3E755AA");
                              byte[] buffer2 = new byte[0x49];
                              if (tbl_xwwl_item.FLD_SIDE != 0)
                              {
                                    VAT_PHAM_LOAI vat_pham_loai = base.NHAN_NHAN_VAT_ITEM_LOAI_HINH(BitConverter.ToInt32(byte_6, 0));
                                    if (vat_pham_loai != null)
                                    {
                                          int_128 = vat_pham_loai.VAT_PHAM_VI_TRI;
                                          byte_5 = vat_pham_loai.Item_toan_bo_ID;
                                          byte_7 = BitConverter.GetBytes((int)(BitConverter.ToInt32(vat_pham_loai.VAT_PHAM_SO_LUONG, 0) + BitConverter.ToInt32(byte_7, 0)));
                                    }
                              }
                              else
                              {
                                    byte_7 = BitConverter.GetBytes(1);
                              }
                              Buffer.BlockCopy(byte_5, 0, buffer2, 0, 8);
                              Buffer.BlockCopy(byte_6, 0, buffer2, 8, 4);
                              Buffer.BlockCopy(byte_7, 0, buffer2, 12, 4);
                              Buffer.BlockCopy(byte_8, 0, buffer2, 0x10, byte_8.Length);
                              Buffer.BlockCopy(BitConverter.GetBytes(int_128), 0, dst, 40, 2);
                              Buffer.BlockCopy(buffer2, 0, dst, 15, 12);
                              Buffer.BlockCopy(buffer2, 12, dst, 0x1f, 4);
                              Buffer.BlockCopy(buffer2, 0x10, dst, 0x2f, byte_8.Length);
                              if (bool_16)
                              {
                                    Buffer.BlockCopy(BitConverter.GetBytes(1), 0, buffer2, 0x48, 1);
                                    Buffer.BlockCopy(BitConverter.GetBytes((int)(BitConverter.ToInt32(byte_6, 0) + 0x4e20)), 0, dst, 0x17, 4);
                              }
                              if ((tbl_xwwl_item.FLD_CJL != 0) && (tbl_xwwl_item.FLD_CJL == 0x3e8))
                              {
                                    Buffer.BlockCopy(BitConverter.GetBytes(tbl_xwwl_item.FLD_CJL), 0, buffer2, 60, 2);
                                    Buffer.BlockCopy(BitConverter.GetBytes(tbl_xwwl_item.FLD_CJL), 0, dst, 0x5b, 2);
                              }
                              base.TRANG_BI_LAN_BAO_VAY[int_128].Item_byte = buffer2;
                              Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, dst, 5, 2);
                              if (base.Client != null)
                              {
                                    base.Client.Send(dst, dst.Length);
                              }
                        }
                  }
                  catch (Exception exception)
                  {
                        Form1.WriteLine(1, string.Concat(new object[] { "TANG_CUONG_VAT_PHAM出错1 [", base.Userid, "][", base.UserName, "] VI_TRI[", int_128, "] 数量[", BitConverter.ToInt32(byte_7, 0), "]", exception.Message }));
                  }
            }

            public void TANG_CUONG_VAT_PHAM_2(byte[] byte_5, byte[] byte_6, int int_128, byte[] byte_7, byte[] byte_8)
            {
                  try
                  {
                        TBL_XWWL_ITEM tbl_xwwl_item;
                        if (World.Itme.TryGetValue(BitConverter.ToInt32(byte_6, 0), out tbl_xwwl_item))
                        {
                              byte[] dst = Converter.hexStringToByte("AA556B000194020D005C00010000008716E567818320060208AF2F000000000100000000000000010F020F00020000470D030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000C3E755AA");
                              byte[] buffer2 = new byte[0x49];
                              if (tbl_xwwl_item.FLD_SIDE != 0)
                              {
                                    VAT_PHAM_LOAI vat_pham_loai = base.NHAN_NHAN_VAT_ITEM_LOAI_HINH(BitConverter.ToInt32(byte_6, 0));
                                    if (vat_pham_loai != null)
                                    {
                                          int_128 = vat_pham_loai.VAT_PHAM_VI_TRI;
                                          byte_5 = vat_pham_loai.Item_toan_bo_ID;
                                          byte_7 = BitConverter.GetBytes((int)(BitConverter.ToInt32(vat_pham_loai.VAT_PHAM_SO_LUONG, 0) + BitConverter.ToInt32(byte_7, 0)));
                                    }
                              }
                              else
                              {
                                    byte_7 = BitConverter.GetBytes(1);
                              }
                              Buffer.BlockCopy(byte_5, 0, buffer2, 0, 8);
                              Buffer.BlockCopy(byte_6, 0, buffer2, 8, 4);
                              Buffer.BlockCopy(byte_7, 0, buffer2, 12, 4);
                              Buffer.BlockCopy(byte_8, 0, buffer2, 0x10, byte_8.Length);
                              Buffer.BlockCopy(BitConverter.GetBytes(int_128), 0, dst, 40, 2);
                              Buffer.BlockCopy(buffer2, 0, dst, 15, 12);
                              Buffer.BlockCopy(buffer2, 12, dst, 0x1f, 4);
                              Buffer.BlockCopy(buffer2, 0x10, dst, 0x2f, byte_8.Length);
                              if ((tbl_xwwl_item.FLD_CJL != 0) && (tbl_xwwl_item.FLD_CJL == 0x3e8))
                              {
                                    Buffer.BlockCopy(BitConverter.GetBytes(0), 0, buffer2, 60, 2);
                                    Buffer.BlockCopy(BitConverter.GetBytes(0), 0, dst, 0x5b, 2);
                              }
                              base.TRANG_BI_LAN_BAO_VAY[int_128].Item_byte = buffer2;
                              Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, dst, 5, 2);
                              if (base.Client != null)
                              {
                                    base.Client.Send(dst, dst.Length);
                              }
                        }
                  }
                  catch (Exception exception)
                  {
                        Form1.WriteLine(1, string.Concat(new object[] { "TANG_CUONG_VAT_PHAM出错2 [", base.Userid, "][", base.UserName, "] VI_TRI[", int_128, "] 数量[", BitConverter.ToInt32(byte_7, 0), "]", exception.Message }));
                  }
            }

            public void TANG_CUONG_VAT_PHAM_MANG_THUOC_TINH(int int_128, int int_129, int int_130, int int_131, int int_132, int int_133, int int_134, int int_135, int int_136, int int_137, int int_138, int int_139)
            {
                  try
                  {
                        TBL_XWWL_ITEM tbl_xwwl_item;
                        VAT_PHAM_LOAI vat_pham_loai;
                        if (!World.Itme.TryGetValue(int_128, out tbl_xwwl_item))
                        {
                              return;
                        }
                        byte[] dst = new byte[0x38];
                        Buffer.BlockCopy(BitConverter.GetBytes(int_131), 0, dst, 0, 4);
                        Buffer.BlockCopy(BitConverter.GetBytes(int_132), 0, dst, 4, 4);
                        Buffer.BlockCopy(BitConverter.GetBytes(int_133), 0, dst, 8, 4);
                        Buffer.BlockCopy(BitConverter.GetBytes(int_134), 0, dst, 12, 4);
                        Buffer.BlockCopy(BitConverter.GetBytes(int_135), 0, dst, 0x10, 4);
                        Buffer.BlockCopy(BitConverter.GetBytes(int_136), 0, dst, 0x2e, 4);
                        if (int_137 > 0)
                        {
                              Buffer.BlockCopy(BitConverter.GetBytes(1), 0, dst, 0x16, 2);
                        }
                        Buffer.BlockCopy(BitConverter.GetBytes(int_137), 0, dst, 0x18, 4);
                        Buffer.BlockCopy(BitConverter.GetBytes(int_138), 0, dst, 0x34, 4);
                        long dBItmeId = RxjhClass.GetDBItmeId();
                        byte[] buffer2 = Converter.hexStringToByte("AA556B000194020D005C00010000008716E567818320060208AF2F000000000100000000000000010F020F00020000470D030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000C3E755AA");
                        byte[] buffer3 = new byte[0x49];
                        if (tbl_xwwl_item.FLD_SIDE == 0)
                        {
                              goto Label_0186;
                        }
                        switch (int_128)
                        {
                              case 0x2faf080b:
                              case 0x2faf080c:
                              case 0x2faf080d:
                              case 0x2faf0817:
                              case 0x2faf0818:
                              case 0x2faf0819:
                              case 0x2faf081a:
                              case 0x2faf081b:
                              case 0x2faf081c:
                              case 0x2faf081d:
                              case 0x2faf081e:
                              case 0x2faf0802:
                              case 0x2faf0801:
                                    break;

                              default:
                                    vat_pham_loai = base.NHAN_NHAN_VAT_ITEM_LOAI_HINH(int_128);
                                    goto Label_015C;
                        }
                        vat_pham_loai = base.method_108(int_128, int_131);
                        Label_015C:
                        if (vat_pham_loai != null)
                        {
                              int_129 = vat_pham_loai.VAT_PHAM_VI_TRI;
                              dBItmeId = BitConverter.ToInt64(vat_pham_loai.Item_toan_bo_ID, 0);
                              int_130 = BitConverter.ToInt32(vat_pham_loai.VAT_PHAM_SO_LUONG, 0) + int_130;
                        }
                        goto Label_0189;
                        Label_0186:
                        int_130 = 1;
                        Label_0189:
                        Buffer.BlockCopy(BitConverter.GetBytes(dBItmeId), 0, buffer3, 0, 8);
                        Buffer.BlockCopy(BitConverter.GetBytes(int_128), 0, buffer3, 8, 4);
                        Buffer.BlockCopy(BitConverter.GetBytes(int_130), 0, buffer3, 12, 4);
                        Buffer.BlockCopy(dst, 0, buffer3, 0x10, dst.Length);
                        Buffer.BlockCopy(BitConverter.GetBytes(int_129), 0, buffer2, 40, 2);
                        Buffer.BlockCopy(buffer3, 0, buffer2, 15, 12);
                        Buffer.BlockCopy(buffer3, 12, buffer2, 0x1f, 4);
                        Buffer.BlockCopy(buffer3, 0x10, buffer2, 0x2f, dst.Length);
                        if (int_139 == 1)
                        {
                              Buffer.BlockCopy(BitConverter.GetBytes(1), 0, buffer3, 0x48, 1);
                              Buffer.BlockCopy(BitConverter.GetBytes((int)(int_128 + 0x4e20)), 0, buffer2, 0x17, 4);
                        }
                        if (tbl_xwwl_item.FLD_CJL != 0)
                        {
                              if (tbl_xwwl_item.FLD_CJL > 0x3e8)
                              {
                                    tbl_xwwl_item.FLD_CJL = 0x3e8;
                              }
                              Buffer.BlockCopy(BitConverter.GetBytes(tbl_xwwl_item.FLD_CJL), 0, buffer3, 60, 2);
                              Buffer.BlockCopy(BitConverter.GetBytes(tbl_xwwl_item.FLD_CJL), 0, buffer2, 0x5b, 2);
                        }
                        base.TRANG_BI_LAN_BAO_VAY[int_129].Item_byte = buffer3;
                        Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, buffer2, 5, 2);
                        if (base.Client != null)
                        {
                              base.Client.Send(buffer2, buffer2.Length);
                        }
                  }
                  catch (Exception exception)
                  {
                        Form1.WriteLine(1, string.Concat(new object[] { "TANG_CUONG_VAT_PHAM出错1 [", base.Userid, "][", base.UserName, "] VI_TRI[", int_129, "] 数量[", int_130, "]", exception.Message }));
                  }
            }

            public void TANG_CUONG_VAT_PHAM_NONE_THUOC_TINH(byte[] byte_5, byte[] byte_6, int int_128, byte[] byte_7)
            {
                  try
                  {
                        TBL_XWWL_ITEM tbl_xwwl_item;
                        if (World.Itme.TryGetValue(BitConverter.ToInt32(byte_6, 0), out tbl_xwwl_item))
                        {
                              byte[] dst = Converter.hexStringToByte("AA556B0001940223005C00010000008716E567818320060208AF2F000000000100000000000000010F020F00020000470D030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000C3E755AA");
                              byte[] buffer2 = new byte[0x49];
                              if (tbl_xwwl_item.FLD_SIDE != 0)
                              {
                                    VAT_PHAM_LOAI vat_pham_loai = base.NHAN_NHAN_VAT_ITEM_LOAI_HINH(BitConverter.ToInt32(byte_6, 0));
                                    if (vat_pham_loai != null)
                                    {
                                          int_128 = vat_pham_loai.VAT_PHAM_VI_TRI;
                                          byte_5 = vat_pham_loai.Item_toan_bo_ID;
                                          byte_7 = BitConverter.GetBytes((int)(BitConverter.ToInt32(vat_pham_loai.VAT_PHAM_SO_LUONG, 0) + BitConverter.ToInt32(byte_7, 0)));
                                    }
                              }
                              else
                              {
                                    byte_7 = BitConverter.GetBytes(1);
                              }
                              Buffer.BlockCopy(byte_5, 0, buffer2, 0, 8);
                              Buffer.BlockCopy(byte_6, 0, buffer2, 8, 4);
                              Buffer.BlockCopy(byte_7, 0, buffer2, 12, 4);
                              Buffer.BlockCopy(BitConverter.GetBytes(int_128), 0, dst, 40, 2);
                              Buffer.BlockCopy(buffer2, 0, dst, 15, 12);
                              Buffer.BlockCopy(buffer2, 12, dst, 0x1f, 4);
                              if ((tbl_xwwl_item.FLD_CJL != 0) && (tbl_xwwl_item.FLD_CJL == 0x3e8))
                              {
                                    Buffer.BlockCopy(BitConverter.GetBytes(0), 0, buffer2, 60, 2);
                                    Buffer.BlockCopy(BitConverter.GetBytes(0), 0, dst, 0x5b, 2);
                              }
                              base.TRANG_BI_LAN_BAO_VAY[int_128].Item_byte = buffer2;
                              Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, dst, 5, 2);
                              if (base.Client != null)
                              {
                                    base.Client.Send(dst, dst.Length);
                              }
                        }
                  }
                  catch (Exception exception)
                  {
                        Form1.WriteLine(1, string.Concat(new object[] { "TANG_CUONG_VAT_PHAM_NONE_THUOC_TINH [", base.Userid, "][", base.UserName, "] VI_TRI[", int_128, "] 数量[", BitConverter.ToInt32(byte_7, 0), "]", exception.Message }));
                  }
            }

            public void TAO_BANG_PHAI(byte[] byte_5, int int_128)
            {
                  try
                  {
                        byte[] buffer;
                        this.Packet_Modify(byte_5, int_128);
                        byte[] dst = Converter.hexStringToByte("AA552100010000E6001200310000000000000000000000000000000100000000000000000055AA");
                        byte[] bytes = new byte[15];
                        for (int i = 0; i < 15; i++)
                        {
                              if (byte_5[11 + i] == 0)
                              {
                                    break;
                              }
                              bytes[i] = byte_5[11 + i];
                        }
                        string s = Encoding.Default.GetString(bytes).Replace("\0", "");
                        if (base.Player_FLD_LEVEL < World.Dang_ky_mon_phai_can_Dang_cap)
                        {
                              base.GameMessage("Your level is not enough" + World.Dang_ky_mon_phai_can_Dang_cap + "Level, you can not create sects", 9, "system hint");
                              return;
                        }
                        if (base.Player_Money < World.Dang_ky_mon_phai_can_tien_bac)
                        {
                              base.GameMessage("Your medal is not enough" + World.Dang_ky_mon_phai_can_tien_bac + "You can not create sects", 9, "system hint");
                              return;
                        }
                        int num = 0;
                        bool flag = false;
                        if (World.Dang_ky_mon_phai_can_thiet_Item_ID == "")
                        {
                              goto Label_0151;
                        }
                        int index = 0;
                        while (index < 0x24)
                        {
                              if (BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_ID, 0) == int.Parse(World.Dang_ky_mon_phai_can_thiet_Item_ID))
                              {
                                    goto Label_0116;
                              }
                              index++;
                        }
                        goto Label_011D;
                        Label_0116:
                        num = index;
                        flag = true;
                        Label_011D:
                        if (!flag)
                        {
                              base.GameMessage("You do not create sects Req " + TBL_XWWL_ITEM.smethod_1(int.Parse(World.Dang_ky_mon_phai_can_thiet_Item_ID)) + " , You can not create sects", 9, "system hint");
                              return;
                        }
                        Label_0151:
                        buffer = Encoding.Default.GetBytes(s);
                        Buffer.BlockCopy(buffer, 0, dst, 11, buffer.Length);
                        int num3 = RxjhClass.EXE_XWWL_INT_Guild_DATA_New(base.UserName, s, base.Player_FLD_LEVEL);
                        switch (num3)
                        {
                              case 1:
                                    Buffer.BlockCopy(BitConverter.GetBytes(1), 0, dst, 0x1b, 1);
                                    break;

                              case 2:
                                    base.GameMessage("Data error, please re-enter", 9, "system hint");
                                    Buffer.BlockCopy(BitConverter.GetBytes(1), 0, dst, 0x1b, 1);
                                    break;

                              default:
                                    if (num3 == 0)
                                    {
                                          base.Player_Money -= World.Dang_ky_mon_phai_can_tien_bac;
                                          if (flag)
                                          {
                                                this.LAM_GIAM_DI_VAT_PHAM(num, 1);
                                          }
                                          base.UpdateMoneyAndWeight();
                                          base.DOC_SO_LIEU_BANG_PHAI();
                                          base.LAN_DAU_DOI_THOAI_DA_TRANG_BI_VAT_PHAM();
                                          Buffer.BlockCopy(BitConverter.GetBytes(0x63), 0, dst, 0x1b, 1);
                                    }
                                    break;
                        }
                        Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, dst, 5, 2);
                        if (base.Client != null)
                        {
                              base.Client.Send(dst, dst.Length);
                        }
                        this.KIEM_TRA_BANG_PHAI();
                  }
                  catch (Exception exception)
                  {
                        Form1.WriteLine(1, "Create martial Error![" + base.Userid + "]-[" + base.UserName + "]" + exception.Message);
                  }
            }

            public void TeamLootManagement(byte[] byte_5, int int_128)
            {
                  this.Packet_Modify(byte_5, int_128);
                  int num = BitConverter.ToInt16(byte_5, 5);
                  int num2 = BitConverter.ToInt16(byte_5, 11);
                  if (base.Get_char_data(num) != null)
                  {
                        TO_DOI_CLASS to_doi_class;
                        PacketData data = new PacketData();
                        data.Write2(1);
                        data.Write2(num2);
                        if (World.W_TO_DOI.TryGetValue(base.TO_DOI_ID, out to_doi_class))
                        {
                              foreach (Players players in to_doi_class.dictionary_0.Values)
                              {
                                    to_doi_class.int_2 = num2;
                                    if (players.Client != null)
                                    {
                                          players.Client.method_4(data, 0x2b00, players.UserSessionID);
                                    }
                              }
                        }
                  }
            }

            #region 관문 맵이동
            public void Teleport(byte[] byte_5, int int_128)
            {
                  byte[] dst = new byte[4];
                  Buffer.BlockCopy(byte_5, 0x1b, dst, 0, 4);
                  int num = BitConverter.ToInt32(dst, 0);
                  Form1.WriteLine(0, "텔레포트 NO: [" + string.Format("0x{0:X}", num) + "]");
                  switch (num)
                  {
                        case 1:
                              this.Move(0f, -80f, 15f, base.CharacterCoords_Map - 1);
                              return;

                        case 2:
                              this.Move(0f, 80f, 15f, base.CharacterCoords_Map + 1);
                              return;

                        default:
                              {
                                    using (List<TBL_XWWL_VOME>.Enumerator enumerator = World.list_13.GetEnumerator())
                                    {
                                          TBL_XWWL_VOME current;
                                          while (enumerator.MoveNext())
                                          {
                                                current = enumerator.Current;
                                                if ((current.MAP == base.CharacterCoords_Map) && (current.ToMAP == num))
                                                {
                                                      float num2 = current.Y - base.CharacterCoords_Y;
                                                      float single1 = current.X - base.CharacterCoords_X;
                                                      if (((int)Math.Sqrt((double)((single1 * single1) + (num2 * num2)))) <= 200f)
                                                      {
                                                            goto Label_00CA;
                                                      }
                                                }
                                          }
                                          break;
                                          Label_00CA:
                                          this.Move(current.ToX, current.ToY, current.ToZ, current.ToMAP);
                                          return;
                                    }
                              }
                  }
                  Form1.WriteLine(2, string.Concat(new object[] { "传送点移动 ", base.Userid, " ", base.UserName, "  ", base.CharacterCoords_X, "  ", base.CharacterCoords_Y, " ", base.CharacterCoords_Map, " ", num }));
            }
            #endregion

            public void TEN_HINH_THUC(byte[] byte_5, int int_128)
            {
                  try
                  {
                        byte[] dst = new byte[4];
                        byte[] buffer2 = new byte[4];
                        byte[] buffer3 = new byte[4];
                        byte[] buffer4 = new byte[4];
                        byte[] buffer5 = new byte[4];
                        byte[] buffer6 = new byte[4];
                        Buffer.BlockCopy(byte_5, 11, dst, 0, 4);
                        Buffer.BlockCopy(byte_5, 15, buffer3, 0, 4);
                        Buffer.BlockCopy(byte_5, 0x13, buffer4, 0, 4);
                        Buffer.BlockCopy(byte_5, 0x1b, buffer2, 0, 4);
                        Buffer.BlockCopy(byte_5, 0x1f, buffer5, 0, 4);
                        Buffer.BlockCopy(byte_5, 0x23, buffer6, 0, 4);
                        if (BitConverter.ToInt32(dst, 0) == 0)
                        {
                              if (BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[BitConverter.ToInt32(buffer3, 0)].VAT_PHAM_ID, 0) != 0x3c14dcbd)
                              {
                                    return;
                              }
                        }
                        else if (BitConverter.ToInt32(dst, 0) == 1)
                        {
                              if (BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[BitConverter.ToInt32(buffer3, 0)].VAT_PHAM_ID, 0) != 0x3c14dcbf)
                              {
                                    return;
                              }
                        }
                        else if ((BitConverter.ToInt32(dst, 0) == 2) && (BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[BitConverter.ToInt32(buffer3, 0)].VAT_PHAM_ID, 0) != 0x3c14dcc0))
                        {
                              return;
                        }
                        Buffer.BlockCopy(dst, 0, base.NHAN_VAT_TEN_MAU, 0x10 * BitConverter.ToInt32(dst, 0), 4);
                        Buffer.BlockCopy(buffer2, 0, base.NHAN_VAT_TEN_MAU, (0x10 * BitConverter.ToInt32(dst, 0)) + 4, 4);
                        Buffer.BlockCopy(buffer5, 0, base.NHAN_VAT_TEN_MAU, (0x10 * BitConverter.ToInt32(dst, 0)) + 8, 4);
                        Buffer.BlockCopy(buffer6, 0, base.NHAN_VAT_TEN_MAU, (0x10 * BitConverter.ToInt32(dst, 0)) + 12, 4);
                        byte[] buffer7 = Converter.hexStringToByte("AA552100006000721710000000000003000000CCCCFFFFFF5000FF0000000000000000000055AA");
                        Buffer.BlockCopy(dst, 0, buffer7, 11, 4);
                        Buffer.BlockCopy(buffer2, 0, buffer7, 15, 4);
                        Buffer.BlockCopy(buffer5, 0, buffer7, 0x13, 4);
                        Buffer.BlockCopy(buffer6, 0, buffer7, 0x17, 4);
                        Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, buffer7, 5, 2);
                        if (base.Client != null)
                        {
                              base.Client.method_8(buffer7, buffer7.Length);
                        }
                        this.SendRangeOfPackets(buffer7, buffer7.Length);
                        this.LAM_GIAM_DI_VAT_PHAM(BitConverter.ToInt32(buffer3, 0), 1);
                  }
                  catch (Exception exception)
                  {
                        Form1.WriteLine(1, "Name Style! Error[" + base.Userid + "]-[" + base.Client.ToString() + "]" + exception.Message);
                  }
            }

            public void TEN_LINH_THU_GOI_PAK(byte[] byte_5, int int_128)
            {
                  try
                  {
                        this.Packet_Modify(byte_5, int_128);
                        byte[] bytes = new byte[20];
                        for (int i = 0; i < 20; i++)
                        {
                              if (byte_5[15 + i] == 0)
                              {
                                    break;
                              }
                              bytes[i] = byte_5[15 + i];
                        }
                        string str = Encoding.Default.GetString(bytes).Replace("\0", "");
                        if (str.Length > 20)
                        {
                              this.Method_SpPetMsg(3);
                              base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[14].bool_0 = false;
                        }
                        else if (RxjhClass.SELECT_TBL_XWWL_Cw(str, base.UserName, this.int_120, this.long_16) == 1)
                        {
                              this.TRIEU_HOI_LINH_THU(byte_5, int_128);
                        }
                        else
                        {
                              this.Method_SpPetMsg(5);
                              base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[14].bool_0 = false;
                        }
                  }
                  catch (Exception exception)
                  {
                        Form1.WriteLine(1, string.Concat(new object[] { "Error connecting landing[", base.UserSessionID, "]-[", base.Client.ToString(), "]", exception.Message }));
                  }
            }

            public void THANG_CHUC1()
            {
                  try
                  {
                        if ((base.Player_FLD_JOB_LEVEL >= 1) || (base.Player_FLD_LEVEL < 10))
                        {
                              base.GameMessage("Khong dung yeu cau de thang chuc !!", 9, "Tip");
                        }
                        else
                        {
                              base.Player_Money += 0x186a0L;
                              base.UpdateMoneyAndWeight();
                              this.NHAN_VAT_CHUYEN_NGHE_NGHIEP(0, 1);
                              this.UpdateHP_MP_SP();
                        }
                  }
                  catch
                  {
                  }
            }

            public void THANG_CHUC1_HBQ_DHL()
            {
                  try
                  {
                        if ((base.Player_FLD_JOB_LEVEL >= 1) || (base.Player_FLD_LEVEL < 10))
                        {
                              this.NHAN_VAT_CHUYEN_NGHE_NGHIEP(0, 1);
                              this.UpdateHP_MP_SP();
                              base.Player_Money += 0x186a0L;
                              base.UpdateMoneyAndWeight();
                        }
                  }
                  catch
                  {
                  }
            }

            public void THANG_CHUC2_CHINH_PHAI()
            {
                  try
                  {
                        if ((base.Player_FLD_JOB_LEVEL < 1) || (base.Player_FLD_LEVEL < 0x23))
                        {
                              base.GameMessage("Ban chua thang chuc lan 1 hoac dang cap khong du 35", 9, "Tip");
                        }
                        else if (base.Player_FLD_JOB_LEVEL >= 2)
                        {
                              base.GameMessage("Nhan vat da thang chuc roi khong the thang chuc lai  !!", 9, "Tip");
                        }
                        else
                        {
                              base.Player_Money += 0x2dc6c0L;
                              base.UpdateMoneyAndWeight();
                              this.NHAN_VAT_CHUYEN_NGHE_NGHIEP(1, 2);
                              this.UpdateHP_MP_SP();
                        }
                  }
                  catch
                  {
                  }
            }

            public void THANG_CHUC2_HBQ_DHL_CP()
            {
                  try
                  {
                        if (base.Player_FLD_LEVEL >= 0x23)
                        {
                              this.NHAN_VAT_CHUYEN_NGHE_NGHIEP(1, 2);
                              this.UpdateHP_MP_SP();
                              base.Player_Money += 0x2dc6c0L;
                              base.UpdateMoneyAndWeight();
                        }
                  }
                  catch
                  {
                  }
            }

            public void THANG_CHUC2_HBQ_DHL_TP()
            {
                  try
                  {
                        if (base.Player_FLD_LEVEL >= 0x23)
                        {
                              this.NHAN_VAT_CHUYEN_NGHE_NGHIEP(2, 2);
                              this.UpdateHP_MP_SP();
                              base.Player_Money += 0x2dc6c0L;
                              base.UpdateMoneyAndWeight();
                        }
                  }
                  catch
                  {
                  }
            }

            public void THANG_CHUC2_TA_PHAI()
            {
                  try
                  {
                        if ((base.Player_FLD_JOB_LEVEL < 1) || (base.Player_FLD_LEVEL < 0x23))
                        {
                              base.GameMessage("Ban chua thang chuc lan 1 hoac dang cap khong du 35", 9, "Tip");
                        }
                        else if (base.Player_FLD_JOB_LEVEL >= 2)
                        {
                              base.GameMessage("Nhan vat da thang chuc roi khong the thang chuc lai  !!", 9, "Tip");
                        }
                        else
                        {
                              base.Player_Money += 0x2dc6c0L;
                              base.UpdateMoneyAndWeight();
                              this.NHAN_VAT_CHUYEN_NGHE_NGHIEP(2, 2);
                              this.UpdateHP_MP_SP();
                        }
                  }
                  catch
                  {
                  }
            }

            public void THANG_CHUC3()
            {
                  try
                  {
                        if ((base.Player_FLD_JOB_LEVEL < 2) || (base.Player_FLD_LEVEL < 60))
                        {
                              base.GameMessage("Ban chua thang chuc lan 2 hoac dang cap khong du 60", 9, "Tip");
                        }
                        else if (base.Player_FLD_JOB_LEVEL >= 3)
                        {
                              base.GameMessage("Nhan vat da thang chuc roi khong the thang chuc lai  !!", 9, "Tip");
                        }
                        else
                        {
                              base.Player_Money += 0x4c4b40L;
                              base.UpdateMoneyAndWeight();
                              this.NHAN_VAT_CHUYEN_NGHE_NGHIEP(base.Player_Zx, 3);
                              this.UpdateHP_MP_SP();
                        }
                  }
                  catch
                  {
                  }
            }

            public void THANG_CHUC3_HBQ_DHL()
            {
                  try
                  {
                        if ((base.Player_Job == 8) && (base.Player_FLD_LEVEL >= 60))
                        {
                              this.method_412(0, 0x12);
                              this.NHAN_VAT_CHUYEN_NGHE_NGHIEP(base.Player_Zx, 3);
                              this.UpdateHP_MP_SP();
                              base.Player_Money += 0x4c4b40L;
                              base.UpdateMoneyAndWeight();
                        }
                        else if ((base.Player_Job == 9) && (base.Player_FLD_LEVEL >= 60))
                        {
                              this.NHAN_VAT_CHUYEN_NGHE_NGHIEP(base.Player_Zx, 3);
                              this.UpdateHP_MP_SP();
                              base.Player_Money += 0x4c4b40L;
                              base.UpdateMoneyAndWeight();
                        }
                  }
                  catch
                  {
                  }
            }

            public void THANG_CHUC4()
            {
                  try
                  {
                        if ((base.Player_FLD_JOB_LEVEL < 3) || (base.Player_FLD_LEVEL < 80))
                        {
                              base.GameMessage("Ban chua thang chuc lan 3 hoac dang cap khong du 80", 9, "Tip");
                        }
                        else if (base.Player_FLD_JOB_LEVEL >= 4)
                        {
                              base.GameMessage("Nhan vat da thang chuc roi khong the thang chuc lai  !!", 9, "Tip");
                        }
                        else
                        {
                              base.Player_Money += 0x989680L;
                              base.UpdateMoneyAndWeight();
                              this.NHAN_VAT_CHUYEN_NGHE_NGHIEP(base.Player_Zx, 4);
                              this.UpdateHP_MP_SP();
                        }
                  }
                  catch
                  {
                  }
            }

            public void THANG_CHUC4_HBQ_DHL()
            {
                  try
                  {
                        if (base.Player_FLD_LEVEL >= 80)
                        {
                              this.NHAN_VAT_CHUYEN_NGHE_NGHIEP(base.Player_Zx, 4);
                              this.UpdateHP_MP_SP();
                              base.Player_Money += 0x989680L;
                              base.UpdateMoneyAndWeight();
                        }
                  }
                  catch
                  {
                  }
            }

            public void THANG_CHUC5()
            {
                  try
                  {
                        if ((base.Player_FLD_JOB_LEVEL < 4) || (base.Player_FLD_LEVEL < 100))
                        {
                              base.GameMessage("Ban chua thang chuc lan 4 hoac dang cap khong du 100", 9, "Tip");
                        }
                        else if (base.Player_FLD_JOB_LEVEL >= 5)
                        {
                              base.GameMessage("Nhan vat da thang chuc roi khong the thang chuc lai  !!", 9, "Tip");
                        }
                        else
                        {
                              base.Player_Money += 0xe4e1c0L;
                              base.UpdateMoneyAndWeight();
                              this.NHAN_VAT_CHUYEN_NGHE_NGHIEP(base.Player_Zx, 5);
                              this.UpdateHP_MP_SP();
                        }
                  }
                  catch
                  {
                  }
            }

            public void THANG_CHUC5_HBQ_DHL()
            {
                  try
                  {
                        if (base.Player_FLD_LEVEL >= 100)
                        {
                              this.NHAN_VAT_CHUYEN_NGHE_NGHIEP(base.Player_Zx, 5);
                              this.UpdateHP_MP_SP();
                              base.Player_Money += 0xe4e1c0L;
                              base.UpdateMoneyAndWeight();
                        }
                  }
                  catch
                  {
                  }
            }

            public void THANG_CHUC6()
            {
                  try
                  {
                        if (base.Player_FLD_JOB_LEVEL >= 6)
                        {
                              base.GameMessage("Nhan vat da thang chuc roi khong the thang chuc lai", 9, "Tip");
                        }
                        else if ((base.Player_FLD_LEVEL >= 0x73) && (base.Player_FLD_JOB_LEVEL >= 5))
                        {
                              int num = base.DUOC_KIEN_HANG_RONG(this);
                              if (num == -1)
                              {
                                    base.GameMessage("Khong du vi tri con trong", 9, "Tip");
                              }
                              else
                              {
                                    this.AddSkillBook6(num);
                                    this.NHAN_VAT_CHUYEN_NGHE_NGHIEP(base.Player_Zx, 6);
                                    this.UpdateHP_MP_SP();
                                    base.Player_Money += 0x5f5e100L;
                                    base.UpdateMoneyAndWeight();
                              }
                        }
                        else
                        {
                              base.GameMessage("Nhan vat phai dat level tren 115 va da thang chuc lan 5 moi co the thang chuc 6", 9, "Tip");
                        }
                  }
                  catch
                  {
                  }
            }

            public void THANG_CHUC6_HBQ_DHL()
            {
                  try
                  {
                        if ((base.Player_Job == 8) && (base.Player_FLD_LEVEL >= 0x73))
                        {
                              this.method_412(3, 1);
                              this.method_412(3, 0x11);
                              this.method_412(3, 0x12);
                              this.method_412(3, 0x13);
                              this.NHAN_VAT_CHUYEN_NGHE_NGHIEP(base.Player_Zx, 6);
                              base.Player_Money += 0x5f5e100L;
                              this.UpdateHP_MP_SP();
                              base.UpdatePowersAndStatus();
                              base.UpdateMoneyAndWeight();
                              base.UpdateExperience();
                        }
                        else if ((base.Player_Job == 9) && (base.Player_FLD_LEVEL >= 0x73))
                        {
                              this.method_412(3, 1);
                              this.NHAN_VAT_CHUYEN_NGHE_NGHIEP(base.Player_Zx, 6);
                              base.Player_Money += 0x5f5e100L;
                              this.UpdateHP_MP_SP();
                              base.UpdatePowersAndStatus();
                              base.UpdateMoneyAndWeight();
                              base.UpdateExperience();
                        }
                  }
                  catch
                  {
                  }
            }

            public void THANG_CHUC7()
            {
                  try
                  {
                        if (base.Player_FLD_JOB_LEVEL >= 7)
                        {
                              base.GameMessage("Nhan vat da thang chuc roi khong the thang chuc lai", 9, "Tip");
                        }
                        else if ((base.Player_FLD_LEVEL >= 120) && (base.Player_FLD_JOB_LEVEL >= 6))
                        {
                              int num = base.DUOC_KIEN_HANG_RONG(this);
                              if (num == -1)
                              {
                                    base.GameMessage("Khong du vi tri con trong", 9, "Tip");
                              }
                              else
                              {
                                    this.AddSkillBook7(num);
                                    this.NHAN_VAT_CHUYEN_NGHE_NGHIEP(base.Player_Zx, 7);
                                    this.UpdateHP_MP_SP();
                                    base.Player_Money += 0xbebc200L;
                                    base.UpdateMoneyAndWeight();
                              }
                        }
                        else
                        {
                              base.GameMessage("Nhan vat phai dat level tren 120 va da thang chuc lan 6 moi co the thang chuc 7", 9, "Tip");
                        }
                  }
                  catch
                  {
                  }
            }

            public void THANG_CHUC7_HBQ_DHL()
            {
                  try
                  {
                        if (base.Player_FLD_LEVEL >= 120)
                        {
                              this.method_412(3, 5);
                              this.NHAN_VAT_CHUYEN_NGHE_NGHIEP(base.Player_Zx, 7);
                              base.Player_Money += 0xbebc200L;
                              this.UpdateHP_MP_SP();
                              base.UpdatePowersAndStatus();
                              base.UpdateMoneyAndWeight();
                              base.UpdateExperience();
                        }
                  }
                  catch
                  {
                  }
            }

            public void THANG_CHUC8()
            {
                  try
                  {
                        if (base.Player_FLD_JOB_LEVEL >= 8)
                        {
                              base.GameMessage("Nhan vat da thang chuc roi khong the thang chuc lai", 9, "Tip");
                        }
                        else if ((base.Player_FLD_LEVEL >= 130) && (base.Player_FLD_JOB_LEVEL >= 7))
                        {
                              int num = base.DUOC_KIEN_HANG_RONG(this);
                              if (num == -1)
                              {
                                    base.GameMessage("Khong du vi tri con trong", 9, "Tip");
                              }
                              else
                              {
                                    this.AddSkillBook8(num);
                                    base.Player_Money += 0x11e1a300L;
                                    base.UpdateMoneyAndWeight();
                                    this.NHAN_VAT_CHUYEN_NGHE_NGHIEP(base.Player_Zx, 8);
                                    this.UpdateHP_MP_SP();
                              }
                        }
                        else
                        {
                              base.GameMessage("Nhan vat phai dat level tren 130 va da thang chuc lan 7 moi co the thang chuc 8", 9, "Tip");
                        }
                  }
                  catch
                  {
                  }
            }

            public void THANG_CHUC8_HBQ_DHL()
            {
                  try
                  {
                        if ((base.Player_Job == 8) && (base.Player_FLD_LEVEL >= 130))
                        {
                              this.NHAN_VAT_CHUYEN_NGHE_NGHIEP(base.Player_Zx, 8);
                              base.Player_Money += 0x11e1a300L;
                              this.UpdateHP_MP_SP();
                              base.UpdatePowersAndStatus();
                              base.UpdateMoneyAndWeight();
                              base.UpdateExperience();
                              this.method_412(3, 9);
                        }
                  }
                  catch
                  {
                  }
            }

            public void THANG_CHUC9()
            {
                  try
                  {
                        if (base.Player_FLD_JOB_LEVEL >= 9)
                        {
                              base.GameMessage("Nhan vat da thang chuc roi khong the thang chuc lai", 9, "Tip");
                        }
                        else if ((base.Player_FLD_LEVEL >= 140) && (base.Player_FLD_JOB_LEVEL >= 8))
                        {
                              int num = base.DUOC_KIEN_HANG_RONG(this);
                              if (num == -1)
                              {
                                    base.GameMessage("Khong du vi tri con trong", 9, "Tip");
                              }
                              else
                              {
                                    this.AddSkillBook9(num);
                                    base.Player_Money += 0x17d78400L;
                                    base.UpdateMoneyAndWeight();
                                    this.NHAN_VAT_CHUYEN_NGHE_NGHIEP(base.Player_Zx, 9);
                                    this.UpdateHP_MP_SP();
                              }
                        }
                        else
                        {
                              base.GameMessage("Nhan vat phai dat level tren 140 va da thang chuc lan 8 moi co the thang chuc 9", 9, "Tip");
                        }
                  }
                  catch
                  {
                  }
            }

            public void THANG_CHUC9_HBQ_DHL()
            {
                  try
                  {
                        if ((base.Player_Job == 8) && (base.Player_FLD_LEVEL >= 140))
                        {
                              this.method_412(3, 13);
                              this.NHAN_VAT_CHUYEN_NGHE_NGHIEP(base.Player_Zx, 9);
                              base.Player_Money += 0x17d78400L;
                              this.UpdateHP_MP_SP();
                              base.UpdatePowersAndStatus();
                              base.UpdateMoneyAndWeight();
                              base.UpdateExperience();
                        }
                        else if ((base.Player_Job == 9) && (base.Player_FLD_LEVEL >= 140))
                        {
                              this.method_412(3, 0x12);
                              this.method_412(3, 0x13);
                              this.NHAN_VAT_CHUYEN_NGHE_NGHIEP(base.Player_Zx, 9);
                              base.Player_Money += 0x17d78400L;
                              this.UpdateHP_MP_SP();
                              base.UpdatePowersAndStatus();
                              base.UpdateMoneyAndWeight();
                              base.UpdateExperience();
                        }
                  }
                  catch
                  {
                  }
            }

            public void THE_TU_GIUP_DO()
            {
                  DataTable dBToDataTable = DBA.GetDBToDataTable($"select * from [TBL_XWWL_Char] where FLD_ID='{base.Userid}'");
                  for (int i = 0; i < dBToDataTable.Rows.Count; i++)
                  {
                        string str = (string)dBToDataTable.Rows[i]["FLD_NAME"];
                        if (str != base.UserName)
                        {
                              DBA.ExeSqlCommand($"UPDATE TBL_XWWL_Char SET FLD_X = {World.Khu_an_toan_X_toa_do}, FLD_Y = {World.Khu_an_toan_Y_toa_do}, FLD_Z = 15, FLD_MENOW = {World.Khu_an_toan_ban_do} WHERE FLD_NAME = '{str}'");
                        }
                  }
                  base.GameMessage("Card has been successfully self-help, you can log card characters", 9, "[" + World.Self_help_command_card + "]");
            }

            public void THEM_VAT_PHAM_TANG_CUONG(byte[] byte_5, byte[] byte_6, int int_128, byte[] byte_7, byte[] byte_8)
            {
                  try
                  {
                        TBL_XWWL_ITEM tbl_xwwl_item;
                        if (World.Itme.TryGetValue(BitConverter.ToInt32(byte_6, 0), out tbl_xwwl_item))
                        {
                              byte[] dst = Converter.hexStringToByte("AA556B0001940223005C00010000008716E567818320060208AF2F000000000100000000000000010F020F00020000470D030000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000C3E755AA");
                              byte[] buffer2 = new byte[0x49];
                              if (tbl_xwwl_item.FLD_SIDE != 0)
                              {
                                    VAT_PHAM_LOAI vat_pham_loai = base.NHAN_NHAN_VAT_ITEM_LOAI_HINH(BitConverter.ToInt32(byte_6, 0));
                                    if (vat_pham_loai != null)
                                    {
                                          int_128 = vat_pham_loai.VAT_PHAM_VI_TRI;
                                          byte_5 = vat_pham_loai.Item_toan_bo_ID;
                                          byte_7 = BitConverter.GetBytes((int)(BitConverter.ToInt32(vat_pham_loai.VAT_PHAM_SO_LUONG, 0) + BitConverter.ToInt32(byte_7, 0)));
                                    }
                              }
                              else
                              {
                                    byte_7 = BitConverter.GetBytes(1);
                              }
                              Buffer.BlockCopy(byte_5, 0, buffer2, 0, 8);
                              Buffer.BlockCopy(byte_6, 0, buffer2, 8, 4);
                              Buffer.BlockCopy(byte_7, 0, buffer2, 12, 4);
                              Buffer.BlockCopy(byte_8, 0, buffer2, 0x10, byte_8.Length);
                              Buffer.BlockCopy(BitConverter.GetBytes(int_128), 0, dst, 40, 2);
                              Buffer.BlockCopy(buffer2, 0, dst, 15, 12);
                              Buffer.BlockCopy(buffer2, 12, dst, 0x1f, 4);
                              Buffer.BlockCopy(buffer2, 0x10, dst, 0x2f, byte_8.Length);
                              if ((tbl_xwwl_item.FLD_CJL != 0) && (tbl_xwwl_item.FLD_CJL == 0x3e8))
                              {
                                    Buffer.BlockCopy(BitConverter.GetBytes(tbl_xwwl_item.FLD_CJL), 0, buffer2, 60, 2);
                                    Buffer.BlockCopy(BitConverter.GetBytes(tbl_xwwl_item.FLD_CJL), 0, dst, 0x5b, 2);
                              }
                              base.TRANG_BI_LAN_BAO_VAY[int_128].Item_byte = buffer2;
                              Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, dst, 5, 2);
                              if (base.Client != null)
                              {
                                    base.Client.Send(dst, dst.Length);
                              }
                        }
                  }
                  catch (Exception exception)
                  {
                        Form1.WriteLine(1, string.Concat(new object[] { "TANG_CUONG_VAT_PHAM出错 [", base.Userid, "][", base.UserName, "] VI_TRI[", int_128, "] 数量[", BitConverter.ToInt32(byte_7, 0), "]", exception.Message }));
                  }
            }

            public bool THIET_LAP_DAM_HOA_LIEN_VU_KHI()
            {
                  if (base.Player_Job == 9)
                  {
                        if (base.NHAN_TUI_TRONG_SO_LUONG() < 2)
                        {
                              base.GameMessage("Backpack no vacancy, and transfer it quickly clean up again.", 9, "system hint");
                              return true;
                        }
                        if (base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].GetItem_ID == 0)
                        {
                              base.GameMessage("Please bring flowers Demon spirit sword weapons transfer.", 9, "system hint");
                              return true;
                        }
                        if (!base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].GetItem_ID.ToString().Contains("20020400"))
                        {
                              base.GameMessage("Please bring flowers Demon spirit sword weapons transfer.", 9, "system hint");
                              return true;
                        }
                        if ((base.Player_FLD_JOB_LEVEL == 0) && (base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].GetItem_ID != 0xbeedee1L))
                        {
                              base.GameMessage("Please bring seal Demon flower spirit sword weapons transfer.", 9, "system hint");
                              return true;
                        }
                        if ((base.Player_FLD_JOB_LEVEL == 1) && (base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].GetItem_ID != 0xbeedee2L))
                        {
                              base.GameMessage("Please take a turn Demon spirit sword weapons full flower.", 9, "system hint");
                              return true;
                        }
                        if ((base.Player_FLD_JOB_LEVEL == 2) && (base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].GetItem_ID != 0xbeedee3L))
                        {
                              base.GameMessage("Please take the second turn Demon spirit sword weapons full flower.", 9, "system hint");
                              return true;
                        }
                        if ((base.Player_FLD_JOB_LEVEL == 3) && (base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].GetItem_ID != 0xbeedee4L))
                        {
                              base.GameMessage("Please bring the spirit sword to switch weapons Demon spend full-time.", 9, "system hint");
                              return true;
                        }
                        if ((base.Player_FLD_JOB_LEVEL == 4) && (base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].GetItem_ID != 0xbeedee5L))
                        {
                              base.GameMessage("Please bring four turn Demon spirit sword weapons full flower.", 9, "system hint");
                              return true;
                        }
                        if ((base.Player_FLD_JOB_LEVEL == 5) && (base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].GetItem_ID != 0xbeedee6L))
                        {
                              base.GameMessage("Please bring five flowers turn Demon spirit sword weapons transfer.", 9, "system hint");
                              return true;
                        }
                        if ((base.Player_FLD_JOB_LEVEL == 6) && (base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].GetItem_ID != 0xbeedee7L))
                        {
                              base.GameMessage("Please bring six turn Demon spirit sword weapons full flower.", 9, "system hint");
                              return true;
                        }
                        if ((base.Player_FLD_JOB_LEVEL == 7) && (base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].GetItem_ID != 0xbeedee8L))
                        {
                              base.GameMessage("Please bring seven turn Demon spirit sword weapons full flower.", 9, "system hint");
                              return true;
                        }
                        if ((base.Player_FLD_JOB_LEVEL == 8) && (base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].GetItem_ID != 0xbeedee9L))
                        {
                              base.GameMessage("Please bring eight turn Demon spirit sword weapons full flower.", 9, "system hint");
                              return true;
                        }
                  }
                  return false;
            }

            public bool THIET_LAP_HAN_BAO_QUAN_VU_KHI()
            {
                  if (base.Player_Job == 8)
                  {
                        if (base.NHAN_TUI_TRONG_SO_LUONG() < 2)
                        {
                              base.GameMessage("Backpack no vacancy, and transfer it quickly clean up again.", 9, "system hint");
                              return true;
                        }
                        if (base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].GetItem_ID == 0)
                        {
                              base.GameMessage("Please bring the dragon blade weapons transfer。", 9, "system hint");
                              return true;
                        }
                        if (!base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].GetItem_ID.ToString().Contains("10020400"))
                        {
                              base.GameMessage("Please bring the dragon blade weapons transfer.", 9, "system hint");
                              return true;
                        }
                        if ((base.Player_FLD_JOB_LEVEL == 0) && (base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].GetItem_ID != 0x5f8fde1L))
                        {
                              base.GameMessage("Please bring seal dragon knife weapons transfer.", 9, "system hint");
                              return true;
                        }
                        if ((base.Player_FLD_JOB_LEVEL == 1) && (base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].GetItem_ID != 0x5f8fde2L))
                        {
                              base.GameMessage("Please bring a revolution dragon knife weapons transfer.", 9, "system hint");
                              return true;
                        }
                        if ((base.Player_FLD_JOB_LEVEL == 2) && (base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].GetItem_ID != 0x5f8fde3L))
                        {
                              base.GameMessage("Please take the second turn dragon knife weapons transfer.", 9, "system hint");
                              return true;
                        }
                        if ((base.Player_FLD_JOB_LEVEL == 3) && (base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].GetItem_ID != 0x5f8fde4L))
                        {
                              base.GameMessage("Please bring a knife to switch weapons transfer dragon.", 9, "system hint");
                              return true;
                        }
                        if ((base.Player_FLD_JOB_LEVEL == 4) && (base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].GetItem_ID != 0x5f8fde5L))
                        {
                              base.GameMessage("Please bring four turn dragon knife weapons transfer.", 9, "system hint");
                              return true;
                        }
                        if ((base.Player_FLD_JOB_LEVEL == 5) && (base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].GetItem_ID != 0x5f8fde6L))
                        {
                              base.GameMessage("Please bring five dragon knife switch weapons transfer.", 9, "system hint");
                              return true;
                        }
                        if ((base.Player_FLD_JOB_LEVEL == 6) && (base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].GetItem_ID != 0x5f8fde7L))
                        {
                              base.GameMessage("Please bring six turn dragon knife weapons transfer.", 9, "system hint");
                              return true;
                        }
                        if ((base.Player_FLD_JOB_LEVEL == 7) && (base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].GetItem_ID != 0x5f8fde8L))
                        {
                              base.GameMessage("Please turn bring seven dragon knife weapons transfer.", 9, "system hint");
                              return true;
                        }
                        if ((base.Player_FLD_JOB_LEVEL == 8) && (base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[3].GetItem_ID != 0x5f8fde9L))
                        {
                              base.GameMessage("Please bring eight dragon knife switch weapons transfer.", 9, "system hint");
                              return true;
                        }
                  }
                  return false;
            }

            //퀘스트 추가
            public void THIET_LAP_NHIEM_VU_SO_LIEU(int QuestId, int RwJdId)
            {
                  Form1.WriteLine(1, "THIET_LAP_NHIEM_VU_SO_LIEU Quest ADD Function");
                  NHIEM_VU_CLASS nhiem_vu_class;
                 
                  if (base.dictionary_2.TryGetValue(QuestId, out nhiem_vu_class))
                  {
                        Form1.WriteLine(1, "THIET_LAP_NHIEM_VU_SO_LIEU Quest ADD");
                        nhiem_vu_class.NHIEM_VU_GIAI_DOAN_ID = RwJdId;
                        if (RwJdId == 0)
                        {
                              base.dictionary_2.Remove(QuestId);
                              Form1.WriteLine(1, "THIET_LAP_NHIEM_VU_SO_LIEU Quest DELETE");
                        }
                  }
                  else
                  {
                        Form1.WriteLine(1, "THIET_LAP_NHIEM_VU_SO_LIEU Quest NEW ADD");
                        nhiem_vu_class = new NHIEM_VU_CLASS
                        {
                              NHIEM_VU_ID = QuestId,
                              NHIEM_VU_GIAI_DOAN_ID = RwJdId
                        };
                        if (!base.dictionary_2.ContainsKey(QuestId))
                        {
                              base.dictionary_2.Add(QuestId, nhiem_vu_class);
                        }
                  }                  
                 
                  //this.CAP_NHAT_NHAN_VAT_NHIEM_VU();
                  //Save_Char_data_Stored();
            }

            //퀘스트 아이템 인벤
            public void THIET_LAP_NHIEM_VU_VAT_PHAM(int int_128, int int_129)
            {
                  bool flag = false;
                  bool flag2 = false;
                  for (int i = 0; i < base.class22_0.Length; i++)
                  {
                        if (base.class22_0[i].VAT_PHAM_ID == int_128)
                        {
                              flag = true;
                              flag2 = true;
                              if (int_129 == 0)
                              {
                                    this.NHAN_ITEM_NHIEM_VU(i, base.class22_0[i].VAT_PHAM_ID, 0);
                                    base.class22_0[i].byte_0 = new byte[8];
                              }
                              else
                              {
                                    QuestItem_Category category1 = base.class22_0[i];
                                    category1.VAT_PHAM_SO_LUONG += int_129;
                                    this.NHAN_ITEM_NHIEM_VU(i, base.class22_0[i].VAT_PHAM_ID, base.class22_0[i].VAT_PHAM_SO_LUONG);
                              }
                              break;
                        }
                  }
                  if (!flag && (int_129 > 0))
                  {
                        for (int j = 0; j < base.class22_0.Length; j++)
                        {
                              if (base.class22_0[j].VAT_PHAM_ID == 0)
                              {
                                    base.class22_0[j].VAT_PHAM_ID = int_128;
                                    QuestItem_Category category2 = base.class22_0[j];
                                    category2.VAT_PHAM_SO_LUONG += int_129;
                                    this.NHAN_ITEM_NHIEM_VU(j, base.class22_0[j].VAT_PHAM_ID, base.class22_0[j].VAT_PHAM_SO_LUONG);
                                    flag2 = true;
                                    break;
                              }
                        }
                  }
                  if (!flag2)
                  {
                        base.GameMessage("Full task items can not continue.", 9, "system hint");
                  }
            }

            public void THIET_LAP_PHO_BAN_DO_KHO(byte[] byte_5, int int_128)
            {
                  this.Packet_Modify(byte_5, int_128);
                  int num = BitConverter.ToInt16(byte_5, 5);
                  int num2 = BitConverter.ToInt16(byte_5, 11);
                  if (base.Get_char_data(num) != null)
                  {
                        TO_DOI_CLASS to_doi_class;
                        PacketData data = new PacketData();
                        data.method_2(num2);
                        if (World.W_TO_DOI.TryGetValue(base.TO_DOI_ID, out to_doi_class))
                        {
                              foreach (Players players in to_doi_class.dictionary_0.Values)
                              {
                                    if (players.Client != null)
                                    {
                                          players.Client.method_4(data, 0x2219, players.UserSessionID);
                                    }
                              }
                        }
                  }
            }

            public void THOAT_KHOI_TO_DOI_NHAC_NHO(Players class15_0)
            {
                  byte[] dst = Converter.hexStringToByte("AA552600000A0037001700020001000B000000000000000000000000000000000000000000000000000055AA");
                  Buffer.BlockCopy(BitConverter.GetBytes(class15_0.UserSessionID), 0, dst, 15, 2);
                  byte[] bytes = Encoding.Default.GetBytes(class15_0.UserName);
                  Buffer.BlockCopy(bytes, 0, dst, 0x11, bytes.Length);
                  Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, dst, 5, 2);
                  if (base.Client != null)
                  {
                        base.Client.Send(dst, dst.Length);
                  }
            }

            private void TIEN_VAO_CUA_HANG_TAC_DUNG_GOI(int int_128, int int_129, int int_130, int int_131, byte[] byte_5, ThreadSafeDictionary<long, CA_NHAN_CUA_HANG_ITEM_LOAI> threadSafeDictionary_6)
            {
                  PacketData data = new PacketData();
                  data.method_2(int_128);
                  data.method_2(int_129);
                  data.Write4(int_130);
                  if (int_128 != int_129)
                  {
                        data.method_2(1);
                  }
                  if (byte_5 != null)
                  {
                        data.Write2(byte_5.Length);
                        data.method_10(byte_5, 0, byte_5.Length);
                        if (threadSafeDictionary_6 != null)
                        {
                              data.Write2(threadSafeDictionary_6.Count);
                              foreach (CA_NHAN_CUA_HANG_ITEM_LOAI ca_nhan_cua_hang_item_loai in threadSafeDictionary_6.Values)
                              {
                                    data.method_8(ca_nhan_cua_hang_item_loai.class23_0.GetItem_ID);
                                    data.method_8(ca_nhan_cua_hang_item_loai.class23_0.GetItem_toan_bo_ID);
                                    data.Write2(ca_nhan_cua_hang_item_loai.int_0);
                                    data.Write2(ca_nhan_cua_hang_item_loai.int_1);
                                    data.method_8(ca_nhan_cua_hang_item_loai.long_0);
                                    data.Write4(ca_nhan_cua_hang_item_loai.class23_0.FLD_MAGIC0);
                                    data.Write4(ca_nhan_cua_hang_item_loai.class23_0.FLD_MAGIC1);
                                    data.Write4(ca_nhan_cua_hang_item_loai.class23_0.FLD_MAGIC2);
                                    data.Write4(ca_nhan_cua_hang_item_loai.class23_0.FLD_MAGIC3);
                                    data.Write4(ca_nhan_cua_hang_item_loai.class23_0.FLD_MAGIC4);
                                    data.Write2(ca_nhan_cua_hang_item_loai.class23_0.FLD_FJ_MAGIC0);
                                    data.Write2(ca_nhan_cua_hang_item_loai.class23_0.FLD_FJ_MAGIC1);
                                    data.Write2(ca_nhan_cua_hang_item_loai.class23_0.FLD_FJ_trung_cap_phu_hon);
                                    data.Write2(ca_nhan_cua_hang_item_loai.class23_0.FLD_FJ_MAGIC2);
                                    data.Write2(ca_nhan_cua_hang_item_loai.class23_0.FLD_FJ_MAGIC3);
                                    data.Write2(ca_nhan_cua_hang_item_loai.class23_0.FLD_FJ_MAGIC4);
                                    data.Write2(ca_nhan_cua_hang_item_loai.class23_0.FLD_FJ_MAGIC5);
                                    data.Write2(0);
                                    data.Write4(ca_nhan_cua_hang_item_loai.class23_0.FLD_FJ_KSSJ);
                                    data.Write4(ca_nhan_cua_hang_item_loai.class23_0.FLD_FJ_JSSJ);
                                    if (ca_nhan_cua_hang_item_loai.class23_0.FLD_keo_dai_suc_manh != 0)
                                    {
                                          data.Write2(ca_nhan_cua_hang_item_loai.class23_0.FLD_keo_dai_suc_manh);
                                    }
                                    else
                                    {
                                          data.Write2(0);
                                    }
                                    data.Write4(ca_nhan_cua_hang_item_loai.class23_0.FLD_FJ_thuc_tinh + ca_nhan_cua_hang_item_loai.class23_0.Item_trung_cap_phu_hon_them_vao_thuc_tinh);
                                    data.Write2(0);
                                    data.Write2(ca_nhan_cua_hang_item_loai.class23_0.FLD_FJ_tien_hoa);
                                    data.Write2(0);
                                    data.Write4(0);
                                    data.Write4(0);
                              }
                        }
                  }
                  else if (int_128 == int_129)
                  {
                        data.Write4(int_131);
                  }
                  if (base.Client != null)
                  {
                        base.Client.method_4(data, 0xf1c, base.UserSessionID);
                  }
            }

            public void TIEP_NHAN_GIAO_DICH_THINH_CAU(int int_128, int int_129)
            {
                  try
                  {
                        byte[] dst = Converter.hexStringToByte("AA5543000000009800340001000000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010000000000000000000055AA");
                        Buffer.BlockCopy(BitConverter.GetBytes(int_129), 0, dst, 11, 4);
                        Buffer.BlockCopy(BitConverter.GetBytes(int_129), 0, dst, 15, 4);
                        byte[] bytes = Encoding.Default.GetBytes(base.class66_0.GIAO_DICH_CON_NGUOI.UserName);
                        Buffer.BlockCopy(bytes, 0, dst, 0x17, bytes.Length);
                        Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, dst, 5, 2);
                        Buffer.BlockCopy(BitConverter.GetBytes(base.class66_0.GIAO_DICH_CON_NGUOI.Player_Job), 0, dst, 60, 1);
                        Buffer.BlockCopy(BitConverter.GetBytes(base.class66_0.GIAO_DICH_CON_NGUOI.Player_FLD_JOB_LEVEL), 0, dst, 0x3d, 1);
                        Buffer.BlockCopy(BitConverter.GetBytes(base.class66_0.GIAO_DICH_CON_NGUOI.Player_Zx), 0, dst, 0x3e, 1);
                        if (base.Client != null)
                        {
                              base.Client.Send(dst, dst.Length);
                        }
                        if (base.class66_0.GIAO_DICH_CON_NGUOI.Client != null)
                        {
                              base.class66_0.bool_0 = true;
                              base.class66_0.GIAO_DICH_CON_NGUOI.class66_0.bool_0 = true;
                              base.OpenWarehouse = true;
                              base.class66_0.GIAO_DICH_CON_NGUOI.OpenWarehouse = true;
                              base.OpenWarehouse = true;
                              base.class66_0.GIAO_DICH_CON_NGUOI.OpenWarehouse = true;
                              byte[] src = Encoding.Default.GetBytes(base.UserName);
                              Buffer.BlockCopy(src, 0, dst, 0x17, src.Length);
                              Buffer.BlockCopy(BitConverter.GetBytes(base.class66_0.GIAO_DICH_CON_NGUOI.UserSessionID), 0, dst, 5, 2);
                              Buffer.BlockCopy(BitConverter.GetBytes(base.Player_Job), 0, dst, 60, 1);
                              Buffer.BlockCopy(BitConverter.GetBytes(base.Player_FLD_JOB_LEVEL), 0, dst, 0x3d, 1);
                              Buffer.BlockCopy(BitConverter.GetBytes(base.Player_Zx), 0, dst, 0x3e, 1);
                              if (base.class66_0.GIAO_DICH_CON_NGUOI.Client != null)
                              {
                                    base.class66_0.GIAO_DICH_CON_NGUOI.Client.Send(dst, dst.Length);
                              }
                        }
                  }
                  catch (Exception exception)
                  {
                        Form1.WriteLine(1, string.Concat(new object[] { "接受交易请求出错 [", base.Userid, "][", base.UserName, "][", base.Client.ToString(), "] ", exception }));
                  }
            }

            public void TINH_NHAN_HE_THONG(byte[] byte_5, int int_128)
            {
                  try
                  {
                        int num;
                        byte[] bytes = new byte[0x10];
                        for (int i = 0; i < 0x10; i++)
                        {
                              if (byte_5[0x4f + i] == 0)
                              {
                                    break;
                              }
                              bytes[i] = byte_5[0x4f + i];
                        }
                        string str = Encoding.Default.GetString(bytes).Replace("\0", "").Trim();
                        byte[] buffer2 = new byte[15];
                        for (int j = 0; j < 15; j++)
                        {
                              if (byte_5[0x22 + j] == 0)
                              {
                                    break;
                              }
                              buffer2[j] = byte_5[0x22 + j];
                        }
                        string str2 = Encoding.Default.GetString(buffer2).Replace("\0", "").Trim();
                        buffer2 = new byte[15];
                        for (int k = 0; k < 15; k++)
                        {
                              if (byte_5[0x13 + k] == 0)
                              {
                                    break;
                              }
                              buffer2[k] = byte_5[0x13 + k];
                        }
                        string str3 = Encoding.Default.GetString(buffer2).Replace("\0", "").Trim();
                        byte[] dst = new byte[4];
                        Buffer.BlockCopy(byte_5, 0x33, dst, 0, 2);
                        byte[] buffer4 = new byte[4];
                        Buffer.BlockCopy(byte_5, 0x37, buffer4, 0, 4);
                        int num2 = byte_5[11];
                        int num3 = byte_5[15];
                        switch (num2)
                        {
                              case 1:
                                    if (base.FLD_TINH_NHAN != "")
                                    {
                                          this.TINH_NHAN_NHAC_NHO(0x10, str3, str2);
                                    }
                                    else
                                    {
                                          Players players4 = World.smethod_2(str2);
                                          if (players4 == null)
                                          {
                                                break;
                                          }
                                          if (players4.FLD_TINH_NHAN != "")
                                          {
                                                this.TINH_NHAN_NHAC_NHO(0x10, str3, str2);
                                          }
                                          else if (players4.Player_Sex == base.Player_Sex)
                                          {
                                                this.TINH_NHAN_NHAC_NHO(0x18, str3, str2);
                                          }
                                          else
                                          {
                                                this.TINH_NHAN_NHAC_NHO(6, str3, str2);
                                                players4.TINH_NHAN_THINH_CAU_KET_HON(1, str3, str2);
                                          }
                                    }
                                    return;

                              case 3:
                                    {
                                          Players players5 = World.smethod_2(str2);
                                          if (players5 != null)
                                          {
                                                if (base.FLD_TINH_NHAN == players5.UserName)
                                                {
                                                      players5.TINH_NHAN_PACKET(3, str3, str2, BitConverter.ToInt32(buffer4, 0));
                                                }
                                          }
                                          else
                                          {
                                                this.TINH_NHAN_NHAC_NHO(0x12, str3, str2);
                                          }
                                          return;
                                    }
                              default:
                                    goto Label_0213;
                        }
                        this.TINH_NHAN_NHAC_NHO(0x12, str3, str2);
                        return;
                        Label_0213:
                        if (num2 != 8)
                        {
                              goto Label_043A;
                        }
                        Players players = World.smethod_2(str3);
                        if (num3 == 8)
                        {
                              if (players != null)
                              {
                                    if (base.FLD_TINH_NHAN == players.UserName)
                                    {
                                          players.TINH_NHAN_NHAC_NHO(8, str3, str2);
                                    }
                              }
                              else
                              {
                                    this.TINH_NHAN_NHAC_NHO(0x12, str3, str2);
                              }
                              return;
                        }
                        if (num3 != 7)
                        {
                              return;
                        }
                        bool flag = false;
                        if (players == null)
                        {
                              goto Label_0429;
                        }
                        switch (BitConverter.ToInt32(buffer4, 0))
                        {
                              case 0x3b9acd7b:
                              case 0x3b9acd7c:
                              case 0x3b9acd7d:
                                    if ((base.Add_Status_List.ContainsKey(0x3b9acd7b) || base.Add_Status_List.ContainsKey(0x3b9acd7c)) || base.Add_Status_List.ContainsKey(0x3b9acd7d))
                                    {
                                          goto Label_0418;
                                    }
                                    num = 0;
                                    goto Label_02FA;

                              default:
                                    goto Label_03D4;
                        }
                        Label_02D9:
                        if (BitConverter.ToInt32(players.TRANG_BI_LAN_BAO_VAY[num].VAT_PHAM_ID, 0) == BitConverter.ToInt32(buffer4, 0))
                        {
                              goto Label_0301;
                        }
                        num++;
                        Label_02FA:
                        if (num >= 0x42)
                        {
                              goto Label_030B;
                        }
                        goto Label_02D9;
                        Label_0301:
                        flag = true;
                        players.LAM_GIAM_DI_VAT_PHAM(num, 1);
                        Label_030B:
                        if (!flag)
                        {
                              goto Label_0407;
                        }
                        if (base.Add_Status_List.ContainsKey(BitConverter.ToInt32(buffer4, 0)))
                        {
                              base.Add_Status_List[BitConverter.ToInt32(buffer4, 0)].THOI_GIAN_KET_THUC_SU_KIEN();
                        }
                        Additional_Sate_Class class2 = new Additional_Sate_Class(this, 0x1b7740, BitConverter.ToInt32(buffer4, 0), 1);
                        base.Add_Status_List.Add(class2.FLD_PID, class2);
                        base.Nhan_vat_them_vao_lon_nhat_HP += 150;
                        base.FLD_nhan_vat_them_vao_cong_kich += 15;
                        base.FLD_nhan_vat_them_vao_phong_ngu += 15;
                        int num10 = base.FLD_nhan_vat_them_vao_khi_cong;
                        base.FLD_nhan_vat_them_vao_khi_cong = num10 + 1;
                        base.FLD_Nhan_vat_them_vao_kinh_nghiem_ti_le_phan_tram += 0.05;
                        this.Status_Effect(buffer4, 1, 0x1b7740);
                        base.UpdatePowersAndStatus();
                        Label_03D4:
                        this.TINH_NHAN_NHAC_NHO(7, str3, str2);
                        players.TINH_NHAN_NHAC_NHO(7, str3, str2);
                        this.TINH_NHAN_NHAC_NHO(0x1d, str3, str2);
                        players.TINH_NHAN_NHAC_NHO(0x1d, str3, str2);
                        return;
                        Label_0407:
                        this.TINH_NHAN_NHAC_NHO(0x10, str3, str2);
                        return;
                        Label_0418:
                        this.TINH_NHAN_NHAC_NHO(0x10, str3, str2);
                        return;
                        Label_0429:
                        this.TINH_NHAN_NHAC_NHO(0x12, str3, str2);
                        return;
                        Label_043A:
                        if (num2 != 7)
                        {
                              goto Label_063E;
                        }
                        Players players2 = World.smethod_2(str3);
                        int num4 = base.DUOC_KIEN_HANG_RONG(this);
                        int num5 = base.DUOC_KIEN_HANG_RONG(players2);
                        if (((players2 == null) || (num4 == -1)) || (num5 == -1))
                        {
                              goto Label_0627;
                        }
                        if (num3 != 3)
                        {
                              goto Label_0609;
                        }
                        base.FLD_TINH_NHAN = players2.UserName;
                        players2.FLD_TINH_NHAN = base.UserName;
                        base.UPDATE_TINH_NHAN_HE_THONG(2, players2.UserName, base.FLD_TINH_NHAN_NHAN_CUOI);
                        players2.UPDATE_TINH_NHAN_HE_THONG(2, base.UserName, base.FLD_TINH_NHAN_NHAN_CUOI);
                        this.TINH_NHAN_NHAC_NHO(num3, str2, str3);
                        players2.TINH_NHAN_NHAC_NHO(num3, str3, str2);
                        base.Update_Figure_Data(this);
                        base.Update_Data_Boardcast();
                        players2.Update_Figure_Data(players2);
                        players2.Update_Data_Boardcast();
                        base.System_Announcement("Chuc mung【" + str3 + "】cung【" + str2 + "】tro thanh mot doi。" + World.Server_Name_2 + "Chuc hai ban tram nam hanh phuc！！");
                        bool flag2 = false;
                        bool flag3 = false;
                        for (int m = 0; m < 0x42; m++)
                        {
                              if (BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[m].VAT_PHAM_ID, 0) == 0x3b9acb9f)
                              {
                                    goto Label_056C;
                              }
                        }
                        goto Label_056F;
                        Label_056C:
                        flag2 = true;
                        Label_056F:
                        if (!flag2)
                        {
                              byte[] buffer5 = BitConverter.GetBytes(RxjhClass.GetDBItmeId());
                              this.TANG_CUONG_VAT_PHAM(buffer5, BitConverter.GetBytes(0x3b9acb9f), num4, BitConverter.GetBytes(1), new byte[20]);
                        }
                        for (int n = 0; n < 0x42; n++)
                        {
                              if (BitConverter.ToInt32(players2.TRANG_BI_LAN_BAO_VAY[n].VAT_PHAM_ID, 0) == 0x3b9acb9f)
                              {
                                    goto Label_05CF;
                              }
                        }
                        goto Label_05D2;
                        Label_05CF:
                        flag3 = true;
                        Label_05D2:
                        if (!flag3)
                        {
                              byte[] buffer6 = BitConverter.GetBytes(RxjhClass.GetDBItmeId());
                              players2.TANG_CUONG_VAT_PHAM(buffer6, BitConverter.GetBytes(0x3b9acb9f), num5, BitConverter.GetBytes(1), new byte[20]);
                        }
                        return;
                        Label_0609:
                        this.TINH_NHAN_NHAC_NHO(num3, str3, str2);
                        players2.TINH_NHAN_NHAC_NHO(num3, str3, str2);
                        return;
                        Label_0627:
                        base.GameMessage("Please leave a vacancy in the backpack try to ...", 50, "");
                        return;
                        Label_063E:
                        if (num2 != 0x15)
                        {
                              goto Label_0783;
                        }
                        Players players3 = World.smethod_2(str2);
                        if (players3 == null)
                        {
                              goto Label_0772;
                        }
                        if (num3 != 1)
                        {
                              return;
                        }
                        int num6 = World.Nhan_khac_chu_can_vang / 0x2710;
                        if (base.Player_Money < World.Nhan_khac_chu_can_vang)
                        {
                              goto Label_073E;
                        }
                        bool flag4 = false;
                        for (int num13 = 0; num13 < 0x42; num13++)
                        {
                              if (BitConverter.ToInt32(players3.TRANG_BI_LAN_BAO_VAY[num13].VAT_PHAM_ID, 0) == 0x3b9acb9f)
                              {
                                    goto Label_06B1;
                              }
                        }
                        goto Label_06B4;
                        Label_06B1:
                        flag4 = true;
                        Label_06B4:
                        if (flag4)
                        {
                              players3.FLD_TINH_NHAN_NHAN_CUOI = str;
                              players3.UPDATE_TINH_NHAN_HE_THONG(2, base.UserName, players3.FLD_TINH_NHAN_NHAN_CUOI);
                              this.PACKET_NHAN_TINH_NHAN(0x54, str2, str3);
                              players3.PACKET_NHAN_TINH_NHAN(0x54, str3, str2);
                              base.Player_Money -= 0x989680L;
                              base.UpdateMoneyAndWeight();
                              base.GameMessage("Ring lettering fee has been paid" + num6 + "Million two", 50, "");
                        }
                        else
                        {
                              this.PACKET_NHAN_TINH_NHAN(0x56, str2, str3);
                        }
                        return;
                        Label_073E:
                        this.PACKET_NHAN_TINH_NHAN(0x57, str2, str3);
                        base.GameMessage("Ring lettering fee required" + num6 + "Million two", 50, "");
                        return;
                        Label_0772:
                        this.TINH_NHAN_NHAC_NHO(0x12, str3, str2);
                        return;
                        Label_0783:
                        switch (num2)
                        {
                              case 12:
                                    this.Wedding(0);
                                    this.Wedding(1);
                                    this.Wedding(2);
                                    return;

                              case 13:
                                    if (base.FLD_TINH_NHAN == "")
                                    {
                                          break;
                                    }
                                    this.Move(0f, 0f, 15f, 0x2329);
                                    return;

                              case 14:
                                    if (base.FLD_TINH_NHAN == "")
                                    {
                                          goto Label_082B;
                                    }
                                    this.Move(0f, 0f, 15f, 0x238d);
                                    return;

                              default:
                                    goto Label_0842;
                        }
                        base.GameMessage("Long age support can not enter the house, and so you can go there to get married to send you a wedding gift Oh!", 9, "system hint");
                        return;
                        Label_082B:
                        base.GameMessage("China can not enter the temple marriage, and so you can go there to get married to send you a wedding gift Oh!", 9, "system hint");
                        return;
                        Label_0842:
                        if (num2 == 15)
                        {
                              if (base.FLD_TINH_NHAN != "")
                              {
                                    this.Move(0f, 0f, 15f, 0x23f1);
                              }
                              else
                              {
                                    base.GameMessage("Unable to enter the house of the sacraments, and so you can go there to get married to send you a wedding gift Oh!", 9, "system hint");
                              }
                        }
                  }
                  catch (Exception exception)
                  {
                        Form1.WriteLine(1, string.Concat(new object[] { "情侣系统 出错", base.Client.int_3, "|", base.Client.ToString(), " ", exception.Message }));
                  }
            }

            public void TINH_NHAN_NHAC_NHO(int int_128, string string_10, string string_11)
            {
                  byte[] dst = Converter.hexStringToByte("AA55370000CA027A17280006000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000D64955AA");
                  Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, dst, 5, 2);
                  Buffer.BlockCopy(BitConverter.GetBytes(int_128), 0, dst, 11, 2);
                  byte[] bytes = Encoding.Default.GetBytes(string_10);
                  byte[] src = Encoding.Default.GetBytes(string_11);
                  Buffer.BlockCopy(bytes, 0, dst, 0x13, bytes.Length);
                  Buffer.BlockCopy(src, 0, dst, 0x22, src.Length);
                  if (base.Client != null)
                  {
                        base.Client.method_8(dst, dst.Length);
                  }
            }

            public void TINH_NHAN_PACKET(int int_128, string string_10, string string_11, int int_129)
            {
                  byte[] dst = Converter.hexStringToByte("AA555300017600791744000300000000000000D0D5BBCA4FC3FBB5DB000000000000306FD3F1C2B66F3000000000000000000022000000000000000000000000000000000000000000000000000000000000000000B7A655AA");
                  Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, dst, 5, 2);
                  Buffer.BlockCopy(BitConverter.GetBytes(int_128), 0, dst, 11, 2);
                  byte[] bytes = Encoding.Default.GetBytes(string_10);
                  byte[] src = Encoding.Default.GetBytes(string_11);
                  if (int_129 != 0)
                  {
                        Buffer.BlockCopy(BitConverter.GetBytes(int_129), 0, dst, 0x37, 4);
                  }
                  Buffer.BlockCopy(bytes, 0, dst, 0x13, bytes.Length);
                  Buffer.BlockCopy(src, 0, dst, 0x22, src.Length);
                  if (base.Client != null)
                  {
                        base.Client.method_8(dst, dst.Length);
                  }
            }

            public void TINH_NHAN_THINH_CAU_KET_HON(int int_128, string string_10, string string_11)
            {
                  byte[] dst = Converter.hexStringToByte("AA553F00013F027917300001000000000000000000000000000000000000000000000000000000000000000000000000000000FFFFFFFF0000000000000000000029B955AA");
                  Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, dst, 5, 2);
                  byte[] bytes = Encoding.Default.GetBytes(string_10);
                  byte[] src = Encoding.Default.GetBytes(string_11);
                  Buffer.BlockCopy(bytes, 0, dst, 0x13, bytes.Length);
                  Buffer.BlockCopy(src, 0, dst, 0x22, src.Length);
                  if (base.Client != null)
                  {
                        base.Client.method_8(dst, dst.Length);
                  }
            }

            public void TINH_TOAN_HOC_SKILL(byte[] byte_5, int int_128)
            {
                  TBL_XWWL_KONGFU tbl_xwwl_kongfu;
                  TBL_XWWL_KONGFU tbl_xwwl_kongfu2;
                  PacketReader reader1 = new PacketReader(byte_5, int_128, false);
                  reader1.method_1(5, SeekOrigin.Begin);
                  int num = reader1.method_3();
                  reader1.method_1(11, SeekOrigin.Begin);
                  int key = reader1.method_2();
                  if ((num == base.UserSessionID) && World.TBL_KONGFU.TryGetValue(key, out tbl_xwwl_kongfu))
                  {
                        TBL_XWWL_KONGFU tbl_xwwl_kongfu3 = new TBL_XWWL_KONGFU(key);
                        if ((base.Player_Job != 8) && (base.Player_Job != 9))
                        {
                              if (tbl_xwwl_kongfu3.FLD_NEEDEXP > base.Player_ExpErience)
                              {
                                    this.Learn_Skill_Tip(3);
                                    return;
                              }
                              if (tbl_xwwl_kongfu3.FLD_JOBLEVEL > base.Player_FLD_JOB_LEVEL)
                              {
                                    this.Learn_Skill_Tip(3);
                                    return;
                              }
                              if (base.Player_FLD_LEVEL < tbl_xwwl_kongfu3.FLD_LEVEL)
                              {
                                    this.Learn_Skill_Tip(3);
                                    return;
                              }
                              base.class79_0[tbl_xwwl_kongfu3.FLD_VO_CONG_LOAI_HINH, tbl_xwwl_kongfu3.FLD_INDEX] = tbl_xwwl_kongfu3;
                              base.Player_ExpErience -= tbl_xwwl_kongfu3.FLD_NEEDEXP;
                              base.UpdatePowersAndStatus();
                              this.Learn_Skill_Tip(1);
                              base.UpdateExperience();
                        }
                        else if (base.class79_0[tbl_xwwl_kongfu3.FLD_VO_CONG_LOAI_HINH, tbl_xwwl_kongfu3.FLD_INDEX] != null)
                        {
                              if (base.Player_ExpErience < (tbl_xwwl_kongfu3.FLD_NEEDEXP + ((base.class79_0[tbl_xwwl_kongfu3.FLD_VO_CONG_LOAI_HINH, tbl_xwwl_kongfu3.FLD_INDEX].VO_CONG_THU_BAC - 1) * tbl_xwwl_kongfu3.FLD_MOI_CAP_THEM_KINH_NGHIEM)))
                              {
                                    this.Learn_Skill_Tip(3);
                                    return;
                              }
                              if (base.Player_FLD_LEVEL < (tbl_xwwl_kongfu3.FLD_LEVEL + (base.class79_0[tbl_xwwl_kongfu3.FLD_VO_CONG_LOAI_HINH, tbl_xwwl_kongfu3.FLD_INDEX].VO_CONG_THU_BAC * tbl_xwwl_kongfu3.FLD_MOI_CAP_THEM_DANG_CAP)))
                              {
                                    this.Learn_Skill_Tip(3);
                                    return;
                              }
                              if (tbl_xwwl_kongfu3.FLD_JOBLEVEL > base.Player_FLD_JOB_LEVEL)
                              {
                                    this.Learn_Skill_Tip(3);
                                    return;
                              }
                              if (base.class79_0[tbl_xwwl_kongfu3.FLD_VO_CONG_LOAI_HINH, tbl_xwwl_kongfu3.FLD_INDEX].VO_CONG_THU_BAC >= tbl_xwwl_kongfu3.FLD_VO_CONG_CAO_NHAT_DANG_CAP)
                              {
                                    return;
                              }
                              TBL_XWWL_KONGFU tbl_xwwl_kongfu1 = base.class79_0[tbl_xwwl_kongfu3.FLD_VO_CONG_LOAI_HINH, tbl_xwwl_kongfu3.FLD_INDEX];
                              tbl_xwwl_kongfu1.VO_CONG_THU_BAC++;
                              base.Player_ExpErience -= tbl_xwwl_kongfu3.FLD_NEEDEXP + ((base.class79_0[tbl_xwwl_kongfu3.FLD_VO_CONG_LOAI_HINH, tbl_xwwl_kongfu.FLD_INDEX].VO_CONG_THU_BAC - 1) * tbl_xwwl_kongfu3.FLD_MOI_CAP_THEM_KINH_NGHIEM);
                              base.UpdatePowersAndStatus();
                              this.Learn_Skill_Tip(1);
                              base.UpdateExperience();
                        }
                        else
                        {
                              switch (key)
                              {
                                    case 0x1ea80d:
                                          {
                                                TBL_XWWL_KONGFU tbl_xwwl_kongfu4 = new TBL_XWWL_KONGFU(0x1ea80e);
                                                TBL_XWWL_KONGFU tbl_xwwl_kongfu5 = new TBL_XWWL_KONGFU(0x1ea80f);
                                                base.class79_0[tbl_xwwl_kongfu3.FLD_VO_CONG_LOAI_HINH, tbl_xwwl_kongfu3.FLD_INDEX] = tbl_xwwl_kongfu3;
                                                base.class79_0[tbl_xwwl_kongfu4.FLD_VO_CONG_LOAI_HINH, tbl_xwwl_kongfu4.FLD_INDEX] = tbl_xwwl_kongfu4;
                                                base.class79_0[tbl_xwwl_kongfu5.FLD_VO_CONG_LOAI_HINH, tbl_xwwl_kongfu5.FLD_INDEX] = tbl_xwwl_kongfu5;
                                                base.Player_ExpErience -= tbl_xwwl_kongfu3.FLD_NEEDEXP;
                                                base.UpdatePowersAndStatus();
                                                this.Learn_Skill_Tip(1);
                                                base.UpdateExperience();
                                                return;
                                          }
                                    case 0x1ea810:
                                          {
                                                TBL_XWWL_KONGFU tbl_xwwl_kongfu6 = new TBL_XWWL_KONGFU(0x1ea811);
                                                TBL_XWWL_KONGFU tbl_xwwl_kongfu7 = new TBL_XWWL_KONGFU(0x1ea812);
                                                TBL_XWWL_KONGFU tbl_xwwl_kongfu8 = new TBL_XWWL_KONGFU(0x1ea813);
                                                base.class79_0[tbl_xwwl_kongfu3.FLD_VO_CONG_LOAI_HINH, tbl_xwwl_kongfu3.FLD_INDEX] = tbl_xwwl_kongfu3;
                                                base.class79_0[tbl_xwwl_kongfu6.FLD_VO_CONG_LOAI_HINH, tbl_xwwl_kongfu6.FLD_INDEX] = tbl_xwwl_kongfu6;
                                                base.class79_0[tbl_xwwl_kongfu7.FLD_VO_CONG_LOAI_HINH, tbl_xwwl_kongfu7.FLD_INDEX] = tbl_xwwl_kongfu7;
                                                base.class79_0[tbl_xwwl_kongfu8.FLD_VO_CONG_LOAI_HINH, tbl_xwwl_kongfu8.FLD_INDEX] = tbl_xwwl_kongfu8;
                                                base.Player_ExpErience -= tbl_xwwl_kongfu3.FLD_NEEDEXP;
                                                base.UpdatePowersAndStatus();
                                                this.Learn_Skill_Tip(1);
                                                base.UpdateExperience();
                                                return;
                                          }
                                    case 0x1ea814:
                                          {
                                                TBL_XWWL_KONGFU tbl_xwwl_kongfu9 = new TBL_XWWL_KONGFU(0x1ea815);
                                                TBL_XWWL_KONGFU tbl_xwwl_kongfu10 = new TBL_XWWL_KONGFU(0x1ea816);
                                                TBL_XWWL_KONGFU tbl_xwwl_kongfu11 = new TBL_XWWL_KONGFU(0x1ea817);
                                                TBL_XWWL_KONGFU tbl_xwwl_kongfu12 = new TBL_XWWL_KONGFU(0x1ea818);
                                                base.class79_0[tbl_xwwl_kongfu3.FLD_VO_CONG_LOAI_HINH, tbl_xwwl_kongfu3.FLD_INDEX] = tbl_xwwl_kongfu3;
                                                base.class79_0[tbl_xwwl_kongfu9.FLD_VO_CONG_LOAI_HINH, tbl_xwwl_kongfu9.FLD_INDEX] = tbl_xwwl_kongfu9;
                                                base.class79_0[tbl_xwwl_kongfu10.FLD_VO_CONG_LOAI_HINH, tbl_xwwl_kongfu10.FLD_INDEX] = tbl_xwwl_kongfu10;
                                                base.class79_0[tbl_xwwl_kongfu11.FLD_VO_CONG_LOAI_HINH, tbl_xwwl_kongfu11.FLD_INDEX] = tbl_xwwl_kongfu11;
                                                base.class79_0[tbl_xwwl_kongfu12.FLD_VO_CONG_LOAI_HINH, tbl_xwwl_kongfu12.FLD_INDEX] = tbl_xwwl_kongfu12;
                                                base.Player_ExpErience -= tbl_xwwl_kongfu3.FLD_NEEDEXP;
                                                base.UpdatePowersAndStatus();
                                                this.Learn_Skill_Tip(1);
                                                base.UpdateExperience();
                                                return;
                                          }
                              }
                              if (tbl_xwwl_kongfu3.FLD_NEEDEXP > base.Player_ExpErience)
                              {
                                    this.Learn_Skill_Tip(3);
                                    return;
                              }
                              if (tbl_xwwl_kongfu3.FLD_JOBLEVEL > base.Player_FLD_JOB_LEVEL)
                              {
                                    this.Learn_Skill_Tip(3);
                                    return;
                              }
                              if (base.Player_FLD_LEVEL < tbl_xwwl_kongfu3.FLD_LEVEL)
                              {
                                    this.Learn_Skill_Tip(3);
                                    return;
                              }
                              base.class79_0[tbl_xwwl_kongfu3.FLD_VO_CONG_LOAI_HINH, tbl_xwwl_kongfu3.FLD_INDEX] = tbl_xwwl_kongfu3;
                              if (tbl_xwwl_kongfu3.FLD_VO_CONG_CAO_NHAT_DANG_CAP != 0)
                              {
                                    TBL_XWWL_KONGFU tbl_xwwl_kongfu14 = base.class79_0[tbl_xwwl_kongfu3.FLD_VO_CONG_LOAI_HINH, tbl_xwwl_kongfu3.FLD_INDEX];
                                    tbl_xwwl_kongfu14.VO_CONG_THU_BAC++;
                              }
                              base.Player_ExpErience -= tbl_xwwl_kongfu3.FLD_NEEDEXP;
                              base.UpdatePowersAndStatus();
                              this.Learn_Skill_Tip(1);
                              base.UpdateExperience();
                        }
                        this.CAP_NHAT_KY_NANG_MOI_LAM_DONG_BANG(key);
                  }
                  if ((num == base.NHAN_VAT_LINH_THU_TOAN_BO_TRANG_PHUC_ID) && World.TBL_KONGFU.TryGetValue(key, out tbl_xwwl_kongfu2))
                  {
                        TBL_XWWL_KONGFU tbl_xwwl_kongfu13 = new TBL_XWWL_KONGFU(key);
                        base.NHAN_VAT_LINH_THU.class79_0[tbl_xwwl_kongfu13.FLD_INDEX] = tbl_xwwl_kongfu13;
                        this.Method_Cap_Nhat_Linh_Thu_Vo_Cong_Trang_Thai();
                        base.UpdatePowersAndStatus();
                        this.Learn_Skill_Tip(1);
                        base.UpdateExperience();
                  }
            }

            public void TINH_TOAN_VO_HUAN_CAP_8(int int_128)
            {
                  if (base.Player_WuXun < 0x16e360)
                  {
                        return;
                  }
                  byte[] dst = Converter.hexStringToByte("AA551A0000F1014301140013E0143C000000003E00010003F8274E0100000055AA");
                  if ((DateTime.Now >= base.VO_HUAN_CAP_8_DOAN_THOI_GIAN) && (int_128 != 0))
                  {
                        DateTime now = DateTime.Now;
                        now = DateTime.Now.AddDays(30.0);
                        base.VO_HUAN_CAP_8_DOAN_THOI_GIAN = now;
                        base.VO_HUAN_CAP_8_CO_HAY_KHONG_MO_RA = int_128;
                        base.Player_WuXun -= 0xc350;
                        base.LUU_NHAN_VAT_SO_LIEU();
                        string str = "";
                        if (base.Player_Zx == 1)
                        {
                              str = "Vo Hoang Chi Ton";
                        }
                        else
                        {
                              str = "Ba Hoang Chi Ton";
                        }
                        using (IEnumerator<Players> enumerator = World.allConnectedChars.Values.GetEnumerator())
                        {
                              while (enumerator.MoveNext())
                              {
                                    if (enumerator.Current != null)
                                    {
                                          base.System_Announcement(base.UserName + " nhan duoc danh hieu " + str);
                                    }
                              }
                              goto Label_00F3;
                        }
                  }
                  if (int_128 == 0)
                  {
                        base.VO_HUAN_CAP_8_CO_HAY_KHONG_MO_RA = int_128;
                        base.LUU_NHAN_VAT_SO_LIEU();
                  }
                  Label_00F3:
                  if (base.Player_Zx == 1)
                  {
                        Buffer.BlockCopy(BitConverter.GetBytes(0x3c14e012), 0, dst, 11, 4);
                  }
                  else
                  {
                        Buffer.BlockCopy(BitConverter.GetBytes(0x3c14e013), 0, dst, 11, 4);
                  }
                  DateTime time = new DateTime(0x7b2, 1, 1, 8, 0, 0);
                  DateTime.Now.AddDays(30.0).Subtract(time);
                  double num = Convert.ToDouble(base.VO_HUAN_CAP_8_DOAN_THOI_GIAN.ToString("yyMMddhhmm"));
                  if (int_128 != 0)
                  {
                        Buffer.BlockCopy(BitConverter.GetBytes((int)num), 0, dst, 0x17, 4);
                  }
                  else
                  {
                        Buffer.BlockCopy(BitConverter.GetBytes(0), 0, dst, 0x17, 4);
                  }
                  Buffer.BlockCopy(BitConverter.GetBytes(int_128), 0, dst, 0x1b, 2);
                  Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, dst, 5, 2);
                  if (base.Client != null)
                  {
                        base.Client.method_8(dst, dst.Length);
                  }
            }

            public string TITLE_OAN_TU_XI(int int_128)
            {
                  string str = "无";
                  if (int_128 == 0)
                  {
                        return "剪刀";
                  }
                  if (int_128 == 1)
                  {
                        return "石头";
                  }
                  if (int_128 == 2)
                  {
                        str = "布";
                  }
                  return str;
            }

            public string TITLE_THANG_THUA(int int_128)
            {
                  string str = "无";
                  if (int_128 == 0)
                  {
                        return "平局";
                  }
                  if (int_128 == 1)
                  {
                        return "赢";
                  }
                  if (int_128 == 2)
                  {
                        str = "输";
                  }
                  return str;
            }

            public void TO_DOI_TRUYEN_TONG(byte[] byte_5, int int_128)
            {
                  try
                  {
                        byte[] dst = new byte[2];
                        Buffer.BlockCopy(byte_5, 15, dst, 0, 2);
                        byte[] bytes = new byte[20];
                        for (int i = 0; i < 20; i++)
                        {
                              if (byte_5[0x1b + i] == 0)
                              {
                                    break;
                              }
                              bytes[i] = byte_5[0x1b + i];
                        }
                        string str = Encoding.Default.GetString(bytes).Replace("\0", "");
                        int index = BitConverter.ToInt16(dst, 0);
                        if ((BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_ID, 0) == 0x3c14dc78) && (BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_ID, 0) != 0))
                        {
                              Players players = World.smethod_2(str);
                              if (players != null)
                              {
                                    if (players.UserName == base.UserName)
                                    {
                                          base.TO_DOI_TRUYEN_TONG_PHU_NHAC_NHO(3);
                                    }
                                    else if (players.TO_DOI_ID != base.TO_DOI_ID)
                                    {
                                          base.TO_DOI_TRUYEN_TONG_PHU_NHAC_NHO(6);
                                    }
                                    else
                                    {
                                          base.TO_DOI_TRUYEN_TONG_PHU_NHAC_NHO(1);
                                          this.VAT_PHAM_GIAM_DI_THUOC_TINH_SO_LUONG(index, 1);
                                          this.Move(players.CharacterCoords_X, players.CharacterCoords_Y, players.CharacterCoords_Z, players.CharacterCoords_Map);
                                    }
                              }
                              else
                              {
                                    base.TO_DOI_TRUYEN_TONG_PHU_NHAC_NHO(2);
                              }
                        }
                  }
                  catch (Exception exception)
                  {
                        base.TO_DOI_TRUYEN_TONG_PHU_NHAC_NHO(7);
                        Form1.WriteLine(1, "组队传送出错![" + base.Userid + "]-[" + base.UserName + "]" + exception.Message);
                  }
            }

            public void TOI_HUY_BO_GIAO_DICH_YEU_CAU(int int_128, int int_129)
            {
                  try
                  {
                        byte[] dst = Converter.hexStringToByte("AA5543000000009800340001000000010000000000000000000000000000000000000000000000000000000000000000000000000000000000000000010000000000000000000055AA");
                        Buffer.BlockCopy(BitConverter.GetBytes(6), 0, dst, 11, 4);
                        Buffer.BlockCopy(BitConverter.GetBytes(6), 0, dst, 15, 4);
                        byte[] bytes = Encoding.Default.GetBytes(base.UserName);
                        Buffer.BlockCopy(bytes, 0, dst, 0x17, bytes.Length);
                        Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, dst, 0x13, 2);
                        Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, dst, 5, 2);
                        if (base.Client != null)
                        {
                              base.Client.Send(dst, dst.Length);
                        }
                        if (base.class66_0.GIAO_DICH_CON_NGUOI.Client != null)
                        {
                              base.class66_0.GIAO_DICH_CON_NGUOI.Client.Send(dst, dst.Length);
                        }
                        base.class66_0.method_0();
                  }
                  catch (Exception exception)
                  {
                        Form1.WriteLine(1, "本人取消交易请求出错 [" + base.Userid + "][" + base.UserName + "][" + base.Client.ToString() + "] " + exception.Message);
                  }
            }

            public void TOI_ROI_KHOI_TO_DOI_NHAC_NHO()
            {
                  if (World.jlMsg == 1)
                  {
                        Form1.WriteLine(0, "Players_本人退出组队提示");
                  }
                  byte[] dst = Converter.hexStringToByte("AA551100000000370002000500000000000000000055AA");
                  Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, dst, 5, 2);
                  if (base.Client != null)
                  {
                        base.Client.Send(dst, dst.Length);
                  }
            }

            public void TOI_TU_ROI_NHOM(byte[] byte_5, int int_128)
            {
                  try
                  {
                        TO_DOI_CLASS to_doi_class;
                        byte[] dst = Converter.hexStringToByte("AA551300002C013300040003000200000000000000000055AA");
                        Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, dst, 5, 2);
                        if (base.Client != null)
                        {
                              base.Client.Send(dst, dst.Length);
                        }
                        if (World.W_TO_DOI.TryGetValue(base.TO_DOI_ID, out to_doi_class))
                        {
                              if (to_doi_class.class15_0 != null)
                              {
                                    to_doi_class.class15_0.TO_DOI_ID = 0;
                                    to_doi_class.class15_0.Client.Send(dst, dst.Length);
                                    to_doi_class.class15_0 = null;
                              }
                              if (to_doi_class.dictionary_0.Count <= 1)
                              {
                                    to_doi_class.Dispose();
                                    World.W_TO_DOI.Remove(base.TO_DOI_ID);
                                    base.TO_DOI_ID = 0;
                              }
                        }
                  }
                  catch (Exception exception)
                  {
                        Form1.WriteLine(1, "本人取消组队出错![" + base.Userid + "]-[" + base.UserName + "]" + exception.Message);
                  }
            }

            public bool TRA_TIM_PHAM_VI_MAT_DAT_ITEM(int int_128, MAT_DAT_ITEM_LOAI class85_0)
            {
                  if (class85_0.Rxjh_Map != base.CharacterCoords_Map)
                  {
                        return false;
                  }
                  float num = class85_0.Rxjh_Y - base.CharacterCoords_Y;
                  float single1 = class85_0.Rxjh_X - base.CharacterCoords_X;
                  return (((int)Math.Sqrt((double)((single1 * single1) + (num * num)))) <= int_128);
            }

            public bool TRA_TIM_PHAM_VI_NGUOI_CHOI(int int_128, Players class15_0)
            {
                  if (class15_0.int_11 == 1)
                  {
                        return false;
                  }
                  if (class15_0.CharacterCoords_Map != base.CharacterCoords_Map)
                  {
                        return false;
                  }
                  float num = class15_0.CharacterCoords_Y - base.CharacterCoords_Y;
                  float single1 = class15_0.CharacterCoords_X - base.CharacterCoords_X;
                  return (((int)Math.Sqrt((double)((single1 * single1) + (num * num)))) <= int_128);
            }

            public bool TRA_TIM_PHAM_VI_NPC(int int_128, TBL_XWWL_NPC class153_0)
            {
                  if (class153_0.NPC_TU_VONG)
                  {
                        return false;
                  }
                  if (class153_0.Rxjh_Map != base.CharacterCoords_Map)
                  {
                        return false;
                  }
                  if (base.CharacterCoords_Map == 0x1bbd)
                  {
                        int_128 = 0x3e8;
                  }
                  float num = class153_0.Rxjh_Y - base.CharacterCoords_Y;
                  float single1 = class153_0.Rxjh_X - base.CharacterCoords_X;
                  return (((int)Math.Sqrt((double)((single1 * single1) + (num * num)))) <= int_128);
            }

            public void TRANG_PHUC_GUI_DI(int int_128, int int_129)
            {
                  try
                  {
                        if (World.Trang_phuc_gui_di_mo_ra == 0)
                        {
                              base.GameMessage("Set system has been shut down!", 10, "System broadcasting");
                        }
                        else
                        {
                              int num = base.Player_Zx;
                              int num2 = base.Player_Sex;
                              int num3 = base.Player_Job;
                              if (num == 0)
                              {
                                    base.GameMessage("Please be transfer in the open Set", 10, "System broadcasting");
                              }
                              else
                              {
                                    int num4 = 0;
                                    int num5 = 0;
                                    int num6 = 0;
                                    int num7 = 0;
                                    int num8 = 0;
                                    int num9 = 0;
                                    int num10 = 0;
                                    int months = 0;
                                    int num12 = 0;
                                    int num13 = 0;
                                    int num14 = 0;
                                    int num15 = 0;
                                    int num16 = 0;
                                    string format = "";
                                    TRANG_PHUC_DANH_SACH trang_phuc_danh_sach = new TRANG_PHUC_DANH_SACH();
                                    if (World.dictionary_26.TryGetValue(int_128, out trang_phuc_danh_sach))
                                    {
                                          num5 = trang_phuc_danh_sach.GIA_CA;
                                          num6 = trang_phuc_danh_sach.NU_AO_CHOANG_KIEU_DANG;
                                          num7 = trang_phuc_danh_sach.NAM_AO_CHOANG_KIEU_DANG;
                                          num8 = trang_phuc_danh_sach.TANG_CUONG_DANG_CAP;
                                          num9 = trang_phuc_danh_sach.TANG_CUONG_VO_HUAN;
                                          num10 = trang_phuc_danh_sach.BIEU_TANG_CASH;
                                          months = trang_phuc_danh_sach.THANH_VIEN_THOI_GIAN;
                                          num12 = trang_phuc_danh_sach.TANG_CUONG_CONG_KICH;
                                          num13 = trang_phuc_danh_sach.TANG_CUONG_PHONG_NGU;
                                          num15 = trang_phuc_danh_sach.TANG_CUONG_PHEP_THUAT;
                                          num14 = trang_phuc_danh_sach.TANG_CUONG_SINH_MENH;
                                          num16 = trang_phuc_danh_sach.CO_HAY_KHONG_THONG_CAO;
                                          format = trang_phuc_danh_sach.THONG_BAO_NOI_DUNG;
                                    }
                                    using (List<TRANG_PHUC_THUOC_TINH>.Enumerator enumerator = World.list_1.GetEnumerator())
                                    {
                                          while (enumerator.MoveNext())
                                          {
                                                if (enumerator.Current.Gia_ca == num5)
                                                {
                                                      num4++;
                                                }
                                          }
                                    }
                                    if (base.NHAN_TUI_TRONG_SO_LUONG() < num4)
                                    {
                                          base.GameMessage("Send suit must leave enough backpack" + num4.ToString() + "More vacancies", 10, "System broadcasting");
                                    }
                                    else
                                    {
                                          Players players;
                                          this.LAM_GIAM_DI_VAT_PHAM(int_129, 1);
                                          if (num12 != 0)
                                          {
                                                base.Khen_thuong_them_vao_cong_kich += num12;
                                                base.GameMessage("Increase in attacks on property" + num12, 10, "Members broadcasting");
                                                base.UpdatePowersAndStatus();
                                          }
                                          if (num13 != 0)
                                          {
                                                base.Khen_thuong_them_vao_phong_ngu += num13;
                                                base.GameMessage("Increase defense property" + num13, 10, "Members broadcasting");
                                                base.UpdatePowersAndStatus();
                                          }
                                          if (num14 != 0)
                                          {
                                                base.Khen_thuong_them_vao_sinh_menh += num14;
                                                base.GameMessage("Increase life properties" + num14, 10, "Members broadcasting");
                                                this.UpdateHP_MP_SP();
                                          }
                                          if (num15 != 0)
                                          {
                                                base.Khen_thuong_them_vao_noi_cong += num15;
                                                base.GameMessage("Increase magical properties" + num15, 10, "Members broadcasting");
                                                this.UpdateHP_MP_SP();
                                          }
                                          if ((months != 0) && World.allConnectedChars.TryGetValue(base.UserSessionID, out players))
                                          {
                                                DateTime now = DateTime.Now;
                                                now = DateTime.Now.AddMonths(months);
                                                base.FLD_VIP = 1;
                                                base.FLD_VIPTIM = now;
                                                base.LUU_THANH_VIEN_SO_LIEU();
                                                base.GameMessage("Open membership time" + months + "month", 10, "Members broadcasting");
                                          }
                                          if ((num10 != 0) && (base.FLD_RXPIONT != World.Nhan_vat_lon_nhat_CASH_so_luong))
                                          {
                                                this.KIEM_TRA_BACH_BAO_CAC_NGUYEN_BAO_SO_LUONG();
                                                base.KIEM_SOAT_CASH_SO_LIEU(num10, 2);
                                                base.UPDATE_RXPIONT();
                                                base.GameMessage("Get ingot" + num10, 10, "Members broadcasting");
                                          }
                                          if (num9 != 0)
                                          {
                                                base.Player_WuXun += num9;
                                                base.UpdatePowersAndStatus();
                                                base.GameMessage("Wu Xun increase" + num9, 10, "Members broadcasting");
                                          }
                                          if ((num8 != 0) && (base.Thanh_vien_thu_bac < World.Nhan_vat_level_cao_nhat))
                                          {
                                                if ((base.Thanh_vien_thu_bac + num8) > World.Nhan_vat_level_cao_nhat)
                                                {
                                                      base.Thanh_vien_thu_bac = World.Nhan_vat_level_cao_nhat;
                                                }
                                                else
                                                {
                                                      base.Thanh_vien_thu_bac += num8;
                                                }
                                                base.Calculate_Basic_Char_Data_3();
                                                this.UpdateHP_MP_SP();
                                                base.UpdatePowersAndStatus();
                                                base.UpdateExperience();
                                                base.GameMessage("Increasing the level of" + num8, 10, "Members broadcasting");
                                          }
                                          foreach (TRANG_PHUC_THUOC_TINH trang_phuc_thuoc_tinh in World.list_1)
                                          {
                                                if (trang_phuc_thuoc_tinh.Gia_ca == num5)
                                                {
                                                      TBL_XWWL_ITEM tbl_xwwl_item = new TBL_XWWL_ITEM();
                                                      if (trang_phuc_thuoc_tinh.Loai_hinh == 1)
                                                      {
                                                            tbl_xwwl_item = TBL_XWWL_ITEM.smethod_2(num, trang_phuc_thuoc_tinh.Dang_cap, num3, num2, trang_phuc_thuoc_tinh.Loai_hinh);
                                                            if (tbl_xwwl_item != null)
                                                            {
                                                                  this.TANG_CUONG_VAT_PHAM_MANG_THUOC_TINH(tbl_xwwl_item.FLD_PID, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, trang_phuc_thuoc_tinh.magic0, trang_phuc_thuoc_tinh.magic1, trang_phuc_thuoc_tinh.magic2, trang_phuc_thuoc_tinh.magic3, trang_phuc_thuoc_tinh.magic4, trang_phuc_thuoc_tinh.FLD_Thuc_tinh, trang_phuc_thuoc_tinh.FLD_Trung_cap_hon, trang_phuc_thuoc_tinh.FLD_Tien_hoa, trang_phuc_thuoc_tinh.FLD_Troi_chat);
                                                            }
                                                      }
                                                      else if (trang_phuc_thuoc_tinh.Loai_hinh == 2)
                                                      {
                                                            tbl_xwwl_item = TBL_XWWL_ITEM.smethod_2(num, trang_phuc_thuoc_tinh.Dang_cap, 0, 0, trang_phuc_thuoc_tinh.Loai_hinh);
                                                            if (tbl_xwwl_item != null)
                                                            {
                                                                  this.TANG_CUONG_VAT_PHAM_MANG_THUOC_TINH(tbl_xwwl_item.FLD_PID, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, trang_phuc_thuoc_tinh.magic0, trang_phuc_thuoc_tinh.magic1, trang_phuc_thuoc_tinh.magic2, trang_phuc_thuoc_tinh.magic3, trang_phuc_thuoc_tinh.magic4, trang_phuc_thuoc_tinh.FLD_Thuc_tinh, trang_phuc_thuoc_tinh.FLD_Trung_cap_hon, trang_phuc_thuoc_tinh.FLD_Tien_hoa, trang_phuc_thuoc_tinh.FLD_Troi_chat);
                                                            }
                                                      }
                                                      else if (trang_phuc_thuoc_tinh.Loai_hinh == 4)
                                                      {
                                                            tbl_xwwl_item = TBL_XWWL_ITEM.smethod_2(num, trang_phuc_thuoc_tinh.Dang_cap, num3, 0, trang_phuc_thuoc_tinh.Loai_hinh);
                                                            if (tbl_xwwl_item != null)
                                                            {
                                                                  this.TANG_CUONG_VAT_PHAM_MANG_THUOC_TINH(tbl_xwwl_item.FLD_PID, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, trang_phuc_thuoc_tinh.magic0, trang_phuc_thuoc_tinh.magic1, trang_phuc_thuoc_tinh.magic2, trang_phuc_thuoc_tinh.magic3, trang_phuc_thuoc_tinh.magic4, trang_phuc_thuoc_tinh.FLD_Thuc_tinh, trang_phuc_thuoc_tinh.FLD_Trung_cap_hon, trang_phuc_thuoc_tinh.FLD_Tien_hoa, trang_phuc_thuoc_tinh.FLD_Troi_chat);
                                                            }
                                                      }
                                                      else if (trang_phuc_thuoc_tinh.Loai_hinh == 5)
                                                      {
                                                            tbl_xwwl_item = TBL_XWWL_ITEM.smethod_2(num, trang_phuc_thuoc_tinh.Dang_cap, 0, 0, trang_phuc_thuoc_tinh.Loai_hinh);
                                                            if (tbl_xwwl_item != null)
                                                            {
                                                                  this.TANG_CUONG_VAT_PHAM_MANG_THUOC_TINH(tbl_xwwl_item.FLD_PID, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, trang_phuc_thuoc_tinh.magic0, trang_phuc_thuoc_tinh.magic1, trang_phuc_thuoc_tinh.magic2, trang_phuc_thuoc_tinh.magic3, trang_phuc_thuoc_tinh.magic4, trang_phuc_thuoc_tinh.FLD_Thuc_tinh, trang_phuc_thuoc_tinh.FLD_Trung_cap_hon, trang_phuc_thuoc_tinh.FLD_Tien_hoa, trang_phuc_thuoc_tinh.FLD_Troi_chat);
                                                            }
                                                      }
                                                      else if (trang_phuc_thuoc_tinh.Loai_hinh == 6)
                                                      {
                                                            tbl_xwwl_item = TBL_XWWL_ITEM.smethod_2(0, trang_phuc_thuoc_tinh.Dang_cap, 0, 0, trang_phuc_thuoc_tinh.Loai_hinh);
                                                            if (tbl_xwwl_item != null)
                                                            {
                                                                  this.TANG_CUONG_VAT_PHAM_MANG_THUOC_TINH(tbl_xwwl_item.FLD_PID, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, trang_phuc_thuoc_tinh.magic0, trang_phuc_thuoc_tinh.magic1, trang_phuc_thuoc_tinh.magic2, trang_phuc_thuoc_tinh.magic3, trang_phuc_thuoc_tinh.magic4, trang_phuc_thuoc_tinh.FLD_Thuc_tinh, trang_phuc_thuoc_tinh.FLD_Trung_cap_hon, trang_phuc_thuoc_tinh.FLD_Tien_hoa, trang_phuc_thuoc_tinh.FLD_Troi_chat);
                                                            }
                                                      }
                                                      else if (trang_phuc_thuoc_tinh.Loai_hinh == 7)
                                                      {
                                                            tbl_xwwl_item = TBL_XWWL_ITEM.smethod_2(0, trang_phuc_thuoc_tinh.Dang_cap, 0, 0, trang_phuc_thuoc_tinh.Loai_hinh);
                                                            if (tbl_xwwl_item != null)
                                                            {
                                                                  this.TANG_CUONG_VAT_PHAM_MANG_THUOC_TINH(tbl_xwwl_item.FLD_PID, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, trang_phuc_thuoc_tinh.magic0, trang_phuc_thuoc_tinh.magic1, trang_phuc_thuoc_tinh.magic2, trang_phuc_thuoc_tinh.magic3, trang_phuc_thuoc_tinh.magic4, trang_phuc_thuoc_tinh.FLD_Thuc_tinh, trang_phuc_thuoc_tinh.FLD_Trung_cap_hon, trang_phuc_thuoc_tinh.FLD_Tien_hoa, trang_phuc_thuoc_tinh.FLD_Troi_chat);
                                                            }
                                                      }
                                                      else if (trang_phuc_thuoc_tinh.Loai_hinh == 8)
                                                      {
                                                            tbl_xwwl_item = TBL_XWWL_ITEM.smethod_2(0, trang_phuc_thuoc_tinh.Dang_cap, 0, 0, trang_phuc_thuoc_tinh.Loai_hinh);
                                                            if (tbl_xwwl_item != null)
                                                            {
                                                                  this.TANG_CUONG_VAT_PHAM_MANG_THUOC_TINH(tbl_xwwl_item.FLD_PID, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, trang_phuc_thuoc_tinh.magic0, trang_phuc_thuoc_tinh.magic1, trang_phuc_thuoc_tinh.magic2, trang_phuc_thuoc_tinh.magic3, trang_phuc_thuoc_tinh.magic4, trang_phuc_thuoc_tinh.FLD_Thuc_tinh, trang_phuc_thuoc_tinh.FLD_Trung_cap_hon, trang_phuc_thuoc_tinh.FLD_Tien_hoa, trang_phuc_thuoc_tinh.FLD_Troi_chat);
                                                            }
                                                      }
                                                      else if (trang_phuc_thuoc_tinh.Loai_hinh == 10)
                                                      {
                                                            tbl_xwwl_item = TBL_XWWL_ITEM.smethod_2(0, trang_phuc_thuoc_tinh.Dang_cap, 0, 0, trang_phuc_thuoc_tinh.Loai_hinh);
                                                            if (tbl_xwwl_item != null)
                                                            {
                                                                  this.TANG_CUONG_VAT_PHAM_MANG_THUOC_TINH(tbl_xwwl_item.FLD_PID, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, trang_phuc_thuoc_tinh.magic0, trang_phuc_thuoc_tinh.magic1, trang_phuc_thuoc_tinh.magic2, trang_phuc_thuoc_tinh.magic3, trang_phuc_thuoc_tinh.magic4, trang_phuc_thuoc_tinh.FLD_Thuc_tinh, trang_phuc_thuoc_tinh.FLD_Trung_cap_hon, trang_phuc_thuoc_tinh.FLD_Tien_hoa, trang_phuc_thuoc_tinh.FLD_Troi_chat);
                                                            }
                                                      }
                                                      else if (trang_phuc_thuoc_tinh.Loai_hinh == 12)
                                                      {
                                                            int num17 = 0;
                                                            if (num2 == 1)
                                                            {
                                                                  num17 = num7;
                                                            }
                                                            else
                                                            {
                                                                  num17 = num6;
                                                            }
                                                            this.TANG_CUONG_VAT_PHAM_MANG_THUOC_TINH(num17, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, trang_phuc_thuoc_tinh.magic0, trang_phuc_thuoc_tinh.magic1, trang_phuc_thuoc_tinh.magic2, trang_phuc_thuoc_tinh.magic3, trang_phuc_thuoc_tinh.magic4, trang_phuc_thuoc_tinh.FLD_Thuc_tinh, trang_phuc_thuoc_tinh.FLD_Trung_cap_hon, trang_phuc_thuoc_tinh.FLD_Tien_hoa, trang_phuc_thuoc_tinh.FLD_Troi_chat);
                                                      }
                                                      else if (trang_phuc_thuoc_tinh.Loai_hinh == 14)
                                                      {
                                                            this.TANG_CUONG_VAT_PHAM_MANG_THUOC_TINH(0xdbc08, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, trang_phuc_thuoc_tinh.magic0, trang_phuc_thuoc_tinh.magic1, trang_phuc_thuoc_tinh.magic2, trang_phuc_thuoc_tinh.magic3, trang_phuc_thuoc_tinh.magic4, trang_phuc_thuoc_tinh.FLD_Thuc_tinh, trang_phuc_thuoc_tinh.FLD_Trung_cap_hon, trang_phuc_thuoc_tinh.FLD_Tien_hoa, trang_phuc_thuoc_tinh.FLD_Troi_chat);
                                                      }
                                                      else if (trang_phuc_thuoc_tinh.Loai_hinh == 15)
                                                      {
                                                            this.TANG_CUONG_VAT_PHAM_MANG_THUOC_TINH(0x3b9aca44, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, trang_phuc_thuoc_tinh.magic0, trang_phuc_thuoc_tinh.magic1, trang_phuc_thuoc_tinh.magic2, trang_phuc_thuoc_tinh.magic3, trang_phuc_thuoc_tinh.magic4, trang_phuc_thuoc_tinh.FLD_Thuc_tinh, trang_phuc_thuoc_tinh.FLD_Trung_cap_hon, trang_phuc_thuoc_tinh.FLD_Tien_hoa, trang_phuc_thuoc_tinh.FLD_Troi_chat);
                                                      }
                                                }
                                          }
                                          if (num16 == 1)
                                          {
                                                World.SendMsg(string.Format(format, base.UserName));
                                          }
                                    }
                              }
                        }
                  }
                  catch (Exception exception)
                  {
                        this.LAM_GIAM_DI_VAT_PHAM(int_129, 1);
                        Form1.WriteLine(100, "Send Error Set:" + exception.Message);
                  }
            }

            public void TRANG_THAI_HIEU_QUA_NHAN_VAT_LINH_THU(byte[] byte_5, int int_128, int int_129)
            {
                  PacketData data = new PacketData();
                  data.method_8((long)BitConverter.ToInt32(byte_5, 0));
                  data.Write4(int_128);
                  data.Write4(int_129);
                  data.Write4(0);
                  if (base.Client != null)
                  {
                        base.Client.method_4(data, 0x8700, base.NHAN_VAT_LINH_THU_TOAN_BO_TRANG_PHUC_ID);
                  }
                  this.vmethod_1(data, 0x8700, base.NHAN_VAT_LINH_THU_TOAN_BO_TRANG_PHUC_ID);
            }

            public void TRANG_THAI_TANG_HINH(int int_128)
            {
                  base.int_9 = int_128;
                  byte[] dst = Converter.hexStringToByte("AA551B0000B20205200C00060000000100000001000000000000000000000055AA");
                  Buffer.BlockCopy(BitConverter.GetBytes(int_128), 0, dst, 15, 4);
                  Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, dst, 5, 2);
                  if (base.Client != null)
                  {
                        base.Client.Send(dst, dst.Length);
                  }
                  this.vmethod_0(dst, dst.Length);
            }

            public void TRAO_DOI_ITEM_XAC_NHAN(ITEM_TRAO_DOI class56_0)
            {
                  char[] separator = new char[] { ',' };
                  string[] strArray = World.Thang_cap_thanh_vien_can_Thuoc_tinh.Split(separator);
                  if (class56_0.VO_HUAN != 0)
                  {
                        base.Player_WuXun += class56_0.VO_HUAN;
                        base.GameMessage("Obtain Wu Xun" + class56_0.VO_HUAN.ToString() + "point!", 20, "Exchange goods");
                        base.UpdatePowersAndStatus();
                  }
                  if ((class56_0.CASH != 0) && (base.FLD_RXPIONT != World.Nhan_vat_lon_nhat_CASH_so_luong))
                  {
                        this.KIEM_TRA_BACH_BAO_CAC_NGUYEN_BAO_SO_LUONG();
                        base.KIEM_SOAT_CASH_SO_LIEU(class56_0.CASH, 1);
                        base.GameMessage("Congratulations, you get" + class56_0.CASH.ToString() + "Ingot!", 10, "Exchange goods");
                        base.UPDATE_RXPIONT();
                  }
                  if (class56_0.SINH_MENH != 0)
                  {
                        base.Khen_thuong_them_vao_sinh_menh += class56_0.SINH_MENH;
                        base.UpdatePowersAndStatus();
                        base.GameMessage("get" + class56_0.SINH_MENH.ToString() + "life value!", 20, "Exchange goods");
                  }
                  if ((class56_0.CONG_KICH != 0) && (base.Khen_thuong_them_vao_cong_kich < long.Parse(strArray[0])))
                  {
                        base.Khen_thuong_them_vao_cong_kich += class56_0.CONG_KICH;
                        base.UpdatePowersAndStatus();
                        base.GameMessage("get" + class56_0.CONG_KICH.ToString() + "Attack!", 20, "Exchange goods");
                  }
                  if ((class56_0.PHONG_NGU != 0) && (base.Khen_thuong_them_vao_phong_ngu < long.Parse(strArray[1])))
                  {
                        base.Khen_thuong_them_vao_phong_ngu += class56_0.PHONG_NGU;
                        base.UpdatePowersAndStatus();
                        base.GameMessage("get" + class56_0.PHONG_NGU.ToString() + "Defense!", 20, "Exchange goods");
                  }
                  if (class56_0.NE_TRANH != 0)
                  {
                        base.Khen_thuong_them_vao_ne_tranh += class56_0.NE_TRANH;
                        base.UpdatePowersAndStatus();
                        base.GameMessage("get" + class56_0.NE_TRANH.ToString() + "Avoid value!", 20, "Exchange goods");
                  }
                  if (class56_0.TRUNG_MUC_TIEU != 0)
                  {
                        base.Khen_thuong_them_vao_trung_muc_tieu += class56_0.TRUNG_MUC_TIEU;
                        base.UpdatePowersAndStatus();
                        base.GameMessage("get" + class56_0.TRUNG_MUC_TIEU.ToString() + "Hits value!", 20, "Exchange goods");
                  }
                  if (class56_0.NOI_CONG != 0)
                  {
                        base.Khen_thuong_them_vao_noi_cong += class56_0.NOI_CONG;
                        base.UpdatePowersAndStatus();
                        base.GameMessage("get" + class56_0.NOI_CONG.ToString() + "Internal strength value!", 20, "Exchange goods");
                  }
                  if (class56_0.TRANG_PHUC_ID != 0)
                  {
                        int num2 = base.DUOC_KIEN_HANG_RONG_VI_TRI();
                        if (num2 == -1)
                        {
                              base.GameMessage("Backpack no vacancy, and quickly clean up under the bar.", 20, "Exchange goods");
                              return;
                        }
                        byte[] bytes = BitConverter.GetBytes(RxjhClass.GetDBItmeId());
                        byte[] buffer2 = new byte[0x38];
                        this.TANG_CUONG_VAT_PHAM_1(bytes, BitConverter.GetBytes(class56_0.TRANG_PHUC_ID), num2, BitConverter.GetBytes(1), buffer2, false);
                        base.GameMessage("Congratulations, you exchange a spree!", 20, "Exchange goods");
                  }
                  if (class56_0.TIEN_BAC != "")
                  {
                        base.Player_Money += long.Parse(class56_0.TIEN_BAC);
                        base.GameMessage("Get medal" + class56_0.TIEN_BAC + "Two!", 20, "Exchange goods");
                        base.Get_Money_Tip(uint.Parse(class56_0.TIEN_BAC));
                        base.UpdateMoneyAndWeight();
                  }
                  if (class56_0.GOI_VIP_ITEM != "")
                  {
                        int num3 = base.DUOC_KIEN_HANG_RONG_VI_TRI();
                        if (num3 == -1)
                        {
                              base.GameMessage("Backpack no vacancy, and quickly clean up under the bar.", 20, "Exchange goods");
                        }
                        else
                        {
                              char[] chArray2 = new char[] { ';' };
                              string[] strArray2 = class56_0.GOI_VIP_ITEM.Split(chArray2);
                              this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(int.Parse(strArray2[0]), num3, int.Parse(strArray2[1]), int.Parse(strArray2[2]), int.Parse(strArray2[3]), int.Parse(strArray2[4]), int.Parse(strArray2[5]), int.Parse(strArray2[6]), int.Parse(strArray2[7]), int.Parse(strArray2[8]), int.Parse(strArray2[9]), int.Parse(strArray2[10]), int.Parse(strArray2[11]));
                              base.GameMessage("Congratulations, you get a property and equipment!", 20, "Exchange goods");
                        }
                  }
            }

            public void TREO_CUA_HANG_OFFLINE()
            {
                  if (World.Co_hay_khong_mo_ra_cach_tuyen_Treo_thiet_bi == 0)
                  {
                        base.GameMessage("Hanging off the machine _ No open Please pay attention", 9, "Off-hook");
                  }
                  else
                  {
                        bool flag = false;
                        if (base.CharacterCoords_Map != World.Cach_tuyen_Treo_thiet_bi_ban_do)
                        {
                              base.GameMessage("Di chuyen sang " + TBL_XWWL_MAP.smethod_0(World.Cach_tuyen_Treo_thiet_bi_ban_do) + " de tre may!!", 9, "Off-hook");
                        }
                        else if (base.Player_FLD_LEVEL < World.Cach_tuyen_Treo_thiet_Dang_cap)
                        {
                              base.GameMessage("Dang cap nho hon " + World.Cach_tuyen_Treo_thiet_Dang_cap + " thi khong the treo may!!", 9, "Off-hook");
                        }
                        else if (base.FLD_VIP != 1)
                        {
                              base.GameMessage("Chi nhan vat su dung Chi Ton Phu moi co the su dung chuc nang nay!!", 9, "Off-hook");
                        }
                        else
                        {
                              TO_DOI_CLASS to_doi_class;
                              if (World.Cach_tuyen_Treo_thiet_bi_can_thiet_item_ID != "")
                              {
                                    for (int i = 0; i < 0x24; i++)
                                    {
                                          if (BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[i].VAT_PHAM_ID, 0) == int.Parse(World.Cach_tuyen_Treo_thiet_bi_can_thiet_item_ID))
                                          {
                                                flag = true;
                                                break;
                                          }
                                    }
                                    if (!flag)
                                    {
                                          base.GameMessage("You do not hang off-Machine Req " + TBL_XWWL_ITEM.smethod_1(int.Parse(World.Cach_tuyen_Treo_thiet_bi_can_thiet_item_ID)) + " ，You can not hang offline-machine", 15, "Goodbye prompt");
                                          return;
                                    }
                              }
                              if ((base.TO_DOI_ID != 0) && World.W_TO_DOI.TryGetValue(base.TO_DOI_ID, out to_doi_class))
                              {
                                    to_doi_class.method_3(this);
                              }
                              if (base.bool_5)
                              {
                                    base.GameMessage("You can not hang open shops machine.", 9, "system hint");
                              }
                              else if ((base.class66_0 != null) && base.class66_0.bool_0)
                              {
                                    base.GameMessage("Transactions can not hang machine.", 9, "system hint");
                              }
                              else
                              {
                                    Form1.WriteLine(3, "UserName:" + base.UserName + " Offline System");
                                    base.Client.method_18();
                              }
                        }
                  }
            }

            public void TRIEU_HOI_LINH_THU(byte[] byte_5, int int_128)
            {
                  this.Packet_Modify(byte_5, int_128);
                  if ((BitConverter.ToInt32(base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[14].VAT_PHAM_ID, 0) != 0) && World.Itme.ContainsKey(BitConverter.ToInt32(base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[14].VAT_PHAM_ID, 0)))
                  {
                        TBL_XWWL_ITEM tbl_xwwl_item = World.Itme[BitConverter.ToInt32(base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[14].VAT_PHAM_ID, 0)];
                        if (tbl_xwwl_item.FLD_RESIDE2 == 15)
                        {
                              if (base.NHAN_VAT_LINH_THU == null)
                              {
                                    base.DOC_DU_LIEU_PET(BitConverter.ToInt64(base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[14].Item_toan_bo_ID, 0));
                                    if ((base.NHAN_VAT_LINH_THU != null) && (base.NHAN_VAT_LINH_THU.ZrName == base.UserName))
                                    {
                                          base.NHAN_VAT_LINH_THU.class15_0 = this;
                                          if ((base.NHAN_VAT_LINH_THU.FLD_JOB == 1) && (base.NHAN_VAT_LINH_THU.FLD_JOB_LEVEL == 3))
                                          {
                                                base.bool_8 = true;
                                                base.FLD_trang_bi_them_vao_HP += 100;
                                                this.UpdateHP_MP_SP();
                                          }
                                          if (base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[14].GetItem_ID == 0x3b9acf61L)
                                          {
                                                base.NHAN_VAT_LINH_THU.CallPet(1);
                                                base.GameMessage("Successful summon Pink Wolf", 9, "System hint");
                                          }
                                          if (base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[14].GetItem_ID == 0x3b9acf62L)
                                          {
                                                base.NHAN_VAT_LINH_THU.CallPet(2);
                                                base.GameMessage("Success summon Golden Wolf", 9, "System hint");
                                          }
                                          if (base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[14].GetItem_ID == 0x3b9acf63L)
                                          {
                                                base.NHAN_VAT_LINH_THU.CallPet(3);
                                                base.GameMessage("Successful summon Yin Lang", 9, "System hint");
                                          }
                                          base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[14].bool_0 = true;
                                          this.Method_SpPetMsgOpen(0, 1);
                                          base.NHAN_VAT_LINH_THU.NHAN_VAT_TOA_DO_X = base.CharacterCoords_X;
                                          base.NHAN_VAT_LINH_THU.NHAN_VAT_TOA_DO_Y = base.CharacterCoords_Y;
                                          base.NHAN_VAT_LINH_THU.NHAN_VAT_TOA_DO_Z = base.CharacterCoords_Z;
                                          base.NHAN_VAT_LINH_THU.NHAN_VAT_TOA_DO_MAP = base.CharacterCoords_Map;
                                          this.Method_SpPetQuickInfo(this);
                                          this.Method_SpPetHungry();
                                          this.Method_SpPetExp();
                                          this.Method_Cap_Nhat_Linh_Thu_Vo_Cong_Trang_Thai();
                                          this.Method_Linh_Thu_Mang_Nang();
                                          this.Method_Linh_Thu_Vat_Pham();
                                          base.Update_Figure_Data(this);
                                          base.Update_Data_Boardcast();
                                    }
                                    else
                                    {
                                          this.long_16 = BitConverter.ToInt64(base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[14].Item_toan_bo_ID, 0);
                                          if (tbl_xwwl_item.FLD_PID == 0x3b9aca41)
                                          {
                                                this.int_120 = 1;
                                          }
                                          else if (tbl_xwwl_item.FLD_PID == 0x3b9aca42)
                                          {
                                                this.int_120 = 2;
                                          }
                                          else if (tbl_xwwl_item.FLD_PID == 0x3b9aca43)
                                          {
                                                this.int_120 = 3;
                                          }
                                          else if (tbl_xwwl_item.FLD_PID == 0x3b9aca44)
                                          {
                                                this.int_120 = 4;
                                          }
                                          else if (tbl_xwwl_item.FLD_PID == 0x3b9aca53)
                                          {
                                                this.int_120 = 1;
                                          }
                                          else if (tbl_xwwl_item.FLD_PID == 0x3b9aca54)
                                          {
                                                this.int_120 = 2;
                                          }
                                          else if (tbl_xwwl_item.FLD_PID == 0x3b9aca55)
                                          {
                                                this.int_120 = 3;
                                          }
                                          else if (tbl_xwwl_item.FLD_PID == 0x3b9aca56)
                                          {
                                                this.int_120 = 4;
                                          }
                                          else if (tbl_xwwl_item.FLD_PID == 0x3b9acdf3)
                                          {
                                                this.int_120 = 5;
                                          }
                                          else if (tbl_xwwl_item.FLD_PID == 0x3b9acf61)
                                          {
                                                this.int_120 = 5;
                                          }
                                          else if (tbl_xwwl_item.FLD_PID == 0x3b9acf62)
                                          {
                                                this.int_120 = 5;
                                          }
                                          else if (tbl_xwwl_item.FLD_PID == 0x3b9acf63)
                                          {
                                                this.int_120 = 5;
                                          }
                                          base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[14].bool_0 = true;
                                          this.Method_SpPetMsgOpen(0, 100);
                                    }
                              }
                              else
                              {
                                    if (base.NHAN_VAT_LINH_THU != null)
                                    {
                                          base.NHAN_VAT_LINH_THU.method_1();
                                    }
                                    this.Method_SpPetMsgOpen(1, 1);
                                    base.method_91(this, this);
                                    base.NHAN_VAT_LINH_THU.Dispose();
                                    base.NHAN_VAT_LINH_THU = null;
                                    base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[14].bool_0 = false;
                              }
                        }
                  }
            }

            public void TRUC_TUYEN_THOI_GIAN_KHEN_THUONG()
            {
                  try
                  {
                        using (Dictionary<int, ns2.TRUC_TUYEN_THOI_GIAN_KHEN_THUONG>.ValueCollection.Enumerator enumerator = World.dictionary_18.Values.GetEnumerator())
                        {
                              while (enumerator.MoveNext())
                              {
                                    ns2.TRUC_TUYEN_THOI_GIAN_KHEN_THUONG current = enumerator.Current;
                                    if (base.TONG_QUAT_TUYEN_THOI_GIAN == current.THOI_GIAN_PHUT)
                                    {
                                          char[] separator = new char[] { ',' };
                                          string[] strArray = World.Thang_cap_thanh_vien_can_Thuoc_tinh.Split(separator);
                                          if (current.VO_HUAN != 0)
                                          {
                                                base.Player_WuXun += current.VO_HUAN;
                                                base.GameMessage("Obtain Wu Xun" + current.VO_HUAN.ToString() + "point!", 20, "Online Time Rewards");
                                                base.UpdatePowersAndStatus();
                                          }
                                          if (current.TRANG_PHUC_ID != 0)
                                          {
                                                int num2 = base.DUOC_KIEN_HANG_RONG_VI_TRI();
                                                if (num2 == -1)
                                                {
                                                      goto Label_04C8;
                                                }
                                                byte[] bytes = BitConverter.GetBytes(RxjhClass.GetDBItmeId());
                                                byte[] buffer2 = new byte[0x38];
                                                this.TANG_CUONG_VAT_PHAM_1(bytes, BitConverter.GetBytes(current.TRANG_PHUC_ID), num2, BitConverter.GetBytes(1), buffer2, false);
                                                base.GameMessage("Congratulations, you get a package. Quickly open and see", 20, "Online Time Rewards");
                                          }
                                          if ((current.CASH != 0) && (base.FLD_RXPIONT != World.Nhan_vat_lon_nhat_CASH_so_luong))
                                          {
                                                this.KIEM_TRA_BACH_BAO_CAC_NGUYEN_BAO_SO_LUONG();
                                                base.KIEM_SOAT_CASH_SO_LIEU(current.CASH, 1);
                                                base.GameMessage("get" + current.CASH.ToString() + "Ingot!", 20, "Online Time Rewards");
                                                base.UPDATE_RXPIONT();
                                          }
                                          if (current.SINH_MENH != 0)
                                          {
                                                base.Khen_thuong_them_vao_sinh_menh += current.SINH_MENH;
                                                base.UpdatePowersAndStatus();
                                                base.GameMessage("get" + current.SINH_MENH.ToString() + "life value!", 20, "Online Time Rewards");
                                          }
                                          if ((current.CONG_KICH != 0) && (base.Khen_thuong_them_vao_cong_kich < long.Parse(strArray[0])))
                                          {
                                                base.Khen_thuong_them_vao_cong_kich += current.CONG_KICH;
                                                base.UpdatePowersAndStatus();
                                                base.GameMessage("get" + current.CONG_KICH.ToString() + "Attack!", 20, "Online Time Rewards");
                                          }
                                          if ((current.PHONG_NGU != 0) && (base.Khen_thuong_them_vao_phong_ngu < long.Parse(strArray[1])))
                                          {
                                                base.Khen_thuong_them_vao_phong_ngu += current.PHONG_NGU;
                                                base.UpdatePowersAndStatus();
                                                base.GameMessage("get" + current.PHONG_NGU.ToString() + "Defense!", 20, "Online Time Rewards");
                                          }
                                          if (current.NE_TRANH != 0)
                                          {
                                                base.Khen_thuong_them_vao_ne_tranh += current.NE_TRANH;
                                                base.UpdatePowersAndStatus();
                                                base.GameMessage("get" + current.NE_TRANH.ToString() + "Avoid value!", 20, "Online Time Rewards");
                                          }
                                          if (current.TRUNG_MUC_TIEU != 0)
                                          {
                                                base.Khen_thuong_them_vao_trung_muc_tieu += current.TRUNG_MUC_TIEU;
                                                base.UpdatePowersAndStatus();
                                                base.GameMessage("get" + current.TRUNG_MUC_TIEU.ToString() + "Hits value!", 20, "Online Time Rewards");
                                          }
                                          if (current.NOI_CONG != 0)
                                          {
                                                base.Khen_thuong_them_vao_noi_cong += current.NOI_CONG;
                                                base.UpdatePowersAndStatus();
                                                base.GameMessage("get" + current.NOI_CONG.ToString() + "Internal strength value!", 20, "Online Time Rewards");
                                          }
                                          if (current.TIEN_BAC != "")
                                          {
                                                base.Player_Money += long.Parse(current.TIEN_BAC);
                                                base.GameMessage("Get medal" + current.TIEN_BAC + "Two!", 20, "Online Time Rewards");
                                                base.Get_Money_Tip(uint.Parse(current.TIEN_BAC));
                                                base.UpdateMoneyAndWeight();
                                          }
                                          if (current.GOI_VIP_ITEM != "")
                                          {
                                                int num3 = base.DUOC_KIEN_HANG_RONG_VI_TRI();
                                                if (num3 == -1)
                                                {
                                                      goto Label_04DC;
                                                }
                                                char[] chArray2 = new char[] { ';' };
                                                string[] strArray2 = current.GOI_VIP_ITEM.Split(chArray2);
                                                this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(int.Parse(strArray2[0]), num3, int.Parse(strArray2[1]), int.Parse(strArray2[2]), int.Parse(strArray2[3]), int.Parse(strArray2[4]), int.Parse(strArray2[5]), int.Parse(strArray2[6]), int.Parse(strArray2[7]), int.Parse(strArray2[8]), int.Parse(strArray2[9]), int.Parse(strArray2[10]), int.Parse(strArray2[11]));
                                                base.GameMessage("Congratulations, you get a prize. Quickly open and see", 20, "Online Time Rewards");
                                          }
                                          if (current.会员天数 != 0)
                                          {
                                                DateTime now = DateTime.Now;
                                                now = DateTime.Now.AddDays((double)current.会员天数);
                                                base.FLD_VIP = 1;
                                                base.FLD_VIPTIM = now;
                                                base.LUU_THANH_VIEN_SO_LIEU();
                                                base.GameMessage("Congratulations, you get" + current.会员天数.ToString() + "Day membership, please check the small back!", 10, "Online Time Rewards");
                                          }
                                    }
                              }
                              return;
                              Label_04C8:
                              base.GameMessage("Backpack no vacancy, and quickly clean up under the bar.", 20, "Online Time Rewards");
                              return;
                              Label_04DC:
                              base.GameMessage("Backpack no vacancy, and quickly clean up under the bar.", 20, "Online Time Rewards");
                        }
                  }
                  catch (Exception exception)
                  {
                        Form1.WriteLine(1, "在线时间奖励系统出错! [" + base.Userid + "]-[" + base.UserName + "]" + exception.Message);
                  }
            }

            public void TRUNG_SINH_LEVEL_KHEN_THUONG()
            {
                  try
                  {
                        using (Dictionary<int, DANG_CAP_KHEN_THUONG>.ValueCollection.Enumerator enumerator = World.dictionary_16.Values.GetEnumerator())
                        {
                              while (enumerator.MoveNext())
                              {
                                    DANG_CAP_KHEN_THUONG current = enumerator.Current;
                                    char[] separator = new char[] { ',' };
                                    string[] strArray = World.Thang_cap_thanh_vien_can_Thuoc_tinh.Split(separator);
                                    if (base.Player_FLD_LEVEL == current.CAP_BAC)
                                    {
                                          if (current.VO_HUAN != 0)
                                          {
                                                base.Player_WuXun += current.VO_HUAN;
                                                base.GameMessage("Nhan duoc " + current.VO_HUAN.ToString() + " diem Vo Huan!", 10, "System");
                                                base.UpdatePowersAndStatus();
                                          }
                                          if (current.TRANG_PHUC_ID != 0)
                                          {
                                                int num2 = base.DUOC_KIEN_HANG_RONG_VI_TRI();
                                                if (num2 == -1)
                                                {
                                                      goto Label_05FC;
                                                }
                                                byte[] bytes = BitConverter.GetBytes(RxjhClass.GetDBItmeId());
                                                byte[] buffer2 = new byte[0x38];
                                                this.TANG_CUONG_VAT_PHAM_1(bytes, BitConverter.GetBytes(current.TRANG_PHUC_ID), num2, BitConverter.GetBytes(1), buffer2, false);
                                                base.GameMessage("Ban nhan duoc 01 vat pham trong tui do, hay kiem tra ngay !!", 10, "System");
                                          }
                                          if (current.CASH != 0)
                                          {
                                                this.KIEM_TRA_BACH_BAO_CAC_NGUYEN_BAO_SO_LUONG();
                                                base.KIEM_SOAT_CASH_SO_LIEU(current.CASH, 1);
                                                base.GameMessage("Nhan duoc " + current.CASH.ToString() + " @Cash !", 10, "System");
                                                base.UPDATE_RXPIONT();
                                          }
                                          if (current.SINH_MENH != 0)
                                          {
                                                base.Khen_thuong_them_vao_sinh_menh += current.SINH_MENH;
                                                base.UpdatePowersAndStatus();
                                                base.GameMessage("get" + current.SINH_MENH.ToString() + "life value!", 20, "Rating reward");
                                          }
                                          if ((current.CONG_KICH != 0) && (base.Khen_thuong_them_vao_cong_kich < long.Parse(strArray[0])))
                                          {
                                                base.Khen_thuong_them_vao_cong_kich += current.CONG_KICH;
                                                base.UpdatePowersAndStatus();
                                                base.GameMessage("get" + current.CONG_KICH.ToString() + "Attack!", 20, "Rating reward");
                                          }
                                          if ((current.PHONG_NGU != 0) && (base.Khen_thuong_them_vao_phong_ngu < long.Parse(strArray[1])))
                                          {
                                                base.Khen_thuong_them_vao_phong_ngu += current.PHONG_NGU;
                                                base.UpdatePowersAndStatus();
                                                base.GameMessage("get" + current.PHONG_NGU.ToString() + "Defense!", 20, "Rating reward");
                                          }
                                          if (current.NE_TRANH != 0)
                                          {
                                                base.Khen_thuong_them_vao_ne_tranh += current.NE_TRANH;
                                                base.UpdatePowersAndStatus();
                                                base.GameMessage("get" + current.NE_TRANH.ToString() + "Avoid value!", 20, "Rating reward");
                                          }
                                          if (current.TRUNG_MUC_TIEU != 0)
                                          {
                                                base.Khen_thuong_them_vao_trung_muc_tieu += current.TRUNG_MUC_TIEU;
                                                base.UpdatePowersAndStatus();
                                                base.GameMessage("get" + current.TRUNG_MUC_TIEU.ToString() + "Hits value!", 20, "Rating reward");
                                          }
                                          if (current.NOI_CONG != 0)
                                          {
                                                base.Khen_thuong_them_vao_noi_cong += current.NOI_CONG;
                                                base.UpdatePowersAndStatus();
                                                base.GameMessage("get" + current.NOI_CONG.ToString() + "Internal strength value!", 20, "Rating reward");
                                          }
                                          if (current.TIEN_BAC != "")
                                          {
                                                base.Player_Money += long.Parse(current.TIEN_BAC);
                                                base.GameMessage("Get medal" + current.TIEN_BAC + "Two!", 20, "Rating reward");
                                                base.Get_Money_Tip(uint.Parse(current.TIEN_BAC));
                                                base.UpdateMoneyAndWeight();
                                          }
                                          if (current.GOI_VIP_VAT_PHAM_1 != "")
                                          {
                                                int num3 = base.DUOC_KIEN_HANG_RONG_VI_TRI();
                                                if (num3 == -1)
                                                {
                                                      goto Label_0635;
                                                }
                                                char[] chArray2 = new char[] { ';' };
                                                string[] strArray2 = current.GOI_VIP_VAT_PHAM_1.Split(chArray2);
                                                this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(int.Parse(strArray2[0]), num3, int.Parse(strArray2[1]), int.Parse(strArray2[2]), int.Parse(strArray2[3]), int.Parse(strArray2[4]), int.Parse(strArray2[5]), int.Parse(strArray2[6]), int.Parse(strArray2[7]), int.Parse(strArray2[8]), int.Parse(strArray2[9]), int.Parse(strArray2[10]), int.Parse(strArray2[11]));
                                                base.GameMessage("Congratulations, you get a prize. Quickly open and see", 20, "Rating reward");
                                          }
                                          if (current.GOI_VIP_VAT_PHAM_2 != "")
                                          {
                                                int num4 = base.DUOC_KIEN_HANG_RONG_VI_TRI();
                                                if (num4 == -1)
                                                {
                                                      goto Label_066E;
                                                }
                                                char[] chArray3 = new char[] { ';' };
                                                string[] strArray3 = current.GOI_VIP_VAT_PHAM_2.Split(chArray3);
                                                this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(int.Parse(strArray3[0]), num4, int.Parse(strArray3[1]), int.Parse(strArray3[2]), int.Parse(strArray3[3]), int.Parse(strArray3[4]), int.Parse(strArray3[5]), int.Parse(strArray3[6]), int.Parse(strArray3[7]), int.Parse(strArray3[8]), int.Parse(strArray3[9]), int.Parse(strArray3[10]), int.Parse(strArray3[11]));
                                                base.GameMessage("Congratulations, you get a prize. Quickly open and see", 20, "Rating reward");
                                          }
                                          if (current.THANH_VIEN_THANG_THIEN != 0)
                                          {
                                                DateTime now = DateTime.Now;
                                                now = DateTime.Now.AddDays((double)current.THANH_VIEN_THANG_THIEN);
                                                base.FLD_VIP = 1;
                                                base.FLD_VIPTIM = now;
                                                base.LUU_THANH_VIEN_SO_LIEU();
                                                base.GameMessage("Congratulations, you get" + current.THANH_VIEN_THANG_THIEN.ToString() + "Day membership, please check the small back!", 10, "Rating reward");
                                          }
                                          if ((current.THANH_VIEN_THU_BAC != 0) && (base.Thanh_vien_thu_bac < World.Nhan_vat_level_cao_nhat))
                                          {
                                                if ((base.Thanh_vien_thu_bac + current.THANH_VIEN_THU_BAC) > World.Nhan_vat_level_cao_nhat)
                                                {
                                                      base.Thanh_vien_thu_bac = World.Nhan_vat_level_cao_nhat;
                                                }
                                                else
                                                {
                                                      base.Thanh_vien_thu_bac += current.THANH_VIEN_THU_BAC;
                                                      base.GameMessage("Congratulations, you get VIP Level" + current.THANH_VIEN_THU_BAC.ToString() + "level!", 10, "Rating reward");
                                                }
                                                base.LUU_NHAN_VAT_SO_LIEU();
                                          }
                                    }
                              }
                              return;
                              Label_05FC:
                              base.GameMessage("Tui do day khong the nhan thuong !!.", 20, "Rating reward");
                              Form1.WriteLine(9, base.UserName + "  Tui do day o dang cap : " + base.Player_FLD_LEVEL);
                              return;
                              Label_0635:
                              base.GameMessage("Tui do day khong the nhan thuong !!.", 20, "Rating reward");
                              Form1.WriteLine(9, base.UserName + "  Tui do day o dang cap : " + base.Player_FLD_LEVEL);
                              return;
                              Label_066E:
                              base.GameMessage("Tui do day khong the nhan thuong !!..", 20, "Rating reward");
                              Form1.WriteLine(9, base.UserName + "  Tui do day o dang cap : " + base.Player_FLD_LEVEL);
                        }
                  }
                  catch (Exception exception)
                  {
                        Form1.WriteLine(1, "等级奖励系统出错! [" + base.Userid + "]-[" + base.UserName + "]" + exception.Message);
                  }
            }

            public void TRUONG_BACH_DAN(byte[] byte_5, int int_128)
            {
                  try
                  {
                        this.Packet_Modify(byte_5, int_128);
                        byte[] dst = new byte[4];
                        Buffer.BlockCopy(byte_5, 0x13, dst, 0, 2);
                        if ((BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[BitConverter.ToInt32(dst, 0)].VAT_PHAM_ID, 0) == 0x3c14dc09) || (BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[BitConverter.ToInt32(dst, 0)].VAT_PHAM_ID, 0) == 0x3c14dc0a))
                        {
                              this.LAM_GIAM_DI_VAT_PHAM(BitConverter.ToInt32(dst, 0), 1);
                              int num = 0;
                              for (int i = 0; i < 12; i++)
                              {
                                    int num3;
                                    int num4;
                                    if (byte_5[0x13 + (i * 4)] != 0)
                                    {
                                          num3 = 0;
                                          while (num3 < 12)
                                          {
                                                if (base.Qigong[num3].int_0 == byte_5[0x13 + (i * 4)])
                                                {
                                                      goto Label_00A6;
                                                }
                                                num3++;
                                          }
                                    }
                                    continue;
                                    Label_00A6:
                                    num4 = byte_5[0x15 + (i * 4)];
                                    num += byte_5[0x15 + (i * 4)];
                                    QigongClass class1 = base.Qigong[num3];
                                    class1.气功量 -= num4;
                              }
                              base.Player_Qigong_point += num;
                              byte[] buffer2 = Converter.hexStringToByte("AA553600015204021027000100060007FC64EF294B210809DC143C0000000000000500000000000000000000000000000000000000000000D01155AA");
                              Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, buffer2, 5, 2);
                              if (base.Client != null)
                              {
                                    base.Client.method_8(buffer2, buffer2.Length);
                              }
                              base.Update_Qigong();
                              base.UpdatePowersAndStatus();
                              this.UpdateHP_MP_SP();
                        }
                  }
                  catch (Exception exception)
                  {
                        Form1.WriteLine(1, "长白丹 出错：" + exception);
                  }
            }

            public void TU_VONG_CAM_TAN_CONG_NGUOI_CHOI()
            {
                  if (this.timer_2 != null)
                  {
                        this.timer_2.Enabled = false;
                        this.timer_2.Close();
                        this.timer_2.Dispose();
                        this.timer_2 = null;
                  }
                  if (this.timer_1 != null)
                  {
                        this.timer_1.Enabled = false;
                        this.timer_1.Close();
                        this.timer_1.Dispose();
                        this.timer_1 = null;
                  }
            }

            public void TU_VONG_TRO_VE_THANH(byte[] byte_5, int int_128)
            {
                  try
                  {
                        this.Packet_Modify(byte_5, int_128);
                        byte[] dst = new byte[4];
                        Buffer.BlockCopy(byte_5, 11, dst, 0, 1);
                        switch (BitConverter.ToInt32(dst, 0))
                        {
                              case 0x63:
                                    break;

                              case 100:
                                    this.Move(base.CharacterCoords_X, base.CharacterCoords_Y, base.CharacterCoords_Z, base.CharacterCoords_Map);
                                    base.NHAN_VAT_HP = base.NHAN_VAT_LON_NHAT_HP;
                                    this.UpdateHP_MP_SP();
                                    base.PlayerIsDead = false;
                                    return;

                              case 0x65:
                              case 0x67:
                              case 0x68:
                                    return;

                              case 0x66:
                                    this.Move(base.CharacterCoords_X, base.CharacterCoords_Y, base.CharacterCoords_Z, base.CharacterCoords_Map);
                                    base.NHAN_VAT_HP = base.NHAN_VAT_LON_NHAT_HP;
                                    this.UpdateHP_MP_SP();
                                    base.PlayerIsDead = false;
                                    return;

                              case 0x69:
                                    this.Move(base.CharacterCoords_X, base.CharacterCoords_Y, base.CharacterCoords_Z, base.CharacterCoords_Map);
                                    base.NHAN_VAT_HP = base.NHAN_VAT_LON_NHAT_HP;
                                    this.UpdateHP_MP_SP();
                                    base.PlayerIsDead = false;
                                    return;

                              case 0x58:
                                    this.Teleport(byte_5, int_128);
                                    return;

                              case 8:
                                    goto Label_01F9;

                              default:
                                    return;
                        }
                        bool flag = false;
                        using (List<TBL_XWWL_MAP>.Enumerator enumerator = World.list_15.GetEnumerator())
                        {
                              TBL_XWWL_MAP current;
                              while (enumerator.MoveNext())
                              {
                                    current = enumerator.Current;
                                    if (current.Rxjh_Map == base.CharacterCoords_Map)
                                    {
                                          goto Label_014E;
                                    }
                              }
                              goto Label_0182;
                              Label_014E:
                              this.Move(current.Rxjh_X, current.Rxjh_Y, current.Rxjh_Z, current.Rxjh_Map);
                              flag = true;
                        }
                        Label_0182:
                        if (!flag)
                        {
                              char[] separator = new char[] { ',' };
                              string[] strArray = World.Tu_vong_tro_ve_thanh_Ban_do_Toa_do.Trim().Split(separator);
                              this.Move((float)int.Parse(strArray[1]), (float)int.Parse(strArray[2]), 15f, int.Parse(strArray[0]));
                        }
                        base.NHAN_VAT_HP = base.NHAN_VAT_LON_NHAT_HP;
                        this.UpdateHP_MP_SP();
                        this.BAT_GIU_KIEM_TRA_LAI_PHAM_VI_NGUOI_CHOI();
                        this.BAT_GIU_KIEM_TRA_LAI_NPC();
                        this.BAT_GIU_KIEM_TRA_LAI_PHAM_VI_MAT_DAT_VAT_PHAM();
                        base.PlayerIsDead = false;
                        return;
                        Label_01F9:
                        if (base.int_4 == 8)
                        {
                              float num2 = BitConverter.ToSingle(byte_5, 15);
                              float num3 = BitConverter.ToSingle(byte_5, 0x17);
                              this.Move(num2, num3, 15f, base.CharacterCoords_Map);
                        }
                        else
                        {
                              base.GameMessage("Do not use invincible plug-in, your system ID to be recorded, repeated use of the system will automatically title", 9, "system hint");
                              Form1.WriteLine(2, "使用无敌外挂[" + base.Userid + "]-[" + base.UserName + "]");
                              if (base.Client != null)
                              {
                                    base.Client.Dispose();
                              }
                        }
                  }
                  catch (Exception exception)
                  {
                        Form1.WriteLine(1, "死亡回城出错[" + base.Userid + "]-[" + base.UserName + "]" + exception.Message);
                  }
            }

            public void TU_VONG_TRO_VE_THANH_2(byte[] byte_5, int int_128)
            {
                  try
                  {
                        bool flag;
                        this.Packet_Modify(byte_5, int_128);
                        byte[] dst = new byte[4];
                        Buffer.BlockCopy(byte_5, 11, dst, 0, 1);
                        switch (BitConverter.ToInt32(dst, 0))
                        {
                              case 0:
                                    goto Label_0065;

                              case 1:
                                    this.Move(base.CharacterCoords_X, base.CharacterCoords_Y, base.CharacterCoords_Z, base.CharacterCoords_Map);
                                    base.NHAN_VAT_HP = base.NHAN_VAT_LON_NHAT_HP;
                                    this.UpdateHP_MP_SP();
                                    base.PlayerIsDead = false;
                                    break;
                        }
                        return;
                        Label_0065:
                        flag = false;
                        using (List<TBL_XWWL_MAP>.Enumerator enumerator = World.list_15.GetEnumerator())
                        {
                              TBL_XWWL_MAP current;
                              while (enumerator.MoveNext())
                              {
                                    current = enumerator.Current;
                                    if (current.Rxjh_Map == base.CharacterCoords_Map)
                                    {
                                          goto Label_0097;
                                    }
                              }
                              goto Label_00CB;
                              Label_0097:
                              this.Move(current.Rxjh_X, current.Rxjh_Y, current.Rxjh_Z, current.Rxjh_Map);
                              flag = true;
                        }
                        Label_00CB:
                        if (!flag)
                        {
                              char[] separator = new char[] { ',' };
                              string[] strArray = World.Tu_vong_tro_ve_thanh_Ban_do_Toa_do.Trim().Split(separator);
                              this.Move((float)int.Parse(strArray[1]), (float)int.Parse(strArray[2]), 15f, int.Parse(strArray[0]));
                        }
                        base.NHAN_VAT_HP = base.NHAN_VAT_LON_NHAT_HP;
                        this.UpdateHP_MP_SP();
                        this.BAT_GIU_KIEM_TRA_LAI_PHAM_VI_NGUOI_CHOI();
                        this.BAT_GIU_KIEM_TRA_LAI_NPC();
                        this.BAT_GIU_KIEM_TRA_LAI_PHAM_VI_MAT_DAT_VAT_PHAM();
                        base.PlayerIsDead = false;
                  }
                  catch (Exception exception)
                  {
                        Form1.WriteLine(1, "死亡回城2出错[" + base.Userid + "]-[" + base.UserName + "]" + exception.Message);
                  }
            }

            public void TUYET_ROI()
            {
                  byte[] dst = Converter.hexStringToByte("AA5513000014047F000400A0CB0000000000000000000055AA");
                  Buffer.BlockCopy(BitConverter.GetBytes(0x3b9acd93), 0, dst, 11, 4);
                  Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, dst, 5, 2);
                  if (base.Client != null)
                  {
                        base.Client.Send(dst, dst.Length);
                  }
                  this.vmethod_0(dst, dst.Length);
            }

            public void UNKNOWN_01(byte[] byte_5, int int_128)
            {
                  byte[] bytes = new byte[15];
                  for (int i = 0; i < 15; i++)
                  {
                        if (byte_5[11 + i] == 0)
                        {
                              break;
                        }
                        bytes[i] = byte_5[11 + i];
                  }
                  Players players = World.smethod_2(Encoding.Default.GetString(bytes).Replace("\0", "").Trim());
                  if (players != null)
                  {
                        byte[] dst = Converter.hexStringToByte("AA550007009200611001000255AA");
                        Buffer.BlockCopy(BitConverter.GetBytes(players.Player_Job), 0, dst, 11, 2);
                        Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, dst, 5, 2);
                        if (base.Client != null)
                        {
                              base.Client.method_8(dst, dst.Length);
                        }
                  }
            }

            public void UNKNOWN_299(string string_10, string string_11, int int_128, int int_129, int int_130, int int_131, int int_132, int int_133)
            {
                  try
                  {
                        byte[] dst = Converter.hexStringToByte("AA55460000D2031C1640000000000000000000000000000000000000000000000000000000000000000000000000000000000001000100000000000000000001000000030000000200000055AA");
                        byte[] bytes = Encoding.Default.GetBytes(string_10);
                        byte[] src = Encoding.Default.GetBytes(string_11);
                        Buffer.BlockCopy(src, 0, dst, 11, src.Length);
                        Buffer.BlockCopy(bytes, 0, dst, 0x1b, bytes.Length);
                        Buffer.BlockCopy(BitConverter.GetBytes(int_129), 0, dst, 0x33, 2);
                        Buffer.BlockCopy(BitConverter.GetBytes(int_130), 0, dst, 0x35, 2);
                        Buffer.BlockCopy(BitConverter.GetBytes(int_131), 0, dst, 0x3f, 2);
                        Buffer.BlockCopy(BitConverter.GetBytes(int_132), 0, dst, 0x43, 1);
                        Buffer.BlockCopy(BitConverter.GetBytes(int_133), 0, dst, 0x47, 1);
                        Buffer.BlockCopy(BitConverter.GetBytes(int_128), 0, dst, 0x2b, 4);
                        Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, dst, 5, 2);
                        foreach (Players players in World.allConnectedChars.Values)
                        {
                              if (players.Client != null)
                              {
                                    players.Client.method_8(dst, dst.Length);
                              }
                        }
                  }
                  catch (Exception)
                  {
                  }
            }

            public void UNKNOWN_300(int int_128, int int_129)
            {
                  try
                  {
                        byte[] dst = Converter.hexStringToByte("AA551F0000DC0102311000DC0100000000000001000000FFEF0100000000000000000055AA");
                        Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, dst, 5, 2);
                        Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, dst, 11, 2);
                        Buffer.BlockCopy(BitConverter.GetBytes(int_128), 0, dst, 0x13, 4);
                        Buffer.BlockCopy(BitConverter.GetBytes(int_129), 0, dst, 0x17, 4);
                        if (base.Client != null)
                        {
                              base.Client.Send(dst, dst.Length);
                        }
                        this.vmethod_0(dst, dst.Length);
                  }
                  catch (Exception)
                  {
                  }
            }

            public bool UNKNOWN_309(Players class15_0, long long_17)
            {
                  bool flag;
                  try
                  {
                        for (int i = 0; i < 0x42; i++)
                        {
                              if ((class15_0.TRANG_BI_LAN_BAO_VAY[i].GetItem_toan_bo_ID != 0) && (class15_0.TRANG_BI_LAN_BAO_VAY[i].GetItem_toan_bo_ID == long_17))
                              {
                                    goto Label_0030;
                              }
                        }
                        return false;
                        Label_0030:
                        flag = true;
                  }
                  catch (Exception exception)
                  {
                        Form1.WriteLine(6, "查复制VAT_PHAM_入 出错![" + class15_0.Userid + "]-[" + class15_0.UserName + "]" + exception.ToString());
                        flag = false;
                  }
                  return flag;
            }

            public void UNKNOWN_327()
            {
                  using (PacketData data = new PacketData())
                  {
                        data.Write4(1);
                        if (base.Client != null)
                        {
                              base.Client.method_5(data, 0x600, base.UserSessionID, 0);
                        }
                  }
            }

            public void unknown_328()
            {
                  try
                  {
                        DataTable dBToDataTable = DBA.GetDBToDataTable($"SELECT * FROM TBL_XWWL_Cw WHERE ZrName ='{base.UserName}'");
                        if (dBToDataTable.Rows.Count <= 2)
                        {
                              int count = dBToDataTable.Rows.Count;
                        }
                  }
                  catch
                  {
                  }
                  PacketData data = new PacketData();
                  data.Write4(11);
                  data.Write4(0);
                  if (base.Client != null)
                  {
                        base.Client.method_5(data, 0x5910, base.UserSessionID, 0);
                  }
            }

            public void UNKNOWN_385_VAT_PHAM(int int_128, int int_129)
            {
                  PacketData data = new PacketData();
                  data.Write4(1);
                  data.Write4(1);
                  data.Write4(int_128);
                  data.Write4(int_129);
                  data.Write4(0);
                  data.Write2(0);
                  if (base.Client != null)
                  {
                        base.Client.method_5(data, 0xf00, base.UserSessionID, 0);
                  }
            }

            public void UNKNOWN_441(int int_128, int int_129, int int_130, int int_131, int int_132)
            {
                  PacketData data = new PacketData();
                  data.Write4(int_128);
                  data.Write4(int_129);
                  data.Write4(int_130);
                  data.Write4(0);
                  data.Write4(int_131);
                  data.Write4(int_132);
                  if (base.Client != null)
                  {
                        base.Client.method_4(data, 0x8a00, base.UserSessionID);
                  }
            }

            public void unknown_442(int int_128, int int_129, int int_130)
            {
                  byte[] dst = Converter.hexStringToByte("AA551E0000470387001800C8000000000000000000000000000000102030400000000055AA");
                  Buffer.BlockCopy(BitConverter.GetBytes(int_128), 0, dst, 0x1b, 1);
                  Buffer.BlockCopy(BitConverter.GetBytes(int_129), 0, dst, 0x1c, 1);
                  Buffer.BlockCopy(BitConverter.GetBytes(int_130), 0, dst, 0x1d, 1);
                  Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, dst, 5, 2);
                  if (base.Client != null)
                  {
                        base.Client.method_8(dst, dst.Length);
                  }
            }

            public void UNKNOWN_BANG_PHAI(byte[] byte_5, int int_128)
            {
                  try
                  {
                        this.Packet_Modify(byte_5, int_128);
                        byte[] dst = new byte[4];
                        Buffer.BlockCopy(byte_5, 11, dst, 0, 2);
                        int num = BitConverter.ToInt32(dst, 0);
                        string str = "AA551200002D01EF000200090055000000000000000055AA";
                        byte[] buffer2 = Converter.hexStringToByte("AA553400002D01EF00240000006405000000000000000000000000000000036677777777650000000000000000000055000000000000000055AA");
                        byte[] buffer3 = Converter.hexStringToByte(str);
                        byte[] bytes = new byte[20];
                        for (int i = 0; i < 20; i++)
                        {
                              if (byte_5[13 + i] == 0)
                              {
                                    break;
                              }
                              bytes[i] = byte_5[13 + i];
                        }
                        string s = Encoding.Default.GetString(bytes).Replace("\0", "");
                        byte[] src = Encoding.Default.GetBytes(s);
                        Players players = base.Get_Char_Data(s);
                        if (players != null)
                        {
                              Buffer.BlockCopy(dst, 0, buffer2, 30, 1);
                              Buffer.BlockCopy(src, 0, buffer2, 0x1f, src.Length);
                              RxjhClass.Update_GuildMember_Leve(num, players.UserName);
                              players.Bang_phai_nhan_vat_thu_bac = num;
                              players.KIEM_TRA_BANG_PHAI();
                              this.KIEM_TRA_BANG_PHAI();
                              if (players.Client != null)
                              {
                                    players.Client.Send(buffer2, buffer2.Length);
                              }
                              if (base.Client != null)
                              {
                                    base.Client.Send(buffer2, buffer2.Length);
                              }
                        }
                        else
                        {
                              Buffer.BlockCopy(BitConverter.GetBytes(9), 0, buffer3, 11, 1);
                              if (base.Client != null)
                              {
                                    base.Client.Send(buffer3, buffer3.Length);
                              }
                        }
                  }
                  catch
                  {
                  }
            }

            public void UNKNOWN_CONG_KICH_DANH_SACH(int int_128, int int_129)
            {
                  TBL_XWWL_NPC tbl_xwwl_npc;
                  if (((int_129 >= 0x2710) && MapClass.GetnpcTemplate(base.CharacterCoords_Map).TryGetValue(int_129, out tbl_xwwl_npc)) && (tbl_xwwl_npc.IsNpc != 1))
                  {
                        double num = base.FLD_BasicCharAttack / ((long)World.Sung_vat_Cong_kich_suc_manh_boi_so);
                        int num2 = 0xc9;
                        this.method_427(this, int_129, int_128, (int)num, 0xc9);
                        base.CONG_KICH_DANH_SACH.Clear();
                        using (new Lock(base.CONG_KICH_DANH_SACH, "CONG_KICH_DANH_SACH"))
                        {
                              base.CONG_KICH_DANH_SACH.Add(new AttackClass(int_129, int_128, (long)num, num2));
                        }
                  }
            }

            public void UNKNOWN_NHAT_ITEM_6(Players class15_0, MAT_DAT_ITEM_LOAI class85_0, TO_DOI_CLASS class25_0, long long_17)
            {
                  int num = 0;
                  try
                  {
                        TBL_XWWL_ITEM tbl_xwwl_item;
                        VAT_PHAM_LOAI vat_pham_loai;
                        num = 1;
                        if ((class85_0.VAT_PHAM.VAT_PHAM_TONG_TRONG_LUONG + class15_0.NHAN_VAT_MANG_NANG) >= class15_0.NHAN_VAT_MANG_NANG_TONG_TRONG_LUONG)
                        {
                              class15_0.PickItem_Tip(2, long_17);
                              return;
                        }
                        num = 2;
                        int num2 = class15_0.DUOC_KIEN_HANG_RONG(class15_0);
                        if (num2 == -1)
                        {
                              goto Label_0245;
                        }
                        if (!World.Itme.TryGetValue(BitConverter.ToInt32(class85_0.VAT_PHAM.VAT_PHAM_ID, 0), out tbl_xwwl_item))
                        {
                              return;
                        }
                        byte[] bytes = class85_0.VAT_PHAM.VAT_PHAM_SO_LUONG;
                        if (tbl_xwwl_item.FLD_SIDE == 0)
                        {
                              goto Label_0165;
                        }
                        switch (BitConverter.ToInt32(class85_0.VAT_PHAM.VAT_PHAM_ID, 0))
                        {
                              case 0x2faf080b:
                              case 0x2faf080c:
                              case 0x2faf080d:
                              case 0x2faf0802:
                              case 0x2faf0801:
                              case 0x2faf0817:
                              case 0x2faf0818:
                              case 0x2faf0819:
                              case 0x2faf081a:
                              case 0x2faf081b:
                              case 0x2faf081c:
                              case 0x2faf083d:
                              case 0x2faf083e:
                                    break;

                              default:
                                    vat_pham_loai = base.NHAN_NHAN_VAT_ITEM_LOAI_HINH(BitConverter.ToInt32(class85_0.VAT_PHAM.VAT_PHAM_ID, 0));
                                    goto Label_0136;
                        }
                        vat_pham_loai = base.method_108(BitConverter.ToInt32(class85_0.VAT_PHAM.VAT_PHAM_ID, 0), class85_0.VAT_PHAM.FLD_MAGIC0);
                        Label_0136:
                        if (vat_pham_loai != null)
                        {
                              num2 = vat_pham_loai.VAT_PHAM_VI_TRI;
                              bytes = BitConverter.GetBytes((int)(BitConverter.ToInt32(class85_0.VAT_PHAM.VAT_PHAM_SO_LUONG, 0) + BitConverter.ToInt32(vat_pham_loai.VAT_PHAM_SO_LUONG, 0)));
                        }
                        Label_0165:
                        num = 3;
                        class15_0.NHAT_DUOC_ITEM(num2, bytes, class85_0.VAT_PHAM.Item_toan_bo_ID, class85_0.VAT_PHAM.VAT_PHAM_ID, class85_0.VAT_PHAM.Item_thuoc_tinh);
                        num = 4;
                        if (class25_0 != null)
                        {
                              foreach (Players players in class25_0.dictionary_0.Values)
                              {
                                    if ((class15_0 != players) && class15_0.TRA_TIM_PHAM_VI_NGUOI_CHOI(300, players))
                                    {
                                          players.GameMessage(string.Concat(new object[] { class15_0.UserName, " obtain ", class85_0.VAT_PHAM.method_13(), " ", BitConverter.ToInt32(bytes, 0) }), 50, "");
                                    }
                              }
                        }
                        num = 5;
                        class85_0.method_0();
                        num = 6;
                        class15_0.UpdateMoneyAndWeight();
                        return;
                        Label_0245:
                        num = 7;
                        class15_0.PickItem_Tip(7, long_17);
                  }
                  catch (Exception exception)
                  {
                        Form1.WriteLine(1, string.Concat(new object[] { "捡VAT_PHAM出错6 [", base.Userid, "][", base.UserName, "] ID[", num, "] ", exception.Message }));
                  }
            }

            public void UNKNOWN_PACKET02()
            {
                  PacketData data = new PacketData();
                  data.Write4(0);
                  data.Write4(20);
                  data.Write4(1);
                  data.Write4(6);
                  for (int i = 0; i < 20; i++)
                  {
                        data.method_15("哈哈", 15);
                        data.method_15("哈单独哈", 15);
                        data.Write2(2);
                        data.Write2(8);
                        data.Write2(1);
                        data.Write2(0x68);
                        data.Write2(0);
                        data.method_8(0x10L);
                        data.method_8(1L);
                  }
                  if (base.Client != null)
                  {
                        base.Client.method_4(data, 0x5a01, base.UserSessionID);
                  }
                  Console.WriteLine(Converter.smethod_24(data.method_18(0x5a01, base.UserSessionID)));
            }

            public void UNKNOWN_VE_CASH(byte[] byte_5, int int_128)
            {
                  this.KIEM_TRA_BACH_BAO_CAC_NGUYEN_BAO_SO_LUONG();
                  byte[] dst = new byte[4];
                  Buffer.BlockCopy(byte_5, 11, dst, 0, 4);
                  byte[] buffer2 = Converter.hexStringToByte("AA551F00018F022117100004000000110000000000000019000000000000000000419C55AA");
                  if (base.FLD_RXPIONT >= World.CASH_hop_thanh)
                  {
                        Buffer.BlockCopy(BitConverter.GetBytes(1), 0, buffer2, 11, 4);
                  }
                  else
                  {
                        Buffer.BlockCopy(BitConverter.GetBytes(4), 0, buffer2, 11, 4);
                  }
                  Buffer.BlockCopy(BitConverter.GetBytes(base.FLD_RXPIONT), 0, buffer2, 15, 4);
                  Buffer.BlockCopy(BitConverter.GetBytes(0), 0, buffer2, 0x13, 4);
                  Buffer.BlockCopy(BitConverter.GetBytes(World.CASH_hop_thanh), 0, buffer2, 0x17, 4);
                  Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, buffer2, 5, 2);
                  if (base.Client != null)
                  {
                        base.Client.Send(buffer2, buffer2.Length);
                  }
            }

            public void UNKNOWN_VO_CONG(byte[] byte_5, int int_128)
            {
                  try
                  {
                        TBL_XWWL_KONGFU tbl_xwwl_kongfu;
                        this.Packet_Modify(byte_5, int_128);
                        byte[] dst = new byte[4];
                        byte[] buffer2 = new byte[4];
                        Buffer.BlockCopy(byte_5, 15, buffer2, 0, 4);
                        Buffer.BlockCopy(byte_5, 11, dst, 0, 2);
                        if ((BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[BitConverter.ToInt32(dst, 0)].VAT_PHAM_ID, 0) == 0x3c14dc0c) && World.TBL_KONGFU.TryGetValue(BitConverter.ToInt32(buffer2, 0), out tbl_xwwl_kongfu))
                        {
                              base.class79_0[tbl_xwwl_kongfu.FLD_VO_CONG_LOAI_HINH, tbl_xwwl_kongfu.FLD_INDEX] = null;
                              base.Player_ExpErience += tbl_xwwl_kongfu.FLD_NEEDEXP;
                              byte[] buffer3 = Converter.hexStringToByte("AA552600005801041020000100100035597E641D2EE90C0CDC143C0000000000001500F96A06005097130555AA");
                              Buffer.BlockCopy(buffer2, 0, buffer3, 0x23, 4);
                              Buffer.BlockCopy(BitConverter.GetBytes(base.Player_ExpErience), 0, buffer3, 0x27, 4);
                              Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, buffer3, 5, 2);
                              if (base.Client != null)
                              {
                                    base.Client.method_8(buffer3, buffer3.Length);
                              }
                              base.UpdatePowersAndStatus();
                        }
                  }
                  catch (Exception exception)
                  {
                        Form1.WriteLine(1, "长白丹 出错：" + exception);
                  }
            }

            public void Unpacking(byte[] data)
            {
                  try
                  {
                        object[] objArray2;
                        TBL_XWWL_ITEM tbl_xwwl_item;
                        int num = base.DUOC_KIEN_HANG_RONG(this);
                        int index = data[12];
                        byte[] dst = new byte[4];
                        Buffer.BlockCopy(data, 15, dst, 0, 4);
                        if ((BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_ID, 0) != BitConverter.ToInt32(dst, 0)) || (num == -1))
                        {
                              return;
                        }
                        if (BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_ID, 0) == 0x3c14deb2)
                        {
                              if (base.Player_FLD_JOB_LEVEL < 2)
                              {
                                    return;
                              }
                              if (((base.Player_Job == 1) && (base.Player_Zx == 1)) && (base.Player_Sex == 1))
                              {
                                    base.DUOC_KIEN_HANG_RONG(this);
                                    base.DUOC_KIEN_HANG_RONG_VI_TRI();
                                    this.LAM_GIAM_DI_VAT_PHAM(index, 1);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x5f8f245, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x6930f50, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x61a87, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x7a511, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x7a511, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xc38f2, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x4c4b403, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x4c4b403, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x186ab, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x98968f, 0x98968f, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xaae6f, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x989694, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xaae6f, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x989694, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x5f8f245, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0, 0, 0, 0, 0);
                              }
                              else if (((base.Player_Job == 1) && (base.Player_Zx == 1)) && (base.Player_Sex == 2))
                              {
                                    base.DUOC_KIEN_HANG_RONG(this);
                                    base.DUOC_KIEN_HANG_RONG_VI_TRI();
                                    this.LAM_GIAM_DI_VAT_PHAM(index, 1);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x5f8f245, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x72ba5d0, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x61a87, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x7a511, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x7a511, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xc38f2, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x4c4b403, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x4c4b403, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x186ab, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x98968f, 0x98968f, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xaae6f, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x989694, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xaae6f, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x989694, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x5f8f245, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0, 0, 0, 0, 0);
                              }
                              else if (((base.Player_Job == 1) && (base.Player_Zx == 2)) && (base.Player_Sex == 1))
                              {
                                    base.DUOC_KIEN_HANG_RONG(this);
                                    base.DUOC_KIEN_HANG_RONG_VI_TRI();
                                    this.LAM_GIAM_DI_VAT_PHAM(index, 1);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x5f8f62e, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x6931338, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x61a87, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x7a8f9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x7a8f9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xc3cda, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x4c4b403, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x4c4b403, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x186ab, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x98968f, 0x98968f, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xaae6f, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x989694, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xaae6f, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x989694, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x5f8f62e, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0, 0, 0, 0, 0);
                              }
                              else if (((base.Player_Job == 1) && (base.Player_Zx == 2)) && (base.Player_Sex == 2))
                              {
                                    base.DUOC_KIEN_HANG_RONG(this);
                                    base.DUOC_KIEN_HANG_RONG_VI_TRI();
                                    this.LAM_GIAM_DI_VAT_PHAM(index, 1);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x5f8f62e, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x72ba9b8, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x61a87, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x7a8f9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x7a8f9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xc3cda, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x4c4b403, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x4c4b403, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x186ab, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x98968f, 0x98968f, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xaae6f, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x989694, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xaae6f, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x989694, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x5f8f62e, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0, 0, 0, 0, 0);
                              }
                              else if (((base.Player_Job == 2) && (base.Player_Zx == 1)) && (base.Player_Sex == 1))
                              {
                                    base.DUOC_KIEN_HANG_RONG(this);
                                    base.DUOC_KIEN_HANG_RONG_VI_TRI();
                                    this.LAM_GIAM_DI_VAT_PHAM(index, 1);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xbeed345, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xc88f050, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x61a87, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x7a511, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x7a511, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xc38f2, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x4c4b403, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x4c4b403, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x186ab, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x98968f, 0x98968f, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xaae6f, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x989694, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xaae6f, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x989694, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xbeed345, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0, 0, 0, 0, 0);
                              }
                              else if (((base.Player_Job == 2) && (base.Player_Zx == 1)) && (base.Player_Sex == 2))
                              {
                                    base.DUOC_KIEN_HANG_RONG(this);
                                    base.DUOC_KIEN_HANG_RONG_VI_TRI();
                                    this.LAM_GIAM_DI_VAT_PHAM(index, 1);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xbeed345, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xd2186d0, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x61a87, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x7a511, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x7a511, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xc38f2, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x4c4b403, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x4c4b403, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x186ab, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x98968f, 0x98968f, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xaae6f, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x989694, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xaae6f, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x989694, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xbeed345, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0, 0, 0, 0, 0);
                              }
                              else if (((base.Player_Job == 2) && (base.Player_Zx == 2)) && (base.Player_Sex == 1))
                              {
                                    base.DUOC_KIEN_HANG_RONG(this);
                                    base.DUOC_KIEN_HANG_RONG_VI_TRI();
                                    this.LAM_GIAM_DI_VAT_PHAM(index, 1);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xbeed72e, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xc88f438, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x61a87, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x7a8f9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x7a8f9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xc3cda, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x4c4b403, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x4c4b403, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x186ab, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x98968f, 0x98968f, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xaae6f, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x989694, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xaae6f, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x989694, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xbeed72e, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0, 0, 0, 0, 0);
                              }
                              else if (((base.Player_Job == 2) && (base.Player_Zx == 2)) && (base.Player_Sex == 2))
                              {
                                    base.DUOC_KIEN_HANG_RONG(this);
                                    base.DUOC_KIEN_HANG_RONG_VI_TRI();
                                    this.LAM_GIAM_DI_VAT_PHAM(index, 1);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xbeed72e, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xd218ab8, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x61a87, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x7a8f9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x7a8f9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xc3cda, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x4c4b403, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x4c4b403, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x186ab, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x98968f, 0x98968f, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xaae6f, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x989694, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xaae6f, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x989694, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xbeed72e, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0, 0, 0, 0, 0);
                              }
                              else if (((base.Player_Job == 3) && (base.Player_Zx == 1)) && (base.Player_Sex == 1))
                              {
                                    base.DUOC_KIEN_HANG_RONG(this);
                                    base.DUOC_KIEN_HANG_RONG_VI_TRI();
                                    this.LAM_GIAM_DI_VAT_PHAM(index, 1);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x11e4b445, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x127ed150, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x61a87, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x7a511, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x7a511, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xc38f2, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x4c4b403, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x4c4b403, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x186ab, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x98968f, 0x98968f, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xaae6f, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x989694, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xaae6f, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x989694, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x11e4b445, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0, 0, 0, 0, 0);
                              }
                              else if (((base.Player_Job == 3) && (base.Player_Zx == 1)) && (base.Player_Sex == 2))
                              {
                                    base.DUOC_KIEN_HANG_RONG(this);
                                    base.DUOC_KIEN_HANG_RONG_VI_TRI();
                                    this.LAM_GIAM_DI_VAT_PHAM(index, 1);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x11e4b445, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x131767d0, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x61a87, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x7a511, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x7a511, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xc38f2, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x4c4b403, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x4c4b403, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x186ab, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x98968f, 0x98968f, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xaae6f, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x989694, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xaae6f, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x989694, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x11e4b445, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0, 0, 0, 0, 0);
                              }
                              else if (((base.Player_Job == 3) && (base.Player_Zx == 2)) && (base.Player_Sex == 1))
                              {
                                    base.DUOC_KIEN_HANG_RONG(this);
                                    base.DUOC_KIEN_HANG_RONG_VI_TRI();
                                    this.LAM_GIAM_DI_VAT_PHAM(index, 1);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x11e4b82e, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x127ed538, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x61a87, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x7a8f9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x7a8f9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xc3cda, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x4c4b403, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x4c4b403, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x186ab, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x98968f, 0x98968f, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xaae6f, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x989694, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xaae6f, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x989694, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x11e4b82e, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0, 0, 0, 0, 0);
                              }
                              else if (((base.Player_Job == 3) && (base.Player_Zx == 2)) && (base.Player_Sex == 2))
                              {
                                    base.DUOC_KIEN_HANG_RONG(this);
                                    base.DUOC_KIEN_HANG_RONG_VI_TRI();
                                    this.LAM_GIAM_DI_VAT_PHAM(index, 1);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x11e4b82e, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x13176bb8, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x61a87, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x7a8f9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x7a8f9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xc3cda, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x4c4b403, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x4c4b403, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x186ab, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x98968f, 0x98968f, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xaae6f, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x989694, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xaae6f, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x989694, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x11e4b82e, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0, 0, 0, 0, 0);
                              }
                              else if (((base.Player_Job == 4) && (base.Player_Zx == 1)) && (base.Player_Sex == 1))
                              {
                                    base.DUOC_KIEN_HANG_RONG(this);
                                    base.DUOC_KIEN_HANG_RONG_VI_TRI();
                                    this.LAM_GIAM_DI_VAT_PHAM(index, 1);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x17da9545, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x1874b250, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x61a87, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x7a511, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x7a511, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xc38f2, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x4c4b403, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x4c4b403, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x186ab, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x98968f, 0x98968f, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xaae6f, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x989694, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xaae6f, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x989694, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x17da9545, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0, 0, 0, 0, 0);
                              }
                              else if (((base.Player_Job == 4) && (base.Player_Zx == 1)) && (base.Player_Sex == 2))
                              {
                                    base.DUOC_KIEN_HANG_RONG(this);
                                    base.DUOC_KIEN_HANG_RONG_VI_TRI();
                                    this.LAM_GIAM_DI_VAT_PHAM(index, 1);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x17da9545, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x190d48d0, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x61a87, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x7a511, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x7a511, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xc38f2, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x4c4b403, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x4c4b403, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x186ab, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x98968f, 0x98968f, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xaae6f, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x989694, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xaae6f, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x989694, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x17da9545, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0, 0, 0, 0, 0);
                              }
                              else if (((base.Player_Job == 4) && (base.Player_Zx == 2)) && (base.Player_Sex == 1))
                              {
                                    base.DUOC_KIEN_HANG_RONG(this);
                                    base.DUOC_KIEN_HANG_RONG_VI_TRI();
                                    this.LAM_GIAM_DI_VAT_PHAM(index, 1);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x17da992e, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x1874b638, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x61a87, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x7a8f9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x7a8f9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xc3cda, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x4c4b403, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x4c4b403, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x186ab, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x98968f, 0x98968f, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xaae6f, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x989694, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xaae6f, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x989694, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x17da992e, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0, 0, 0, 0, 0);
                              }
                              else if (((base.Player_Job == 4) && (base.Player_Zx == 2)) && (base.Player_Sex == 2))
                              {
                                    base.DUOC_KIEN_HANG_RONG(this);
                                    base.DUOC_KIEN_HANG_RONG_VI_TRI();
                                    this.LAM_GIAM_DI_VAT_PHAM(index, 1);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x17da992e, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x190d4cb8, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x61a87, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x7a8f9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x7a8f9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xc3cda, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x4c4b403, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x4c4b403, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x186ab, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x98968f, 0x98968f, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xaae6f, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x989694, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xaae6f, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x989694, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x17da992e, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0, 0, 0, 0, 0);
                              }
                              else if (((base.Player_Job == 5) && (base.Player_Zx == 1)) && (base.Player_Sex == 1))
                              {
                                    base.DUOC_KIEN_HANG_RONG(this);
                                    base.DUOC_KIEN_HANG_RONG_VI_TRI();
                                    this.LAM_GIAM_DI_VAT_PHAM(index, 1);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x1dd07645, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x1e6a9350, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x61a87, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x7a511, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x7a511, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xc38f2, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x4c4b403, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x4c4b403, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x186ab, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x98968f, 0x98968f, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xaae6f, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x989694, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xaae6f, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x989694, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x1dd07645, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0, 0, 0, 0, 0);
                              }
                              else if (((base.Player_Job == 5) && (base.Player_Zx == 1)) && (base.Player_Sex == 2))
                              {
                                    base.DUOC_KIEN_HANG_RONG(this);
                                    base.DUOC_KIEN_HANG_RONG_VI_TRI();
                                    this.LAM_GIAM_DI_VAT_PHAM(index, 1);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x1dd07645, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x1f0329d0, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x61a87, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x7a511, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x7a511, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xc38f2, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x4c4b403, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x4c4b403, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x186ab, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x98968f, 0x98968f, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xaae6f, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x989694, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xaae6f, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x989694, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x1dd07645, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0, 0, 0, 0, 0);
                              }
                              else if (((base.Player_Job == 5) && (base.Player_Zx == 2)) && (base.Player_Sex == 1))
                              {
                                    base.DUOC_KIEN_HANG_RONG(this);
                                    base.DUOC_KIEN_HANG_RONG_VI_TRI();
                                    this.LAM_GIAM_DI_VAT_PHAM(index, 1);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x1dd07a2e, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x1e6a9738, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x61a87, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x7a8f9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x7a8f9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xc3cda, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x4c4b403, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x4c4b403, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x186ab, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x98968f, 0x98968f, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xaae6f, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x989694, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xaae6f, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x989694, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x1dd07a2e, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0, 0, 0, 0, 0);
                              }
                              else if (((base.Player_Job == 5) && (base.Player_Zx == 2)) && (base.Player_Sex == 2))
                              {
                                    base.DUOC_KIEN_HANG_RONG(this);
                                    base.DUOC_KIEN_HANG_RONG_VI_TRI();
                                    this.LAM_GIAM_DI_VAT_PHAM(index, 1);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x1dd07a2e, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x1f032db8, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x61a87, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x7a8f9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x7a8f9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xc3cda, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x4c4b403, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x4c4b403, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x186ab, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x98968f, 0x98968f, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xaae6f, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x989694, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xaae6f, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x989694, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x1dd07a2e, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0, 0, 0, 0, 0);
                              }
                              else if (((base.Player_Job == 6) && (base.Player_Zx == 1)) && (base.Player_Sex == 1))
                              {
                                    base.DUOC_KIEN_HANG_RONG(this);
                                    base.DUOC_KIEN_HANG_RONG_VI_TRI();
                                    this.LAM_GIAM_DI_VAT_PHAM(index, 1);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x29bc3845, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x2a565550, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x61a87, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x7a511, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x7a511, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xc38f2, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x4c4b403, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x4c4b403, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x186ab, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x98968f, 0x98968f, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xaae6f, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x989694, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xaae6f, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x989694, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x29bc3845, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0, 0, 0, 0, 0);
                              }
                              else if (((base.Player_Job == 6) && (base.Player_Zx == 1)) && (base.Player_Sex == 2))
                              {
                                    base.DUOC_KIEN_HANG_RONG(this);
                                    base.DUOC_KIEN_HANG_RONG_VI_TRI();
                                    this.LAM_GIAM_DI_VAT_PHAM(index, 1);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x29bc3845, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x2aeeebd0, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x61a87, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x7a511, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x7a511, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xc38f2, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x4c4b403, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x4c4b403, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x186ab, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x98968f, 0x98968f, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xaae6f, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x989694, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xaae6f, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x989694, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x29bc3845, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0, 0, 0, 0, 0);
                              }
                              else if (((base.Player_Job == 6) && (base.Player_Zx == 2)) && (base.Player_Sex == 1))
                              {
                                    base.DUOC_KIEN_HANG_RONG(this);
                                    base.DUOC_KIEN_HANG_RONG_VI_TRI();
                                    this.LAM_GIAM_DI_VAT_PHAM(index, 1);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x29bc3c2e, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x2a565938, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x61a87, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x7a8f9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x7a8f9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xc3cda, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x4c4b403, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x4c4b403, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x186ab, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x98968f, 0x98968f, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xaae6f, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x989694, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xaae6f, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x989694, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x29bc3c2e, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0, 0, 0, 0, 0);
                              }
                              else if (((base.Player_Job == 6) && (base.Player_Zx == 2)) && (base.Player_Sex == 2))
                              {
                                    base.DUOC_KIEN_HANG_RONG(this);
                                    base.DUOC_KIEN_HANG_RONG_VI_TRI();
                                    this.LAM_GIAM_DI_VAT_PHAM(index, 1);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x29bc3c2e, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x2aeeefb8, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x61a87, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x7a8f9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x7a8f9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xc3cda, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x4c4b403, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x4c4b403, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x186ab, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x98968f, 0x98968f, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xaae6f, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x989694, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xaae6f, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x989694, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x29bc3c2e, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0, 0, 0, 0, 0);
                              }
                              else if (((base.Player_Job == 7) && (base.Player_Zx == 1)) && (base.Player_Sex == 1))
                              {
                                    base.DUOC_KIEN_HANG_RONG(this);
                                    base.DUOC_KIEN_HANG_RONG_VI_TRI();
                                    this.LAM_GIAM_DI_VAT_PHAM(index, 1);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x2fb21945, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x304c3650, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x61a87, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x7a511, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x7a511, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xc38f2, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x4c4b403, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x4c4b403, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x186ab, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x98968f, 0x98968f, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xaae6f, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x989694, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xaae6f, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x989694, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x2fb21945, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0, 0, 0, 0, 0);
                              }
                              else if (((base.Player_Job == 7) && (base.Player_Zx == 1)) && (base.Player_Sex == 2))
                              {
                                    base.DUOC_KIEN_HANG_RONG(this);
                                    base.DUOC_KIEN_HANG_RONG_VI_TRI();
                                    this.LAM_GIAM_DI_VAT_PHAM(index, 1);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x2fb21945, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x30e4ccd0, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x61a87, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x7a511, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x7a511, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xc38f2, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x4c4b403, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x4c4b403, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x186ab, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x98968f, 0x98968f, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xaae6f, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x989694, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xaae6f, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x989694, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x2fb21945, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0, 0, 0, 0, 0);
                              }
                              else if (((base.Player_Job == 7) && (base.Player_Zx == 2)) && (base.Player_Sex == 1))
                              {
                                    base.DUOC_KIEN_HANG_RONG(this);
                                    base.DUOC_KIEN_HANG_RONG_VI_TRI();
                                    this.LAM_GIAM_DI_VAT_PHAM(index, 1);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x2fb21d2e, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x304c3a38, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x61a87, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x7a8f9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x7a8f9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xc3cda, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x4c4b403, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x4c4b403, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x186ab, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x98968f, 0x98968f, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xaae6f, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x989694, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xaae6f, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x989694, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x2fb21d2e, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0, 0, 0, 0, 0);
                              }
                              else if (((base.Player_Job == 7) && (base.Player_Zx == 2)) && (base.Player_Sex == 2))
                              {
                                    base.DUOC_KIEN_HANG_RONG(this);
                                    base.DUOC_KIEN_HANG_RONG_VI_TRI();
                                    this.LAM_GIAM_DI_VAT_PHAM(index, 1);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x2fb21d2e, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x30e4d0b8, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x61a87, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x7a8f9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x7a8f9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xc3cda, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x4c4b403, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x4c4b403, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x186ab, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x98968f, 0x98968f, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xaae6f, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x989694, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xaae6f, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x989694, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x2fb21d2e, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0, 0, 0, 0, 0);
                              }
                              else if (((base.Player_Job == 8) && (base.Player_Zx == 1)) && (base.Player_Sex == 1))
                              {
                                    base.DUOC_KIEN_HANG_RONG(this);
                                    base.DUOC_KIEN_HANG_RONG_VI_TRI();
                                    this.LAM_GIAM_DI_VAT_PHAM(index, 1);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x5f8fde5, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x6931b08, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x61a87, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x7a511, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x7a511, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xc38f2, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x4c4b403, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x4c4b403, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x186ab, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x98968f, 0x98968f, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xaae6f, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x989694, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xaae6f, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x989694, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x5f8fde5, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0, 0, 0, 0, 0);
                              }
                              else if (((base.Player_Job == 8) && (base.Player_Zx == 1)) && (base.Player_Sex == 2))
                              {
                                    base.DUOC_KIEN_HANG_RONG(this);
                                    base.DUOC_KIEN_HANG_RONG_VI_TRI();
                                    this.LAM_GIAM_DI_VAT_PHAM(index, 1);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x5f8fde5, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x72bb188, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x61a87, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x7a511, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x7a511, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xc38f2, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x4c4b403, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x4c4b403, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x186ab, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x98968f, 0x98968f, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xaae6f, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x989694, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xaae6f, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x989694, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x5f8fde5, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0, 0, 0, 0, 0);
                              }
                              else if (((base.Player_Job == 8) && (base.Player_Zx == 2)) && (base.Player_Sex == 1))
                              {
                                    base.DUOC_KIEN_HANG_RONG(this);
                                    base.DUOC_KIEN_HANG_RONG_VI_TRI();
                                    this.LAM_GIAM_DI_VAT_PHAM(index, 1);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x5f8fde5, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x6931b08, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x61a87, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x7a8f9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x7a8f9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xc3cda, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x4c4b403, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x4c4b403, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x186ab, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x98968f, 0x98968f, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xaae6f, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x989694, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xaae6f, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x989694, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x5f8fde5, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0, 0, 0, 0, 0);
                              }
                              else if (((base.Player_Job == 8) && (base.Player_Zx == 2)) && (base.Player_Sex == 2))
                              {
                                    base.DUOC_KIEN_HANG_RONG(this);
                                    base.DUOC_KIEN_HANG_RONG_VI_TRI();
                                    this.LAM_GIAM_DI_VAT_PHAM(index, 1);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x5f8fde5, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x72bb188, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x61a87, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x7a8f9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x7a8f9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xc3cda, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x4c4b403, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x4c4b403, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x186ab, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x98968f, 0x98968f, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xaae6f, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x989694, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xaae6f, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x989694, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x5f8fde5, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0, 0, 0, 0, 0);
                              }
                              else if (((base.Player_Job == 9) && (base.Player_Zx == 1)) && (base.Player_Sex == 1))
                              {
                                    base.DUOC_KIEN_HANG_RONG(this);
                                    base.DUOC_KIEN_HANG_RONG_VI_TRI();
                                    this.LAM_GIAM_DI_VAT_PHAM(index, 1);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xbeedee4, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xc88fc08, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x61a87, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x7a511, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x7a511, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xc38f2, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x4c4b403, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x4c4b403, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x186ab, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x98968f, 0x98968f, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xaae6f, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x989694, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xaae6f, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x989694, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xbeedee4, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0, 0, 0, 0, 0);
                              }
                              else if (((base.Player_Job == 9) && (base.Player_Zx == 1)) && (base.Player_Sex == 2))
                              {
                                    base.DUOC_KIEN_HANG_RONG(this);
                                    base.DUOC_KIEN_HANG_RONG_VI_TRI();
                                    this.LAM_GIAM_DI_VAT_PHAM(index, 1);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xbeedee4, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xd219288, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x61a87, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x7a511, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x7a511, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xc38f2, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x4c4b403, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x4c4b403, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x186ab, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x98968f, 0x98968f, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xaae6f, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x989694, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xaae6f, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x989694, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xbeedee4, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0, 0, 0, 0, 0);
                              }
                              else if (((base.Player_Job == 9) && (base.Player_Zx == 2)) && (base.Player_Sex == 1))
                              {
                                    base.DUOC_KIEN_HANG_RONG(this);
                                    base.DUOC_KIEN_HANG_RONG_VI_TRI();
                                    this.LAM_GIAM_DI_VAT_PHAM(index, 1);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xbeedee4, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xc88fc08, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x61a87, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x7a8f9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x7a8f9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xc3cda, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x4c4b403, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x4c4b403, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x186ab, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x98968f, 0x98968f, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xaae6f, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x989694, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xaae6f, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x989694, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xbeedee4, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0, 0, 0, 0, 0);
                              }
                              else if (((base.Player_Job == 9) && (base.Player_Zx == 2)) && (base.Player_Sex == 2))
                              {
                                    base.DUOC_KIEN_HANG_RONG(this);
                                    base.DUOC_KIEN_HANG_RONG_VI_TRI();
                                    this.LAM_GIAM_DI_VAT_PHAM(index, 1);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xbeedee4, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xd219288, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x61a87, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x7a8f9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x7a8f9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xc3cda, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x4c4b403, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x4c4b403, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x186ab, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x98968f, 0x98968f, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xaae6f, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x989694, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xaae6f, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x989694, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xbeedee4, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0, 0, 0, 0, 0);
                              }
                              else if (((base.Player_Job == 10) && (base.Player_Zx == 1)) && (base.Player_Sex == 1))
                              {
                                    base.DUOC_KIEN_HANG_RONG(this);
                                    base.DUOC_KIEN_HANG_RONG_VI_TRI();
                                    this.LAM_GIAM_DI_VAT_PHAM(index, 1);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x35a7fa45, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x36421750, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x61a87, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x7a511, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x7a511, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xc38f2, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x4c4b403, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x4c4b403, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x186ab, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x98968f, 0x98968f, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xaae6f, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x989694, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xaae6f, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x989694, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x35a7fa45, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0, 0, 0, 0, 0);
                              }
                              else if (((base.Player_Job == 10) && (base.Player_Zx == 2)) && (base.Player_Sex == 1))
                              {
                                    base.DUOC_KIEN_HANG_RONG(this);
                                    base.DUOC_KIEN_HANG_RONG_VI_TRI();
                                    this.LAM_GIAM_DI_VAT_PHAM(index, 1);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x35a7fe2e, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x36421b38, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x61a87, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x7a8f9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x7a8f9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xc3cda, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x4c4b403, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x4c4b403, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x186ab, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x98968f, 0x98968f, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xaae6f, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x989694, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xaae6f, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x989694, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x35a7fe2e, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0, 0, 0, 0, 0);
                              }
                              else if (((base.Player_Job == 10) && (base.Player_Zx == 1)) && (base.Player_Sex == 2))
                              {
                                    base.DUOC_KIEN_HANG_RONG(this);
                                    base.DUOC_KIEN_HANG_RONG_VI_TRI();
                                    this.LAM_GIAM_DI_VAT_PHAM(index, 1);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x35a7fa45, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x36daadd0, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x61a87, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x7a511, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x7a511, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xc38f2, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x4c4b403, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x4c4b403, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x186ab, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x98968f, 0x98968f, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xaae6f, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x989694, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xaae6f, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x989694, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x35a7fa45, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0, 0, 0, 0, 0);
                              }
                              else if (((base.Player_Job == 10) && (base.Player_Zx == 2)) && (base.Player_Sex == 2))
                              {
                                    base.DUOC_KIEN_HANG_RONG(this);
                                    base.DUOC_KIEN_HANG_RONG_VI_TRI();
                                    this.LAM_GIAM_DI_VAT_PHAM(index, 1);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x35a7fe2e, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x36dab1b8, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x61a87, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x7a8f9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x7a8f9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xc3cda, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x1312d14, 0x1312d14, 0x1312d14, 0x1312d14, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x4c4b403, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(9, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x4c4b403, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x186ab, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x98968f, 0x98968f, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xaae6f, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x989694, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0xaae6f, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1d94, 0x42c1d94, 0x989694, 0x989694, 0, 0, 0, 0, 0);
                                    this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(0x35a7fe2e, base.DUOC_KIEN_HANG_RONG_VI_TRI(), 1, 0, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0x42c1db2, 0, 0, 0, 0, 0);
                              }
                              base.TINH_TOAN_NHAN_VAT_TRANG_BI_SO_LIEU();
                              this.Update_Equipment_Effectiveness();
                              base.UpdatePowersAndStatus();
                              base.UpdateMoneyAndWeight();
                              this.UpdateHP_MP_SP();
                        }
                        TBL_XWWL_OPEN open = TBL_XWWL_OPEN.GetOpen(BitConverter.ToInt32(dst, 0));
                        if (!World.Itme.TryGetValue(open.FLD_PIDX, out tbl_xwwl_item))
                        {
                              goto Label_5EAB;
                        }
                        if (tbl_xwwl_item.FLD_RESIDE2 == 0x10)
                        {
                              switch (tbl_xwwl_item.FLD_PID)
                              {
                                    case 0x2faf0801:
                                    case 0x2faf0802:
                                    case 0x2faf080d:
                                    case 0x2faf083d:
                                    case 0x2faf083e:
                                    case 0x2faf0817:
                                    case 0x2faf0818:
                                    case 0x2faf0819:
                                    case 0x2faf081a:
                                    case 0x2faf081c:
                                          goto Label_5D40;

                                    case 0x2faf082e:
                                          {
                                                int num4 = new Random().Next(1, 0x17);
                                                open.FLD_MAGIC0 = num4;
                                                break;
                                          }
                                    case 0x2faf082f:
                                          {
                                                int num5 = new Random().Next(0x17, 0x34);
                                                open.FLD_MAGIC0 = num5;
                                                break;
                                          }
                                    case 0x2faf0830:
                                          {
                                                int num6 = new Random().Next(70, 0x51);
                                                open.FLD_MAGIC0 = num6;
                                                break;
                                          }
                              }
                        }
                        goto Label_5D82;
                        Label_5D40:
                        if (open.FLD_MAGIC0 != 0)
                        {
                              open.FLD_PIDX = World.smethod_14(tbl_xwwl_item.FLD_PID);
                        }
                        else
                        {
                              open.FLD_MAGIC0 = World.smethod_16(tbl_xwwl_item.FLD_PID, 6);
                              open.FLD_PIDX = World.smethod_14(tbl_xwwl_item.FLD_PID);
                        }
                        Label_5D82:
                        this.LAM_GIAM_DI_VAT_PHAM(index, 1);
                        this.BACH_BAO_TANG_CUONG_ITEM_MANG_THUOC_TINH(open.FLD_PIDX, index, open.FLD_NUMBER, open.FLD_MAGIC0, open.FLD_MAGIC1, open.FLD_MAGIC2, open.FLD_MAGIC3, open.FLD_MAGIC4, open.FLD_SO_CAP_PHU_HON, open.FLD_TRUNG_CAP_PHU_HON, open.FLD_TIEN_HOA, open.FLD_CO_HAY_KHONG_TROI_CHAT, open.SU_DUNG_THANG_THIEN);
                        if (open.CO_HAY_KHONG_MO_RA_THONG_BAO == 1)
                        {
                              foreach (Players players in World.allConnectedChars.Values)
                              {
                                    char[] separator = new char[] { ';' };
                                    string[] strArray = World.Openbox_nhac_nho_noi_dung.Split(separator);
                                    string str = string.Format(strArray[0], new object[] { base.UserName, TBL_XWWL_MAP.smethod_0(base.CharacterCoords_Map), open.FLD_NAME, open.FLD_NAMEX });
                                    players.GameMessage(str ?? "", int.Parse(strArray[2]), strArray[1] ?? "");
                              }
                        }
                        return;
                        Label_5EAB:
                        objArray2 = new object[] { "开箱 出错1 VAT_PHAM [", open.FLD_PID, "][", open.FLD_NAME, "]开[", open.FLD_PIDX, "][", open.FLD_NAMEX, "] [", base.Userid, "][", base.UserName, "] " };
                        Form1.WriteLine(1, string.Concat(objArray2));
                  }
                  catch (Exception exception)
                  {
                        Form1.WriteLine(1, "开箱 出错 [" + base.Userid + "][" + base.UserName + "] " + exception.Message);
                  }
            }

            public void UONG_THUOC_HIEU_QUA(int int_128)
            {
                  PacketData data = new PacketData();
                  data.method_8((long)int_128);
                  if (base.Client != null)
                  {
                        base.Client.method_4(data, 0x7f00, base.UserSessionID);
                  }
                  this.vmethod_1(data, 0x7f00, base.UserSessionID);
            }

            public void Update_Equipment_Effectiveness()
            {
                  PacketData data = new PacketData();
                  for (int i = 0; i < 30; i++)
                  {
                        if (i >= 15)
                        {
                              data.method_10(new byte[0x48], 0, 0x48);
                        }
                        else
                        {
                              data.method_10(base.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[i].method_0(), 0, World.int_5);
                        }
                  }
                  if (base.Client != null)
                  {
                        base.Client.method_5(data, 0x7600, base.UserSessionID, 0);
                  }
                  this.vmethod_2(data, 0x7600, base.UserSessionID, 0);
            }

            public void UpdateConfig(byte[] byte_5, int int_128)
            {
                  this.Packet_Modify(byte_5, int_128);
                  PacketReader reader = new PacketReader(byte_5, int_128, false);
                  reader.method_1(11, SeekOrigin.Begin);
                  if (int_128 != 0x23)
                  {
                        base.GameMessage("The rivers and lakes using the 13.0 version, go home to download the latest patch update, no update, there are some functions are not available", 9, "system hint");
                  }
                  base.Config.组队 = reader.ReadInt8();
                  base.Config.交易 = reader.ReadInt8();
                  base.Config.传音 = reader.ReadInt8();
                  reader.ReadInt8();
                  base.Config.原著衣服 = reader.ReadInt8();
                  base.Config.查装备 = reader.ReadInt8();
                  int num = base.Config.头发开关;
                  base.Config.头发开关 = reader.ReadInt8();
                  int num2 = base.Config.Vo_Huan_mo_ra;
                  if (byte_5[0x12] != 0x63)
                  {
                        base.Config.Vo_Huan_mo_ra = reader.ReadInt8();
                  }
                  if (((base.Config.Vo_Huan_mo_ra == 2) && (DateTime.Now > base.VO_HUAN_CAP_8_DOAN_THOI_GIAN)) && (base.Player_WuXun > (World.dictionary_9[7] + 50000.0)))
                  {
                        this.TINH_TOAN_VO_HUAN_CAP_8(1);
                  }
                  base.Config.搜索开关 = reader.ReadInt8();
                  base.Config.告白开关 = reader.ReadInt8();
                  int num3 = base.Config.蔬菜武器开关;
                  reader.ReadInt8();
                  base.Config.蔬菜武器开关 = reader.ReadInt8();
                  reader.ReadInt8();
                  base.Config.Pet_Exp = reader.ReadInt8();
                  base.Update_Figure_Data(this);
                  this.CAP_NHAT_TRANG_BI_HIEU_QUA_DEN(this, this);
                  if (((base.Config.原著衣服 != base.Config.原著衣服) || (num3 != base.Config.蔬菜武器开关)) || ((num != base.Config.头发开关) || (num2 != base.Config.Vo_Huan_mo_ra)))
                  {
                        base.Update_Data_Boardcast();
                        this.Update_Equipment_Effectiveness();
                  }
                  base.UpdatePowersAndStatus();
            }

            public void UpdateHP_MP_SP()
            {
                  try
                  {
                        if (base.NHAN_VAT_SP > base.NHAN_VAT_LON_NHAT_SP)
                        {
                              base.NHAN_VAT_SP = 0;
                              if (base.Player_Job == 6)
                              {
                                    this.int_127++;
                                    if (this.int_127 > 5)
                                    {
                                          this.int_127 = 5;
                                    }
                              }
                              else if (base.Player_Job == 5)
                              {
                                    if (base.Add_Status_List.ContainsKey(0xaae6e))
                                    {
                                          return;
                                    }
                                    base.Show_Char(base.UserSessionID, 0x194);
                                    Additional_Sate_Class class2 = new Additional_Sate_Class(this, 0x2710 + (((int)base.Thang_thien_1_khi_cong_Cuong_phong_thien_y) * 0x3e8), 0xaae6e, 0);
                                    base.Add_Status_List.Add(0xaae6e, class2);
                                    base.addFLD_ATT_Percentage(0.25M);
                                    base.addFLD_DEF_Percentage(0.25M);
                                    this.Status_Effect(BitConverter.GetBytes(0xaae6e), 1, 0x2710 + (((int)base.Thang_thien_1_khi_cong_Cuong_phong_thien_y) * 0x3e8));
                                    base.Update_Figure_Data(this);
                                    base.Update_Data_Boardcast();
                                    base.UpdatePowersAndStatus();
                              }
                              else if (((base.Player_Job >= 5) && (base.Player_Job != 8)) && ((base.Player_Job != 9) && (base.Player_Job != 10)))
                              {
                                    if (base.Player_Job == 7)
                                    {
                                          int num2;
                                          int num = 0;
                                          if (base.Add_Status_List.ContainsKey(0xdc0b5))
                                          {
                                                if (base.Thuong_ha_dieu_tinh_toan >= 3)
                                                {
                                                      base.Thuong_ha_dieu_tinh_toan = 0;
                                                }
                                                switch (base.Thuong_ha_dieu_tinh_toan)
                                                {
                                                      case 0:
                                                            num = 0xdbd31;
                                                            break;

                                                      case 1:
                                                      case 2:
                                                            num = 0xdbd33;
                                                            break;
                                                }
                                                if (((num != 0) && !base.Add_Status_List.ContainsKey(0xdbd31)) && (!base.Add_Status_List.ContainsKey(0xdbd32) && !base.Add_Status_List.ContainsKey(0xdbd33)))
                                                {
                                                      Additional_Sate_Class class3 = new Additional_Sate_Class(this, 0xea60, num, 0);
                                                      base.Add_Status_List.Add(num, class3);
                                                      this.Status_Effect(BitConverter.GetBytes(num), 1, 0xea60);
                                                      num2 = base.Thuong_ha_dieu_tinh_toan;
                                                      base.Thuong_ha_dieu_tinh_toan = num2 + 1;
                                                }
                                          }
                                          else if (base.Add_Status_List.ContainsKey(0xdc0b6))
                                          {
                                                if (base.Duoi_ha_dieu_tinh_toan >= 3)
                                                {
                                                      base.Duoi_ha_dieu_tinh_toan = 0;
                                                }
                                                switch (base.Duoi_ha_dieu_tinh_toan)
                                                {
                                                      case 0:
                                                            num = 0xdbd31;
                                                            break;

                                                      case 1:
                                                      case 2:
                                                            num = 0xdbd32;
                                                            break;
                                                }
                                                if (((num != 0) && !base.Add_Status_List.ContainsKey(0xdbd31)) && (!base.Add_Status_List.ContainsKey(0xdbd32) && !base.Add_Status_List.ContainsKey(0xdbd33)))
                                                {
                                                      Additional_Sate_Class class4 = new Additional_Sate_Class(this, 0xea60, num, 0);
                                                      base.Add_Status_List.Add(num, class4);
                                                      this.Status_Effect(BitConverter.GetBytes(num), 1, 0xea60);
                                                      num2 = base.Duoi_ha_dieu_tinh_toan;
                                                      base.Duoi_ha_dieu_tinh_toan = num2 + 1;
                                                }
                                          }
                                          else if (base.Add_Status_List.ContainsKey(0xdc0b7) && (base.list_3 != null))
                                          {
                                                if (base.Ngoc_lien_hoan_ke_so >= 6)
                                                {
                                                      base.Ngoc_lien_hoan_ke_so = 0;
                                                }
                                                switch (base.Ngoc_lien_hoan_ke_so)
                                                {
                                                      case 0:
                                                            num = base.list_3[0];
                                                            break;

                                                      case 1:
                                                            num = base.list_3[1];
                                                            break;

                                                      case 2:
                                                            num = base.list_3[2];
                                                            break;

                                                      case 3:
                                                            num = base.list_3[3];
                                                            break;

                                                      case 4:
                                                            num = base.list_3[4];
                                                            break;

                                                      case 5:
                                                            num = base.list_3[5];
                                                            break;
                                                }
                                                if (((num != 0) && !base.Add_Status_List.ContainsKey(0xdbd31)) && (!base.Add_Status_List.ContainsKey(0xdbd32) && !base.Add_Status_List.ContainsKey(0xdbd33)))
                                                {
                                                      Additional_Sate_Class class5 = new Additional_Sate_Class(this, 0xea60, num, 0);
                                                      base.Add_Status_List.Add(num, class5);
                                                      this.Status_Effect(BitConverter.GetBytes(num), 1, 0xea60);
                                                      num2 = base.Ngoc_lien_hoan_ke_so;
                                                      base.Ngoc_lien_hoan_ke_so = num2 + 1;
                                                }
                                          }
                                          base.Update_Figure_Data(this);
                                          base.Update_Data_Boardcast();
                                    }
                              }
                              else if (BitConverter.ToInt16(base.Qigong[4].气功_byte, 0) == 0xff)
                              {
                                    if (base.Add_Status_List.ContainsKey(0xaae6e))
                                    {
                                          return;
                                    }
                                    base.Show_Char(base.UserSessionID, 0x194);
                                    Additional_Sate_Class class6 = new Additional_Sate_Class(this, 0x4e20, 0xaae6e, 0);
                                    base.Add_Status_List.Add(0xaae6e, class6);
                                    if (base.Player_Job == 3)
                                    {
                                          base.addFLD_ATT_Percentage(0.29M);
                                          base.addFLD_DEF_Percentage(0.29M);
                                    }
                                    else
                                    {
                                          base.addFLD_ATT_Percentage(0.25M);
                                          base.addFLD_DEF_Percentage(0.25M);
                                    }
                                    this.Status_Effect(BitConverter.GetBytes(0xaae6e), 1, 0x4e20);
                              }
                              else
                              {
                                    try
                                    {
                                          if (base.Add_Status_List.ContainsKey(0xaae6e))
                                          {
                                                return;
                                          }
                                          base.Show_Char(base.UserSessionID, 0x194);
                                          Additional_Sate_Class class7 = new Additional_Sate_Class(this, 0x4e20 + (0xbb8 * BitConverter.ToInt16(base.Qigong[4].气功_byte, 0)), 0xaae6e, 0);
                                          base.Add_Status_List.Add(0xaae6e, class7);
                                          if (base.Player_Job == 3)
                                          {
                                                base.addFLD_ATT_Percentage(0.29M);
                                                base.addFLD_DEF_Percentage(0.29M);
                                          }
                                          else
                                          {
                                                base.addFLD_ATT_Percentage(0.25M);
                                                base.addFLD_DEF_Percentage(0.25M);
                                          }
                                          this.Status_Effect(BitConverter.GetBytes(0xaae6e), 1, 0x4e20 + (0xbb8 * BitConverter.ToInt16(base.Qigong[4].气功_byte, 0)));
                                    }
                                    catch (Exception)
                                    {
                                    }
                                    base.Update_Figure_Data(this);
                                    base.Update_Data_Boardcast();
                                    base.UpdatePowersAndStatus();
                              }
                        }
                        if (base.NHAN_VAT_HP > base.NHAN_VAT_LON_NHAT_HP)
                        {
                              base.NHAN_VAT_HP = base.NHAN_VAT_LON_NHAT_HP;
                        }
                        if (base.NHAN_VAT_MP > base.NHAN_VAT_LON_NHAT_MP)
                        {
                              base.NHAN_VAT_MP = base.NHAN_VAT_LON_NHAT_MP;
                        }
                        if (base.NHAN_VAT_HP < 0L)
                        {
                              base.NHAN_VAT_HP = base.NHAN_VAT_LON_NHAT_HP;
                        }
                        if (base.NHAN_VAT_MP < 0)
                        {
                              base.NHAN_VAT_MP = base.NHAN_VAT_LON_NHAT_MP;
                        }
                        PacketData data = new PacketData();
                        data.Write4(0);
                        data.Write4((int)base.NHAN_VAT_HP);
                        data.Write4(base.NHAN_VAT_MP);
                        data.Write4(base.NHAN_VAT_SP);
                        data.Write4((int)base.NHAN_VAT_LON_NHAT_HP);
                        data.Write4(base.NHAN_VAT_LON_NHAT_MP);
                        data.Write4(base.NHAN_VAT_LON_NHAT_SP);
                        data.Write4(this.int_127);
                        if (base.Client != null)
                        {
                              base.Client.method_5(data, 0x6900, base.UserSessionID, 0);
                        }
                  }
                  catch (Exception)
                  {
                  }
            }

            public void VAO_SHOP(byte[] byte_5, int int_128)
            {
                  try
                  {
                        int num;
                        long num2;
                        int num3;
                        Players players;
                        CA_NHAN_CUA_HANG_ITEM_LOAI ca_nhan_cua_hang_item_loai;
                        VAT_PHAM_LOAI vat_pham_loai;
                        this.Packet_Modify(byte_5, int_128);
                        byte[] dst = new byte[4];
                        byte[] buffer2 = new byte[4];
                        Buffer.BlockCopy(byte_5, 11, dst, 0, 1);
                        Buffer.BlockCopy(byte_5, 12, buffer2, 0, 4);
                        int num4 = BitConverter.ToInt32(dst, 0);
                        int num5 = BitConverter.ToInt32(buffer2, 0);
                        switch (num4)
                        {
                              case 1:
                                    if (!base.OpenWarehouse)
                                    {
                                          break;
                                    }
                                    return;

                              case 2:
                                    num = BitConverter.ToInt32(byte_5, 0x10);
                                    num2 = BitConverter.ToInt64(byte_5, 0x18);
                                    num3 = BitConverter.ToInt16(byte_5, 0x20);
                                    if ((num3 < 1) || !this.UNKNOWN_309(this, num2))
                                    {
                                          goto Label_04A2;
                                    }
                                    this.ROI_KHOI_SHOP(num5);
                                    return;

                              case 3:
                                    this.ROI_KHOI_SHOP(num5);
                                    return;

                              default:
                                    return;
                        }
                        Players players2 = base.Get_char_data(num5);
                        if (((players2 != null) && (players2.PlayerShop.int_0 == 1)) && players2.PlayerShop.PersonStore_Open)
                        {
                              if (!this.TRA_TIM_PHAM_VI_NGUOI_CHOI(40, players2))
                              {
                                    base.method_119(12);
                              }
                              else if (players2.PlayerShop.CA_NHAN_CUA_HANG_CO_HAY_KHONG_SU_DUNG_BEN_TRONG)
                              {
                                    base.method_119(13);
                              }
                              else
                              {
                                    players2.PlayerShop.CA_NHAN_CUA_HANG_CO_HAY_KHONG_SU_DUNG_BEN_TRONG = true;
                                    base.bool_5 = true;
                                    base.int_0 = num5;
                                    base.OpenWarehouse = true;
                                    PacketData data = new PacketData();
                                    data.method_2(1);
                                    data.method_2(1);
                                    data.Write4(num5);
                                    data.Write2(players2.PlayerShop.CUA_HANG_TEN.Length);
                                    data.method_10(players2.PlayerShop.CUA_HANG_TEN, 0, players2.PlayerShop.CUA_HANG_TEN.Length);
                                    data.Write2(players2.PlayerShop.CUA_HANG_ITEM_DANH_SACH.Count);
                                    foreach (CA_NHAN_CUA_HANG_ITEM_LOAI ca_nhan_cua_hang_item_loai2 in players2.PlayerShop.CUA_HANG_ITEM_DANH_SACH.Values)
                                    {
                                          data.method_8(ca_nhan_cua_hang_item_loai2.class23_0.GetItem_ID);
                                          data.method_8(ca_nhan_cua_hang_item_loai2.class23_0.GetItem_toan_bo_ID);
                                          data.Write2(ca_nhan_cua_hang_item_loai2.int_0);
                                          data.Write2(ca_nhan_cua_hang_item_loai2.int_1);
                                          data.method_8(ca_nhan_cua_hang_item_loai2.long_0);
                                          data.Write4(ca_nhan_cua_hang_item_loai2.class23_0.FLD_MAGIC0);
                                          data.Write4(ca_nhan_cua_hang_item_loai2.class23_0.FLD_MAGIC1);
                                          data.Write4(ca_nhan_cua_hang_item_loai2.class23_0.FLD_MAGIC2);
                                          data.Write4(ca_nhan_cua_hang_item_loai2.class23_0.FLD_MAGIC3);
                                          data.Write4(ca_nhan_cua_hang_item_loai2.class23_0.FLD_MAGIC4);
                                          data.Write2(ca_nhan_cua_hang_item_loai2.class23_0.FLD_FJ_MAGIC0);
                                          data.Write2(ca_nhan_cua_hang_item_loai2.class23_0.FLD_FJ_MAGIC1);
                                          data.Write2(ca_nhan_cua_hang_item_loai2.class23_0.FLD_FJ_trung_cap_phu_hon);
                                          data.Write2(ca_nhan_cua_hang_item_loai2.class23_0.FLD_FJ_MAGIC2);
                                          data.Write2(ca_nhan_cua_hang_item_loai2.class23_0.FLD_FJ_MAGIC3);
                                          data.Write2(ca_nhan_cua_hang_item_loai2.class23_0.FLD_FJ_MAGIC4);
                                          data.Write2(ca_nhan_cua_hang_item_loai2.class23_0.FLD_FJ_MAGIC5);
                                          data.Write2(0);
                                          data.Write4(ca_nhan_cua_hang_item_loai2.class23_0.FLD_FJ_KSSJ);
                                          data.Write4(ca_nhan_cua_hang_item_loai2.class23_0.FLD_FJ_JSSJ);
                                          if (ca_nhan_cua_hang_item_loai2.class23_0.FLD_keo_dai_suc_manh != 0)
                                          {
                                                data.Write2(ca_nhan_cua_hang_item_loai2.class23_0.FLD_keo_dai_suc_manh);
                                          }
                                          else
                                          {
                                                data.Write2(0);
                                          }
                                          data.Write4(ca_nhan_cua_hang_item_loai2.class23_0.FLD_FJ_thuc_tinh + ca_nhan_cua_hang_item_loai2.class23_0.Item_trung_cap_phu_hon_them_vao_thuc_tinh);
                                          data.Write2(0);
                                          data.Write2(ca_nhan_cua_hang_item_loai2.class23_0.FLD_FJ_tien_hoa);
                                          data.Write2(0);
                                          data.Write4(0);
                                          data.Write4(0);
                                    }
                                    if (base.Client != null)
                                    {
                                          base.Client.method_5(data, 0xcf00, base.UserSessionID, 1);
                                    }
                                    byte[] buffer3 = Converter.hexStringToByte("AA551700016501591008000100000000000000000000000000B11A55AA");
                                    Buffer.BlockCopy(BitConverter.GetBytes(players2.UserSessionID), 0, buffer3, 5, 2);
                                    if (base.Client != null)
                                    {
                                          base.Client.Send(buffer3, buffer3.Length);
                                    }
                                    byte[] buffer4 = Converter.hexStringToByte("AA551900000000CF000A0001010000000001000000000000000000000055AA");
                                    Buffer.BlockCopy(BitConverter.GetBytes(players2.UserSessionID), 0, buffer4, 13, 2);
                                    Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, buffer4, 0x11, 2);
                                    Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, buffer4, 5, 2);
                                    if (players2.Client != null)
                                    {
                                          players2.Client.Send(buffer4, buffer4.Length);
                                    }
                                    players2.PlayerShop.class15_0 = this;
                              }
                        }
                        return;
                        Label_04A2:
                        players = base.Get_char_data(num5);
                        if (players == null)
                        {
                              byte[] buffer5 = Converter.hexStringToByte("AA551500000000CF000600030319000000000000000000000055AA");
                              Buffer.BlockCopy(buffer2, 0, buffer5, 13, 4);
                              if (base.Client != null)
                              {
                                    base.Client.Send(buffer5, buffer5.Length);
                              }
                              return;
                        }
                        if (!players.OpenWarehouse)
                        {
                              byte[] buffer6 = Converter.hexStringToByte("AA551500000000CF000600030319000000000000000000000055AA");
                              Buffer.BlockCopy(buffer2, 0, buffer6, 13, 4);
                              if (base.Client != null)
                              {
                                    base.Client.Send(buffer6, buffer6.Length);
                              }
                              Form1.WriteLine(6, "个人商店 进店 购买 BUG![" + base.Userid + "]-[" + base.UserName + "]");
                              return;
                        }
                        if (players.Exiting)
                        {
                              DBA.smethod_7($"UPDATE TBL_ACCOUNT SET FLD_ZT=1 WHERE FLD_ID='{players.Userid}'", "rxjhaccount");
                              Form1.WriteLine(6, "退出复制BUG11 [" + players.Userid + "][" + players.UserName + "][" + players.Client.ToString() + "] ");
                              if (players.Client != null)
                              {
                                    players.Client.Dispose();
                              }
                              byte[] buffer7 = Converter.hexStringToByte("AA551500000000CF000600030319000000000000000000000055AA");
                              Buffer.BlockCopy(buffer2, 0, buffer7, 13, 4);
                              if (base.Client != null)
                              {
                                    base.Client.Send(buffer7, buffer7.Length);
                              }
                              Form1.WriteLine(6, "个人商店 进店 购买 BUG2![" + base.Userid + "]-[" + base.UserName + "]");
                              return;
                        }
                        if (!players.PlayerShop.CUA_HANG_ITEM_DANH_SACH.TryGetValue(num2, out ca_nhan_cua_hang_item_loai))
                        {
                              return;
                        }
                        int num6 = base.DUOC_KIEN_HANG_RONG(this);
                        if (num6 == -1)
                        {
                              PacketData data2 = new PacketData();
                              data2.method_2(5);
                              data2.method_2(5);
                              data2.Write4(num5);
                              data2.method_8(ca_nhan_cua_hang_item_loai.class23_0.GetItem_ID);
                              data2.method_8(num2);
                              data2.Write2(num3);
                              data2.Write2(ca_nhan_cua_hang_item_loai.int_1);
                              data2.method_8(ca_nhan_cua_hang_item_loai.long_0);
                              data2.Write4(ca_nhan_cua_hang_item_loai.class23_0.FLD_MAGIC0);
                              data2.Write4(ca_nhan_cua_hang_item_loai.class23_0.FLD_MAGIC1);
                              data2.Write4(ca_nhan_cua_hang_item_loai.class23_0.FLD_MAGIC2);
                              data2.Write4(ca_nhan_cua_hang_item_loai.class23_0.FLD_MAGIC3);
                              data2.Write4(ca_nhan_cua_hang_item_loai.class23_0.FLD_MAGIC4);
                              data2.Write2(ca_nhan_cua_hang_item_loai.class23_0.FLD_FJ_MAGIC0);
                              data2.Write2(ca_nhan_cua_hang_item_loai.class23_0.FLD_FJ_MAGIC1);
                              data2.Write2(ca_nhan_cua_hang_item_loai.class23_0.FLD_FJ_trung_cap_phu_hon);
                              data2.Write2(ca_nhan_cua_hang_item_loai.class23_0.FLD_FJ_MAGIC2);
                              data2.Write2(ca_nhan_cua_hang_item_loai.class23_0.FLD_FJ_MAGIC3);
                              data2.Write2(ca_nhan_cua_hang_item_loai.class23_0.FLD_FJ_MAGIC4);
                              data2.Write2(ca_nhan_cua_hang_item_loai.class23_0.FLD_FJ_MAGIC5);
                              data2.Write2(0);
                              data2.Write4(ca_nhan_cua_hang_item_loai.class23_0.FLD_FJ_KSSJ);
                              data2.Write4(ca_nhan_cua_hang_item_loai.class23_0.FLD_FJ_JSSJ);
                              if (ca_nhan_cua_hang_item_loai.class23_0.FLD_keo_dai_suc_manh != 0)
                              {
                                    data2.Write2(ca_nhan_cua_hang_item_loai.class23_0.FLD_keo_dai_suc_manh);
                              }
                              else
                              {
                                    data2.Write2(0);
                              }
                              data2.Write4(ca_nhan_cua_hang_item_loai.class23_0.FLD_FJ_thuc_tinh);
                              data2.Write2(0);
                              data2.Write2(ca_nhan_cua_hang_item_loai.class23_0.FLD_FJ_tien_hoa);
                              data2.Write2(0);
                              data2.Write4(0);
                              data2.Write4(0);
                              data2.method_8(num2);
                              if (base.Client != null)
                              {
                                    base.Client.method_5(data2, 0xcf00, base.UserSessionID, 1);
                              }
                              base.BuyItem_Tip(14);
                              return;
                        }
                        if (((num3 > ca_nhan_cua_hang_item_loai.int_0) || (ca_nhan_cua_hang_item_loai.int_0 < 0)) || (num3 < 0))
                        {
                              goto Label_17A1;
                        }
                        if (BitConverter.ToInt32(players.TRANG_BI_LAN_BAO_VAY[ca_nhan_cua_hang_item_loai.int_1].VAT_PHAM_ID, 0) == 0)
                        {
                              this.ROI_KHOI_SHOP(num5);
                              return;
                        }
                        if (BitConverter.ToInt64(players.TRANG_BI_LAN_BAO_VAY[ca_nhan_cua_hang_item_loai.int_1].Item_toan_bo_ID, 0) != num2)
                        {
                              this.ROI_KHOI_SHOP(num5);
                              return;
                        }
                        if (BitConverter.ToInt32(players.TRANG_BI_LAN_BAO_VAY[ca_nhan_cua_hang_item_loai.int_1].VAT_PHAM_ID, 0) != num)
                        {
                              this.ROI_KHOI_SHOP(num5);
                              return;
                        }
                        if (num2 == 0)
                        {
                              this.ROI_KHOI_SHOP(num5);
                              return;
                        }
                        if (World.Co_hay_khong_mo_ra_cua_hang_CASH == 1)
                        {
                              if (base.FLD_RXPIONT < (ca_nhan_cua_hang_item_loai.long_0 * num3))
                              {
                                    PacketData data3 = new PacketData();
                                    data3.method_2(5);
                                    data3.method_2(5);
                                    data3.Write4(num5);
                                    data3.method_8(ca_nhan_cua_hang_item_loai.class23_0.GetItem_ID);
                                    data3.method_8(num2);
                                    data3.Write2(num3);
                                    data3.Write2(ca_nhan_cua_hang_item_loai.int_1);
                                    data3.method_8(ca_nhan_cua_hang_item_loai.long_0);
                                    data3.Write4(ca_nhan_cua_hang_item_loai.class23_0.FLD_MAGIC0);
                                    data3.Write4(ca_nhan_cua_hang_item_loai.class23_0.FLD_MAGIC1);
                                    data3.Write4(ca_nhan_cua_hang_item_loai.class23_0.FLD_MAGIC2);
                                    data3.Write4(ca_nhan_cua_hang_item_loai.class23_0.FLD_MAGIC3);
                                    data3.Write4(ca_nhan_cua_hang_item_loai.class23_0.FLD_MAGIC4);
                                    data3.Write2(ca_nhan_cua_hang_item_loai.class23_0.FLD_FJ_MAGIC0);
                                    data3.Write2(ca_nhan_cua_hang_item_loai.class23_0.FLD_FJ_MAGIC1);
                                    data3.Write2(ca_nhan_cua_hang_item_loai.class23_0.FLD_FJ_trung_cap_phu_hon);
                                    data3.Write2(ca_nhan_cua_hang_item_loai.class23_0.FLD_FJ_MAGIC2);
                                    data3.Write2(ca_nhan_cua_hang_item_loai.class23_0.FLD_FJ_MAGIC3);
                                    data3.Write2(ca_nhan_cua_hang_item_loai.class23_0.FLD_FJ_MAGIC4);
                                    data3.Write2(ca_nhan_cua_hang_item_loai.class23_0.FLD_FJ_MAGIC5);
                                    data3.Write2(0);
                                    data3.Write4(ca_nhan_cua_hang_item_loai.class23_0.FLD_FJ_KSSJ);
                                    data3.Write4(ca_nhan_cua_hang_item_loai.class23_0.FLD_FJ_JSSJ);
                                    if (ca_nhan_cua_hang_item_loai.class23_0.FLD_keo_dai_suc_manh != 0)
                                    {
                                          data3.Write2(ca_nhan_cua_hang_item_loai.class23_0.FLD_keo_dai_suc_manh);
                                    }
                                    else
                                    {
                                          data3.Write2(0);
                                    }
                                    data3.Write4(ca_nhan_cua_hang_item_loai.class23_0.FLD_FJ_thuc_tinh);
                                    data3.Write2(0);
                                    data3.Write2(ca_nhan_cua_hang_item_loai.class23_0.FLD_FJ_tien_hoa);
                                    data3.Write2(0);
                                    data3.Write4(0);
                                    data3.Write4(0);
                                    data3.method_8(num2);
                                    if (base.Client != null)
                                    {
                                          base.Client.method_4(data3, 0xcf00, base.UserSessionID);
                                    }
                                    base.GameMessage("You can not buy ingot inadequate", 9, "system message");
                                    return;
                              }
                        }
                        else if (base.Player_Money < (ca_nhan_cua_hang_item_loai.long_0 * num3))
                        {
                              PacketData data4 = new PacketData();
                              data4.method_2(5);
                              data4.method_2(5);
                              data4.Write4(num5);
                              data4.method_8(ca_nhan_cua_hang_item_loai.class23_0.GetItem_ID);
                              data4.method_8(num2);
                              data4.Write2(num3);
                              data4.Write2(ca_nhan_cua_hang_item_loai.int_1);
                              data4.method_8(ca_nhan_cua_hang_item_loai.long_0);
                              data4.Write4(ca_nhan_cua_hang_item_loai.class23_0.FLD_MAGIC0);
                              data4.Write4(ca_nhan_cua_hang_item_loai.class23_0.FLD_MAGIC1);
                              data4.Write4(ca_nhan_cua_hang_item_loai.class23_0.FLD_MAGIC2);
                              data4.Write4(ca_nhan_cua_hang_item_loai.class23_0.FLD_MAGIC3);
                              data4.Write4(ca_nhan_cua_hang_item_loai.class23_0.FLD_MAGIC4);
                              data4.Write2(ca_nhan_cua_hang_item_loai.class23_0.FLD_FJ_MAGIC0);
                              data4.Write2(ca_nhan_cua_hang_item_loai.class23_0.FLD_FJ_MAGIC1);
                              data4.Write2(ca_nhan_cua_hang_item_loai.class23_0.FLD_FJ_trung_cap_phu_hon);
                              data4.Write2(ca_nhan_cua_hang_item_loai.class23_0.FLD_FJ_MAGIC2);
                              data4.Write2(ca_nhan_cua_hang_item_loai.class23_0.FLD_FJ_MAGIC3);
                              data4.Write2(ca_nhan_cua_hang_item_loai.class23_0.FLD_FJ_MAGIC4);
                              data4.Write2(ca_nhan_cua_hang_item_loai.class23_0.FLD_FJ_MAGIC5);
                              data4.Write2(0);
                              data4.Write4(ca_nhan_cua_hang_item_loai.class23_0.FLD_FJ_KSSJ);
                              data4.Write4(ca_nhan_cua_hang_item_loai.class23_0.FLD_FJ_JSSJ);
                              if (ca_nhan_cua_hang_item_loai.class23_0.FLD_keo_dai_suc_manh != 0)
                              {
                                    data4.Write2(ca_nhan_cua_hang_item_loai.class23_0.FLD_keo_dai_suc_manh);
                              }
                              else
                              {
                                    data4.Write2(0);
                              }
                              data4.Write4(ca_nhan_cua_hang_item_loai.class23_0.FLD_FJ_thuc_tinh);
                              data4.Write2(0);
                              data4.Write2(ca_nhan_cua_hang_item_loai.class23_0.FLD_FJ_tien_hoa);
                              data4.Write2(0);
                              data4.Write4(0);
                              data4.Write4(0);
                              data4.method_8(num2);
                              if (base.Client != null)
                              {
                                    base.Client.method_4(data4, 0xcf00, base.UserSessionID);
                              }
                              base.GameMessage("You can not buy less gold", 9, "system message");
                              return;
                        }
                        switch (num)
                        {
                              case 0x2faf080b:
                              case 0x2faf080c:
                              case 0x2faf080d:
                              case 0x2faf0802:
                              case 0x2faf0801:
                              case 0x2faf0817:
                              case 0x2faf0818:
                              case 0x2faf0819:
                              case 0x2faf081a:
                              case 0x2faf081b:
                              case 0x2faf081c:
                              case 0x2faf083d:
                              case 0x2faf083e:
                                    break;

                              default:
                                    vat_pham_loai = base.NHAN_NHAN_VAT_ITEM_TOAN_BO_ID(players, num2);
                                    goto Label_0E48;
                        }
                        vat_pham_loai = base.UNKNOWN_107(players, num2, ca_nhan_cua_hang_item_loai.class23_0.FLD_MAGIC0);
                        Label_0E48:
                        if (vat_pham_loai != null)
                        {
                              if (BitConverter.ToInt32(vat_pham_loai.VAT_PHAM_SO_LUONG, 0) < ca_nhan_cua_hang_item_loai.int_0)
                              {
                                    Form1.WriteLine(6, string.Concat(new object[] { "非法复制_个人商店_进店1[", base.Userid, "]-[", base.UserName, "]VAT_PHAM名称[", vat_pham_loai.method_13(), "] VAT_PHAM_SO_LUONG[", BitConverter.ToInt32(vat_pham_loai.VAT_PHAM_SO_LUONG, 0), "] 数量[", ca_nhan_cua_hang_item_loai.int_0, "]" }));
                                    return;
                              }
                              if ((World.Itme[BitConverter.ToInt32(vat_pham_loai.VAT_PHAM_ID, 0)].FLD_SIDE == 0) && (BitConverter.ToInt32(vat_pham_loai.VAT_PHAM_SO_LUONG, 0) > 1))
                              {
                                    Form1.WriteLine(6, string.Concat(new object[] { "非法复制_个人商店_进店2[", base.Userid, "]-[", base.UserName, "]VAT_PHAM名称[", vat_pham_loai.method_13(), "] VAT_PHAM_SO_LUONG[", BitConverter.ToInt32(vat_pham_loai.VAT_PHAM_SO_LUONG, 0), "] 数量[", ca_nhan_cua_hang_item_loai.int_0, "]" }));
                                    return;
                              }
                              if (World.Co_hay_khong_mo_ra_cua_hang_CASH == 1)
                              {
                                    Form1.WriteLine(5, string.Concat(new object[] {
                            "[", players.Userid, "][", players.UserName, "] 新元宝商店买出VAT_PHAM :[", base.Userid, "][", base.UserName, "] (VAT_PHAM:", vat_pham_loai.method_13(), "/编号:", BitConverter.ToInt32(vat_pham_loai.method_5(), 0), "属性:[", vat_pham_loai.FLD_MAGIC0, ",", vat_pham_loai.FLD_MAGIC1,
                            ",", vat_pham_loai.FLD_MAGIC2, ",", vat_pham_loai.FLD_MAGIC3, ",", vat_pham_loai.FLD_MAGIC4, "] 价格[", ca_nhan_cua_hang_item_loai.long_0, "]"
                        }));
                              }
                              else
                              {
                                    Form1.WriteLine(5, string.Concat(new object[] {
                            "[", players.Userid, "][", players.UserName, "] 个人商店买出VAT_PHAM :[", base.Userid, "][", base.UserName, "] (VAT_PHAM:", vat_pham_loai.method_13(), "/编号:", BitConverter.ToInt32(vat_pham_loai.method_5(), 0), "属性:[", vat_pham_loai.FLD_MAGIC0, ",", vat_pham_loai.FLD_MAGIC1,
                            ",", vat_pham_loai.FLD_MAGIC2, ",", vat_pham_loai.FLD_MAGIC3, ",", vat_pham_loai.FLD_MAGIC4, "] 价格[", ca_nhan_cua_hang_item_loai.long_0, "]"
                        }));
                              }
                              if (World.Co_hay_khong_mo_ra_cua_hang_CASH == 1)
                              {
                                    players.KIEM_SOAT_CASH_SO_LIEU((int)(ca_nhan_cua_hang_item_loai.long_0 * num3), 1);
                                    base.KIEM_SOAT_CASH_SO_LIEU((int)(ca_nhan_cua_hang_item_loai.long_0 * num3), 0);
                              }
                              else
                              {
                                    players.Player_Money += ca_nhan_cua_hang_item_loai.long_0 * num3;
                                    base.Player_Money -= ca_nhan_cua_hang_item_loai.long_0 * num3;
                              }
                              RxjhClass.INSERT_ITEM_GHI_CHEP(players.Userid, players.UserName, base.Userid, base.UserName, (double)BitConverter.ToInt64(vat_pham_loai.Item_toan_bo_ID, 0), BitConverter.ToInt32(vat_pham_loai.VAT_PHAM_ID, 0), vat_pham_loai.method_13(), num3, string.Concat(new object[] { vat_pham_loai.FLD_MAGIC0, "-", vat_pham_loai.FLD_MAGIC1, "-", vat_pham_loai.FLD_MAGIC2, "-", vat_pham_loai.FLD_MAGIC3, "-", vat_pham_loai.FLD_MAGIC4, "初", vat_pham_loai.FLD_FJ_thuc_tinh, "中", vat_pham_loai.FLD_FJ_trung_cap_phu_hon, "进", vat_pham_loai.FLD_FJ_tien_hoa }), (int)(ca_nhan_cua_hang_item_loai.long_0 * num3), "个人商店");
                              PacketData data5 = new PacketData();
                              data5.method_2(2);
                              data5.method_2(2);
                              data5.Write4(num5);
                              data5.method_8(ca_nhan_cua_hang_item_loai.class23_0.GetItem_ID);
                              data5.method_8(num2);
                              data5.Write2(num3);
                              data5.Write2(ca_nhan_cua_hang_item_loai.int_1);
                              data5.method_8(ca_nhan_cua_hang_item_loai.long_0);
                              data5.Write4(ca_nhan_cua_hang_item_loai.class23_0.FLD_MAGIC0);
                              data5.Write4(ca_nhan_cua_hang_item_loai.class23_0.FLD_MAGIC1);
                              data5.Write4(ca_nhan_cua_hang_item_loai.class23_0.FLD_MAGIC2);
                              data5.Write4(ca_nhan_cua_hang_item_loai.class23_0.FLD_MAGIC3);
                              data5.Write4(ca_nhan_cua_hang_item_loai.class23_0.FLD_MAGIC4);
                              data5.Write2(ca_nhan_cua_hang_item_loai.class23_0.FLD_FJ_MAGIC0);
                              data5.Write2(ca_nhan_cua_hang_item_loai.class23_0.FLD_FJ_MAGIC1);
                              data5.Write2(ca_nhan_cua_hang_item_loai.class23_0.FLD_FJ_trung_cap_phu_hon);
                              data5.Write2(ca_nhan_cua_hang_item_loai.class23_0.FLD_FJ_MAGIC2);
                              data5.Write2(ca_nhan_cua_hang_item_loai.class23_0.FLD_FJ_MAGIC3);
                              data5.Write2(ca_nhan_cua_hang_item_loai.class23_0.FLD_FJ_MAGIC4);
                              data5.Write2(ca_nhan_cua_hang_item_loai.class23_0.FLD_FJ_MAGIC5);
                              data5.Write2(0);
                              data5.Write4(ca_nhan_cua_hang_item_loai.class23_0.FLD_FJ_KSSJ);
                              data5.Write4(ca_nhan_cua_hang_item_loai.class23_0.FLD_FJ_JSSJ);
                              if (ca_nhan_cua_hang_item_loai.class23_0.FLD_keo_dai_suc_manh != 0)
                              {
                                    data5.Write2(ca_nhan_cua_hang_item_loai.class23_0.FLD_keo_dai_suc_manh);
                              }
                              else
                              {
                                    data5.Write2(0);
                              }
                              data5.Write4(ca_nhan_cua_hang_item_loai.class23_0.FLD_FJ_thuc_tinh);
                              data5.Write2(0);
                              data5.Write2(ca_nhan_cua_hang_item_loai.class23_0.FLD_FJ_tien_hoa);
                              data5.Write2(0);
                              data5.Write4(0);
                              data5.Write4(0);
                              data5.method_8(num2);
                              if (base.Client != null)
                              {
                                    base.Client.method_5(data5, 0xcf00, base.UserSessionID, 0);
                              }
                              if (players.Client != null)
                              {
                                    players.Client.method_5(data5, 0xcf00, base.UserSessionID, 0);
                              }
                              this.TANG_CUONG_VAT_PHAM(vat_pham_loai.Item_toan_bo_ID, vat_pham_loai.VAT_PHAM_ID, num6, BitConverter.GetBytes(num3), vat_pham_loai.Item_thuoc_tinh, vat_pham_loai.FLD_MAGIC0);
                              players.LAM_GIAM_DI_VAT_PHAM(vat_pham_loai.VAT_PHAM_VI_TRI, num3);
                              if ((ca_nhan_cua_hang_item_loai.int_0 - num3) > 0)
                              {
                                    ca_nhan_cua_hang_item_loai.int_0 -= num3;
                              }
                              else if (players.PlayerShop.CUA_HANG_ITEM_DANH_SACH.ContainsKey(num2))
                              {
                                    CA_NHAN_CUA_HANG_ITEM_LOAI local1 = players.PlayerShop.CUA_HANG_ITEM_DANH_SACH[num2];
                                    players.PlayerShop.CUA_HANG_ITEM_DANH_SACH.Remove(num2);
                              }
                              if (World.Co_hay_khong_mo_ra_cua_hang_CASH == 1)
                              {
                                    base.UPDATE_RXPIONT();
                                    players.UPDATE_RXPIONT();
                              }
                              else
                              {
                                    base.UpdateMoneyAndWeight();
                                    players.UpdateMoneyAndWeight();
                              }
                        }
                        if (players.PlayerShop.CUA_HANG_ITEM_DANH_SACH.Count == 0)
                        {
                              players.PlayerShop.PersonStore_Open = false;
                              players.PlayerShop.CUA_HANG_ITEM_DANH_SACH.Clear();
                              players.PlayerShop.class15_0 = null;
                              players.PlayerShop.Dispose();
                              players.PlayerShop = null;
                              players.OpenWarehouse = false;
                              byte[] buffer8 = Converter.hexStringToByte("AA551500000000CF000600030319000000000000000000000055AA");
                              Buffer.BlockCopy(buffer2, 0, buffer8, 13, 4);
                              Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, buffer8, 5, 2);
                              if (base.Client != null)
                              {
                                    base.Client.Send(buffer8, buffer8.Length);
                              }
                              byte[] buffer9 = Converter.hexStringToByte("AA551100000000CD0002000404000000000000000055AA");
                              Buffer.BlockCopy(BitConverter.GetBytes(players.UserSessionID), 0, buffer9, 5, 2);
                              if (players.Client != null)
                              {
                                    players.Client.Send(buffer9, buffer9.Length);
                              }
                              byte[] buffer10 = Converter.hexStringToByte("AA551B00000000CA000C000100000000000000FFFFFFFF000000000000000055AA");
                              Buffer.BlockCopy(BitConverter.GetBytes(players.UserSessionID), 0, buffer10, 15, 2);
                              Buffer.BlockCopy(BitConverter.GetBytes(players.UserSessionID), 0, buffer10, 5, 2);
                              if (players.Client != null)
                              {
                                    players.Client.Send(buffer10, buffer10.Length);
                              }
                              players.vmethod_0(buffer10, buffer10.Length);
                              base.bool_5 = false;
                              base.int_0 = 0;
                              base.OpenWarehouse = false;
                        }
                        return;
                        Label_17A1:
                        this.ROI_KHOI_SHOP(num5);
                        Form1.WriteLine(0x4d, string.Concat(new object[] { "非法购买VAT_PHAM_个人商店_负数VAT_PHAM[", base.Userid, "]-[", base.UserName, "]VAT_PHAM名称[", ca_nhan_cua_hang_item_loai.class23_0.method_13(), "] VAT_PHAM_SO_LUONG[", ca_nhan_cua_hang_item_loai.int_0, "]" }));
                  }
                  catch (Exception exception)
                  {
                        Form1.WriteLine(1, "个人商店进店出错![" + base.Userid + "]-[" + base.UserName + "]" + exception.Message);
                  }
            }

            public void VAT_PHAM_GIAM_DI_THUOC_TINH_SO_LUONG(int int_128, int int_129)
            {
                  try
                  {
                        byte[] dst = new byte[4];
                        byte[] buffer2 = new byte[4];
                        byte[] buffer3 = new byte[8];
                        byte[] buffer4 = new byte[4];
                        byte[] buffer5 = new byte[0x38];
                        Buffer.BlockCopy(base.TRANG_BI_LAN_BAO_VAY[int_128].Item_byte, 12, buffer2, 0, 4);
                        Buffer.BlockCopy(base.TRANG_BI_LAN_BAO_VAY[int_128].Item_byte, 0x10, dst, 0, 4);
                        Buffer.BlockCopy(base.TRANG_BI_LAN_BAO_VAY[int_128].Item_byte, 8, buffer4, 0, 4);
                        Buffer.BlockCopy(base.TRANG_BI_LAN_BAO_VAY[int_128].Item_byte, 0, buffer3, 0, 8);
                        int num = BitConverter.ToInt32(dst, 0) - int_129;
                        if (num <= 0x77359400)
                        {
                              this.LAM_GIAM_DI_VAT_PHAM(int_128, 1);
                        }
                        else
                        {
                              this.LAM_GIAM_DI_VAT_PHAM(int_128, BitConverter.ToInt32(buffer2, 0));
                              Buffer.BlockCopy(BitConverter.GetBytes(num), 0, buffer5, 0, 4);
                              this.TANG_CUONG_VAT_PHAM(buffer3, buffer4, int_128, buffer2, buffer5);
                        }
                  }
                  catch (Exception exception)
                  {
                        Form1.WriteLine(1, string.Concat(new object[] { "VAT_PHAM_GIAM_DI_THUOC_TINH_SO_LUONG出错 [", base.Userid, "][", base.UserName, "] VI_TRI[", int_128, "] 减去数量[", int_129, "]", exception.Message }));
                  }
            }

            public void VIEN_DA_PHU_HON()
            {
                  int num = 0;
                  int num2 = 0;
                  int num3 = 0;
                  int num4 = 0;
                  int num5 = 0;
                  for (int i = 0; i < 0x24; i++)
                  {
                        if (BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[i].VAT_PHAM_ID, 0) == 0x3b9acaa1)
                        {
                              num = 1;
                        }
                        else if (BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[i].VAT_PHAM_ID, 0) == 0x3b9acaa2)
                        {
                              num2 = 1;
                        }
                        else if (BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[i].VAT_PHAM_ID, 0) == 0x3b9acaa3)
                        {
                              num3 = 1;
                        }
                        else if (BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[i].VAT_PHAM_ID, 0) == 0x3b9acaa4)
                        {
                              num4 = 1;
                        }
                        else if (BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[i].VAT_PHAM_ID, 0) == 0x3b9acac7)
                        {
                              num5 = 1;
                        }
                  }
                  if (((num == 0) || (num2 == 0)) || (((num3 == 0) || (num4 == 0)) || (num5 == 0)))
                  {
                        base.GameMessage("Five kinds of spirit of jade are attached to cobble together a mix of stone can be redeemed only", 9, "Message");
                  }
                  else
                  {
                        for (int j = 0; j < 0x24; j++)
                        {
                              if (BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[j].VAT_PHAM_ID, 0) == 0x3b9acaa1)
                              {
                                    this.LAM_GIAM_DI_VAT_PHAM(j, 1);
                              }
                              else if (BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[j].VAT_PHAM_ID, 0) == 0x3b9acaa2)
                              {
                                    this.LAM_GIAM_DI_VAT_PHAM(j, 1);
                              }
                              else if (BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[j].VAT_PHAM_ID, 0) == 0x3b9acaa3)
                              {
                                    this.LAM_GIAM_DI_VAT_PHAM(j, 1);
                              }
                              else if (BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[j].VAT_PHAM_ID, 0) == 0x3b9acaa4)
                              {
                                    this.LAM_GIAM_DI_VAT_PHAM(j, 1);
                              }
                              else if (BitConverter.ToInt32(base.TRANG_BI_LAN_BAO_VAY[j].VAT_PHAM_ID, 0) == 0x3b9acac7)
                              {
                                    this.LAM_GIAM_DI_VAT_PHAM(j, 1);
                              }
                        }
                        int num7 = base.DUOC_KIEN_HANG_RONG(this);
                        if (num7 != -1)
                        {
                              byte[] bytes = BitConverter.GetBytes(RxjhClass.GetDBItmeId());
                              this.TANG_CUONG_VAT_PHAM_2(bytes, BitConverter.GetBytes(0x3b9acb6d), num7, BitConverter.GetBytes(1), new byte[0x38]);
                        }
                  }
            }

            public int VIP_BAN_DO(int int_128)
            {
                  if (base.FLD_VIP == 0)
                  {
                        char[] separator = new char[] { ';' };
                        string[] strArray = World.VIP_ban_do.Split(separator);
                        for (int i = 0; i < strArray.Length; i++)
                        {
                              if (TBL_XWWL_MAP.smethod_0(int_128) == strArray[i])
                              {
                                    base.GameMessage("This map is a member of the map name, non-members can not enter", 9, "system hint");
                                    return 0;
                              }
                        }
                  }
                  return 1;
            }

            public override void vmethod_0(byte[] byte_5, int int_128)
            {
                  if (World.jlMsg == 1)
                  {
                        Form1.WriteLine(0, "Players_发送当前范围广播数据");
                  }
                  try
                  {
                        if (this.threadSafeDictionary_5 != null)
                        {
                              Queue queue = Queue.Synchronized(new Queue());
                              foreach (Players players in this.threadSafeDictionary_5.Values)
                              {
                                    queue.Enqueue(players);
                              }
                              while (queue.Count > 0)
                              {
                                    if (World.jlMsg == 1)
                                    {
                                          Form1.WriteLine(0, "发送当前范围广播数据");
                                    }
                                    Players players2 = (Players)queue.Dequeue();
                                    if ((players2.Client != null) && players2.Client.Running)
                                    {
                                          players2.Client.Send(byte_5, int_128);
                                    }
                              }
                        }
                  }
                  catch (Exception exception)
                  {
                        Form1.WriteLine(1, "发送当前范围广播数据出错![" + base.Userid + "]-[" + base.UserName + "]" + exception.Message);
                  }
            }

            public override void vmethod_1(PacketData class143_0, int int_128, int int_129)
            {
                  try
                  {
                        if (this.threadSafeDictionary_5 != null)
                        {
                              Queue queue = Queue.Synchronized(new Queue());
                              foreach (Players players in this.threadSafeDictionary_5.Values)
                              {
                                    queue.Enqueue(players);
                              }
                              while (queue.Count > 0)
                              {
                                    if (World.jlMsg == 1)
                                    {
                                          Form1.WriteLine(0, "发送当前范围广播数据");
                                    }
                                    Players players2 = (Players)queue.Dequeue();
                                    if ((players2.Client != null) && players2.Client.Running)
                                    {
                                          players2.Client.method_4(class143_0, int_128, int_129);
                                    }
                              }
                        }
                  }
                  catch (Exception exception)
                  {
                        Form1.WriteLine(1, "发送当前范围广播数据出错![" + base.Userid + "]-[" + base.UserName + "]" + exception.Message);
                  }
            }

            public override void vmethod_2(PacketData class143_0, int int_128, int int_129, int int_130)
            {
                  try
                  {
                        if (this.threadSafeDictionary_5 != null)
                        {
                              Queue queue = Queue.Synchronized(new Queue());
                              foreach (Players players in this.threadSafeDictionary_5.Values)
                              {
                                    queue.Enqueue(players);
                              }
                              while (queue.Count > 0)
                              {
                                    if (World.jlMsg == 1)
                                    {
                                          Form1.WriteLine(0, "发送当前范围广播数据new");
                                    }
                                    Players players2 = (Players)queue.Dequeue();
                                    if ((players2.Client != null) && players2.Client.Running)
                                    {
                                          players2.Client.method_5(class143_0, int_128, int_129, (byte)int_130);
                                    }
                              }
                        }
                  }
                  catch (Exception exception)
                  {
                        Form1.WriteLine(1, "发送当前范围广播数据出错new![" + base.Userid + "]-[" + base.UserName + "]" + exception.Message);
                  }
            }

            public void VO_HUAN_HE_THONG(Players class15_0, Players class15_1)
            {
                  if (class15_1.Player_FLD_LEVEL < World.Vo_huan_bao_ve_Dang_cap)
                  {
                        base.GameMessage("You kill a rating of less than" + World.Vo_huan_bao_ve_Dang_cap.ToString() + "Players can not get Wu Xun!", 50, "");
                  }
                  else if (class15_1.Player_WuXun <= 0)
                  {
                        base.GameMessage("To have been killed over Fangwu Jun, Wu Xun of you are not. Lenient it heroes!", 50, "");
                  }
                  else
                  {
                        char[] separator = new char[] { ';' };
                        string[] strArray = World.Tu_vong_giam_thieu_Vo_huan_So_luong.Split(separator);
                        char[] chArray2 = new char[] { ';' };
                        int num = 0;
                        int num2 = 0;
                        int num3 = 0;
                        int num4 = 0;
                        int num5 = int.Parse(strArray[0]);
                        int num6 = int.Parse(strArray[1]);
                        int num7 = int.Parse(strArray[2]);
                        int num8 = int.Parse(strArray[3]);
                        int num9 = int.Parse(strArray[4]);
                        int num10 = int.Parse(strArray[5]);
                        string[] textArray1 = World.He_thong_thu_ve_So_luong.Split(chArray2);
                        int num11 = int.Parse(textArray1[0]);
                        int num12 = int.Parse(textArray1[1]);
                        int num13 = int.Parse(textArray1[2]);
                        int num14 = int.Parse(textArray1[3]);
                        int num15 = int.Parse(textArray1[4]);
                        int num16 = int.Parse(textArray1[5]);
                        if ((class15_1.Player_FLD_LEVEL >= World.Vo_huan_bao_ve_Dang_cap) && (World.Vo_huan_bao_ve_Dang_cap < (World.Vo_huan_bao_ve_Dang_cap + 20)))
                        {
                              num = num5 - num11;
                              num2 = class15_1.Player_WuXun - num5;
                              num3 = num11;
                              num4 = num5;
                        }
                        else if ((class15_1.Player_FLD_LEVEL >= (World.Vo_huan_bao_ve_Dang_cap + 20)) && (World.Vo_huan_bao_ve_Dang_cap < (World.Vo_huan_bao_ve_Dang_cap + 40)))
                        {
                              num = num6 - num12;
                              num2 = class15_1.Player_WuXun - num6;
                              num3 = num12;
                              num4 = num6;
                        }
                        else if ((class15_1.Player_FLD_LEVEL >= (World.Vo_huan_bao_ve_Dang_cap + 40)) && (World.Vo_huan_bao_ve_Dang_cap < (World.Vo_huan_bao_ve_Dang_cap + 60)))
                        {
                              num = num7 - num13;
                              num2 = class15_1.Player_WuXun - num7;
                              num3 = num13;
                              num4 = num7;
                        }
                        else if ((class15_1.Player_FLD_LEVEL >= (World.Vo_huan_bao_ve_Dang_cap + 60)) && (World.Vo_huan_bao_ve_Dang_cap < (World.Vo_huan_bao_ve_Dang_cap + 80)))
                        {
                              num = num8 - num14;
                              num2 = class15_1.Player_WuXun - num8;
                              num3 = num14;
                              num4 = num8;
                        }
                        else if ((class15_1.Player_FLD_LEVEL >= (World.Vo_huan_bao_ve_Dang_cap + 80)) && (World.Vo_huan_bao_ve_Dang_cap < (World.Vo_huan_bao_ve_Dang_cap + 100)))
                        {
                              num = num9 - num15;
                              num2 = class15_1.Player_WuXun - num9;
                              num3 = num15;
                              num4 = num9;
                        }
                        else
                        {
                              num = num10 - num16;
                              num2 = class15_1.Player_WuXun - num10;
                              num3 = num16;
                              num4 = num10;
                        }
                        base.Player_WuXun += num;
                        base.GameMessage("Kill a player and successfully eaten for Fang Wuxun" + num.ToString() + "Point, system recovery" + num3.ToString() + "point!", 50, "");
                        if (num2 <= 0)
                        {
                              class15_1.Player_WuXun = 0;
                        }
                        else
                        {
                              class15_1.Player_WuXun -= num4;
                              class15_1.GameMessage("Are" + class15_0.UserName + "Kill, reduce" + num4.ToString() + "Wu Xun point!", 50, "");
                        }
                        class15_1.UpdatePowersAndStatus();
                        base.UpdatePowersAndStatus();
                  }
            }

            public void Wedding(int int_128)
            {
                  byte[] dst = Converter.hexStringToByte("AA5547000143057A17380026000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000003B0955AA");
                  Buffer.BlockCopy(BitConverter.GetBytes(int_128), 0, dst, 0x33, 4);
                  Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, dst, 5, 2);
                  if (base.Client != null)
                  {
                        base.Client.Send(dst, dst.Length);
                  }
            }

            public void XAC_NHAN_PHIEN_BAN(byte[] byte_5, int int_128)
            {
                  this.bool_15 = true;
                  try
                  {
                        if (World.Do_bo_thiet_bi_hinh_thuc == 0)
                        {
                              byte[] dst = Converter.hexStringToByte("AA5513000010051520040070070000000000000000000055AA");
                              Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, dst, 5, 2);
                              if (base.Client != null)
                              {
                                    base.Client.Send(dst, dst.Length);
                              }
                              base.Client.bool_5 = true;
                        }
                        else if (World.Do_bo_thiet_bi_hinh_thuc == 1)
                        {
                              Random random = new Random();
                              byte[] buffer2 = new byte[8];
                              for (int i = 0; i < buffer2.Length; i++)
                              {
                                    buffer2[i] = (byte)random.Next(1, 0xff);
                              }
                              base.Client.byte_3 = buffer2;
                              byte[] buffer3 = Converter.hexStringToByte("AA551B0000100515200400700700000000000000000000000000000000000055AA");
                              Buffer.BlockCopy(base.Client.byte_3, 0, buffer3, 15, 8);
                              Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, buffer3, 5, 2);
                              if (base.Client != null)
                              {
                                    base.Client.Send(buffer3, buffer3.Length);
                              }
                              base.Client.bool_5 = true;
                        }
                  }
                  catch (Exception exception)
                  {
                        Form1.WriteLine(1, string.Concat(new object[] { "连接登陆版本验证出错[", base.UserSessionID, "]-[", base.Client.ToString(), "]", exception.Message }));
                  }
            }

            public void XEM_KHI_CONG(byte[] byte_5, int int_128)
            {
                  try
                  {
                        Players players = World.smethod_1(BitConverter.ToInt16(byte_5, 15));
                        PacketData data = new PacketData();
                        data.Write4(1);
                        data.Write4(BitConverter.ToInt16(byte_5, 15));
                        data.Write2(players.Player_Qigong_point);
                        for (int i = 0; i < 15; i++)
                        {
                              if (i < 11)
                              {
                                    data.Write2(players.Qigong[i].int_0);
                                    if (players.Qigong[i].int_0 != 0)
                                    {
                                          if (players.Qigong[i].气功量 != 0)
                                          {
                                                data.Write2(((players.Qigong[i].气功量 + players.FLD_trang_bi_them_vao_Khi_cong) + players.FLD_nhan_vat_them_vao_khi_cong) + players.FLD_Vo_huan_them_vao_khi_cong);
                                          }
                                          else
                                          {
                                                data.Write2(0);
                                          }
                                    }
                                    else
                                    {
                                          data.Write2(0);
                                    }
                              }
                              else
                              {
                                    data.Write4(0);
                              }
                        }
                        foreach (THANG_THIEN_KHI_CONG_LOAI thang_thien_khi_cong_loai in players.THANG_THIEN_KHI_CONG.Values)
                        {
                              data.Write2(thang_thien_khi_cong_loai.KHI_CONG_ID);
                              if (thang_thien_khi_cong_loai.KHI_CONG_SO_LUONG != 0)
                              {
                                    data.Write2(((thang_thien_khi_cong_loai.KHI_CONG_SO_LUONG + players.FLD_trang_bi_them_vao_Khi_cong) + players.FLD_nhan_vat_them_vao_khi_cong) + players.FLD_Vo_huan_them_vao_khi_cong);
                              }
                              else
                              {
                                    data.Write2(0);
                              }
                        }
                        for (int j = 0; j < (15 - players.THANG_THIEN_KHI_CONG.Count); j++)
                        {
                              data.Write2(0);
                              data.Write2(0);
                        }
                        if (base.Client != null)
                        {
                              base.Client.method_5(data, 0x2419, base.UserSessionID, 1);
                        }
                  }
                  catch (Exception exception)
                  {
                        Form1.WriteLine(1, "See figure each other qigong Error:" + exception.Message);
                  }
            }

            public void XEM_LOAI_HINH_THIET_BI(byte[] byte_5, int int_128)
            {
                  this.Packet_Modify(byte_5, int_128);
                  Players players = World.smethod_1(BitConverter.ToInt16(byte_5, 15));
                  if (players != this)
                  {
                        if ((base.Player_FLD_LEVEL - players.Player_FLD_LEVEL) > World.Kiem_tra_trang_bi_Cap_bac_han_che)
                        {
                              base.GameMessage("Dang cap cua ban chenh lech " + World.Kiem_tra_trang_bi_Cap_bac_han_che + " nen khong the xem thong tin doi phuong!", 9, "Msg");
                        }
                        else if (players != null)
                        {
                              PacketData data = new PacketData();
                              data.Write4(1);
                              data.Write2(BitConverter.ToInt16(byte_5, 15));
                              data.Write2(0);
                              for (int i = 0; i < 15; i++)
                              {
                                    data.method_0(players.TRANG_BI_LAN_CHOC_THUNG_TRANG_BI[i].method_0());
                              }
                              if (base.Client != null)
                              {
                                    base.Client.method_4(data, 0x1319, base.UserSessionID);
                              }
                        }
                  }
            }

            public void XOA_BO_THO_LINH_PHU(byte[] byte_5, int int_128)
            {
                  try
                  {
                        this.Packet_Modify(byte_5, int_128);
                        byte[] dst = new byte[4];
                        byte[] bytes = new byte[15];
                        for (int i = 0; i < 15; i++)
                        {
                              if (byte_5[11 + i] == 0)
                              {
                                    break;
                              }
                              bytes[i] = byte_5[11 + i];
                        }
                        Encoding.Default.GetString(bytes).Replace("\0", "");
                        Buffer.BlockCopy(byte_5, 0x1a, dst, 0, 2);
                        int key = BitConverter.ToInt32(dst, 0);
                        base.hashtable_0.Remove(key);
                        byte[] buffer3 = Converter.hexStringToByte("AA5532000000000F10230001000A003132333400000000000000000000006500000054A8034400007041342FCB44000000000000000055AA");
                        Buffer.BlockCopy(dst, 0, buffer3, 13, 2);
                        Buffer.BlockCopy(bytes, 0, buffer3, 15, bytes.Length);
                        Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, buffer3, 5, 2);
                        if (base.Client != null)
                        {
                              base.Client.Send(buffer3, buffer3.Length);
                        }
                  }
                  catch (Exception exception)
                  {
                        Form1.WriteLine(1, "Remove soil magic Error![" + base.Userid + "]-[" + base.UserName + "]" + exception.Message);
                  }
            }

            public void XOA_VAT_PHAM_NHIEM_VU(int VAT_PHAM, int SO_LUONG)
            {
                  for (int i = 0; i < base.class22_0.Length; i++)
                  {
                        if (base.class22_0[i].VAT_PHAM_ID == VAT_PHAM)
                        {
                              QuestItem_Category category1 = base.class22_0[i];
                              category1.VAT_PHAM_SO_LUONG -= SO_LUONG;
                              this.NHAN_ITEM_NHIEM_VU(i, base.class22_0[i].VAT_PHAM_ID, base.class22_0[i].VAT_PHAM_SO_LUONG);
                              if (base.class22_0[i].VAT_PHAM_SO_LUONG == 0)
                              {
                                    this.NHAN_ITEM_NHIEM_VU(i, base.class22_0[i].VAT_PHAM_ID, 0);
                                    base.class22_0[i].byte_0 = new byte[8];
                              }
                        }
                  }
            }

            public void XUYEN_CHAM_DAN_TUYEN(byte[] byte_5, int int_128)
            {
                  if (int_128 == 0x31)
                  {
                        try
                        {
                              TBL_XWWL_ITEM tbl_xwwl_item;
                              this.Packet_Modify(byte_5, int_128);
                              byte[] dst = Converter.hexStringToByte("AA552B00012C01E1001C00030014DC143C00000000000001000000010000000000000000000000000000000000000055AA");
                              int index = byte_5[0x19];
                              int num2 = byte_5[0x15];
                              byte[] buffer2 = base.TRANG_BI_LAN_BAO_VAY[index].VAT_PHAM_ID;
                              if (World.Itme.TryGetValue(BitConverter.ToInt32(buffer2, 0), out tbl_xwwl_item) && (tbl_xwwl_item.FLD_RESIDE2 == 1))
                              {
                                    byte[] bytes = new byte[4];
                                    byte[] buffer4 = new byte[0x39];
                                    byte[] buffer5 = base.TRANG_BI_LAN_BAO_VAY[index].Item_toan_bo_ID;
                                    Buffer.BlockCopy(base.TRANG_BI_LAN_BAO_VAY[index].Item_byte, 0x10, buffer4, 0, 0x39);
                                    switch (base.TRANG_BI_LAN_BAO_VAY[index].GetItem_ID.ToString().Substring(1, 1))
                                    {
                                          case "1":
                                                bytes = BitConverter.GetBytes((int)(BitConverter.ToInt32(buffer2, 0) + 0x989680));
                                                break;

                                          case "2":
                                                bytes = BitConverter.GetBytes((int)(BitConverter.ToInt32(buffer2, 0) - 0x989680));
                                                break;
                                    }
                                    this.LAM_GIAM_DI_VAT_PHAM(index, 1);
                                    this.LAM_GIAM_DI_VAT_PHAM(num2, 1);
                                    this.TANG_CUONG_VAT_PHAM(buffer5, bytes, index, BitConverter.GetBytes(1), buffer4);
                                    Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, dst, 5, 2);
                                    if (base.Client != null)
                                    {
                                          base.Client.Send(dst, dst.Length);
                                    }
                              }
                        }
                        catch (Exception exception)
                        {
                              Form1.WriteLine(1, "使用穿针引线 出错 [" + base.Userid + "][" + base.UserName + "] " + exception.Message);
                        }
                  }
            }

            public void YEU_CAU_BANG_CHIEN_NHAC_NHO(int int_128)
            {
                  byte[] dst = Converter.hexStringToByte("AA551300013F003D10040004000000000000000000BE9A55AA");
                  Buffer.BlockCopy(BitConverter.GetBytes(int_128), 0, dst, 11, 4);
                  Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, dst, 5, 2);
                  if (base.Client != null)
                  {
                        base.Client.Send(dst, dst.Length);
                  }
            }

            public void YEU_CAU_HUY_BO_BANG_CHIEN_NHAC_NHO(int int_128)
            {
                  byte[] dst = Converter.hexStringToByte("AA551300013F003B10040001000000000000000000BE9A55AA");
                  Buffer.BlockCopy(BitConverter.GetBytes(int_128), 0, dst, 11, 4);
                  Buffer.BlockCopy(BitConverter.GetBytes(base.UserSessionID), 0, dst, 5, 2);
                  if (base.Client != null)
                  {
                        base.Client.Send(dst, dst.Length);
                  }
            }
      }
}

